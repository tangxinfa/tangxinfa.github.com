<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
               "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN" xml:lang="zh-CN">
<head>
<title>Redis使用记录</title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
<meta name="title" content="Redis使用记录"/>
<meta name="generator" content="Org-mode"/>
<meta name="generated" content="&lt;2012-12-16 Sun&gt;"/>
<meta name="author" content="tangxinfa"/>
<meta name="description" content=""/>
<meta name="keywords" content=""/>
<link rel='stylesheet' type='text/css' href='css/style.css' />
<script type="text/javascript">
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>

</head>
<body>

<div id="preamble">
<div class='nav-bar'><ul><li><a href='index.html'>博客</a></li></ul></div>
</div>

<div id="content">
<h1 class="title">Redis使用记录</h1>


<div class="tag-bar">
</div>


<div id="outline-container-1" class="outline-2">
<h2 id="sec-1">解决保存快照失败后redis无法写入的问题</h2>
<div class="outline-text-2" id="text-1">

<p>  用命令行工具连上后执行“set test 0”出现以下错误提示：
</p>


<pre class="example">MISCONF Redis is configured to save RDB snapshots, but is currently not able to persist on disk. Commands that may modify the data set are disabled. Please check Redis logs for details about the error.
</pre>

<p>
  这个应该是之前强制停止redis快照导致的，查看redis快照状态证实了这一点：
</p>


<pre class="example">redis 127.0.0.1:6379&gt; info
...
rdb_last_bgsave_status:err
...
</pre>

<p>
  通过关闭配置项stop-writes-on-bgsave-error解决该问题。
</p>


<pre class="example">redis 127.0.0.1:6379&gt; config set stop-writes-on-bgsave-error no
</pre>


        <div class="comment_header">评论</div>
        <div id="disqus_thread"></div>
        <script type="text/javascript">
            var disqus_shortname = 'kankananblog';
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        <div style="display:none;">
        <script type="text/javascript">
            var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Faa06d8a31344740ac23cbe6cf3d9f23e' type='text/javascript'%3E%3C/script%3E"));
        </script>
        </div>
</div>
</div>
</div>

<div id="postamble">
<p class="date">Date: &lt;2012-12-16 Sun&gt;</p>
<p class="author">Author: tangxinfa</p>
<p class="creator">Org version 7.8.02 with Emacs version 23</p>
<a href="http://validator.w3.org/check?uri=referer">Validate XHTML 1.0</a>

</div>
</body>
</html>
