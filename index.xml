<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>看看俺 - KanKanAn.com</title>
  <link href="http://blog.kankanan.comindex.xml" rel="self" />
  <link href="http://blog.kankanan.com"/>
  <updated>2013-04-09T12:00:00Z</updated>
  <id>http://blog.kankanan.comindex.xml</id>
  <entry><title type="html">开源项目管理系统：trac</title><author><name>nil</name></author><link href="http://blog.kankanan.com/posts/2014/03/10_5f006e90987976ee7ba174067cfb7edfff1atrac.html"/><updated>2014-03-10T00:44:00Z</updated><published>2014-03-10T00:44:00Z</published><id>posts/2014/03/10_5f006e90987976ee7ba174067cfb7edfff1atrac.html</id><category scheme="/tags/python.html" term="python" label="python"/><category scheme="/tags/trac.html" term="trac" label="trac"/><content type="html">&lt;p&gt;
  &#26368;&#36817;&#36127;&#36131;&#20026;&#20844;&#21496;&#25645;&#24314;&#39033;&#30446;&#31649;&#29702;&#31995;&#32479;&#65292;&#26377;&#22914;&#19979;&#35201;&#27714;&#65306;
&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;&#25903;&#25345;BUG&#31649;&#29702;

&lt;/li&gt;
&lt;li&gt;&#25903;&#25345;&#24080;&#21495;&#31649;&#29702;

&lt;/li&gt;
&lt;li&gt;&#25903;&#25345;WIKI

&lt;/li&gt;
&lt;li&gt;&#25903;&#25345;&#20219;&#21153;&#20998;&#37197;

&lt;/li&gt;
&lt;li&gt;&#25903;&#25345;&#20013;&#25991;
&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;
  &#30001;&#20110;&#26102;&#38388;&#32039;&#36843;&#65292;&#24863;&#35273; &lt;code&gt;redmine&lt;/code&gt; &#30028;&#38754;&#26356;&#28418;&#20142;&#65292;&#30456;&#20851;&#36164;&#26009;&#20063;&#22909;&#25214;&#65292;&#32780;&#19988;&#24080;&#21495;&#31649;&#29702;&#12289;&#20013;&#25991;&#25903;&#25345;&#26041;&#38754;&#30340;&#24456;&#19981;&#38169;&#65292;&#25152;&#20197;&#36873;&#25321;&#20102; &lt;code&gt;redmine&lt;/code&gt; &#12290;&#20854;&#23454;&#24515;&#37324;&#38754;&#19968;&#30452;&#24076;&#26395;&#36873;&#30340;&#26159;&#22522;&#20110; &lt;code&gt;python&lt;/code&gt; &#24320;&#21457;&#30340;&#31995;&#32479;&#65292;&#19968;&#26041;&#38754;&#33258;&#24050;&#21916;&#27426; &lt;code&gt;python&lt;/code&gt; &#65292;&#21478;&#22806;&#22242;&#38431;&#20013;&#23545; &lt;code&gt;python&lt;/code&gt; &#29087;&#24713;&#30340;&#20154;&#27604;&#36739;&#22810;&#65292;&#36825;&#26679;&#21518;&#38754;&#38656;&#35201;&#20570;&#20108;&#27425;&#24320;&#21457;&#26102;&#20250;&#23481;&#26131;&#19968;&#20123;&#12290;
&lt;/p&gt;
&lt;p&gt;
  &lt;code&gt;trac&lt;/code&gt; &#32473;&#20154;&#30340;&#31532;&#19968;&#24863;&#35273;&#26159;&#22826;&#36807;&#20110;&#31616;&#21333;&#31895;&#31961;&#20102;&#12290;&#30028;&#38754;&#26420;&#23454;&#31616;&#27905;&#23578;&#21487;&#25509;&#21463;&#12289;&#28436;&#31034;&#31449;&#28857;&#20013;&#25991;&#21270;&#19981;&#24443;&#24213;&#12289;&#33258;&#24050;&#23433;&#35013;&#30340;&#26102;&#20505;&#36739;&#20043; &lt;code&gt;redmine&lt;/code&gt; &#26356;&#26159;&#30933;&#30933;&#32458;&#32458;&#12290;=trac= &#20351;&#29992; &lt;code&gt;Babel&lt;/code&gt; &#36827;&#34892;&#22810;&#35821;&#35328;&#25903;&#25345;&#65292;&#24403;&#21069;&#30340;trac&#31283;&#23450;&#29256;&#65288;1.0&#65289;&#23384;&#22312;&#20013;&#25991;&#25903;&#25345;&#26041;&#38754;&#30340;Bug&#65306;&lt;a href="http://trac.edgewall.org/ticket/10903"&gt;Wrong `NullTranslations` class in functional tests&lt;/a&gt; &#65292;&#25105;&#22312;&#23433;&#35013;&#36807;&#31243;&#20013;&#23601;&#36935;&#21040;&#20102;&#65292;&#27491;&#26159;&#36825;&#20010;&#38382;&#39064;&#25165;&#35273;&#24471;&#20808;&#30740;&#31350;&#19968;&#19979; &lt;code&gt;Babel&lt;/code&gt; &#65292;&#20110;&#26159;&#26377;&#20102;&#19978;&#19968;&#31687;&#25991;&#31456; &#12298;&lt;a href="http://blog.kankanan.com/posts/2014/03/09_python5e94752856fd96455316ff1ababel.html"&gt;python&#24212;&#29992;&#22269;&#38469;&#21270;&#65306;Babel&lt;/a&gt;&#12299;&#65292; &lt;code&gt;trac&lt;/code&gt; &#19979;&#19968;&#29256;&#65288;1.1&#65289;&#23545;&#36825;&#20010;&#38382;&#39064;&#36827;&#34892;&#20102;&#20462;&#22797;&#12290; &#32593;&#32476;&#19978;&#26377;&#24456;&#22810;&#20154;&#23545; &lt;code&gt;trac&lt;/code&gt; &#22840;&#36190;&#26377;&#21152;&#65292;&#21478;&#22806; &lt;code&gt;trac&lt;/code&gt; &#36824;&#26377;&#25345;&#32493;&#38598;&#25104;&#30340;&#25554;&#20214;&#65306; &lt;a href="http://bitten.edgewall.org/"&gt;Bitten&lt;/a&gt; &#65292; &#22312;&#23545; &lt;code&gt;Babel&lt;/code&gt; &#26377;&#19968;&#23450;&#20102;&#35299;&#21518;&#65292;&#25105;&#32456;&#20110;&#40723;&#27668;&#21191;&#27668;&#30740;&#31350;&#36215; &lt;a href="http://trac.edgewall.org/"&gt;trac&lt;/a&gt; &#12290;
&lt;/p&gt;

&lt;div id="outline-container-1" class="outline-3"&gt;
&lt;h3 id="sec-1"&gt;&#23433;&#35013;&#26368;&#26032;&#29256; &lt;code&gt;trac&lt;/code&gt;&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-1"&gt;


&lt;ul&gt;
&lt;li&gt;&#20351;&#29992;&#23398;&#20064; &lt;code&gt;Babel&lt;/code&gt; &#26102;&#24314;&#30340;&#34394;&#25311;&#29615;&#22659;




&lt;pre class="src src-sh"&gt;workon LearnBabel
&lt;/pre&gt;


&lt;/li&gt;
&lt;li&gt;&#20174;&#26368;&#26032;&#28304;&#20195;&#30721;&#23433;&#35013; &lt;code&gt;trac&lt;/code&gt;




&lt;pre class="src src-sh"&gt;svn checkout http://svn.edgewall.org/repos/trac/trunk trac
&lt;span style="color: #729fcf;"&gt;cd&lt;/span&gt; trac
python ./setup.py install
&lt;/pre&gt;


&lt;/li&gt;
&lt;li&gt;&#24314;&#19968;&#20010;&#39033;&#30446;&#30475;&#30475;&#25928;&#26524;




&lt;pre class="src src-sh"&gt;&lt;span style="color: #729fcf;"&gt;cd&lt;/span&gt; ~/Examples/python
trac-admin LearnTrac initenv
tracd --port 8080 LearnTrac &amp;amp;
xdg-open http://localhost:8080
&lt;/pre&gt;

&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;
   &#24863;&#35273; &lt;code&gt;trac&lt;/code&gt; &#30340;&#20013;&#25991;&#21270;&#20570;&#24471;&#36824;&#19981;&#22815;&#24443;&#24213;&#65292;&#20294;&#26159;&#20851;&#38190;&#30340;&#37096;&#20301;&#37117;&#24050;&#32463;&#20013;&#25991;&#21270;&#65292;&#19981;&#24433;&#21709;&#23545;&#25972;&#20010;&#31995;&#32479;&#30340;&#20351;&#29992;&#65292;&#26377;&#20102; &lt;code&gt;Babel&lt;/code&gt; &#30340;&#32463;&#39564;&#20043;&#21518;&#23545;&#23427;&#36827;&#34892;&#20013;&#25991;&#21270;&#26159;&#24456;&#23481;&#26131;&#30340;&#65292;&#32763;&#35793;&#21518;&#25552;&#20132;&#32473; &lt;code&gt;trac&lt;/code&gt; &#24320;&#21457;&#20154;&#21592;&#65292;&#20063;&#31639;&#26159;&#22238;&#39304;&#24320;&#28304;&#31038;&#21306;&#20102;&#12290;
&lt;/p&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;div id="outline-container-2" class="outline-3"&gt;
&lt;h3 id="sec-2"&gt;&#37197;&#32622;&#29992;&#25143;&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-2"&gt;


&lt;ul&gt;
&lt;li&gt;&#21019;&#24314;&#24080;&#21495;&#25991;&#20214; &lt;code&gt;LearnTrac/conf/users.digest&lt;/code&gt;




&lt;pre class="src src-sh"&gt;&lt;span style="color: #eeeeec;"&gt;user&lt;/span&gt;=admin
&lt;span style="color: #eeeeec;"&gt;realm&lt;/span&gt;=localhost
&lt;span style="color: #eeeeec;"&gt;password&lt;/span&gt;=admin
&lt;span style="color: #eeeeec;"&gt;file&lt;/span&gt;=LearnTrac/conf/users.digest
&lt;span style="color: #729fcf;"&gt;echo&lt;/span&gt; ${&lt;span style="color: #eeeeec;"&gt;user&lt;/span&gt;}:${&lt;span style="color: #eeeeec;"&gt;realm&lt;/span&gt;}:$(&lt;span style="color: #fa8072;"&gt;printf&lt;/span&gt; &lt;span style="color: #ad7fa8; font-style: italic;"&gt;"${user}:${realm}:${password}"&lt;/span&gt; | md5sum - | sed -e &lt;span style="color: #ad7fa8; font-style: italic;"&gt;'s/\s\+-//'&lt;/span&gt;) &amp;gt;&amp;gt; ${&lt;span style="color: #eeeeec;"&gt;file&lt;/span&gt;}
&lt;/pre&gt;


&lt;/li&gt;
&lt;li&gt;&#37325;&#26032;&#21551;&#21160;&#26381;&#21153;




&lt;pre class="src src-python"&gt;tracd -p 8080 --&lt;span style="color: #eeeeec;"&gt;auth&lt;/span&gt;=&lt;span style="color: #ad7fa8; font-style: italic;"&gt;"LearnTrac,LearnTrac/conf/users.digest,localhost"&lt;/span&gt; LearnTrac
&lt;/pre&gt;

&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;
   &#29616;&#22312;&#21487;&#20197;&#20351;&#29992; &lt;code&gt;admin&lt;/code&gt; &#24080;&#21495;&#30331;&#24405;&#20102;
&lt;/p&gt;
&lt;p&gt;
   &#24080;&#21495;&#31649;&#29702;&#26041;&#38754; &lt;code&gt;trac&lt;/code&gt; &#27604;&#36739;&#24369;&#65292;&#21482;&#33021;&#36890;&#36807; &lt;code&gt;trac-admin&lt;/code&gt; &#21629;&#20196;&#34892;&#24037;&#20855;&#26469;&#31649;&#29702;&#65292;&#23567;&#22242;&#38431;&#20351;&#29992;&#36824;&#26159;&#21487;&#20197;&#25509;&#21463;&#30340;&#65292;&#21478;&#22806;&#20165;&#25903;&#25345;HTTP&#35748;&#35777;&#65292;&#37197;&#19978;HTTPS&#24067;&#32626;&#21040;&#22806;&#32593;&#20063;&#31639;&#26159;&#19981;&#38169;&#30340;&#36873;&#25321;&#12290;
&lt;/p&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;div id="outline-container-3" class="outline-3"&gt;
&lt;h3 id="sec-3"&gt;&#37197;&#32622;&#26435;&#38480;&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-3"&gt;


&lt;ul&gt;
&lt;li&gt;&#20026; &lt;code&gt;admin&lt;/code&gt; &#29992;&#25143;&#36171;&#20104;&#31649;&#29702;&#21592;&#26435;&#38480;




&lt;pre class="src src-python"&gt;trac-admin LearnTrac permission add admin TRAC_ADMIN
&lt;/pre&gt;

&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;
   &#29616;&#22312;&#21487;&#20197;&#22312;WEB&#30028;&#38754;&#19978;&#30475;&#21040;&#8220;&#31649;&#29702;&#8221;&#26631;&#31614;&#39029;&#20102;&#65292;&#21487;&#20197;&#22312;WEB&#30028;&#38754;&#19978;&#23545;&#26435;&#38480;&#36827;&#34892;&#37197;&#32622;&#12290;
&lt;/p&gt;&lt;/div&gt;
&lt;/div&gt;
</content></entry><entry><title type="html">python应用国际化：Babel</title><author><name>nil</name></author><link href="http://blog.kankanan.com/index.html"/><updated>2014-03-09T19:54:00Z</updated><published>2014-03-09T19:54:00Z</published><id>index.html</id><category scheme="/tags/python.html" term="python" label="python"/><category scheme="/tags/babel.html" term="babel" label="babel"/><content type="html">&lt;p&gt;
  &lt;a href="http://babel.pocoo.org/"&gt;Babel&lt;/a&gt; &#26159; &lt;code&gt;Python&lt;/code&gt; &#30340;&#19968;&#20010;&#22269;&#38469;&#21270;&#24037;&#20855;&#21253;&#65292;&#21407;&#26412;&#20026;&lt;a href="#Edgewall.org"&gt;Edgewall.org&lt;/a&gt;&#19979;&#30340;&#19968;&#20010;&#39033;&#30446;&#65292;&#29616;&#22312;&#24050;&#32463;&#36716;&#20026;&#30001;&lt;a href="#pocoo.org"&gt;pocoo.org&lt;/a&gt;&#32500;&#25252;&#12290;
&lt;/p&gt;

&lt;div id="outline-container-1" class="outline-3"&gt;
&lt;h3 id="sec-1"&gt;&#32479;&#19968;&#31649;&#29702; &lt;code&gt;Python&lt;/code&gt; &#34394;&#25311;&#29615;&#22659;&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-1"&gt;





&lt;pre class="src src-sh"&gt;yaourt -S python-virtualenvwrapper
mkdir $&lt;span style="color: #eeeeec;"&gt;HOME&lt;/span&gt;/.virtualenvs
&lt;span style="color: #729fcf;"&gt;echo&lt;/span&gt; &lt;span style="color: #ad7fa8; font-style: italic;"&gt;'export WORKON_HOME=$HOME/.virtualenvs'&lt;/span&gt; &amp;gt;&amp;gt; ~/.bashrc
&lt;span style="color: #729fcf;"&gt;echo&lt;/span&gt; &lt;span style="color: #ad7fa8; font-style: italic;"&gt;'source virtualenvwrapper.sh'&lt;/span&gt; &amp;gt;&amp;gt; ~/.bashrc
&lt;span style="color: #729fcf;"&gt;source&lt;/span&gt; ~/.bashrc
&lt;/pre&gt;


&lt;/div&gt;

&lt;/div&gt;

&lt;div id="outline-container-2" class="outline-3"&gt;
&lt;h3 id="sec-2"&gt;&#24314;&#31435;&#23398;&#20064; &lt;code&gt;Babel&lt;/code&gt; &#19987;&#29992;&#34394;&#25311;&#29615;&#22659;&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-2"&gt;





&lt;pre class="src src-sh"&gt;mkvirtualenv --python=/usr/bin/python2 --no-site-packages LearnBabel
&lt;/pre&gt;


&lt;/div&gt;

&lt;/div&gt;

&lt;div id="outline-container-3" class="outline-3"&gt;
&lt;h3 id="sec-3"&gt;&#32534;&#35793;&#23433;&#35013; &lt;code&gt;Babel&lt;/code&gt;&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-3"&gt;





&lt;pre class="src src-sh"&gt;git clone https://github.com/mitsuhiko/babel.git
&lt;span style="color: #729fcf;"&gt;cd&lt;/span&gt; babel
pip install pytz
python setup.py import_cldr
pip install --editable .
&lt;/pre&gt;


&lt;/div&gt;

&lt;/div&gt;

&lt;div id="outline-container-4" class="outline-3"&gt;
&lt;h3 id="sec-4"&gt;&#24120;&#29992;&#20449;&#24687;&#22269;&#38469;&#21270;&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-4"&gt;





&lt;pre class="example"&gt;&amp;gt;&amp;gt;&amp;gt; from babel import Locale
&amp;gt;&amp;gt;&amp;gt; locale = Locale('en', 'US')
&amp;gt;&amp;gt;&amp;gt; print locale.territories['CN']
China
&amp;gt;&amp;gt;&amp;gt; locale = Locale('zh')
&amp;gt;&amp;gt;&amp;gt; print locale.territories['CN']
&#20013;&#22269;
&amp;gt;&amp;gt;&amp;gt; month_names = locale.months['format']['wide'].items()
&amp;gt;&amp;gt;&amp;gt; for idx, name in sorted(month_names):
...   print name
... 
&#19968;&#26376;
&#20108;&#26376;
&#19977;&#26376;
&#22235;&#26376;
&#20116;&#26376;
&#20845;&#26376;
&#19971;&#26376;
&#20843;&#26376;
&#20061;&#26376;
&#21313;&#26376;
&#21313;&#19968;&#26376;
&#21313;&#20108;&#26376;
&amp;gt;&amp;gt;&amp;gt; from datetime import date
&amp;gt;&amp;gt;&amp;gt; from babel.dates import format_date
&amp;gt;&amp;gt;&amp;gt; today = date.today()
&amp;gt;&amp;gt;&amp;gt; print format_date(today, locale='zh')
2014&#24180;3&#26376;9&#26085;
&lt;/pre&gt;


&lt;/div&gt;

&lt;/div&gt;

&lt;div id="outline-container-5" class="outline-3"&gt;
&lt;h3 id="sec-5"&gt;&#20219;&#24847;&#20449;&#24687;&#22269;&#38469;&#21270;&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-5"&gt;


&lt;ul&gt;
&lt;li&gt;&#21019;&#24314;python&#31243;&#24207;&#65306; &lt;code&gt;hello.py&lt;/code&gt;




&lt;pre class="src src-python"&gt;&lt;span style="color: #729fcf; font-weight: bold;"&gt;import&lt;/span&gt; gettext
gettext.bindtextdomain(&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'messages'&lt;/span&gt;, &lt;span style="color: #ad7fa8; font-style: italic;"&gt;'./hello.i18n'&lt;/span&gt;)
&lt;span style="color: #eeeeec;"&gt;_&lt;/span&gt; = gettext.gettext
&lt;span style="color: #729fcf; font-weight: bold;"&gt;print&lt;/span&gt; _(&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'Hello'&lt;/span&gt;)
&lt;/pre&gt;


&lt;/li&gt;
&lt;li&gt;&#21019;&#24314;Babel&#37197;&#32622;&#25991;&#20214;&#65306; &lt;code&gt;hello.babel&lt;/code&gt;




&lt;pre class="example"&gt;[python: hello.py]
&lt;/pre&gt;


&lt;/li&gt;
&lt;li&gt;&#20934;&#22791;&#32763;&#35793;&#25104;&#20013;&#25991;




&lt;pre class="src src-sh"&gt;mkdir hello.i18n
pybabel extract -F hello.babel . -o hello.i18n/messages.pot    &lt;span style="color: #888a85;"&gt;# &lt;/span&gt;&lt;span style="color: #888a85;"&gt;&amp;#20174;&amp;#28304;&amp;#20195;&amp;#30721;&amp;#20013;&amp;#25552;&amp;#21462;&amp;#21487;&amp;#32763;&amp;#35793;&amp;#30340;&amp;#25991;&amp;#26412;&amp;#21040;POT&amp;#65288;PO&amp;#27169;&amp;#26495;&amp;#65289;&amp;#25991;&amp;#20214;&lt;/span&gt;
pybabel init -l zh_CN -d ./hello.i18n -i ./hello.i18n/messages.pot    &lt;span style="color: #888a85;"&gt;# &lt;/span&gt;&lt;span style="color: #888a85;"&gt;&amp;#23558;POT&amp;#25991;&amp;#26412;&amp;#25335;&amp;#36125;&amp;#20986;&amp;#19968;&amp;#20221;&amp;#25351;&amp;#23450;&amp;#35821;&amp;#35328;&amp;#30340;PO&amp;#25991;&amp;#20214;&lt;/span&gt;
&lt;/pre&gt;


&lt;/li&gt;
&lt;li&gt;&#35793;&#25104;&#20013;&#25991;&#21518;&#30340;PO&#25991;&#20214;&#65306; &lt;code&gt;./hello.i18n/zh_CN/LC_MESSAGES/messages.po&lt;/code&gt;




&lt;pre class="example"&gt;# Chinese (Simplified, China) translations for PROJECT.
# Copyright (C) 2014 ORGANIZATION
# This file is distributed under the same license as the PROJECT project.
# FIRST AUTHOR &amp;lt;EMAIL@ADDRESS&amp;gt;, 2014.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: PROJECT VERSION\n"
"Report-Msgid-Bugs-To: EMAIL@ADDRESS\n"
"POT-Creation-Date: 2014-03-09 19:08+0800\n"
"PO-Revision-Date: 2014-03-09 19:12+0800\n"
"Last-Translator: FULL NAME &amp;lt;EMAIL@ADDRESS&amp;gt;\n"
"Language-Team: zh_Hans_CN &amp;lt;LL@li.org&amp;gt;\n"
"Plural-Forms: nplurals=2; plural=(n != 1)\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=utf-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Generated-By: Babel 2.0-dev\n"

#: hello.py:1
msgid "Hello"
msgstr "&#21890;"

&lt;/pre&gt;


&lt;/li&gt;
&lt;li&gt;&#32534;&#35793;&#32763;&#35793;&#32467;&#26524;




&lt;pre class="src src-sh"&gt;pybabel compile -f -d ./hello.i18n    &lt;span style="color: #888a85;"&gt;#&lt;/span&gt;&lt;span style="color: #888a85;"&gt;&amp;#32534;&amp;#35793;PO&amp;#25991;&amp;#20214;&amp;#20026;MO&amp;#25991;&amp;#20214;&lt;/span&gt;
&lt;/pre&gt;


&lt;/li&gt;
&lt;li&gt;&#33521;&#25991;&#29615;&#22659;&#19979;&#36816;&#34892;&#31243;&#24207;




&lt;pre class="example"&gt;python ./hello.py
Hello
&lt;/pre&gt;


&lt;/li&gt;
&lt;li&gt;&#20013;&#25991;&#29615;&#22659;&#19979;&#36816;&#34892;&#31243;&#24207;




&lt;pre class="example"&gt;LC_ALL=zh_CN python ./hello.py
&#21890;
&lt;/pre&gt;


&lt;/li&gt;
&lt;li&gt;&#26356;&#26032; &lt;code&gt;hello.py&lt;/code&gt; &#65292;&#36861;&#21152;&#19968;&#21477;&#8220;      print _('World')&#8221;

&lt;/li&gt;
&lt;li&gt;&#23558;&#8220;World&#8221;&#32763;&#35793;&#25104;&#20013;&#25991;




&lt;pre class="src src-sh"&gt;pybabel extract -F hello.babel . -o hello.i18n/messages.pot    &lt;span style="color: #888a85;"&gt;# &lt;/span&gt;&lt;span style="color: #888a85;"&gt;&amp;#20174;&amp;#28304;&amp;#20195;&amp;#30721;&amp;#20013;&amp;#25552;&amp;#21462;&amp;#21487;&amp;#32763;&amp;#35793;&amp;#30340;&amp;#25991;&amp;#26412;&amp;#21040;POT&amp;#65288;PO&amp;#27169;&amp;#26495;&amp;#65289;&amp;#25991;&amp;#20214;&lt;/span&gt;
pybabel update -l zh_CN -d ./hello.i18n -i ./hello.i18n/messages.pot    &lt;span style="color: #888a85;"&gt;# &lt;/span&gt;&lt;span style="color: #888a85;"&gt;&amp;#20174;POT&amp;#25991;&amp;#26412;&amp;#26356;&amp;#26032;&amp;#25351;&amp;#23450;&amp;#35821;&amp;#35328;&amp;#30340;PO&amp;#25991;&amp;#20214;&lt;/span&gt;
&lt;span style="color: #888a85;"&gt;# &lt;/span&gt;&lt;span style="color: #888a85;"&gt;&amp;#24320;&amp;#22987;&amp;#32763;&amp;#35793;&amp;#25351;&amp;#23450;&amp;#35821;&amp;#35328;&amp;#30340;PO&amp;#25991;&amp;#20214;&amp;#65306; hello.i18n/zh_CN/LC_MESSAGES/messages.po&lt;/span&gt;
pybabel compile -f -d ./hello.i18n    &lt;span style="color: #888a85;"&gt;#&lt;/span&gt;&lt;span style="color: #888a85;"&gt;&amp;#32534;&amp;#35793;PO&amp;#25991;&amp;#20214;&amp;#20026;MO&amp;#25991;&amp;#20214;&lt;/span&gt;
&lt;/pre&gt;


&lt;/li&gt;
&lt;li&gt;&#20877;&#27425;&#36816;&#34892;




&lt;pre class="example"&gt;LC_ALL=zh_CN python ./hello.py
&#21890;
&#19990;&#30028;
&lt;/pre&gt;


&lt;/li&gt;
&lt;li&gt;&#31243;&#24207;&#20013;&#24378;&#21046;&#20351;&#29992;&#20013;&#25991;&#35821;&#35328;&#65306; &lt;code&gt;hello.cn.py&lt;/code&gt;




&lt;pre class="src src-python"&gt;&lt;span style="color: #729fcf; font-weight: bold;"&gt;import&lt;/span&gt; gettext

&lt;span style="color: #eeeeec;"&gt;t&lt;/span&gt; = gettext.translation(&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'messages'&lt;/span&gt;, &lt;span style="color: #ad7fa8; font-style: italic;"&gt;'./hello.i18n'&lt;/span&gt;, languages=[&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'zh_CN'&lt;/span&gt;])
&lt;span style="color: #eeeeec;"&gt;_&lt;/span&gt; = t.gettext

&lt;span style="color: #729fcf; font-weight: bold;"&gt;print&lt;/span&gt; _(&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'Hello'&lt;/span&gt;)
&lt;span style="color: #729fcf; font-weight: bold;"&gt;print&lt;/span&gt; _(&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'World'&lt;/span&gt;)
&lt;/pre&gt;


&lt;/li&gt;
&lt;li&gt;&#21363;&#20351;&#26159;&#22312;&#33521;&#25991;&#29615;&#22659;&#19979;&#20063;&#36755;&#20986;&#20013;&#25991;




&lt;pre class="example"&gt;LC_ALL=en_US python ./hello.py
&#21890;
&#19990;&#30028;
&lt;/pre&gt;

&lt;/li&gt;
&lt;/ul&gt;

&lt;/div&gt;
&lt;/div&gt;
</content></entry><entry><title type="html">CentOS 6.4下安装redmine</title><author><name>nil</name></author><link href="http://blog.kankanan.com/posts/2014/03/07_centos-62e44e0b5b8988c5redmine.html"/><updated>2014-03-07T14:17:00Z</updated><published>2014-03-07T14:17:00Z</published><id>posts/2014/03/07_centos-62e44e0b5b8988c5redmine.html</id><category scheme="/tags/linux.html" term="linux" label="linux"/><category scheme="/tags/redmine.html" term="redmine" label="redmine"/><content type="html">&lt;div id="outline-container-1" class="outline-3"&gt;
&lt;h3 id="sec-1"&gt;&#23433;&#35013; &lt;code&gt;ruby&lt;/code&gt;&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-1"&gt;





&lt;pre class="src src-sh"&gt;yum install ruby
yum install ruby-devel
yum install rubygems
&lt;/pre&gt;


&lt;/div&gt;

&lt;/div&gt;

&lt;div id="outline-container-2" class="outline-3"&gt;
&lt;h3 id="sec-2"&gt;&#23433;&#35013; &lt;code&gt;redmine&lt;/code&gt;&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-2"&gt;





&lt;pre class="src src-sh"&gt;wget &lt;span style="color: #ad7fa8; font-style: italic;"&gt;'http://www.redmine.org/releases/redmine-2.5.0.tar.gz'&lt;/span&gt;
tar xzvf redmine-2.5.0.tar.gz
gem install bundler
gem install mysql2.
yum install ImageMagick ImageMagick-devel
bundle install --without development test  
&lt;/pre&gt;


&lt;/div&gt;

&lt;/div&gt;

&lt;div id="outline-container-3" class="outline-3"&gt;
&lt;h3 id="sec-3"&gt;&#37197;&#32622; &lt;code&gt;redmine&lt;/code&gt;&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-3"&gt;


&lt;ul&gt;
&lt;li&gt;&#20197; root &#29992;&#25143;&#30331;&#24405; &lt;code&gt;mysql&lt;/code&gt;




&lt;pre class="src src-sh"&gt;mysql -uroot -p
&lt;/pre&gt;


&lt;/li&gt;
&lt;li&gt;&#21019;&#24314; &lt;code&gt;redmine&lt;/code&gt; &#29992;&#25143;&#21450;&#24211;




&lt;pre class="src src-sql"&gt;CREATE DATABASE redmine CHARACTER SET utf8;
CREATE USER &lt;span style="color: #ad7fa8; font-style: italic;"&gt;'redmine'&lt;/span&gt;@&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'localhost'&lt;/span&gt; IDENTIFIED BY &lt;span style="color: #ad7fa8; font-style: italic;"&gt;'redmine'&lt;/span&gt;;
GRANT ALL PRIVILEGES ON redmine.* TO &lt;span style="color: #ad7fa8; font-style: italic;"&gt;'redmine'&lt;/span&gt;@&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'localhost'&lt;/span&gt;;
&lt;/pre&gt;


&lt;/li&gt;
&lt;li&gt;&#20462;&#25913;&#25968;&#25454;&#24211;&#37197;&#32622;&#25991;&#20214;




&lt;pre class="src src-sh"&gt;cp config/database.yml.example config/database.yml
diff config/database.yml config/database.yml.example
10,11c10,11
&amp;lt;   username: redmine
&amp;lt;   password: &lt;span style="color: #ad7fa8; font-style: italic;"&gt;"redmine"&lt;/span&gt;
---
&amp;gt;   username: root
&amp;gt;   password: &lt;span style="color: #ad7fa8; font-style: italic;"&gt;""&lt;/span&gt;
&lt;/pre&gt;


&lt;/li&gt;
&lt;li&gt;&#21021;&#22987;&#21270;&#20250;&#35805;&#23384;&#20648;




&lt;pre class="src src-sh"&gt;rake generate_secret_token
&lt;/pre&gt;


&lt;/li&gt;
&lt;li&gt;&#21019;&#24314;&#25968;&#25454;&#24211;&#34920;&#32467;&#26500;




&lt;pre class="src src-sh"&gt;&lt;span style="color: #eeeeec;"&gt;RAILS_ENV&lt;/span&gt;=production rake db:migrate
&lt;/pre&gt;


&lt;/li&gt;
&lt;li&gt;&#35299;&#20915;&#19978;&#19968;&#27493;&#21487;&#33021;&#20986;&#29616;&#30340;&#38169;&#35823;

&lt;blockquote&gt;

&lt;p&gt;rake aborted!
Can't connect to local MySQL server through socket '/var/lib/mysql/mysql.sock' (2)
&lt;/p&gt;
&lt;p&gt;
Tasks: TOP =&amp;gt; db:migrate =&amp;gt; environment
&lt;/p&gt;
&lt;/blockquote&gt;



&lt;p&gt;     
     &#30830;&#23450; &lt;code&gt;mysql&lt;/code&gt; &#21551;&#21160;&#26102;&#25351;&#23450;&#30340; &lt;code&gt;mysql.sock&lt;/code&gt; &#25991;&#20214;&#30340;&#36335;&#24452;
&lt;/p&gt;



&lt;pre class="src src-sh"&gt;ps aux | grep mysql.sock
&lt;/pre&gt;


&lt;p&gt;
     &#26174;&#31034;&#30340; &lt;code&gt;mysql.sock&lt;/code&gt; &#36335;&#24452;&#21487;&#33021;&#20026;&#8220; &lt;code&gt;--socket=/tmp/mysql.sock&lt;/code&gt; &#8221;
&lt;/p&gt;
&lt;p&gt;
     &#20462;&#25913; &lt;code&gt;redmine&lt;/code&gt; &#25968;&#25454;&#24211;&#37197;&#32622;&#65292;&#22312; &lt;code&gt;production&lt;/code&gt; &#37197;&#32622;&#20013;&#28155;&#21152; &lt;code&gt;socket&lt;/code&gt; &#39033;&#65306;
&lt;/p&gt;



&lt;pre class="example"&gt;production:
  ...
  socket: /tmp/mysql.sock
&lt;/pre&gt;


&lt;p&gt;
     &#37325;&#26032;&#36827;&#34892;&#19978;&#19968;&#27493;&#25805;&#20316;&#12290;
&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&#21021;&#22987;&#21270;&#25968;&#25454;




&lt;pre class="src src-sh"&gt;&lt;span style="color: #eeeeec;"&gt;RAILS_ENV&lt;/span&gt;=production &lt;span style="color: #eeeeec;"&gt;REDMINE_LANG&lt;/span&gt;=zh rake redmine:load_default_data
&lt;/pre&gt;


&lt;/li&gt;
&lt;li&gt;&#21019;&#24314;&#30456;&#20851;&#30446;&#24405;




&lt;pre class="src src-sh"&gt;mkdir -p tmp tmp/pdf public/plugin_assets
sudo chown -R nobody:nobody files log tmp public/plugin_assets
sudo chmod -R 755 files log tmp public/plugin_assets
&lt;/pre&gt;

&lt;/li&gt;
&lt;/ul&gt;


&lt;/div&gt;

&lt;/div&gt;

&lt;div id="outline-container-4" class="outline-3"&gt;
&lt;h3 id="sec-4"&gt;&#35797;&#36816;&#34892; &lt;code&gt;redmine&lt;/code&gt;&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-4"&gt;





&lt;pre class="src src-sh"&gt;ruby script/rails server webrick -e production
&lt;/pre&gt;


&lt;ul&gt;
&lt;li&gt;&#27983;&#35272;&#22120;&#25171;&#24320;&#39029;&#38754;

&lt;p&gt;     
     &lt;a href="http://localhost:3000"&gt;http://localhost:3000&lt;/a&gt;
&lt;/p&gt;
&lt;p&gt;
     &#20351;&#29992; &#29992;&#25143;&#21517; &lt;code&gt;admin&lt;/code&gt; &#65292;&#23494;&#30721; &lt;code&gt;admin&lt;/code&gt; &#30331;&#24405;&#21518;&#65292;&#31435;&#21363;&#20462;&#25913;&#23494;&#30721;&#12290;
&lt;/p&gt;
&lt;p&gt; 
     &#20351;&#29992;&#19979;&#38754;&#30340;&#21629;&#20196;&#29983;&#25104;&#38543;&#26426;&#30340;&#23494;&#30721;&#65306;
&lt;/p&gt;



&lt;pre class="src src-sh"&gt;cat /dev/urandom | head -1 | md5sum | head -c 8
&lt;/pre&gt;

&lt;/li&gt;
&lt;/ul&gt;


&lt;/div&gt;

&lt;/div&gt;

&lt;div id="outline-container-5" class="outline-3"&gt;
&lt;h3 id="sec-5"&gt;&#37197;&#32622; &lt;code&gt;redmine&lt;/code&gt;&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-5"&gt;


&lt;ul&gt;
&lt;li&gt;&#20462;&#25913; &lt;code&gt;config/settings.yml&lt;/code&gt;
&lt;/li&gt;
&lt;/ul&gt;


&lt;/div&gt;

&lt;/div&gt;

&lt;div id="outline-container-6" class="outline-3"&gt;
&lt;h3 id="sec-6"&gt;&#20351;&#29992; &lt;code&gt;Nginx&lt;/code&gt; &#21644; &lt;code&gt;passenger&lt;/code&gt;&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-6"&gt;





&lt;pre class="src src-sh"&gt;wget &lt;span style="color: #ad7fa8; font-style: italic;"&gt;'http://nginx.org/download/nginx-1.4.6.tar.gz'&lt;/span&gt;
tar xzvf nginx-1.4.6.tar.gz
gem install passenger
yum install pcre-devel
passenger-install-nginx-module
&lt;/pre&gt;


&lt;ul&gt;
&lt;li&gt;&#20132;&#20114;&#24335;&#23433;&#35013;&#36807;&#31243;

&lt;ul&gt;
&lt;li&gt;Automatically download and install Nginx?

&lt;p&gt;       
       &#36873; 2. No: I want to customize my Nginx installation. (for advanced users)
&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;Where is your Nginx source code located?

&lt;p&gt;       
       &#22635;&#35299;&#21387;&#30340; &lt;code&gt;nginx&lt;/code&gt; &#28304;&#30721;&#21253;&#36335;&#24452;
&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;Where do you want to install Nginx to?

&lt;p&gt; 
       &#22635; &lt;code&gt;/usr/local/nginx&lt;/code&gt;
&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&#20462;&#25913; /usr/local/nginx/conf/nginx.conf

&lt;p&gt; 
       &#22312;&#26368;&#21518;&#30340; &lt;code&gt;}&lt;/code&gt; &#21069;&#28155;&#21152;&#20197;&#19979;&#37197;&#32622;
&lt;/p&gt;



&lt;pre class="example"&gt;include vhosts/*.conf;
&lt;/pre&gt;


&lt;/li&gt;
&lt;li&gt;&#28155;&#21152;&#31449;&#28857;&#37197;&#32622;&#25991;&#20214; &lt;code&gt;/usr/local/nginx/conf/vhosts/redmine.conf&lt;/code&gt;




&lt;pre class="example"&gt;server {
  listen  80;
  server_name &amp;lt;&#22495;&#21517;&amp;gt;;
  root &amp;lt;redmine&#26681;&#30446;&#24405;&amp;gt;/public;
  passenger_enabled on;
  client_max_body_size 10m; # Max attachemnt size
}
&lt;/pre&gt;


&lt;/li&gt;
&lt;/ul&gt;

&lt;/li&gt;
&lt;li&gt;&#21551;&#21160; &lt;code&gt;nginx&lt;/code&gt;




&lt;pre class="src src-sh"&gt;/usr/local/nginx/sbin/nginx
&lt;/pre&gt;


&lt;/li&gt;
&lt;li&gt;&#29616;&#22312;&#21487;&#20197;&#27491;&#24335;&#35775;&#38382;&#31449;&#28857;&#20102;

&lt;p&gt;
     &lt;a href="http://"&gt;http://&lt;/a&gt;&amp;lt;&#22495;&#21517;&amp;gt;
&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;/div&gt;

&lt;/div&gt;

&lt;div id="outline-container-7" class="outline-3"&gt;
&lt;h3 id="sec-7"&gt;&#25903;&#25345; &lt;code&gt;OpenID&lt;/code&gt; &#31532;&#19977;&#26041;&#24080;&#21495;&#30331;&#24405;&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-7"&gt;


&lt;ul&gt;
&lt;li&gt;&#23433;&#35013; &lt;code&gt;openid&lt;/code&gt; &#24211;




&lt;pre class="src src-sh"&gt;gem install ruby-openid
&lt;/pre&gt;


&lt;/li&gt;
&lt;li&gt;&#20351;&#29992; &lt;code&gt;admin&lt;/code&gt; &#24080;&#21495;&#30331;&#24405;&#31995;&#32479;&#65292;&#22312;&#8220;&#31649;&#29702; - &#37197;&#32622; - &#35748;&#35777;&#8221;&#20013;&#21246;&#36873;&#19978;&#8220;&#20801;&#35768;&#20351;&#29992;OpenID&#30331;&#24405;&#21644;&#27880;&#20876;&#8221;&#12290; 

&lt;/li&gt;
&lt;li&gt;&#29992;&#25143;&#27880;&#20876;&#26102;&#8220;&#23494;&#30721;&#8221;&#21487;&#20197;&#30465;&#30053;&#65292; &#22635;&#19978; &lt;code&gt;OpenID URL&lt;/code&gt; &#21363;&#21487;&#12290;

&lt;/li&gt;
&lt;li&gt;&#22914;&#20309;&#33719;&#24471;Google&#30340;OpenID URL&#65311;

&lt;ul&gt;
&lt;li&gt;&#20808;&#22312; &lt;code&gt;Google&lt;/code&gt; &#30340;&#31449;&#28857;&#19978;&#30331;&#24405;
&lt;/li&gt;
&lt;li&gt;&#25171;&#24320; &lt;a href="https://profiles.google.com"&gt;https://profiles.google.com&lt;/a&gt; &#21518;&#20250;&#36339;&#36716;&#21040;&#31867;&#20284;&#36825;&#26679;&#65288; &lt;code&gt;https://plus.google.com/000000000000000000000/posts&lt;/code&gt; &#65289;&#30340;&#32593;&#39029;
&lt;/li&gt;
&lt;li&gt;&#20320;&#30340; &lt;code&gt;OpenID URL&lt;/code&gt; &#20026; &lt;a href="http://profiles.google.com/000000000000000000000"&gt;http://profiles.google.com/000000000000000000000&lt;/a&gt;

&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;     &#19978;&#38754;&#30340; &lt;code&gt;000000000000000000000&lt;/code&gt; &#21487;&#33021;&#20026;&#20219;&#24847;&#30340;&#25968;&#23383;&#20018;
&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&#31649;&#29702;&#21592;&#30830;&#35748;&#27880;&#20876;&#21518;&#21363;&#21487;&#22312;&#30331;&#24405;&#30028;&#38754;&#19978;&#36755;&#20837; &lt;code&gt;OpenID URL&lt;/code&gt; &#30452;&#25509;&#30331;&#24405;

&lt;p&gt;     
     &#19968;&#33324;&#27983;&#35272;&#22120;&#30340;&#36755;&#20837;&#26694;&#26159;&#26377;&#35760;&#24518;&#21151;&#33021;&#30340;&#65292;&#21452;&#20987;&#21518;&#20250;&#20986;&#29616;&#36755;&#20837;&#21382;&#21490;&#19979;&#25289;&#21015;&#34920;&#65292;&#30452;&#25509;&#36873;&#25321;&#21363;&#21487;&#12290;
&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&#23433;&#35013;&#25554;&#20214;&#31616;&#21270; &lt;code&gt;OpenID&lt;/code&gt; &#30331;&#24405;

&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/jorgebg/redmine-openid-selector"&gt;https://github.com/jorgebg/redmine-openid-selector&lt;/a&gt; &#65288;&#19981;&#25512;&#33616;&#65289; &#20026;&#21407;&#22987;&#20998;&#26525;&#65292;&#22312; &lt;code&gt;redmine-2.5.0&lt;/code&gt; &#19979;&#19981;&#33021;&#30452;&#25509;&#23433;&#35013;&#20250;&#23548;&#33268;&#31449;&#28857;&#30331;&#24405;&#30028;&#38754;&#20986;&#29616;404&#38169;&#35823;&#65292;&#35299;&#20915;&#26041;&#26696;&#22312; &lt;a href="http://www.redmine.org/boards/3/topics/34327?r=38778#message-38778"&gt;&#36825;&#37324;&lt;/a&gt; &#65292;&#31616;&#32780;&#35328;&#20043;&#23601;&#26159;&#25226;&#25554;&#20214;&#30446;&#24405;&#21517;&#20013;&#30340; &lt;code&gt;-&lt;/code&gt; &#25913;&#20026; &lt;code&gt;_&lt;/code&gt; &#12290;

&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/computerminds/redmine\_openid\_selector"&gt;https://github.com/computerminds/redmine_openid_selector&lt;/a&gt; &#65288;&#19981;&#25512;&#33616;&#65289; &#36825;&#20010;&#20998;&#26525;&#23433;&#35013;&#21518;&#21487;&#29992;&#65292;&#20294;&#30028;&#38754;&#20026;&#33521;&#25991;&#65288;&#20854;&#23454;&#30028;&#38754;&#23601;&#19968;&#21477;&#33521;&#25991;&#65289;&#12290;

&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/tangxinfa/redmine\_openid\_selector"&gt;https://github.com/tangxinfa/redmine_openid_selector&lt;/a&gt; &#65288;&#25512;&#33616;&#65289; &#20026;&#25903;&#25345;&#20013;&#25991;&#25105;fork&#20102;&#19978;&#19968;&#20010;&#20998;&#26525;&#12290;

&lt;/li&gt;
&lt;li&gt;&#36890;&#29992;&#30340;&#25554;&#20214;&#23433;&#35013;&#36807;&#31243;&#65306;




&lt;pre class="src src-sh"&gt;&lt;span style="color: #729fcf;"&gt;cd&lt;/span&gt; plugins
git clone https://github.com/tangxinfa/redmine_openid_selector.git
rake redmine:plugins:migrate &lt;span style="color: #eeeeec;"&gt;RAILS_ENV&lt;/span&gt;=production
touch tmp/restart.txt
&lt;/pre&gt;


&lt;/li&gt;
&lt;li&gt;&#36890;&#29992;&#30340;&#25554;&#20214;&#21368;&#36733;&#36807;&#31243;&#65306;




&lt;pre class="src src-sh"&gt;rake redmine:plugins:migrate &lt;span style="color: #eeeeec;"&gt;NAME&lt;/span&gt;=redmine-openid-selector &lt;span style="color: #eeeeec;"&gt;VERSION&lt;/span&gt;=0 &lt;span style="color: #eeeeec;"&gt;RAILS_ENV&lt;/span&gt;=production
rm -rf plugins/redmine-openid-selector
touch tmp/restart.txt
&lt;/pre&gt;


&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;     &#29616;&#22312;&#22312;&#30331;&#24405;&#21450;&#27880;&#20876;&#39029;&#38754;&#30452;&#25509;&#28857;&#20987;&#31532;&#19977;&#26041;&#31449;&#28857;Logo&#21363;&#21487;&#12290;
&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;/div&gt;

&lt;/div&gt;

&lt;div id="outline-container-8" class="outline-3"&gt;
&lt;h3 id="sec-8"&gt;&#26679;&#24335;&#32654;&#21270;&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-8"&gt;





&lt;pre class="src src-sh"&gt;git clone git://github.com/pixel-cookers/redmine-theme.git public/themes/pixel-cookers
touch tmp/restart.txt
&lt;/pre&gt;


&lt;p&gt;
   &#29616;&#22312;&#21487;&#20197;&#20351;&#29992; &lt;code&gt;admin&lt;/code&gt; &#30331;&#24405;&#21518;&#21488;&#65292;&#22312;&#8220;&#31649;&#29702; - &#37197;&#32622; - &#26174;&#31034; - &#20027;&#39064;&#8221;&#20013;&#21551;&#29992;&#20027;&#39064; &lt;code&gt;Pixel-cookers&lt;/code&gt; &#12290;
&lt;/p&gt;&lt;/div&gt;
&lt;/div&gt;
</content></entry><entry><title type="html">编译安装redis</title><author><name>nil</name></author><link href="http://blog.kankanan.com/posts/2014/02/17_7f168bd15b8988c5redis.html"/><updated>2014-02-17T16:40:00Z</updated><published>2014-02-17T16:40:00Z</published><id>posts/2014/02/17_7f168bd15b8988c5redis.html</id><category scheme="/tags/redis.html" term="redis" label="redis"/><content type="html">&lt;ul&gt;
&lt;li&gt;&#19979;&#36733;

&lt;p&gt;    
    &#21040; &lt;a href="http://redis.io/download"&gt;http://redis.io/download&lt;/a&gt; &#19979;&#36733;&#26368;&#26032;&#31283;&#23450;&#29256;&#26412;&#12290;
&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&#23433;&#35013;

&lt;p&gt;  
    &#35299;&#21387;&#21518;&#21442;&#29031; README &#36827;&#34892;&#23433;&#35013;&#65306;
&lt;/p&gt;



&lt;pre class="src src-sh"&gt;make
make install
&lt;/pre&gt;


&lt;/li&gt;
&lt;li&gt;&#23433;&#35013;&#21518;

&lt;p&gt;    
    &#40664;&#35748;&#23433;&#35013;&#21040;/usr/local&#12290;
&lt;/p&gt;
&lt;dl&gt;
&lt;dt&gt;/usr/local/bin/redis-cli&lt;/dt&gt;&lt;dd&gt;redis&#23458;&#25143;&#31471;&#31243;&#24207; 
&lt;/dd&gt;
&lt;dt&gt;/usr/local/bin/redis-server&lt;/dt&gt;&lt;dd&gt;redis&#26381;&#21153;&#22120;&#31243;&#24207;
&lt;/dd&gt;
&lt;/dl&gt;

&lt;/li&gt;
&lt;/ul&gt;

</content></entry><entry><title type="html">编译安装node.js</title><author><name>nil</name></author><link href="http://blog.kankanan.com/posts/2014/02/17_7f168bd15b8988c5node2ejs.html"/><updated>2014-02-17T16:23:00Z</updated><published>2014-02-17T16:23:00Z</published><id>posts/2014/02/17_7f168bd15b8988c5node2ejs.html</id><category scheme="/tags/node.html" term="node" label="node"/><content type="html">&lt;ul&gt;
&lt;li&gt;&#19979;&#36733;

&lt;p&gt;
    node.js&#26159;&#19968;&#20010;&#26032;&#20852;&#30340;&#24320;&#21457;&#24179;&#21488;&#65292;&#29256;&#26412;&#26356;&#26032;&#38750;&#24120;&#27963;&#36291;&#65292;&#22240;&#27492;&#24212;&#35813;&#23613;&#37327;&#19979;&#36733;&#23433;&#35013;&#26368;&#26032;&#30340;&#29256;&#26412;&#12290;
&lt;/p&gt;
&lt;p&gt;
    &#21040; &lt;a href="http://nodejs.org/"&gt;http://nodejs.org/&lt;/a&gt; &#19979;&#36733;&#26368;&#26032;&#30340;&#29256;&#26412;&#12290;
&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&#23433;&#35013;

&lt;p&gt;  
    &#35299;&#21387;&#21518;&#21442;&#29031; README.md &#36827;&#34892;&#23433;&#35013;&#65306;
&lt;/p&gt;



&lt;pre class="src src-sh"&gt;./configure
make
make install
&lt;/pre&gt;


&lt;/li&gt;
&lt;li&gt;&#23433;&#35013;&#21518;

&lt;p&gt;    
    &#40664;&#35748;&#23433;&#35013;&#21040;/usr/local&#12290;
&lt;/p&gt;
&lt;dl&gt;
&lt;dt&gt;/usr/local/bin/node&lt;/dt&gt;&lt;dd&gt;node&#20027;&#31243;&#24207;
&lt;/dd&gt;
&lt;dt&gt;/usr/local/bin/npm&lt;/dt&gt;&lt;dd&gt;node&#27169;&#22359;&#31649;&#29702;&#31243;&#24207;
&lt;/dd&gt;
&lt;dt&gt;/usr/local/lib/node_modules&lt;/dt&gt;&lt;dd&gt;node&#20840;&#23616;&#27169;&#22359;&#30446;&#24405;

&lt;/dd&gt;
&lt;/dl&gt;

&lt;p&gt;    &#20687;&#19968;&#20123;&#38656;&#35201;&#20840;&#23616;&#23433;&#35013;&#30340;&#27169;&#22359;&#20063;&#20250;&#25226;&#25991;&#20214;&#23433;&#35013;&#22312;/usr/local&#30446;&#24405;&#19979;&#12290;
&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


</content></entry><entry><title type="html">express.js中如何在第一次请求的响应中取得connect.sid</title><author><name>nil</name></author><link href="http://blog.kankanan.com/posts/2014/02/14_express2ejs4e2d59824f5557287b2c4e006b218bf76c42768454cd5e944e2d53d65f97connect2esid.html"/><updated>2014-02-14T23:34:00Z</updated><published>2014-02-14T23:34:00Z</published><id>posts/2014/02/14_express2ejs4e2d59824f5557287b2c4e006b218bf76c42768454cd5e944e2d53d65f97connect2esid.html</id><category scheme="/tags/node.html" term="node" label="node"/><content type="html">&lt;p&gt;
  &#22312;web&#39029;&#38754;&#36890;&#36807;iframe&#36328;&#22495;&#30331;&#24405;&#35775;&#38382;&#26381;&#21153;&#30340;&#24773;&#20917;&#19979;&#65292;&#26159;&#19981;&#26041;&#20415;&#21462;cookie&#20013;&#30340;sessionid&#30340;&#65292;&#20110;&#26159;&#24819;&#21040;&#23558;sessionid&#30452;&#25509;&#25918;&#21040;&#21709;&#24212;&#20307;&#20013;&#65292;
  &#36825;&#23601;&#38656;&#35201;&#22312;node.js&#20013;&#30452;&#25509;&#33719;&#21462;connect.sid&#36825;&#20010;cookie&#20540;&#65292;&#19968;&#24320;&#22987;&#24819;&#24403;&#28982;&#22320;&#20197;&#20026;&#31995;&#32479;&#65288;&#20351;&#29992;&#30340;&#26159;passport.js&#65289;&#20250;&#22312;&#30331;&#24405;&#35748;&#35777;&#36890;&#36807;&#21518;
  &#25191;&#34892;res.cookie('connect.sid', &amp;hellip;)&#36827;&#34892;&#35774;&#32622;&#65292;&#23601;&#24819;&#30452;&#25509;&#20174;res&#30340;Set-Cookie&#22836;&#35299;&#26512;&#20986;&#35774;&#32622;&#30340;&#20540;&#65292;&#32467;&#26524;&#21457;&#29616;&#36825;&#20010;cookie&#21387;&#26681;&#19981;&#23384;&#22312;&#65292;
  &#29978;&#33267;&#22312;&#24211;&#20195;&#30721;&#20013;&#25628;&#32034;cookie&#37117;&#19981;&#31649;&#29992;&#65292;&#30528;&#23454;&#24613;&#24471;&#20154;&#30452;&#25235;&#22836;&#12290;&#26368;&#21518;dump&#20986;res&#21518;&#30830;&#22312;req&#20013;&#35265;&#21040;&#20102;connect.sid&#20540;&#30340;&#24433;&#23376;&#65306;req.sessionID&#65292;
  &#28982;&#21518;&#22312; &lt;a href="http://stackoverflow.com/questions/13693101/express-sessionid-differs-from-sessionid-in-cookie"&gt;&#12298;Express SessionID differs from SessionID in Cookie&#12299;&lt;/a&gt; &#20013;&#25214;&#21040;&#20102;&#20174;req.sessionID&#35745;&#31639;&#20986;connect.sid&#30340;&#26041;&#27861;&#65306;
&lt;/p&gt;



&lt;pre class="src src-js"&gt;&lt;span style="color: #729fcf; font-weight: bold;"&gt;var&lt;/span&gt; &lt;span style="color: #eeeeec;"&gt;signature&lt;/span&gt; = require(&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'express/node_modules/cookie-signature'&lt;/span&gt;);
&lt;span style="color: #729fcf; font-weight: bold;"&gt;var&lt;/span&gt; &lt;span style="color: #eeeeec;"&gt;connectSid&lt;/span&gt; = &lt;span style="color: #ad7fa8; font-style: italic;"&gt;'s:'&lt;/span&gt; + signature.sign(req.sessionID, sessionOptions.secret);
&lt;/pre&gt;


&lt;p&gt;
  &#20854;&#23454;&#65292;connect.sid&#36825;&#20010;cookie&#26159;&#22312;&#35831;&#27714;&#21040;&#26469;&#21518;&#22312;req&#19978;&#35774;&#32622;&#30340;&#65288;&#19981;&#23384;&#22312;&#21017;&#35774;&#32622;&#65289;&#65292;&#19981;&#31649;&#26377;&#27809;&#26377;&#30331;&#24405;&#37117;&#20250;&#35774;&#32622;&#12290;
&lt;/p&gt;</content></entry><entry><title type="html">linux下允许普通用户执行需要root权限的命令</title><author><name>nil</name></author><link href="http://blog.kankanan.com/posts/2013/12/26_linux4e0b51418bb8666e901a752862376267884c97008981root674396507684547d4ee4.html"/><updated>2013-12-26T15:44:00Z</updated><published>2013-12-26T15:44:00Z</published><id>posts/2013/12/26_linux4e0b51418bb8666e901a752862376267884c97008981root674396507684547d4ee4.html</id><category scheme="/tags/linux.html" term="linux" label="linux"/><category scheme="/tags/c.html" term="c" label="c"/><content type="html">&lt;p&gt;
   &#26368;&#20856;&#22411;&#30340;&#24773;&#20917;&#26159;&#35201;&#23454;&#29616;&#19968;&#20010;&#36890;&#36807;web&#30028;&#38754;&#37325;&#21551;&#31995;&#32479;&#30340;&#21151;&#33021;&#65292;&#36890;&#24120;&#20026;&#20102;&#23433;&#20840;&#20250;&#20197;&#38750;root&#29992;&#25143;&#36523;&#20221;&#65288;&#36890;&#24120;&#26159;nobody&#65289;&#36816;&#34892;&#26381;&#21153;&#31471;&#33050;&#26412;&#65292;&#36825;&#26679;&#33050;&#26412;&#20013;&#23601;&#19981;&#33021;&#25191;&#34892;&#21361;&#38505;&#25805;&#20316;&#20102;&#12290;
&lt;/p&gt;
&lt;p&gt;
   &#19979;&#38754;&#30340;c&#24037;&#20855;&#31243;&#24207;&#21487;&#20197;&#20801;&#35768;&#20219;&#24847;&#29992;&#25143;&#25191;&#34892;&#38656;&#35201;root&#26435;&#38480;&#30340;&#21629;&#20196;&#65306;
&lt;/p&gt;


&lt;div class="o-blog-source"&gt;&lt;a class="btn btn-info" data-toggle="modal" data-target="#as5froot2ec" &gt;&lt;i class="icon-file icon-white"&gt;&lt;/i&gt;&amp;nbsp;as_root.c&lt;/a&gt;&lt;/div&gt;&lt;div class="modal fade hide" id="as5froot2ec"&gt;&lt;div class="modal-header"&gt;&lt;a class="close" data-dismiss="modal"&gt;&#215;&lt;/a&gt;&lt;h3&gt;as_root.c&lt;/h3&gt;&lt;/div&gt;&lt;div class="modal-body"&gt;&lt;pre&gt;
&lt;span style="color: #729fcf;"&gt;#include&lt;/span&gt; &lt;span style="color: #ad7fa8; font-style: italic;"&gt;&amp;lt;stdio.h&amp;gt;&lt;/span&gt;
&lt;span style="color: #729fcf;"&gt;#include&lt;/span&gt; &lt;span style="color: #ad7fa8; font-style: italic;"&gt;&amp;lt;sys/types.h&amp;gt;&lt;/span&gt;
&lt;span style="color: #729fcf;"&gt;#include&lt;/span&gt; &lt;span style="color: #ad7fa8; font-style: italic;"&gt;&amp;lt;unistd.h&amp;gt;&lt;/span&gt;
&lt;span style="color: #729fcf;"&gt;#include&lt;/span&gt; &lt;span style="color: #ad7fa8; font-style: italic;"&gt;&amp;lt;stdlib.h&amp;gt;&lt;/span&gt;
&lt;span style="color: #729fcf;"&gt;#include&lt;/span&gt; &lt;span style="color: #ad7fa8; font-style: italic;"&gt;&amp;lt;signal.h&amp;gt;&lt;/span&gt;

&lt;span style="color: #8ae234; font-weight: bold;"&gt;void&lt;/span&gt; &lt;span style="color: #edd400; font-weight: bold; font-style: italic;"&gt;daemon_init&lt;/span&gt;() {
    &lt;span style="color: #8ae234; font-weight: bold;"&gt;int&lt;/span&gt; &lt;span style="color: #eeeeec;"&gt;i&lt;/span&gt;;
    &lt;span style="color: #8ae234; font-weight: bold;"&gt;pid_t&lt;/span&gt; &lt;span style="color: #eeeeec;"&gt;pid&lt;/span&gt;;
    
    &lt;span style="color: #729fcf; font-weight: bold;"&gt;if&lt;/span&gt; (pid = fork()) {
        &lt;span style="color: #8ae234; font-weight: bold;"&gt;int&lt;/span&gt; &lt;span style="color: #eeeeec;"&gt;status&lt;/span&gt; = EXIT_FAILURE;
        waitpid(pid, &amp;amp;status, 0);
        status = WEXITSTATUS(status);
        exit(status);
    }

    setsid();
    signal(SIGHUP, SIG_IGN);

    &lt;span style="color: #729fcf; font-weight: bold;"&gt;if&lt;/span&gt; (pid = fork()) {
        &lt;span style="color: #8ae234; font-weight: bold;"&gt;int&lt;/span&gt; &lt;span style="color: #eeeeec;"&gt;status&lt;/span&gt; = EXIT_FAILURE;
        waitpid(pid, &amp;amp;status, 0);
        status = WEXITSTATUS(status);
        exit(status);
    }

    umask(0);
}

&lt;span style="color: #8ae234; font-weight: bold;"&gt;int&lt;/span&gt; &lt;span style="color: #edd400; font-weight: bold; font-style: italic;"&gt;main&lt;/span&gt;(&lt;span style="color: #8ae234; font-weight: bold;"&gt;int&lt;/span&gt; &lt;span style="color: #eeeeec;"&gt;argc&lt;/span&gt;, &lt;span style="color: #8ae234; font-weight: bold;"&gt;char&lt;/span&gt;* &lt;span style="color: #eeeeec;"&gt;argv&lt;/span&gt;[]) {
    &lt;span style="color: #729fcf; font-weight: bold;"&gt;if&lt;/span&gt; (setuid(0) == -1) {
        perror(&lt;span style="color: #ad7fa8; font-style: italic;"&gt;"setuid"&lt;/span&gt;);
        fprintf(stderr, &lt;span style="color: #ad7fa8; font-style: italic;"&gt;"config: chown root:root %s; chmod 4755 %s\n"&lt;/span&gt;, argv[0], argv[0]);
        &lt;span style="color: #729fcf; font-weight: bold;"&gt;return&lt;/span&gt; EXIT_FAILURE;
    }

    daemon_init();

    &lt;span style="color: #8ae234; font-weight: bold;"&gt;FILE&lt;/span&gt;* &lt;span style="color: #eeeeec;"&gt;fp&lt;/span&gt; = popen(argv[1], &lt;span style="color: #ad7fa8; font-style: italic;"&gt;"r"&lt;/span&gt;);
    &lt;span style="color: #729fcf; font-weight: bold;"&gt;if&lt;/span&gt; (&lt;span style="color: #8ae234;"&gt;NULL&lt;/span&gt; == fp) {
        fprintf(stderr, &lt;span style="color: #ad7fa8; font-style: italic;"&gt;"popen failed\n"&lt;/span&gt;);
        &lt;span style="color: #729fcf; font-weight: bold;"&gt;return&lt;/span&gt; EXIT_FAILURE;
    }
    &lt;span style="color: #8ae234; font-weight: bold;"&gt;int&lt;/span&gt; &lt;span style="color: #eeeeec;"&gt;status&lt;/span&gt; = pclose(fp);
    &lt;span style="color: #729fcf; font-weight: bold;"&gt;if&lt;/span&gt; (-1 == status) {
        fprintf(stderr, &lt;span style="color: #ad7fa8; font-style: italic;"&gt;"pclose failed\n"&lt;/span&gt;);
        &lt;span style="color: #729fcf; font-weight: bold;"&gt;return&lt;/span&gt; EXIT_FAILURE;
    }

    status = WEXITSTATUS(status);
    &lt;span style="color: #729fcf; font-weight: bold;"&gt;return&lt;/span&gt; status;
}
&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;
   &#32534;&#35793;&#65306;
&lt;/p&gt;


&lt;pre class="src src-sh"&gt;gcc -g as_root.c -o as_root
&lt;/pre&gt;


&lt;p&gt;
   &#37197;&#32622;&#65306;
&lt;/p&gt;


&lt;pre class="src src-sh"&gt;chown root:root ./as_root; chmod 4755 ./as_root
&lt;/pre&gt;


&lt;p&gt;
   &#36816;&#34892;&#65306;
&lt;/p&gt;


&lt;pre class="src src-sh"&gt;sudo -u &lt;span style="color: #ad7fa8; font-style: italic;"&gt;"nobody"&lt;/span&gt; ./as_root &lt;span style="color: #ad7fa8; font-style: italic;"&gt;"reboot"&lt;/span&gt;
&lt;/pre&gt;


&lt;p&gt;   
   &#21442;&#32771;&#65306;&lt;a href="http://blog.tianya.cn/blogger/post_show.asp?BlogID=126326&amp;amp;PostID=1629441"&gt;&#22914;&#20309;&#22312;&#26222;&#36890;&#29992;&#25143;&#19979;&#25191;&#34892;&#19968;&#20123;&#38656;&#35201;root&#29992;&#25143;&#25191;&#34892;&#30340;&#21629;&#20196;&lt;/a&gt;
&lt;/p&gt;</content></entry><entry><title type="html">为什么不能在构造函数中调用shared_from_this</title><author><name>nil</name></author><link href="http://blog.kankanan.com/posts/2013/12/20_4e3a4ec04e484e0d80fd57286784902051fd65704e2d8c037528shared5ffrom5fthis.html"/><updated>2013-12-20T01:02:00Z</updated><published>2013-12-20T01:02:00Z</published><id>posts/2013/12/20_4e3a4ec04e484e0d80fd57286784902051fd65704e2d8c037528shared5ffrom5fthis.html</id><category scheme="/tags/cpp.html" term="cpp" label="cpp"/><content type="html">&lt;p&gt;
  &#20808;&#30475;&#31034;&#20363;&#20195;&#30721;&#65306;
&lt;/p&gt;



&lt;pre class="src src-c++"&gt;&lt;span style="color: #729fcf; font-weight: bold;"&gt;class&lt;/span&gt; &lt;span style="color: #8ae234; font-weight: bold;"&gt;Chicken&lt;/span&gt; : &lt;span style="color: #729fcf; font-weight: bold;"&gt;public&lt;/span&gt; &lt;span style="color: #8ae234; font-weight: bold;"&gt;enable_shared_from_this&lt;/span&gt;&amp;lt;&lt;span style="color: #8ae234; font-weight: bold;"&gt;Chicken&lt;/span&gt;&amp;gt;
{
&lt;span style="color: #729fcf; font-weight: bold;"&gt;public&lt;/span&gt;:
    &lt;span style="color: #edd400; font-weight: bold; font-style: italic;"&gt;Chicken&lt;/span&gt;()
    {
        &lt;span style="color: #8ae234; font-weight: bold;"&gt;shared_ptr&lt;/span&gt;&amp;lt;&lt;span style="color: #8ae234; font-weight: bold;"&gt;Chicken&lt;/span&gt;&amp;gt; &lt;span style="color: #eeeeec;"&gt;chicken_ptr&lt;/span&gt; = shared_from_this();    &lt;span style="color: #888a85;"&gt;//&lt;/span&gt;&lt;span style="color: #888a85;"&gt;throw std::bad_weak_ptr&lt;/span&gt;
    }
};
&lt;/pre&gt;


&lt;p&gt;
  &#20877;&#30475;shared_from_this()&#30340;&#34892;&#20026;&#65306;
&lt;/p&gt;


&lt;pre class="src src-c++"&gt;&lt;span style="color: #729fcf; font-weight: bold;"&gt;return&lt;/span&gt; _weak_ptr-&amp;gt;lock();
&lt;/pre&gt;


&lt;p&gt;
  &lt;code&gt;_weak_ptr&lt;/code&gt; &#20026;&#29238;&#31867;&#65288; &lt;code&gt;enable_shared_from_this&lt;/code&gt; &amp;lt;Chicken&amp;gt;&#65289;&#30340;&#25104;&#21592;&#21464;&#37327;&#65292;&#38656;&#35201;&#19968;&#20010; &lt;code&gt;shared_ptr&lt;/code&gt; &amp;lt;Chicken&amp;gt;&#23545;&#35937;&#26469;&#21021;&#22987;&#21270;&#23427;&#65292;&#32780; &lt;code&gt;shared_ptr&lt;/code&gt; &amp;lt;Chicken&amp;gt;&#38656;&#35201;&#19968;&#20010;Chicken&#23545;&#35937;&#26469;&#21019;&#24314;&#65292;&#20294;&#27492;&#26102;Chicken&#23545;&#35937;&#27491;&#22312;&#26500;&#36896;&#20013;&#65292;&#36825;&#26159;&#20010;&#40481;&#19982;&#34507;&#30340;&#26080;&#35299;&#38382;&#39064;&#12290;
&lt;/p&gt;
&lt;p&gt;  
  &#20854;&#23454; &lt;code&gt;_weak_ptr&lt;/code&gt; &#25104;&#21592;&#21464;&#37327;&#26159;&#22312; &lt;code&gt;shared_ptr&lt;/code&gt; &#30340;&#26500;&#36896;&#20989;&#25968;&#20013;&#24310;&#36831;&#21021;&#22987;&#21270;&#30340;&#65292;&#19981;&#21482;&#26159;&#22312;&#26500;&#36896;&#20989;&#25968;&#20013;&#19981;&#33021;&#35843;&#29992; &lt;code&gt;shared_from_this&lt;/code&gt; &#65292;&#20687;&#19979;&#38754;&#30340;&#20351;&#29992;&#26041;&#24335;&#21516;&#26679;&#19981;&#34892;&#65306;
&lt;/p&gt;


&lt;pre class="src src-c++"&gt;&lt;span style="color: #8ae234; font-weight: bold;"&gt;Chicken&lt;/span&gt;* &lt;span style="color: #eeeeec;"&gt;chicken&lt;/span&gt; = &lt;span style="color: #729fcf; font-weight: bold;"&gt;new&lt;/span&gt; &lt;span style="color: #8ae234; font-weight: bold;"&gt;Chicken&lt;/span&gt;();
&lt;span style="color: #8ae234; font-weight: bold;"&gt;shared_ptr&lt;/span&gt;&amp;lt;&lt;span style="color: #8ae234; font-weight: bold;"&gt;Chicken&lt;/span&gt;&amp;gt; &lt;span style="color: #eeeeec;"&gt;chicken_ptr&lt;/span&gt; = chicken-&amp;gt;shared_from_this();  &lt;span style="color: #888a85;"&gt;//&lt;/span&gt;&lt;span style="color: #888a85;"&gt;throw std::bad_weak_ptr&lt;/span&gt;
&lt;/pre&gt;


&lt;p&gt;  
  &lt;code&gt;enable_shared_from_this&lt;/code&gt; &#19981;&#26159;&#20174;this&#31100;&#25351;&#38024;&#21464;&#20986;&#26234;&#33021;&#25351;&#38024;&#30340;&#39764;&#27861;&#65292;&#23427;&#21482;&#26159;&#19968;&#20010;&#36741;&#21161;&#31867;&#65292;&#20026;&#19968;&#20010;&#21482;&#20351;&#29992; &lt;code&gt;shared_ptr&lt;/code&gt; &#31649;&#29702;&#23545;&#35937;&#29983;&#21629;&#21608;&#26399;&#30340;&#31867;&#28155;&#21152;&#19968;&#20010;&#33258;&#36523;&#30340;&#26234;&#33021;&#25351;&#38024;&#25104;&#21592;&#21464;&#37327;&#20379;&#20869;&#37096;&#20351;&#29992;&#12290;
&lt;/p&gt;
&lt;p&gt;
  &#32780;&#8220;&#19981;&#33021;&#22312;&#26500;&#36896;&#20989;&#25968;&#20013;&#35843;&#29992; &lt;code&gt;shared_from_this&lt;/code&gt; &#8221;&#36825;&#20010;&#38382;&#39064;&#20165;&#20165;&#26159;&#26631;&#20934;&#23454;&#29616;&#19978;&#30340;&#19968;&#20010;&#28431;&#27934;&#12290;
&lt;/p&gt;
&lt;p&gt;
  &#20320;&#24212;&#35813;&#20687;&#19979;&#38754;&#36825;&#26679;&#29992;&#65306;
&lt;/p&gt;


&lt;pre class="src src-c++"&gt;&lt;span style="color: #729fcf; font-weight: bold;"&gt;class&lt;/span&gt; &lt;span style="color: #8ae234; font-weight: bold;"&gt;Chicken&lt;/span&gt; : &lt;span style="color: #729fcf; font-weight: bold;"&gt;public&lt;/span&gt; &lt;span style="color: #8ae234; font-weight: bold;"&gt;enable_shared_from_this&lt;/span&gt;&amp;lt;&lt;span style="color: #8ae234; font-weight: bold;"&gt;Chicken&lt;/span&gt;&amp;gt;
{
&lt;span style="color: #729fcf; font-weight: bold;"&gt;public&lt;/span&gt;:
    &lt;span style="color: #edd400; font-weight: bold; font-style: italic;"&gt;Chicken&lt;/span&gt;()
    {
    }

    &lt;span style="color: #8ae234; font-weight: bold;"&gt;void&lt;/span&gt; &lt;span style="color: #edd400; font-weight: bold; font-style: italic;"&gt;use&lt;/span&gt;()
    {
        &lt;span style="color: #8ae234; font-weight: bold;"&gt;shared_ptr&lt;/span&gt;&amp;lt;&lt;span style="color: #8ae234; font-weight: bold;"&gt;Chicken&lt;/span&gt;&amp;gt; &lt;span style="color: #eeeeec;"&gt;chicken_ptr&lt;/span&gt; = shared_from_this();
    }
};

&lt;span style="color: #8ae234; font-weight: bold;"&gt;shared_ptr&lt;/span&gt;&amp;lt;&lt;span style="color: #8ae234; font-weight: bold;"&gt;Chicken&lt;/span&gt;&amp;gt; &lt;span style="color: #edd400; font-weight: bold; font-style: italic;"&gt;chicken_ptr&lt;/span&gt;(&lt;span style="color: #729fcf; font-weight: bold;"&gt;new&lt;/span&gt; &lt;span style="color: #8ae234; font-weight: bold;"&gt;Chicken&lt;/span&gt;);
chicken_ptr-&amp;gt;use();
&lt;/pre&gt;


&lt;p&gt;
  &#31361;&#28982;&#24819;&#36215;&#19968;&#27573;&#23545;&#35805;&#65306;
&lt;/p&gt;&lt;blockquote&gt;

&lt;p&gt;&#38463;&#28422;&#65306;&#38395;&#35199;&#65292;&#20107;&#24773;&#36827;&#34892;&#30340;&#24590;&#20040;&#26679;&#20102;&#65292;&#38395;&#35199;&#65311;
&lt;/p&gt;
&lt;p&gt;
&#36798;&#38395;&#35199;&#65306; &#26368;&#36817;&#25105;&#21457;&#26126;&#20102;&#20123;&#19996;&#35199;&#65292;&#30456;&#20449;&#33021;&#24110;&#24471;&#21040;&#20320;&#12290;
&lt;/p&gt;
&lt;p&gt;
&#36798;&#38395;&#35199;&#25343;&#20986;&#25163;&#30005;&#31570;&#12290;
&lt;/p&gt;
&lt;p&gt;
&#38463;&#28422;&#65306;&#25163;&#30005;&#31570;&#65311;
&lt;/p&gt;
&lt;p&gt;
&#36798;&#38395;&#35199;&#65306;&#38169;&#65292;&#36825;&#25903;&#19981;&#26159;&#19968;&#21482;&#26222;&#36890;&#30340;&#25163;&#30005;&#31570;&#65292;&#36825;&#25903;&#26159;&#19968;&#25903;&#19981;&#38656;&#35201;&#30005;&#27744;&#30340;&#22826;&#38451;&#33021;&#25163;&#30005;&#31570;&#65292;&#22312;&#26377;&#20809;&#30340;&#26102;&#20505;&#20182;&#23601;&#20250;&#20142;&#12290;
&lt;/p&gt;
&lt;p&gt;
&#21496;&#20196;&#65306;&#37027;&#22914;&#26524;&#27809;&#26377;&#20809;&#21602;&#65311;
&lt;/p&gt;
&lt;p&gt;
&#36798;&#38395;&#35199;&#65306;&#32477;&#23545;&#19981;&#20142;&#12290;
&lt;/p&gt;
&lt;p&gt;
&#38463;&#28422;&#65306;&#26377;&#27809;&#26377;&#21487;&#33021;&#27809;&#20809;&#30340;&#26102;&#20505;&#23427;&#20063;&#20250;&#20142;&#65311;
&lt;/p&gt;
&lt;p&gt;
&#36798;&#38395;&#35199;&#65306;&#38382;&#30340;&#22909;&#65292;&#20851;&#28783;&#12290;
&lt;/p&gt;
&lt;p&gt;
&#36798;&#38395;&#35199;&#65306;&#20320;&#25343;&#21478;&#19968;&#21482;&#25163;&#30005;&#31570;&#29031;&#23427;&#21602;&#65292;&#23427;&#23601;&#20250;&#20142;&#12290;
&lt;/p&gt;
&lt;p&gt;
&#36798;&#38395;&#35199;&#65306;&#21704;&#21704;&#65292;&#24590;&#20040;&#26679;&#21834;&#65311;
&lt;/p&gt;
&lt;p&gt;
&#38463;&#28422;&#65306;&#36825;&#20010;&#21457;&#26126;&#36824;&#30495;&#26377;&#21019;&#24847;&#21834;&#12290;
&lt;/p&gt;
&lt;/blockquote&gt;




&lt;p&gt;
  &#21442;&#32771;&#65306;&#12298;&lt;a href="http://hi.baidu.com/cpuramdisk/item/7c2f8d77385e0f29d7a89cf0"&gt;shared_from_this &#20960;&#20010;&#20540;&#24471;&#27880;&#24847;&#30340;&#22320;&#26041;&lt;/a&gt;&#12299;
&lt;/p&gt;</content></entry><entry><title type="html">Discuz访问推广任务反作弊</title><author><name>nil</name></author><link href="http://blog.kankanan.com/posts/2013/12/20_discuz8bbf95ee63a85e7f4efb52a153cd4f5c5f0a.html"/><updated>2013-12-20T01:02:00Z</updated><published>2013-12-20T01:02:00Z</published><id>posts/2013/12/20_discuz8bbf95ee63a85e7f4efb52a153cd4f5c5f0a.html</id><category scheme="/tags/php.html" term="php" label="php"/><category scheme="/tags/discuz.html" term="discuz" label="discuz"/><content type="html">&lt;ul&gt;
&lt;li&gt;&#35782;&#21035;&#20316;&#24330;

&lt;p&gt;
    &#21457;&#36148;&#12289;&#22238;&#22797;&#36739;&#23569;&#30340;&#29992;&#25143;&#20855;&#26377;&#20559;&#39640;&#30340;&#31215;&#20998;&#12289;&#31561;&#32423;&#36890;&#24120;&#23601;&#26159;&#28508;&#22312;&#30340;&#20316;&#24330;&#23545;&#35937;&#12290;&#22312;&#21518;&#21488;&#26597;&#30475;&#35813;&#29992;&#25143;&#30340;&#31215;&#20998;&#21382;&#21490;&#65292;&#22914;&#26524;&#26469;&#21382;&#19981;&#26126;&#65292;&#37027;&#20040;&#24456;&#21487;&#33021;&#26159;&#36890;&#36807;&#35775;&#38382;&#25512;&#24191;&#20316;&#24330;&#33719;&#24471;&#30340;&#12290;
&lt;/p&gt;
&lt;p&gt;
    &#22312;&#25105;&#20204;&#30340;&#20363;&#23376;&#37324;&#23601;&#21457;&#29616;&#26377;&#19968;&#20010;&#29992;&#25143;&#37329;&#38065;&#25968;&#36807;&#39640;&#65292;&#20808;&#26597;&#30475;&#35813;&#29992;&#25143;&#30340;&#31215;&#20998;&#34920;&#65306;
&lt;/p&gt;



&lt;pre class="example"&gt;mysql&amp;gt; SELECT total, cyclenum, extcredits2 FROM g_common_credit_rule_log WHERE rid=8 and uid=119;
+-------+----------+-------------+
| total | cyclenum | extcredits2 |
+-------+----------+-------------+
|  3454 |     3454 |           1 |
+-------+----------+-------------+
1 row in set (0.00 sec)
&lt;/pre&gt;


&lt;p&gt;    
    &#30456;&#20851;&#23383;&#27573;&#35828;&#26126;
&lt;/p&gt;&lt;dl&gt;
&lt;dt&gt;total&lt;/dt&gt;&lt;dd&gt;&#31574;&#30053;&#34987;&#25191;&#34892;&#24635;&#27425;&#25968;
&lt;/dd&gt;
&lt;dt&gt;cyclenum&lt;/dt&gt;&lt;dd&gt;&#21608;&#26399;&#34987;&#25191;&#34892;&#27425;&#25968; 
&lt;/dd&gt;
&lt;dt&gt;extcredits2&lt;/dt&gt;&lt;dd&gt;&#25105;&#20204;&#30340;&#31995;&#32479;&#37324;&#23545;&#24212;&#37329;&#38065;&#25968;
&lt;/dd&gt;
&lt;dt&gt;rid&lt;/dt&gt;&lt;dd&gt;&#20540;8&#20026;&#35775;&#38382;&#25512;&#24191;&#20219;&#21153;&#31867;&#22411;
&lt;/dd&gt;
&lt;dt&gt;uid&lt;/dt&gt;&lt;dd&gt;&#20540;119&#20026;&#20316;&#24330;&#29992;&#25143;id

&lt;/dd&gt;
&lt;/dl&gt;

&lt;p&gt;    &#20174;&#19978;&#38754;&#21487;&#20197;&#30475;&#20986;&#35813;&#29992;&#25143;&#23436;&#25104;&#20102;3454&#27425;&#20219;&#21153;&#65292; &#25509;&#19979;&#26469;&#23601;&#38656;&#35201;&#30830;&#35748;&#36825;&#20123;&#20219;&#21153;&#26159;&#36890;&#36807;&#20316;&#24330;&#23436;&#25104;&#30340;&#20102;&#12290;
&lt;/p&gt;
&lt;p&gt;    
    &#25628;&#32034;&#35813;&#29992;&#25143;&#25512;&#24191;&#38142;&#25509;&#22312;web&#26381;&#21153;&#22120;&#20013;&#30041;&#19979;&#30340;&#35775;&#38382;&#26085;&#24535;&#65306;
&lt;/p&gt;


&lt;pre class="example"&gt;logs# grep 'fromuid=119' /usr/local/nginx/logs/access.log*
"GET /?fromuid=119.jpg HTTP/1.1" 301 6243 "http://xxxx.org/details.php?id=178668"
...
&lt;/pre&gt;


&lt;p&gt;
    &#21487;&#20197;&#21021;&#27493;&#26029;&#23450;&#65292;&#35813;&#29992;&#25143;&#36890;&#36807;&#22312;&#20854;&#23427;&#35770;&#22363;&#20013;&#21457;&#24067;&#20449;&#24687;&#24182;&#23558;&#25512;&#24191;url&#27880;&#20837;&#21040;&#22270;&#29255;&#30340;url&#20013;&#65292;&#36825;&#26679;&#25105;&#20204;&#30340;&#31449;&#28857;&#22312;&#35775;&#38382;&#37327;&#27809;&#26377;&#20219;&#20309;&#22686;&#38271;&#30340;&#24773;&#20917;&#19979;&#35813;&#29992;&#25143;&#30340;&#25512;&#24191;&#25968;&#21364;&#30636;&#38388;&#24426;&#21319;&#20102;&#12290;
&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&#38459;&#27490;&#20316;&#24330;

&lt;p&gt;
    &#36890;&#36807;&#20351;&#29992;&#24341;&#29992;&#39029;&#20013;&#30340;&#29992;&#25143;&#26631;&#35782;&#36827;&#34892;&#35760;&#24405;&#26469;&#35299;&#20915;&#36825;&#20010;&#38382;&#39064;&#65292;&#36825;&#26679;&#21482;&#26377;&#24403;&#29992;&#25143;&#26469;&#21040;&#35770;&#22363;&#24182;&#36827;&#34892;&#20102;&#30456;&#20851;&#25805;&#20316;&#25165;&#31639;&#25512;&#33616;&#26377;&#25928;&#12290;
&lt;/p&gt;
&lt;p&gt;
    &#20462;&#25913;source/class/discuz/discuz_application.php&#25991;&#20214;&#65292;&#23558;&#19979;&#38754;&#30340;&#20869;&#23481;&#65306;
&lt;/p&gt;


&lt;pre class="src src-php"&gt;&lt;span style="color: #729fcf; font-weight: bold;"&gt;if&lt;/span&gt;((!&lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;empty(&lt;/span&gt;$&lt;span style="color: #8ae234;"&gt;_GET&lt;/span&gt;[&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'fromuid'&lt;/span&gt;]) || !&lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;empty(&lt;/span&gt;$&lt;span style="color: #8ae234;"&gt;_GET&lt;/span&gt;[&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'fromuser'&lt;/span&gt;])) &amp;amp;&amp;amp; ($&lt;span style="color: #8ae234;"&gt;this&lt;/span&gt;-&amp;gt;&lt;span style="color: #eeeeec;"&gt;var&lt;/span&gt;[&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'setting'&lt;/span&gt;][&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'creditspolicy'&lt;/span&gt;][&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'promotion_visit'&lt;/span&gt;] || $&lt;span style="color: #8ae234;"&gt;this&lt;/span&gt;-&amp;gt;&lt;span style="color: #eeeeec;"&gt;var&lt;/span&gt;[&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'setting'&lt;/span&gt;][&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'creditspolicy'&lt;/span&gt;][&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'promotion_register'&lt;/span&gt;])) {
    &lt;span style="color: #729fcf; font-weight: bold;"&gt;require_once&lt;/span&gt; &lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;libfile(&lt;/span&gt;&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'misc/promotion'&lt;/span&gt;, &lt;span style="color: #ad7fa8; font-style: italic;"&gt;'include'&lt;/span&gt;);
}
&lt;/pre&gt;

&lt;p&gt;
    &#25913;&#20026;&#65306;
&lt;/p&gt;


&lt;pre class="src src-php"&gt;&lt;span style="color: #729fcf; font-weight: bold;"&gt;if&lt;/span&gt; (&lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;isset(&lt;/span&gt;$&lt;span style="color: #8ae234;"&gt;_SERVER&lt;/span&gt;[&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'HTTP_REFERER'&lt;/span&gt;]) &amp;amp;&amp;amp; &lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;strpos(&lt;/span&gt;$&lt;span style="color: #8ae234;"&gt;_SERVER&lt;/span&gt;[&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'HTTP_REFERER'&lt;/span&gt;], &lt;span style="color: #ad7fa8; font-style: italic;"&gt;'http://g.xunlei.com/'&lt;/span&gt;) === &lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;0&lt;/span&gt;) {
    $&lt;span style="color: #eeeeec;"&gt;referer_query&lt;/span&gt; = &lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;parse_url(&lt;/span&gt;$&lt;span style="color: #8ae234;"&gt;_SERVER&lt;/span&gt;[&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'HTTP_REFERER'&lt;/span&gt;], &lt;span style="color: #f57900; font-weight: bold;"&gt;PHP_URL_QUERY&lt;/span&gt;);
    &lt;span style="color: #729fcf; font-weight: bold;"&gt;if&lt;/span&gt; ($&lt;span style="color: #eeeeec;"&gt;referer_query&lt;/span&gt;) {
        &lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;parse_str(&lt;/span&gt;$&lt;span style="color: #eeeeec;"&gt;referer_query&lt;/span&gt;, $&lt;span style="color: #eeeeec;"&gt;referer_get&lt;/span&gt;);
        &lt;span style="color: #729fcf; font-weight: bold;"&gt;if&lt;/span&gt;((!&lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;empty(&lt;/span&gt;$&lt;span style="color: #eeeeec;"&gt;referer_get&lt;/span&gt;[&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'fromuid'&lt;/span&gt;]) || !&lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;empty(&lt;/span&gt;$&lt;span style="color: #eeeeec;"&gt;referer_get&lt;/span&gt;[&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'fromuser'&lt;/span&gt;])) &amp;amp;&amp;amp; ($&lt;span style="color: #8ae234;"&gt;this&lt;/span&gt;-&amp;gt;&lt;span style="color: #eeeeec;"&gt;var&lt;/span&gt;[&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'setting'&lt;/span&gt;][&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'creditspolicy'&lt;/span&gt;][&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'promotion_visit'&lt;/span&gt;] || $&lt;span style="color: #8ae234;"&gt;this&lt;/span&gt;-&amp;gt;&lt;span style="color: #eeeeec;"&gt;var&lt;/span&gt;[&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'setting'&lt;/span&gt;][&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'creditspolicy'&lt;/span&gt;][&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'promotion_register'&lt;/span&gt;])) {
            &lt;span style="color: #729fcf; font-weight: bold;"&gt;require_once&lt;/span&gt; &lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;libfile(&lt;/span&gt;&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'misc/promotion'&lt;/span&gt;, &lt;span style="color: #ad7fa8; font-style: italic;"&gt;'include'&lt;/span&gt;);
        }
    }
}
&lt;/pre&gt;


&lt;p&gt;
    &#20462;&#25913;source/include/misc/misc_promotion.php&#25991;&#20214;&#65292;&#23558;&#19979;&#38754;&#30340;&#20869;&#23481;&#65306;
&lt;/p&gt;


&lt;pre class="src src-php"&gt;&lt;span style="color: #729fcf; font-weight: bold;"&gt;if&lt;/span&gt;(!&lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;empty(&lt;/span&gt;$&lt;span style="color: #8ae234;"&gt;_GET&lt;/span&gt;[&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'fromuid'&lt;/span&gt;])) {
    $&lt;span style="color: #eeeeec;"&gt;fromuid&lt;/span&gt; = &lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;intval(&lt;/span&gt;$&lt;span style="color: #8ae234;"&gt;_GET&lt;/span&gt;[&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'fromuid'&lt;/span&gt;]);
    $&lt;span style="color: #eeeeec;"&gt;fromuser&lt;/span&gt; = &lt;span style="color: #ad7fa8; font-style: italic;"&gt;''&lt;/span&gt;;
} &lt;span style="color: #729fcf; font-weight: bold;"&gt;else&lt;/span&gt; {
    $&lt;span style="color: #eeeeec;"&gt;fromuser&lt;/span&gt; = $&lt;span style="color: #8ae234;"&gt;_GET&lt;/span&gt;[&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'fromuser'&lt;/span&gt;];
    $&lt;span style="color: #eeeeec;"&gt;fromuid&lt;/span&gt; = &lt;span style="color: #ad7fa8; font-style: italic;"&gt;''&lt;/span&gt;;
}
&lt;/pre&gt;

&lt;p&gt;
    &#25913;&#20026;&#65306;
&lt;/p&gt;


&lt;pre class="src src-php"&gt;&lt;span style="color: #729fcf; font-weight: bold;"&gt;if&lt;/span&gt;(!&lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;empty(&lt;/span&gt;$&lt;span style="color: #eeeeec;"&gt;referer_get&lt;/span&gt;[&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'fromuid'&lt;/span&gt;])) {
    $&lt;span style="color: #eeeeec;"&gt;fromuid&lt;/span&gt; = &lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;intval(&lt;/span&gt;$&lt;span style="color: #eeeeec;"&gt;referer_get&lt;/span&gt;[&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'fromuid'&lt;/span&gt;]);
    $&lt;span style="color: #eeeeec;"&gt;fromuser&lt;/span&gt; = &lt;span style="color: #ad7fa8; font-style: italic;"&gt;''&lt;/span&gt;;
} &lt;span style="color: #729fcf; font-weight: bold;"&gt;else&lt;/span&gt; {
    $&lt;span style="color: #eeeeec;"&gt;fromuser&lt;/span&gt; = $&lt;span style="color: #eeeeec;"&gt;referer_get&lt;/span&gt;[&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'fromuser'&lt;/span&gt;];
    $&lt;span style="color: #eeeeec;"&gt;fromuid&lt;/span&gt; = &lt;span style="color: #ad7fa8; font-style: italic;"&gt;''&lt;/span&gt;;
}
&lt;/pre&gt;

&lt;/li&gt;
&lt;/ul&gt;

</content></entry><entry><title type="html">node.js下访问mysql注意事项</title><author><name>nil</name></author><link href="http://blog.kankanan.com/posts/2013/10/11_node2ejs4e0b8bbf95eemysql6ce8610f4e8b9879.html"/><updated>2013-10-11T10:45:00Z</updated><published>2013-10-11T10:45:00Z</published><id>posts/2013/10/11_node2ejs4e0b8bbf95eemysql6ce8610f4e8b9879.html</id><category scheme="/tags/node.html" term="node" label="node"/><category scheme="/tags/mysql.html" term="mysql" label="mysql"/><content type="html">&lt;p&gt;
  &#26412;&#25991;&#20165;&#38024;&#23545; &lt;a href="https://github.com/felixge/node-mysql"&gt;node-mysql&lt;/a&gt; &#27169;&#22359;&#12290;
&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Connection &#23545;&#35937;&#20026;&#19968;&#20010;&#21040;mysql&#30340;&#36830;&#25509;&#65292;&#22312;&#20854;&#19978;&#30340;query&#26159;&#20018;&#34892;&#36827;&#34892;&#30340;&#12290;

&lt;p&gt;
    &#30001;&#20110;mysql&#21327;&#35758;&#31867;&#20284;http&#26159;&#20018;&#34892;&#30340;&#65292;&#22312;&#19968;&#20010;mysql&#36830;&#25509;&#19978;&#30340;&#22810;&#20010;query&#24517;&#39035;&#20381;&#27425;&#36827;&#34892;&#12290;
&lt;/p&gt;
&lt;p&gt;    
    &lt;a href="https://github.com/felixge/node-mysql"&gt;node-mysql&lt;/a&gt; &#30340; Connection&#23545;&#35937;&#19978;&#21516;&#26102;&#21457;&#36215;&#30340;&#22810;&#20010;query&#20250;&#38431;&#21015;&#21270;&#65292;
&lt;/p&gt;
&lt;p&gt;    
    &#22788;&#29702;&#23436;&#19968;&#20010;query&#20877;&#36827;&#34892;&#19979;&#19968;query&#30340;&#22788;&#29702;&#65292;&#20256;&#36882;&#32473;&#22238;&#35843;&#20989;&#25968;&#30340;query&#32467;&#26524;&#19981;&#20250;&#38169;&#20081;&#12290;
&lt;/p&gt;
&lt;p&gt;
    &#22312;&#26377;&#19968;&#23450;&#35775;&#38382;&#37327;&#30340;&#26381;&#21153;&#20013;&#24212;&#35813;&#24635;&#26159;&#20351;&#29992; &lt;code&gt;&#36830;&#25509;&#27744;&lt;/code&gt; &#12290;
&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;



&lt;ul&gt;
&lt;li&gt;&#22788;&#29702;Connection&#23545;&#35937;&#30340;&#37325;&#36830;&#12290;

&lt;p&gt;
    mysql&#36830;&#25509;&#31354;&#38386;&#19968;&#27573;&#26102;&#38388;&#21518;&#65288;&#40664;&#35748;8&#23567;&#26102;&#65289;&#20250;&#33258;&#21160;&#20851;&#38381;&#65292;
&lt;/p&gt;
&lt;p&gt;  
    &#21487;&#20197;&#22312;Connection&#23545;&#35937;&#30340; &lt;code&gt;error&lt;/code&gt; &#20107;&#20214;&#20013;&#26816;&#27979;&#21518;&#36830;&#25509;&#26029;&#24320;&#26102;&#36827;&#34892;&#37325;&#36830;&#12290;
&lt;/p&gt;
&lt;p&gt;
    &#20351;&#29992; &lt;code&gt;&#36830;&#25509;&#27744;&lt;/code&gt; &#19981;&#20250;&#26377;&#38382;&#39064;&#65292;&#36830;&#25509;&#26029;&#24320;&#21518;&#20250;&#40664;&#35748;&#20174;&#36830;&#25509;&#27744;&#20013;&#21076;&#38500;&#12290;
&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

</content></entry>
</feed>
