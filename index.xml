<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>看看俺 - KanKanAn.com</title>
  <link href="http://blog.kankanan.comindex.xml" rel="self" />
  <link href="http://blog.kankanan.com"/>
  <updated>2013-04-09T12:00:00Z</updated>
  <id>http://blog.kankanan.comindex.xml</id>
  <entry><title type="html">为什么不能在构造函数中调用shared_from_this</title><author><name>nil</name></author><link href="http://blog.kankanan.com/posts/2013/12/20_4e3a4ec04e484e0d80fd57286784902051fd65704e2d8c037528shared5ffrom5fthis.html"/><updated>2013-12-20T01:02:00Z</updated><published>2013-12-20T01:02:00Z</published><id>posts/2013/12/20_4e3a4ec04e484e0d80fd57286784902051fd65704e2d8c037528shared5ffrom5fthis.html</id><category scheme="/tags/cpp.html" term="cpp" label="cpp"/><content type="html">&lt;p&gt;
  &#20808;&#30475;&#31034;&#20363;&#20195;&#30721;&#65306;
&lt;/p&gt;



&lt;pre class="src src-c++"&gt;&lt;span style="color: #729fcf; font-weight: bold;"&gt;class&lt;/span&gt; &lt;span style="color: #8ae234; font-weight: bold;"&gt;Chicken&lt;/span&gt; : &lt;span style="color: #729fcf; font-weight: bold;"&gt;public&lt;/span&gt; &lt;span style="color: #8ae234; font-weight: bold;"&gt;enable_shared_from_this&lt;/span&gt;&amp;lt;&lt;span style="color: #8ae234; font-weight: bold;"&gt;Chicken&lt;/span&gt;&amp;gt;
{
&lt;span style="color: #729fcf; font-weight: bold;"&gt;public&lt;/span&gt;:
    &lt;span style="color: #edd400; font-weight: bold; font-style: italic;"&gt;Chicken&lt;/span&gt;()
    {
        &lt;span style="color: #8ae234; font-weight: bold;"&gt;shared_ptr&lt;/span&gt;&amp;lt;&lt;span style="color: #8ae234; font-weight: bold;"&gt;Chicken&lt;/span&gt;&amp;gt; &lt;span style="color: #eeeeec;"&gt;chicken_ptr&lt;/span&gt; = shared_from_this();    &lt;span style="color: #888a85;"&gt;//&lt;/span&gt;&lt;span style="color: #888a85;"&gt;throw std::bad_weak_ptr&lt;/span&gt;
    }
};
&lt;/pre&gt;


&lt;p&gt;
  &#20877;&#30475;shared&lt;sub&gt;from&lt;/sub&gt;&lt;sub&gt;this&lt;/sub&gt;()&#30340;&#34892;&#20026;&#65306;
&lt;/p&gt;


&lt;pre class="src src-c++"&gt;&lt;span style="color: #729fcf; font-weight: bold;"&gt;return&lt;/span&gt; _weak_ptr-&amp;gt;lock();
&lt;/pre&gt;


&lt;p&gt;
  &lt;sub&gt;weak&lt;/sub&gt;&lt;sub&gt;ptr&#20026;&#29238;&#31867;&#65288;enable&lt;/sub&gt;&lt;sub&gt;shared&lt;/sub&gt;&lt;sub&gt;from&lt;/sub&gt;&lt;sub&gt;this&amp;lt&lt;/sub&gt;;Chicken&amp;gt;&#65289;&#30340;&#25104;&#21592;&#21464;&#37327;&#65292;&#38656;&#35201;&#19968;&#20010;shared&lt;sub&gt;ptr&amp;lt&lt;/sub&gt;;Chicken&amp;gt;&#23545;&#35937;&#26469;&#21021;&#22987;&#21270;&#23427;&#65292;&#32780;shared&lt;sub&gt;ptr&amp;lt&lt;/sub&gt;;Chicken&amp;gt;&#38656;&#35201;&#19968;&#20010;Chicken&#23545;&#35937;&#26469;&#21019;&#24314;&#65292;&#20294;&#27492;&#26102;Chicken&#23545;&#35937;&#27491;&#22312;&#26500;&#36896;&#20013;&#65292;&#36825;&#26159;&#20010;&#40481;&#19982;&#34507;&#30340;&#26080;&#35299;&#38382;&#39064;&#12290;
&lt;/p&gt;
&lt;p&gt;  
  &#20854;&#23454;&lt;sub&gt;weak&lt;/sub&gt;&lt;sub&gt;ptr&#25104;&#21592;&#21464;&#37327;&#26159;&#22312;shared&lt;/sub&gt;&lt;sub&gt;ptr&#30340;&#26500;&#36896;&#20989;&#25968;&#20013;&#24310;&#36831;&#21021;&#22987;&#21270;&#30340;&#65292;&#19981;&#21482;&#26159;&#22312;&#26500;&#36896;&#20989;&#25968;&#20013;&#19981;&#33021;&#35843;&#29992;shared&lt;/sub&gt;&lt;sub&gt;from&lt;/sub&gt;&lt;sub&gt;this&#65292;&#20687;&#19979;&#38754;&#30340;&#20351;&#29992;&#26041;&#24335;&#21516;&#26679;&#19981;&#34892;&#65306;&lt;/sub&gt;
&lt;/p&gt;


&lt;pre class="src src-c++"&gt;&lt;span style="color: #8ae234; font-weight: bold;"&gt;Chicken&lt;/span&gt;* &lt;span style="color: #eeeeec;"&gt;chicken&lt;/span&gt; = &lt;span style="color: #729fcf; font-weight: bold;"&gt;new&lt;/span&gt; &lt;span style="color: #8ae234; font-weight: bold;"&gt;Chicken&lt;/span&gt;();
&lt;span style="color: #8ae234; font-weight: bold;"&gt;shared_ptr&lt;/span&gt;&amp;lt;&lt;span style="color: #8ae234; font-weight: bold;"&gt;Chicken&lt;/span&gt;&amp;gt; &lt;span style="color: #eeeeec;"&gt;chicken_ptr&lt;/span&gt; = chicken-&amp;gt;shared_from_this();  &lt;span style="color: #888a85;"&gt;//&lt;/span&gt;&lt;span style="color: #888a85;"&gt;throw std::bad_weak_ptr&lt;/span&gt;
&lt;/pre&gt;


&lt;p&gt;  
  enable&lt;sub&gt;shared&lt;/sub&gt;&lt;sub&gt;from&lt;/sub&gt;&lt;sub&gt;this&#19981;&#26159;&#20174;this&#31100;&#25351;&#38024;&#21464;&#20986;&#26234;&#33021;&#25351;&#38024;&#30340;&#39764;&#27861;&#65292;&#23427;&#21482;&#26159;&#19968;&#20010;&#36741;&#21161;&#31867;&#65292;&#20026;&#19968;&#20010;&#21482;&#20351;&#29992;shared&lt;/sub&gt;&lt;sub&gt;ptr&#31649;&#29702;&#23545;&#35937;&#29983;&#21629;&#21608;&#26399;&#30340;&#31867;&#28155;&#21152;&#19968;&#20010;&#33258;&#36523;&#30340;&#26234;&#33021;&#25351;&#38024;&#25104;&#21592;&#21464;&#37327;&#20379;&#20869;&#37096;&#20351;&#29992;&#12290;&lt;/sub&gt;
&lt;/p&gt;
&lt;p&gt;
  &#32780;&#8220;&#19981;&#33021;&#22312;&#26500;&#36896;&#20989;&#25968;&#20013;&#35843;&#29992;shared&lt;sub&gt;from&lt;/sub&gt;&lt;sub&gt;this&#8221;&#36825;&#20010;&#38382;&#39064;&#20165;&#20165;&#26159;&#26631;&#20934;&#23454;&#29616;&#19978;&#30340;&#19968;&#20010;&#28431;&#27934;&#12290;&lt;/sub&gt;
&lt;/p&gt;
&lt;p&gt;
  &#20320;&#24212;&#35813;&#20687;&#19979;&#38754;&#36825;&#26679;&#29992;&#65306;
&lt;/p&gt;


&lt;pre class="src src-c++"&gt;&lt;span style="color: #729fcf; font-weight: bold;"&gt;class&lt;/span&gt; &lt;span style="color: #8ae234; font-weight: bold;"&gt;Chicken&lt;/span&gt; : &lt;span style="color: #729fcf; font-weight: bold;"&gt;public&lt;/span&gt; &lt;span style="color: #8ae234; font-weight: bold;"&gt;enable_shared_from_this&lt;/span&gt;&amp;lt;&lt;span style="color: #8ae234; font-weight: bold;"&gt;Chicken&lt;/span&gt;&amp;gt;
{
&lt;span style="color: #729fcf; font-weight: bold;"&gt;public&lt;/span&gt;:
    &lt;span style="color: #edd400; font-weight: bold; font-style: italic;"&gt;Chicken&lt;/span&gt;()
    {
    }

    &lt;span style="color: #8ae234; font-weight: bold;"&gt;void&lt;/span&gt; &lt;span style="color: #edd400; font-weight: bold; font-style: italic;"&gt;use&lt;/span&gt;()
    {
        &lt;span style="color: #8ae234; font-weight: bold;"&gt;shared_ptr&lt;/span&gt;&amp;lt;&lt;span style="color: #8ae234; font-weight: bold;"&gt;Chicken&lt;/span&gt;&amp;gt; &lt;span style="color: #eeeeec;"&gt;chicken_ptr&lt;/span&gt; = shared_from_this();
    }
};

&lt;span style="color: #8ae234; font-weight: bold;"&gt;shared_ptr&lt;/span&gt;&amp;lt;&lt;span style="color: #8ae234; font-weight: bold;"&gt;Chicken&lt;/span&gt;&amp;gt; &lt;span style="color: #edd400; font-weight: bold; font-style: italic;"&gt;chicken_ptr&lt;/span&gt;(&lt;span style="color: #729fcf; font-weight: bold;"&gt;new&lt;/span&gt; &lt;span style="color: #8ae234; font-weight: bold;"&gt;Chicken&lt;/span&gt;);
chicken_ptr-&amp;gt;use();
&lt;/pre&gt;


&lt;p&gt;
  &#31361;&#28982;&#24819;&#36215;&#19968;&#27573;&#23545;&#35805;&#65306;
&lt;/p&gt;&lt;blockquote&gt;

&lt;p&gt;&#38463;&#28422;&#65306;&#38395;&#35199;&#65292;&#20107;&#24773;&#36827;&#34892;&#30340;&#24590;&#20040;&#26679;&#20102;&#65292;&#38395;&#35199;&#65311;
&#36798;&#38395;&#35199;&#65306; &#26368;&#36817;&#25105;&#21457;&#26126;&#20102;&#20123;&#19996;&#35199;&#65292;&#30456;&#20449;&#33021;&#24110;&#24471;&#21040;&#20320;&#12290;
&#36798;&#38395;&#35199;&#25343;&#20986;&#25163;&#30005;&#31570;&#12290;
&#38463;&#28422;&#65306;&#25163;&#30005;&#31570;&#65311;
&#36798;&#38395;&#35199;&#65306;&#38169;&#65292;&#36825;&#25903;&#19981;&#26159;&#19968;&#21482;&#26222;&#36890;&#30340;&#25163;&#30005;&#31570;&#65292;&#36825;&#25903;&#26159;&#19968;&#25903;&#19981;&#38656;&#35201;&#30005;&#27744;&#30340;&#22826;&#38451;&#33021;&#25163;&#30005;&#31570;&#65292;&#22312;&#26377;&#20809;&#30340;&#26102;&#20505;&#20182;&#23601;&#20250;&#20142;&#12290;
&#21496;&#20196;&#65306;&#37027;&#22914;&#26524;&#27809;&#26377;&#20809;&#21602;&#65311;
&#36798;&#38395;&#35199;&#65306;&#32477;&#23545;&#19981;&#20142;&#12290;
&#38463;&#28422;&#65306;&#26377;&#27809;&#26377;&#21487;&#33021;&#27809;&#20809;&#30340;&#26102;&#20505;&#23427;&#20063;&#20250;&#20142;&#65311;
&#36798;&#38395;&#35199;&#65306;&#38382;&#30340;&#22909;&#65292;&#20851;&#28783;&#12290;
&#36798;&#38395;&#35199;&#65306;&#20320;&#25343;&#21478;&#19968;&#21482;&#25163;&#30005;&#31570;&#29031;&#23427;&#21602;&#65292;&#23427;&#23601;&#20250;&#20142;&#12290;
&#36798;&#38395;&#35199;&#65306;&#21704;&#21704;&#65292;&#24590;&#20040;&#26679;&#21834;&#65311;
&#38463;&#28422;&#65306;&#36825;&#20010;&#21457;&#26126;&#36824;&#30495;&#26377;&#21019;&#24847;&#21834;&#12290;
&lt;/p&gt;
&lt;/blockquote&gt;




&lt;p&gt;
  &#21442;&#32771;&#65306;&#12298;&lt;a href="http://hi.baidu.com/cpuramdisk/item/7c2f8d77385e0f29d7a89cf0"&gt;shared&lt;sub&gt;from&lt;/sub&gt;&lt;sub&gt;this&lt;/sub&gt; &#20960;&#20010;&#20540;&#24471;&#27880;&#24847;&#30340;&#22320;&#26041;&lt;/a&gt;&#12299;
&lt;/p&gt;</content></entry><entry><title type="html">Discuz访问推广任务反作弊</title><author><name>nil</name></author><link href="http://blog.kankanan.com/posts/2013/12/20_discuz8bbf95ee63a85e7f4efb52a153cd4f5c5f0a.html"/><updated>2013-12-20T01:02:00Z</updated><published>2013-12-20T01:02:00Z</published><id>posts/2013/12/20_discuz8bbf95ee63a85e7f4efb52a153cd4f5c5f0a.html</id><category scheme="/tags/php.html" term="php" label="php"/><category scheme="/tags/discuz.html" term="discuz" label="discuz"/><content type="html">&lt;ul&gt;
&lt;li&gt;&#35782;&#21035;&#20316;&#24330;

&lt;p&gt;
    &#21457;&#36148;&#12289;&#22238;&#22797;&#36739;&#23569;&#30340;&#29992;&#25143;&#20855;&#26377;&#20559;&#39640;&#30340;&#31215;&#20998;&#12289;&#31561;&#32423;&#36890;&#24120;&#23601;&#26159;&#28508;&#22312;&#30340;&#20316;&#24330;&#23545;&#35937;&#12290;&#22312;&#21518;&#21488;&#26597;&#30475;&#35813;&#29992;&#25143;&#30340;&#31215;&#20998;&#21382;&#21490;&#65292;&#22914;&#26524;&#26469;&#21382;&#19981;&#26126;&#65292;&#37027;&#20040;&#24456;&#21487;&#33021;&#26159;&#36890;&#36807;&#35775;&#38382;&#25512;&#24191;&#20316;&#24330;&#33719;&#24471;&#30340;&#12290;
&lt;/p&gt;
&lt;p&gt;
    &#22312;&#25105;&#20204;&#30340;&#20363;&#23376;&#37324;&#23601;&#21457;&#29616;&#26377;&#19968;&#20010;&#29992;&#25143;&#37329;&#38065;&#25968;&#36807;&#39640;&#65292;&#20808;&#26597;&#30475;&#35813;&#29992;&#25143;&#30340;&#31215;&#20998;&#34920;&#65306;
&lt;/p&gt;



&lt;pre class="example"&gt;mysql&amp;gt; SELECT total, cyclenum, extcredits2 FROM g_common_credit_rule_log WHERE rid=8 and uid=119;
+-------+----------+-------------+
| total | cyclenum | extcredits2 |
+-------+----------+-------------+
|  3454 |     3454 |           1 |
+-------+----------+-------------+
1 row in set (0.00 sec)
&lt;/pre&gt;


&lt;p&gt;    
    &#30456;&#20851;&#23383;&#27573;&#35828;&#26126;
&lt;/p&gt;&lt;dl&gt;
&lt;dt&gt;total&lt;/dt&gt;&lt;dd&gt;&#31574;&#30053;&#34987;&#25191;&#34892;&#24635;&#27425;&#25968;
&lt;/dd&gt;
&lt;dt&gt;cyclenum&lt;/dt&gt;&lt;dd&gt;&#21608;&#26399;&#34987;&#25191;&#34892;&#27425;&#25968; 
&lt;/dd&gt;
&lt;dt&gt;extcredits2&lt;/dt&gt;&lt;dd&gt;&#25105;&#20204;&#30340;&#31995;&#32479;&#37324;&#23545;&#24212;&#37329;&#38065;&#25968;
&lt;/dd&gt;
&lt;dt&gt;rid&lt;/dt&gt;&lt;dd&gt;&#20540;8&#20026;&#35775;&#38382;&#25512;&#24191;&#20219;&#21153;&#31867;&#22411;
&lt;/dd&gt;
&lt;dt&gt;uid&lt;/dt&gt;&lt;dd&gt;&#20540;119&#20026;&#20316;&#24330;&#29992;&#25143;id

&lt;/dd&gt;
&lt;/dl&gt;

&lt;p&gt;    &#20174;&#19978;&#38754;&#21487;&#20197;&#30475;&#20986;&#35813;&#29992;&#25143;&#23436;&#25104;&#20102;3454&#27425;&#20219;&#21153;&#65292; &#25509;&#19979;&#26469;&#23601;&#38656;&#35201;&#30830;&#35748;&#36825;&#20123;&#20219;&#21153;&#26159;&#36890;&#36807;&#20316;&#24330;&#23436;&#25104;&#30340;&#20102;&#12290;
&lt;/p&gt;
&lt;p&gt;    
    &#25628;&#32034;&#35813;&#29992;&#25143;&#25512;&#24191;&#38142;&#25509;&#22312;web&#26381;&#21153;&#22120;&#20013;&#30041;&#19979;&#30340;&#35775;&#38382;&#26085;&#24535;&#65306;
&lt;/p&gt;


&lt;pre class="example"&gt;logs# grep 'fromuid=227' /usr/local/nginx/logs/access.log*
"GET /?fromuid=119.jpg HTTP/1.1" 301 6243 "http://xxxx.org/details.php?id=178668"
...
&lt;/pre&gt;


&lt;p&gt;
    &#21487;&#20197;&#21021;&#27493;&#26029;&#23450;&#65292;&#35813;&#29992;&#25143;&#36890;&#36807;&#22312;&#20854;&#23427;&#35770;&#22363;&#20013;&#21457;&#24067;&#20449;&#24687;&#24182;&#23558;&#25512;&#24191;url&#27880;&#20837;&#21040;&#22270;&#29255;&#30340;url&#20013;&#65292;&#36825;&#26679;&#25105;&#20204;&#30340;&#31449;&#28857;&#22312;&#35775;&#38382;&#37327;&#27809;&#26377;&#20219;&#20309;&#22686;&#38271;&#30340;&#24773;&#20917;&#19979;&#35813;&#29992;&#25143;&#30340;&#25512;&#24191;&#25968;&#30830;&#30636;&#38388;&#24426;&#21319;&#20102;&#12290;
&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&#38459;&#27490;&#20316;&#24330;

&lt;p&gt;
    &#36890;&#36807;&#20351;&#29992;&#24341;&#29992;&#39029;&#20013;&#30340;&#29992;&#25143;&#26631;&#35782;&#36827;&#34892;&#35760;&#24405;&#26469;&#35299;&#20915;&#36825;&#20010;&#38382;&#39064;&#65292;&#36825;&#26679;&#21482;&#26377;&#24403;&#29992;&#25143;&#26469;&#21040;&#35770;&#22363;&#24182;&#36827;&#34892;&#20102;&#30456;&#20851;&#25805;&#20316;&#25165;&#31639;&#25512;&#33616;&#26377;&#25928;&#12290;
&lt;/p&gt;
&lt;p&gt;
    &#20462;&#25913;source/class/discuz/discuz&lt;sub&gt;application&lt;/sub&gt;.php&#25991;&#20214;&#65292;&#23558;&#19979;&#38754;&#30340;&#20869;&#23481;&#65306;
&lt;/p&gt;


&lt;pre class="src src-php"&gt;&lt;span style="color: #729fcf; font-weight: bold;"&gt;if&lt;/span&gt;((!&lt;span style="color: #729fcf; font-weight: bold;"&gt;empty&lt;/span&gt;($&lt;span style="color: #8ae234;"&gt;_GET&lt;/span&gt;[&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'fromuid'&lt;/span&gt;]) || !&lt;span style="color: #729fcf; font-weight: bold;"&gt;empty&lt;/span&gt;($&lt;span style="color: #8ae234;"&gt;_GET&lt;/span&gt;[&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'fromuser'&lt;/span&gt;])) &amp;amp;&amp;amp; ($&lt;span style="color: #8ae234;"&gt;this&lt;/span&gt;-&amp;gt;&lt;span style="color: #729fcf; font-weight: bold;"&gt;var&lt;/span&gt;[&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'setting'&lt;/span&gt;][&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'creditspolicy'&lt;/span&gt;][&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'promotion_visit'&lt;/span&gt;] || $&lt;span style="color: #8ae234;"&gt;this&lt;/span&gt;-&amp;gt;&lt;span style="color: #729fcf; font-weight: bold;"&gt;var&lt;/span&gt;[&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'setting'&lt;/span&gt;][&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'creditspolicy'&lt;/span&gt;][&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'promotion_register'&lt;/span&gt;])) {
    &lt;span style="color: #729fcf; font-weight: bold;"&gt;require_once&lt;/span&gt; &lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;libfile&lt;/span&gt;(&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'misc/promotion'&lt;/span&gt;, &lt;span style="color: #ad7fa8; font-style: italic;"&gt;'include'&lt;/span&gt;);
}
&lt;/pre&gt;

&lt;p&gt;
    &#25913;&#20026;&#65306;
&lt;/p&gt;


&lt;pre class="src src-php"&gt;&lt;span style="color: #729fcf; font-weight: bold;"&gt;if&lt;/span&gt; (&lt;span style="color: #729fcf; font-weight: bold;"&gt;isset&lt;/span&gt;($&lt;span style="color: #8ae234;"&gt;_SERVER&lt;/span&gt;[&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'HTTP_REFERER'&lt;/span&gt;]) &amp;amp;&amp;amp; &lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;strpos&lt;/span&gt;($&lt;span style="color: #8ae234;"&gt;_SERVER&lt;/span&gt;[&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'HTTP_REFERER'&lt;/span&gt;], &lt;span style="color: #ad7fa8; font-style: italic;"&gt;'http://g.xunlei.com/'&lt;/span&gt;) === &lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;0&lt;/span&gt;) {
    $&lt;span style="color: #eeeeec;"&gt;referer_query&lt;/span&gt; = &lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;parse_url&lt;/span&gt;($&lt;span style="color: #8ae234;"&gt;_SERVER&lt;/span&gt;[&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'HTTP_REFERER'&lt;/span&gt;], &lt;span style="color: #f57900; font-weight: bold;"&gt;PHP_URL_QUERY&lt;/span&gt;);
    &lt;span style="color: #729fcf; font-weight: bold;"&gt;if&lt;/span&gt; ($&lt;span style="color: #eeeeec;"&gt;referer_query&lt;/span&gt;) {
        &lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;parse_str&lt;/span&gt;($&lt;span style="color: #eeeeec;"&gt;referer_query&lt;/span&gt;, $&lt;span style="color: #eeeeec;"&gt;referer_get&lt;/span&gt;);
        &lt;span style="color: #729fcf; font-weight: bold;"&gt;if&lt;/span&gt;((!&lt;span style="color: #729fcf; font-weight: bold;"&gt;empty&lt;/span&gt;($&lt;span style="color: #eeeeec;"&gt;referer_get&lt;/span&gt;[&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'fromuid'&lt;/span&gt;]) || !&lt;span style="color: #729fcf; font-weight: bold;"&gt;empty&lt;/span&gt;($&lt;span style="color: #eeeeec;"&gt;referer_get&lt;/span&gt;[&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'fromuser'&lt;/span&gt;])) &amp;amp;&amp;amp; ($&lt;span style="color: #8ae234;"&gt;this&lt;/span&gt;-&amp;gt;&lt;span style="color: #729fcf; font-weight: bold;"&gt;var&lt;/span&gt;[&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'setting'&lt;/span&gt;][&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'creditspolicy'&lt;/span&gt;][&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'promotion_visit'&lt;/span&gt;] || $&lt;span style="color: #8ae234;"&gt;this&lt;/span&gt;-&amp;gt;&lt;span style="color: #729fcf; font-weight: bold;"&gt;var&lt;/span&gt;[&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'setting'&lt;/span&gt;][&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'creditspolicy'&lt;/span&gt;][&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'promotion_register'&lt;/span&gt;])) {
            &lt;span style="color: #729fcf; font-weight: bold;"&gt;require_once&lt;/span&gt; &lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;libfile&lt;/span&gt;(&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'misc/promotion'&lt;/span&gt;, &lt;span style="color: #ad7fa8; font-style: italic;"&gt;'include'&lt;/span&gt;);
        }
    }
}
&lt;/pre&gt;


&lt;p&gt;
    &#20462;&#25913;source/include/misc/misc&lt;sub&gt;promotion&lt;/sub&gt;.php&#25991;&#20214;&#65292;&#23558;&#19979;&#38754;&#30340;&#20869;&#23481;&#65306;
&lt;/p&gt;


&lt;pre class="src src-php"&gt;&lt;span style="color: #729fcf; font-weight: bold;"&gt;if&lt;/span&gt;(!&lt;span style="color: #729fcf; font-weight: bold;"&gt;empty&lt;/span&gt;($&lt;span style="color: #8ae234;"&gt;_GET&lt;/span&gt;[&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'fromuid'&lt;/span&gt;])) {
    $&lt;span style="color: #eeeeec;"&gt;fromuid&lt;/span&gt; = &lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;intval&lt;/span&gt;($&lt;span style="color: #8ae234;"&gt;_GET&lt;/span&gt;[&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'fromuid'&lt;/span&gt;]);
    $&lt;span style="color: #eeeeec;"&gt;fromuser&lt;/span&gt; = &lt;span style="color: #ad7fa8; font-style: italic;"&gt;''&lt;/span&gt;;
} &lt;span style="color: #729fcf; font-weight: bold;"&gt;else&lt;/span&gt; {
    $&lt;span style="color: #eeeeec;"&gt;fromuser&lt;/span&gt; = $&lt;span style="color: #8ae234;"&gt;_GET&lt;/span&gt;[&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'fromuser'&lt;/span&gt;];
    $&lt;span style="color: #eeeeec;"&gt;fromuid&lt;/span&gt; = &lt;span style="color: #ad7fa8; font-style: italic;"&gt;''&lt;/span&gt;;
}
&lt;/pre&gt;

&lt;p&gt;
    &#25913;&#20026;&#65306;
&lt;/p&gt;


&lt;pre class="src src-php"&gt;&lt;span style="color: #729fcf; font-weight: bold;"&gt;if&lt;/span&gt;(!&lt;span style="color: #729fcf; font-weight: bold;"&gt;empty&lt;/span&gt;($&lt;span style="color: #eeeeec;"&gt;referer_get&lt;/span&gt;[&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'fromuid'&lt;/span&gt;])) {
    $&lt;span style="color: #eeeeec;"&gt;fromuid&lt;/span&gt; = &lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;intval&lt;/span&gt;($&lt;span style="color: #eeeeec;"&gt;referer_get&lt;/span&gt;[&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'fromuid'&lt;/span&gt;]);
    $&lt;span style="color: #eeeeec;"&gt;fromuser&lt;/span&gt; = &lt;span style="color: #ad7fa8; font-style: italic;"&gt;''&lt;/span&gt;;
} &lt;span style="color: #729fcf; font-weight: bold;"&gt;else&lt;/span&gt; {
    $&lt;span style="color: #eeeeec;"&gt;fromuser&lt;/span&gt; = $&lt;span style="color: #eeeeec;"&gt;referer_get&lt;/span&gt;[&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'fromuser'&lt;/span&gt;];
    $&lt;span style="color: #eeeeec;"&gt;fromuid&lt;/span&gt; = &lt;span style="color: #ad7fa8; font-style: italic;"&gt;''&lt;/span&gt;;
}
&lt;/pre&gt;

&lt;/li&gt;
&lt;/ul&gt;

</content></entry><entry><title type="html">node.js下访问mysql注意事项</title><author><name>nil</name></author><link href="http://blog.kankanan.com/posts/2013/10/11_node2ejs4e0b8bbf95eemysql6ce8610f4e8b9879.html"/><updated>2013-10-11T10:45:00Z</updated><published>2013-10-11T10:45:00Z</published><id>posts/2013/10/11_node2ejs4e0b8bbf95eemysql6ce8610f4e8b9879.html</id><category scheme="/tags/node.html" term="node" label="node"/><category scheme="/tags/mysql.html" term="mysql" label="mysql"/><content type="html">&lt;p&gt;
  &#26412;&#25991;&#20165;&#38024;&#23545; &lt;a href="https://github.com/felixge/node-mysql"&gt;node-mysql&lt;/a&gt; &#27169;&#22359;&#12290;
&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Connection &#23545;&#35937;&#20026;&#19968;&#20010;&#21040;mysql&#30340;&#36830;&#25509;&#65292;&#22312;&#20854;&#19978;&#30340;query&#26159;&#20018;&#34892;&#36827;&#34892;&#30340;&#12290;

&lt;p&gt;
    &#30001;&#20110;mysql&#21327;&#35758;&#31867;&#20284;http&#26159;&#20018;&#34892;&#30340;&#65292;&#22312;&#19968;&#20010;mysql&#36830;&#25509;&#19978;&#30340;&#22810;&#20010;query&#24517;&#39035;&#20381;&#27425;&#36827;&#34892;&#12290;
&lt;/p&gt;
&lt;p&gt;    
    &lt;a href="https://github.com/felixge/node-mysql"&gt;node-mysql&lt;/a&gt; &#30340; Connection&#23545;&#35937;&#19978;&#21516;&#26102;&#21457;&#36215;&#30340;&#22810;&#20010;query&#20250;&#38431;&#21015;&#21270;&#65292;
&lt;/p&gt;
&lt;p&gt;    
    &#22788;&#29702;&#23436;&#19968;&#20010;query&#20877;&#36827;&#34892;&#19979;&#19968;query&#30340;&#22788;&#29702;&#65292;&#20256;&#36882;&#32473;&#22238;&#35843;&#20989;&#25968;&#30340;query&#32467;&#26524;&#19981;&#20250;&#38169;&#20081;&#12290;
&lt;/p&gt;
&lt;p&gt;
    &#22312;&#26377;&#19968;&#23450;&#35775;&#38382;&#37327;&#30340;&#26381;&#21153;&#20013;&#24212;&#35813;&#24635;&#26159;&#20351;&#29992; &lt;code&gt;&#36830;&#25509;&#27744;&lt;/code&gt; &#12290;
&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;



&lt;ul&gt;
&lt;li&gt;&#22788;&#29702;Connection&#23545;&#35937;&#30340;&#37325;&#36830;&#12290;

&lt;p&gt;
    mysql&#36830;&#25509;&#31354;&#38386;&#19968;&#27573;&#26102;&#38388;&#21518;&#65288;&#40664;&#35748;8&#23567;&#26102;&#65289;&#20250;&#33258;&#21160;&#20851;&#38381;&#65292;
&lt;/p&gt;
&lt;p&gt;  
    &#21487;&#20197;&#22312;Connection&#23545;&#35937;&#30340; &lt;code&gt;error&lt;/code&gt; &#20107;&#20214;&#20013;&#26816;&#27979;&#21518;&#36830;&#25509;&#26029;&#24320;&#26102;&#36827;&#34892;&#37325;&#36830;&#12290;
&lt;/p&gt;
&lt;p&gt;
    &#20351;&#29992; &lt;code&gt;&#36830;&#25509;&#27744;&lt;/code&gt; &#19981;&#20250;&#26377;&#38382;&#39064;&#65292;&#36830;&#25509;&#26029;&#24320;&#21518;&#20250;&#40664;&#35748;&#20174;&#36830;&#25509;&#27744;&#20013;&#21076;&#38500;&#12290;
&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

</content></entry><entry><title type="html">使用番茄工作法的感受</title><author><name>nil</name></author><link href="http://blog.kankanan.com/posts/2013/07/08_4f7f7528756a83045de54f5c6cd57684611f53d7.html"/><updated>2013-07-08T13:10:00Z</updated><published>2013-07-08T13:10:00Z</published><id>posts/2013/07/08_4f7f7528756a83045de54f5c6cd57684611f53d7.html</id><category scheme="/tags/pomodoro.html" term="pomodoro" label="pomodoro"/><content type="html">&lt;div id="outline-container-1" class="outline-3"&gt;
&lt;h3 id="sec-1"&gt;&#22522;&#26412;&#35201;&#39046;&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-1"&gt;


&lt;p&gt;   
   &#20174;&#20107;&#21153;&#28165;&#21333;&#20013;&#36873;&#20986;&#20170;&#22825;&#35201;&#20570;&#30340;&#20107;
&lt;/p&gt;
&lt;p&gt;
   &#25353;&#20248;&#20808;&#32423;&#22635;&#20837;&#20170;&#26085;&#24037;&#20316;&#35745;&#21010;&#34920;
&lt;/p&gt;
&lt;p&gt;
   &#20174;&#34920;&#20013;&#36873;&#25321;&#31532;&#19968;&#39033;&#26410;&#23436;&#25104;&#20107;&#21153;&#25353;&#19979;&#35745;&#26102;&#22120;
&lt;/p&gt;
&lt;p&gt;
   &#19987;&#24515;&#20570;&#36825;&#20214;&#20107;
&lt;/p&gt;
&lt;p&gt;
   25&#38047;&#21518;&#38083;&#21709;&#31435;&#21363;&#20572;&#27490;&#20570;&#20107;
&lt;/p&gt;
&lt;p&gt;
   &#22312;&#24403;&#21069;&#20107;&#21153;&#21518;&#26631;&#35760;&#29992;&#25481;&#20102;&#19968;&#20010;&#30058;&#33540;
&lt;/p&gt;
&lt;p&gt;
   &#20107;&#21153;&#23436;&#25104;&#21017;&#22312;&#20170;&#26085;&#20107;&#21153;&#28165;&#21333;&#21010;&#25481;&#24403;&#21069;&#20219;&#21153;
&lt;/p&gt;
&lt;p&gt;
   &#19987;&#24515;&#20241;&#24687;&#22320;5&#20998;&#38047;&#65288;&#27599;4&#20010;&#21608;&#26399;&#38271;&#20241;&#24687;15-30&#20998;&#38047;&#65289;
&lt;/p&gt;
&lt;p&gt;
   &#25353;&#19979;&#35745;&#26102;&#22120;
&lt;/p&gt;
&lt;p&gt;
   &#32487;&#32493;&#20570;&#20107;
&lt;/p&gt;
&lt;p&gt;
   &#22914;&#27492;&#24448;&#22797;
&lt;/p&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;div id="outline-container-2" class="outline-3"&gt;
&lt;h3 id="sec-2"&gt;&#25484;&#25511;&#24178;&#25200;&#22240;&#32032;&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-2"&gt;


&lt;ul&gt;
&lt;li&gt;&#20570;&#20107;&#26102;&#22914;&#36935;&#23454;&#21457;&#20107;&#20214;&#37196;&#24773;&#22788;&#29702;&#65306;

&lt;ul&gt;
&lt;li&gt;&#28155;&#21152;&#21040;&#20107;&#21153;&#28165;&#21333;&#20013;&#26126;&#22825;&#20877;&#22788;&#29702;
&lt;/li&gt;
&lt;li&gt;&#30452;&#25509;&#23433;&#25490;&#21040;&#20170;&#26085;&#20107;&#21153;&#28165;&#21333;&#31245;&#21518;&#22788;&#29702;
&lt;/li&gt;
&lt;li&gt;&#31435;&#21363;&#21462;&#28040;&#24403;&#21069;&#20107;&#21153;&#24320;&#22987;&#22788;&#29702;&#31361;&#21457;&#20107;&#20214;

&lt;/li&gt;
&lt;/ul&gt;

&lt;/li&gt;
&lt;li&gt;&#22312;&#24403;&#21069;&#20107;&#21153;&#21518;&#26041;&#25171;&#20010;&#20013;&#26029;&#26631;&#35760;
&lt;/li&gt;
&lt;/ul&gt;


&lt;/div&gt;

&lt;/div&gt;

&lt;div id="outline-container-3" class="outline-3"&gt;
&lt;h3 id="sec-3"&gt;&#35299;&#35835;&#24037;&#20316;&#35760;&#24405;&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-3"&gt;


&lt;p&gt;
   &#19968;&#22825;&#32467;&#26463;&#21518;&#25105;&#20204;&#23558;&#33719;&#24471;&#20197;&#19979;&#20449;&#24687;&#65306;
&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&#30693;&#36947;&#22788;&#29702;&#26576;&#20010;&#20107;&#21153;&#29992;&#26102;&#22810;&#23569;&#12290;&#24590;&#26679;&#35753;&#26102;&#38388;&#29992;&#24471;&#26356;&#23569;&#65311;

&lt;/li&gt;
&lt;li&gt;&#30693;&#36947;&#26102;&#38388;&#33457;&#22312;&#21738;&#37324;&#21435;&#20102;&#12290;&#33021;&#21542;&#23558;&#26102;&#38388;&#26356;&#22810;&#33457;&#22312;&#26377;&#25928;&#22788;&#29702;&#24037;&#20316;&#19978;&#65311;
&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;
   &#24403;&#26032;&#30340;&#19968;&#22825;&#24320;&#22987;&#26102;&#65292;&#25105;&#20204;&#20250;&#28165;&#26970;&#22320;&#30693;&#36947;&#27599;&#22825;&#26377;&#22810;&#23569;&#20010;&#30058;&#33540;&#21487;&#29992;&#65292;&#20170;&#22825;&#21487;&#20197;&#23433;&#25490;&#22810;&#23569;&#20107;&#21153;&#65292;&#27599;&#20010;&#20107;&#21153;&#38656;&#35201;&#28040;&#32791;&#22810;&#23569;&#20010;&#30058;&#33540;&#12290;
&lt;/p&gt;
&lt;p&gt;
   &#38543;&#30528;&#25105;&#20204;&#19981;&#26029;&#22320;&#26681;&#25454;&#36825;&#20123;&#35760;&#24405;&#25913;&#36827;&#25105;&#20204;&#30340;&#24037;&#20316;&#25928;&#29575;&#65292;&#26368;&#32456;&#25105;&#20204;&#33021;&#22815;&#23433;&#25490;&#26102;&#38388;&#12289;&#25484;&#25511;&#26102;&#38388;&#12290;
&lt;/p&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;div id="outline-container-4" class="outline-3"&gt;
&lt;h3 id="sec-4"&gt;&#30058;&#33540;&#24037;&#20316;&#27861;&#36981;&#20174;&#20064;&#24815;&#27861;&#21017;&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-4"&gt;


&lt;p&gt;
   &#24403;&#25105;&#36319;&#32769;&#23110;&#35299;&#37322;&#30058;&#33540;&#24037;&#20316;&#27861;&#26102;&#65292;&#22905;&#35828;&#20102;&#21477;&#65306;&#8220;&#36825;&#20010;&#21644;&#20320;&#20043;&#21069;&#35828;&#30340;&#20064;&#24815;&#27861;&#21017;&#24456;&#20687;&#8221;&#65292;&#32454;&#32454;&#19968;&#24819;&#19981;&#26080;&#36947;&#29702;&#12290;
&lt;/p&gt;
&lt;p&gt;
   &#20064;&#24815;&#30340;&#24418;&#25104;&#30340;&#19977;&#20010;&#27493;&#39588;&#65306;&#26263;&#31034;&#12289;&#24815;&#24120;&#34892;&#20026;&#12289;&#22870;&#36175;&#12290;&#20197;&#21450;&#20064;&#24815;&#22238;&#36335;&#12290;
&lt;/p&gt;
&lt;p&gt;
   &#30058;&#33540;&#24037;&#20316;&#27861;&#20063;&#26377;&#36825;&#19977;&#20010;&#35201;&#32032;&#65306;
&lt;/p&gt;
&lt;p&gt;
   &#12288;&#12288;&#26263;&#31034;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#25353;&#19979;&#35745;&#26102;&#22120;
&lt;/p&gt;
&lt;p&gt;
   &#12288;&#12288;&#24815;&#24120;&#34892;&#20026;&#12288;&#12288;&#12288;&#12288;&#22788;&#29702;&#20107;&#21153;
&lt;/p&gt;
&lt;p&gt;
   &#12288;&#12288;&#22870;&#36175;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#28165;&#33030;&#30340;&#38083;&#21709;&#12289;&#26631;&#35760;&#30058;&#33540;&#30340;&#25104;&#23601;&#24863;&#12289;&#20241;&#24687;&#26102;&#38388;&#30340;&#25918;&#26494;
&lt;/p&gt;
&lt;p&gt;
   &#32780;&#20064;&#24815;&#22238;&#36335;&#30340;&#24418;&#25104;&#20063;&#23481;&#26131;&#21457;&#29616;&#65292;&#27599;&#22825;&#19968;&#26089;&#26469;&#21040;&#20844;&#21496;&#65292;&#35841;&#19981;&#28212;&#26395;&#20170;&#22825;&#33021;&#22815;&#36807;&#24471;&#20805;&#28385;&#25104;&#23601;&#24863;&#12289;&#20241;&#24687;&#26102;&#33021;&#22815;&#27627;&#26080;&#39038;&#24524;&#21602;&#12290;
&lt;/p&gt;
&lt;p&gt;
   &#36981;&#20174;&#20064;&#24815;&#27861;&#21017;&#30340;&#26041;&#27861;&#35770;&#25165;&#20250;&#26356;&#23481;&#26131;&#23637;&#24320;&#24182;&#38271;&#20037;&#22320;&#22362;&#25345;&#19979;&#21435;&#12290;
&lt;/p&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;div id="outline-container-5" class="outline-3"&gt;
&lt;h3 id="sec-5"&gt;&#21442;&#32771;&#36164;&#26009;&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-5"&gt;

&lt;p&gt;   &lt;a href="http://www.pomodorotechnique.com/download/pdf/ThePomodoroTechnique-CHN_v1-3.pdf"&gt;&#12298;&#30058;&#33540;&#24037;&#20316;&#27861;&#12299;&lt;/a&gt;
   &lt;a href="http://baike.baidu.com/view/5259318.htm"&gt;&#30058;&#33540;&#24037;&#20316;&#27861;&lt;sub&gt;&#30334;&#24230;&#30334;&#31185;&lt;/sub&gt;&lt;/a&gt;
   &lt;a href="http://pomodoro.kankanan.com"&gt;&#30058;&#33540;&#24037;&#20316;&#27861;&#22312;&#32447;&#26381;&#21153;&lt;/a&gt;
&lt;/p&gt;&lt;/div&gt;
&lt;/div&gt;
</content></entry><entry><title type="html">《理解Node.js》培训课件</title><author><name>nil</name></author><link href="http://blog.kankanan.com/posts/2013/07/04_300a740689e3node2ejs300b57f98bad8bfe4ef6.html"/><updated>2013-07-04T18:31:00Z</updated><published>2013-07-04T18:31:00Z</published><id>posts/2013/07/04_300a740689e3node2ejs300b57f98bad8bfe4ef6.html</id><category scheme="/tags/node.html" term="node" label="node"/><content type="html">&lt;p&gt;
  &#26412;&#35838;&#20214;&#20171;&#32461;Node.js&#30340;&#29305;&#28857;&#21450;&#20854;&#21021;&#27493;&#20351;&#29992;&#12290;
&lt;/p&gt;

&lt;div id="outline-container-1" class="outline-3"&gt;
&lt;h3 id="sec-1"&gt;&#24320;&#21457;&#35745;&#21010; [1/3]&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-1"&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;[X]&lt;/code&gt; &#32534;&#20889;&#22823;&#32434;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;[&amp;nbsp;]&lt;/code&gt; &#32534;&#20889;&#20869;&#23481;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;[&amp;nbsp;]&lt;/code&gt; &#21046;&#20316;Microsoft PowerPoint&#26684;&#24335;&#25991;&#26723;
&lt;/li&gt;
&lt;/ul&gt;


&lt;/div&gt;

&lt;/div&gt;

&lt;div id="outline-container-2" class="outline-3"&gt;
&lt;h3 id="sec-2"&gt;&#22312;&#32447;&#28436;&#31034;&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-2"&gt;

&lt;p&gt;   &lt;a href="http://blog.kankanan.com/slides/&#29702;&#35299;Node.js.html"&gt;&#12298;&#29702;&#35299;Node.js&#12299;&lt;/a&gt;
&lt;/p&gt;&lt;/div&gt;
&lt;/div&gt;
</content></entry><entry><title type="html">linux下翻墙访问bitbucket.org仓库</title><author><name>nil</name></author><link href="http://blog.kankanan.com/posts/2013/06/28_linux4e0b7ffb58998bbf95eebitbucket2eorg4ed35e93.html"/><updated>2013-06-28T13:57:00Z</updated><published>2013-06-28T13:57:00Z</published><id>posts/2013/06/28_linux4e0b7ffb58998bbf95eebitbucket2eorg4ed35e93.html</id><category scheme="/tags/linux.html" term="linux" label="linux"/><category scheme="/tags/hg.html" term="hg" label="hg"/><category scheme="/tags/bitbucket.html" term="bitbucket" label="bitbucket"/><content type="html">&lt;p&gt;
  &#20170;&#22825;&#24448;bitbucket.org push&#26102;&#25165;&#21457;&#29616;bitbucket&#34987;GFW&#20102;&#12290;&#25105;&#30340;&#20179;&#24211;&#20026;Mercurial hg&#65292;hg&#39033;&#30446;&#26681;&#30446;&#24405;&#19979;&#30340; &lt;code&gt;.hg/hgrc&lt;/code&gt; &#37197;&#32622;&#25991;&#20214;&#20013;&#21487;&#25351;&#23450;http_proxy&#65292;&#35797;&#20102;&#19968;&#19979;&#19981;&#25903;&#25345;socks&#20195;&#29702;&#65288;&#25105;&#30340;&#27983;&#35272;&#22120;&#29992;&#23427;&#26469;&#32763;&#22681;&#65289;&#65292;&#26368;&#32456;&#20351;&#29992;tsocks&#36719;&#20214;&#23454;&#29616;&#32763;&#22681;&#35775;&#38382;bitbucket.org&#20179;&#24211;&#12290;
&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&#21033;&#29992;vps&#24314;&#26412;&#22320;socks&#20195;&#29702;&#30340;&#33050;&#26412; &lt;code&gt;ssh_proxy.sh&lt;/code&gt;



&lt;pre class="src src-sh"&gt;&lt;span style="color: #888a85;"&gt;#&lt;/span&gt;&lt;span style="color: #888a85;"&gt;!/bin/&lt;/span&gt;&lt;span style="color: #729fcf; font-weight: bold;"&gt;bash&lt;/span&gt;

&lt;span style="color: #eeeeec;"&gt;n&lt;/span&gt;=&lt;span style="color: #fa8072;"&gt;`ps waux | grep 'bash .*/ssh_proxy.sh' | grep -v grep | wc -l`&lt;/span&gt;
&lt;span style="color: #729fcf; font-weight: bold;"&gt;if&lt;/span&gt; [ $&lt;span style="color: #eeeeec;"&gt;n&lt;/span&gt; -lt 3 ]; &lt;span style="color: #729fcf; font-weight: bold;"&gt;then&lt;/span&gt;
    &lt;span style="color: #729fcf; font-weight: bold;"&gt;while&lt;/span&gt; [ true ]; &lt;span style="color: #729fcf; font-weight: bold;"&gt;do&lt;/span&gt;
        &lt;span style="color: #eeeeec;"&gt;n&lt;/span&gt;=&lt;span style="color: #fa8072;"&gt;`ps aux | grep 'ssh' | grep '7070' | grep -v grep | wc -l`&lt;/span&gt;
        &lt;span style="color: #729fcf; font-weight: bold;"&gt;if&lt;/span&gt; [ $&lt;span style="color: #eeeeec;"&gt;n&lt;/span&gt; -lt 1 ]; &lt;span style="color: #729fcf; font-weight: bold;"&gt;then&lt;/span&gt;
            &lt;span style="color: #729fcf;"&gt;echo&lt;/span&gt; &lt;span style="color: #ad7fa8; font-style: italic;"&gt;"start ssh connecting"&lt;/span&gt;
            ssh -qTnNf -D 7070 user@host
        &lt;span style="color: #729fcf; font-weight: bold;"&gt;fi&lt;/span&gt;
        &lt;span style="color: #729fcf;"&gt;echo&lt;/span&gt; &lt;span style="color: #ad7fa8; font-style: italic;"&gt;"wait for next checking"&lt;/span&gt;
        sleep 30
    &lt;span style="color: #729fcf; font-weight: bold;"&gt;done&lt;/span&gt;
&lt;span style="color: #729fcf; font-weight: bold;"&gt;fi&lt;/span&gt;
&lt;span style="color: #729fcf;"&gt;echo&lt;/span&gt; &lt;span style="color: #ad7fa8; font-style: italic;"&gt;"ssh_proxy.sh already running"&lt;/span&gt;

&lt;/pre&gt;


&lt;p&gt;
    &#35831;&#23558;user@host&#25913;&#20026;&#20320;&#30340;vps&#29992;&#25143;&#21450;&#20027;&#26426;&#65292;&#24182;&#37197;&#32622;&#20026;&#20813;&#36755;&#20837;&#23494;&#30721;&#12290;
&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&#21551;&#21160;socks&#20195;&#29702;&#33050;&#26412;




&lt;pre class="src src-sh"&gt;nohup bash ./ssh_proxy.sh &amp;amp;
&lt;/pre&gt;


&lt;p&gt;
    &#27983;&#35272;&#22120;&#20063;&#21487;&#20197;&#21033;&#29992;&#23427;&#26469;&#32763;&#22681;&#12290;
&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&#23433;&#35013;tsocks



&lt;pre class="src src-sh"&gt;yaourt -S tsocks
&lt;/pre&gt;


&lt;/li&gt;
&lt;li&gt;&#37197;&#32622;tsocks

&lt;p&gt;
    &lt;code&gt;/etc/tsocks.conf&lt;/code&gt;
&lt;/p&gt;


&lt;pre class="example"&gt;# We can access 192.168.0.* directly
local = 192.168.0.0/255.255.255.0
local = 10.0.0.0/255.0.0.0

# Otherwise we use the server
server = 127.0.0.1
server_port = 7070
&lt;/pre&gt;

&lt;p&gt;
    &#20855;&#20307;&#29992;&#27861; &lt;code&gt;man tsocks.conf&lt;/code&gt;
&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&#20351;&#29992;tsocks&#35753;hg&#29992;&#19978;socks&#20195;&#29702;&#21151;&#33021;



&lt;pre class="src src-sh"&gt;tsocks hg push
&lt;/pre&gt;

&lt;p&gt;
    tsocks&#30475;&#36215;&#26469;&#24456;&#36890;&#29992;&#65292;&#24212;&#35813;&#20063;&#21487;&#20197;&#35753;git&#31561;&#36827;&#34892;socks&#20195;&#29702;&#35775;&#38382;&#12290;
&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

</content></entry><entry><title type="html">Archlinux下解决更新grub后无法进入gnome3桌面的问题</title><author><name>nil</name></author><link href="http://blog.kankanan.com/posts/2013/06/26_archlinux4e0b89e351b366f465b0grub540e65e06cd58fdb5165gnome3684c9762768495ee9898.html"/><updated>2013-06-26T10:07:00Z</updated><published>2013-06-26T10:07:00Z</published><id>posts/2013/06/26_archlinux4e0b89e351b366f465b0grub540e65e06cd58fdb5165gnome3684c9762768495ee9898.html</id><category scheme="/tags/archlinux.html" term="archlinux" label="archlinux"/><content type="html">&lt;p&gt;
  &#22312;&#21551;&#21160;&#30028;&#38754;&#19978;&#20250;&#30475;&#21040;&#20197;&#19979;&#38169;&#35823;&#26085;&#24535;&#65306;
&lt;/p&gt;


&lt;pre class="example"&gt;kernel: [    8.398186] [drm:radeon_init] *ERROR* No UMS support in radeon module!
&lt;/pre&gt;


&lt;p&gt;
  &#36825;&#20010;&#26159;&#30001;&#20110;grub&#37197;&#32622;&#25991;&#20214;&#20013;&#25351;&#23450;&#20102;&#20869;&#26680;&#21442;&#25968; &lt;code&gt;nomodeset&lt;/code&gt; &#23548;&#33268;&#65292;linux&#30340;&#40664;&#35748;&#37197;&#32622;&#26159;&#20026;&#20102;&#36816;&#34892;&#26381;&#21153;&#22120;&#65292;&#20197;&#20943;&#23569;&#21551;&#21160;&#36807;&#31243;&#20013;&#20986;&#38169;&#30340;&#21487;&#33021;&#24615;&#65292;&#20351;&#29992;gnome3&#26700;&#38754;&#26102;&#65292;&#38656;&#21435;&#25481;&#20869;&#26680;&#21442;&#25968; &lt;code&gt;nomodeset&lt;/code&gt; &#65292;&#20197;&#19979;&#20026;&lt;a href="https://wiki.archlinux.org/index.php/ATI#Disable_KMS"&gt;&#21407;&#25991;&lt;/a&gt;&#65306;
&lt;/p&gt;



&lt;pre class="example"&gt;Note: Adding nomodeset to the kernel boot line might prevent GNOME 3's gnome-shell or KDE's desktop effects from running.
&lt;/pre&gt;

</content></entry><entry><title type="html">《理解Http与Spdy协议》培训课件</title><author><name>nil</name></author><link href="http://blog.kankanan.com/posts/2013/05/23_300a740689e3http4e0espdy534f8bae300b57f98bad8bfe4ef6.html"/><updated>2013-05-23T13:11:00Z</updated><published>2013-05-23T13:11:00Z</published><id>posts/2013/05/23_300a740689e3http4e0espdy534f8bae300b57f98bad8bfe4ef6.html</id><category scheme="/tags/http.html" term="http" label="http"/><category scheme="/tags/spdy.html" term="spdy" label="spdy"/><content type="html">&lt;p&gt;
  &#26412;&#35838;&#20214;&#38024;&#23545;&#21018;&#20837;&#32844;&#30340;&#27605;&#19994;&#29983;&#65292;&#35762;&#35299;Http&#19982;Spdy&#21327;&#35758;&#30340;&#22522;&#30784;&#30693;&#35782;&#12290;
&lt;/p&gt;

&lt;div id="outline-container-1" class="outline-3"&gt;
&lt;h3 id="sec-1"&gt;&#24320;&#21457;&#35745;&#21010; [1/5]&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-1"&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;[X]&lt;/code&gt; &#32534;&#20889;Http&#37096;&#20998;&#22823;&#32434;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;[&amp;nbsp;]&lt;/code&gt; &#32534;&#20889;Http&#37096;&#20998;&#31456;&#33410;&#20869;&#23481;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;[&amp;nbsp;]&lt;/code&gt; &#32534;&#20889;Spdy&#37096;&#20998;&#22823;&#32434;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;[&amp;nbsp;]&lt;/code&gt; &#32534;&#20889;Spdy&#37096;&#20998;&#31456;&#33410;&#20869;&#23481;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;[&amp;nbsp;]&lt;/code&gt; &#21046;&#20316;Microsoft PowerPoint&#26684;&#24335;&#25991;&#26723;
&lt;/li&gt;
&lt;/ul&gt;


&lt;/div&gt;

&lt;/div&gt;

&lt;div id="outline-container-2" class="outline-3"&gt;
&lt;h3 id="sec-2"&gt;&#22312;&#32447;&#28436;&#31034;&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-2"&gt;

&lt;p&gt;   &lt;a href="http://blog.kankanan.com/slides/&#29702;&#35299;Http&#19982;Spdy&#21327;&#35758;.html"&gt;&#12298;&#29702;&#35299;Http&#19982;Spdy&#21327;&#35758;&#12299;&lt;/a&gt;
&lt;/p&gt;&lt;/div&gt;
&lt;/div&gt;
</content></entry><entry><title type="html">log4php初步使用</title><author><name>nil</name></author><link href="http://blog.kankanan.com/posts/2013/05/06_log4php521d6b654f7f7528.html"/><updated>2013-05-06T18:32:00Z</updated><published>2013-05-06T18:32:00Z</published><id>posts/2013/05/06_log4php521d6b654f7f7528.html</id><category scheme="/tags/log4php.html" term="log4php" label="log4php"/><content type="html">&lt;div id="outline-container-1" class="outline-3"&gt;
&lt;h3 id="sec-1"&gt;&#31616;&#20171;&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-1"&gt;

&lt;p&gt;   apache&#20986;&#21697;&#24517;&#23646;&#31934;&#21697;&#12290;&#27491;&#23447;php&#26085;&#24535;&#24211;&#65292;&#19982;log4j&#19968;&#33033;&#30456;&#25215;&#12290;
&lt;/p&gt;
&lt;p&gt;
   &lt;a href="http://logging.apache.org/log4php/"&gt;http://logging.apache.org/log4php/&lt;/a&gt;
&lt;/p&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;div id="outline-container-2" class="outline-3"&gt;
&lt;h3 id="sec-2"&gt;&#23433;&#35013;&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-2"&gt;

&lt;p&gt;   &#21442;&#32771;&#65306;&lt;a href="http://logging.apache.org/log4php/install.html"&gt;http://logging.apache.org/log4php/install.html&lt;/a&gt;
&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&#26377;root&#26435;&#38480;&#65292;&#23433;&#35013;&#21040;&#31995;&#32479;&#30446;&#24405;




&lt;pre class="src src-sh"&gt;sudo apt-get install php-pear
sudo pear channel-discover pear.apache.org/log4php
sudo pear install log4php/Apache_log4php
&lt;/pre&gt;


&lt;/li&gt;
&lt;li&gt;&#27809;&#26377;root&#26435;&#38480;&#65292;&#23433;&#35013;&#21040;&#24403;&#21069;&#30446;&#24405;&#19979;




&lt;pre class="src src-sh"&gt;&lt;span style="color: #729fcf;"&gt;cd&lt;/span&gt; libs
wget http://mirrors.tuna.tsinghua.edu.cn/apache/logging/log4php/2.3.0/apache-log4php-2.3.0-src.tar.gz
tar xzvf apache-log4php-2.3.0-src.tar.gz
ln -sf apache-log4php-2.3.0/src/main/php ./log4php
&lt;/pre&gt;

&lt;/li&gt;
&lt;/ul&gt;


&lt;/div&gt;

&lt;/div&gt;

&lt;div id="outline-container-3" class="outline-3"&gt;
&lt;h3 id="sec-3"&gt;&#20351;&#29992;&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-3"&gt;


&lt;ul&gt;
&lt;li&gt;&#36827;&#34892;&#19968;&#19979;&#23553;&#35013;&#23450;&#21046;&#65292;&#21487;&#20197;&#28385;&#36275;&#32477;&#22823;&#37096;&#20998;&#24773;&#20917;&#19979;&#30340;&#20351;&#29992;

&lt;ul&gt;
&lt;li&gt;&#31867;&#20284;nginx&#30340;&#35775;&#38382;&#26085;&#24535;&#35760;&#24405;&#26684;&#24335;
&lt;/li&gt;
&lt;li&gt;&#26085;&#24535;&#20013;&#36755;&#20986;&#25991;&#20214;&#21517;&#21450;&#34892;&#21495;
&lt;/li&gt;
&lt;li&gt;&#26085;&#24535;&#25991;&#20214;&#25968;&#25454;&#38480;&#21046;&#20026;10&#20010;&#65292;&#27599;&#20010;&#26085;&#24535;&#25991;&#20214;&#22823;&#23567;&#20026;10MB
&lt;/li&gt;
&lt;/ul&gt;

&lt;/li&gt;
&lt;/ul&gt;




&lt;div class="o-blog-source"&gt;&lt;a class="btn btn-info" data-toggle="modal" data-target="#logging2einc" &gt;&lt;i class="icon-file icon-white"&gt;&lt;/i&gt;&amp;nbsp;logging.inc&lt;/a&gt;&lt;/div&gt;&lt;div class="modal fade hide" id="logging2einc"&gt;&lt;div class="modal-header"&gt;&lt;a class="close" data-dismiss="modal"&gt;&#215;&lt;/a&gt;&lt;h3&gt;logging.inc&lt;/h3&gt;&lt;/div&gt;&lt;div class="modal-body"&gt;&lt;pre&gt;
&amp;lt;?php
  /// please define LOGGING_APPNAME before include this file.
  /// e.g:
  ///    define('LOGGING_APPNAME', 'example_app');
  ///    require_once(dirname(__FILE__) . &lt;span style="color: #ad7fa8; font-style: italic;"&gt;"/logging.inc"&lt;/span&gt;);

if(file_exists(dirname(__FILE__) . '/libs/log4php/Logger.php')){
  require_once(dirname(__FILE__) . '/libs/log4php/Logger.php');
}else{
  require_once('log4php/Logger.php');
}

Logger::configure(array('rootLogger' =&amp;gt; array('appenders' =&amp;gt; array('default')),
                        'appenders' =&amp;gt; array('default' =&amp;gt; array('class' =&amp;gt; 'LoggerAppenderRollingFile',
                                                                'layout' =&amp;gt; array('class' =&amp;gt; 'LoggerLayoutPattern',
                                                                                  'params' =&amp;gt; array('conversionPattern' =&amp;gt; '%date{Y-m-d H:i:s,u} [%level] %logger: %msg (%F:%L)%newline%ex')),
                                                                'params' =&amp;gt; array('file' =&amp;gt; dirname(__FILE__) . &lt;span style="color: #ad7fa8; font-style: italic;"&gt;"/logs/"&lt;/span&gt; . LOGGING_APPNAME . &lt;span style="color: #ad7fa8; font-style: italic;"&gt;".log"&lt;/span&gt;,
                                                                                  'append' =&amp;gt; true,
                                                                                  'maxFileSize' =&amp;gt; '10MB',
                                                                                  'maxBackupIndex' =&amp;gt; 10)))));&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;&#20351;&#29992;&#31034;&#20363;

&lt;p&gt;
      &lt;code&gt;example.php&lt;/code&gt;
&lt;/p&gt;


&lt;pre class="src src-php"&gt;&lt;span style="color: #729fcf;"&gt;&amp;lt;?php&lt;/span&gt;
&lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;define&lt;/span&gt;(&lt;span style="color: #ad7fa8; font-style: italic;"&gt;'LOGGING_APPNAME'&lt;/span&gt;, &lt;span style="color: #ad7fa8; font-style: italic;"&gt;'example'&lt;/span&gt;);
&lt;span style="color: #729fcf; font-weight: bold;"&gt;require_once&lt;/span&gt;(&lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;dirname&lt;/span&gt;(&lt;span style="color: #8ae234;"&gt;__FILE__&lt;/span&gt;) . &lt;span style="color: #ad7fa8; font-style: italic;"&gt;"/logging.inc"&lt;/span&gt;);

$&lt;span style="color: #eeeeec;"&gt;logger&lt;/span&gt; = &lt;span style="color: #8ae234; font-weight: bold;"&gt;Logger&lt;/span&gt;::&lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;getLogger&lt;/span&gt;(&lt;span style="color: #ad7fa8; font-style: italic;"&gt;"main"&lt;/span&gt;);
$&lt;span style="color: #eeeeec;"&gt;logger&lt;/span&gt;-&lt;span style="color: #8ae234;"&gt;&amp;gt;&lt;/span&gt;&lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;debug&lt;/span&gt;(&lt;span style="color: #ad7fa8; font-style: italic;"&gt;"info log"&lt;/span&gt;);
$&lt;span style="color: #eeeeec;"&gt;logger&lt;/span&gt;-&amp;gt;&lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;warn&lt;/span&gt;(&lt;span style="color: #ad7fa8; font-style: italic;"&gt;"info log"&lt;/span&gt;);
$&lt;span style="color: #eeeeec;"&gt;logger&lt;/span&gt;-&amp;gt;&lt;span style="color: #eeeeec; background-color: #2e3436;"&gt;error&lt;/span&gt;(&lt;span style="color: #ad7fa8; font-style: italic;"&gt;"info log"&lt;/span&gt;);
&lt;span style="color: #729fcf;"&gt;?&amp;gt;&lt;/span&gt;
&lt;/pre&gt;


&lt;/li&gt;
&lt;li&gt;&#36816;&#34892;&#32467;&#26524;




&lt;pre class="src src-sh"&gt;$ php ./example.php
$ tail -f ./logs/example.log
2013-05-06 18:24:57,925 [DEBUG] main: info log (/home/tangxinfa/php/example.php:6)
2013-05-06 18:24:57,930 [WARN] main: info log (/home/tangxinfa/php/example.php:7)
2013-05-06 18:24:57,930 [ERROR] main: info log (/home/tangxinfa/php/example.php:8)
&lt;/pre&gt;

&lt;/li&gt;
&lt;/ul&gt;

&lt;/div&gt;
&lt;/div&gt;
</content></entry><entry><title type="html">使用o-blog搭建个人博客</title><author><name>nil</name></author><link href="http://blog.kankanan.com/index.html"/><updated>2013-04-09T12:30:00Z</updated><published>2013-04-09T12:30:00Z</published><id>index.html</id><category scheme="/tags/o-blog.html" term="o-blog" label="o-blog"/><content type="html">&lt;p&gt;
  &#26032;&#30340;&#21338;&#23458;&#20351;&#29992;&lt;a href="http://renard.github.com/o-blog"&gt;o-blog&lt;/a&gt;&#25645;&#24314;&#65292;&#20351;&#29992;&#30340;&#26159;&#33258;&#24050;&#30340;&#20998;&#26525;&lt;a href="https://github.com/tangxinfa/o-blog"&gt;tangxinfa-o-blog&lt;/a&gt;&#65292;&#25105;&#30340;&#20998;&#26525;&#20027;&#35201;&#26159;&#23545;&#21407;&#31995;&#32479;&#20570;&#20102;&#19968;&#23450;&#30340;&#31616;&#21270;&#20197;&#20415;&#36866;&#29992;&#20110;&#21019;&#24314;&#20010;&#20154;&#21338;&#23458;&#65292;&#21478;&#20462;&#22797;&#20102;&#19968;&#20123;bug&#65288;&#20027;&#35201;&#26159;&#20013;&#25991;&#30456;&#20851;&#65289;&#65292;&#21487;&#20351;&#29992;&#20197;&#19979;&#37197;&#32622;&#23433;&#35013;&#25105;&#30340;&#20998;&#26525;&#65306;
&lt;/p&gt;


&lt;pre class="src src-lisp"&gt;(setq el-get-sources '((&lt;span style="color: #729fcf;"&gt;:name&lt;/span&gt; tangxinfa-o-blog
                                  &lt;span style="color: #729fcf;"&gt;:type&lt;/span&gt; git 
                                  &lt;span style="color: #729fcf;"&gt;:url&lt;/span&gt; &lt;span style="color: #ad7fa8; font-style: italic;"&gt;"https://github.com/tangxinfa/o-blog.git"&lt;/span&gt;
                                  &lt;span style="color: #729fcf;"&gt;:load&lt;/span&gt; &lt;span style="color: #ad7fa8; font-style: italic;"&gt;"o-blog.el"&lt;/span&gt;
                                  &lt;span style="color: #729fcf;"&gt;:features&lt;/span&gt; o-blog)))
&lt;/pre&gt;


&lt;pre class="src src-sh"&gt;M-x el-get-install tangxinfa-o-blog
&lt;/pre&gt;


&lt;p&gt;
  &#20855;&#20307;&#20351;&#29992;&#21487;&#21442;&#32771;&#26412;&#21338;&#23458;&#30340;&#21407;&#22987;org&#25991;&#20214;&#65306;
&lt;/p&gt;



&lt;pre class="src src-sh"&gt;git clone https://github.com/tangxinfa/tangxinfa.github.com.git
&lt;/pre&gt;

</content></entry>
</feed>
