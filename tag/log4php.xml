<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>log4php - 看看俺 – KanKanAn.com</title>
        <description>记我所思，忆我所为。</description>
        <link>http://blog.kankanan.com/tag/log4php.xml</link>
        <lastBuildDate>Wed, 09 Dec 2015 15:08:50 GMT</lastBuildDate>
        <docs>http://blogs.law.harvard.edu/tech/rss</docs>
        <image>
            <title>log4php - 看看俺 – KanKanAn.com</title>
            <url>http://blog.kankanan.com/static/favicon.ico</url>
            <link>http://blog.kankanan.com/tag/log4php.xml</link>
        </image>
        <copyright>版权所有 © 2011-2015 看看俺 – KanKanAn.com</copyright>
        <generator>Feed for Node.js</generator>
        <category>技术</category>
        <item>
            <title><![CDATA[log4php初步使用]]></title>
            <link>/article/log4php-521d6b654f7f7528.html</link>
            <guid>/article/log4php-521d6b654f7f7528.html</guid>
            <pubDate>Mon, 06 May 2013 10:32:00 GMT</pubDate>
            <content:encoded><![CDATA[
<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">简介</h2>
<div class="outline-text-2" id="text-1">
<p>
apache出品必属精品。正宗php日志库，与log4j一脉相承。
</p>

<p>
<a href="http://logging.apache.org/log4php/">http://logging.apache.org/log4php/</a>
</p>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2">安装</h2>
<div class="outline-text-2" id="text-2">
<p>
参考：<a href="http://logging.apache.org/log4php/install.html">http://logging.apache.org/log4php/install.html</a>
</p>

<ul class="org-ul">
<li>有root权限，安装到系统目录

<div class="org-src-container">

<pre class="src src-sh">sudo apt-get install php-pear
sudo pear channel-discover pear.apache.org/log4php
sudo pear install log4php/Apache_log4php
</pre>
</div>
</li>

<li>没有root权限，安装到当前目录下

<div class="org-src-container">

<pre class="src src-sh"><span style="color: #c397d8;">cd</span> libs
wget http://mirrors.tuna.tsinghua.edu.cn/apache/logging/log4php/2.3.0/apache-log<span style="text-decoration: underline;">4php-2.3.0-src.tar.gz</span>
tar xzvf apache-log4php-2.3.0-src.tar.gz
ln -sf apache-log4php-2.3.0/src/main/php ./log4php
</pre>
</div>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3">使用</h2>
<div class="outline-text-2" id="text-3">
<ul class="org-ul">
<li>进行一下封装定制，可以满足绝大部分情况下的使用

<ul class="org-ul">
<li>类似nginx的访问日志记录格式
</li>
<li>日志中输出文件名及行号
</li>
<li>日志文件数据限制为10个，每个日志文件大小为10MB
</li>
</ul>
<p>
<a href="../static/logging.inc">logging.inc</a>
</p>
</li>

<li>使用示例

<p>
<code>example.php</code>
</p>
<div class="org-src-container">

<pre class="src src-php"><span style="color: #c397d8;">&lt;?php</span>
<span style="color: #eaeaea; background-color: #000000;">define(</span><span style="color: #70c0b1;">'LOGGING_APPNAME'</span>, <span style="color: #70c0b1;">'example'</span>);
<span style="color: #b9ca4a;">require_once</span>(<span style="color: #eaeaea; background-color: #000000;">dirname(</span><span style="color: #7aa6da;">__FILE__</span>) . <span style="color: #70c0b1;">"/logging.inc"</span>);

$<span style="color: #e7c547;">logger</span> = <span style="color: #7aa6da;">Logger</span>::<span style="color: #eaeaea; background-color: #000000;">getLogger(</span><span style="color: #70c0b1;">"main"</span>);
$<span style="color: #e7c547;">logger</span>-<span style="color: #7aa6da;">&gt;</span><span style="color: #eaeaea; background-color: #000000;">debug</span>(<span style="color: #70c0b1;">"info log"</span>);
$<span style="color: #e7c547;">logger</span>-&gt;<span style="color: #eaeaea; background-color: #000000;">warn</span>(<span style="color: #70c0b1;">"info log"</span>);
$<span style="color: #e7c547;">logger</span>-&gt;<span style="color: #eaeaea; background-color: #000000;">error</span>(<span style="color: #70c0b1;">"info log"</span>);
<span style="color: #c397d8;">?&gt;</span>
</pre>
</div>
</li>

<li>运行结果

<div class="org-src-container">

<pre class="src src-sh">$ php ./example.php
$ tail -f ./logs/example.log
2013-05-06 18:24:57,925 [DEBUG] main: info log (/home/tangxinfa/php/example.php:<span style="text-decoration: underline;">6)</span>
2013-05-06 18:24:57,930 [WARN] main: info log (/home/tangxinfa/php/example.php:7<span style="text-decoration: underline;">)</span>
2013-05-06 18:24:57,930 [ERROR] main: info log (/home/tangxinfa/php/example.php:<span style="text-decoration: underline;">8)</span>
</pre>
</div>
</li>
</ul>
</div>
</div>
]]></content:encoded>
        </item>
    </channel>
</rss>